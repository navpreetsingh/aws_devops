(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/kCD":function(e,t,i){"use strict";i.d(t,"b",function(){return E}),i.d(t,"a",function(){return P}),i.d(t,"c",function(){return A});var s=i("mrSG"),n=i("o6wD"),a=i("gvJE"),o=i("LvDl"),r=i.n(o),c=i("zP0r"),l=i("V3DN"),d=i("mJ9n"),u=i("zMZL"),h=i("Rm6y"),p=i("fXoL"),m=i("tyNb"),g=i("+sIT"),b=i("S2Qf"),f=i("L+kn"),v=i("ofXK"),_=i("IfWP"),w=i("Ti3B");let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Xb({type:e,selectors:[["ilt-instructor-legacy-iframe"]],inputs:{url:"url"},decls:2,vars:7,consts:[[1,"embedded-iframe-tab"],[3,"url","allowRouteUpdate","allowBreadcrumbsUpdate","allowActionButtonsUpdate","allowRebootLMS","allowStripeOverlayToggle","allowClearHeaderTitle"]],template:function(e,t){1&e&&(p.jc(0,"div",0),p.ec(1,"doc-layout-legacy-wrapper",1),p.ic()),2&e&&(p.Mb(1),p.Dc("url",t.url)("allowRouteUpdate",!1)("allowBreadcrumbsUpdate",!1)("allowActionButtonsUpdate",!1)("allowRebootLMS",!0)("allowStripeOverlayToggle",!1)("allowClearHeaderTitle",!1))},directives:[w.a],styles:["[_nghost-%COMP%]{display:block;height:100%}[_nghost-%COMP%]     .embedded-iframe-tab .legacy-spinner-wrap{height:calc(100% - 50px)}.embedded-iframe-tab[_ngcontent-%COMP%]   .blankslate[_ngcontent-%COMP%]{display:flex;align-items:center;box-sizing:border-box;height:100%}"]}),e})();var C=i("YXR0");function S(e,t){if(1&e&&p.ec(0,"ilt-instructor-legacy-iframe",6),2&e){const e=p.vc(2);p.Dc("url",e.tabTrainingMaterialUrl)}}function T(e,t){if(1&e&&(p.jc(0,"tab",3),p.dd(1,S,1,1,"ilt-instructor-legacy-iframe",5),p.ic()),2&e){const e=p.vc();p.Dc("title",e.trainingMaterialTabTitle)("name",e.tabsParamsName.trainingMaterial)("defaultTab",e.initialTab===e.tabsParamsName.trainingMaterial),p.Mb(1),p.Dc("ngIf",e.wasTabLoaded(e.tabsParamsName.trainingMaterial))}}function k(e,t){if(1&e&&p.ec(0,"ilt-instructor-session-list",7),2&e){const e=p.vc();p.Dc("courseId",e.course.id)}}function I(e,t){if(1&e&&p.ec(0,"ilt-instructor-legacy-iframe",6),2&e){const e=p.vc(2);p.Dc("url",e.tabStatisticUrl)}}function x(e,t){if(1&e&&(p.jc(0,"tab",3),p.dd(1,I,1,1,"ilt-instructor-legacy-iframe",5),p.ic()),2&e){const e=p.vc();p.Dc("title",e.statisticsTabTitle)("name",e.tabsParamsName.statistic)("defaultTab",e.initialTab===e.tabsParamsName.statistic),p.Mb(1),p.Dc("ngIf",e.wasTabLoaded(e.tabsParamsName.statistic))}}function D(e,t){if(1&e&&p.ec(0,"ilt-instructor-legacy-iframe",6),2&e){const e=p.vc(2);p.Dc("url",e.tabReportsUrl)}}function O(e,t){if(1&e&&(p.jc(0,"tab",3),p.dd(1,D,1,1,"ilt-instructor-legacy-iframe",5),p.ic()),2&e){const e=p.vc();p.Dc("title",e.reportsTabTitle)("name",e.tabsParamsName.reports)("defaultTab",e.initialTab===e.tabsParamsName.reports),p.Mb(1),p.Dc("ngIf",e.wasTabLoaded(e.tabsParamsName.reports))}}const E="tab";var P=function(e){return e.trainingMaterial="trainingMaterial",e.sessions="sessions",e.statistic="statistic",e.reports="reports",e}({});const M=P.trainingMaterial;let A=(()=>{class e extends n.g{constructor(e,t,i,s,n,o){super(s),this.route=e,this.router=t,this.docService=i,this.pageService=n,this.iltSessionService=o,this.SUPPORTED_TABS=this.isOnlyEventInstructor?[P.sessions]:[P.trainingMaterial,P.sessions,P.statistic,P.reports],this.trainingMaterialTabTitle=a.a.t("standard","Training materials"),this.sessionsTabTitle=a.a.t("standard","Sessions"),this.reportsTabTitle=a.a.t("standard","_REPORTS"),this.statisticsTabTitle=a.a.t("stats","Session statistics"),this.selectedTabName=P.trainingMaterial,this._loadedTabs=new Map,this._preventNavigation=!1,this._accessToken=u.a.getInstance().get("access_token").access_token}get tabsParamsName(){return P}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e}get tabTrainingMaterialUrl(){return`/lms/index.php?r=ClassroomApp/session/manageLearningObjects&course_id=${this.course.id}&access_token=${this._accessToken}&context=course_management`}get tabReportsUrl(){let e;return e=this.user?`/lms/index.php?r=player/report/byUser&ref_src=admin&course_id=${this.course.id}&user_id=${this.user}`:`/lms/index.php?r=player/report&ref_src=admin&course_id=${this.course.id}`,`${e}&access_token=${this._accessToken}&context=course_management`}get tabStatisticUrl(){return`/admin/index.php?r=reportManagement/classroomCourseReport&course_id=${this.course.id}&access_token=${this._accessToken}&context=course_management`}get isOnlyEventInstructor(){return this.iltSessionService.permissions.isEventInstructor&&!this.iltSessionService.permissions.isSessionInstructor}ngOnInit(){this.course=this.route.snapshot.data.course,this.user=this.route.snapshot.params.id_user,this.setupTabs(),this.setupDocLayout(),window.addEventListener("message",e=>{"legacy.openCourseTab"==e.data.action&&"reports"===e.data.payload.tabId&&this.onTabSelected(P.reports)},!1)}ngAfterViewInit(){r.a.delay(()=>{this.calculateDimensions()},250)}ngOnDestroy(){super.ngOnDestroy(),window.removeEventListener("message",()=>{})}setupDocLayout(e=!1){this.setupBreadcrumbs(),this.docService.header.showTitleBar({title:this.course.name,subtitle:a.a.t("classroom","View your sessions"),fullWidth:!0,mode:"shadowed"}),e||this.docService.page.activateFullHeightMode()}setupTabs(){var e;const t=this.route.snapshot.queryParamMap.get(E),i=null!==(e=r.a.includes(this.SUPPORTED_TABS,t)?t:null)&&void 0!==e?e:M;this.selectedTabName=this.initialTab=i,this._loadedTabs.set(this.initialTab,!0),this.subscribeTo(this.route.queryParamMap.pipe(Object(c.a)(1)).subscribe(e=>{var t;const i=null!==(t=e.get(E))&&void 0!==t?t:M;this._preventNavigation=!0,this.selectTab(i)}))}wasTabLoaded(e){var t;return null!==(t=this._loadedTabs.get(e))&&void 0!==t&&t}selectTab(e){const t=r.a.indexOf(this.SUPPORTED_TABS,e);-1!==t&&this.tabsManager.onTabChoose(t)}onTabSelected(e){return Object(s.a)(this,void 0,void 0,function*(){yield this.adjustQueryString(e),this.selectedTabName!==e&&r.a.includes(this.SUPPORTED_TABS,e)&&(this.selectedTabName=e,this._loadedTabs.set(e,!0))})}setupBreadcrumbs(e=this.selectedTabName){this.docService.breadcrumbs.setHierarchicalBreadcrumbs([{label:h.a.myCoursesAndLearningPlans,href:"/learn/mycourses"},{label:this.course.name,href:`/learn/course/${this.course.id}`},{label:"Instructor Overview",href:`/learn/instructor/course/${this.course.id}`,queryParameters:{tab:e}}])}adjustQueryString(e){return Object(s.a)(this,void 0,void 0,function*(){this.accessToken=u.a.getInstance().get("access_token").access_token,this._preventNavigation?this._preventNavigation=!1:(yield this.router.navigate([],Object.assign({queryParams:{tab:e},relativeTo:this.route,replaceUrl:!0},l.b)),setTimeout(()=>{this.setupDocLayout(!0)}))})}}return e.\u0275fac=function(t){return new(t||e)(p.dc(m.a),p.dc(m.h),p.dc(g.a),p.dc(p.o),p.dc(b.c),p.dc(f.a))},e.\u0275cmp=p.Xb({type:e,selectors:[["ilt-instructor-overview-landing"]],viewQuery:function(e,t){if(1&e&&p.md(d.a,3),2&e){let e;p.Qc(e=p.sc())&&(t.tabsManager=e.first)}},features:[p.Jb],decls:7,vars:7,consts:[[1,"course-edit"],[3,"tabChoose"],[3,"title","name","defaultTab",4,"ngIf"],[3,"title","name","defaultTab"],[3,"courseId",4,"ngIf"],[3,"url",4,"ngIf"],[3,"url"],[3,"courseId"]],template:function(e,t){1&e&&(p.jc(0,"div",0),p.jc(1,"tabs-manager",1),p.rc("tabChoose",function(e){return t.onTabSelected(e)}),p.dd(2,T,2,4,"tab",2),p.jc(3,"tab",3),p.dd(4,k,1,1,"ilt-instructor-session-list",4),p.ic(),p.dd(5,x,2,4,"tab",2),p.dd(6,O,2,4,"tab",2),p.ic(),p.ic()),2&e&&(p.Mb(2),p.Dc("ngIf",!t.isOnlyEventInstructor),p.Mb(1),p.Dc("title",t.sessionsTabTitle)("name",t.tabsParamsName.sessions)("defaultTab",t.initialTab===t.tabsParamsName.sessions),p.Mb(1),p.Dc("ngIf",t.wasTabLoaded(t.tabsParamsName.sessions)),p.Mb(1),p.Dc("ngIf",!t.isOnlyEventInstructor),p.Mb(1),p.Dc("ngIf",!t.isOnlyEventInstructor))},directives:[d.a,v.p,_.a,y,C.a],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]{display:block}.course-edit[_ngcontent-%COMP%]{height:calc(100vh - 172px)}.course-edit[_ngcontent-%COMP%]     .tabs-manager .tabs-labels{padding:0!important}.course-edit[_ngcontent-%COMP%]     .tabs-manager .tabs-content{height:calc(100% - 53px)}@supports (-moz-appearance:none){.course-edit[_ngcontent-%COMP%]     .tabs-manager .tabs-content{height:calc(100vh - 53px)}}.course-edit[_ngcontent-%COMP%]     .tabs-manager .tab.tab-visible{height:100%}"],changeDetection:0}),e})()},"076Y":function(e,t,i){"use strict";i.d(t,"a",function(){return _});var s=i("A+3w"),n=i("/76g"),a=i("TrxT"),o=i("1G5W"),r=i("fXoL"),c=i("XNiG"),l=i("Kj3r"),d=i("eIep"),u=i("lJxs"),h=i("wO+i"),p=i("Y9qQ");let m=(()=>{class e{constructor(e){this.backendService=e,this.searchSources$=new c.a,this.searchSuggestions$=this.searchSources$.pipe(Object(l.a)(500),Object(d.a)(e=>this.search(e)))}search(e){return this.backendService.request("/manage/v1/tags","GET",{search_tag:e.query,page:1,page_size:10}).pipe(Object(u.a)(t=>(t.data.items=t.data.items.map(t=>({name:t.name,id:e.mappedToId?t.id:t.name})),t.data.items)))}add(e){return this.backendService.request("/manage/v1/tags","POST",{tag:e}).pipe(Object(h.a)("data"))}}return e.\u0275fac=function(t){return new(t||e)(r.nc(p.a))},e.\u0275prov=r.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=i("+sIT"),b=i("f2BR"),f=i("gvJE");const v=["tagsMultiSelect"];let _=(()=>{class e extends a.a{constructor(e,t){super(),this.assetTags=e,this.docLayoutService=t,this.preselected=[],this.mappedToId=!1,this.multiSelectMode=s.a.AUTOCOMPLETE,this.multiSelectShowLoader=!1,this.multiSelectSource=[],this.multiSelectPreselected=[],this.dictionary={tagsLabel:n.a.t("app7020","Tags"),multiSelectPlaceholder:n.a.t("standard","Type...")},this.assetTags.searchSuggestions$.pipe(Object(o.a)(this.ngUnsubscribe)).subscribe(e=>{this.multiSelectShowLoader=!1,this.multiSelectSource=e})}ngOnInit(){this.preselected&&this.preselected.length&&(this.multiSelectPreselected=this.preselected.map(e=>e.id),this.multiSelectSource=this.preselected)}searchAvailableTags(e){this.multiSelectSource=[],e.length<3||(this.multiSelectShowLoader=!0,this.assetTags.searchSources$.next({query:e,mappedToId:this.mappedToId}))}addNewTag(e){(null==e?void 0:e.length)&&(this.multiSelectShowLoader=!0,this.assetTags.add(e).subscribe(e=>{const t={id:this.mappedToId?e.id:e.tag,name:e.tag};this.multiSelectSource.push(t),this.tagsMultiSelect.select(t),this.multiSelectShowLoader=!1},()=>{this.docLayoutService.toast.showToast({type:"error",message:n.a.t("standard","_OPERATION_FAILURE")}),this.multiSelectShowLoader=!1}))}markControlAsDirty(){this.inputFormControl.markAsTouched(),this.inputFormControl.markAsDirty(),this.inputFormControl.updateValueAndValidity()}}return e.\u0275fac=function(t){return new(t||e)(r.dc(m),r.dc(g.a))},e.\u0275cmp=r.Xb({type:e,selectors:[["app7020-asset-tags"]],viewQuery:function(e,t){if(1&e&&r.md(v,1),2&e){let e;r.Qc(e=r.sc())&&(t.tagsMultiSelect=e.first)}},inputs:{inputFormControl:"inputFormControl",preselected:"preselected",mappedToId:"mappedToId"},features:[r.Jb],decls:4,vars:18,consts:[[3,"showCounter","showRequiredFieldIndicator","applySourceRegex","suggestionsMaxHeight","max_selectable_items","applyLoaderOffset","canEnterItems","showLoader","mode","label","placeholder","inputFormControl","value","source","onChange","onInputKeyEnter","onItemSelection","onItemDeletion"],["tagsMultiSelect",""]],template:function(e,t){1&e&&(r.jc(0,"multi-select",0,1),r.rc("onChange",function(e){return t.searchAvailableTags(e)})("onInputKeyEnter",function(e){return t.addNewTag(null==e?null:e.controlValue)})("onItemSelection",function(){return t.markControlAsDirty()})("onItemDeletion",function(){return t.markControlAsDirty()}),r.wc(2,"t"),r.wc(3,"t"),r.ic()),2&e&&r.Dc("showCounter",!0)("showRequiredFieldIndicator",!1)("applySourceRegex",!1)("suggestionsMaxHeight",130)("max_selectable_items",50)("applyLoaderOffset",!0)("canEnterItems",!0)("showLoader",t.multiSelectShowLoader)("mode",t.multiSelectMode)("label",r.xc(2,14,t.dictionary.tagsLabel))("placeholder",r.xc(3,16,t.dictionary.multiSelectPlaceholder))("inputFormControl",t.inputFormControl)("value",t.multiSelectPreselected)("source",t.multiSelectSource)},directives:[b.a],pipes:[f.b],styles:[""]}),e})()},"0FX9":function(e,t,i){var s=i("Z92M"),n=i("qmMu"),a=i("QUaw"),o=i("QAZZ");function r(e,t,i,a,o){var r=[].slice.call(arguments,1),c=r.length,l="function"==typeof r[c-1];if(!l&&!s())throw new Error("Callback required as last argument");if(!l){if(c<1)throw new Error("Too few arguments provided");return 1===c?(i=t,t=a=void 0):2!==c||t.getContext||(a=i,i=t,t=void 0),new Promise(function(s,o){try{var r=n.create(i,a);s(e(r,t,a))}catch(c){o(c)}})}if(c<2)throw new Error("Too few arguments provided");2===c?(o=i,i=t,t=a=void 0):3===c&&(t.getContext&&void 0===o?(o=a,a=void 0):(o=a,a=i,i=t,t=void 0));try{var d=n.create(i,a);o(null,e(d,t,a))}catch(u){o(u)}}t.create=n.create,t.toCanvas=r.bind(null,a.render),t.toDataURL=r.bind(null,a.renderToDataURL),t.toString=r.bind(null,function(e,t,i){return o.render(e,i)})},"0vgW":function(e){e.exports=JSON.parse('{"a":{"id":292,"code":null,"names":{"en":"Widget","fa":"Widget","fi":"Widget","it":"Widget"},"descriptions":{"en":"A sample page with widgets","fa":"A sample page with widgets","fi":"A sample page with widgets","it":"A sample page with widgets"},"icon":"zmdi zmdi-view-dashboard","built_in":0,"type":"widget","is_public":0,"published":1,"settings":[],"created_on":null,"updated_on":1519381051,"last_edit_by":{},"widgets":[{"id":"1111","widget":"row","type":"parent","name":{"en":"Row","fa":"Row","fi":"Row","it":"Row"},"settings":{"mode":"boxed"},"contains":[{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":4},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"red"}}]},{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":4},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"green"}}]},{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":4},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"blue"}}]}]},{"id":"1111","widget":"row","type":"parent","name":{"en":"Row","fa":"Row","fi":"Row","it":"Row"},"settings":{"mode":"boxed"},"contains":[{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":4},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"yellow"}}]},{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":8},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"orange"}}]}]},{"id":"1111","widget":"row","type":"parent","name":{"en":"Row","fa":"Row","fi":"Row","it":"Row"},"settings":{"mode":"boxed"},"contains":[{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":8},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"red"}}]},{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":4},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"green"}}]}]},{"id":"1111","widget":"row","type":"parent","name":{"en":"Row","fa":"Row","fi":"Row","it":"Row"},"settings":{"mode":"boxed"},"contains":[{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":12},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"yellow"}}]}]}]}}')},"1frc":function(e,t,i){"use strict";var s=i("Fs3U");i.d(t,"a",function(){return s.a});var n=i("q6/4");i.d(t,"b",function(){return n.a})},"1sBl":function(e,t,i){var s=i("e/Dd").getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,i=s(e),n=145===i?26:2*Math.ceil((i-13)/(2*t-2)),a=[i-7],o=1;o<t-1;o++)a[o]=a[o-1]-n;return a.push(6),a.reverse()},t.getPositions=function(e){for(var i=[],s=t.getRowColCoords(e),n=s.length,a=0;a<n;a++)for(var o=0;o<n;o++)0===a&&0===o||0===a&&o===n-1||a===n-1&&0===o||i.push([s[a],s[o]]);return i}},"1uah":function(e,t,i){"use strict";i.d(t,"a",function(){return c});var s=i("yCtX"),n=i("DH7j"),a=i("7o/Q"),o=i("Lhse"),r=i("zx2A");function c(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),Object(s.a)(e,void 0).lift(new l(t))}class l{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new d(e,this.resultSelector))}}class d extends a.a{constructor(e,t,i=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;Object(n.a)(e)?t.push(new h(e)):t.push("function"==typeof e[o.a]?new u(e[o.a]()):new p(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let i=0;i<t;i++){let t=e[i];t.stillUnsubscribed?this.destination.add(t.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,i=this.destination;for(let a=0;a<t;a++){let t=e[a];if("function"==typeof t.hasValue&&!t.hasValue())return}let s=!1;const n=[];for(let a=0;a<t;a++){let t=e[a],o=t.next();if(t.hasCompleted()&&(s=!0),o.done)return void i.complete();n.push(o.value)}this.resultSelector?this._tryresultSelector(n):i.next(n),s&&i.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class u{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class h{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[o.a](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class p extends r.b{constructor(e,t,i){super(e),this.parent=t,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[o.a](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return Object(r.c)(this.observable,new r.a(this))}}},"2NKM":function(e,t,i){"use strict";i.d(t,"a",function(){return s});class s{}},"2Rox":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=function(e){return e[e.TO_BE_STARTED="to_be_started"]="TO_BE_STARTED",e[e.STARTED="started"]="STARTED",e[e.SUBMITTED="submitted"]="SUBMITTED",e}({})},"3/UW":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{loadOverviewInfo(t,i=!1){return{type:e.LOAD_OVERVIEW_INFO,payload:{courseId:t,sessionId:i}}}loadOvervewInfoSuccess(t){return{type:e.LOAD_OVERVIEW_INFO_SUCCESS,payload:t}}loadOverviewInfoRejected(t){return{type:e.LOAD_OVERVIEW_INFO_REJECTED,payload:t}}requestSessionChange(t){return{type:e.REQUEST_CHANGE,payload:t}}changeSession(t){return{type:e.CHANGE_SESSION,payload:t}}enrollUserToSession(t,i,s){return{type:e.ENROLL_USER_TO_SESSION,payload:{courseId:t,sessionId:i,isEnrolled:s}}}enrollUserToSessionSuccess(t,i){return{type:e.ENROLL_USER_TO_SESSION_SUCCESS,payload:{courseId:t,sessionId:i}}}changeEnrollmentSessionSuccess(t){return{type:e.CHANGE_SESSION_ENROLLMENT_SUCCESS,payload:t}}changeEnrollmentSession(t){return{type:e.CHANGE_SESSION_ENROLLMENT,payload:{new_session_id:t.new_session.id,old_session_id:t.old_session_id,course_id:t.course_id,new_session:t.new_session}}}changeEnrollmentSessionError(t){return{type:e.CHANGE_SESSION_ENROLLMENT_ERROR,payload:t}}}return e.LOAD_OVERVIEW_INFO="[Overview] Load Overview Info",e.LOAD_OVERVIEW_INFO_SUCCESS="[Overview] Load Overview Info Success",e.LOAD_OVERVIEW_INFO_REJECTED="[Overview] Load Overview Info Rejected",e.REQUEST_CHANGE="[Overview] Request change",e.CHANGE_SESSION="[Overview] Change Session",e.ENROLL_USER_TO_SESSION="[Overview] Enroll User to session",e.ENROLL_USER_TO_SESSION_SUCCESS="[Overview] Enroll User to session success",e.CHANGE_SESSION_ENROLLMENT_SUCCESS="[Overview] Change user enrollment session success",e.CHANGE_SESSION_ENROLLMENT="[Overview] Change user enrollment session",e.CHANGE_SESSION_ENROLLMENT_ERROR="[Overview] Change user enrollment session error",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Zb({token:e,factory:e.\u0275fac}),e})()},"3X7Y":function(e,t,i){var s=i("u/Db");function n(e){this.mode=s.NUMERIC,this.data=e.toString()}n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){var t,i,s;for(t=0;t+3<=this.data.length;t+=3)i=this.data.substr(t,3),s=parseInt(i,10),e.put(s,10);var n=this.data.length-t;n>0&&(i=this.data.substr(t),s=parseInt(i,10),e.put(s,3*n+1))},e.exports=n},"3pRn":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{setInitialState(){return{type:e.SET_INITIAL_STATE}}loadLaunchParams(t){return{type:e.LOAD_LAUNCH_PARAMS,payload:t}}reloadLaunchParams(t){return{type:e.RELOAD_LAUNCH_PARAMS,payload:t}}reloadQuizMaxScore(t){return{type:e.RELOAD_QUIZ_MAX_SCORE,payload:t}}startPlaying(t){return{type:e.START_PLAYING,payload:t}}retakeTheTest(t){return{type:e.RETAKE_THE_TEST,payload:t}}continuePlaying(t){return{type:e.CONTINUE_PLAYING,payload:t}}leaveReviewMode(){return{type:e.LEAVE_REVIEW_MODE}}leavePlayMode(t){return{type:e.LEAVE_PLAY_MODE,payload:t}}goToPrevPage(t){return{type:e.GO_TO_PREV_PAGE,payload:t}}goToNextPage(t){return{type:e.GO_TO_NEXT_PAGE,payload:t}}goToPageSuccess(t){return{type:e.GO_TO_PAGE_SUCCESS,payload:t}}quizActionRejected(t){return{type:e.QUIZ_ACTION_REJECTED,payload:t}}submitQuizPartial(t){return{type:e.SUBMIT_QUIZ_PARTIAL,payload:t}}submitQuizPartialSuccess(t){return{type:e.SUBMIT_QUIZ_PARTIAL_SUCCESS,payload:t}}timeEnabledForceExit(t){return{type:e.TIME_ENABLED_FORCE_EXIT,payload:t}}timeElapsedSubmit(t){return{type:e.TIME_ELAPSED_SUBMIT,payload:t}}submitQuiz(t){return{type:e.SUBMIT_QUIZ,payload:t}}submitQuizSuccess(t){return{type:e.SUBMIT_QUIZ_SUCCESS,payload:t}}showReview(t){return{type:e.SHOW_REVIEW,payload:t}}showReviewSuccess(t){return{type:e.SHOW_REVIEW_SUCCESS,payload:t}}}return e.SET_INITIAL_STATE="[QuizPlayer] Set Initial State",e.LOAD_LAUNCH_PARAMS="[QuizPlayer] Load Launch params",e.RELOAD_LAUNCH_PARAMS="[QuizPlayer] Reload Launch params",e.RELOAD_QUIZ_MAX_SCORE="[QuizPlayer] Reload quiz max score",e.START_PLAYING="[QuizPlayer] Start playing",e.RETAKE_THE_TEST="[QuizPlayer] Retake the test",e.CONTINUE_PLAYING="[QuizPlayer] Continue playing",e.LEAVE_REVIEW_MODE="[QuizPlayer] Leave Quiz Review Mode",e.LEAVE_PLAY_MODE="[QuizPlayer] Leave Quiz Play Mode",e.GO_TO_PREV_PAGE="[QuizPlayer] Go to prev page",e.GO_TO_NEXT_PAGE="[QuizPlayer] Go to next page",e.GO_TO_PAGE_SUCCESS="[QuizPlayer] Go to page SUCCESS",e.QUIZ_ACTION_REJECTED="[QuizPlayer] Go to page REJECTED",e.SUBMIT_QUIZ_PARTIAL="[QuizPlayer] Submit Quiz Partial",e.SUBMIT_QUIZ_PARTIAL_SUCCESS="[QuizPlayer] Submit Quiz Partial SUCCESS",e.TIME_ENABLED_FORCE_EXIT="[QuizPlayer] Time Enabled force Exit",e.TIME_ELAPSED_SUBMIT="[QuizPlayer] Time Elapsed Submit Quiz",e.SUBMIT_QUIZ="[QuizPlayer] Submit Quiz",e.SUBMIT_QUIZ_SUCCESS="[QuizPlayer] Submit Quiz SUCCESS",e.SHOW_REVIEW="[QuizPlayer] Show review",e.SHOW_REVIEW_SUCCESS="[QuizPlayer] Show review SUCCESS",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Zb({token:e,factory:e.\u0275fac}),e})()},"3t6O":function(e,t,i){"use strict";i.d(t,"q",function(){return s.b}),i.d(t,"p",function(){return s.a}),i.d(t,"x",function(){return n.a}),i.d(t,"u",function(){return a.d}),i.d(t,"r",function(){return a.a}),i.d(t,"s",function(){return a.b}),i.d(t,"t",function(){return a.c}),i.d(t,"g",function(){return o.h}),i.d(t,"c",function(){return o.d}),i.d(t,"n",function(){return o.n}),i.d(t,"b",function(){return o.c}),i.d(t,"d",function(){return o.e}),i.d(t,"v",function(){return o.p}),i.d(t,"a",function(){return o.a}),i.d(t,"h",function(){return o.i}),i.d(t,"l",function(){return o.k}),i.d(t,"k",function(){return o.j}),i.d(t,"o",function(){return o.o}),i.d(t,"w",function(){return o.q}),i.d(t,"y",function(){return o.r}),i.d(t,"m",function(){return o.l}),i.d(t,"e",function(){return o.f}),i.d(t,"f",function(){return o.g}),i.d(t,"i",function(){return r}),i.d(t,"j",function(){return c.a});var s=i("sVTu"),n=i("2Rox"),a=i("wqqH"),o=i("Karm");let r=(()=>{class e{}return e.folders=[],e})();var c=i("Up5I")},"49sm":function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},"5EG7":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var s=i("fXoL"),n=i("ofXK"),a=i("nUpK");function o(e,t){1&e&&s.ec(0,"ui-icon",2),2&e&&s.Dc("name","check")("size","sm")}let r=(()=>{class e{constructor(){this.selected=new s.q}onClick(){this.selected.emit(this.skill)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xb({type:e,selectors:[["skill-chip"]],hostAttrs:[1,"bg-grey-light"],hostBindings:function(e,t){1&e&&s.rc("click",function(){return t.onClick()})},inputs:{skill:"skill"},outputs:{selected:"selected"},decls:3,vars:2,consts:[["class","skill-chip-icon",3,"name","size",4,"ngIf"],[1,"skill-chip-label"],[1,"skill-chip-icon",3,"name","size"]],template:function(e,t){1&e&&(s.dd(0,o,1,2,"ui-icon",0),s.jc(1,"span",1),s.fd(2),s.ic()),2&e&&(s.Dc("ngIf",t.skill.isSelected),s.Mb(2),s.gd(t.skill.name))},directives:[n.p,a.Eb],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}skill-chip{position:relative;font-size:14px;line-height:20px;display:inline-flex;padding:5px 12px 6px;border-radius:2px;cursor:pointer}.router-outlet:not(.direction-rtl):not(.heracles-root) skill-chip{margin:0 8px 8px 0}.router-outlet.direction-rtl:not(.heracles-root) skill-chip{margin:0 0 8px 8px}"],encapsulation:2,changeDetection:0}),e})()},"5wvl":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=function(e){return e.PLATFORM="platform",e.ALL="all",e.AI="ai",e}({})},"6CNT":function(e,t,i){"use strict";i.d(t,"a",function(){return p});var s=i("fXoL"),n=i("A+3w"),a=i("/76g"),o=i("sknK"),r=i("TrxT"),c=i("1G5W"),l=i("S2Qf"),d=i("f2BR"),u=i("gvJE");const h=["skillsMultiSelect"];let p=(()=>{class e extends r.a{constructor(e,t,i){super(),this.assetSkillsService=e,this.changeDetectorRef=t,this._toggleService=i,this.preselected=[],this.mappedToId=!1,this.maxSelectableItems=50,this.itemSelected=new s.q,this.itemDeselected=new s.q,this.selectedItemsChanged=new s.q,this.multiSelectMode=n.a.AUTOCOMPLETE,this.multiSelectShowLoader=!1,this.multiSelectSource=[],this.multiSelectPreselected=[],this.dictionary={skillsLabel:a.a.t("standard","Skills"),multiSelectPlaceholder:a.a.t("standard","Type...")},this.assetSkillsService.searchSuggestions$.pipe(Object(c.a)(this.ngUnsubscribe)).subscribe(e=>{this.multiSelectShowLoader=!1,this.multiSelectSource=e,this.changeDetectorRef.detectChanges()})}ngOnInit(){this.preselected&&this.preselected.length&&(this.multiSelectPreselected=this.preselected.map(e=>e.id),this.multiSelectSource=this.preselected),this._toggleService.isOn(l.f.TOGGLE_CUSTOM_SKILLS)&&this.assetSkillsService.init().subscribe()}searchAvailableSkills(e){this.multiSelectSource=[],e.length<3||(this.multiSelectShowLoader=!0,this.assetSkillsService.searchSources$.next({query:e,mappedToId:this.mappedToId}))}onItemSelected(e){this._manageSelected(),this.itemSelected.emit(e.id),this._markControlAsDirty()}onItemDeselected(e){this._manageSelected(),this.itemDeselected.emit(e.id),this._markControlAsDirty()}toggleElement(e){this.skillsMultiSelect.select(e,!0)}_manageSelected(){this.selectedItemsChanged.emit(this.skillsMultiSelect.selectedItems)}_markControlAsDirty(){this.inputFormControl.markAsTouched(),this.inputFormControl.markAsDirty(),this.inputFormControl.updateValueAndValidity()}}return e.\u0275fac=function(t){return new(t||e)(s.dc(o.a),s.dc(s.i),s.dc(l.g))},e.\u0275cmp=s.Xb({type:e,selectors:[["app7020-asset-skills"]],viewQuery:function(e,t){if(1&e&&s.md(h,1),2&e){let e;s.Qc(e=s.sc())&&(t.skillsMultiSelect=e.first)}},inputs:{inputFormControl:"inputFormControl",preselected:"preselected",mappedToId:"mappedToId",maxSelectableItems:"maxSelectableItems"},outputs:{itemSelected:"itemSelected",itemDeselected:"itemDeselected",selectedItemsChanged:"selectedItemsChanged"},features:[s.Lb([o.a]),s.Jb],decls:4,vars:18,consts:[[3,"showCounter","showRequiredFieldIndicator","applySourceRegex","suggestionsMaxHeight","max_selectable_items","applyLoaderOffset","canEnterItems","showLoader","mode","label","placeholder","inputFormControl","value","source","onChange","onItemSelection","onItemDeletion"],["skillsMultiSelect",""]],template:function(e,t){1&e&&(s.jc(0,"multi-select",0,1),s.rc("onChange",function(e){return t.searchAvailableSkills(e)})("onItemSelection",function(e){return t.onItemSelected(e)})("onItemDeletion",function(e){return t.onItemDeselected(e)}),s.wc(2,"t"),s.wc(3,"t"),s.ic()),2&e&&s.Dc("showCounter",!0)("showRequiredFieldIndicator",!1)("applySourceRegex",!1)("suggestionsMaxHeight",130)("max_selectable_items",t.maxSelectableItems)("applyLoaderOffset",!0)("canEnterItems",!1)("showLoader",t.multiSelectShowLoader)("mode",t.multiSelectMode)("label",s.xc(2,14,t.dictionary.skillsLabel))("placeholder",s.xc(3,16,t.dictionary.multiSelectPlaceholder))("inputFormControl",t.inputFormControl)("value",t.multiSelectPreselected)("source",t.multiSelectSource)},directives:[d.a],pipes:[u.b],styles:[""]}),e})()},"8SnQ":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=function(e){return e[e.COURSE="my-course"]="COURSE",e[e.ASSET="asset"]="ASSET",e}({})},A0KR:function(e,t,i){"use strict";i.r(t),i.d(t,"LearningPlanModule",function(){return $});var s=i("tyNb"),n=i("tfGn"),a=i("oTDt"),o=i("aEIV"),r=i("OtoR"),c=i("Rm6y"),l=i("dRcD"),d=i("gvJE"),u=i("+JQb"),h=i("3QLk"),p=i("fXoL"),m=i("Y9qQ"),g=i("35q8"),b=i("Gql0"),f=i("JA8w"),v=i("+sIT"),_=i("aK3f"),w=i("ofXK");const y=["enrollment"];function C(e,t){if(1&e&&(p.jc(0,"div"),p.jc(1,"div",1),p.ec(2,"course-content",2),p.ic(),p.ic()),2&e){const e=p.vc();p.Mb(2),p.Dc("tabsParams",e.tabsParams)("course",e.course)}}let S=(()=>{class e{constructor(e,t,i,s,n,a,o,r,c,l,d){this._backendService=e,this.pageService=t,this.cache=i,this.route=s,this.formatter=n,this.ref=a,this.translationService=o,this.docLayoutService=r,this.router=c,this._route=l,this.learningPlanService=d,this.courseTypes={elearning:"E-learning",classroom:"Classroom",webinar:"Webinar"}}ngOnInit(){const e=this._route.snapshot.paramMap.get("id");Object(h.b)(this.learningPlanService.request("details",{lpId:e},{course_status:"published"}),this.formatter).subscribe(e=>{this.course=e,this.course.type="learning_plan";const t=[];l.a.getInstance().isValid()&&t.push({label:c.a.courseCatalog,href:"/learn/catalog"}),t.push({label:e.name,href:this.router.url}),this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs(t),this.tabsParams={panels:Object(h.e)([{tab:{title:d.a.t("standard","About this Learning Plan"),content:`<div class="tabs-description default-list-style default-headings-styles">\n                                        ${this.course.description}\n                                      </div>`},field:this.course.description},{tab:{title:d.a.t("standard","Learning plan structure"),content:{params:{panels:this.getCourses(this.course.courses)},component:o.a}},field:this.course.courses}]),style:""}})}getCourses(e){return e.map(e=>({title:`${e.name}`,accordion_media:`${e.image}`,description:`${this.courseTypes[e.course_type]}${this.durationString(e.course_type,e.duration)}`,subtitle:"elearning"===e.course_type?"":`${e.all_sessions} ${this.correctSessionTranslation(1===e.all_sessions)}`,content:{component:r.a,params:{course_type:e.course_type,materials:[e]}}}))}ngOnDestroy(){this.cache.isInitialized()&&this.cache.clear()}correctSessionTranslation(e){const t=e?d.a.t("classroom","Session"):d.a.t("standard","Sessions");return new d.b(this.translationService,this.ref).transform(t)}durationString(e,t){if("elearning"!==e)return"";if(!t)return` | ${this.translationService.instant("Duration not set",{category:"standard"})}`;const i=this.formatter.getDurationHours(t,"seconds");return` | ${this.translationService.instant("Duration",{category:"standard"})} ${i}`}}return e.\u0275fac=function(t){return new(t||e)(p.dc(m.a),p.dc(g.a),p.dc(u.b),p.dc(s.a),p.dc(b.b),p.dc(p.i),p.dc(f.a),p.dc(v.a),p.dc(s.h),p.dc(s.a),p.dc(_.a))},e.\u0275cmp=p.Xb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&p.md(y,1),2&e){let e;p.Qc(e=p.sc())&&(t.enrollment=e.first)}},features:[p.Lb([{provide:u.d,useClass:u.c}])],decls:2,vars:1,consts:[[4,"ngIf"],[1,"learning-plan","rectangular"],[3,"tabsParams","course"]],template:function(e,t){1&e&&(p.dd(0,C,3,2,"div",0),p.ec(1,"router-outlet")),2&e&&p.Dc("ngIf",t.course)},directives:[w.p,s.m,a.a],encapsulation:2}),e})();function T(e,t){1&e&&(p.jc(0,"p"),p.fd(1),p.wc(2,"t"),p.ic()),2&e&&(p.Mb(1),p.gd(p.xc(2,1,"For more information, contact your manager and/or system administrator.")))}const k=function(e,t){return{"bg-warning":e,"bg-positive-green":t}},I=function(e){return{hidden:e}},x=function(e,t){return{"text-warning":e,"text-positive-green":t}};let D=(()=>{class e{constructor(){this.icon="",this.enrollmentStatus=!1,this.adminApproval=!1,this.courseFull=!1}ngOnInit(){const e=this.course.name.replace(/[^\w\d]+/gi,"-").replace(/-$/,"");this.enrollLink=[`/learn/${"learning_plan"===this.course.type?"lp":"course"}/${this.course.id}/${encodeURIComponent(e)}`],null!=this.enrollData&&null!=this.enrollData&&this.setData(this.enrollData)}setData(e){Object.keys(e).length&&(e.enrolled.length&&!e.enrolled[0].waiting?(this.icon="check",this.statusText=d.a.t("standard","You've been successfully enrolled"),this.enrollmentStatus=!1,this.dialogContentLabel=d.a.t("standard","{course_name} has been added to your learning activity.",{course_name:`<span class="course-name">${this.course.name}</span>`})):e.enrolled.length&&e.enrolled[0].waiting&&"admin-approval"===e.enrolled[0].waiting_reason?(this.icon="alert-triangle",this.statusText=d.a.t("standard","You've been placed in the waiting list"),this.enrollmentStatus=!0,this.adminApproval=!0,this.dialogContentLabel=d.a.t("standard","The {course_name} course in which you\u2019ve been enrolled requires manager and/or Administrator approval.",{course_name:`<span class="course-name">${this.course.name}</span>`})):e.enrolled.length&&e.enrolled[0].waiting&&"session-waiting"===e.enrolled[0].waiting_reason?(this.icon="alert-triangle",this.statusText=d.a.t("standard","You've been placed in the session waiting list"),this.enrollmentStatus=!0,this.adminApproval=!0,this.dialogContentLabel=d.a.t("standard","You've been enrolled into {course_name} course, but the session you chose is full. You've been placed on the session waiting list.",{course_name:`<span class="course-name">${this.course.name}</span>`})):(this.icon="alert-triangle",this.statusText=d.a.t("standard","You've been placed in the waiting list"),this.enrollmentStatus=!0,this.courseFull=!0,this.dialogContentLabel=d.a.t("standard","The {course_name} course in which you\u2019ve been enrolled is full. You\u2019ve been placed on the waiting list.",{course_name:`<span class="course-name">${this.course.name}</span>`})))}getImage(e=!1){return e?this.imageUrl?`${this.imageUrl}`:this.imageUrlLp?`${this.imageUrlLp}`:"":this.imageUrl?`url(${this.imageUrl})`:this.imageUrlLp?`url(${this.imageUrlLp})`:""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Xb({type:e,selectors:[["enroll-success"]],inputs:{status:"status",imageUrl:"imageUrl",imageUrlLp:"imageUrlLp",course:"course",enrollData:"enrollData"},decls:14,vars:23,consts:[[1,"course-enrollment"],[1,"course-enrollment-head"],[1,"course-head-image","rectangular"],[1,"course-status-icon","text-white",3,"ngClass"],[1,"zmdi","zmdi-image-alt","text-white",3,"ngClass"],[1,"course-enrollment-body"],[1,"course-inner"],["id","dialog-title-aria-label","role","heading","aria-level","2",1,"status-text",3,"ngClass"],[1,"title",3,"innerHTML"],[4,"ngIf"]],template:function(e,t){1&e&&(p.jc(0,"div",0),p.jc(1,"div",1),p.jc(2,"div",2),p.jc(3,"div",3),p.ec(4,"i"),p.ic(),p.ec(5,"i",4),p.ic(),p.ic(),p.jc(6,"div",5),p.jc(7,"div",6),p.jc(8,"p",7),p.fd(9),p.wc(10,"t"),p.ic(),p.ec(11,"p",8),p.wc(12,"t"),p.dd(13,T,3,3,"p",9),p.ic(),p.ic(),p.ic()),2&e&&(p.Mb(2),p.cd("background-image",t.getImage()),p.Mb(1),p.Dc("ngClass",p.Jc(15,k,t.enrollmentStatus,!t.enrollmentStatus)),p.Mb(1),p.Rb("zmdi zmdi-",t.icon,""),p.Mb(1),p.Dc("ngClass",p.Ic(18,I,(null==t.imageUrl?null:t.imageUrl.length)||(null==t.imageUrlLp?null:t.imageUrlLp.length))),p.Mb(3),p.Dc("ngClass",p.Jc(20,x,t.enrollmentStatus,!t.enrollmentStatus)),p.Mb(1),p.hd(" ",p.xc(10,11,t.statusText)," "),p.Mb(2),p.Dc("innerHTML",p.xc(12,13,t.dialogContentLabel),p.Vc),p.Mb(2),p.Dc("ngIf",1==t.enrollmentStatus))},encapsulation:2}),e})();var O=i("uprl");const E=[{path:"view/:id/:title",component:S}];var P=i("YbcG"),M=i("F97A"),A=i("NCOs"),L=i("z52M"),j=i("4Wcr"),F=i("JkNN"),R=i("ILJs"),N=i("+K5A"),U=i("7M0w"),q=i("MZXA"),z=i("9wRM"),V=i("wcN2"),B=i("M+yG");let G=[...E],$=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.bc({type:e}),e.\u0275inj=p.ac({imports:[[n.a,s.l.forChild(G)]]}),e})();p.Yc(a.a,[w.n,w.p,w.o,P.a,M.a,A.a,L.a,j.a,F.a,R.a,N.a,U.a,O.a,D,q.a,z.a],[d.b,V.a]),p.Yc(D,[w.n,w.p],[d.b]),p.Yc(o.a,[B.a],[]),p.Yc(O.a,[w.p],[d.b])},A1Wd:function(e,t,i){"use strict";i.d(t,"b",function(){return l}),i.d(t,"c",function(){return d}),i.d(t,"a",function(){return m});var s=i("3t6O"),n=i("ReIE"),a=i("kyyD"),o=i("LvDl"),r=i.n(o);const c={name:"",slug_name:"",background_image:{url:"",aspect_ratio:""},course_status:null,state:null,chapters:[],scormChaptersHash:"",folders:null};function l(e){let t=[];for(let i in e){let s=e[i];0==s.is_folder?t.push(s):null!=s.children&&s.children.length&&l(s.children).map(e=>t.push(e))}return t}function d(e){const t=[];return l(e).map(e=>{"scormorg"===e.type&&t.push({id:e.id,status:e.status})}),btoa(JSON.stringify(t))}function u(e){let t=[];for(let i in e){let s=e[i];if(1==s.is_folder){let e={id:s.id,name:s.name,children:r.a.isEmpty(s.children)?[]:u(s.children)};t.push(e)}}return t}function h(e){let t=[];for(let i=0;i<e.length;i++){let s=e[i];s.all=p(s,!1),s.completed=p(s,!0),!0===s.is_folder?void 0!==s.children&&s.children.length>0&&h(s.children)&&t.push(s):t.push(s)}return t}function p(e,t=!1){let i=0;if(void 0!==e.children&&e.children.length>0){let s=e.children;for(let e=0;e<s.length;e++){let n=s[e];n.is_folder&&void 0!==n.children&&n.children.length>0?i+=p(n,t):t?-1!==["completed","passed"].indexOf(n.status)&&i++:i++}}return i}function m(e=c,t){switch(t.type){case a.a.LOAD_COURSE_INFO:return e.payload&&delete e.payload,r.a.assign({},e,{state:s.c.INITIALIZING});case a.a.LOAD_COURSE_INFO_SUCCESS:{const i=t.payload.courseData.data,n=t.payload.courseData.permissions,a=e.course_status&&e.course_status.status&&e.course_status.prev_status&&e.course_status.prev_status[i.id]&&(e.course_status.status!==e.course_status.prev_status[i.id]||e.course_status.status!==i.status),o=e.course_status&&e.course_status.prev_status?Object.assign({},e.course_status.prev_status):{};o[i.id]=a?i.status:e.course_status?e.course_status.status?e.course_status.status:e.course_status.prev_status&&e.course_status.prev_status[i.id]?e.course_status.prev_status[i.id]:i.status:i.status;const c=r.a.assign({},e.course_status,{status:i.status,prev_status:o,status_changed:a,certificate_url:i.certificate_url,is_rated:i.is_rated,completion_date:i.completion_date,competed_lessons:i.competed_lessons,level:i.level,permissions:n});let p=s.c.PLAYER;i.has_overview&&e.state&&e.state!=s.c.PLAYER&&(p=s.c.OVERVIEW);let m=r.a.assign({},e,{id:i.id,name:i.name,slug_name:i.slug_name,use_thumbnail:i.use_thumbnail,instructors:i.instructors,ration_options:i.ration_options,current_rating:i.current_rating,background_image:i.background_image,has_autoplay:i.has_autoplay,has_overview:i.has_overview||!1,show_toc:i.show_toc||!1,deadline:i.deadline,state:p,payload:t.payload.courseData,course_status:c,on_sale:i.on_sale,isReloading:t.payload.inReloading,reloadSource:t.payload.source,last_played_chapter:{},last_played_object:null},i);return r.a.isEmpty(i.tree)||(m.tree=h(i.tree),m.scormChaptersHash=d(i.tree)),r.a.isEmpty(i.chapter_sequence)?m.chapters=[]:(m.chapters=l(i.tree),m.folders=u(i.tree),i.last_played_object?m.last_played_chapter=r.a.head(m.chapters.filter(e=>String(e.id)===String(i.last_played_object))):i.last_completed_object&&(m.last_played_chapter=r.a.head(m.chapters.filter(e=>String(e.id)===String(i.last_completed_object))))),m}case n.b.LOAD_COURSE_CHAPTERS_SUCCESS:return Object.assign(Object.assign({},e),{chapters:l(t.payload.data.tree),folders:u(t.payload.data.tree),tree:h(t.payload.data.tree)});case a.a.LOAD_COURSE_INFO_REJECTED:return r.a.assign({},e,{id:t.payload,state:s.c.UNAUTHORIZED});case a.a.SWITCH_MODE:{e.payload&&delete e.payload;let i=null;return i=t.payload.state===s.c.PLAYER?s.c.OVERVIEW:t.payload.state==s.c.OVERVIEW?s.c.PLAYER:e.state===s.c.PLAYER&&e.has_overview?s.c.OVERVIEW:s.c.PLAYER,r.a.assign({},e,{state:i})}case a.a.RELOAD_CHAPTERS:return Object.assign(Object.assign({},e),{chapters:l(t.payload.chapters),folders:u(t.payload.chapters),tree:h(t.payload.chapters)});case a.a.DESTROY:{let t={};return e.course_status&&e.course_status.prev_status&&(t={course_status:{prev_status:e.course_status.prev_status,status:e.course_status.status}}),r.a.assign({},c,t)}case a.a.UPDATE_COURSE_RATING:{let i=e.course_status;return i.is_rated=!0,r.a.assign({},e,{current_rating:t.payload.data.my_rating,course_status:i})}default:return e.payload&&delete e.payload,e}}},AZa5:function(e,t,i){var s=i("Wogr"),n=i("u/Db");function a(e){this.mode=n.BYTE,this.data=new s(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(var t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)},e.exports=a},BCVQ:function(e,t){var i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",s="(?:(?![A-Z0-9 $%*+\\-./:]|"+(i=i.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(i,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(s,"g"),t.NUMERIC=new RegExp("[0-9]+","g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var n=new RegExp("^"+i+"$"),a=new RegExp("^[0-9]+$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return n.test(e)},t.testNumeric=function(e){return a.test(e)},t.testAlphanumeric=function(e){return o.test(e)}},CI6S:function(e,t,i){"use strict";i.d(t,"j",function(){return C}),i.d(t,"d",function(){return T}),i.d(t,"b",function(){return k}),i.d(t,"e",function(){return I}),i.d(t,"o",function(){return x}),i.d(t,"c",function(){return D}),i.d(t,"g",function(){return O}),i.d(t,"h",function(){return E}),i.d(t,"f",function(){return M}),i.d(t,"a",function(){return A}),i.d(t,"i",function(){return j}),i.d(t,"m",function(){return F}),i.d(t,"k",function(){return R}),i.d(t,"l",function(){return N}),i.d(t,"n",function(){return U}),i.d(t,"p",function(){return q});var s=i("l7P3"),n=i("3t6O"),a=i("A1Wd"),o=i("wunY"),r=i("Karm");const c={status:null,launch_params:{},content:{},isLoading:!1,isOtjErrorStateVisible:!1};function l(e=c,t){switch(t.type){case o.a.START_PLAYING:return Object.assign({},c,{status:r.h.REQUEST_FOR_PLAY});case o.a.SHOW_OTJ_ERROR_STATE:return Object.assign(Object.assign({},e),{isOtjErrorStateVisible:!0,status:r.c.PLAYING,isLoading:!1});case o.a.START_PLAYING_SUCCESS:{let i=e.status;return i!==r.h.COURSE_COMPLETED&&(i=r.h.PLAYING),Object.assign({},e,{status:i,launch_params:t.payload.launch_params})}case o.a.START_PLAYING_REJECTED:return Object.assign({},e,{status:r.h.PLAY_REJECTED,launch_params:t.payload});case o.a.SET_COURSE_PLAYER_CHAPTER_LOADING:return Object.assign(Object.assign({},e),{isLoading:t.payload});case o.a.START_PLAYING_REJECTED_MISSING_USERFIELDS:return Object.assign({},e,{status:r.h.PLAY_REJECT_USERFIELDS,launch_params:t.payload});default:return e}}var d=i("kyyD"),u=i("LvDl"),h=i.n(u);const p={status:null,course:null,course_status:null,current_chapter:null,last_played_chapter:null,chapter_viewer:c,preserve_lightbox:!1,navigating_back:!1};var m=i("mEp4");const g={id:0,name:"",status:null,state:null,complete_percent:0,courses:[],curricula_redirect_to_learning_plan:!1};var b=i("RYym");const f={status:null,view:null,viewDate:null,startDate:null,endDate:null,events:null,filters:null,appliedFilters:null,monthHasEvents:null,export:null,errorMsg:null};var v=i("f0Wu"),_=i("3/UW");const w={status:null,current_session:null,locations:null,enrolled_sessions:null,available_sessions:null,managed_sessions:null,course_details_changed:{}};var y=i("Ozuj");const C={course_player:function(e=p,t){switch(t.type){case o.a.LOAD_COURSE_INFO:return h.a.assign({},e,{status:n.b.INITIALIZING});case o.a.LOAD_COURSE_INFO_REJECTED:return h.a.assign({},e,{status:n.b.UNAUTHORIZED});case o.a.LOAD_COURSE_INFO_SUCCESS:return class{static format(e,t){let i=t.courseData.data,s=[],a={},o={},r=n.b.EMPTY,c={status:n.g.READY};return h.a.isEmpty(i.chapter_sequence)||(r=n.b.READY,s=this.extractChapters(i.tree)),e.current_chapter&&(a=h.a.head(s.filter(t=>t.id==e.current_chapter.id)),c=e.chapter_viewer,a&&a.status==n.d.COMPLETED&&t.inReloading&&a.id==t.reloadSource&&(c.status=n.g.ACTIVITY_COMPLETED)),c.status==n.g.ACTIVITY_COMPLETED&&i.status==n.d.COMPLETED&&(c.status=n.g.COURSE_COMPLETED),t.inReloading&&c.status!==n.g.ACTIVITY_COMPLETED&&c.status!==n.g.COURSE_COMPLETED&&(r=n.b.PLAYING),i.last_played_object?o=h.a.head(s.filter(e=>String(e.id)===String(i.last_played_object))):i.last_completed_object&&(o=h.a.head(s.filter(e=>String(e.id)===String(i.last_completed_object)))),h.a.assign({},e,{status:r,current_chapter:a,chapter_viewer:c,last_played_chapter:o,preserve_lightbox:!1,navigating_back:!1})}static extractChapters(e){let t=[];for(let i in e){let s=e[i];0==s.is_folder?t.push(s):null!=s.children&&s.children.length&&this.extractChapters(s.children).map(e=>t.push(e))}return t}static extractFolders(e){let t=[];for(let i in e){let s=e[i];if(1==s.is_folder){let e={id:s.id,name:s.name,children:h.a.isEmpty(s.children)?[]:this.extractFolders(s.children)};t.push(e)}}return t}}.format(e,t.payload);case o.a.SET_SCORM_CHAPTERS_HASH:return Object.assign(Object.assign({},e),{scormChaptersHash:t.payload});case o.a.SET_COURSE_PLAYER_CHAPTER_LOADING:return Object.assign(Object.assign({},e),{isLoading:t.payload,chapter_viewer:l(e.chapter_viewer,t)});case o.a.START_PLAYING:{let i={status:n.b.REQUEST_FOR_PLAY,chapter_viewer:l(e.chapter_viewer,t)};return t.payload.chapters&&(i.current_chapter=h.a.head(t.payload.chapters.filter(e=>e.id==t.payload.id))),t.payload.hasOwnProperty("preserve_lightbox")&&(i.preserve_lightbox=t.payload.preserve_lightbox,i.navigating_back=t.payload.navigating_back),h.a.assign({},e,i)}case o.a.START_PLAYING_SUCCESS:{let i={status:n.b.READY,chapter_viewer:l(e.chapter_viewer,t)};return t.payload.chapters&&(i.current_chapter=h.a.head(t.payload.chapters.filter(e=>e.id==t.payload.id))),t.payload.hasOwnProperty("preserve_lightbox")&&(i.preserve_lightbox=t.payload.preserve_lightbox,i.navigating_back=t.payload.navigating_back,void 0!==i.current_chapter&&i.current_chapter.hasOwnProperty("locked")&&i.current_chapter.type!==n.a.SIGN.toString()&&delete i.current_chapter.locked),h.a.assign({},e,i)}case o.a.START_PLAYING_REJECTED:return h.a.assign({},e,{status:n.b.PLAY_REJECTED,chapter_viewer:l(e.chapter_viewer,t)});case o.a.SHOW_OTJ_ERROR_STATE:return Object.assign(Object.assign({},e),{chapter_viewer:l(e.chapter_viewer,t)});case o.a.START_PLAYING_REJECTED_MISSING_USERFIELDS:return h.a.assign({},e,{status:n.b.PLAY_REJECT_USERFIELDS,chapter_viewer:l(e.chapter_viewer,t)});case o.a.SET_CURRENT_CHAPTER:{let i={status:n.b.REQUEST_FOR_PLAY,current_chapter:h.a.head(t.payload.chapters.filter(e=>e.id==t.payload.id)),chapter_viewer:{status:n.g.READY}};const s=i.current_chapter;return s.type==String(n.a.SURVEY)&&s.status==String(n.d.COMPLETED)&&(i.chapter_viewer.status=n.g.ACTIVITY_COMPLETED),s.type===n.a.SIGN.toString()&&(i.chapter_viewer.status=n.g.PLAYING),h.a.assign({},e,i)}case d.a.DESTROY:return h.a.assign({},p,{});default:return e}},survey_player:i("UIvz").b,quiz_player:y.b,course:a.a,overview:function(e=w,t){switch(t.type){case _.a.LOAD_OVERVIEW_INFO:return h.a.assign({},w,{status:n.n.INITIALIZING,current_session:e.current_session});case _.a.LOAD_OVERVIEW_INFO_SUCCESS:{let i=e.current_session,s=[],a=[],o=[],r=[],c=[],l=n.n.READY;if(t.payload.hasOwnProperty("data")){const d=t.payload.data;if(Object.keys(d.sessions).length>0){const n=Object.keys(d.sessions);if(n.length>0&&!1===t.payload.sessionId){const e=v();let t=null,s=null;for(let i=0;i<n.length;i++)if(v(d.sessions[n[i]].start_date).isAfter(e)){for(let e=i;e<n.length;e++)v(d.sessions[n[e]].start_date).isBefore(v(d.sessions[n[i]].start_date))&&(null!==t?v(d.sessions[n[e]].start_date).isBefore(t)&&(t=v(d.sessions[n[e]].start_date),s=n[e]):(t=v(d.sessions[n[e]].start_date),s=n[e]));s||(t=v(d.sessions[n[i]].start_date),s=n[i])}s&&(i=d.sessions[s])}for(let t in d.sessions)d.sessions[t].hasOwnProperty("is_enrolled")&&d.sessions[t].is_enrolled&&s.push(d.sessions[t]),a.push(d.sessions[t]),e.current_session&&e.current_session.id==d.sessions[t].id&&(i=h.a.assign({},e.current_session,d.sessions[t])),1==d.sessions[t].can_manage&&o.push(d.sessions[t]);i||(i=h.a.isEmpty(s)?o[0]:d.sessions[n[0]])}const u=[];if(d.locations)for(let e=0;e<d.locations.length;e++){const t=d.locations[e];u[t.id_location]=t}const p=[];if(d.classrooms)for(let e=0;e<d.classrooms.length;e++){const t=d.classrooms[e];p[t.id_classroom]=t}if(r=p,c=u,d.skipped_sessions)for(let e=0;e<d.skipped_sessions.length;e++)i&&i.id&&Number(i.id)===Number(d.skipped_sessions[e])&&(l=n.n.REQUEST_REJECTED)}return a.length<=0&&!h.a.isEmpty(t.payload)&&(l=n.n.NO_SESSION),h.a.assign({},e,{status:l,current_session:i,enrolled_sessions:s,available_sessions:a,classrooms:r,locations:c,managed_sessions:o})}case _.a.LOAD_OVERVIEW_INFO_REJECTED:return h.a.assign({},e,{status:n.n.REQUEST_REJECTED});case _.a.REQUEST_CHANGE:return h.a.assign({},e,{status:n.n.REQUEST_SESSION});case _.a.CHANGE_SESSION:{let i=null;for(const s in e.available_sessions)e.available_sessions[s].id==t.payload&&(i=e.available_sessions[s]);return h.a.assign({},e,{status:n.n.READY,current_session:i})}case d.a.DESTROY:return h.a.assign({},w,{});case _.a.ENROLL_USER_TO_SESSION_SUCCESS:{let i=null;for(let s in e.available_sessions)if(e.available_sessions[s].id==t.payload.sessionId){i=e.available_sessions[s];break}return h.a.assign({},e,{course_details_changed:{course_id:t.payload.courseId},current_session:i})}default:return e}},learning_plan:function(e=g,t){switch(t.type){case m.a.LOAD_LEARNING_PLAN_INFO:{let i=parseInt(t.payload);return e.id!==i&&(e=g),h.a.assign({},e,{state:r.l.INITIALIZING})}case m.a.LOAD_LEARNING_PLAN_INFO_SUCCESS:return h.a.assign({},e,t.payload.data,{state:r.l.VIEWING});case m.a.LOAD_LEARNING_PLAN_INFO_REJECTED:return h.a.assign({},e,{state:r.l.UNAUTHORIZED});case m.a.CLEAN_STORE_DATA_LEARNING_PLAN:return h.a.assign({},{});default:return e}},my_calendar:function(e=f,t){switch(t.type){case b.a.INIT:return h.a.assign({},e,{status:"INITIALIZING",view:t.payload.view,viewDate:t.payload.viewDate,startDate:t.payload.startDate,endDate:t.payload.endDate,filters:t.payload.filters});case b.a.UPDATE:return h.a.assign({},e,{status:"UPDATING",view:t.payload.events,viewDate:t.payload.events,startDate:t.payload.startDate,endDate:t.payload.endDate,filters:t.payload.filters});case b.a.LOAD_EVENTS_SUCCESS:return h.a.assign({},e,{status:"EVENTS_LOADED",events:t.payload.events,export:t.payload.export,appliedFilters:t.payload.appliedFilters});case b.a.LOAD_EVENTS_REJECT:{const i=t.payload.errorMsg,s="SERVER_ERROR";return 1300===i.code&&(this.status="EMPTY_EVENTS"),h.a.assign({},e,{status:s,errorMsg:i})}case b.a.LOAD_EVENTS_IN_YEAR_SUCCESS:return h.a.assign({},e,{status:"EVENTS_IN_YEAR_LOADED",monthHasEvents:t.payload.monthHasEvents});default:return e}}},S=Object(s.k)("learn"),T=Object(s.m)(S,e=>e.course),k=Object(s.m)(S,e=>e.course.chapters),I=Object(s.m)(T,e=>e.course_status),x=Object(s.m)(S,e=>e.course.scormChaptersHash),D=Object(s.m)(S,e=>e.course_player),O=Object(s.m)(S,e=>e.course.chapters.filter(e=>!0===e.is_end_object&&e.type!==n.a.SIGN.toString())),E=(Object(s.m)(D,e=>e.chapter_viewer.status),Object(s.m)(D,e=>e.chapter_viewer.isOtjErrorStateVisible)),P=Object(s.m)(O,e=>e.filter(e=>e.status===n.l.COMPLETED.toString()).length),M=Object(s.m)(T,D,(e,t)=>Object.assign(Object.assign({},t),{current_chapter:Object(a.b)(e.tree).filter(e=>e.id===t.current_chapter.id)[0]})),A=Object(s.m)(S,O,P,(e,t,i)=>{if(e.course.type===String(n.e.ELEARNING)&&e.course.status!==String(n.d.COMPLETED)&&e.course.esignature_status===String(n.h.LOCKED)){if(t.length&&!i)return t.map(e=>`"${e.name}"`);if(!t.length)return e.course.chapters.filter(e=>e.type!==n.a.SIGN.toString()&&e.status!==n.l.COMPLETED.toString()).map(e=>`"${e.name}"`)}return[]}),L=Object(s.m)(S,A,(e,t)=>e.course.status===String(n.d.COMPLETED)||e.course.esignature_status===n.h.SIGNED||0===t.length),j=Object(s.m)(L,e=>!e),F=Object(s.m)(S,e=>e.overview),R=Object(s.m)(S,e=>e.learning_plan),N=Object(s.m)(S,e=>e.my_calendar),U=Object(s.m)(S,e=>e.quiz_player),q=Object(s.m)(S,e=>e.survey_player)},D7St:function(e,t,i){"use strict";i.d(t,"c",function(){return At}),i.d(t,"b",function(){return Lt}),i.d(t,"a",function(){return Ft});var s=i("mrSG"),n=i("V3DN"),a=i("gvJE"),o=i("o6wD"),r=i("mJ9n"),c=i("LvDl"),l=i.n(c),d=i("2Vo4"),u=i("zP0r"),h=i("NKMr"),p=i("Rm6y"),m=i("fXoL"),g=i("tyNb"),b=i("+sIT"),f=i("S2Qf"),v=i("N9vg"),_=i("ofXK"),w=i("IfWP"),y=i("yRWM"),C=i("jt8V"),S=i("BPI6"),T=i("raRA"),k=i("6fYS"),I=i("LRne"),x=i("lNbR"),D=i("sk0d"),O=i("alYl"),E=i("mZNx"),P=i("XEWJ"),M=i("OFqD"),A=i("vQfe"),L=i("Vqln"),j=i("g9In"),F=i("nUpK"),R=i("2YCl");const N=["dataTable"];function U(e,t){1&e&&(m.jc(0,"hyd-ellipsable-text"),m.fd(1),m.wc(2,"t"),m.ic()),2&e&&(m.Mb(1),m.gd(m.xc(2,1,"Name")))}function q(e,t){if(1&e){const e=m.kc();m.jc(0,"hyd-ellipsable-text"),m.jc(1,"a",19),m.rc("click",function(){m.Uc(e);const i=t.item;return m.vc().navigateToEventDetailPage(i.id)}),m.fd(2),m.ic(),m.ic()}if(2&e){const e=t.item;m.Mb(2),m.gd(e.name)}}function z(e,t){1&e&&(m.fd(0),m.wc(1,"t")),2&e&&m.hd(" ",m.xc(1,1,"Type")," ")}function V(e,t){if(1&e&&(m.jc(0,"span"),m.fd(1),m.wc(2,"t"),m.wc(3,"t"),m.ic()),2&e){const e=m.vc(2);m.Mb(1),m.id("",m.xc(2,2,e.venueLabel),", ",m.xc(3,4,e.videoConferenceToolLabel),"")}}function B(e,t){if(1&e&&(m.jc(0,"span"),m.fd(1),m.wc(2,"t"),m.ic()),2&e){const e=m.vc(2);m.Mb(1),m.gd(m.xc(2,1,e.venueLabel))}}function G(e,t){if(1&e&&(m.jc(0,"span"),m.fd(1),m.wc(2,"t"),m.ic()),2&e){const e=m.vc(2);m.Mb(1),m.gd(m.xc(2,1,e.videoConferenceToolLabel))}}function $(e,t){if(1&e&&(m.jc(0,"hyd-ellipsable-text"),m.dd(1,V,4,6,"span",20),m.dd(2,B,3,3,"span",20),m.dd(3,G,3,3,"span",20),m.ic()),2&e){const e=t.item;m.Mb(1),m.Dc("ngIf",e.venue&&e.webinar_tool),m.Mb(1),m.Dc("ngIf",e.venue&&!e.webinar_tool),m.Mb(1),m.Dc("ngIf",e.webinar_tool&&!e.venue)}}function H(e,t){if(1&e&&(m.jc(0,"div",22),m.jc(1,"div"),m.jc(2,"hyd-ellipsable-text"),m.fd(3),m.wc(4,"t"),m.ic(),m.ic(),m.ic()),2&e){const e=m.vc().$implicit;m.Mb(3),m.hd(" ",m.xc(4,1,e.label)," ")}}function Y(e,t){if(1&e&&m.ec(0,"ui-icon",28),2&e){const e=m.vc().item,t=m.vc().$implicit,i=m.vc();m.Dc("name",t.icon_new)("size","sm")("color",t.isWarning(e)?i.alertColor:i.accentColor)}}function W(e,t){if(1&e&&m.ec(0,"i"),2&e){const e=m.vc(2).$implicit;m.Rb("zmdi zmdi-",e.icon,"")}}function Q(e,t){if(1&e){const e=m.kc();m.jc(0,"hyd-ellipsable-text"),m.jc(1,"div",23),m.rc("click",function(){m.Uc(e);const i=t.item,s=m.vc().$implicit;return s.click?s.click(i):""}),m.jc(2,"div",24),m.jc(3,"span"),m.fd(4),m.ic(),m.ic(),m.jc(5,"div",25),m.dd(6,Y,1,3,"ui-icon",26),m.dd(7,W,1,3,"i",27),m.ic(),m.ic(),m.ic()}if(2&e){const e=t.item,i=m.vc().$implicit;m.Mb(1),m.Vb("text-warning",i.isWarning(e))("text-main",!i.isWarning(e))("text-pointer",null!=i.click),m.Mb(3),m.gd(i.value(e)),m.Mb(2),m.Dc("ngIf",i.icon_new),m.Mb(1),m.Dc("ngIf",i.icon)}}function K(e,t){1&e&&(m.jc(0,"hyd-table-column",21),m.jc(1,"hyd-table-column-header"),m.dd(2,H,5,3,"ng-template"),m.ic(),m.jc(3,"hyd-table-column-cell"),m.dd(4,Q,8,9,"ng-template"),m.ic(),m.ic()),2&e&&m.Dc("columnName",t.$implicit.name)("sortable",!0)("alignment","center")}function X(e,t){}function J(e,t){if(1&e&&m.ec(0,"btn-ellipsis",29),2&e){const e=t.item,i=t.index,s=m.vc();m.Dc("params",e)("orientation",(i<=7?"bottom":"top")+"-left")("actions",s.getRowActions(e))}}function Z(e,t){1&e&&(m.jc(0,"div",32),m.ec(1,"ui-spinner",33),m.ic()),2&e&&(m.Mb(1),m.Dc("size","md"))}function ee(e,t){if(1&e&&m.ec(0,"blankslate",34),2&e){const e=m.vc(2);m.Dc("isVisible",!0)("type",e.BlankSlateType.EMPTY001)("title",e.noResultsTitle)("subtitle",e.noResultsSubtitle)}}function te(e,t){if(1&e&&(m.jc(0,"div",30),m.dd(1,Z,2,1,"div",18),m.dd(2,ee,1,4,"blankslate",31),m.ic()),2&e){const e=m.vc();m.Mb(1),m.Dc("ngIf",e.isLoading),m.Mb(1),m.Dc("ngIf",!e.isLoading&&e.noResults)}}function ie(e,t){1&e&&(m.jc(0,"div",32),m.ec(1,"ui-spinner",33),m.ic()),2&e&&(m.Mb(1),m.Dc("size","md"))}var se=function(e){return e.name="name",e.date="date",e.time="time",e.break="break",e.hours="hours",e.type="type",e.instructors="instructors",e.attendance="attendance",e}({});let ne=(()=>{class e extends o.c{constructor(e,t,i,s){super(s,i),this.sessionManagementService=e,this.router=t,this.assignmentColumns=[{name:se.instructors,label:a.a.t("standard","Event Instructors"),icon:"assignment-account",isWarning:e=>0==e.instructors,value:e=>e.instructors},{name:se.attendance,label:a.a.t("standard","_ATTENDANCE"),icon_new:"user-check",isWarning:()=>!1,value:e=>e.attendance+"/"+e.enrolled,click:e=>this.navigateToEventAtendancePage(e.id)}],this.blankSlateConfig={type:y.a.EMPTY002,title:a.a.t("standard","Whoops, there's nothing here"),subtitle:a.a.t("report","Looks like there\u2019s nothing for you to do in this area right now.")},this.allColumns=[se.date,se.hours,se.name,se.break,se.time,se.type,...this.assignmentColumns.map(e=>e.name)],this.lockedColumns=[se.name],this.preselectedColumns=[se.date,se.hours,se.name,se.time,se.type,...this.assignmentColumns.map(e=>e.name)],this.hiddenColumns=["actions"],this._rowActions=[],this._massiveActions=[],this.accentColor=k.l.ACCENT,this.alertColor=k.l.ALERT,this.countColumns=this.allColumns.length,this.venueLabel=a.a.t("standard","Venue"),this.videoConferenceToolLabel=a.a.t("standard","Video Conference Tool"),this.searchUsers$=new d.a("")}get isSelectAllEnable(){return this._massiveActions.length>0}ngOnInit(){super.ngOnInit(),this.subscribeTo(this.listenToSearchUser())}ngAfterViewInit(){super.ngAfterViewInit(),this.changeDetector.markForCheck(),this.changeDetector.markForCheck(),l.a.delay(()=>{this.dataTable.multiselects.first.onChange.subscribe(e=>this.searchForUsers(e))},1e3)}fetchDataImpl(e,t,i){return this.sessionManagementService.getEventsPaginetedList(this.sessionId,e.pageSize,e.page+1,t.dir,t.columnName,i)}getInitialSorting(){return{columnName:se.date,dir:S.a.ASC}}getMassiveActions(){return this._massiveActions}getRowActions(){return this._rowActions}navigateToEventAtendancePage(e){this.router.navigate(["learn","instructor","event",e])}navigateToEventDetailPage(e){this.router.navigate(["learn","instructor","event",e])}initializeColumns(){}initializeColumnSelectorPanel(){return{icon:"view-column",iconTooltip:{tooltipText:"Column selector",tooltipPosition:T.b.BOTTOM},content:{}}}onFiltersChanged(e){const t=this.processFilters(e);this._currentFilters.next(t),this.dataBrowserSource.appliedFiltersNumber.next(Object.keys(t).filter(e=>e!=h.j.SEARCH).length)}initializeFilters(){const e=[{title:a.a.t("standard","Search"),code:h.j.SEARCH,type:C.d.free_search_filter,params:{placeholder:a.a.t("standard","Search...")}},{title:a.a.t("standard","Instructor"),code:h.j.INSTRUCTORS,type:C.d.multiselect_filter,params:{placeholder:a.a.t("standard","Instructor"),maxSelectableItems:1,maxSuggestedItems:10,source:[]}},{title:a.a.t("standard","Type"),code:h.j.TYPE,type:C.d.radio_filter,disableAllOptionFilter:!1,params:{options:[{key:"both",label:a.a.t("standard","Both")},{key:"venue",label:a.a.t("standard","Venue")},{key:"tool",label:a.a.t("standard","Video Conference Tool")}],useRawValue:!0}},{title:a.a.t("standard","Properties"),code:h.j.PROPERTIES,type:C.d.checkbox_filter,params:{options:[{key:h.j.PROPERTIES_WITHOUT_ATTENDANCE,label:a.a.t("standard","Without Attendance")},{key:h.j.PROPERTIES_WITHOUT_EVENT_INSTRUCTORS,label:a.a.t("standard","Without Event Instructors")}]}}];return Object(I.a)(e)}searchForUsers(e){this.searchUsers$.next(e)}listenToSearchUser(){return this.sessionManagementService.getInstructorListSuggest(this.searchUsers$).subscribe(e=>{this.dataTable.multiselects.first.source=[...e],this.dataTable.multiselects.first.filteredList=[...e],this.dataTable.multiselects.first.showItemsList=!0,this.changeDetector.markForCheck(),this.changeDetector.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(m.dc(v.a),m.dc(g.h),m.dc(m.o),m.dc(m.i))},e.\u0275cmp=m.Xb({type:e,selectors:[["ilt-instructor-session-events-list"]],viewQuery:function(e,t){if(1&e&&m.md(N,1),2&e){let e;m.Qc(e=m.sc())&&(t.dataTable=e.first)}},inputs:{sessionId:"sessionId"},features:[m.Jb],decls:40,vars:72,consts:[[1,"data-browser",3,"hidden","dataBrowserSource","onFiltersUpdate"],["dataTable",""],[1,"custom-panel"],[3,"tableRef","cacheId","lockedColumns","preselectedColumns","hiddenColumns","maxSelectable"],[1,"data-browser-table-content"],[1,"table-wrapper"],[1,"hyd-table-ilt-sessions-list",3,"data","selectable","rowsComparisonFunction","rowHeight","selection","sorting","selectRows","sort"],["sessionManagementEventsListTable",""],[3,"columnName","sortable","ellipsed"],[3,"columnName","headerLabel","fieldName","translateField","sortable"],[3,"columnName","sortable"],[3,"columnName","sortable","alignment",4,"ngFor","ngForOf"],[3,"columnWidth","columnName","ellipsed"],[3,"pageIndex","pageSize","length","pageChange"],[1,"massive-actions-bar-wrapper"],[3,"counter","actions","actionTitle","type","isSelectAllButtonVisible","isUnSelectAllButtonVisible","selectAll$","unselectAll$"],["class","table-cover bg-grey-superlight",4,"ngIf"],[1,"no-data",3,"isVisible","type","title","subtitle"],["class","spinner",4,"ngIf"],[1,"text-pointer",3,"click"],[4,"ngIf"],[3,"columnName","sortable","alignment"],[1,"col-with-icon-header"],[1,"col-with-icon-cell",3,"click"],[1,"counter"],[1,"icon"],[3,"name","size","color",4,"ngIf"],[3,"class",4,"ngIf"],[3,"name","size","color"],[3,"params","orientation","actions"],[1,"table-cover","bg-grey-superlight"],[3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"spinner"],[3,"size"],[3,"isVisible","type","title","subtitle"]],template:function(e,t){if(1&e&&(m.jc(0,"data-browser",0,1),m.rc("onFiltersUpdate",function(e){return t.onFiltersChanged(e)}),m.jc(2,"div",2),m.ec(3,"hyd-column-selector",3),m.ic(),m.jc(4,"div",4),m.wc(5,"async"),m.jc(6,"div",5),m.jc(7,"hyd-table",6,7),m.rc("selectRows",function(e){return t.onRowsSelected(e)})("sort",function(e){return t.onSortingChanged(e)}),m.wc(9,"async"),m.jc(10,"hyd-table-column",8),m.jc(11,"hyd-table-column-header"),m.dd(12,U,3,3,"ng-template"),m.ic(),m.jc(13,"hyd-table-column-cell"),m.dd(14,q,3,1,"ng-template"),m.ic(),m.ic(),m.ec(15,"hyd-column-ellipsable-text",9),m.ec(16,"hyd-column-ellipsable-text",9),m.ec(17,"hyd-column-ellipsable-text",9),m.jc(18,"hyd-table-column",10),m.jc(19,"hyd-table-column-header"),m.dd(20,z,2,3,"ng-template"),m.ic(),m.jc(21,"hyd-table-column-cell"),m.dd(22,$,4,3,"ng-template"),m.ic(),m.ic(),m.dd(23,K,5,3,"hyd-table-column",11),m.ec(24,"hyd-column-ellipsable-text",9),m.jc(25,"hyd-table-column",12),m.jc(26,"hyd-table-column-header"),m.dd(27,X,0,0,"ng-template"),m.ic(),m.jc(28,"hyd-table-column-cell"),m.dd(29,J,1,3,"ng-template"),m.ic(),m.ic(),m.ic(),m.jc(30,"hyd-paginator",13),m.rc("pageChange",function(e){return t.onPagingChanged(e)}),m.ic(),m.ic(),m.jc(31,"div",14),m.jc(32,"massive-actions-bar",15),m.rc("selectAll$",function(){return t.onSelectEverything(!0)})("unselectAll$",function(){return t.onSelectEverything(!1)}),m.wc(33,"t"),m.ic(),m.ic(),m.ic(),m.dd(34,te,3,2,"div",16),m.wc(35,"async"),m.ic(),m.ec(36,"blankslate",17),m.wc(37,"t"),m.wc(38,"t"),m.dd(39,ie,2,1,"div",18)),2&e){const e=m.Rc(8);m.Dc("hidden",!t.initialized||t.noData)("dataBrowserSource",t.dataBrowserSource),m.Mb(3),m.Dc("tableRef",e)("cacheId","session-management-events-list-column-selector_")("lockedColumns",t.lockedColumns)("preselectedColumns",t.preselectedColumns)("hiddenColumns",t.hiddenColumns)("maxSelectable",t.countColumns),m.Mb(1),m.Vb("massive-actions-bar-open",m.xc(5,60,t.showMassiveActionsBar$)),m.Mb(3),m.Dc("data",m.xc(9,62,t.tableData$))("selectable",t.isSelectAllEnable)("rowsComparisonFunction",t.comparerFn)("rowHeight",t.HYD_TABLE_STYLES.ROW_HEIGHT)("selection",t.currentSelection)("sorting",t.sortingCriteria),m.Mb(3),m.Dc("columnName","name")("sortable",!0)("ellipsed",!0),m.Mb(5),m.Dc("columnName","date")("headerLabel","Date")("fieldName","date")("translateField",!1)("sortable",!0),m.Mb(1),m.Dc("columnName","time_begin")("headerLabel","Time")("fieldName","time")("translateField",!1)("sortable",!0),m.Mb(1),m.Dc("columnName","hours")("headerLabel","Hours")("fieldName","duration")("translateField",!1)("sortable",!0),m.Mb(1),m.Dc("columnName","type")("sortable",!1),m.Mb(5),m.Dc("ngForOf",t.assignmentColumns),m.Mb(1),m.Dc("columnName","break")("headerLabel","Break")("fieldName","break")("translateField",!1)("sortable",!1),m.Mb(1),m.Dc("columnWidth","30.042px")("columnName","actions")("ellipsed",!1),m.Mb(5),m.Dc("pageIndex",null==t.paginationInfo?null:t.paginationInfo.page)("pageSize",null==t.paginationInfo?null:t.paginationInfo.pageSize)("length",t.totalCount),m.Mb(2),m.Dc("counter",t.selectedItemsCount)("actions",t.getMassiveActions())("actionTitle",m.xc(33,64,"Choose action"))("type","inline-btn")("isSelectAllButtonVisible",!0)("isUnSelectAllButtonVisible",!0),m.Mb(2),m.Dc("ngIf",m.xc(35,66,t.hideTable$)),m.Mb(2),m.Ec("title",m.xc(37,68,t.blankSlateConfig.title)),m.Ec("subtitle",m.xc(38,70,t.blankSlateConfig.subtitle)),m.Dc("isVisible",t.initialized&&t.noData)("type",t.blankSlateConfig.type),m.Mb(3),m.Dc("ngIf",!t.initialized)}},directives:[x.a,D.a,O.a,E.c,E.d,E.b,P.a,_.o,M.b,A.a,_.p,L.a,j.a,F.Eb,R.a,F.fd],pipes:[_.b,a.b],styles:['.data-browser-table[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{margin-top:100px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;z-index:1}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate{margin-top:50px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section{font-size:1.1em}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div{font-size:.8em}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-start;padding-top:50px;box-sizing:border-box}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%]{position:static}.data-browser-table[_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"], .data-browser-table   [_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"]{flex-grow:0!important;justify-content:flex-end!important}.color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content, .data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table{display:block;height:calc(100% - 46px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body{height:calc(100% - 39px);overflow-x:hidden;overflow-y:auto}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper{overflow:hidden;height:0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar{height:52px}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper{height:calc(100% - 52px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper{height:52px;overflow:visible}.data-browser-table[_nghost-%COMP%]     .data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser{overflow-y:auto;overflow-x:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{width:330px;padding:0;margin:0;display:block;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#fff}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:1px solid var(--hyd-color-border-neutral)}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:0}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:1px solid var(--hyd-color-border-neutral)}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper{box-sizing:border-box;border:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab{display:flex;flex-direction:column}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter{flex-shrink:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last{flex-grow:1}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters{flex-shrink:0;justify-content:flex-end;padding:10px}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:10px}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:auto}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box{padding-right:20px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col{height:100%;margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col{position:relative;width:calc(100% - 330px - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col{position:relative;width:calc(100% - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row{width:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper{height:calc(100% - 40px - 1px);overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container{height:100%;overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid{margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid{margin:0 auto}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{overflow:hidden;height:100%}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 -15px 0 0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 0 0 -15px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters{height:40px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder{height:40px!important}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i{padding-top:10px;padding-bottom:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{height:40px;padding:0 6px}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container{flex-grow:1;max-width:unset}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{display:none}[_nghost-%COMP%]{display:block}.massive-actions-bar-wrapper[_ngcontent-%COMP%]{height:52px;position:relative;top:-1px}.col-with-icon-header[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.col-with-icon-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.text-pointer[_ngcontent-%COMP%]{cursor:pointer}.col-with-icon-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%], .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;width:50%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{justify-content:flex-end}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{justify-content:flex-start}.router-outlet:not(.direction-rtl):not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet:not(.direction-rtl):not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:6px}.router-outlet.direction-rtl:not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet.direction-rtl:not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:6px}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i.zmdi[_ngcontent-%COMP%]{font-size:var(--hyd-size-icon-sm)}'],changeDetection:0}),e})();var ae=i("lJxs"),oe=i("aWaq"),re=i("7vd5"),ce=i("oifr"),le=i("Akjt"),de=i("XNiG"),ue=i("z6cu"),he=i("3Pt+"),pe=i("JX91"),me=i("1G5W"),ge=i("JIr8"),be=i("TrxT"),fe=i("zbwl"),ve=i("bDTG"),_e=i("wd/R"),we=i.n(_e),ye=i("fN+k"),Ce=i("8Ff5"),Se=i("kZHE"),Te=i("wOr6"),ke=i("fnIB"),Ie=i("HpyV"),xe=i("rnoZ");const De=["submitActionButton"],Oe=["actionButtons"],Ee=["uiInputUpload"];function Pe(e,t){if(1&e&&(m.jc(0,"div",22),m.jc(1,"div",23),m.ec(2,"ui-notification-inline",24),m.wc(3,"t"),m.wc(4,"t"),m.ic(),m.ic()),2&e){const e=m.vc();m.Mb(2),m.Dc("title",m.xc(3,2,e.errorNotitificationTitle))("message",m.xc(4,4,"Please fill in the required fields to proceed."))}}function Me(e,t){if(1&e&&(m.jc(0,"ui-input-select-option",25),m.fd(1),m.wc(2,"t"),m.ic()),2&e){const e=t.$implicit;m.Dc("value",e.value),m.Mb(1),m.hd(" ",m.xc(2,2,e.label)," ")}}function Ae(e,t){if(1&e&&(m.jc(0,"ui-input-error"),m.fd(1),m.wc(2,"t"),m.ic()),2&e){const e=m.vc(2);m.Mb(1),m.hd(" ",m.xc(2,1,e.formGroup.controls.evaluation.errors.scoreValidator)," ")}}function Le(e,t){if(1&e&&(m.jc(0,"ui-input-error"),m.fd(1),m.wc(2,"t"),m.ic()),2&e){const e=m.vc(2);m.Mb(1),m.hd(" ",m.xc(2,1,e.formGroup.controls.evaluation.errors.integerPositiveWithZeroValidator)," ")}}function je(e,t){if(1&e&&(m.jc(0,"div",11),m.jc(1,"ui-input-text",26),m.dd(2,Ae,3,3,"ui-input-error",27),m.dd(3,Le,3,3,"ui-input-error",27),m.ic(),m.ic()),2&e){const e=m.vc();m.Mb(1),m.Dc("label","Score")("formControl",e.formGroup.controls.evaluation)("autocomplete","off"),m.Mb(1),m.Dc("ngIf",null==e.formGroup.controls.evaluation.errors?null:e.formGroup.controls.evaluation.errors.scoreValidator),m.Mb(1),m.Dc("ngIf",null==e.formGroup.controls.evaluation.errors?null:e.formGroup.controls.evaluation.errors.integerPositiveWithZeroValidator)}}function Fe(e,t){if(1&e&&(m.jc(0,"div",11),m.ec(1,"datetime-picker",31),m.wc(2,"t"),m.ic()),2&e){const e=m.vc(2);m.Mb(1),m.Dc("enabled",!0)("label",m.xc(2,6,"Completion Date"))("inputFormControl",e.formGroup.controls.completion_date)("value",e.formGroup.controls.completion_date.value)("initialEmptyValue",!0)("type","date")}}function Re(e,t){if(1&e&&(m.jc(0,"a",32),m.wc(1,"async"),m.fd(2),m.wc(3,"t"),m.ic()),2&e){const e=m.vc(2);m.Dc("href",m.xc(1,2,e.attachmentFileFromS3),m.Xc),m.Mb(2),m.hd(" ",m.xc(3,4,"Download the uploaded file")," ")}}function Ne(e,t){if(1&e){const e=m.kc();m.jc(0,"div",28),m.dd(1,Fe,3,8,"div",14),m.jc(2,"div",11),m.jc(3,"single-upload",29),m.rc("uploaded",function(t){return m.Uc(e),m.vc().uploadedFile(t)})("uploading",function(){return m.Uc(e),m.vc().uploadingFile()})("reset",function(){return m.Uc(e),m.vc().deletedFile()}),m.ic(),m.dd(4,Re,4,6,"a",30),m.wc(5,"async"),m.ic(),m.ic()}if(2&e){const e=m.vc();m.Mb(1),m.Dc("ngIf",e.formGroup.controls.status.value==e.evaluationStatus.PASSED),m.Mb(2),m.Dc("label","Attachment")("inputFormControl",e.formGroup.controls.attachment)("collection",e.iltS3Collection),m.Mb(1),m.Dc("ngIf",null!=m.xc(5,5,e.attachmentFileFromS3))}}function Ue(e,t){if(1&e&&(m.jc(0,"div",10),m.jc(1,"div",23),m.jc(2,"ui-input-checkbox",33),m.jc(3,"ui-input-label"),m.fd(4),m.wc(5,"t"),m.ic(),m.ic(),m.ic(),m.ic()),2&e){const e=m.vc();m.Mb(2),m.Dc("formControl",e.formGroup.controls.mark_as_present),m.Mb(2),m.hd(" ",m.xc(5,2,"Mark the user as present at all of the events in the session")," ")}}const qe=function(){return{category:"classroom"}};function ze(e,t){if(1&e&&(m.jc(0,"div",8),m.jc(1,"h2",6),m.fd(2),m.wc(3,"t"),m.ic(),m.jc(4,"div",10),m.jc(5,"div",23),m.ec(6,"rich-textarea",34),m.ic(),m.ic(),m.ic()),2&e){const e=m.vc();m.Mb(2),m.hd(" ",m.yc(3,3,"Learning performance evaluation",m.Hc(6,qe))," "),m.Mb(4),m.Dc("label","Message")("inputFormControl",e.formGroup.controls.message)}}let Ve=(()=>{class e extends be.a{constructor(e,t){super(),this.sessionManagementService=e,this.docLayoutService=t,this.closePanel=new m.q,this.closePanelWithoutRefresh=new m.q,this.evaluationStatusPlaceHolder="NOT_SET",this.evaluationStatus=h.a,this.requiredMarker=a.a.t("standard","(Required)"),this.evaluationOptionList=[{label:a.a.t("standard","passed"),value:h.a.PASSED},{label:a.a.t("standard","Not passed"),value:h.a.NOT_PASSED},{label:a.a.t("standard","Not set"),value:this.evaluationStatusPlaceHolder}],this.destroy$=new de.a,this.attachmentFileFromS3=new d.a(null),this.iltS3Collection=ve.a,this._isFormValid=!0}get title(){return a.a.t("classroom","Evaluate")}get description(){return a.a.t("standard","Fill in the fields below to manage the evaluation of the selected users.")}get errorNotitificationTitle(){return this._errorNotitificationTitle}set errorNotitificationTitle(e){this._errorNotitificationTitle=a.a.t("standard",e<=1?"{count_error} Error - Evaluation not possible":"{count_error} Errors - Evaluation not possible",{count_error:e})}ngOnInit(){null!=this.data.attachment&&this.getFileFromS3(this.data.attachment);const e=null!=this.data.status_id?this.data.status_id:this.evaluationStatusPlaceHolder;this.formGroup=new he.h({status:new he.e(e,he.x.required),evaluation:new he.e(this.data.evaluation,[this.scoreValidator(),Object(fe.a)()]),completion_date:new he.e(this.data.completion_date?new oe.a(this.data.completion_date).formatTimezoned("YYYY-MM-DD",Object(re.j)()):(new oe.a).formatTimezoned("YYYY-MM-DD",Object(re.j)())),attachment:new he.e(this.data.attachment?this.data.attachment.substring(this.data.attachment.lastIndexOf("/")+1):null),message:new he.e(this.data.message),mark_as_present:new he.e(!1)}),this.formGroup.controls.status.valueChanges.pipe(Object(pe.a)(e),Object(me.a)(this.destroy$)).subscribe(e=>{e==this.evaluationStatus.PASSED?this.formGroup.controls.completion_date.setValidators(he.x.required):(this.formGroup.controls.completion_date.clearValidators(),this.formGroup.controls.completion_date.setErrors(null))})}get canExecute(){return this._isFormValid}executeImpl(){return this.evaluateSession().pipe(Object(ge.a)(e=>(this.docLayoutService.toast.showToast({type:"error",message:e.message[0]}),Object(ve.d)(this.actionButtons),Object(ue.a)(""))),Object(ae.a)(()=>(this.docLayoutService.toast.showToast({type:"success",message:a.a.t("course_management","The evaluation has been saved successfully")}),!0)))}executeWithValidation(){return Object(s.a)(this,void 0,void 0,function*(){if(this.formGroup.valid)this.executeImpl().subscribe(e=>e&&this.closePanel.emit(!0));else{this._isFormValid=!1,this.formGroup.markAllAsTouched();let e=0;for(const t in this.formGroup.controls)this.formGroup.controls[t].updateValueAndValidity({emitEvent:!1}),null!=this.formGroup.controls[t].errors?(this.formGroup.controls[t].markAsDirty(),e++):this.formGroup.controls[t].markAsPristine();Object(ve.d)(this.actionButtons),this.errorNotitificationTitle=e}return!1})}evaluateSession(){const e=this.formGroup.getRawValue();return this.sessionManagementService.evaluateSession(this.data.sessionId,this.data.userId,e.status==this.evaluationStatusPlaceHolder?0:Number(e.status),e.status==this.evaluationStatusPlaceHolder||l.a.isNaN(Number.parseInt(e.evaluation))?null:e.evaluation,e.status==this.evaluationStatus.PASSED&&e.completion_date?new oe.a(we.a.tz(new oe.a(e.completion_date).formatUTC("YYYY-MM-DD"),Object(re.j)())).formatUTC("YYYY-MM-DD HH:mm:ss"):null,e.attachment,Number(e.mark_as_present),e.message)}onChooseFile(e){console.debug(e)}uploadingFile(){this.attachmentFileFromS3.next(null)}uploadedFile(e){this.formGroup.controls.attachment.setValue(e.new_filename),this.attachmentFileFromS3.next(e.url)}deletedFile(){this.formGroup.controls.attachment.setValue(null),this.attachmentFileFromS3.next(null)}getFileFromS3(e){return this.sessionManagementService.getFileFromS3(e).subscribe(e=>this.attachmentFileFromS3.next(e.url))}scoreValidator(){return e=>Number(e.value)>this.data.max_score?{scoreValidator:a.a.t("standard","Insert a number less than the Maximum Score {n}",{n:this.data.max_score})}:null}}return e.\u0275fac=function(t){return new(t||e)(m.dc(v.a),m.dc(b.a))},e.\u0275cmp=m.Xb({type:e,selectors:[["ilt-instructor-evaluate"]],viewQuery:function(e,t){if(1&e&&(m.md(De,1),m.md(Oe,1),m.md(he.i,1),m.md(Ee,1)),2&e){let e;m.Qc(e=m.sc())&&(t.submitActionButton=e.first),m.Qc(e=m.sc())&&(t.actionButtons=e.first),m.Qc(e=m.sc())&&(t.formDirective=e.first),m.Qc(e=m.sc())&&(t.uiInputUpload=e.first)}},inputs:{data:"data"},outputs:{closePanel:"closePanel",closePanelWithoutRefresh:"closePanelWithoutRefresh"},features:[m.Jb],decls:40,vars:41,consts:[[1,"lt-session-right-panel-wrapper"],[3,"title","subtitle","trigger"],[1,"ilt-session-container","hyd-background-surface"],["autocomplete","off"],["class","hyd-row registration-standard-notification-inline-container",4,"ngIf"],[1,"hyd-row","block"],[1,"hyd-typography-heading-5","hyd-color-typography-primary"],[1,"user-info"],[1,"block"],[1,"hyd-typography-heading-5","hyd-color-typography-primary","margin-bottom-sm"],[1,"hyd-row"],[1,"hyd-col-12"],["ngDefaultControl","",3,"label","formControl","requiredMarker"],[3,"value",4,"ngFor","ngForOf"],["class","hyd-col-12",4,"ngIf"],["class","hyd-row margin-bottom-sm",4,"ngIf"],["class","hyd-row",4,"ngIf"],["class","block",4,"ngIf"],["actionButtons",""],[3,"disabled","slot","label","trigger"],[3,"disabled","slot","type","label","trigger"],["submitActionButton",""],[1,"hyd-row","registration-standard-notification-inline-container"],[1,"hyd-col-24"],[3,"title","message"],[3,"value"],["ngDefaultControl","",3,"label","formControl","autocomplete"],[4,"ngIf"],[1,"hyd-row","margin-bottom-sm"],[3,"label","inputFormControl","collection","uploaded","uploading","reset"],["download","","target","_blank",3,"href",4,"ngIf"],[3,"enabled","label","inputFormControl","value","initialEmptyValue","type"],["download","","target","_blank",3,"href"],[3,"formControl"],[3,"label","inputFormControl"]],template:function(e,t){1&e&&(m.jc(0,"div",0),m.jc(1,"doc-shared-right-panel-header",1),m.rc("trigger",function(){return t.closePanelWithoutRefresh.emit(!0)}),m.wc(2,"t"),m.wc(3,"t"),m.ic(),m.jc(4,"doc-shared-right-panel-body"),m.jc(5,"div",2),m.jc(6,"form",3),m.dd(7,Pe,5,6,"div",4),m.jc(8,"div",5),m.jc(9,"h2",6),m.fd(10),m.wc(11,"t"),m.jc(12,"span",7),m.fd(13),m.ic(),m.jc(14,"span"),m.fd(15),m.wc(16,"t"),m.ic(),m.jc(17,"span",7),m.fd(18),m.ic(),m.ic(),m.ic(),m.jc(19,"div",8),m.jc(20,"h2",9),m.fd(21),m.wc(22,"t"),m.ic(),m.jc(23,"div",10),m.jc(24,"div",11),m.jc(25,"ui-input-select",12),m.wc(26,"t"),m.wc(27,"t"),m.dd(28,Me,3,4,"ui-input-select-option",13),m.ic(),m.ic(),m.dd(29,je,4,5,"div",14),m.ic(),m.dd(30,Ne,6,7,"div",15),m.dd(31,Ue,6,4,"div",16),m.ic(),m.dd(32,ze,7,7,"div",17),m.ic(),m.ic(),m.ic(),m.jc(33,"doc-shared-right-panel-actions",null,18),m.jc(35,"doc-shared-right-panel-action",19),m.rc("trigger",function(){return t.closePanelWithoutRefresh.emit(!0)}),m.wc(36,"t"),m.ic(),m.jc(37,"doc-shared-right-panel-action",20,21),m.rc("trigger",function(){return t.executeWithValidation()}),m.wc(39,"t"),m.ic(),m.ic(),m.ic()),2&e&&(m.Mb(1),m.Dc("title",m.xc(2,23,t.title))("subtitle",m.xc(3,25,t.description)),m.Mb(6),m.Dc("ngIf",!t.canExecute),m.Mb(3),m.hd(" ",m.xc(11,27,"You are about to evaluate")," "),m.Mb(3),m.hd("",t.data.userInfo," "),m.Mb(2),m.gd(m.xc(16,29,"in the session")),m.Mb(3),m.hd(" ",t.data.sessionName,""),m.Mb(3),m.hd(" ",m.xc(22,31,"Status & Score")," "),m.Mb(4),m.Dc("label",m.xc(26,33,"Enrollment status"))("formControl",t.formGroup.controls.status)("requiredMarker",m.xc(27,35,t.requiredMarker)),m.Mb(3),m.Dc("ngForOf",t.evaluationOptionList),m.Mb(1),m.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),m.Mb(1),m.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),m.Mb(1),m.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),m.Mb(1),m.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),m.Mb(3),m.Dc("disabled",!1)("slot","end")("label",m.xc(36,37,"Cancel")),m.Mb(2),m.Dc("disabled",!1)("slot","end")("type","positive")("label",m.xc(39,39,"Evaluate")))},directives:[ye.a,Ce.a,he.y,he.p,he.q,_.p,F.cc,he.b,he.o,he.f,_.o,Se.a,Te.a,F.Ec,F.ec,F.gc,F.Rb,ke.a,Ie.a,F.Kb,F.Tb,xe.a],pipes:[a.b,_.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]  ui-input-select .ui-input-select-floating-label .ui-input-select-label.ui-typography-body{font-weight:var(--hyd-typography-weight-semibold)}[_nghost-%COMP%]  ui-input-select .ui-input-select-options{z-index:10000}.lt-session-right-panel-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100vh}.registration-standard-notification-inline-container[_ngcontent-%COMP%]{padding-top:1.5rem;padding-top:var(--hyd-spacing-md)}.ilt-session-container[_ngcontent-%COMP%]{min-height:100%}.block[_ngcontent-%COMP%]{border-bottom:1px solid var(--hyd-color-border-neutral);padding:var(--hyd-spacing-md)}.block[_ngcontent-%COMP%]   .margin-bottom-sm[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-sm)}.block[_ngcontent-%COMP%]   .margin-bottom-md[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-md)}.block[_ngcontent-%COMP%]   .hyd-col-12[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   .hyd-col-24[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   .hyd-row[_ngcontent-%COMP%]{padding-left:0}.block[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{color:var(--hyd-color-typography-accent-tertiary)}.block[_ngcontent-%COMP%]   .col-nested[_ngcontent-%COMP%]{padding-left:30px}.block[_ngcontent-%COMP%]   .venue-video-label[_ngcontent-%COMP%]{margin-top:var(--hyd-spacing-sm);margin-bottom:var(--hyd-spacing-sm)}.block[_ngcontent-%COMP%]   .venue-video-error[_ngcontent-%COMP%]{color:var(--hyd-color-typography-error)}"]}),e})();const Be=["submitActionButton"],Ge=["actionButtons"],$e=["uiInputUpload"];function He(e,t){if(1&e&&(m.jc(0,"div",22),m.jc(1,"div",23),m.ec(2,"ui-notification-inline",24),m.wc(3,"t"),m.wc(4,"t"),m.ic(),m.ic()),2&e){const e=m.vc();m.Mb(2),m.Dc("title",m.xc(3,2,e.errorNotitificationTitle))("message",m.xc(4,4,"Please fill in the required fields to proceed."))}}function Ye(e,t){if(1&e&&(m.jc(0,"ui-input-select-option",25),m.fd(1),m.wc(2,"t"),m.ic()),2&e){const e=t.$implicit;m.Dc("value",e.value),m.Mb(1),m.hd(" ",m.xc(2,2,e.label)," ")}}function We(e,t){if(1&e&&(m.jc(0,"ui-input-error"),m.fd(1),m.wc(2,"t"),m.ic()),2&e){const e=m.vc(2);m.Mb(1),m.hd(" ",m.xc(2,1,e.formGroup.controls.evaluation.errors.scoreValidator)," ")}}function Qe(e,t){if(1&e&&(m.jc(0,"ui-input-error"),m.fd(1),m.wc(2,"t"),m.ic()),2&e){const e=m.vc(2);m.Mb(1),m.hd(" ",m.xc(2,1,e.formGroup.controls.evaluation.errors.integerPositiveWithZeroValidator)," ")}}function Ke(e,t){if(1&e&&(m.jc(0,"div",11),m.jc(1,"ui-input-text",26),m.dd(2,We,3,3,"ui-input-error",27),m.dd(3,Qe,3,3,"ui-input-error",27),m.ic(),m.ic()),2&e){const e=m.vc();m.Mb(1),m.Dc("label","Score")("formControl",e.formGroup.controls.evaluation)("autocomplete","off"),m.Mb(1),m.Dc("ngIf",null==e.formGroup.controls.evaluation.errors?null:e.formGroup.controls.evaluation.errors.scoreValidator),m.Mb(1),m.Dc("ngIf",null==e.formGroup.controls.evaluation.errors?null:e.formGroup.controls.evaluation.errors.integerPositiveWithZeroValidator)}}function Xe(e,t){if(1&e&&(m.jc(0,"div",11),m.ec(1,"datetime-picker",31),m.wc(2,"t"),m.ic()),2&e){const e=m.vc(2);m.Mb(1),m.Dc("enabled",!0)("label",m.xc(2,6,"Completion Date"))("inputFormControl",e.formGroup.controls.completion_date)("value",e.formGroup.controls.completion_date.value)("initialEmptyValue",!0)("type","date")}}function Je(e,t){if(1&e&&(m.jc(0,"a",32),m.wc(1,"async"),m.fd(2),m.wc(3,"t"),m.ic()),2&e){const e=m.vc(2);m.Dc("href",m.xc(1,2,e.attachmentFileFromS3),m.Xc),m.Mb(2),m.hd(" ",m.xc(3,4,"Download the uploaded file")," ")}}function Ze(e,t){if(1&e){const e=m.kc();m.jc(0,"div",28),m.dd(1,Xe,3,8,"div",14),m.jc(2,"div",11),m.jc(3,"single-upload",29),m.rc("uploaded",function(t){return m.Uc(e),m.vc().uploadedFile(t)})("uploading",function(){return m.Uc(e),m.vc().uploadingFile()})("reset",function(){return m.Uc(e),m.vc().deletedFile()}),m.ic(),m.dd(4,Je,4,6,"a",30),m.wc(5,"async"),m.ic(),m.ic()}if(2&e){const e=m.vc();m.Mb(1),m.Dc("ngIf",e.formGroup.controls.status.value==e.evaluationStatus.PASSED),m.Mb(2),m.Dc("label","Attachment")("inputFormControl",e.formGroup.controls.attachment)("collection",e.iltS3Collection),m.Mb(1),m.Dc("ngIf",null!=m.xc(5,5,e.attachmentFileFromS3))}}function et(e,t){if(1&e&&(m.jc(0,"div",10),m.jc(1,"div",23),m.jc(2,"ui-input-checkbox",33),m.jc(3,"ui-input-label"),m.fd(4),m.wc(5,"t"),m.ic(),m.ic(),m.ic(),m.ic()),2&e){const e=m.vc();m.Mb(2),m.Dc("formControl",e.formGroup.controls.mark_as_present),m.Mb(2),m.hd(" ",m.xc(5,2,"Mark the user as present at all of the events in the session")," ")}}const tt=function(){return{category:"classroom"}};function it(e,t){if(1&e&&(m.jc(0,"div",8),m.jc(1,"h2",6),m.fd(2),m.wc(3,"t"),m.ic(),m.jc(4,"div",10),m.jc(5,"div",23),m.ec(6,"rich-textarea",34),m.ic(),m.ic(),m.ic()),2&e){const e=m.vc();m.Mb(2),m.hd(" ",m.yc(3,3,"Learning performance evaluation",m.Hc(6,tt))," "),m.Mb(4),m.Dc("label","Message")("inputFormControl",e.formGroup.controls.message)}}let st=(()=>{class e extends be.a{constructor(e,t){super(),this.sessionManagementService=e,this.docLayoutService=t,this.closePanel=new m.q,this.closePanelWithoutRefresh=new m.q,this.evaluationStatusPlaceHolder="NOT_SET",this.evaluationStatus=h.a,this.requiredMarker=a.a.t("standard","(Required)"),this.attachmentFileFromS3=new d.a(null),this.iltS3Collection=ve.a,this.evaluationOptionList=[{label:a.a.t("standard","passed"),value:h.a.PASSED},{label:a.a.t("standard","Not passed"),value:h.a.NOT_PASSED},{label:a.a.t("standard","Not set"),value:this.evaluationStatusPlaceHolder}],this.destroy$=new de.a,this._isFormValid=!0}get title(){return a.a.t("classroom","Evaluate")}get description(){return a.a.t("standard","Fill in the fields below to manage the evaluation of the selected users.")}get errorNotitificationTitle(){return this._errorNotitificationTitle}set errorNotitificationTitle(e){this._errorNotitificationTitle=a.a.t("standard",e<=1?"{count_error} Error - Evaluation not possible":"{count_error} Errors - Evaluation not possible",{count_error:e})}ngOnInit(){const e=this.evaluationStatusPlaceHolder;this.formGroup=new he.h({status:new he.e(e,he.x.required),evaluation:new he.e("",[Object(fe.a)(),this.scoreValidator()]),completion_date:new he.e((new oe.a).formatTimezoned("YYYY-MM-DD",Object(re.j)())),attachment:new he.e,message:new he.e,mark_as_present:new he.e(!1)}),this.formGroup.controls.status.valueChanges.pipe(Object(pe.a)(e),Object(me.a)(this.destroy$)).subscribe(e=>{e==this.evaluationStatus.PASSED?this.formGroup.controls.completion_date.setValidators(he.x.required):(this.formGroup.controls.completion_date.clearValidators(),this.formGroup.controls.completion_date.setErrors(null))})}get canExecute(){return this._isFormValid}executeImpl(){return this.evaluateSession().pipe(Object(ge.a)(e=>(this.docLayoutService.toast.showToast({type:"error",message:e.message[0]}),Object(ve.d)(this.actionButtons),Object(ue.a)(""))),Object(ae.a)(e=>e.backgroundJob?(this.docLayoutService.toast.showToast({type:"neutral",message:a.a.t("standard","The background job has been created successfully. The changes will be reflected once it is completed.")}),!1):(this.docLayoutService.toast.showToast({type:"success",message:a.a.t("course_management","The evaluation has been saved successfully")}),!0)))}executeWithValidation(){return Object(s.a)(this,void 0,void 0,function*(){if(this.formGroup.valid)this.executeImpl().subscribe(e=>e?this.closePanel.emit(!0):this.closePanelWithoutRefresh.emit(!0));else{this._isFormValid=!1,this.formGroup.markAllAsTouched();let e=0;for(const t in this.formGroup.controls)this.formGroup.controls[t].updateValueAndValidity({emitEvent:!1}),null!=this.formGroup.controls[t].errors?(this.formGroup.controls[t].markAsDirty(),e++):this.formGroup.controls[t].markAsPristine();Object(ve.d)(this.actionButtons),this.errorNotitificationTitle=e}return!1})}evaluateSession(){const e=this.formGroup.getRawValue();return this.sessionManagementService.massiveEvaluateSession(this.data.sessionId,this.data.userIds,e.status==this.evaluationStatusPlaceHolder?0:Number(e.status),e.status==this.evaluationStatusPlaceHolder||l.a.isNaN(Number.parseInt(e.evaluation))?null:e.evaluation,e.status==this.evaluationStatus.PASSED&&e.completion_date?new oe.a(we.a.tz(new oe.a(e.completion_date).formatUTC("YYYY-MM-DD"),Object(re.j)())).formatUTC("YYYY-MM-DD HH:mm:ss"):null,e.attachment,Number(e.mark_as_present),e.message,this.data.filters)}onChooseFile(e){console.debug(e)}uploadingFile(){this.attachmentFileFromS3.next(null)}uploadedFile(e){this.formGroup.controls.attachment.setValue(e.new_filename),this.attachmentFileFromS3.next(e.url)}deletedFile(){this.formGroup.controls.attachment.setValue(null),this.attachmentFileFromS3.next(null)}scoreValidator(){return e=>Number(e.value)>this.data.max_score?{scoreValidator:a.a.t("standard","Insert a number less than the Maximum Score {n}",{n:this.data.max_score})}:null}}return e.\u0275fac=function(t){return new(t||e)(m.dc(v.a),m.dc(b.a))},e.\u0275cmp=m.Xb({type:e,selectors:[["ilt-instructor-massive-evaluate"]],viewQuery:function(e,t){if(1&e&&(m.md(Be,1),m.md(Ge,1),m.md(he.i,1),m.md($e,1)),2&e){let e;m.Qc(e=m.sc())&&(t.submitActionButton=e.first),m.Qc(e=m.sc())&&(t.actionButtons=e.first),m.Qc(e=m.sc())&&(t.formDirective=e.first),m.Qc(e=m.sc())&&(t.uiInputUpload=e.first)}},inputs:{data:"data"},outputs:{closePanel:"closePanel",closePanelWithoutRefresh:"closePanelWithoutRefresh"},features:[m.Jb],decls:40,vars:41,consts:[[1,"lt-session-right-panel-wrapper"],[3,"title","subtitle","trigger"],[1,"ilt-session-container","hyd-background-surface"],["autocomplete","off"],["class","hyd-row registration-standard-notification-inline-container",4,"ngIf"],[1,"hyd-row","block"],[1,"hyd-typography-heading-5","hyd-color-typography-primary"],[1,"user-info"],[1,"block"],[1,"hyd-typography-heading-5","hyd-color-typography-primary","margin-bottom-sm"],[1,"hyd-row"],[1,"hyd-col-12"],["ngDefaultControl","",3,"label","formControl","requiredMarker"],[3,"value",4,"ngFor","ngForOf"],["class","hyd-col-12",4,"ngIf"],["class","hyd-row margin-bottom-sm",4,"ngIf"],["class","hyd-row",4,"ngIf"],["class","block",4,"ngIf"],["actionButtons",""],[3,"disabled","slot","label","trigger"],[3,"disabled","slot","type","label","trigger"],["submitActionButton",""],[1,"hyd-row","registration-standard-notification-inline-container"],[1,"hyd-col-24"],[3,"title","message"],[3,"value"],["ngDefaultControl","",3,"label","formControl","autocomplete"],[4,"ngIf"],[1,"hyd-row","margin-bottom-sm"],[3,"label","inputFormControl","collection","uploaded","uploading","reset"],["download","","target","_blank",3,"href",4,"ngIf"],[3,"enabled","label","inputFormControl","value","initialEmptyValue","type"],["download","","target","_blank",3,"href"],[3,"formControl"],[3,"label","inputFormControl"]],template:function(e,t){1&e&&(m.jc(0,"div",0),m.jc(1,"doc-shared-right-panel-header",1),m.rc("trigger",function(){return t.closePanelWithoutRefresh.emit(!0)}),m.wc(2,"t"),m.wc(3,"t"),m.ic(),m.jc(4,"doc-shared-right-panel-body"),m.jc(5,"div",2),m.jc(6,"form",3),m.dd(7,He,5,6,"div",4),m.jc(8,"div",5),m.jc(9,"h2",6),m.fd(10),m.wc(11,"t"),m.jc(12,"span",7),m.fd(13),m.ic(),m.jc(14,"span"),m.fd(15),m.wc(16,"t"),m.ic(),m.jc(17,"span",7),m.fd(18),m.ic(),m.ic(),m.ic(),m.jc(19,"div",8),m.jc(20,"h2",9),m.fd(21),m.wc(22,"t"),m.ic(),m.jc(23,"div",10),m.jc(24,"div",11),m.jc(25,"ui-input-select",12),m.wc(26,"t"),m.wc(27,"t"),m.dd(28,Ye,3,4,"ui-input-select-option",13),m.ic(),m.ic(),m.dd(29,Ke,4,5,"div",14),m.ic(),m.dd(30,Ze,6,7,"div",15),m.dd(31,et,6,4,"div",16),m.ic(),m.dd(32,it,7,7,"div",17),m.ic(),m.ic(),m.ic(),m.jc(33,"doc-shared-right-panel-actions",null,18),m.jc(35,"doc-shared-right-panel-action",19),m.rc("trigger",function(){return t.closePanelWithoutRefresh.emit(!0)}),m.wc(36,"t"),m.ic(),m.jc(37,"doc-shared-right-panel-action",20,21),m.rc("trigger",function(){return t.executeWithValidation()}),m.wc(39,"t"),m.ic(),m.ic(),m.ic()),2&e&&(m.Mb(1),m.Dc("title",m.xc(2,23,t.title))("subtitle",m.xc(3,25,t.description)),m.Mb(6),m.Dc("ngIf",!t.canExecute),m.Mb(3),m.hd(" ",m.xc(11,27,"You are about to evaluate")," "),m.Mb(3),m.hd("",t.data.itemCounts," "),m.Mb(2),m.gd(m.xc(16,29,"users in the session")),m.Mb(3),m.hd(" ",t.data.sessionName,""),m.Mb(3),m.hd(" ",m.xc(22,31,"Status & Score")," "),m.Mb(4),m.Dc("label",m.xc(26,33,"Enrollment status"))("formControl",t.formGroup.controls.status)("requiredMarker",m.xc(27,35,t.requiredMarker)),m.Mb(3),m.Dc("ngForOf",t.evaluationOptionList),m.Mb(1),m.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),m.Mb(1),m.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),m.Mb(1),m.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),m.Mb(1),m.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),m.Mb(3),m.Dc("disabled",!1)("slot","end")("label",m.xc(36,37,"Cancel")),m.Mb(2),m.Dc("disabled",!1)("slot","end")("type","positive")("label",m.xc(39,39,"Evaluate")))},directives:[ye.a,Ce.a,he.y,he.p,he.q,_.p,F.cc,he.b,he.o,he.f,_.o,Se.a,Te.a,F.Ec,F.ec,F.gc,F.Rb,ke.a,Ie.a,F.Kb,F.Tb,xe.a],pipes:[a.b,_.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]  ui-input-select .ui-input-select-floating-label .ui-input-select-label.ui-typography-body{font-weight:var(--hyd-typography-weight-semibold)}[_nghost-%COMP%]  ui-input-select .ui-input-select-options{z-index:10000}.lt-session-right-panel-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100vh}.registration-standard-notification-inline-container[_ngcontent-%COMP%]{padding-top:1.5rem;padding-top:var(--hyd-spacing-md)}.ilt-session-container[_ngcontent-%COMP%]{min-height:100%}.block[_ngcontent-%COMP%]{border-bottom:1px solid var(--hyd-color-border-neutral);padding:var(--hyd-spacing-md)}.block[_ngcontent-%COMP%]   .margin-bottom-sm[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-sm)}.block[_ngcontent-%COMP%]   .margin-bottom-md[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-md)}.block[_ngcontent-%COMP%]   .hyd-col-12[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   .hyd-col-24[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   .hyd-row[_ngcontent-%COMP%]{padding-left:0}.block[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{color:var(--hyd-color-typography-accent-tertiary)}.block[_ngcontent-%COMP%]   .col-nested[_ngcontent-%COMP%]{padding-left:30px}.block[_ngcontent-%COMP%]   .venue-video-label[_ngcontent-%COMP%]{margin-top:var(--hyd-spacing-sm);margin-bottom:var(--hyd-spacing-sm)}.block[_ngcontent-%COMP%]   .venue-video-error[_ngcontent-%COMP%]{color:var(--hyd-color-typography-error)}"]}),e})();const nt=["evaluateRightPanel"],at=["hydColumnSelector"];function ot(e,t){1&e&&(m.fd(0),m.wc(1,"t")),2&e&&m.hd(" ",m.xc(1,1,"Username")," ")}function rt(e,t){if(1&e&&(m.jc(0,"hyd-ellipsable-text"),m.fd(1),m.ic()),2&e){const e=t.item;m.Mb(1),m.hd(" ",e.username," ")}}function ct(e,t){if(1&e&&(m.jc(0,"div",20),m.jc(1,"div"),m.fd(2),m.wc(3,"t"),m.ic(),m.ic()),2&e){const e=m.vc().$implicit;m.Mb(2),m.hd(" ",m.xc(3,1,e.label)," ")}}function lt(e,t){if(1&e&&(m.jc(0,"hyd-ellipsable-text"),m.jc(1,"div",21),m.jc(2,"div",22),m.ec(3,"span",23),m.ic(),m.jc(4,"div",24),m.ec(5,"i"),m.ic(),m.ic(),m.ic()),2&e){const e=m.vc().item,t=m.vc().$implicit;m.Mb(3),m.Dc("innerHtml",t.value(e),m.Vc),m.Mb(1),m.Vb("evaluation-icon-passed",t.isPassed(e))("evaluation-icon-not-passed",!t.isPassed(e)),m.Mb(1),m.Rb("zmdi zmdi-",t.icon(e),"")}}function dt(e,t){if(1&e&&m.dd(0,lt,6,8,"hyd-ellipsable-text",9),2&e){const e=t.item,i=m.vc().$implicit;m.Dc("ngIf",i.isVisible(e))}}function ut(e,t){1&e&&(m.jc(0,"hyd-table-column",7),m.jc(1,"hyd-table-column-header"),m.dd(2,ct,4,3,"ng-template"),m.ic(),m.jc(3,"hyd-table-column-cell"),m.dd(4,dt,1,1,"ng-template"),m.ic(),m.ic()),2&e&&m.Dc("columnName",t.$implicit.name)("sortable",!1)}function ht(e,t){if(1&e&&(m.hc(0),m.dd(1,ut,5,2,"hyd-table-column",11),m.gc()),2&e){const e=m.vc();m.Mb(1),m.Dc("ngForOf",e.assignmentColumns)}}function pt(e,t){1&e&&m.ec(0,"hyd-column-ellipsable-text",8),2&e&&m.Dc("columnName","evaluation_date")("headerLabel","Evaluation Date")("fieldName","evaluation_date")("translateField",!1)("sortable",!0)}function mt(e,t){if(1&e&&m.fd(0),2&e){const e=m.vc().$implicit;m.hd(" ",e.label," ")}}function gt(e,t){if(1&e&&(m.jc(0,"hyd-ellipsable-text"),m.fd(1),m.ic()),2&e){const e=t.item,i=m.vc().$implicit;m.Mb(1),m.hd(" ",i.value(e.enrollment_fields)," ")}}function bt(e,t){1&e&&(m.jc(0,"hyd-table-column",7),m.jc(1,"hyd-table-column-header"),m.dd(2,mt,1,1,"ng-template"),m.ic(),m.jc(3,"hyd-table-column-cell"),m.dd(4,gt,2,1,"ng-template"),m.ic(),m.ic()),2&e&&m.Dc("columnName",t.$implicit.id)("sortable",!1)}function ft(e,t){}function vt(e,t){if(1&e&&m.ec(0,"btn-ellipsis",25),2&e){const e=t.item,i=t.index,s=m.vc();m.Dc("params",e)("orientation",(i<=7?"bottom":"top")+"-left")("actions",s.getRowActions(e))}}function _t(e,t){1&e&&(m.jc(0,"div",28),m.ec(1,"ui-spinner",29),m.ic()),2&e&&(m.Mb(1),m.Dc("size","md"))}function wt(e,t){if(1&e&&m.ec(0,"blankslate",30),2&e){const e=m.vc(2);m.Dc("isVisible",!0)("type",e.BlankSlateType.EMPTY001)("title",e.noResultsTitle)("subtitle",e.noResultsSubtitle)}}function yt(e,t){if(1&e&&(m.jc(0,"div",26),m.dd(1,_t,2,1,"div",18),m.dd(2,wt,1,4,"blankslate",27),m.ic()),2&e){const e=m.vc();m.Mb(1),m.Dc("ngIf",e.isLoading),m.Mb(1),m.Dc("ngIf",!e.isLoading&&e.noResults)}}function Ct(e,t){1&e&&(m.jc(0,"div",28),m.ec(1,"ui-spinner",29),m.ic()),2&e&&(m.Mb(1),m.Dc("size","md"))}function St(e,t){if(1&e){const e=m.kc();m.jc(0,"ilt-instructor-evaluate",34),m.rc("closePanel",function(){return m.Uc(e),m.vc(3).closePanelWithReload()})("closePanelWithoutRefresh",function(){return m.Uc(e),m.vc(3).closePanel()}),m.ic()}if(2&e){const e=m.vc(3);m.Dc("data",e.iltInstructorEvaluateData)}}function Tt(e,t){if(1&e){const e=m.kc();m.jc(0,"ilt-instructor-massive-evaluate",34),m.rc("closePanel",function(){return m.Uc(e),m.vc(3).closePanelWithReload()})("closePanelWithoutRefresh",function(){return m.Uc(e),m.vc(3).closePanel()}),m.ic()}if(2&e){const e=m.vc(3);m.Dc("data",e.iltInstructorMassiveEvaluateData)}}function kt(e,t){if(1&e&&(m.dd(0,St,1,1,"ilt-instructor-evaluate",33),m.dd(1,Tt,1,1,"ilt-instructor-massive-evaluate",33)),2&e){const e=m.vc(2);m.Dc("ngIf",e.isViewSingleEvaluate),m.Mb(1),m.Dc("ngIf",e.isViewMassiveEvaluate)}}function It(e,t){if(1&e){const e=m.kc();m.jc(0,"doc-shared-right-panel",31,32),m.rc("close",function(){return m.Uc(e),m.vc().closePanel()}),m.dd(2,kt,2,2,"ng-template"),m.ic()}if(2&e){const e=m.vc();m.Dc("size",e.docLayoutRightPanelSizeEnum.MD)}}var xt=function(e){return e.username="username",e.email="email",e.enrollmentDate="enrollment_date",e.enrollmentStatus="enrollment_status",e.evaluation="evaluation",e.evaluationDate="evaluation_date",e.completionDate="completion_date",e.firstName="first_name",e.lastName="last_name",e}({});let Dt=(()=>{class e extends o.c{constructor(e,t,i,s){super(s,t),this.sessionManagementService=e,this.docService=i,this.isViewEvaluate=!1,this.isViewSingleEvaluate=!1,this.isViewMassiveEvaluate=!1,this.assignmentColumns=[{name:xt.evaluation,label:a.a.t("classroom","Evaluation"),icon:e=>e.evaluation_status==h.a.PASSED?"thumb-up":"thumb-down",isPassed:e=>e.evaluation_status==h.a.PASSED,isVisible:e=>null!=e.evaluation_status,value:e=>null!=e.evaluation?e.evaluation:"&nbsp;"}],this.blankSlateConfig={type:y.a.EMPTY002,title:a.a.t("standard","Whoops, there's nothing here"),subtitle:a.a.t("report","Looks like there\u2019s nothing for you to do in this area right now.")},this.allColumns=[],this.lockedColumns=[xt.username],this.preselectedColumns=[],this.enrollmentAdditionalFieldColumnList=[],this.docLayoutRightPanelSizeEnum=ce.a,this.hiddenColumns=["actions"],this._rowActions=[{id:"evaluate",title:a.a.t("classroom","Evaluate"),action:e=>{this._iltInstructorEvaluateData={sessionId:this.sessionId,sessionName:this.sessionName,min_score:this.minScore,max_score:this.maxScore,userInfo:l.a.isEmpty(e.first_name)||l.a.isEmpty(e.last_name)?e.username:e.first_name+" "+e.last_name,completion_date:e.date_complete_not_formatted,evaluation:e.evaluation,status_id:e.evaluation_status,userId:e.user_id,message:e.message,attachment:e.attachment},this.isViewEvaluate=!0,this.isViewSingleEvaluate=!0,l.a.defer(()=>this.docService.rightPanel.showPanel(this.evaluateRightPanel))},active:!1}],this.countColumns=0,this.updateRender=!0,this.isEnrollmentAdditionaldFieldLoad$=new d.a(!0),this._massiveActions=[{id:"massive-evaluate",title:a.a.t("classroom","Evaluate"),action:()=>{this._iltInstructorMassiveEvaluateData={sessionId:this.sessionId,sessionName:this.sessionName,itemCounts:this.selectedItemsCount,userIds:this.selectedItemsId,filters:this._currentFilters.getValue(),max_score:this.maxScore,min_score:this.minScore},this.isViewEvaluate=!0,this.isViewMassiveEvaluate=!0,l.a.defer(()=>this.docService.rightPanel.showPanel(this.evaluateRightPanel))},active:!1}]}get selectedItemsId(){return l.a.map(this.selectedItems,e=>e.id)}get isSelectAllEnable(){return this._massiveActions.length>0}get iltInstructorEvaluateData(){return this._iltInstructorEvaluateData}get iltInstructorMassiveEvaluateData(){return this._iltInstructorMassiveEvaluateData}ngOnInit(){super.ngOnInit()}fetchDataImpl(e,t,i){return this.sessionManagementService.getSessionEnrollmentsPaginatedList(this.sessionId,e.pageSize,e.page,t.dir,t.columnName,i).pipe(Object(ae.a)(e=>(e.items=e.items.map(e=>Object.assign(Object.assign(Object.assign({},e),{date_complete_not_formatted:e.completion_date,completion_date:e.completion_date?new oe.a(e.completion_date).formatTimezoned(Object(re.k)(Object(re.i)(),re.a),Object(re.j)()):"",evaluation_date:e.evaluation_date?new oe.a(e.evaluation_date).formatUTC(Object(re.k)(Object(re.i)(),re.a)):"",enrollment_date:e.enrollment_date?new oe.a(e.enrollment_date).formatTimezoned(Object(re.k)(Object(re.i)(),re.a),Object(re.j)()):""}),e.enrollment_fields.map(e=>{const t=this.sessionManagementService.enrollmentAdditionalFields.find(t=>t.id==e.id);(null==t?void 0:t.type)==h.f.date&&(e.value=new oe.a(e.value).formatTimezoned(Object(re.k)(Object(re.i)(),re.a),Object(re.j)()))}))),e)))}getInitialSorting(){return{columnName:xt.username,dir:S.a.ASC}}getMassiveActions(){const e=this._massiveActions;if(!this.canEvaluateEnable){const t=e.findIndex(e=>"massive-evaluate"==e.id);-1!==t&&e.splice(t,1)}return e}getRowActions(){const e=this._rowActions;if(!this.canEvaluateEnable){const t=e.findIndex(e=>"evaluate"==e.id);-1!==t&&e.splice(t,1)}return this._rowActions}onFiltersChanged(e){const t=this.processFilters(e);this._currentFilters.next(t),this.dataBrowserSource.appliedFiltersNumber.next(Object.keys(t).filter(e=>e!=h.g.SEARCH).length)}closePanelWithReload(){this.refresh(),this.closePanel()}closePanel(){this.docService.rightPanel.hidePanel(),this.isViewEvaluate=!1,this.isViewSingleEvaluate=!1,this.isViewMassiveEvaluate=!1}setRowActions(e){return[]}initializeColumns(){this._setAllColumns(),this._setPreselectedColumns(),this.enrollmentAdditionalFieldColumnList=this.sessionManagementService.enrollmentAdditionalFields.map(e=>({id:"additionalField"+e.id,label:e.title,value:t=>{const i=t.find(t=>t.id==e.id);return i?i.value:""}})),this.countColumns+=this.sessionManagementService.enrollmentAdditionalFields.length}initializeColumnSelectorPanel(){return{icon:"view-column",iconTooltip:{tooltipText:"Column selector",tooltipPosition:T.b.BOTTOM},content:{}}}initializeFilters(){const e=[{title:a.a.t("standard","Search"),code:h.g.SEARCH,type:C.d.free_search_filter,params:{placeholder:a.a.t("standard","Search...")}},{title:a.a.t("classroom","Evaluation Status"),code:h.g.EVALUATION_STATUS,type:C.d.radio_filter,disableAllOptionFilter:!1,params:{options:[{key:h.h.EVALUATION_STATUS_EVALUATED,label:a.a.t("classroom","Already evaluated")},{key:h.h.EVALUATION_STATUS_NOT_EVALUATED,label:a.a.t("classroom","Waiting for evaluation")}],useRawValue:!0}},{title:a.a.t("classroom","Completion"),code:h.g.COMPLETION,type:C.d.radio_filter,disableAllOptionFilter:!1,params:{options:[{key:h.h.COMPLETION_COMPLETED,label:a.a.t("standard","Completed")},{key:h.h.COMPLETION_NOT_COMPLETED,label:a.a.t("player","Incomplete")}],useRawValue:!0}},{title:a.a.t("standard","Enrollment status"),code:h.g.COURSE_STATUS,type:C.d.checkbox_filter,disableAllOptionFilter:!1,params:{options:[{key:h.h.COURSE_STATUS_WAITING,label:a.a.t("standard","_WAITING_USERS")},{key:h.h.COURSE_STATUS_ENROLLED,label:a.a.t("standard","Enrolled")},{key:h.h.COURSE_STATUS_IN_PROGRESS,label:a.a.t("standard","In progress")},{key:h.h.COURSE_STATUS_COMPLETED,label:a.a.t("standard","Completed")}],useRawValue:!0}}];return Object(I.a)(e)}_setAllColumns(){this.allColumns=[xt.username,xt.firstName,xt.lastName,xt.email,xt.enrollmentDate,xt.enrollmentStatus,xt.completionDate,this.canEvaluateEnable?xt.evaluation:"",this.canEvaluateEnable?xt.evaluationDate:""].filter(e=>e.length>0),this.countColumns=this.allColumns.length}_setPreselectedColumns(){this.preselectedColumns=[xt.username,xt.firstName,xt.lastName,xt.email,xt.enrollmentDate,xt.completionDate,xt.enrollmentStatus,this.canEvaluateEnable?xt.evaluation:"",this.canEvaluateEnable?xt.evaluationDate:""].filter(e=>e.length>0)}}return e.\u0275fac=function(t){return new(t||e)(m.dc(v.a),m.dc(m.o),m.dc(b.a),m.dc(m.i))},e.\u0275cmp=m.Xb({type:e,selectors:[["ilt-instructor-session-enrollment-list"]],viewQuery:function(e,t){if(1&e&&(m.md(nt,1),m.md(at,1)),2&e){let e;m.Qc(e=m.sc())&&(t.evaluateRightPanel=e.first),m.Qc(e=m.sc())&&(t.hydColumnSelector=e.first)}},inputs:{sessionId:"sessionId",sessionName:"sessionName",courseId:"courseId",canEvaluateEnable:"canEvaluateEnable",maxScore:"maxScore",minScore:"minScore"},features:[m.Jb],decls:39,vars:82,consts:[[1,"data-browser",3,"hidden","dataBrowserSource","onFiltersUpdate"],[1,"custom-panel"],[3,"tableRef","cacheId","lockedColumns","preselectedColumns","hiddenColumns","maxSelectable"],[1,"data-browser-table-content"],[1,"table-wrapper"],[1,"hyd-table-enrollments-list",3,"data","selectable","rowsComparisonFunction","rowHeight","selection","sorting","selectRows","sort"],["sessionManagementEnrollmentListTable",""],[3,"columnName","sortable"],[3,"columnName","headerLabel","fieldName","translateField","sortable"],[4,"ngIf"],[3,"columnName","headerLabel","fieldName","translateField","sortable",4,"ngIf"],[3,"columnName","sortable",4,"ngFor","ngForOf"],[3,"columnWidth","columnName","ellipsed"],[3,"pageIndex","pageSize","length","pageChange"],[1,"massive-actions-bar-wrapper"],[3,"counter","actions","actionTitle","type","isSelectAllButtonVisible","isUnSelectAllButtonVisible","selectAll$","unselectAll$"],["class","table-cover bg-grey-superlight",4,"ngIf"],[1,"no-data",3,"isVisible","type","title","subtitle"],["class","spinner",4,"ngIf"],[3,"size","close",4,"ngIf"],[1,"col-with-icon-header"],[1,"col-with-icon-cell"],[1,"counter"],[3,"innerHtml"],[1,"icon"],[3,"params","orientation","actions"],[1,"table-cover","bg-grey-superlight"],[3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"spinner"],[3,"size"],[3,"isVisible","type","title","subtitle"],[3,"size","close"],["evaluateRightPanel",""],[3,"data","closePanel","closePanelWithoutRefresh",4,"ngIf"],[3,"data","closePanel","closePanelWithoutRefresh"]],template:function(e,t){if(1&e&&(m.jc(0,"data-browser",0),m.rc("onFiltersUpdate",function(e){return t.onFiltersChanged(e)}),m.jc(1,"div",1),m.ec(2,"hyd-column-selector",2),m.ic(),m.jc(3,"div",3),m.wc(4,"async"),m.jc(5,"div",4),m.jc(6,"hyd-table",5,6),m.rc("selectRows",function(e){return t.onRowsSelected(e)})("sort",function(e){return t.onSortingChanged(e)}),m.wc(8,"async"),m.jc(9,"hyd-table-column",7),m.jc(10,"hyd-table-column-header"),m.dd(11,ot,2,3,"ng-template"),m.ic(),m.jc(12,"hyd-table-column-cell"),m.dd(13,rt,2,1,"ng-template"),m.ic(),m.ic(),m.ec(14,"hyd-column-ellipsable-text",8),m.ec(15,"hyd-column-ellipsable-text",8),m.ec(16,"hyd-column-ellipsable-text",8),m.ec(17,"hyd-column-ellipsable-text",8),m.ec(18,"hyd-column-ellipsable-text",8),m.dd(19,ht,2,1,"ng-container",9),m.dd(20,pt,1,5,"hyd-column-ellipsable-text",10),m.ec(21,"hyd-column-ellipsable-text",8),m.dd(22,bt,5,2,"hyd-table-column",11),m.jc(23,"hyd-table-column",12),m.jc(24,"hyd-table-column-header"),m.dd(25,ft,0,0,"ng-template"),m.ic(),m.jc(26,"hyd-table-column-cell"),m.dd(27,vt,1,3,"ng-template"),m.ic(),m.ic(),m.ic(),m.jc(28,"hyd-paginator",13),m.rc("pageChange",function(e){return t.onPagingChanged(e)}),m.ic(),m.jc(29,"div",14),m.jc(30,"massive-actions-bar",15),m.rc("selectAll$",function(){return t.onSelectEverything(!0)})("unselectAll$",function(){return t.onSelectEverything(!1)}),m.wc(31,"t"),m.ic(),m.ic(),m.ic(),m.ic(),m.dd(32,yt,3,2,"div",16),m.wc(33,"async"),m.ic(),m.ec(34,"blankslate",17),m.wc(35,"t"),m.wc(36,"t"),m.dd(37,Ct,2,1,"div",18),m.dd(38,It,3,1,"doc-shared-right-panel",19)),2&e){const e=m.Rc(7);m.Dc("hidden",!t.initialized||t.noData)("dataBrowserSource",t.dataBrowserSource),m.Mb(2),m.Dc("tableRef",e)("cacheId","session-management-enrollments-list-column-selector_")("lockedColumns",t.lockedColumns)("preselectedColumns",t.preselectedColumns)("hiddenColumns",t.hiddenColumns)("maxSelectable",t.countColumns),m.Mb(1),m.Vb("massive-actions-bar-open",m.xc(4,70,t.showMassiveActionsBar$)),m.Mb(3),m.Dc("data",m.xc(8,72,t.tableData$))("selectable",t.isSelectAllEnable)("rowsComparisonFunction",t.comparerFn)("rowHeight",t.HYD_TABLE_STYLES.ROW_HEIGHT)("selection",t.currentSelection)("sorting",t.sortingCriteria),m.Mb(3),m.Dc("columnName","username")("sortable",!0),m.Mb(5),m.Dc("columnName","first_name")("headerLabel","First Name")("fieldName","first_name")("translateField",!1)("sortable",!0),m.Mb(1),m.Dc("columnName","last_name")("headerLabel","Last Name")("fieldName","last_name")("translateField",!1)("sortable",!0),m.Mb(1),m.Dc("columnName","email")("headerLabel","Email")("fieldName","email")("translateField",!1)("sortable",!0),m.Mb(1),m.Dc("columnName","enrollment_status")("headerLabel","Enrollment status")("fieldName","status")("translateField",!1)("sortable",!1),m.Mb(1),m.Dc("columnName","enrollment_date")("headerLabel","Enrollment date")("fieldName","enrollment_date")("translateField",!1)("sortable",!0),m.Mb(1),m.Dc("ngIf",t.canEvaluateEnable),m.Mb(1),m.Dc("ngIf",t.canEvaluateEnable),m.Mb(1),m.Dc("columnName","completion_date")("headerLabel","Completion Date")("fieldName","completion_date")("translateField",!1)("sortable",!0),m.Mb(1),m.Dc("ngForOf",t.enrollmentAdditionalFieldColumnList),m.Mb(1),m.Dc("columnWidth","30.042px")("columnName","actions")("ellipsed",!1),m.Mb(5),m.Dc("pageIndex",null==t.paginationInfo?null:t.paginationInfo.page)("pageSize",null==t.paginationInfo?null:t.paginationInfo.pageSize)("length",t.totalCount),m.Mb(2),m.Dc("counter",t.selectedItemsCount)("actions",t.getMassiveActions())("actionTitle",m.xc(31,74,"Choose action"))("type","inline-btn")("isSelectAllButtonVisible",!0)("isUnSelectAllButtonVisible",!0),m.Mb(2),m.Dc("ngIf",m.xc(33,76,t.hideTable$)),m.Mb(2),m.Ec("title",m.xc(35,78,t.blankSlateConfig.title)),m.Ec("subtitle",m.xc(36,80,t.blankSlateConfig.subtitle)),m.Dc("isVisible",t.initialized&&t.noData)("type",t.blankSlateConfig.type),m.Mb(3),m.Dc("ngIf",!t.initialized),m.Mb(1),m.Dc("ngIf",t.isViewEvaluate)}},directives:[x.a,D.a,O.a,E.c,E.d,E.b,P.a,_.p,_.o,M.b,A.a,L.a,j.a,R.a,F.fd,le.a,Ve,st],pipes:[_.b,a.b],styles:['.data-browser-table[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{margin-top:100px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;z-index:1}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate{margin-top:50px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section{font-size:1.1em}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div{font-size:.8em}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-start;padding-top:50px;box-sizing:border-box}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%]{position:static}.data-browser-table[_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"], .data-browser-table   [_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"]{flex-grow:0!important;justify-content:flex-end!important}.color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content, .data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table{display:block;height:calc(100% - 46px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body{height:calc(100% - 39px);overflow-x:hidden;overflow-y:auto}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper{overflow:hidden;height:0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar{height:52px}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper{height:calc(100% - 52px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper{height:52px;overflow:visible}.data-browser-table[_nghost-%COMP%]     .data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser{overflow-y:auto;overflow-x:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{width:330px;padding:0;margin:0;display:block;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#fff}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:1px solid var(--hyd-color-border-neutral)}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:0}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:1px solid var(--hyd-color-border-neutral)}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper{box-sizing:border-box;border:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab{display:flex;flex-direction:column}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter{flex-shrink:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last{flex-grow:1}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters{flex-shrink:0;justify-content:flex-end;padding:10px}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:10px}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:auto}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box{padding-right:20px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col{height:100%;margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col{position:relative;width:calc(100% - 330px - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col{position:relative;width:calc(100% - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row{width:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper{height:calc(100% - 40px - 1px);overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container{height:100%;overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid{margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid{margin:0 auto}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{overflow:hidden;height:100%}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 -15px 0 0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 0 0 -15px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters{height:40px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder{height:40px!important}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i{padding-top:10px;padding-bottom:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{height:40px;padding:0 6px}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container{flex-grow:1;max-width:unset}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{display:none}[_nghost-%COMP%]{display:block}.massive-actions-bar-wrapper[_ngcontent-%COMP%]{height:52px;position:relative;top:-1px}.col-with-icon-header[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.col-with-icon-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.col-with-icon-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%], .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;width:50%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{justify-content:flex-end}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{justify-content:flex-start}.router-outlet:not(.direction-rtl):not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet:not(.direction-rtl):not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:6px}.router-outlet.direction-rtl:not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet.direction-rtl:not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:6px}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i.zmdi[_ngcontent-%COMP%]{font-size:var(--hyd-size-icon-sm)}.evaluation-icon-passed[_ngcontent-%COMP%]{color:#006e54}.evaluation-icon-not-passed[_ngcontent-%COMP%]{color:#cf000f}'],changeDetection:0}),e})();function Ot(e,t){if(1&e&&m.ec(0,"ilt-instructor-session-events-list",4),2&e){const e=m.vc(2);m.Dc("sessionId",e.sessionId)}}function Et(e,t){if(1&e&&(m.jc(0,"tab",2),m.dd(1,Ot,1,1,"ilt-instructor-session-events-list",3),m.ic()),2&e){const e=m.vc();m.Dc("title",e.events_attendanceTabTitle)("name",e.tabsParamsName.events_attendance)("defaultTab",e.initialTab===e.tabsParamsName.events_attendance),m.Mb(1),m.Dc("ngIf",e.wasTabLoaded(e.tabsParamsName.events_attendance))}}function Pt(e,t){if(1&e&&m.ec(0,"ilt-instructor-session-enrollment-list",6),2&e){const e=m.vc(2);m.Dc("sessionId",e.sessionId)("sessionName",e.sessionName)("courseId",e.courseId)("maxScore",e.maxScore)("minScore",e.minScore)("canEvaluateEnable",e.canEvaluateEnable)}}function Mt(e,t){if(1&e&&(m.jc(0,"tab",2),m.dd(1,Pt,1,6,"ilt-instructor-session-enrollment-list",5),m.wc(2,"async"),m.ic()),2&e){const e=m.vc();m.Dc("title",e.enrollments_evaluationsTabTitle)("name",e.tabsParamsName.enrollments_evaluations)("defaultTab",e.initialTab===e.tabsParamsName.enrollments_evaluations),m.Mb(1),m.Dc("ngIf",m.xc(2,4,e.wasTabLoaded(e.tabsParamsName.enrollments_evaluations)&&e.isUpdateEvaluationType$))}}const At="tab";var Lt=function(e){return e.events_attendance="events_attendance",e.enrollments_evaluations="enrollments_evaluations",e}({});const jt=Lt.events_attendance;let Ft=(()=>{class e extends o.g{constructor(e,t,i,s,n,o,r){super(s),this.route=e,this.router=t,this.docService=i,this.pageService=n,this.docLayoutService=o,this.sessionManagementService=r,this.SUPPORTED_TABS=[Lt.events_attendance,Lt.enrollments_evaluations],this.propertiesTabTitle=a.a.t("standard","Properties"),this.events_attendanceTabTitle=a.a.t("standard","events & attendance"),this.enrollments_evaluationsTabTitle=a.a.t("standard","enrollments & evaluations"),this.selectedTabName=Lt.events_attendance,this._loadedTabs=new Map,this.isUpdateEvaluationType$=new d.a(!0),this._preventNavigation=!1}get sessionId(){return this.session.session_id}get canEvaluateEnable(){return this._canEvaluateEnable}set canEvaluateEnable(e){this._canEvaluateEnable=e==h.i.EVALUATION}get sessionName(){return this.session.name}get courseId(){return this.session.course.id}get minScore(){return this._minScore}set minScore(e){this._minScore=e}get maxScore(){return this._maxScore}set maxScore(e){this._maxScore=e}get tabsParamsName(){return Lt}get canViewSessionsTab(){return this.sessionManagementService.permissions.isSessionInstructor}get canViewEventsTab(){return this.sessionManagementService.permissions.isEventInstructor||this.sessionManagementService.permissions.isSessionInstructor}ngOnInit(){this.canViewSessionsTab&&!this.canViewEventsTab&&(this.SUPPORTED_TABS=[Lt.enrollments_evaluations]),!this.canViewSessionsTab&&this.canViewEventsTab&&(this.SUPPORTED_TABS=[Lt.events_attendance]),this.session=this.route.snapshot.data.session,this.canEvaluateEnable=this.session.evaluation_type,this.maxScore=this.session.score_base,this.minScore=this.session.min_score_for_completion,this.setupTabs(),this.setupDocLayout(),this.subscribeTo()}ngOnDestroy(){super.ngOnDestroy(),this.docService.actionButtons.clearActionButtons()}ngAfterViewInit(){l.a.delay(()=>{this.calculateDimensions()},250),this.subscribeTo()}setupDocLayout(e=!1){this.setupBreadcrumbs(),this.docService.header.showTitleBar({title:this.session.name,subtitle:a.a.t("classroom","Manage session details and properties"),fullWidth:!0,mode:"shadowed"}),e||(this.docService.page.activateFullHeightMode(),this.docService.actionButtons.clearActionButtons())}setupBreadcrumbs(e=this.selectedTabName){this.docService.breadcrumbs.setHierarchicalBreadcrumbs([{label:p.a.myCoursesAndLearningPlans,href:"/learn/mycourses"},{label:this.session.course.name,href:`/learn/course/${this.session.course.id}`},{label:"Instructor Overview",href:`/learn/instructor/course/${this.session.course.id}`},{label:"Events & Enrollments",href:`/learn/instructor/session/${this.session.session_id}`,queryParameters:{tab:e}}])}setupTabs(){var e;const t=this.route.snapshot.queryParamMap.get(At),i=null!==(e=l.a.includes(this.SUPPORTED_TABS,t)?t:null)&&void 0!==e?e:jt;this.selectedTabName=this.initialTab=i,this._loadedTabs.set(this.initialTab,!0),this.subscribeTo(this.route.queryParamMap.pipe(Object(u.a)(1)).subscribe(e=>{var t;const i=null!==(t=e.get(At))&&void 0!==t?t:jt;this._preventNavigation=!0,this.selectTab(i),this.setupBreadcrumbs(i)}))}openCreateNewEventPanel(){}wasTabLoaded(e){var t;return null!==(t=this._loadedTabs.get(e))&&void 0!==t&&t}selectTab(e){const t=l.a.indexOf(this.SUPPORTED_TABS,e);-1!==t&&this.tabsManager.onTabChoose(t)}onTabSelected(e){return Object(s.a)(this,void 0,void 0,function*(){e==Lt.events_attendance?this.pageService.showFloatingSaveBar():this.pageService.hideFloatingSaveBar(),yield this.adjustQueryString(e),this.selectedTabName!==e&&l.a.includes(this.SUPPORTED_TABS,e)&&(this.selectedTabName=e,this._loadedTabs.set(e,!0))})}adjustQueryString(e){return Object(s.a)(this,void 0,void 0,function*(){this._preventNavigation?this._preventNavigation=!1:(yield this.router.navigate([],Object.assign({queryParams:{tab:e},relativeTo:this.route,replaceUrl:!0},n.b)),this.setupDocLayout(!0))})}updateEvaluationType(e){this.canEvaluateEnable=e.evaluationType,this.maxScore=e.maxScore,this.minScore=e.minScore,this.isUpdateEvaluationType$.next(!1),l.a.delay(()=>{this.isUpdateEvaluationType$.next(!0)},250)}}return e.\u0275fac=function(t){return new(t||e)(m.dc(g.a),m.dc(g.h),m.dc(b.a),m.dc(m.o),m.dc(f.c),m.dc(b.a),m.dc(v.a))},e.\u0275cmp=m.Xb({type:e,selectors:[["ilt-instructor-session-event-list"]],viewQuery:function(e,t){if(1&e&&m.md(r.a,3),2&e){let e;m.Qc(e=m.sc())&&(t.tabsManager=e.first)}},features:[m.Jb],decls:3,vars:2,consts:[[3,"tabChoose"],[3,"title","name","defaultTab",4,"ngIf"],[3,"title","name","defaultTab"],[3,"sessionId",4,"ngIf"],[3,"sessionId"],[3,"sessionId","sessionName","courseId","maxScore","minScore","canEvaluateEnable",4,"ngIf"],[3,"sessionId","sessionName","courseId","maxScore","minScore","canEvaluateEnable"]],template:function(e,t){1&e&&(m.jc(0,"tabs-manager",0),m.rc("tabChoose",function(e){return t.onTabSelected(e)}),m.dd(1,Et,2,4,"tab",1),m.dd(2,Mt,3,6,"tab",1),m.ic()),2&e&&(m.Mb(1),m.Dc("ngIf",t.canViewEventsTab),m.Mb(1),m.Dc("ngIf",t.canViewSessionsTab))},directives:[r.a,_.p,w.a,ne,Dt],pipes:[_.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     .tabs-manager .tabs-labels{padding:0!important}"],changeDetection:0}),e})()},ELBg:function(e,t,i){"use strict";var s={single_source_shortest_paths:function(e,t,i){var n={},a={};a[t]=0;var o,r,c,l,d,u,h=s.PriorityQueue.make();for(h.push(t,0);!h.empty();)for(c in l=(o=h.pop()).cost,d=e[r=o.value]||{})d.hasOwnProperty(c)&&(u=l+d[c],(void 0===a[c]||a[c]>u)&&(a[c]=u,h.push(c,u),n[c]=r));if(void 0!==i&&void 0===a[i]){var p=["Could not find a path from ",t," to ",i,"."].join("");throw new Error(p)}return n},extract_shortest_path_from_predecessor_list:function(e,t){for(var i=[],s=t;s;)i.push(s),s=e[s];return i.reverse(),i},find_path:function(e,t,i){var n=s.single_source_shortest_paths(e,t,i);return s.extract_shortest_path_from_predecessor_list(n,i)},PriorityQueue:{make:function(e){var t,i=s.PriorityQueue,n={};for(t in e=e||{},i)i.hasOwnProperty(t)&&(n[t]=i[t]);return n.queue=[],n.sorter=e.sorter||i.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=s},EdLK:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var s=i("LRne"),n=i("rLbr"),a=i("JIr8"),o=i("lJxs"),r=i("fXoL"),c=i("Y9qQ");let l=(()=>{class e{constructor(e){this._backendService=e}addSkills(e){return this._backendService.request("/skill/v1/skills/catalog",n.a.POST,{skill_codes:e.map(e=>e.code)}).pipe(Object(a.a)(()=>Object(s.a)({response:{data:{success:!1}}})),Object(o.a)(e=>{var t;return Boolean(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.success)}))}hasSkills(){return this._backendService.request("/skill/v1/skills/catalog",n.a.GET,{page:1,page_size:1}).pipe(Object(a.a)(()=>Object(s.a)({data:void 0})),Object(o.a)(e=>{var t;return(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.total_count)>1}))}}return e.\u0275fac=function(t){return new(t||e)(r.nc(c.a))},e.\u0275prov=r.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},GuO3:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=function(e){return e[e.DATE="date"]="DATE",e[e.DROPDOWN="dropdown"]="DROPDOWN",e[e.TEXTFIELD="textfield"]="TEXTFIELD",e[e.TEXTAREA="textarea"]="TEXTAREA",e[e.ACCREDIFRAME="accrediframe"]="ACCREDIFRAME",e}({})},J6Nv:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},JzKC:function(e,t,i){var s=i("Wogr"),n=i("aZ40");t.mul=function(e,t){var i=new s(e.length+t.length-1);i.fill(0);for(var a=0;a<e.length;a++)for(var o=0;o<t.length;o++)i[a+o]^=n.mul(e[a],t[o]);return i},t.mod=function(e,t){for(var i=new s(e);i.length-t.length>=0;){for(var a=i[0],o=0;o<t.length;o++)i[o]^=n.mul(t[o],a);for(var r=0;r<i.length&&0===i[r];)r++;i=i.slice(r)}return i},t.generateECPolynomial=function(e){for(var i=new s([1]),a=0;a<e;a++)i=t.mul(i,[1,n.exp(a)]);return i}},Karm:function(e,t,i){"use strict";i.d(t,"h",function(){return s}),i.d(t,"d",function(){return n}),i.d(t,"n",function(){return a}),i.d(t,"c",function(){return o}),i.d(t,"e",function(){return r}),i.d(t,"p",function(){return c}),i.d(t,"a",function(){return l}),i.d(t,"i",function(){return d}),i.d(t,"k",function(){return u}),i.d(t,"j",function(){return h}),i.d(t,"o",function(){return p}),i.d(t,"q",function(){return m}),i.d(t,"r",function(){return g}),i.d(t,"m",function(){return b}),i.d(t,"l",function(){return f}),i.d(t,"f",function(){return v}),i.d(t,"g",function(){return _}),i.d(t,"b",function(){return w});var s=function(e){return e[e.READY="ready"]="READY",e[e.REQUEST_FOR_PLAY="request_for_play"]="REQUEST_FOR_PLAY",e[e.PLAY_REJECTED="play_rejected"]="PLAY_REJECTED",e[e.PLAYING="playing"]="PLAYING",e[e.ACTIVITY_COMPLETED="activity_completed"]="ACTIVITY_COMPLETED",e[e.COURSE_COMPLETED="course_completed"]="COURSE_COMPLETED",e[e.PLAY_REJECT_USERFIELDS="play_reject_userfields"]="PLAY_REJECT_USERFIELDS",e}({}),n=function(e){return e[e.INITIALIZING="initializing"]="INITIALIZING",e[e.READY="ready"]="READY",e[e.PLAYER="player"]="PLAYER",e[e.OVERVIEW="overview"]="OVERVIEW",e[e.UNAUTHORIZED="unauthorized"]="UNAUTHORIZED",e}({}),a=function(e){return e[e.INITIALIZING="initializing"]="INITIALIZING",e[e.REQUEST_SESSION="request_session"]="REQUEST_SESSION",e[e.REQUEST_REJECTED="request_rejected"]="REQUEST_REJECTED",e[e.READY="ready"]="READY",e[e.NO_SESSION="no_sessions"]="NO_SESSION",e[e.SESSION_ENROLLMENT="changeSessionEnrollmentSuccess"]="SESSION_ENROLLMENT",e}({}),o=function(e){return e[e.INITIALIZING="initializing"]="INITIALIZING",e[e.EMPTY="empty"]="EMPTY",e[e.UNAUTHORIZED="unauthorized"]="UNAUTHORIZED",e[e.READY="ready"]="READY",e[e.REQUEST_FOR_PLAY="request_for_play"]="REQUEST_FOR_PLAY",e[e.PLAY_REJECTED="play_rejected"]="PLAY_REJECTED",e[e.PLAYING="playing"]="PLAYING",e[e.PLAY_REJECT_USERFIELDS="play_reject_userfields"]="PLAY_REJECT_USERFIELDS",e}({}),r=function(e){return e.SUBSCRIBED="subscribed",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.WAITING="waiting",e}({}),c=function(e){return e[e.SUBSCRIBED="subscribed"]="SUBSCRIBED",e[e.IN_PROGRESS="in_progress"]="IN_PROGRESS",e[e.COMPLETED="completed"]="COMPLETED",e}({}),l=function(e){return e[e.SCORM="scormorg"]="SCORM",e[e.AICC="aicc"]="AICC",e[e.TINCAN="tincan"]="TINCAN",e[e.VIDEO="video"]="VIDEO",e[e.YOUTUBE="youtube"]="YOUTUBE",e[e.WISTIA="wistia"]="WISTIA",e[e.VIMEO="vimeo"]="VIMEO",e[e.FILE="file"]="FILE",e[e.ASSIGNMENT="deliverable"]="ASSIGNMENT",e[e.HTMLPAGE="htmlpage"]="HTMLPAGE",e[e.SURVEY="poll"]="SURVEY",e[e.QUIZ="test"]="QUIZ",e[e.SIGN="sign"]="SIGN",e[e.GOOGLEDRIVE="googledrive"]="GOOGLEDRIVE",e}({}),d=function(e){return e.LOCKED="locked",e.PENDING="pending",e.SIGNED="signed",e}({}),u=function(e){return e[e.IN_PROGRESS="in_progress"]="IN_PROGRESS",e[e.INCOMPLETE="incomplete"]="INCOMPLETE",e[e.COMPLETED="completed"]="COMPLETED",e[e.PASSED="passed"]="PASSED",e[e.ATTEMPTED="attempted"]="ATTEMPTED",e[e.NOT_STARTED="not_started"]="NOT_STARTED",e[e.FAILED="failed"]="FAILED",e}({}),h=function(e){return e[e.LOCKED="locked"]="LOCKED",e[e.MAX_ATTEMPTS="locked_maxattempts"]="MAX_ATTEMPTS",e[e.MAX_NUMBER_VIEWS="max_number_views"]="MAX_NUMBER_VIEWS",e}({}),p=function(e){return e[e.FULL="full"]="FULL",e[e.COMPACT="compact"]="COMPACT",e[e.FLAT="flat"]="FLAT",e}({}),m=function(e){return e[e.ATTENDED="attended"]="ATTENDED",e[e.NOT_ATTENDED="not_attended"]="NOT_ATTENDED",e[e.UPCOMING="upcoming"]="UPCOMING",e}({}),g=function(e){return e[e.ATTENDED="attended"]="ATTENDED",e[e.NOT_ATTENDED="not_attended"]="NOT_ATTENDED",e[e.UPCOMING="upcoming"]="UPCOMING",e}({}),b=function(e){return e[e.NOT_STARTED="not_started"]="NOT_STARTED",e[e.IN_PROGRESS="in_progress"]="IN_PROGRESS",e[e.COMPLETED="completed"]="COMPLETED",e[e.LOCKED="locked"]="LOCKED",e[e.NOT_ENROLLED="not_enrolled"]="NOT_ENROLLED",e}({}),f=function(e){return e[e.INITIALIZING="initializing"]="INITIALIZING",e[e.VIEWING="viewing"]="VIEWING",e[e.UNAUTHORIZED="unauthorized"]="UNAUTHORIZED",e}({}),v=function(e){return e[e.ELEARNING="elearning"]="ELEARNING",e[e.CLASSROOM="classroom"]="CLASSROOM",e[e.WEBINAR="webinar"]="WEBINAR",e[e.LEARNING_PLAN="learning_plan"]="LEARNING_PLAN",e}({}),_=function(e){return e[e.WAITING_LIST="-2"]="WAITING_LIST",e[e.CONFIRMED="-1"]="CONFIRMED",e[e.NOT_STARTED="0"]="NOT_STARTED",e[e.IN_PROGRESS="1"]="IN_PROGRESS",e[e.COMPLETED="2"]="COMPLETED",e[e.SUSPEND="3"]="SUSPEND",e[e.OVERBOOKING="4"]="OVERBOOKING",e}({}),w=function(e){return e.PLAY="play",e.PAUSE="pause",e}({})},KwVG:function(e,t,i){"use strict";i.d(t,"c",function(){return s}),i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a}),i.d(t,"d",function(){return o});var s=function(e){return e.UPDATE="update",e.DELETE="delete",e}({});const n={workForceSkills:"/manage/v1/workforce/skills",workForceOccupations:"/manage/v1/workforce/occupations"},a=10;var o=function(e){return e[e.READ_ONLY=0]="READ_ONLY",e[e.DELETE_ONLY=1]="DELETE_ONLY",e[e.COMPLETE=2]="COMPLETE",e}({})},"L+kn":function(e,t,i){"use strict";i.d(t,"a",function(){return _});var s=i("Y9qQ"),n=i("lJxs"),a=i("pLZG"),o=i("Kj3r"),r=i("eIep"),c=i("NKMr"),l=i("bDTG"),d=i("aWaq"),u=i("7vd5"),h=i("LvDl"),p=i.n(h),m=i("galx"),g=i("IsFk"),b=i("lfsz"),f=i("fXoL"),v=i("MIZ/");let _=(()=>{class e{constructor(e,t){this.backendService=e,this.taskRunnerService=t,this.permissions={isSessionInstructor:!0,isEventInstructor:!0}}getCourse(e){return this.backendService.request(`/learn/v1/courses/${e}`,"GET",{},{},s.b,null,e=>this.backendService.redirectWhenCode9000(e)).pipe(Object(n.a)(e=>e.data))}getPaginetedList(e,t,i,s,a,o){if(o&&o.date){const{from:e,to:t}=o.date;o.date_begin=e?new d.a(e).formatTimezoned("YYYY-MM-DD",Object(u.j)()):void 0,o.date_end=t?new d.a(t).formatTimezoned("YYYY-MM-DD",Object(u.j)()):void 0,delete o.date}if(o&&o.properties){const e=o.properties.map(e=>({criteria:"equal_to",name:e,value:c.e[e]}));o.extra_filters=JSON.stringify({extra_filters:p.a.keyBy(e,"name")}),delete o.properties}return o&&o.instructor_id&&(o.instructor_id=o.instructor_id[0]),this.backendService.request(`/course/v1/courses/${e}/sessions`,"GET",Object.assign({page_size:t,page:i+1,sort_dir:s,sort_attr:a,role:"instructor"},o)).pipe(Object(n.a)(e=>(e.data.items=e.data.items.map(e=>Object.assign(Object.assign({},e),{date_start_not_formatted:e.date_start,date_end_not_formatted:e.date_end,date_start:e.date_start?new d.a(e.date_start).formatTimezoned(Object(u.l)(Object(u.i)(),u.a,"short"),Object(u.j)()):"",date_end:e.date_end?new d.a(e.date_end).formatTimezoned(Object(u.l)(Object(u.i)(),u.a,"short"),Object(u.j)()):""})),Object.assign(Object.assign({},e.data),{totalCount:e.data.total_count}))))}getAdditionalField(){return this.backendService.request("/learn/v1/courses/field","GET",{page_size:200,page:1,sort_attr:"sequence",association:"ilt"}).pipe(Object(n.a)(e=>e.data.items.map(e=>({id:e.id,type:e.type,name:e.name.value}))))}deleteIltService(e){return this.backendService.request(`/course/v1/sessions/${e}`,"DELETE").pipe(Object(n.a)(e=>e.data))}massiveAssignInstructors(e,t,i,s){let a;const o={instructors:[...i],type:"session"};if(0===t.length)a={name:`Massive Assign Instructors - ${(new g.a).transform(new d.a)}`,endpoint:"/course/v1/instructors/add",method:"POST",chunk_size:20,type:m.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/courses/${e}/sessions`,total_url_params:s||{},chunk_url:`/course/v1/courses/${e}/sessions`,chunk_url_params:s||{},force_first_page:!1,post_process_chunk_items:{},options:o},notify_email:b.c.getInstance().email,notify:!0};else{let e=t.map(e=>({id:e}));a={name:`Massive Assign Instructors - ${(new g.a).transform(new d.a)}`,endpoint:"/course/v1/instructors/add",method:"POST",chunk_size:20,type:m.l.API,threshold:20,data_source:{items:e,options:o},notify_email:b.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(a).pipe(Object(n.a)(e=>Object(l.e)(e)))}massiveDeleteSession(e,t,i){let s;if(0===t.length)s={name:`Massive Delete Session - ${(new g.a).transform(new d.a)}`,endpoint:"/course/v1/sessions/batch",method:"DELETE",chunk_size:20,type:m.l.POLLING,threshold:100,data_source:{total_url:`/course/v1/courses/${e}/sessions`,total_url_params:i||{},chunk_url:`/course/v1/courses/${e}/sessions`,chunk_url_params:i||{},force_first_page:!0,post_process_chunk_items:{}},notify_email:b.c.getInstance().email,notify:!0};else{let e=t.map(e=>({id:e}));s={name:`Massive Delete Session - ${(new g.a).transform(new d.a)}`,endpoint:"/course/v1/sessions/batch",method:"DELETE",chunk_size:20,type:m.l.API,threshold:40,data_source:{items:e},notify_email:b.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(s).pipe(Object(n.a)(e=>Object(l.e)(e)))}createIltSession(e,t,i,s,a,o,r,c){return this.backendService.request(`/course/v1/courses/${e}/sessions`,"POST",{name:t,max_enroll:i,instructors:s,min_enroll:0,score_base:o,evaluation_type:a,min_attended_dates_for_completion:r,min_score_for_completion:c}).pipe(Object(n.a)(e=>({session_id:e.data.id_session,success:!0})))}getInstructorListSuggest(e){return e.pipe(Object(a.a)(e=>e.length>2),Object(o.a)(500),Object(r.a)(e=>this.backendService.request("/manage/v1/user","GET",{page_size:5,search_text:e}).pipe(Object(n.a)(e=>(e.data=e.data.items.map(e=>({id:+e.user_id,name:e.fullname.trim()?e.fullname:e.username})),e.data)))))}duplicateIltSession(e,t,i,s,a,o){return this.backendService.request(`/course/v1/sessions/${e}/duplicate`,"POST",{name:t,num_duplicates:i,frequency:s,repetition:a,assign_instructors:o}).pipe(Object(n.a)(e=>({success:!0})))}}return e.\u0275fac=function(t){return new(t||e)(f.nc(s.a),f.nc(v.a))},e.\u0275prov=f.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},L0WZ:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("/76g");const n={blankSlates:{noResults:{title:s.a.t("standard","Whoops, No results found!"),description:s.a.t("standard","Please try again using different search/filters criteria")},noContent:{title:s.a.t("standard","Whoops, there's nothing here"),description:s.a.t("mobile","Looks like there is nothing for you to do in this area right now")}},dataBrowser:{viewOptionLabel:s.a.t("standard","SORT BY"),item:s.a.t("standard","item"),items:s.a.t("standard","items"),filters:{search:s.a.t("standard","Search..."),searchPlaceholder:s.a.t("standard","Search...")}},uiDataBrowser:{filtersLabel:s.a.t("standard","Filters"),clearFiltersLabel:s.a.t("standard","Clear filters"),closeFiltersLabel:s.a.t("standard","Close"),activeFiltersCountLabelSingular:s.a.t("standard","Active Filter"),activeFiltersCountLabelPlural:s.a.t("standard","Active Filters"),search:s.a.t("standard","Search..."),searchPlaceholder:s.a.t("standard","Search...")}}},Lzq4:function(e,t,i){var s=i("u/Db"),n=i("e/Dd");function a(e){this.mode=s.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var i=n.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else{if(!(i>=57408&&i<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");i-=49472}e.put(i=192*(i>>>8&255)+(255&i),13)}},e.exports=a},M9jS:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var s=i("gvJE"),n=i("S2Qf"),a=i("T8dX"),o=i("fXoL");let r=(()=>{class e{constructor(e){this.toggleService=e}getCalendarButtonForCourse(e,t){return this.toggleService.isOn(n.f.TOGGLE_EXTERNAL_CALENDAR_SYNC)&&e.enrolled.is_enrolled&&e.ics_url?{properties:{icons:["zmdi zmdi-calendar"],baloon:{width:422,title:" ",style:"white",position:"bottom-left",component:{params:{mainTitle:s.a.t("standard","Add to calendar"),title:s.a.t("standard","Use this URL in your calendar software/app (e.g. Outlook) to keep your sessions for this course synchronized."),singleLink:e.ics_url,isViewBtnAddToCalendar:!0,lblBtnCalendar:s.a.t("standard","Add to calendar")},component:a.a},isSuggestionBalloon:!1,showOnClick:!1,uniquePrefix:t,isFab:!0},tooltipText:s.a.t("standard","_CALENDAR")}}:null}}return e.\u0275fac=function(t){return new(t||e)(o.nc(n.g))},e.\u0275prov=o.Zb({token:e,factory:e.\u0275fac}),e})()},N9vg:function(e,t,i){"use strict";i.d(t,"a",function(){return S});var s=i("BPI6"),n=i("LvDl"),a=i.n(n),o=i("LRne"),r=i("bDTG"),c=i("lJxs"),l=i("pLZG"),d=i("Kj3r"),u=i("eIep"),h=i("JIr8"),p=i("NKMr"),m=i("aWaq"),g=i("7vd5"),b=i("galx"),f=i("IsFk"),v=i("lfsz"),_=i("fXoL"),w=i("Y9qQ"),y=i("MIZ/"),C=i("GIHc");let S=(()=>{class e{constructor(e,t,i){this.backendService=e,this.taskRunnerService=t,this.uploadManager=i,this.dropdownOptionsAdditionalfields=new Map,this.enrollmentAdditionalFields=[],this.max_score=100,this.permissions={isSessionInstructor:!0,isEventInstructor:!0}}getSessionDetail(e){return this.backendService.request(`/course/v1/sessions/${e}`,"GET",{role:"instructor"}).pipe(Object(c.a)(e=>{const t=e.data;return null!=t.custom_deadline_days&&t.custom_deadline_days<0&&(t.custom_deadline_days*=-1),t.instructors=t.instructors.filter(e=>!e.event_only),this.max_score=t.max_score?t.max_score:0,t}))}getEventsPaginetedList(e,t,i,s,n,o){if(o&&o.properties){const e=o.properties.map(e=>({criteria:"equal_to",name:e,value:p.k[e]}));o.extra_filters=JSON.stringify({extra_filters:a.a.keyBy(e,"name")}),delete o.properties}return o&&o.instructor_id&&(o.instructor_id=o.instructor_id[0]),this.backendService.request(`/course/v1/sessions/${e}/events`,"GET",Object.assign({page_size:t,page:i,sort_dir:s,sort_attr:n,role:"instructor"},o)).pipe(Object(c.a)(e=>Object.assign(Object.assign({},e.data),{totalCount:e.data.total_count})))}getSessionEnrollmentsPaginatedList(e,t,i,s,n,a){return this.backendService.request(`/course/v1/sessions/${e}/enrollments`,"GET",Object.assign(Object.assign({page_size:t,page:i+1,sort_dir:s,sort_attr:n},a),{show_enrollment_fields:"show",role:"instructor"})).pipe(Object(c.a)(e=>(e.data.items=e.data.items.map(e=>Object.assign({id:e.user_id},e)),e)),Object(c.a)(e=>Object.assign(Object.assign({},e.data),{totalCount:e.data.total_count})))}createIltEvent(e,t,i,s,n,a,o,r,l,d,u,h,p,m,g){return this.backendService.request(`/course/v1/sessions/${e}/events`,"POST",{name:t,day:i,time_begin:s,time_end:n,timezone:a,id_classroom:o,id_location:r,collaboration_tool:l,webinar_tool:d,id_tool_account:u,password:h,custom_url:p,allow_join_completion:m,allow_recording_completion:g}).pipe(Object(c.a)(e=>({event_id:e.data.event_id,success:!0})))}duplicateIltEvent(e,t,i,s){return this.backendService.request(`/course/v1/events/${e}/duplicate`,"POST",{name:t,day:i,assign_instructors:s}).pipe(Object(c.a)(e=>({event_id:e.data.event_id,success:!0})))}deleteEvent(e){return this.backendService.request(`/course/v1/events/${e}`,"DELETE").pipe(Object(c.a)(e=>e.data))}massiveDeleteEvent(e,t,i){let s;if(0===t.length)s={name:`Massive Delete Event - ${(new f.a).transform(new m.a)}`,endpoint:"/course/v1/events/batch",method:"DELETE",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${e}/events`,total_url_params:i||{},chunk_url:`/course/v1/sessions/${e}/events`,chunk_url_params:i||{},force_first_page:!0,post_process_chunk_items:{}},notify_email:v.c.getInstance().email,notify:!0};else{let e=t.map(e=>({id:e}));s={name:`Massive Delete Event - ${(new f.a).transform(new m.a)}`,endpoint:"/course/v1/events/batch",method:"DELETE",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:e},notify_email:v.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(s).pipe(Object(c.a)(e=>Object(r.e)(e)))}getInstructorListSuggest(e){return e.pipe(Object(l.a)(e=>e.length>2),Object(d.a)(500),Object(u.a)(e=>this.backendService.request("/manage/v1/user","GET",{page_size:5,search_text:e}).pipe(Object(c.a)(e=>(e.data=e.data.items.map(e=>({id:+e.user_id,name:e.fullname.trim()?e.fullname:e.username})),e.data)))))}fetchDropdownOptionsAdditionalFields(){return this.backendService.request("/learn/v1/courses/field","GET",{association:"ilt",type:"dropdown"}).pipe(Object(c.a)(e=>e.data.items),Object(c.a)(e=>e.map(e=>{this.dropdownOptionsAdditionalfields.set(e.id,Object.keys(e.dropdown_options).map(t=>({id:t,label:e.dropdown_options[t].value})))})))}fetchEnrollementAdditionalFields(e){return this.backendService.request("/manage/v1/enrollment_fields","GET",{page_size:200,page:1,course_id:e,sort_attr:"sequence"}).pipe(Object(c.a)(e=>{e.data.items=e.data.items.filter(e=>e.type!=p.f.iFrame).map(e=>Object.assign({id:e.id,title:e.title},e)),this.enrollmentAdditionalFields=[...e.data.items]}))}getAdditionalFields(e){return this.dropdownOptionsAdditionalfields.get(e)||[]}getToolList(){return this.backendService.request("/course/v1/courses/tools","GET").pipe(Object(c.a)(e=>e.data.tools))}updateltSession(e,t,i,s,n,a,o,r,l,d,u,h,p,m){return this.backendService.request(`/course/v1/sessions/${e}`,"PUT",{name:t,description:i,code:s,max_enroll:n,min_enroll:a,score_base:o,enrollment_deadline:r,custom_deadline_days:l,evaluation_type:d,min_attended_dates_for_completion:u,min_score_for_completion:h,instructors:p,additional_fields:m}).pipe(Object(c.a)(()=>({success:!0})))}getLocationList(){return this.backendService.request("/learn/v1/location","GET",{sort_attr:"name",sort_dir:s.a.ASC,page_size:"9999"}).pipe(Object(c.a)(e=>e.data.items))}getClassroomList(){return this.backendService.request("/learn/v1/classroom","GET",{sort_attr:"name",sort_dir:s.a.ASC,page_size:"9999"}).pipe(Object(c.a)(e=>e.data.items))}updateIltEnrollmentStatus(e,t,i,s){return this.backendService.request(`/learn/v1/enrollment/${e}/${t}/ilt/session/${i}`,"PUT",{level:"learner",status:s,date:(new m.a).formatTimezoned("YYYY-MM-DD HH:mm:ss",Object(g.j)())}).pipe(Object(c.a)(e=>e.data[0]))}getFileFromS3(e){const t={name:e,type:this.uploadManager.getFileExtension(e)};return this.uploadManager.getSignedUrl(t,r.a,void 0,!0,"read").pipe(Object(c.a)(e=>e.data))}evaluateSession(e,t,i,s,n,a,o,r){return this.backendService.request(`/course/v1/sessions/${e}/evaluate`,"PUT",{status:i,user_id:t,score:s,completion_date:n,attachment:a,mark_as_present:o,message:r}).pipe(Object(c.a)(()=>({success:!0})))}massiveEvaluateSession(e,t,i,s,n,a,o,l,d){let u;if(0===t.length){const t={role:"instructor"};u={name:`Massive Evaluate Session - ${(new f.a).transform(new m.a)}`,endpoint:"/course/v1/sessions/evaluate/batch",method:"PUT",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${e}/enrollments`,total_url_params:d?Object.assign(Object.assign({},d),t):t,chunk_url:`/course/v1/sessions/${e}/enrollments`,chunk_url_params:d?Object.assign(Object.assign({},d),t):t,force_first_page:!1,post_process_chunk_items:{},options:{session_id:e,status:i,score:s,completion_date:n,attachment:a,mark_as_present:o,message:l}},notify_email:v.c.getInstance().email,notify:!0}}else{let r=t.map(e=>({user_id:e}));u={name:`Massive Evaluate Session - ${(new f.a).transform(new m.a)}`,endpoint:"/course/v1/sessions/evaluate/batch",method:"PUT",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:r,options:{session_id:e,status:i,score:s,completion_date:n,attachment:a,mark_as_present:o,message:l}},notify_email:v.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(u).pipe(Object(c.a)(e=>Object(r.e)(e)))}deleteIltEnrollment(e,t,i){return this.backendService.request(`/learn/v1/enrollments/${e}/${t}/session/${i}`,"DELETE").pipe(Object(c.a)(e=>Object.assign(Object.assign({},e.data),{success:!0})),Object(h.a)(e=>Object(o.a)({success:!1,message:1081==e.code?e.message[0]:void 0})))}massiveAssignInstructors(e,t,i,s){let n;const a={instructors:[...i],type:"event"};if(0===t.length)n={name:`Massive Assign Instructors - ${(new f.a).transform(new m.a)}`,endpoint:"/course/v1/instructors/add",method:"POST",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${e}/events`,total_url_params:s||{},chunk_url:`/course/v1/sessions/${e}/events`,chunk_url_params:s||{},force_first_page:!1,post_process_chunk_items:{},options:a},notify_email:v.c.getInstance().email,notify:!0};else{let e=t.map(e=>({id:e}));n={name:`Massive Assign Instructors - ${(new f.a).transform(new m.a)}`,endpoint:"/course/v1/instructors/add",method:"POST",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:e,options:a},notify_email:v.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(n).pipe(Object(c.a)(e=>Object(r.e)(e)))}massiveChangeStatus(e,t,i,s,n){let a;const o={course_id:e,session_id:t,status:s,level:"learner",enrollment_date_now:!0};if(0===i.length)a={name:`Massive Course Update Enrollment status - ${(new f.a).transform(new m.a)}`,endpoint:"/learn/v1/enrollments/batch",method:"POST",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${t}/enrollments`,total_url_params:n||{},chunk_url:`/course/v1/sessions/${t}/enrollments`,chunk_url_params:n||{},force_first_page:!1,post_process_chunk_items:{},options:o},notify_email:v.c.getInstance().email,notify:!0};else{let e=i.map(e=>({user_id:e}));a={name:`Massive Course Update Enrollment status - ${(new f.a).transform(new m.a)}`,endpoint:"/learn/v1/enrollments/batch",method:"POST",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:e,options:o},notify_email:v.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(a).pipe(Object(c.a)(e=>Object(r.e)(e)))}massiveSendEmailToUser(e,t,i,s,n,a,o,l){let d;const u={course_id:t,session_id:i,message:s,sender:n,subject:a,cc:o};return d=0===e.length?{name:`Massive ILT Session Send Email - ${(new f.a).transform(new m.a)}`,endpoint:"/learn/v1/enrollments/email/batch",method:"POST",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${i}/enrollments`,total_url_params:l||{},chunk_url:`/course/v1/sessions/${i}/enrollments`,chunk_url_params:l||{},force_first_page:!1,post_process_chunk_items:{},options:u},notify_email:v.c.getInstance().email,notify:!0}:{name:`Massive ILT Session Send Email - ${(new f.a).transform(new m.a)}`,endpoint:"learn/v1/enrollments/email/batch",method:"POST",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:e,options:u},notify_email:v.c.getInstance().email,notify:!0},this.taskRunnerService.run(d).pipe(Object(c.a)(e=>Object(r.e)(e)))}massiveUnenroll(e,t,i,s){let n;const a={course_id:e,session_id:t};if(0===i.length)n={name:`Massive ILT Session Unenroll - ${(new f.a).transform(new m.a)}`,endpoint:"/learn/v1/enrollments/batch",method:"DELETE",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${t}/enrollments`,total_url_params:s||{},chunk_url:`/course/v1/sessions/${t}/enrollments`,chunk_url_params:s||{},force_first_page:!0,post_process_chunk_items:{},options:a},notify_email:v.c.getInstance().email,notify:!0};else{let e=i.map(e=>({user_id:e}));n={name:`Massive ILT Session Unenroll - ${(new f.a).transform(new m.a)}`,endpoint:"/learn/v1/enrollments/batch",method:"DELETE",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:e,options:a},notify_email:v.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(n).pipe(Object(c.a)(e=>Object(r.e)(e)))}}return e.\u0275fac=function(t){return new(t||e)(_.nc(w.a),_.nc(y.a),_.nc(C.a))},e.\u0275prov=_.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},NKMr:function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"c",function(){return n}),i.d(t,"i",function(){return a}),i.d(t,"a",function(){return o}),i.d(t,"j",function(){return r}),i.d(t,"k",function(){return c}),i.d(t,"g",function(){return l}),i.d(t,"h",function(){return d}),i.d(t,"f",function(){return u}),i.d(t,"d",function(){return h}),i.d(t,"e",function(){return p});var s=function(e){return e.SEARCH="search_text",e.STATUS="status",e}({}),n=function(e){return e[e.ATTENDANCE_NOTSET=-1]="ATTENDANCE_NOTSET",e[e.ATTENDANCE_ABSENT=0]="ATTENDANCE_ABSENT",e[e.ATTENDANCE_PRESENT=1]="ATTENDANCE_PRESENT",e}({}),a=function(e){return e[e.MANUAL=3]="MANUAL",e[e.EVALUATION=0]="EVALUATION",e[e.ATTENDANCE=2]="ATTENDANCE",e[e.TRAINING=1]="TRAINING",e}({}),o=function(e){return e.PASSED="1",e.NOT_PASSED="-1",e}({}),r=function(e){return e.SEARCH="search_text",e.TYPE="type",e.PROPERTIES="properties",e.PROPERTIES_WITHOUT_ATTENDANCE="without_attendance",e.PROPERTIES_WITHOUT_EVENT_INSTRUCTORS="without_event_instructors",e.INSTRUCTORS="instructor_id",e}({});const c={[r.PROPERTIES_WITHOUT_ATTENDANCE]:1,[r.PROPERTIES_WITHOUT_EVENT_INSTRUCTORS]:1};var l=function(e){return e.SEARCH="search_text",e.EVALUATION_STATUS="evaluation_status",e.COMPLETION="completion",e.COURSE_STATUS="status",e}({}),d=function(e){return e[e.EVALUATION_STATUS_EVALUATED=1]="EVALUATION_STATUS_EVALUATED",e[e.EVALUATION_STATUS_NOT_EVALUATED=0]="EVALUATION_STATUS_NOT_EVALUATED",e[e.COMPLETION_COMPLETED=1]="COMPLETION_COMPLETED",e[e.COMPLETION_NOT_COMPLETED=0]="COMPLETION_NOT_COMPLETED",e[e.COURSE_STATUS_WAITING=-2]="COURSE_STATUS_WAITING",e[e.COURSE_STATUS_TO_CONFIRM=-1]="COURSE_STATUS_TO_CONFIRM",e[e.COURSE_STATUS_ENROLLED=0]="COURSE_STATUS_ENROLLED",e[e.COURSE_STATUS_IN_PROGRESS=1]="COURSE_STATUS_IN_PROGRESS",e[e.COURSE_STATUS_COMPLETED=2]="COURSE_STATUS_COMPLETED",e[e.COURSE_STATUS_SUSPENDED=3]="COURSE_STATUS_SUSPENDED",e}({}),u=function(e){return e.date="1",e.text="3",e.freeText="4",e.dropdown="2",e.iFrame="5",e}({}),h=function(e){return e.SEARCH="search_text",e.DATE="date",e.DATE_BEGIN="date_begin",e.DATE_END="date_end",e.PROPERTIES="properties",e.PROPERTIES_WITHOUT_EVENTS="without_events",e.PROPERTIES_WITH_USER_WAITING="with_user_waiting",e.PROPERTIES_WITHOUT_ENROLLED_USERS="without_user_enrolled",e.INSTRUCTORS="instructor_id",e}({});const p={[h.PROPERTIES_WITHOUT_EVENTS]:1,[h.PROPERTIES_WITH_USER_WAITING]:1,[h.PROPERTIES_WITHOUT_ENROLLED_USERS]:1}},NPxG:function(e,t,i){var s=i("ekOh"),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case s.L:return n[4*(e-1)+0];case s.M:return n[4*(e-1)+1];case s.Q:return n[4*(e-1)+2];case s.H:return n[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case s.L:return a[4*(e-1)+0];case s.M:return a[4*(e-1)+1];case s.Q:return a[4*(e-1)+2];case s.H:return a[4*(e-1)+3];default:return}}},Ozuj:function(e,t,i){"use strict";i.d(t,"a",function(){return d}),i.d(t,"b",function(){return u});var s=i("3t6O"),n=i("3pRn"),a=i("wqqH"),o=i("sVTu"),r=i("LvDl"),c=i.n(r);const l={status:a.d.TO_BE_STARTED,mode:s.r.INLINE,action:null,settings:{request_all_answers:!1,hide_user_info:!1,allow_answer_edit:!1,allow_backtracking:!1,allow_partial_submission:!1,max_attempts:0,show_final_score:!1,show_average_score:!1,show_score_by_category:!1,time_option:a.f.NONE,time_limit:0,max_score:0,score_type:a.c.ABSOLUTE,pass_mark:0,completion_counts:0,average_user_score:0,max_manual_score:0,order_type:0},pages_count:0,current_page:0,can_view_prev_page:!0,questions_count:0,user_status:{status:a.e.NOT_SUBMITTED,score:0,evaluation_status:a.b.WAITING_EVALUATION,suspension_time:0,time_consumed:0,attempts_consumed:0},questions:[],question_counter:0,is_submitted:!1,timer:{m:0,s:0},has_error:!1,error_message:"",error_code:0};class d{static format(e,t,i=!0){let s=e.status;return t.user_status.status===a.d.SUBMITTED&&(s=a.d.SUBMITTED),t=Object.assign({},t,{status:s}),Object.assign({},i?l:e,t)}static formatQuestions(e,t){const i=[];let s=a.d.STARTED;t.payload.data.acknowledge.user_status&&t.payload.data.acknowledge.user_status.status==a.d.SUBMITTED&&(s=a.d.SUBMITTED),t.type===n.a.SHOW_REVIEW_SUCCESS&&(s=a.d.REVIEW);for(const a in t.payload.data.acknowledge.questions){let s=t.payload.data.acknowledge.questions[a],r=s.title;"title"!==s.type&&(r='<div class="numbering">'+s.question_number+') </div> <div class="title">'+s.title+"</div> ");let l=o.a.ANSWER;t.type===n.a.SHOW_REVIEW_SUCCESS?l=o.a.REVIEW:!1===e.settings.allow_answer_edit&&!1===c.a.isEmpty(s.user_status)&&(l=o.a.READONLY);const d={id_question:s.question,title:r,score:s.score?s.score:0,is_mandatory:s.is_mandatory?s.is_mandatory:0,mode:l,type:s.type,form_control:Object,time_limit:Number(s.time_limit),time_consumed:Number(s.time_consumed),additional_info:s.additional_info,user_status:s.user_status?s.user_status:{},feedback:s.feedback};i.push(d)}return Object.assign({},e,{action:t.type,questions:i,status:s,has_error:!1,current_page:t.payload.data.acknowledge.page_number,can_view_prev_page:!t.payload.data.acknowledge.hasOwnProperty("can_view_prev_page")||t.payload.data.acknowledge.can_view_prev_page,user_status:t.payload.data.acknowledge.user_status?t.payload.data.acknowledge.user_status:e.user_status})}static formatUserEntry(e){let t={};for(let i in e)for(let s in e[i])if("object"==typeof e[i][s]){let n={user_status:{answers:{}}};for(let t in e[i][s])n.user_status.answers[t]=e[i][s][t];t[s]=n}else t[s]={user_status:{answer:e[i][s]}};return t}}function u(e=l,t){switch(t.type){case n.a.SET_INITIAL_STATE:return l;case n.a.LOAD_LAUNCH_PARAMS:return d.format(e,t.payload);case n.a.RELOAD_LAUNCH_PARAMS:return d.format(e,t.payload,!1);case n.a.START_PLAYING:return e.user_status.time_consumed=0,Object.assign({},e,{current_page:1,question_counter:0,user_status:e.user_status});case n.a.RETAKE_THE_TEST:return Object.assign({},e,{status:null,action:n.a.START_PLAYING,current_page:1,question_counter:0,user_status:{status:a.e.NOT_SUBMITTED,score:0,attempts_consumed:e.user_status&&e.user_status.attempts_consumed?e.user_status.attempts_consumed:0,can_view_prev_page:!e.can_view_prev_page||e.can_view_prev_page,evaluation_status:a.b.WAITING_EVALUATION,suspension_time:0,time_consumed:0}});case n.a.LEAVE_PLAY_MODE:return Object.assign({},e,{status:t.payload.status,has_error:!1});case n.a.LEAVE_REVIEW_MODE:return Object.assign({},e,{status:a.d.SUBMITTED});case n.a.GO_TO_PAGE_SUCCESS:return d.formatQuestions(e,t);case n.a.QUIZ_ACTION_REJECTED:{let i=c.a.isObject(t.payload.message)?c.a.head(t.payload.message):t.payload.message,s=c.a.isObject(t.payload.code)?c.a.head(t.payload.code):t.payload.code;return Object.assign({},e,{action:t.type,has_error:!0,error_message:i,error_code:s})}case n.a.SUBMIT_QUIZ_PARTIAL_SUCCESS:return Object.assign({},l,{action:t.type,pages_count:e.pages_count,questions_count:e.questions_count,mode:e.mode,settings:e.settings,user_status:t.payload.data.acknowledge.user_status||e.user_status});case n.a.SUBMIT_QUIZ_SUCCESS:return Object.assign({},e,{questions:[],status:a.d.SUBMITTED,user_status:t.payload.data.acknowledge.user_status,is_submitted:!0,has_error:!1,error_message:""});case n.a.SHOW_REVIEW_SUCCESS:return d.formatQuestions(e,t);case n.a.RELOAD_QUIZ_MAX_SCORE:{const i=e;return i.settings=t.payload.settings,Object.assign({},i)}default:return e}}},PsRC:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var s=i("/76g"),n=i("NJk+");class a{constructor(){this.sectionTitle=s.a.t("standard","Thumbnail"),this.description=s.a.t("standard","The minimum suggested image dimension is {width}x{height}px. Maximum file size {fileSize}MB.",{width:n.a.THUMBNAIL_DATA.width,height:n.a.THUMBNAIL_DATA.height,fileSize:n.a.THUMBNAIL_DATA.maxSize}),this.uploadImageLabel=s.a.t("standard","Upload Image"),this.cropper={cancel:s.a.t("standard","Cancel"),confirm:s.a.t("course_management","Crop & Apply"),title:s.a.t("app7020","Content Thumbnail"),subtitle:s.a.t("standard","Select the area of the image that you would like to include in the {image_type} and crop it.",{image_type:"thumbnail"})}}}},QAZZ:function(e,t,i){var s=i("Rb7d");function n(e,t){var i=e.a/255,s=t+'="'+e.hex+'"';return i<1?s+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':s}function a(e,t,i){var s=e+t;return void 0!==i&&(s+=" "+i),s}t.render=function(e,t,i){var o=s.getOptions(t),r=e.modules.size,c=e.modules.data,l=r+2*o.margin,d=o.color.light.a?"<path "+n(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+n(o.color.dark,"stroke")+' d="'+function(e,t,i){for(var s="",n=0,o=!1,r=0,c=0;c<e.length;c++){var l=Math.floor(c%t),d=Math.floor(c/t);l||o||(o=!0),e[c]?(r++,c>0&&l>0&&e[c-1]||(s+=o?a("M",l+i,.5+d+i):a("m",n,0),n=0,o=!1),l+1<t&&e[c+1]||(s+=a("h",r),r=0)):n++}return s}(c,r,o.margin)+'"/>',h='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+'viewBox="0 0 '+l+" "+l+'" shape-rendering="crispEdges">'+d+u+"</svg>\n";return"function"==typeof i&&i(null,h),h}},QKG3:function(e,t,i){"use strict";i.r(t),i.d(t,"CourseModule",function(){return ge});var s=i("tyNb"),n=i("tfGn"),a=i("ZOB2"),o=i("M9jS"),r=i("A0KR"),c=i("+JQb"),l=i("3QLk"),d=i("7o/Q"),u=i("4I5i");function h(e){return t=>t.lift(new p(e))}class p{constructor(e){if(this._skipCount=e,this._skipCount<0)throw new u.a}call(e,t){return t.subscribe(0===this._skipCount?new d.a(e):new m(e,this._skipCount))}}class m extends d.a{constructor(e,t){super(e),this._skipCount=t,this._count=0,this._ring=new Array(t)}_next(e){const t=this._skipCount,i=this._count++;if(i<t)this._ring[i]=e;else{const s=i%t,n=this._ring,a=n[s];n[s]=e,this.destination.next(a)}}}var g=i("lJxs"),b=i("fXoL"),f=i("Y9qQ"),v=i("JA8w"),_=i("qJzG"),w=i("ofXK"),y=i("oTDt");const C=["courseCmp"];function S(e,t){if(1&e){const e=b.kc();b.jc(0,"div"),b.jc(1,"course-content",1,2),b.rc("reloadEvent",function(){return b.Uc(e),b.vc().changeStatus()}),b.ic(),b.ic()}if(2&e){const e=b.vc();b.Mb(1),b.Dc("tabsParams",e.tabsParams)("course",e.course)}}let T=(()=>{class e{constructor(e,t,i,s,n,a){this._backendService=e,this.cache=t,this.route=i,this.ref=s,this.translate=n,this.courseService=a}ngOnInit(){this.initCourseData(),this.langChangeSubscriber=this.translate.onLangChange.pipe(h(1)).subscribe(e=>{this.initCourseData()})}ngOnDestroy(){this.cache.isInitialized()&&this.cache.clear(),this.langChangeSubscriber&&this.langChangeSubscriber.unsubscribe()}initCourseData(){this.route.paramMap.subscribe(e=>{this.course_id=e.get("id"),this.course_title=e.get("title"),this.GetCourses(this.course_id)})}changeStatus(){this.GetCourses(this.course_id)}GetCourses(e){Object(l.b)(this.courseService.request("details",{courseId:e})).pipe(Object(g.a)(e=>(e&&e.instructors&&e.instructors.length>0&&(e.instructors=Object(l.g)(e.instructors)),e))).subscribe(e=>{this.course=e,this.course.additional_information&&(this.course.additional_information=this.course.additional_information.filter(e=>1===parseInt(e.visible_to_user,10))),this.tabsParams={panels:Object(l.f)(this.course,null),style:""}})}}return e.\u0275fac=function(t){return new(t||e)(b.dc(f.a),b.dc(c.b),b.dc(s.a),b.dc(b.i),b.dc(v.a),b.dc(_.a))},e.\u0275cmp=b.Xb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&b.md(C,1),2&e){let e;b.Qc(e=b.sc())&&(t.courseCmp=e.first)}},features:[b.Lb([{provide:c.d,useClass:c.c}])],decls:2,vars:1,consts:[[4,"ngIf"],[3,"tabsParams","course","reloadEvent"],["courseCmp",""]],template:function(e,t){1&e&&(b.dd(0,S,3,2,"div",0),b.ec(1,"router-outlet")),2&e&&b.Dc("ngIf",t.course)},directives:[w.p,s.m,y.a],encapsulation:2}),e})();var k=i("ajSx"),I=i("gvJE"),x=i("7vd5"),D=i("aWaq"),O=i("aEIV"),E=i("S2Qf"),P=i("o6wD"),M=i("2Vo4"),A=i("v5S6"),L=function(e){return e.ATTENDANCE_FILTERS="attendance_filters",e.LOCATION_FILTERS="location_filters",e}({}),j=i("+RPX"),F=function(e){return e.BLENDED="blended",e.FLEXIBLE="flexible",e.ONLINE="online",e.ONSITE="onsite",e}({}),R=function(e){return e.STARTED="started",e.ENDED="ended",e}({});let N=(()=>{class e{constructor(e){this.backendService=e,this._iltSessions$=new M.a([]),this._iltSessionsBackup=[],this._filtersWorkflow$=new M.a(R.ENDED)}get iltSessions$(){return this._iltSessions$.asObservable()}get filtersWorkflow$(){return this._filtersWorkflow$.asObservable()}init(e){this._iltSessions$.next(e),this._iltSessionsBackup=[...e]}executeFilterIltSessions(e){if(this.startFilterProcess(),0===Object.entries(e).length)return this._iltSessions$.next(this._iltSessionsBackup),void this.endFilterProcess();let t=[...this._iltSessionsBackup];if(e.attendance_filters!==F.ONLINE&&e.attendance_filters!==F.ONSITE||(t=t.filter(t=>t.attendance_type===e.attendance_filters||t.attendance_type===F.FLEXIBLE)),e.attendance_filters!==F.FLEXIBLE&&e.attendance_filters!==F.BLENDED||(t=t.filter(t=>t.attendance_type===e.attendance_filters)),e.location_filters&&e.location_filters.length>0){const i=new Set(e.location_filters);t=t.filter(e=>e.locations.some(e=>i.has(String(e.id_location))))}this._iltSessions$.next(t),this.endFilterProcess()}startFilterProcess(){this._filtersWorkflow$.next(R.STARTED)}endFilterProcess(){this._filtersWorkflow$.next(R.ENDED)}}return e.\u0275fac=function(t){return new(t||e)(b.nc(f.a))},e.\u0275prov=b.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=i("nUpK"),q=i("M+yG");function z(e,t){if(1&e&&(b.ec(0,"ui-data-browser-filter-multiple-selection",10),b.wc(1,"t")),2&e){const e=b.vc(2);b.Dc("label",b.xc(1,3,"Locations"))("key",e.IltSessionsCatalogListFiltersEnum.LOCATION_FILTERS)("options",e.venueList)}}const V=function(e){return{n:e}};function B(e,t){if(1&e&&(b.jc(0,"span"),b.fd(1),b.wc(2,"t"),b.wc(3,"async"),b.ic()),2&e){const e=b.vc(2);let t=null;b.Mb(1),b.gd(b.yc(2,1,"{n} Session",b.Ic(6,V,null==(t=b.xc(3,4,e.accordion$))?null:t.panels.length)))}}function G(e,t){if(1&e&&(b.jc(0,"span"),b.fd(1),b.wc(2,"t"),b.wc(3,"async"),b.ic()),2&e){const e=b.vc(2);let t=null;b.Mb(1),b.gd(b.yc(2,1,"{n} Sessions",b.Ic(6,V,null==(t=b.xc(3,4,e.accordion$))?null:t.panels.length)))}}function $(e,t){if(1&e&&b.ec(0,"accordion",12),2&e){const e=b.vc().ngIf;b.Dc("type",e.type)("panels",e.panels)}}function H(e,t){if(1&e&&(b.hc(0),b.dd(1,$,1,2,"accordion",11),b.gc()),2&e){const e=t.ngIf;b.vc(3);const i=b.Rc(4);b.Mb(1),b.Dc("ngIf",e.panels.length>0)("ngIfElse",i)}}function Y(e,t){if(1&e&&(b.hc(0),b.dd(1,H,2,2,"ng-container",9),b.wc(2,"async"),b.gc()),2&e){const e=b.vc(2);b.Mb(1),b.Dc("ngIf",b.xc(2,1,e.accordion$))}}function W(e,t){if(1&e){const e=b.kc();b.hc(0),b.jc(1,"dcb-ui-data-browser",4),b.jc(2,"dcb-ui-data-browser-panel-filters",5),b.rc("filtersChange",function(t){return b.Uc(e),b.vc().filtersChange(t)}),b.wc(3,"t"),b.ec(4,"ui-data-browser-filter-single-selection",6),b.wc(5,"t"),b.dd(6,z,2,5,"ui-data-browser-filter-multiple-selection",7),b.ic(),b.jc(7,"dcb-ui-data-browser-control"),b.jc(8,"div",8),b.dd(9,B,4,8,"span",9),b.wc(10,"async"),b.dd(11,G,4,8,"span",9),b.wc(12,"async"),b.ic(),b.ic(),b.jc(13,"dcb-ui-data-browser-content"),b.dd(14,Y,3,3,"ng-container",0),b.ic(),b.ic(),b.gc()}if(2&e){const e=b.vc(),t=b.Rc(2);let i=null,s=null;b.Mb(1),b.ad("bordered"),b.Dc("sticky",!1)("fillHeight",!0),b.Mb(1),b.Dc("filtersLabel",b.xc(3,13,"Filters")),b.Mb(2),b.Dc("label",b.xc(5,15,"Session Attendance Types"))("options",e.sessionAttendanceTypeFilters)("key",e.IltSessionsCatalogListFiltersEnum.ATTENDANCE_FILTERS),b.Mb(2),b.Dc("ngIf",e.venueList.length>0),b.Mb(3),b.Dc("ngIf",1===(null==(i=b.xc(10,17,e.accordion$))?null:i.panels.length)),b.Mb(2),b.Dc("ngIf",1!==(null==(s=b.xc(12,19,e.accordion$))?null:s.panels.length)),b.Mb(3),b.Dc("ngIf",!e.isFiltersLoading)("ngIfElse",t)}}function Q(e,t){1&e&&(b.jc(0,"div",13),b.ec(1,"ui-spinner"),b.ic())}function K(e,t){1&e&&b.ec(0,"ui-blank-slate",14)}function X(e,t){1&e&&b.ec(0,"ui-blank-slate",15)}let J=(()=>{class e extends P.a{constructor(e,t,i){super(),this.iltSessionsCatalogListService=e,this.changeDetectorRef=t,this.translation=i,this.accordion$=new M.a({}),this.sessionAttendanceTypeFilters=[],this.isFiltersLoading=!1,this.IltSessionsCatalogListFiltersEnum=L,this.venueList=[],this._translationPipe=new I.b(i,t)}ngOnInit(){this.sessionAttendanceTypeFilters=[{value:"all",label:this._translationPipe.transform(I.a.t("standard","All Sessions"))},{value:F.ONSITE,label:this._translationPipe.transform(I.a.t("standard","Full Onsite"))},{value:F.ONLINE,label:this._translationPipe.transform(I.a.t("standard","Full Online"))},{value:F.FLEXIBLE,label:this._translationPipe.transform(I.a.t("standard","Flexible"))},{value:F.BLENDED,label:this._translationPipe.transform(I.a.t("standard","Blended"))}],void 0!==this.sessions&&(this.iltSessionsCatalogListService.init(this.sessions),this.venueList=this.getVenues()),this.subscribeTo(this.managePanels(),this.listenFilterProcess())}managePanels(){return this.iltSessionsCatalogListService.iltSessions$.subscribe(e=>{const t=1===e.length,i=e.map(e=>({title:e.name,subtitleNumber:e.dates.length,subtitle:I.a.t("standard","events"),description:{component:j.a,params:{session:e,courseType:"ilt"}},content:{component:A.a,params:{session_description:e.description,session_additional_fields:e.additional_fields,course:this.course,course_type:"ilt",sessions:e.dates,session_id:e.id_session,session_instructors:e.instructors,locations:e.locations||[]}},opened:t,active:t}));this.accordion$.next({type:"split",panels:i})})}filtersChange(e){this.iltSessionsCatalogListService.executeFilterIltSessions(e)}listenFilterProcess(){return this.iltSessionsCatalogListService.filtersWorkflow$.subscribe(e=>{this.isFiltersLoading="started"===e})}getVenues(){if(void 0===this.sessions)return[];const e=this.sessions.reduce((e,t)=>e.concat(t.locations.map(e=>({value:String(e.id_location),label:e.name}))),[]);return[...new Map(e.map(e=>[e.value,e])).values()]}}return e.\u0275fac=function(t){return new(t||e)(b.dc(N),b.dc(b.i),b.dc(E.h))},e.\u0275cmp=b.Xb({type:e,selectors:[["ilt-sessions-catalog-list"]],inputs:{sessions:"sessions",course:"course"},features:[b.Jb],decls:7,vars:2,consts:[[4,"ngIf","ngIfElse"],["uiSpinner",""],["notFoundWithFilter",""],["notSessions",""],["controlsShrinkBreakpoint","sm",3,"sticky","fillHeight"],[3,"filtersLabel","filtersChange"],["value","all","defaultValue","all",3,"label","options","key"],[3,"label","key","options",4,"ngIf"],[1,"session-count"],[4,"ngIf"],[3,"label","key","options"],["class","course-accordion",3,"type","panels",4,"ngIf","ngIfElse"],[1,"course-accordion",3,"type","panels"],[1,"ui-spinner-content"],["illustrationName","no-item-found","illustrationSize","md","title","Whoops, no result found!","description","Please try again using different search criteria or filters"],["illustrationName","something-wrong","illustrationSize","md","title","Whoops, there are no sessions yet for this course","description","Please contact your Administrator or the course instructor"]],template:function(e,t){if(1&e&&(b.dd(0,W,15,21,"ng-container",0),b.dd(1,Q,2,0,"ng-template",null,1,b.ed),b.dd(3,K,1,0,"ng-template",null,2,b.ed),b.dd(5,X,1,0,"ng-template",null,3,b.ed)),2&e){const e=b.Rc(6);b.Dc("ngIf",(null==t.sessions?null:t.sessions.length)>0)("ngIfElse",e)}},directives:[w.p,U.jb,U.xb,U.sb,U.lb,U.kb,U.qb,q.a,U.fd,U.o],pipes:[I.b,w.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]{display:block}  .ui-blank-slate{padding-top:var(--ui-spacing-huge);padding-bottom:var(--ui-spacing-huge)}.ui-spinner-content[_ngcontent-%COMP%]{text-align:center;padding:var(--ui-spacing-huge)}.session-count[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex:1;height:var(--ui-size-header-height);-webkit-border-start:solid var(--ui-size-border-xs) var(--ui-color-border-neutral);border-inline-start:solid var(--ui-size-border-xs) var(--ui-color-border-neutral);font-weight:var(--ui-typography-weight-bold);padding-left:var(--ui-spacing-sm)}"]}),e})();var Z=i("Gql0");function ee(e,t){if(1&e){const e=b.kc();b.jc(0,"div"),b.jc(1,"course-content",1),b.rc("reloadEvent",function(){return b.Uc(e),b.vc().changeStatus()}),b.ic(),b.ic()}if(2&e){const e=b.vc();b.Mb(1),b.Dc("tabsParams",e.tabsParams)("sessionsEnterData",e.sessionsEnterData)("course",e.course)}}let te=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this._backendService=e,this.cache=t,this.route=i,this.ref=s,this.formatter=n,this.translate=a,this.toggleService=o,this.courseService=r,this.sessionsEnterData=[],this.refineSessionLabel=(e,t)=>(e.label+='<br /><span             class="text-grey-mid text-small">',e.label+=this.makeReadableDates(t,e),e.label+=" - "+this.formatter.getFormattedTimezone(this.formatter.getContextTimezone()),e.label+=this.makeReadableLocation(e),e.label+="</span>",e)}ngOnInit(){this.initCourseData(),this.langChangeSubscriber=this.translate.onLangChange.pipe(h(1)).subscribe(e=>{this.initCourseData()})}ngOnDestroy(){this.cache.isInitialized()&&this.cache.clear(),this.langChangeSubscriber&&this.langChangeSubscriber.unsubscribe()}initCourseData(){this.route.paramMap.subscribe(e=>{this.course_id=e.get("id"),this.course_title=e.get("title"),this.GetCourses(this.course_id)})}GetCourses(e){Object(l.b)(this.courseService.request("details",{courseId:e})).pipe(Object(g.a)(e=>(e&&e.instructors&&e.instructors.length>0&&(e.instructors=Object(l.g)(e.instructors)),e))).subscribe(e=>{if(this.course=e,this.course.enter_data.sessions&&this.course.sessions&&this.course.sessions.length&&(this.sessionsEnterData=[...this.course.enter_data.sessions.map(this.refineSessionLabel)]),this.toggleService.isOn(E.f.TOGGLE_VILT)&&this.toggleService.isOn(E.f.TOGGLE_VILT_SESSIONS_EVENT_TYPE_FILTERS))this.course_sessions={params:{sessions:this.course.sessions,course:this.course},component:J};else if(null==this.course.sessions){let e=new I.b(this.translate,this.ref).transform(I.a.t("standard","This course has no sessions available at this time. Please, check back later."));this.course_sessions=`<div class="tabs-description"> ${e} </div>`}else this.course_sessions={params:{panels:Object(l.d)(this.course.sessions,this.course.type,this.course,this.toggleService.isOn(E.f.TOGGLE_VILT))},component:O.a};this.course.additional_information&&(this.course.additional_information=this.course.additional_information.filter(e=>1===parseInt(e.visible_to_user,10))),this.tabsParams={panels:Object(l.f)(this.course,this.course_sessions),style:""}})}makeReadableLocation(e){const t=this.course.sessions.find(t=>t.id_session===e.value);if(t&&t.locations){const e=t.locations.length;return 1===e?t.locations[0].name?`<br/> ${t.locations[0].name}`:`<br/> ${t.locations[0].address}`:e>0?`<br/> ${new I.b(this.translate,this.ref).transform(I.a.t("standard","Multiple locations"))}`:""}}makeReadableDates(e,t){const i=Object(x.k)(Object(x.i)(),x.a),s=this.course.sessions[e];let n=this.formatter.getContextTimezone();const a=s.dates.length-1,o=this.formatter.convertTimeToUTC(`${s.dates[0].date} ${s.dates[0].start_hour}`,s.dates[0].timezone),r=new D.a(o).formatTimezoned(i,n),c=this.formatter.convertTimeToUTC(`${s.dates[a].date} ${s.dates[a].end_hour}`,s.dates[a].timezone);return`${r} - ${new D.a(c).formatTimezoned(i,n)}`}changeStatus(){this.GetCourses(this.course_id)}}return e.\u0275fac=function(t){return new(t||e)(b.dc(f.a),b.dc(c.b),b.dc(s.a),b.dc(b.i),b.dc(Z.b),b.dc(v.a),b.dc(E.g),b.dc(_.a))},e.\u0275cmp=b.Xb({type:e,selectors:[["ng-component"]],features:[b.Lb([{provide:c.d,useClass:c.c}])],decls:2,vars:1,consts:[[4,"ngIf"],[3,"tabsParams","sessionsEnterData","course","reloadEvent"]],template:function(e,t){1&e&&(b.dd(0,ee,2,3,"div",0),b.ec(1,"router-outlet")),2&e&&b.Dc("ngIf",t.course)},directives:[w.p,s.m,y.a],encapsulation:2}),e})();function ie(e,t){if(1&e){const e=b.kc();b.jc(0,"div"),b.jc(1,"course-content",1),b.rc("reloadEvent",function(){return b.Uc(e),b.vc().changeStatus()}),b.ic(),b.ic()}if(2&e){const e=b.vc();b.Mb(1),b.Dc("tabsParams",e.tabsParams)("sessionsEnterData",e.sessionsEnterData)("course",e.course)}}let se=(()=>{class e{constructor(e,t,i,s,n,a,o){this._backendService=e,this.cache=t,this.route=i,this.ref=s,this.formatter=n,this.translate=a,this.courseService=o,this.sessionsEnterData=[]}ngOnInit(){this.initCourseData(),this.langChangeSubscriber=this.translate.onLangChange.pipe(h(1)).subscribe(e=>{this.initCourseData()})}initCourseData(){this.route.paramMap.subscribe(e=>{this.course_id=e.get("id"),this.course_title=e.get("title"),this.GetCourses(this.course_id)})}GetCourses(e){Object(l.b)(this.courseService.request("details",{courseId:e})).pipe(Object(g.a)(e=>(e&&e.instructors&&e.instructors.length>0&&(e.instructors=Object(l.g)(e.instructors)),e))).subscribe(e=>{if(this.course=e,this.course.enter_data.sessions&&this.course.sessions&&this.course.sessions.length&&(this.course.enter_data.sessions.forEach((e,t)=>{const i=Object(x.k)(Object(x.i)(),x.a),s=this.course.sessions[t],n=new D.a(s.start_date).formatTimezoned(i,Object(x.j)()),a=new D.a(s.end_date).formatTimezoned(i,Object(x.j)());e.label+=`<br />\n                    <span class="text-grey-mid text-small">${n} - ${a}\n                    `;const o=this.course.sessions.find(t=>t.id_session===e.value);o&&o.locations&&(e.label+=1===this.course.sessions[t].locations.length?o.locations[0].name?` | ${o.locations[0].name}`:` | ${o.locations[0].address}`:` | ${new I.b(this.translate,this.ref).transform(I.a.t("standard","Multiple locations"))}`),e.label+="</span>"}),this.sessionsEnterData=[...this.course.enter_data.sessions]),null==this.course.sessions){const e=new I.b(this.translate,this.ref).transform(I.a.t("standard","This course has no sessions available at this time. Please, check back later."));this.course_sessions=`<div class="tabs-description"> ${e} </div>`}else this.course_sessions={params:{panels:Object(l.d)(this.course.sessions,this.course.type,this.course)},component:O.a};this.course.additional_information&&(this.course.additional_information=this.course.additional_information.filter(e=>1===parseInt(e.visible_to_user,10))),this.tabsParams={panels:Object(l.f)(this.course,this.course_sessions),style:""}})}changeStatus(){this.GetCourses(this.course_id)}ngOnDestroy(){this.cache.isInitialized()&&this.cache.clear(),this.langChangeSubscriber&&this.langChangeSubscriber.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(b.dc(f.a),b.dc(c.b),b.dc(s.a),b.dc(b.i),b.dc(Z.b),b.dc(v.a),b.dc(_.a))},e.\u0275cmp=b.Xb({type:e,selectors:[["ng-component"]],features:[b.Lb([{provide:c.d,useClass:c.c}])],decls:2,vars:1,consts:[[4,"ngIf"],[3,"tabsParams","sessionsEnterData","course","reloadEvent"]],template:function(e,t){1&e&&(b.dd(0,ie,2,3,"div",0),b.ec(1,"router-outlet")),2&e&&b.Dc("ngIf",t.course)},directives:[w.p,s.m,y.a],encapsulation:2}),e})();var ne=i("1FWA"),ae=i("8SnQ");const oe=[{path:"view/elearning/:id/:title",component:T,data:{playlistItem:{type:ae.a.COURSE}}},{path:"view/classroom/:id/:title",component:te,data:{playlistItem:{type:ae.a.COURSE}}},{path:"view/webinar/:id/:title",component:se,data:{playlistItem:{type:ae.a.COURSE}}}];var re=i("4Y2v"),ce=i("NCOs"),le=i("PEGs"),de=i("IsFk"),ue=i("GW7C"),he=i("XRhs"),pe=i("A3UQ");const me=[...oe];let ge=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.bc({type:e}),e.\u0275inj=b.ac({providers:[a.a,o.a],imports:[[n.a,r.LearningPlanModule,s.l.forChild(me),U.xc]]}),e})();b.Yc(k.a,[w.p,w.o,w.q,w.n],[re.a,I.b]),b.Yc(A.a,[w.n,w.p,ce.a,w.o,le.a],[I.b,w.z,de.a,ue.a,he.a]),b.Yc(j.a,[w.p],[I.b]),b.Yc(ne.a,[w.p,pe.a],[])},QUaw:function(e,t,i){var s=i("Rb7d");t.render=function(e,t,i){var n=i,a=t;void 0!==n||t&&t.getContext||(n=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),n=s.getOptions(n);var o=s.getImageWidth(e.modules.size,n),r=a.getContext("2d"),c=r.createImageData(o,o);return s.qrToImageData(c.data,e,n),function(e,t,i){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px"}(r,a,o),r.putImageData(c,0,0),a},t.renderToDataURL=function(e,i,s){var n=s;return void 0!==n||i&&i.getContext||(n=i,i=void 0),n||(n={}),t.render(e,i,n).toDataURL(n.type||"image/png",(n.rendererOpts||{}).quality)}},RYym:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{initMyCalendar(t){return{type:e.INIT,payload:{view:t.view,viewDate:t.viewDate,startDate:t.startDate,endDate:t.endDate,filters:t.filters}}}updateMyCalendar(t){return{type:e.UPDATE,payload:{view:t.view,viewDate:t.viewDate,startDate:t.startDate,endDate:t.endDate,filters:t.filters}}}loadEventsSucces(t,i,s,n){return{type:e.LOAD_EVENTS_SUCCESS,payload:{status:"ready",events:t,updateParams:i,export:s,filters:i.filters,appliedFilters:n}}}loadEventsReject(t){return{type:e.LOAD_EVENTS_REJECT,payload:{status:"error",errorMsg:t}}}initEventsInYear(t){return{type:e.LOAD_EVENTS_IN_YEAR,payload:{updateParams:t.updateParams}}}loadEventsInYearSucces(t){return{type:e.LOAD_EVENTS_IN_YEAR_SUCCESS,payload:{monthHasEvents:t}}}loadEventsInYearReject(t){return{type:e.LOAD_EVENTS_IN_YEAR_REJECT,payload:{status:"error",errorMsg:t}}}}return e.INIT="[MyCalendar] Init My Calendar",e.UPDATE="[MyCalendar] Update My Calendar",e.LOAD_EVENTS_SUCCESS="[MyCalendar] Load My Calendar events data",e.LOAD_EVENTS_REJECT="[MyCalendar] Failed loading My Calendar events data",e.LOAD_EVENTS_IN_YEAR="[MyCalendar] Init My Calendar events in year",e.LOAD_EVENTS_IN_YEAR_SUCCESS="[MyCalendar] Load My Calendar events in year data",e.LOAD_EVENTS_IN_YEAR_REJECT="[MyCalendar] Failed loading My Calendar events in year data",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Zb({token:e,factory:e.\u0275fac}),e})()},Rb7d:function(e,t){function i(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");var i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t=e.width&&e.width>=21?e.width:void 0;return{width:t,scale:t?4:e.scale||4,margin:null==e.margin||e.margin<0?4:e.margin,color:{dark:i(e.color.dark||"#000000ff"),light:i(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,i){var s=t.getScale(e,i);return Math.floor((e+2*i.margin)*s)},t.qrToImageData=function(e,i,s){for(var n=i.modules.size,a=i.modules.data,o=t.getScale(n,s),r=Math.floor((n+2*s.margin)*o),c=s.margin*o,l=[s.color.light,s.color.dark],d=0;d<r;d++)for(var u=0;u<r;u++){var h=4*(d*r+u),p=s.color.light;d>=c&&u>=c&&d<r-c&&u<r-c&&(p=l[a[Math.floor((d-c)/o)*n+Math.floor((u-c)/o)]?1:0]),e[h++]=p.r,e[h++]=p.g,e[h++]=p.b,e[h]=p.a}}},ReIE:function(e,t,i){"use strict";var s=i("wunY");i.d(t,"b",function(){return s.a});var n=i("pMVF");i.d(t,"g",function(){return n.a});var a=i("3pRn");i.d(t,"f",function(){return a.a});var o=i("kyyD");i.d(t,"a",function(){return o.a});var r=i("3/UW");i.d(t,"e",function(){return r.a});var c=i("mEp4");i.d(t,"c",function(){return c.a});var l=i("RYym");i.d(t,"d",function(){return l.a})},UIvz:function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return l});var s=i("3t6O"),n=i("pMVF"),a=i("LvDl"),o=i.n(a);class r{static format(e,t){var i=[];let n=0;if(void 0!==t){for(let e in t.pages){let a=t.pages[e],r=[];for(let e in a){let t=a[e];t.type!=s.q.TITLE&&n++;let i=t.title;"title"!==t.type&&(i='<div class="numbering">'+n+') </div> <div class="title">'+t.title+"</div> "),r.push({id_question:t.id_question,title:i,score:0,mode:s.p.ANSWER,type:t.type,is_mandatory:t.is_mandatory,form_control:Object,time_limit:0,time_consumed:0,additional_info:t.additional_info,user_status:t.user_status,feedback:{}})}let c={index:Number(e)+1,questions:r,hasPrev:!o.a.isEmpty(t.pages[Number(e)-1]),hasNext:!o.a.isEmpty(t.pages[Number(e)+1])};i.push(c)}return Object.assign({},c,{pages:i})}}static applyUserAnswers(e,t){let i=[],n=[];for(let a in e.pages[e.curPage].questions){let i=e.pages[e.curPage].questions[a],o={};switch(i.type){case s.q.INLINE_CHOICE:case s.q.CHOICE:o.id_answer=t[i.id_question].user_status.answer;break;case s.q.EXTENDED_TEXT:o.text=t[i.id_question].user_status.answer;break;case s.q.CHOICE_MULTIPLE:{let e=[];for(let s in t[i.id_question].user_status.answers)t[i.id_question].user_status.answers[s]&&e.push(parseInt(s,10));o.id_answers=e}break;case s.q.LIKERT_SCALE:{let e={};for(let s in t[i.id_question].user_status.answers)t[i.id_question].user_status.answers[s]&&(e[s]=t[i.id_question].user_status.answers[s]);o.answers=e}}n.push(Object.assign({},i,{user_status:o}))}return i=e.pages.filter(t=>Number(t.index-1)!=e.curPage),i.push(Object.assign({},e.pages[e.curPage],{questions:n})),o.a.sortBy(i,"index")}static formatUserEntry(e){let t={};for(let i in e)if("object"==typeof e[i]){let s={user_status:{answers:{}}};for(let t in e[i])s.user_status.answers[t]=e[i][t];t[i]=s}else t[i]={user_status:{answer:e[i]}};return t}}const c={curPage:0,status:s.x.TO_BE_STARTED,pages:[]};function l(e=c,t){switch(t.type){case n.a.LOAD_LAUNCH_PARAMS:return r.format(e,t.payload);case n.a.BEGIN_SURVEY:return Object.assign({},e,{status:s.x.STARTED});case n.a.LEAVE_SURVEY:return Object.assign({},e,{status:s.x.TO_BE_STARTED});case n.a.GOTO_PAGE:{if(!t.payload.is_dirty)return Object.assign({},e,{curPage:t.payload.id});let i=r.applyUserAnswers(e,t.payload.user_answers);return Object.assign({},e,{curPage:t.payload.id,pages:i})}case n.a.SURVEY_TRACK_COMPLETED:return t.payload.data&&t.payload.data.acknowledge.is_completed?Object.assign({},e,{status:s.x.SUBMITTED}):e;default:return e}}},Up5I:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return n});var s=function(e){return e[e.COURSES_AND_LEARNING_PLANS=1]="COURSES_AND_LEARNING_PLANS",e[e.COURSES_CONTENT=2]="COURSES_CONTENT",e[e.COURSES_CATALOG=3]="COURSES_CATALOG",e[e.KNOWLEDGE_ASSETS=4]="KNOWLEDGE_ASSETS",e[e.QUESTIONS_AND_ANSWERS=5]="QUESTIONS_AND_ANSWERS",e[e.ALL_RESULTS=6]="ALL_RESULTS",e}({}),n=function(e){return e[e.TILE="tile"]="TILE",e[e.COACH="coach"]="COACH",e[e.ALL_RESULTS="all-results"]="ALL_RESULTS",e}({})},V35J:function(e,t,i){var s=i("Wogr");function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new s(e*e),this.data.fill(0),this.reservedBit=new s(e*e),this.reservedBit.fill(0)}n.prototype.set=function(e,t,i,s){var n=e*this.size+t;this.data[n]=i,s&&(this.reservedBit[n]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=n},Wogr:function(e,t,i){"use strict";var s=i("49sm"),n=(a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}())?2147483647:1073741823;function a(e,t,i){return a.TYPED_ARRAY_SUPPORT||this instanceof a?"number"==typeof e?c(this,e):function(e,t,i,s){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,s){if(i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(s||0))throw new RangeError("'length' is out of bounds");var n;return n=void 0===i&&void 0===s?new Uint8Array(t):void 0===s?new Uint8Array(t,i):new Uint8Array(t,i,s),a.TYPED_ARRAY_SUPPORT?n.__proto__=a.prototype:n=l(e,n),n}(e,t,i,s):"string"==typeof t?function(e,t){var i=0|u(t),s=r(e,i),n=s.write(t);return n!==i&&(s=s.slice(0,n)),s}(e,t):function(e,t){if(a.isBuffer(t)){var i=0|o(t.length),s=r(e,i);return 0===s.length||t.copy(s,0,0,i),s}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?r(e,0):l(e,t);if("Buffer"===t.type&&Array.isArray(t.data))return l(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}(this,e,t,i):new a(e,t,i)}function o(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function r(e,t){var i;return a.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(t)).__proto__=a.prototype:(null===(i=e)&&(i=new a(t)),i.length=t),i}function c(e,t){var i=r(e,t<0?0:0|o(t));if(!a.TYPED_ARRAY_SUPPORT)for(var s=0;s<t;++s)i[s]=0;return i}function l(e,t){for(var i=t.length<0?0:0|o(t.length),s=r(e,i),n=0;n<i;n+=1)s[n]=255&t[n];return s}function d(e,t){var i;t=t||1/0;for(var s=e.length,n=null,a=[],o=0;o<s;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===s){(t-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function u(e){return a.isBuffer(e)?e.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)?e.byteLength:("string"!=typeof e&&(e=""+e),0===e.length?0:d(e).length)}a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),a.prototype.write=function(e,t,i){void 0===t||void 0===i&&"string"==typeof t?(i=this.length,t=0):isFinite(t)&&(t|=0,isFinite(i)?i|=0:i=void 0);var s=this.length-t;if((void 0===i||i>s)&&(i=s),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(e,t,i,s){return function(e,t,i,s){for(var n=0;n<s&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}(d(t,e.length-i),e,i,s)}(this,e,t,i)},a.prototype.slice=function(e,t){var i,s=this.length;if((e=~~e)<0?(e+=s)<0&&(e=0):e>s&&(e=s),(t=void 0===t?s:~~t)<0?(t+=s)<0&&(t=0):t>s&&(t=s),t<e&&(t=e),a.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=a.prototype;else{var n=t-e;i=new a(n,void 0);for(var o=0;o<n;++o)i[o]=this[o+e]}return i},a.prototype.copy=function(e,t,i,s){if(i||(i=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<i&&(s=i),s===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-i&&(s=e.length-t+i);var n,o=s-i;if(this===e&&i<t&&t<s)for(n=o-1;n>=0;--n)e[n+t]=this[n+i];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o},a.prototype.fill=function(e,t,i){if("string"==typeof e){if("string"==typeof t?(t=0,i=this.length):"string"==typeof i&&(i=this.length),1===e.length){var s=e.charCodeAt(0);s<256&&(e=s)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var n;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(n=t;n<i;++n)this[n]=e;else{var o=a.isBuffer(e)?e:new a(e),r=o.length;for(n=0;n<i-t;++n)this[n+t]=o[n%r]}return this},a.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r(null,0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=c(null,t),o=0;for(i=0;i<e.length;++i){var l=e[i];if(!a.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(n,o),o+=l.length}return n},a.byteLength=u,a.prototype._isBuffer=!0,a.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.exports=a},"Y/hz":function(e,t,i){"use strict";i.d(t,"a",function(){return P});var s=i("fXoL"),n=i("3Pt+"),a=i("TrxT"),o=i("Kj3r"),r=i("/uUt"),c=i("1G5W"),l=i("/76g");class d{constructor(){this.searchLabel=l.a.t("standard","Search"),this.searchPlaceholder=l.a.t("standard","Search..."),this.itemCount=l.a.t("standard","item"),this.itemsCount=l.a.t("standard","items"),this.showMore=l.a.t("standard","Show More ({n})")}}var u=i("YpZb"),h=i("ofXK"),p=i("nUpK"),m=i("gvJE");function g(e,t){if(1&e){const e=s.kc();s.jc(0,"ui-input-search",9),s.rc("search",function(t){return s.Uc(e),s.vc(2).search(t)}),s.wc(1,"t"),s.wc(2,"t"),s.ic()}if(2&e){const e=s.vc(2);s.ad("boxed"),s.Dc("showBorder",!0)("formControl",e.formControlSearch)("searchLabel",s.xc(1,6,e.dictionary.searchLabel))("searchPlaceholder",s.xc(2,8,e.dictionary.searchPlaceholder))}}function b(e,t){if(1&e&&(s.hc(0),s.fd(1),s.wc(2,"lowercase"),s.wc(3,"t"),s.gc()),2&e){const e=s.vc(3);s.Mb(1),s.id(" ",e.filters.totalCount," ",s.xc(2,2,s.xc(3,4,e.dictionary.itemCount))," ")}}function f(e,t){if(1&e&&(s.fd(0),s.wc(1,"lowercase"),s.wc(2,"t")),2&e){const e=s.vc(3);s.id(" ",e.filters.totalCount," ",s.xc(1,2,s.xc(2,4,e.dictionary.itemsCount))," ")}}function v(e,t){if(1&e&&(s.jc(0,"div",10),s.dd(1,b,4,6,"ng-container",7),s.dd(2,f,3,6,"ng-template",null,11,s.ed),s.ic()),2&e){const e=s.Rc(3),t=s.vc(2);s.Mb(1),s.Dc("ngIf",1===t.filters.options.length)("ngIfElse",e)}}function _(e,t){1&e&&s.fc(0)}function w(e,t){if(1&e&&(s.hc(0),s.dd(1,_,1,0,"ng-container",12),s.gc()),2&e){s.vc(2);const e=s.Rc(2);s.Mb(1),s.Dc("ngTemplateOutlet",e)}}const y=function(e){return{n:e}};function C(e,t){if(1&e){const e=s.kc();s.jc(0,"ui-button-text",13),s.rc("trigger",function(){return s.Uc(e),s.vc(2).filters.loadMore.next()}),s.wc(1,"t"),s.ic()}if(2&e){const e=s.vc(2);s.Dc("color","neutral")("loading",!1)("label",s.yc(1,3,e.dictionary.showMore,s.Ic(6,y,e.filters.totalCount>8&&1===e.filters.page?e.filters.totalCount-e.filters.options.length+3:e.filters.totalCount-e.filters.options.length)))}}function S(e,t){if(1&e&&(s.jc(0,"div",3),s.dd(1,g,3,10,"ui-input-search",4),s.jc(2,"div",5),s.dd(3,v,4,2,"div",6),s.dd(4,w,2,1,"ng-container",7),s.ic(),s.dd(5,C,2,8,"ui-button-text",8),s.ic()),2&e){const e=s.vc(),t=s.Rc(4);s.Vb("has-search",e.filters.totalCount>30||e.filters.searchValue.length),s.Mb(1),s.Dc("ngIf",e.filters.totalCount>30||e.filters.searchValue.length),s.Mb(2),s.Dc("ngIf",e.filters.searchValue.length),s.Mb(1),s.Dc("ngIf","multiple"===e.type)("ngIfElse",t),s.Mb(1),s.Dc("ngIf",e.filters.totalCount>7&&e.filters.hasMoreData)}}function T(e,t){if(1&e&&(s.hc(0),s.jc(1,"ui-input-checkbox",17),s.jc(2,"ui-input-label"),s.fd(3),s.ic(),s.ic(),s.gc()),2&e){const e=s.vc().$implicit;s.Mb(1),s.Dc("value",e.value),s.Mb(2),s.gd(e.label)}}function k(e,t){if(1&e&&(s.hc(0),s.dd(1,T,4,2,"ng-container",16),s.gc()),2&e){const e=t.index,i=s.vc(2);s.Mb(1),s.Dc("ngIf",i.filters.totalCount>8&&1===i.filters.page&&e<=4||i.filters.page>1||i.filters.totalCount<=8)}}const I=function(){return[]};function x(e,t){if(1&e){const e=s.kc();s.jc(0,"ui-input-checkbox-group",14),s.rc("changeSelection",function(t){return s.Uc(e),s.vc().multiSelectValueChange(t)}),s.dd(1,k,2,1,"ng-container",15),s.ic()}if(2&e){const e=s.vc();s.Dc("value",e.inputFormControl.value||s.Hc(2,I)),s.Mb(1),s.Dc("ngForOf",e.filters.options)}}function D(e,t){if(1&e&&(s.hc(0),s.jc(1,"ui-input-radio",18),s.jc(2,"ui-input-label"),s.fd(3),s.ic(),s.ic(),s.gc()),2&e){const e=s.vc().$implicit,t=s.vc(2);s.Mb(1),s.Dc("value",e.value)("groupName",t.key)("formControl",t.inputFormControl),s.Mb(2),s.gd(e.label)}}function O(e,t){if(1&e&&(s.hc(0),s.dd(1,D,4,4,"ng-container",16),s.gc()),2&e){const e=t.index,i=s.vc(2);s.Mb(1),s.Dc("ngIf",i.filters.totalCount>8&&1===i.filters.page&&e<=4||i.filters.page>1||i.filters.totalCount<=8)}}function E(e,t){if(1&e&&(s.jc(0,"ui-input-radiogroup"),s.dd(1,O,2,1,"ng-container",15),s.ic()),2&e){const e=s.vc();s.Mb(1),s.Dc("ngForOf",e.filters.options)}}let P=(()=>{class e extends a.a{constructor(e){super(),this.filters=e,this.type="multiple",this.inputFormControl=new n.e(""),this.filterChange=new s.q,this.formControlSearch=new n.e(""),this.dictionary=new d}ngOnInit(){this.formControlSearch.valueChanges.pipe(Object(o.a)(500),Object(r.a)(),Object(c.a)(this.ngUnsubscribe)).subscribe(e=>this.search(e)),this.inputFormControl.valueChanges.pipe(Object(o.a)(500),Object(c.a)(this.ngUnsubscribe)).subscribe(e=>{this.filterChange.emit({[this.key]:this.inputFormControl.value})}),this.filters.endpoint=this.endpoint,this.filters.loadMore.next()}ngOnDestroy(){super.ngOnDestroy(),this.filters.loadMore.complete()}search(e){this.filters.searchValue=e,this.filters.loadMore.next(1)}multiSelectValueChange(e){this.inputFormControl.setValue(JSON.parse(JSON.stringify(e)))}}return e.\u0275fac=function(t){return new(t||e)(s.dc(u.b))},e.\u0275cmp=s.Xb({type:e,selectors:[["doc-db-custom-filter"]],inputs:{type:"type",key:"key",endpoint:"endpoint",inputFormControl:"inputFormControl"},outputs:{filterChange:"filterChange"},features:[s.Lb([u.b]),s.Jb],decls:5,vars:1,consts:[["class","custom-filters",3,"has-search",4,"ngIf"],["multipleList",""],["singleList",""],[1,"custom-filters"],[3,"showBorder","formControl","searchLabel","searchPlaceholder","style","search",4,"ngIf"],[1,"options-list"],["class","searched-count hyd-typography-subtitle hyd-color-typography-secondary",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"color","loading","label","trigger",4,"ngIf"],[3,"showBorder","formControl","searchLabel","searchPlaceholder","search"],[1,"searched-count","hyd-typography-subtitle","hyd-color-typography-secondary"],["pluralLabel",""],[4,"ngTemplateOutlet"],[3,"color","loading","label","trigger"],[3,"value","changeSelection"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[3,"value","groupName","formControl"]],template:function(e,t){1&e&&(s.dd(0,S,6,7,"div",0),s.dd(1,x,2,3,"ng-template",null,1,s.ed),s.dd(3,E,2,1,"ng-template",null,2,s.ed)),2&e&&s.Dc("ngIf",t.inputFormControl)},directives:[h.p,p.ac,n.o,n.f,h.u,p.G,p.Lb,h.o,p.Kb,p.Tb,p.Xb,p.Wb],pipes:[m.b,h.m],styles:["[_nghost-%COMP%]{display:block;border-top:solid var(--hyd-size-border-xs) var(--hyd-color-border-neutral)}[_nghost-%COMP%]   .custom-filters[_ngcontent-%COMP%]{padding:var(--hyd-spacing-md) 0}[_nghost-%COMP%]   ui-input-search[_ngcontent-%COMP%]{display:block;height:53px}[_nghost-%COMP%]   .searched-count[_ngcontent-%COMP%]{padding-bottom:var(--hyd-spacing-sm)}[_nghost-%COMP%]   .options-list[_ngcontent-%COMP%]{padding:0 var(--hyd-spacing-sm)}[_nghost-%COMP%]   ui-button-text[_ngcontent-%COMP%]{padding:var(--hyd-spacing-xxs) var(--hyd-spacing-xxs) 0 var(--hyd-spacing-xxs)}[_nghost-%COMP%]   .custom-filters.has-search[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]   .custom-filters.has-search[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{padding-top:var(--hyd-spacing-md)}"]}),e})()},YXR0:function(e,t,i){"use strict";i.d(t,"a",function(){return Z});var s=i("A+3w"),n=i("gvJE"),a=i("yRWM"),o=i("o6wD"),r=i("jt8V"),c=i("BPI6"),l=i("raRA"),d=i("6fYS"),u=i("LvDl"),h=i.n(u),p=i("2Vo4"),m=i("XNiG"),g=i("LRne"),b=i("vkgz"),f=i("1G5W"),v=i("D7St"),_=i("NKMr"),w=i("fXoL"),y=i("L+kn"),C=i("tyNb"),S=i("+sIT"),T=i("ofXK"),k=i("lNbR"),I=i("sk0d"),x=i("alYl"),D=i("XEWJ"),O=i("mZNx"),E=i("OFqD"),P=i("vQfe"),M=i("Vqln"),A=i("g9In"),L=i("nUpK"),j=i("2YCl");const F=["multiselect"],R=["dataTable"];function N(e,t){1&e&&(w.fd(0),w.wc(1,"t")),2&e&&w.hd(" ",w.xc(1,1,"Name")," ")}function U(e,t){if(1&e){const e=w.kc();w.jc(0,"hyd-ellipsable-text"),w.jc(1,"a",20),w.rc("click",function(){w.Uc(e);const i=t.item;return w.vc(2).navigateToSessionDetailPage(i.id)}),w.fd(2),w.ic(),w.ic()}if(2&e){const e=t.item;w.Mb(2),w.gd(e.name)}}function q(e,t){if(1&e&&(w.fd(0),w.wc(1,"t")),2&e){const e=w.vc().$implicit;w.hd(" ",w.xc(1,1,e.label)," ")}}function z(e,t){if(1&e){const e=w.kc();w.jc(0,"div",22),w.rc("click",function(){w.Uc(e);const i=t.item,s=w.vc().$implicit;return s.click?s.click(i):""}),w.jc(1,"div",23),w.jc(2,"span"),w.fd(3),w.ic(),w.ic(),w.jc(4,"div",24),w.ec(5,"ui-icon",25),w.ic(),w.ic()}if(2&e){const e=t.item,i=w.vc().$implicit,s=w.vc(2);w.Vb("text-warning",i.isWarning(e))("text-main",!i.isWarning(e))("text-pointer",null!=i.click),w.Mb(3),w.gd(i.value(e)),w.Mb(2),w.Dc("name",i.icon)("size","sm")("color",i.isWarning(e)?s.alertColor:s.accentColor)}}function V(e,t){1&e&&(w.jc(0,"hyd-table-column",21),w.jc(1,"hyd-table-column-header"),w.dd(2,q,2,3,"ng-template"),w.ic(),w.jc(3,"hyd-table-column-cell"),w.dd(4,z,6,10,"ng-template"),w.ic(),w.ic()),2&e&&w.Dc("columnName",t.$implicit.name)("sortable",!0)("alignment","center")}function B(e,t){if(1&e&&w.fd(0),2&e){const e=w.vc().$implicit;w.hd(" ",e.name," ")}}function G(e,t){if(1&e&&(w.jc(0,"hyd-ellipsable-text"),w.fd(1),w.ic()),2&e){const e=t.item,i=w.vc().$implicit;w.Mb(1),w.hd(" ",i.value(e.additional_fields)," ")}}function $(e,t){if(1&e&&(w.hc(0),w.jc(1,"hyd-table-column",26),w.jc(2,"hyd-table-column-header"),w.dd(3,B,1,1,"ng-template"),w.ic(),w.jc(4,"hyd-table-column-cell"),w.dd(5,G,2,1,"ng-template"),w.ic(),w.ic(),w.gc()),2&e){const e=t.$implicit;w.Mb(1),w.Dc("columnName",e.id)}}function H(e,t){}function Y(e,t){if(1&e&&w.ec(0,"btn-ellipsis",27),2&e){const e=t.item,i=t.index,s=w.vc(2);w.Dc("params",e)("orientation",(i<=7?"bottom":"top")+"-left")("actions",s.getRowActions(e))}}function W(e,t){1&e&&(w.jc(0,"div",30),w.ec(1,"ui-spinner",31),w.ic()),2&e&&(w.Mb(1),w.Dc("size","md"))}function Q(e,t){if(1&e&&w.ec(0,"blankslate",32),2&e){const e=w.vc(3);w.Dc("isVisible",!0)("type",e.BlankSlateType.EMPTY001)("title",e.noResultsTitle)("subtitle",e.noResultsSubtitle)}}function K(e,t){if(1&e&&(w.jc(0,"div",28),w.dd(1,W,2,1,"div",19),w.dd(2,Q,1,4,"blankslate",29),w.ic()),2&e){const e=w.vc(2);w.Mb(1),w.Dc("ngIf",e.isLoading),w.Mb(1),w.Dc("ngIf",!e.isLoading&&e.noResults)}}function X(e,t){1&e&&(w.jc(0,"div",30),w.ec(1,"ui-spinner",31),w.ic()),2&e&&(w.Mb(1),w.Dc("size","md"))}function J(e,t){if(1&e){const e=w.kc();w.hc(0),w.jc(1,"data-browser",1,2),w.rc("onFiltersUpdate",function(t){return w.Uc(e),w.vc().onFiltersChanged(t)}),w.jc(3,"div",3),w.ec(4,"hyd-column-selector",4),w.ic(),w.jc(5,"div",5),w.wc(6,"async"),w.jc(7,"div",6),w.jc(8,"hyd-table",7,8),w.rc("selectRows",function(t){return w.Uc(e),w.vc().onRowsSelected(t)})("sort",function(t){return w.Uc(e),w.vc().onSortingChanged(t)}),w.wc(10,"async"),w.ec(11,"hyd-column-ellipsable-text",9),w.jc(12,"hyd-table-column",10),w.jc(13,"hyd-table-column-header"),w.dd(14,N,2,3,"ng-template"),w.ic(),w.jc(15,"hyd-table-column-cell"),w.dd(16,U,3,1,"ng-template"),w.ic(),w.ic(),w.ec(17,"hyd-column-ellipsable-text",9),w.ec(18,"hyd-column-ellipsable-text",9),w.ec(19,"hyd-column-ellipsable-text",9),w.dd(20,V,5,3,"hyd-table-column",11),w.dd(21,$,6,1,"ng-container",12),w.jc(22,"hyd-table-column",13),w.jc(23,"hyd-table-column-header"),w.dd(24,H,0,0,"ng-template"),w.ic(),w.jc(25,"hyd-table-column-cell"),w.dd(26,Y,1,3,"ng-template"),w.ic(),w.ic(),w.ic(),w.jc(27,"hyd-paginator",14),w.rc("pageChange",function(t){return w.Uc(e),w.vc().onPagingChanged(t)}),w.ic(),w.ic(),w.jc(28,"div",15),w.jc(29,"massive-actions-bar",16),w.rc("selectAll$",function(){return w.Uc(e),w.vc().onSelectEverything(!0)})("unselectAll$",function(){return w.Uc(e),w.vc().onSelectEverything(!1)}),w.wc(30,"t"),w.ic(),w.ic(),w.ic(),w.dd(31,K,3,2,"div",17),w.wc(32,"async"),w.ic(),w.ec(33,"blankslate",18),w.dd(34,X,2,1,"div",19),w.gc()}if(2&e){const e=w.Rc(9),t=w.vc();w.Mb(1),w.Dc("hidden",!t.initialized||t.noData)("dataBrowserSource",t.dataBrowserSource),w.Mb(3),w.Dc("tableRef",e)("cacheId","ilt-instructor-sessions-list-column-selector_")("lockedColumns",t.lockedColumns)("preselectedColumns",t.preselectedColumns)("hiddenColumns",t.hiddenColumns)("maxSelectable",t.countColumns),w.Mb(1),w.Vb("massive-actions-bar-open",w.xc(6,58,t.showMassiveActionsBar$)),w.Mb(3),w.Dc("data",w.xc(10,60,t.tableData$))("selectable",t.allSelectEnable)("rowsComparisonFunction",t.comparerFn)("rowHeight",t.HYD_TABLE_STYLES.ROW_HEIGHT)("selection",t.currentSelection)("sorting",t.sortingCriteria),w.Mb(3),w.Dc("columnName","code")("headerLabel","Code")("fieldName","code")("translateField",!1)("sortable",!0),w.Mb(1),w.Dc("columnName","name")("sortable",!0),w.Mb(5),w.Dc("columnName","date_begin")("headerLabel","Start Date")("fieldName","date_start")("translateField",!1)("sortable",!0),w.Mb(1),w.Dc("columnName","date_end")("headerLabel","End Date")("fieldName","date_end")("translateField",!1)("sortable",!0),w.Mb(1),w.Dc("columnName","hours")("headerLabel","Hours")("fieldName","hours")("translateField",!1)("sortable",!0),w.Mb(1),w.Dc("ngForOf",t.assignmentColumns),w.Mb(1),w.Dc("ngForOf",t.sessionAdditionalFields),w.Mb(1),w.Dc("columnWidth","30.042px")("columnName","actions")("ellipsed",!1),w.Mb(5),w.Dc("pageIndex",null==t.paginationInfo?null:t.paginationInfo.page)("pageSize",null==t.paginationInfo?null:t.paginationInfo.pageSize)("length",t.totalCount),w.Mb(2),w.Dc("counter",t.selectedItemsCount)("actions",t.getMassiveActions())("actionTitle",w.xc(30,62,"Choose action"))("type","inline-btn")("isSelectAllButtonVisible",!0)("isUnSelectAllButtonVisible",!0),w.Mb(2),w.Dc("ngIf",w.xc(32,64,t.hideTable$)),w.Mb(2),w.Dc("isVisible",t.initialized&&t.noData)("type",t.blankSlateConfig.type)("title",t.blankSlateConfig.title)("subtitle",t.blankSlateConfig.subtitle),w.Mb(1),w.Dc("ngIf",!t.initialized)}}let Z=(()=>{class e extends o.c{constructor(e,t,i,o,r,c){super(c,r),this.iltSessionService=e,this.router=t,this.route=i,this.docService=o,this.assignmentColumns=[{name:"events",label:n.a.t("standard","events"),icon:"calendar",isWarning:e=>0==e.events,value:e=>e.events,click:e=>this.navigateToSessionEventsPage(e.id)},{name:"instructors",label:n.a.t("standard","Instructors"),icon:"assignment-account",isWarning:e=>0==e.instructors,value:e=>e.instructors},{name:"enrolled",label:n.a.t("standard","Enrolled users"),icon:"branch",isWarning:e=>0==e.enrolled,value:e=>e.enrolled+"/"+e.max_enroll,click:e=>this.navigateToSessionEnrollmentsPage(e.id)}],this.allColumns=["code","name","date_begin","date_end","hours",...this.assignmentColumns.map(e=>e.name)],this.lockedColumns=["name"],this.preselectedColumns=[...this.allColumns,...this.assignmentColumns.map(e=>e.name)],this.hiddenColumns=["actions"],this.blankSlateConfig={type:a.a.BLANK001,title:n.a.t("classroom","No Sessions found"),subtitle:n.a.t("classroom","Click the Add button in the top right corner to create a new session")},this._rowActions=[],this._massiveActions=[],this.accentColor=d.l.ACCENT,this.alertColor=d.l.ALERT,this.countColumns=this.allColumns.length,this.isSessionAdditionaldFieldLoad$=new p.a(!1),this.sessionAdditionalFields=[],this.destroy$=new m.a,this.searchUsers$=new p.a(""),this.multiSelectMode=s.a.AUTOCOMPLETE}get allSelectEnable(){return this._massiveActions.length>0}ngOnInit(){super.ngOnInit(),this.subscribeTo(this.listenToSearchUser())}ngOnDestroy(){super.ngOnDestroy(),this.destroy$.next(!0),this.destroy$.unsubscribe()}ngAfterViewInit(){super.ngAfterViewInit(),this.changeDetector.markForCheck(),h.a.delay(()=>{this.dataTable.multiselects.first.onChange.subscribe(e=>this.searchForUsers(e))},1e3)}fetchDataImpl(e,t,i){return this.iltSessionService.getPaginetedList(this.courseId,e.pageSize,e.page,t.dir,t.columnName,i).pipe(Object(b.a)(()=>this.getRowActions()))}getInitialSorting(){return{columnName:"code",dir:c.a.ASC}}onFiltersChanged(e){var t,i;const s=this.processFilters(e);h.a.isUndefined(s.date)||0!=(null===(t=s.date.from)||void 0===t?void 0:t.length)||0!=(null===(i=s.date.to)||void 0===i?void 0:i.length)||delete s.date,this._currentFilters.next(s),this.dataBrowserSource.appliedFiltersNumber.next(Object.keys(s).filter(e=>e!=_.d.SEARCH).length)}getMassiveActions(){return this._massiveActions}getRowActions(){return this._rowActions}navigateToSessionDetailPage(e){this.router.navigate(["learn","instructor","session",e])}navigateToSessionEventsPage(e){this.router.navigate(["learn","instructor","session",e],{queryParams:{[v.c]:v.b.events_attendance}})}navigateToSessionEnrollmentsPage(e){this.router.navigate(["learn","instructor","session",e],{queryParams:{[v.c]:v.b.enrollments_evaluations}})}navigateToLearnerView(){}navigateToAttendanceSheet(e){this.router.navigate([`/legacy/admin/index.php?r=ClassroomApp/instructor/axAttendanceSheet&course_id=${this.courseId}&id_session=${e}`])}initializeColumns(){this.iltSessionService.getAdditionalField().pipe(Object(f.a)(this.destroy$)).subscribe(e=>{this.sessionAdditionalFields=e,this.sessionAdditionalFields=e.map(e=>({id:"additionalField"+e.id,type:e.type,name:e.name,value:t=>{const i=t.find(t=>t.id==e.id);return i?i.value:""}})),this.countColumns+=this.sessionAdditionalFields.length,this.isSessionAdditionaldFieldLoad$.next(!0)})}initializeColumnSelectorPanel(){return{icon:"view-column",iconTooltip:{tooltipText:"Column selector",tooltipPosition:l.b.BOTTOM},content:{}}}initializeFilters(){const e=[{title:n.a.t("standard","Search"),code:_.d.SEARCH,type:r.d.free_search_filter,params:{placeholder:n.a.t("standard","Search...")}},{title:n.a.t("standard","Instructor"),code:_.d.INSTRUCTORS,type:r.d.multiselect_filter,params:{placeholder:n.a.t("standard","Instructor"),maxSelectableItems:1,maxSuggestedItems:10,source:[]}},{title:n.a.t("standard","Dates"),code:_.d.DATE,type:r.d.timeframe,params:{fromDate:{name:_.d.DATE_BEGIN,type:"date",label:n.a.t("course","_SUBSCRIPTION_DATE_BEGIN")},toDate:{name:_.d.DATE_END,type:"date",label:n.a.t("course","_SUBSCRIPTION_DATE_END")}}},{title:n.a.t("standard","Session Details"),code:_.d.PROPERTIES,type:r.d.checkbox_filter,params:{options:[{key:_.d.PROPERTIES_WITHOUT_EVENTS,label:n.a.t("standard","Without Events")},{key:_.d.PROPERTIES_WITH_USER_WAITING,label:n.a.t("standard","With Users in Waiting List")},{key:_.d.PROPERTIES_WITHOUT_ENROLLED_USERS,label:n.a.t("standard","Without Enrolled Users")}]}}];return Object(g.a)(e)}searchForUsers(e){this.searchUsers$.next(e)}listenToSearchUser(){return this.iltSessionService.getInstructorListSuggest(this.searchUsers$).subscribe(e=>{this.dataTable.multiselects.first.source=[...e],this.dataTable.multiselects.first.filteredList=[...e],this.dataTable.multiselects.first.showItemsList=!0,this.changeDetector.markForCheck(),this.changeDetector.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(w.dc(y.a),w.dc(C.h),w.dc(C.a),w.dc(S.a),w.dc(w.o),w.dc(w.i))},e.\u0275cmp=w.Xb({type:e,selectors:[["ilt-instructor-session-list"]],viewQuery:function(e,t){if(1&e&&(w.md(F,1),w.md(R,1)),2&e){let e;w.Qc(e=w.sc())&&(t.multiselect=e.first),w.Qc(e=w.sc())&&(t.dataTable=e.first)}},inputs:{courseId:"courseId"},features:[w.Jb],decls:2,vars:3,consts:[[4,"ngIf"],[1,"data-browser",3,"hidden","dataBrowserSource","onFiltersUpdate"],["dataTable",""],[1,"custom-panel"],[3,"tableRef","cacheId","lockedColumns","preselectedColumns","hiddenColumns","maxSelectable"],[1,"data-browser-table-content"],[1,"table-wrapper"],[1,"hyd-table-ilt-sessions-list",3,"data","selectable","rowsComparisonFunction","rowHeight","selection","sorting","selectRows","sort"],["iltInstructorSessionsListTable",""],[3,"columnName","headerLabel","fieldName","translateField","sortable"],[3,"columnName","sortable"],[3,"columnName","sortable","alignment",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"columnWidth","columnName","ellipsed"],[3,"pageIndex","pageSize","length","pageChange"],[1,"massive-actions-bar-wrapper"],[3,"counter","actions","actionTitle","type","isSelectAllButtonVisible","isUnSelectAllButtonVisible","selectAll$","unselectAll$"],["class","table-cover bg-grey-superlight",4,"ngIf"],[1,"no-data",3,"isVisible","type","title","subtitle"],["class","spinner",4,"ngIf"],[1,"text-pointer",3,"click"],[3,"columnName","sortable","alignment"],[1,"col-with-icon-cell",3,"click"],[1,"counter"],[1,"icon"],[3,"name","size","color"],[3,"columnName"],[3,"params","orientation","actions"],[1,"table-cover","bg-grey-superlight"],[3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"spinner"],[3,"size"],[3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(w.dd(0,J,35,66,"ng-container",0),w.wc(1,"async")),2&e&&w.Dc("ngIf",w.xc(1,1,t.isSessionAdditionaldFieldLoad$))},directives:[T.p,k.a,I.a,x.a,D.a,O.c,O.d,O.b,T.o,E.b,P.a,M.a,A.a,L.Eb,j.a,L.fd],pipes:[T.b,n.b],styles:['.data-browser-table[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{margin-top:100px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;z-index:1}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate{margin-top:50px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section{font-size:1.1em}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div{font-size:.8em}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-start;padding-top:50px;box-sizing:border-box}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%]{position:static}.data-browser-table[_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"], .data-browser-table   [_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"]{flex-grow:0!important;justify-content:flex-end!important}.color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content, .data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table{display:block;height:calc(100% - 46px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body{height:calc(100% - 39px);overflow-x:hidden;overflow-y:auto}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper{overflow:hidden;height:0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar{height:52px}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper{height:calc(100% - 52px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper{height:52px;overflow:visible}.data-browser-table[_nghost-%COMP%]     .data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser{overflow-y:auto;overflow-x:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{width:330px;padding:0;margin:0;display:block;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#fff}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:1px solid var(--hyd-color-border-neutral)}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:0}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:1px solid var(--hyd-color-border-neutral)}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper{box-sizing:border-box;border:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab{display:flex;flex-direction:column}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter{flex-shrink:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last{flex-grow:1}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters{flex-shrink:0;justify-content:flex-end;padding:10px}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:10px}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:auto}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box{padding-right:20px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col{height:100%;margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col{position:relative;width:calc(100% - 330px - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col{position:relative;width:calc(100% - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row{width:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper{height:calc(100% - 40px - 1px);overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container{height:100%;overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid{margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid{margin:0 auto}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{overflow:hidden;height:100%}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 -15px 0 0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 0 0 -15px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters{height:40px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder{height:40px!important}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i{padding-top:10px;padding-bottom:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{height:40px;padding:0 6px}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container{flex-grow:1;max-width:unset}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{display:none}[_nghost-%COMP%]{display:block}.col-with-icon-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%], .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;width:50%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{justify-content:flex-end}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{justify-content:flex-start}.router-outlet:not(.direction-rtl):not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet:not(.direction-rtl):not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:6px}.router-outlet.direction-rtl:not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet.direction-rtl:not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:6px}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i.zmdi[_ngcontent-%COMP%]{font-size:var(--hyd-size-icon-sm)}.text-pointer[_ngcontent-%COMP%]{cursor:pointer}.spinner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:100%;box-sizing:border-box}.spinner[_ngcontent-%COMP%]   .mdl-spinner[_ngcontent-%COMP%]{position:static}'],changeDetection:0}),e})()},YpZb:function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i.d(t,"b",function(){return l});var s=i("yfT8"),n=i("XNiG"),a=i("wO+i"),o=i("fXoL"),r=i("Y9qQ");class c extends s.a{constructor(e,t,i,s,n="search_text",a={}){super(e,t),this.additionalPayload={},this.labelKey=i,this.valueKey=s,this.searchParamName=n,this.additionalPayload=a}}let l=(()=>{class e{constructor(e){this.src=e,this.page=0,this.totalCount=0,this.hasMoreData=!0,this.options=[],this.searchValue="",this.isLoading=!1,this.loadMore=new n.a,this.loadMore.asObservable().subscribe(e=>{this.hasMoreData&&(this.page=null!=e?e:this.page+1,this.isLoading=!0,this.loadMoreOptions(1===this.page))})}loadMoreOptions(e=!1){this.src.request(this.endpoint.url,this.endpoint.verb,Object.assign(Object.assign(Object.assign({page:this.page},this.searchValue.length&&{[this.endpoint.searchParamName]:this.searchValue}),{page_size:8}),this.endpoint.additionalPayload)).pipe(Object(a.a)("data")).subscribe(t=>{this.totalCount=t.total_count,this.hasMoreData=t.has_more_data;const i=t.items.map(e=>({label:e[this.endpoint.labelKey],value:Number(e[this.endpoint.valueKey])}));this.options=e?i:this.options.concat(i),this.isLoading=!1})}}return e.\u0275fac=function(t){return new(t||e)(o.nc(r.a))},e.\u0275prov=o.Zb({token:e,factory:e.\u0275fac}),e})()},Z92M:function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},ZOB2:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var s=i("AytR"),n=i("dRcD"),a=i("gvJE"),o=i("T8dX"),r=i("fXoL");let c=(()=>{class e{constructor(){this.getMultidomainSubfolder=()=>void 0!==s.a.subfolder&&""!==s.a.subfolder?`/${s.a.subfolder}`:""}getDeeplinkButtonForCourse(e,t,i){const s=n.a.getInstance();if(!e.deeplink)return null;const r=this.getMultidomainSubfolder(),c=document.location.origin+r,l=a.a.t("standard",i?"Share this link to allow people to see the course or the training material you are viewing and automatically enroll.":"Share this link to allow people to see the course and automatically enroll."),d=`${c}/learn/course/${e.id}/${e.slug_name}?generated_by=${s.id}&hash=${e.deeplink}`;let u={mainTitle:a.a.t("course","Get shareable link"),title:l};return u=Object.assign(Object.assign({},u),i?{controls:[{type:"radio",label:a.a.t("standard","Course link"),name:"copyLinkType",value:d,checked:!0},{type:"radio",label:a.a.t("standard","This content link"),name:"copyLinkType",value:`${c}/learn/course/${e.id}/play/${i.id}/${i.slug}?hash=${e.deeplink}&generated_by=${s.id}`,checked:!1}]}:{singleLink:d}),{properties:{icons:["zmdi zmdi-link"],baloon:{width:422,title:" ",style:"white",position:"bottom-left",component:{params:u,component:o.a},isSuggestionBalloon:!1,showOnClick:!1,uniquePrefix:t,isFab:!0},tooltipText:a.a.t("course","Get shareable link")}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Zb({token:e,factory:e.\u0275fac}),e})()},Znps:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var s=i("ofXK"),n=i("fXoL");let a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.bc({type:e}),e.\u0275inj=n.ac({imports:[[s.c]]}),e})()},a1XQ:function(e,t,i){"use strict";i.r(t),i.d(t,"LearnModule",function(){return NM});var s=i("tyNb"),n=i("dpSy"),a=i("HDdC"),o=i("dRcD"),r=i("L+gB"),c=i("fXoL");let l=(()=>{class e{constructor(e){this.router=e}canActivate(e,t){return new a.a(e=>{let t=()=>{o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)&&this.router.navigate(["/learn/home"]),e.next(!o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)),e.complete()},i=()=>{this.router.navigate(["/learn/signin"]),e.next(!1),e.complete()};if(o.a.getInstance().isLoaded())t();else{let e=r.a.singleton.subscribe("UserSessionReady",()=>{e.unsubscribe(),t()}),s=r.a.singleton.subscribe("UserSessionError",e=>{s.unsubscribe(),401==e.data.status&&i()})}})}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var d=i("tfGn"),u=i("S2Qf"),h=i("uxYR"),p=i("zanj"),m=i("yoPb"),g=i("rL2y"),b=i("nUpK"),f=i("9jGm"),v=i("l7P3"),_=i("0FX9");const w=["qrcElement"];let y=(()=>{class e{constructor(e){this.renderer=e,this.colordark="",this.colorlight="",this.level="",this.hidetitle=!1,this.size=0,this.usesvg=!1,this.allowEmptyString=!1,this.qrdata="",this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.scale=4,this.width=10,""!==this.colordark&&console.warn("[angularx-qrcode] colordark is deprecated, use colorDark."),""!==this.colorlight&&console.warn("[angularx-qrcode] colorlight is deprecated, use colorLight."),""!==this.level&&console.warn("[angularx-qrcode] level is deprecated, use errorCorrectionLevel."),!1!==this.hidetitle&&console.warn("[angularx-qrcode] hidetitle is deprecated."),0!==this.size&&console.warn("[angularx-qrcode] size is deprecated, use `width`. Defaults to 10."),!1!==this.usesvg&&console.warn("[angularx-qrcode] usesvg is deprecated, use [elementType]=\"'svg'\".")}ngOnChanges(){this.createQRCode()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(void 0===e||""===e||"null"===e||null===e):!(void 0===e)}toDataURL(){return new Promise((e,t)=>{Object(_.toDataURL)(this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},(i,s)=>{i?t(i):e(s)})})}toCanvas(e){return new Promise((t,i)=>{Object(_.toCanvas)(e,this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},e=>{e?i(e):t("success")})})}toSVG(){return new Promise((e,t)=>{Object(_.toString)(this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,type:"svg",version:this.version,width:this.width},(i,s)=>{i?t(i):e(s)})})}renderElement(e){for(const t of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,t);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):void 0!==this.version&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error('[angularx-qrcode] Field `qrdata` is empty, set`allowEmptyString="true"` to overwrite this behaviour.');let e;switch(this.elementType){case"canvas":e=this.renderer.createElement("canvas"),this.toCanvas(e).then(()=>{this.renderElement(e)}).catch(e=>{console.error("[angularx-qrcode] canvas error: ",e)});break;case"svg":e=this.renderer.createElement("div"),this.toSVG().then(t=>{this.renderer.setProperty(e,"innerHTML",t);const i=e.firstChild;this.renderer.setAttribute(i,"height",`${this.width}`),this.renderer.setAttribute(i,"width",`${this.width}`),this.renderElement(i)}).catch(e=>{console.error("[angularx-qrcode] svg error: ",e)});break;case"url":case"img":default:e=this.renderer.createElement("img"),this.toDataURL().then(t=>{e.setAttribute("src",t),this.renderElement(e)}).catch(e=>{console.error("[angularx-qrcode] img/url error: ",e)})}}catch(e){console.error("[angularx-qrcode] Error generating QR Code: ",e.message)}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.M))},e.\u0275cmp=c.Xb({type:e,selectors:[["qrcode"]],viewQuery:function(e,t){if(1&e&&c.md(w,3),2&e){let e;c.Qc(e=c.sc())&&(t.qrcElement=e.first)}},inputs:{colordark:"colordark",colorlight:"colorlight",level:"level",hidetitle:"hidetitle",size:"size",usesvg:"usesvg",allowEmptyString:"allowEmptyString",qrdata:"qrdata",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",margin:"margin",scale:"scale",width:"width",version:"version"},features:[c.Kb],decls:2,vars:2,consts:[["qrcElement",""]],template:function(e,t){1&e&&c.ec(0,"div",null,0),2&e&&c.Qb(t.cssClass)},encapsulation:2,changeDetection:0}),e})(),C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.bc({type:e}),e.\u0275inj=c.ac({providers:[]}),e})();var S=i("Y9qQ");let T=(()=>{class e{constructor(e,t){this.backendService=e,this.toggleService=t}createAccount(e){const t=this.buildPayload(e);return this.backendService.request("/learn/v1/webinar/adobeconnect/accounts","POST",t)}editAccount(e){const t=this.buildPayload(e);return this.backendService.request(`/learn/v1/webinar/adobeconnect/accounts/${e.get("id").value}`,"PUT",t)}fetchAccounts(e){const t=Object.assign(Object.assign({},e),{providers:["adobeconnectv2meeting","adobeconnectv2seminar"]});return this.backendService.request("/learn/v1/webinar/adobeconnect/accounts","GET",t)}deleteAccount(e){return this.backendService.request(`/learn/v1/webinar/adobeconnect/accounts/${e}`,"DELETE")}buildPayload(e){return{name:e.controls.name.value,tool:"seminar"===e.controls.sessionType.value?"adobeconnectv2seminar":"adobeconnectv2meeting",additional_info:e.controls.description.value,server_url:e.controls.serverUrl.value,admin_username:e.controls.username.value,admin_password:e.controls.password.value,session_type:e.controls.sessionType.value,max_sessions:0|e.controls.sessionLimitAccount.value,max_sessions_per_course:0|e.controls.sessionLimitCourses.value,max_concurrent_sessions:0|e.controls.sessionLimitConcurrentRooms.value,tool_mapping_field_lms:e.controls.attendanceTrackingCheckbox.value?e.controls.doceboField.value:""}}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a),c.nc(u.g))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var k=i("lfsz");let I=(()=>{class e{constructor(e,t){this.router=e,this.toggleService=t,this.platform=k.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("AdobeConnectV2App")||(this.router.navigate(["/not-found"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h),c.nc(u.g))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var x=i("d+dA");let D=(()=>{class e{constructor(e){this.router=e,this.platform=x.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("AdobeConnectV2App")||(this.router.navigate(["/unauthorized"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var O=i("35q8"),E=i("gvJE");let P=(()=>{class e{constructor(){this.titleBarSubtitle=E.a.t("webinar","Manage your Adobe Connect account properties"),this.propertiesTabTitle=E.a.t("standard","Properties"),this.generalTabTitle=E.a.t("standard","General"),this.detailsTabTitle=E.a.t("standard","Details"),this.generalVerticalTabTitle=E.a.t("app7020","General Settings"),this.generalVerticalTabDescription=E.a.t("webinar","Set the general information for this account"),this.detailsVerticalTabDescription=E.a.t("webinar","Set the details for this account"),this.templatesListTabTitle=E.a.t("webinar","Templates"),this.roomsListTabTitle=E.a.t("webinar","Rooms"),this.foldersListTabTitle=E.a.t("organization","Folders"),this.chooseAction=E.a.t("standard","Choose action"),this.successMessage=E.a.t("app7020","Your changes has been successfully saved"),this.errorMessage=E.a.t("standard","Something went wrong. Please, try again later!"),this.confirmButton=E.a.t("standard","Save Changes"),this.noResultsTitle=E.a.t("standard","Whoops, No results found!"),this.noResultsSubtitle=E.a.t("myteam","Please try again using different search/filters criteria."),this.loadingMessage=e=>{switch(e){case"template":return this.retrievingTemplates;case"folder":return this.retrievingFolders;case"room":return this.retrievingRooms}},this.successMessagePanelUi=e=>E.a.t("webinar","{source} has been assigned successfully",{source:e}),this.retrievingTemplates=E.a.t("standard","We are retrieving templates"),this.retrievingFolders=E.a.t("standard","We are retrieving folders"),this.retrievingRooms=E.a.t("standard","We are retrieving rooms"),this.waitMessage=E.a.t("app7020","this operation may take few minutes."),this.maxNumberExceededMessageTitle=E.a.t("gamification","Maximum number exceeded"),this.maxNumberExceededMessage=E.a.t("webinar","The limit of the items you can select (20) was exceeded. In order to continue, please unselect a few items."),this.searchTitle=E.a.t("standard","Search"),this.searchPlaceHolder=E.a.t("standard","Search..."),this.items=E.a.t("standard","items"),this.cancel=E.a.t("app7020","Cancel"),this.unassign=E.a.t("app7020","Unassign"),this.requiredMarkerLabel=E.a.t("standard","(Required)"),this.optionsLabel=E.a.t("admin","Options"),this.sessionTypeLabel=E.a.t("webinar","Session type"),this.templateTabBlankSlateTitle=E.a.t("webinar","No template yet"),this.templateTabBlankSlateSubtitle=E.a.t("webinar","Use the Assign Template button to add a new template"),this.roomTabBlankSlateTitle=E.a.t("webinar","No room yet"),this.roomTabBlankSlateSubtitle=E.a.t("webinar","Use the Assign Room button to add a new room"),this.folderTabBlankSlateTitle=E.a.t("webinar","No folder yet"),this.folderTabBlankSlateSubtitle=E.a.t("webinar","Use the Assign Folder button to add a new folder"),this.templateBlankSlateTitle=E.a.t("webinar","No Templates associated to this Account yet"),this.templateBlankSlateDescription=E.a.t("webinar","Access your Adobe Connect admin account to\nstart associating templates"),this.folderBlankSlateTitle=E.a.t("webinar","No Folders associated to this Account yet"),this.folderBlankSlateDescription=E.a.t("webinar","Access your Adobe Connect admin account to\nstart associating folders"),this.roomBlankSlateTitle=E.a.t("webinar","No Rooms associated to this Account yet"),this.roomBlankSlateDescription=E.a.t("webinar","Access your Adobe Connect admin account to\nstart associating rooms"),this.templateUnassignDialogTitle=E.a.t("webinar","Unassign Template"),this.templateUnassignDialogContent=E.a.t("webinar","Are you sure you want to unassign the selected template?"),this.roomUnassignDialogTitle=E.a.t("webinar","Unassign Room"),this.roomUnassignDialogContent=E.a.t("webinar","Are you sure you want to unassign the selected room?"),this.folderUnassignDialogTitle=E.a.t("webinar","Unassign Folder"),this.folderUnassignDialogContent=E.a.t("webinar","Are you sure you want to unassign the selected folder?"),this.massiveActionUnassignAll=E.a.t("webinar","Unassign All"),this.foldersRightPanelTitle=E.a.t("webinar","Assign Folder"),this.foldersRightPanelDescription=E.a.t("webinar","Select the folders you want to assign to the account"),this.templatesRightPanelTitle=E.a.t("webinar","Assign Template"),this.templatesRightPanelDescription=E.a.t("webinar","Select the templates you want to assign to the account"),this.roomsRightPanelTitle=E.a.t("webinar","Assign Room"),this.roomsRightPanelDescription=E.a.t("webinar","Select the rooms you want to assign to the account"),this.defaultTitle=E.a.t("standard","Default Title"),this.defaultDescription=E.a.t("standard","Default Description"),this.modalChangesTitle=E.a.t("standard","You're leaving without saving changes"),this.modalChangesMessage=E.a.t("standard","Do you want to save changes before leaving the page? Otherwise, all unsaved changes will be lost."),this.saveChanges=E.a.t("app7020","Save Changes"),this.discardChanges=E.a.t("standard","Discard changes"),this.attendanceTrackingTitle=E.a.t("app7020","Attendance Tracking"),this.attendanceTrackingSubtitle=E.a.t("app7020","Track the user attendance and block access to the guest account"),this.attendanceTrackingCheckboxTitle=E.a.t("app7020","Enable Attendance Tracking"),this.attendanceTrackingCheckboxDesc=E.a.t("app7020","Enabling the tracking feature requires you to map the Docebo field to the corresponding one within Adobe Connect")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=i("+sIT");let A=(()=>{class e{constructor(e,t,i){this.pageService=e,this.adobeConnectAccountEditDictionary=t,this.docLayoutService=i}canDeactivate(e){return new Promise(t=>{e.propertiesTab.formGroup.dirty?this.pageService.dialog.open({id:1,width:465,height:200,title:this.adobeConnectAccountEditDictionary.modalChangesTitle,content:this.adobeConnectAccountEditDictionary.modalChangesMessage,actions:[{type:"cancel",properties:{text:this.adobeConnectAccountEditDictionary.cancel},handler:e=>{e.close(),t(!1)}},{type:"normal",properties:{text:this.adobeConnectAccountEditDictionary.saveChanges},handler:i=>{e.propertiesTab.saveChanges().then(i=>{this.docLayoutService.toast.showToast({message:i,type:"success"}),e.propertiesTab.formGroup.markAsPristine(),t(!0)}).catch(e=>{this.docLayoutService.toast.showToast({message:e,type:"error"}),t(!1)}),i.close()}},{type:"cancel",properties:{text:this.adobeConnectAccountEditDictionary.discardChanges},handler:i=>{e.propertiesTab.resetForm(),i.close(),t(!0)}}]}):setTimeout(()=>{t(!0)})})}}return e.\u0275fac=function(t){return new(t||e)(c.nc(O.a),c.nc(P),c.nc(M.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),L=(()=>{class e{constructor(e){this.actions=e}}return e.\u0275fac=function(t){return new(t||e)(c.nc(f.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var j=function(e){return e.AccountSuccessfullyCreated="[AdobeConnect] Account Successfully Created",e.AccountSuccessfullyEdited="[AdobeConnect] Account Successfully Edited",e.AccountSuccessfullyDeleted="[AdobeConnect] Account Successfully Deleted",e}({});class F{constructor(e){this.payload=e,this.type=j.AccountSuccessfullyCreated}}class R{constructor(e){this.payload=e,this.type=j.AccountSuccessfullyDeleted}}const N={accounts:[],lastCreatedAccount:null,lastEditedAccount:null,status:"AdobeConnectInitialState",paring:null,lastDeletedAccountPartial:null,windowHasFocus:!1};function U(e=N,t){switch(t.type){case j.AccountSuccessfullyCreated:return Object.assign(Object.assign({},e),{status:"AccountCreated",lastCreatedAccount:t.payload});case j.AccountSuccessfullyEdited:return Object.assign(Object.assign({},e),{status:"AccountEdited",lastEditedAccount:t.payload});case j.AccountSuccessfullyDeleted:return Object.assign(Object.assign({},e),{status:"AccountDeleted",lastDeletedAccountPartial:t.payload});default:return e}}let q=(()=>{class e{constructor(e){this.backendService=e}createAccount(e){const t=this.buildPayload(e);return this.backendService.request("/learn/v1/webinar/gotomeeting/accounts","POST",t)}editAccount(e){const t=this.buildPayload(e);return this.backendService.request(`/learn/v1/webinar/gotomeeting/accounts/${e.get("id").value}`,"PUT",t)}fetchAccounts(e){const t=Object.assign(Object.assign({},e),{providers:["gotomeetingv2meeting","gotomeetingv2webinar","gotomeetingv2training"]});return this.backendService.request("/learn/v1/webinar/gotomeeting/accounts","GET",t)}unpairAccount(e){return this.backendService.request(`/learn/v1/webinar/gotomeeting/accounts/${e}/pair`,"DELETE")}deleteAccount(e){return this.backendService.request(`/learn/v1/webinar/gotomeeting/accounts/${e}`,"DELETE")}buildPayload(e){const t="meeting"===e.get("sessionType").value?"gotomeetingv2meeting":"webinar"===e.get("sessionType").value?"gotomeetingv2webinar":"gotomeetingv2training";return{name:e.get("accountName").value,tool:t,additional_info:e.get("accountDescription").value,app_key:e.get("clientId").value,app_secret:e.get("clientSecret").value,session_type:t,max_sessions:0|e.get("sessionLimitAccount").value,max_sessions_per_course:0|e.get("sessionLimitCourses").value,max_concurrent_sessions:0|e.get("sessionLimitConcurrentRooms").value}}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})(),z=(()=>{class e{constructor(e){this.router=e,this.platform=x.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("GotomeetingV2App")||(this.router.navigate(["/unauthorized"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var V=function(e){return e.AccountSuccessfullyCreated="[GoToMeeting] Account Successfully Created",e.AccountSuccessfullyEdited="[GoToMeeting] Account Successfully Edited",e.AccountSuccessfullyPaired="[GoToMeeting] Account Successfully Paired",e.AccountSuccessfullyDeleted="[GoToMeeting] Account Successfully Deleted",e.PairingAccountRequested="[GoToMeeting] Pairing Account Requested",e.PairingAccountAcquired="[GoToMeeting] Pairing Account Acquired",e.PairingAccountCompleted="[GoToMeeting] Pairing Account Completed",e.PairingAccountAborted="[GoToMeeting] Pairing Account Aborted",e}({});class B{constructor(e){this.payload=e,this.type=V.AccountSuccessfullyCreated}}class G{constructor(e){this.payload=e,this.type=V.AccountSuccessfullyEdited}}class H{constructor(e){this.payload=e,this.type=V.PairingAccountRequested}}class Y{constructor(e){this.payload=e,this.type=V.PairingAccountAcquired}}class W{constructor(){this.type=V.PairingAccountCompleted}}class Q{constructor(){this.type=V.PairingAccountAborted}}class K{constructor(e){this.payload=e,this.type=V.AccountSuccessfullyDeleted}}const X={accounts:[],lastCreatedAccount:null,lastRequestedPairedAccount:null,lastEditedAccount:null,status:"GoToMeetingInitialState",pairing:null,lastDeletedAccountPartial:null,windowHasFocus:!1};function J(e=X,t){switch(t.type){case V.AccountSuccessfullyCreated:return Object.assign(Object.assign({},e),{status:"AccountCreated",lastCreatedAccount:t.payload,pairing:null});case V.AccountSuccessfullyPaired:return Object.assign(Object.assign({},e),{status:"AccountSuccessfullyPaired",lastRequestedPairedAccount:t.payload,pairing:null});case V.AccountSuccessfullyEdited:return Object.assign(Object.assign({},e),{status:"AccountEdited",lastEditedAccount:t.payload,pairing:null});case V.AccountSuccessfullyDeleted:return Object.assign(Object.assign({},e),{status:"AccountDeleted",lastDeletedAccountPartial:t.payload,pairing:null});case V.PairingAccountRequested:return Object.assign(Object.assign({},e),{status:"PairingAccountRequested",lastRequestedPairedAccount:t.payload,lastEditedAccount:null,pairing:null});case V.PairingAccountAcquired:return Object.assign(Object.assign({},e),{status:"PairingAccountAcquired",lastRequestedPairedAccount:null,pairing:Object.assign({},t.payload)});case V.PairingAccountCompleted:return Object.assign(Object.assign({},X),{status:"PairingAccountCompleted"});case V.PairingAccountAborted:return Object.assign(Object.assign({},X),{status:"PairingAccountAborted"});default:return e}}let Z=(()=>{class e{constructor(e){this.router=e}canActivate(e){let t=e.children[0].params,i="learning_plan"==e.url[0].path?"lp":"course";return!(e.queryParams.hash&&e.queryParams.hash.length>0&&o.a.getInstance().isValid()&&(this.router.navigate(["/learn/"+i+"/"+t.id+"/"+encodeURIComponent(t.title)]),1))}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var ee=i("IzEk"),te=i("3t6O"),ie=i("CI6S");let se=(()=>{class e{constructor(e,t,i){this.router=e,this.store=t,this._toggleService=i}canActivate(e){return!!this._toggleService.isOn(u.f.TOGGLE_NEW_COURSE_EXPERIENCE)||this._hasOldSignatureConditions(e)}_hasOldSignatureConditions(e){const{params:t}=e;return t.slug!==String(te.a.SIGN)||!t.id_lo.match(/^(sign_)[\d]+$/)||(this.store.pipe(Object(v.p)(ie.d),Object(ee.a)(1)).subscribe(e=>{this.router.navigate([`/learn/course/${t.id}/${e.slug_name}/sign`])}),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h),c.nc(v.d),c.nc(u.g))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var ne=i("DV2z"),ae=i("Lzvv");let oe=(()=>{class e{constructor(e,t,i){this._backendService=e,this.externalPluginService=t,this.bootstrapService=i}lmsLogout(){this._backendService.logout().subscribe(()=>{x.b.getInstance().isPluginActive("ZendeskApp")&&(x.b.getInstance().getPluginSettings("ZendeskApp").show_to_non_authenticated||this.externalPluginService.zendeskWidgetOptions("hide"))},e=>{this.bootstrapService.removeCustomStyles("multidomain_styles")},()=>{this.bootstrapService.removeCustomStyles("multidomain_styles")})}canActivate(e){return x.b.getInstance().isPluginActive("OpenIDConnectApp")?this._backendService.openidConnectLogout().subscribe(e=>{e&&e.data&&e.data.idp_logout_url&&(window.location.href=e.data.idp_logout_url)},()=>{this.lmsLogout()},()=>{this.lmsLogout()}):this.lmsLogout(),!0}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a),c.nc(ne.a),c.nc(ae.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var re=i("nY0b"),ce=i("cSwE"),le=i("hJ4h"),de=i("ah4f"),ue=i("MqiY"),he=i("mqFx"),pe=i("3Hn1"),me=i("0YBW"),ge=i("rwdK"),be=i("S/1/"),fe=i("wSih"),ve=i("+uA4"),_e=i("sCVX"),we=i("8SnQ"),ye=i("T8dX"),Ce=i("S0b3"),Se=i("g5rY"),Te=i("1W8S"),ke=i("1frc"),Ie=i("rLbr"),xe=function(e){return e.TEMPLATE="template",e.FOLDER="folder",e.ROOM="room",e}({}),De=i("hQwR"),Oe=i("jt8V"),Ee=i("VkN6"),Pe=i("2Vo4");class Me{constructor(e){this.dictionary=new P,this.massiveActions=[{action:()=>this.editListComponent.openUnassignDialog(this.editListComponent.selectedRows,this.editListComponent.fullTableData),id:"delete",title:this.dictionary.massiveActionUnassignAll,active:!1,key:"unassign-all",disabled:!1,type:De.a.DELETE}],this.assignmentListDataSource={mode:Oe.a.push,viewOptionLabel:this.dictionary.searchTitle,filters:new Pe.a([{title:this.dictionary.searchTitle,code:"search",type:Oe.d.free_search_filter,params:{placeholder:this.dictionary.searchPlaceHolder}}]),appliedFiltersNumber:new Pe.a(0),displayedItemsNumber:new Pe.a(0),viewOptions:new Pe.a([]),disableViewOptions:!0,elementLabels:{singular:this.dictionary.items,plural:this.dictionary.items}},this.tableColumns={name:{columnName:"name",sortable:!1,headerLabel:"Name",alignment:Ee.a.LEFT},assignment_date:{columnName:"assignment_date",sortable:!1,headerLabel:"Assignment Date",alignment:Ee.a.RIGHT},ellipsis:{ellipsisActions:[{id:"delete",title:"Unassign",active:!0,action:e=>{this.editListComponent.openUnassignDialog([e],this.editListComponent.tableData)}}],alignment:Ee.a.CENTER}},this.unassignDialogActions=[{id:"cancel",type:"neutral",label:this.dictionary.cancel,slot:"end"},{id:"unassign",type:"negative",label:this.dictionary.unassign,slot:"end"}],this.unassignTemplateDialogOptions={title:this.dictionary.templateUnassignDialogTitle,content:this.dictionary.templateUnassignDialogContent,actions:this.unassignDialogActions},this.unassignRoomDialogOptions={title:this.dictionary.roomUnassignDialogTitle,content:this.dictionary.roomUnassignDialogContent,actions:this.unassignDialogActions},this.unassignFolderDialogOptions={title:this.dictionary.folderUnassignDialogTitle,content:this.dictionary.folderUnassignDialogContent,actions:this.unassignDialogActions},this.editListComponent=e}getUnassignDialogOptions(e){switch(e){case xe.TEMPLATE:return this.unassignTemplateDialogOptions;case xe.FOLDER:return this.unassignFolderDialogOptions;case xe.ROOM:return this.unassignRoomDialogOptions}}}var Ae=i("ofXK"),Le=i("lNbR"),je=i("OFqD"),Fe=i("alYl"),Re=i("9FoH"),Ne=i("mZNx"),Ue=i("NDY9"),qe=i("vQfe"),ze=i("IsFk");function Ve(e,t){if(1&e&&(c.fd(0),c.wc(1,"t")),2&e){const e=c.vc(3);c.gd(c.xc(1,1,e.tableColumns.assignment_date.headerLabel))}}function Be(e,t){1&e&&(c.fd(0),c.wc(1,"HDate")),2&e&&c.hd(" ",c.xc(1,1,t.item.assignment_date)," ")}function Ge(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-table",10),c.rc("selectRows",function(t){return c.Uc(e),c.vc(2).onSelectRows(t)}),c.ec(1,"hyd-table-column-text",11),c.jc(2,"hyd-table-column",12),c.jc(3,"hyd-table-column-header"),c.dd(4,Ve,2,3,"ng-template"),c.ic(),c.jc(5,"hyd-table-column-cell"),c.dd(6,Be,2,3,"ng-template"),c.ic(),c.ic(),c.ec(7,"hyd-table-column-ellipsis",13),c.ic()}if(2&e){const e=c.vc(2);c.Dc("data",e.tableData)("selection",e.currentSelections)("selectable",!0),c.Mb(1),c.Dc("headerLabel",e.tableColumns.name.headerLabel)("fieldName","name")("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.assignment_date.columnName)("sortable",e.tableColumns.assignment_date.sortable),c.Mb(5),c.Dc("columnName","ellipsis")("actions",e.tableColumns.ellipsis.ellipsisActions)("orientation","top-right")}}function $e(e,t){if(1&e){const e=c.kc();c.jc(0,"massive-actions-bar",14),c.rc("unselectAll$",function(){return c.Uc(e),c.vc(2).unselectEverything()})("selectAll$",function(){return c.Uc(e),c.vc(2).selectEverything()}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("title",e.dictionary.massiveActionUnassignAll)("type","inline-btn")("counter",e.selectedRows.length)("orientation","top-right")("actions",e.editListConstants.massiveActions)("actionTitle",e.dictionary.chooseAction)}}function He(e,t){if(1&e&&(c.ec(0,"ui-blank-slate",15),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc(2);c.Dc("illustrationName","no-item-found")("illustrationSize",e.emptyTabObject.illustrationSize)("title",c.xc(1,4,e.dictionary.noResultsTitle))("description",c.xc(2,6,e.dictionary.noResultsSubtitle))}}function Ye(e,t){if(1&e){const e=c.kc();c.jc(0,"data-browser",2),c.rc("onFiltersUpdate",function(t){return c.Uc(e),c.vc().onFiltersUpdate(t)}),c.jc(1,"div",3),c.dd(2,Ge,8,12,"hyd-table",4),c.ic(),c.jc(3,"div",5),c.ec(4,"hyd-paginator",6),c.jc(5,"div",7),c.dd(6,$e,1,6,"massive-actions-bar",8),c.ic(),c.ic(),c.dd(7,He,3,8,"ui-blank-slate",9),c.ic()}if(2&e){const e=c.vc();c.Dc("dataBrowserSource",e.assignmentListDataSource),c.Mb(1),c.Dc("hidden",!1),c.Mb(1),c.Dc("ngIf",e.tableData.length>0),c.Mb(2),c.Dc("pageIndex",0)("pageSize",20)("showPageSizeDropdown",!1)("pageSizeAutoAllowed",!1)("length",e.fullTableData.length),c.Mb(2),c.Dc("ngIf",e.selectedRows.length>0),c.Mb(1),c.Dc("ngIf",0===e.tableData.length&&e.isFilterSearchOn)}}function We(e,t){if(1&e&&(c.ec(0,"ui-blank-slate",16),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc();c.Dc("illustrationName",e.emptyTabObject.illustrationName)("illustrationSize",e.emptyTabObject.illustrationSize)("title",c.xc(1,4,e.emptyTabObject.blankSlateTitle))("description",c.xc(2,6,e.emptyTabObject.blankSlateDescription))}}let Qe=(()=>{class e{constructor(e,t,i){this.dictionary=e,this.docService=t,this.backendService=i,this.tableData=[],this.fullTableData=[],this.selectedRows=[],this.isFilterSearchOn=!1,this.currentSelections={selectedAll:!1,selectedRows:[]}}ngOnInit(){this.initEmptyTabObject(this.recordsType),this.initTableData(this.recordsType),this.editListConstants=new Me(this),this.assignmentListDataSource=this.editListConstants.assignmentListDataSource,this.tableColumns=this.editListConstants.tableColumns,this.docService.page.activateFullHeightMode()}openUnassignDialog(e,[...t]){this.docService.dialog.showCommonDialog(this.editListConstants.getUnassignDialogOptions(this.recordsType)).subscribe(i=>{if(i.actionSuccess.next(!0),"unassign"===i.actionID){const i=e.map(e=>e.sco_id);this.unassignAssignment(i,t)}})}unassignAssignment(e,t){t=t.filter(t=>!e.includes(t.sco_id));const i=this.buildApiPayload(t,this.recordsType);this.updateAssignments(i).then(()=>{this.tableData=t,this.fullTableData=t,this.currentSelections={selectedAll:!1,selectedRows:[]},this.selectedRows=[],this.docService.toast.showToast({type:"success",message:this.dictionary.successMessage})},()=>{this.docService.toast.showToast({type:"error",message:this.dictionary.errorMessage})})}onFiltersUpdate(e){e.search&&e.search.length>=3?(this.isFilterSearchOn=!0,this.tableData=this.fullTableData.filter(t=>t.name.toLowerCase().includes(e.search.toLowerCase()))):(this.isFilterSearchOn=!1,this.tableData=[...this.fullTableData])}onSelectRows(e){e.selectedAll&&!this.isFilterSearchOn?this.selectedRows=[...this.fullTableData]:e.selectedAll&&this.isFilterSearchOn?this.currentSelections={selectedAll:!1,selectedRows:this.selectedRows}:this.selectedRows=e.selectedRows}selectEverything(){this.currentSelections.selectedAll=!0,this.selectedRows=[...this.fullTableData]}unselectEverything(){this.currentSelections.selectedRows=[],this.currentSelections.selectedAll=!1,this.tableData=[...this.tableData],this.selectedRows=[]}updateAssignments(e){return new Promise((t,i)=>this.backendService.request("/learn/v1/webinar/adobeconnect/accounts/assignments/"+this.adobeAccount.id,Ie.a.PUT,e).subscribe(()=>{t(!0)},()=>{i(!1)}))}buildApiPayload(e,t){return{items:[{assignment_type:t,assignments:e}]}}initTableData(e){var t,i,s;switch(e){case xe.TEMPLATE:this.tableData=null!==(t=this.adobeAccount.assignedTemplates)&&void 0!==t?t:[];break;case xe.FOLDER:this.tableData=null!==(i=this.adobeAccount.assignedFolders)&&void 0!==i?i:[];break;case xe.ROOM:this.tableData=null!==(s=this.adobeAccount.assignedRooms)&&void 0!==s?s:[]}this.fullTableData=[...this.tableData]}initEmptyTabObject(e){switch(e){case xe.TEMPLATE:this.emptyTabObject={blankSlateTitle:this.dictionary.templateTabBlankSlateTitle,blankSlateDescription:this.dictionary.templateTabBlankSlateSubtitle,illustrationName:"different-content-files",illustrationSize:b.Ib.MD};break;case xe.FOLDER:this.emptyTabObject={blankSlateTitle:this.dictionary.folderTabBlankSlateTitle,blankSlateDescription:this.dictionary.folderTabBlankSlateSubtitle,illustrationName:"different-content-files",illustrationSize:b.Ib.MD};break;case xe.ROOM:this.emptyTabObject={blankSlateTitle:this.dictionary.roomTabBlankSlateTitle,blankSlateDescription:this.dictionary.roomTabBlankSlateSubtitle,illustrationName:"different-content-files",illustrationSize:b.Ib.MD}}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(P),c.dc(M.a),c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["her-adobeconnect-account-edit-list-tab"]],inputs:{recordsType:"recordsType",adobeAccount:"adobeAccount"},features:[c.Lb([P])],decls:2,vars:2,consts:[["class","data-browser",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","list-tab-blankslate",3,"illustrationName","illustrationSize","title","description",4,"ngIf"],[1,"data-browser",3,"dataBrowserSource","onFiltersUpdate"],[1,"hyd-table-wrapper",3,"hidden"],["class","hyd-table-container hyd-table",3,"data","selection","selectable","selectRows",4,"ngIf"],[1,"assignments-list-tab-footer"],[3,"pageIndex","pageSize","showPageSizeDropdown","pageSizeAutoAllowed","length"],[1,"massive-actions-bar-wrapper"],[3,"title","type","counter","orientation","actions","actionTitle","unselectAll$","selectAll$",4,"ngIf"],[3,"illustrationName","illustrationSize","title","description",4,"ngIf"],[1,"hyd-table-container","hyd-table",3,"data","selection","selectable","selectRows"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnName","sortable"],[3,"columnName","actions","orientation"],[3,"title","type","counter","orientation","actions","actionTitle","unselectAll$","selectAll$"],[3,"illustrationName","illustrationSize","title","description"],[1,"list-tab-blankslate",3,"illustrationName","illustrationSize","title","description"]],template:function(e,t){1&e&&(c.dd(0,Ye,8,10,"data-browser",0),c.dd(1,We,3,8,"ui-blank-slate",1)),2&e&&(c.Dc("ngIf",t.fullTableData.length>0),c.Mb(1),c.Dc("ngIf",0===t.fullTableData.length))},directives:[Ae.p,Le.a,je.b,Fe.a,Re.a,Ne.c,Ne.d,Ne.b,Ue.a,qe.a,b.o],pipes:[E.b,ze.a],styles:[".list-tab-blankslate ui-illustration{margin-top:var(--hyd-spacing-xl)}.hyd-table-wrapper{padding-bottom:6rem}.assignments-list-tab-footer{position:fixed;bottom:1px;width:100%}"],encapsulation:2}),e})();var Ke=i("3Pt+"),Xe=i("Z/On"),Je=i("/76g");const Ze=e=>t=>("string"==typeof t.value&&""==t.value||null==t.value)&&t.parent&&t.parent.controls[e].value?{thisIsRequiredField:"This is mandatory field"}:null,et=(e,t,i)=>s=>s.value>e?{notMoreThan:i.instant("Max limit is {max} {things}",{category:"standard",max:e,things:t})}:null;let tt=(()=>{class e{constructor(){this.tableColumns={name:{headerLabel:Je.a.t("standard","Name"),fieldName:"name",columnName:"name",sortable:!1}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();const it={mode:Oe.a.push,filters:new Pe.a([{title:Je.a.t("standard","Search"),code:"search",type:Oe.d.free_search_filter,params:{placeholder:Je.a.t("standard","Search...")}}]),appliedFiltersNumber:new Pe.a(0),displayedItemsNumber:new Pe.a(0),viewOptions:new Pe.a([]),viewOptionLabel:Je.a.t("standard","viewOptionLabel"),disableViewOptions:!0,elementLabels:{singular:Je.a.t("standard","items"),plural:Je.a.t("standard","items")}};var st=i("LvDl"),nt=i.n(st),at=i("19uv");function ot(e,t){if(1&e&&(c.jc(0,"div",4),c.ec(1,"ui-spinner",5),c.jc(2,"div",6),c.fd(3),c.wc(4,"t"),c.ec(5,"br"),c.fd(6),c.wc(7,"t"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("size","md"),c.Mb(2),c.hd(" ",c.xc(4,3,e.dictionary.loadingMessage(e.recordType)),""),c.Mb(3),c.hd(" ",c.xc(7,5,e.dictionary.waitMessage)," ")}}function rt(e,t){if(1&e&&(c.jc(0,"div",12),c.jc(1,"div",13),c.ec(2,"icon",14),c.ic(),c.jc(3,"div",15),c.jc(4,"span",16),c.fd(5),c.wc(6,"t"),c.ic(),c.ec(7,"br"),c.jc(8,"span",17),c.fd(9),c.wc(10,"t"),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(5),c.hd(" ",c.xc(6,2,e.dictionary.maxNumberExceededMessageTitle)," "),c.Mb(4),c.hd(" ",c.xc(10,4,e.dictionary.maxNumberExceededMessage)," ")}}function ct(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-table",18),c.rc("selectRows",function(t){return c.Uc(e),c.vc(2).onSelectRows(t)}),c.ec(1,"hyd-table-column-text",19),c.ic()}if(2&e){const e=c.vc(2);c.Dc("data",e.tableData)("selectable",!0)("selection",e.defaultSelection)("rowsComparisonFunction",e.assignmentsComparisonFn),c.Mb(1),c.Dc("headerLabel",e.tableHelper.tableColumns.name.headerLabel)("fieldName","name")("columnName",e.tableHelper.tableColumns.name.columnName)("sortable",e.tableHelper.tableColumns.name.sortable)}}const lt=function(e){return{"max-limit-reached":e}};function dt(e,t){if(1&e){const e=c.kc();c.jc(0,"data-browser",7),c.rc("onFiltersUpdate",function(t){return c.Uc(e),c.vc().onFiltersUpdate(t)}),c.dd(1,rt,11,6,"div",8),c.jc(2,"div",9),c.dd(3,ct,2,8,"hyd-table",10),c.ic(),c.ec(4,"hyd-selection-count",11),c.ic()}if(2&e){const e=c.vc();c.Dc("dataBrowserSource",e.assignmentListDataSource),c.Mb(1),c.Dc("ngIf",e.selectedRows.length>e.maxNumber),c.Mb(1),c.Dc("hidden",!1)("ngClass",c.Ic(8,lt,e.selectedRows.length>e.maxNumber)),c.Mb(1),c.Dc("ngIf",e.tableData.length>0),c.Mb(1),c.Dc("currentCount",e.selectedRows.length)("totalCount",e.maxNumber)("showMaxLimit",!0)}}function ut(e,t){if(1&e&&(c.ec(0,"ui-blank-slate",20),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc();c.Dc("illustrationName","no-item-found")("illustrationSize",e.emptyTabObject.illustrationSize)("title",c.xc(1,4,e.dictionary.noResultsTitle))("description",c.xc(2,6,e.dictionary.noResultsSubtitle))}}function ht(e,t){if(1&e&&(c.ec(0,"ui-blank-slate",21),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc();c.Dc("illustrationName",e.emptyTabObject.illustrationName)("illustrationSize",e.emptyTabObject.illustrationSize)("title",c.xc(1,4,e.emptyTabObject.blankSlateTitle))("description",c.xc(2,6,e.emptyTabObject.blankSlateDescription))}}let pt=(()=>{class e{constructor(e,t,i,s,n){this.dictionary=e,this.backendService=t,this.tableHelper=i,this.changeDetector=s,this.docService=n,this.preSelectedRows=[],this.tablePageChange=new c.q,this.selectedRows=[],this.maxNumber=20,this.tableData=[],this.fullTableData=[],this.assignmentListDataSource=it,this.isFilterSearchOn=!1,this.tablePaginator={pageIndex:0,pageSize:20,length:0,pageSizeAutoAllowed:!1,showPageSizeDropdown:!1},this.endpointUrl="/learn/v1/adobe-connect/forwardCommand"}ngOnInit(){this.isLoaded=!1,this.isSearch=!1,this.initEmptyTabObject(this.recordType)}ngAfterViewInit(){this.retrieveAdobeAccountRecords({action:this.action,identifier:"self",resource:this.sessionType,account_id:this.adobeAccountId}).then(e=>{e.data?this.parseData(e.data):(this.docService.toast.showToast({message:this.dictionary.errorMessage,type:"error"}),this.isLoaded=!0)})}onTablePageChange(e){this.tablePaginator.pageSize=e.pageSize,this.tablePaginator.pageIndex=e.pageIndex,this.tablePageChange.emit(e)}onFiltersUpdate(e){e.search&&e.search.length>=3?(this.isFilterSearchOn=!0,this.tableData=this.fullTableData.filter(t=>t.name.toLowerCase().includes(e.search.toLowerCase())),this.defaultSelectionBeforeFilter=nt.a.cloneDeep(this.defaultSelection)):(this.isFilterSearchOn=!1,this.tableData=[...this.fullTableData])}onSelectRows(e){e.selectedAll&&!this.isFilterSearchOn?this.selectedRows=[...this.fullTableData]:e.selectedAll&&this.isFilterSearchOn?(1!==this.tableData.length||this.isStillPresentOnAdobe(this.tableData[0].sco_id,this.defaultSelectionBeforeFilter.selectedRows)||(this.defaultSelectionBeforeFilter.selectedRows.push(this.tableData[0]),this.selectedRows=this.defaultSelectionBeforeFilter.selectedRows),this.defaultSelection={selectedAll:!1,selectedRows:this.selectedRows}):this.selectedRows=e.selectedRows,this.selectedRows.length>this.maxNumber?mt.setConfirmButtonDisabled(!0):(mt.setConfirmButtonDisabled(!1),this.buildItems(this.selectedRows))}buildItems(e){switch(this.action){case"templates":mt.setTemplateItemsSelected(e);break;case"seminar_rooms":mt.setRoomItemsSelected(e);break;case"shared_folders":mt.setFolderItemsSelected(e)}}assignmentsComparisonFn(e,t){return e.sco_id==t.sco_id}initTabContent(){this.preSelectedRows=this.filterPreSelectedRows(this.preSelectedRows,this.tableData),this.defaultSelection={selectedAll:!1,selectedRows:this.preSelectedRows},this.buildItems(this.defaultSelection.selectedRows),this.fullTableData=[...this.tableData],this.tablePaginator.length=this.fullTableData.length,this.selectedRows.length=this.preSelectedRows.length,this.isLoaded=!0,mt.setConfirmButtonDisabled(0==this.selectedRows.length),this.changeDetector.detectChanges()}retrieveAdobeAccountRecords(e){return new Promise(t=>{this.backendService.request(this.endpointUrl,Ie.a.POST,e).subscribe(e=>{t(e)})})}parseData(e){var t,i,s,n,a;let o=[];switch(Array.isArray(null===(t=e["expanded-scos"])||void 0===t?void 0:t.sco)?o=null!==(s=null===(i=e["expanded-scos"])||void 0===i?void 0:i.sco)&&void 0!==s?s:[]:(null===(n=e["expanded-scos"])||void 0===n?void 0:n.sco)&&o.push(null===(a=e["expanded-scos"])||void 0===a?void 0:a.sco),this.action){case"seminar_rooms":for(let e of o)this.tableData.push({sco_id:e["@attributes"]["sco-id"],name:e["url-path"]+e.name,assignment_date:0});break;case"templates":case"shared_folders":for(let e of o)this.tableData.push({sco_id:e["@attributes"]["sco-id"],name:e.name,assignment_date:0});break;default:this.docService.toast.showToast({message:this.dictionary.errorMessage,type:"error"})}setTimeout(()=>{this.initTabContent()})}initEmptyTabObject(e){switch(e){case xe.TEMPLATE:this.emptyTabObject={blankSlateTitle:this.dictionary.templateBlankSlateTitle,blankSlateDescription:this.dictionary.templateBlankSlateDescription,illustrationName:"different-content-files",illustrationSize:b.Ib.MD};break;case xe.FOLDER:this.emptyTabObject={blankSlateTitle:this.dictionary.folderBlankSlateTitle,blankSlateDescription:this.dictionary.folderBlankSlateDescription,illustrationName:"different-content-files",illustrationSize:b.Ib.MD};break;case xe.ROOM:this.emptyTabObject={blankSlateTitle:this.dictionary.roomBlankSlateTitle,blankSlateDescription:this.dictionary.roomBlankSlateDescription,illustrationName:"different-content-files",illustrationSize:b.Ib.MD}}}filterPreSelectedRows(e,t){let i=[];return e.forEach(e=>{this.isStillPresentOnAdobe(e.sco_id,t)&&i.push(e)}),i}isStillPresentOnAdobe(e,t){let i=!1;return t.forEach(t=>{e===t.sco_id&&(i=!0)}),i}}return e.\u0275fac=function(t){return new(t||e)(c.dc(P),c.dc(S.a),c.dc(tt),c.dc(c.i),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["her-adobeconnect-account-edit-panel"]],inputs:{sessionType:"sessionType",action:"action",adobeAccountId:"adobeAccountId",recordType:"recordType",editTabList:"editTabList",preSelectedRows:"preSelectedRows"},outputs:{tablePageChange:"tablePageChange"},features:[c.Lb([P,tt])],decls:4,vars:4,consts:[["class","spinner",4,"ngIf"],["class","panel-data-browser",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","no-results-blankslates",3,"illustrationName","illustrationSize","title","description",4,"ngIf"],["class","no-associate-blankslates",3,"illustrationName","illustrationSize","title","description",4,"ngIf"],[1,"spinner"],[3,"size"],[1,"spinner-padding-top"],[1,"panel-data-browser",3,"dataBrowserSource","onFiltersUpdate"],["class","widget-setting-form-title bg-red border-grey-light",4,"ngIf"],[1,"hyd-table-wrapper",3,"hidden","ngClass"],["class","hyd-table-container",3,"data","selectable","selection","rowsComparisonFunction","selectRows",4,"ngIf"],[1,"hyd-selection-count","hyd-selection-count-panel",3,"currentCount","totalCount","showMaxLimit"],[1,"widget-setting-form-title","bg-red","border-grey-light"],[1,"warning-icon"],[1,"fa","fa-exclamation-circle"],[1,"subtitle-warning"],[1,"title"],[1,"sub-title-message"],[1,"hyd-table-container",3,"data","selectable","selection","rowsComparisonFunction","selectRows"],[3,"headerLabel","fieldName","columnName","sortable"],[1,"no-results-blankslates",3,"illustrationName","illustrationSize","title","description"],[1,"no-associate-blankslates",3,"illustrationName","illustrationSize","title","description"]],template:function(e,t){1&e&&(c.dd(0,ot,8,7,"div",0),c.dd(1,dt,5,10,"data-browser",1),c.dd(2,ut,3,8,"ui-blank-slate",2),c.dd(3,ht,3,8,"ui-blank-slate",3)),2&e&&(c.Dc("ngIf",!t.isLoaded),c.Mb(1),c.Dc("ngIf",t.isLoaded&&t.fullTableData.length>0),c.Mb(1),c.Dc("ngIf",0===t.tableData.length&&t.isFilterSearchOn),c.Mb(1),c.Dc("ngIf",t.isLoaded&&0===t.fullTableData.length))},directives:[Ae.p,b.fd,Le.a,Ae.n,at.a,Fe.a,Re.a,b.o],pipes:[E.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}.spinner-padding-top[_ngcontent-%COMP%]{padding-top:90px}.widget-setting-form-title[_ngcontent-%COMP%]{box-sizing:border-box;padding:0 25px;border-width:0 0 1px;border-style:solid;display:flex}.bg-red[_ngcontent-%COMP%]{background-color:var(--ui-color-semantic-error-default);max-height:80px}.bg-red-outline[_ngcontent-%COMP%]{background:transparent;color:#fff;border-color:var(--ui-color-semantic-error-default)}@media (-ms-high-contrast:none),(hover:hover),screen and (-ms-high-contrast:active){.bg-red-outline[_ngcontent-%COMP%]:hover{border-color:transparent;background:var(--ui-color-semantic-error-default);color:#fff}}.bg-red-filled[_ngcontent-%COMP%]{color:#fff;border-color:transparent;background:var(--ui-color-semantic-error-default)}.border-grey-light[_ngcontent-%COMP%]{border-color:var(--ui-color-badge-background-light)}.subtitle-warning[_ngcontent-%COMP%]{flex:9;padding-top:var(--hyd-spacing-xxs);padding-bottom:var(--hyd-spacing-xxs)}.subtitle-warning[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#fff;padding:10px 0;line-height:22px}.subtitle-warning[_ngcontent-%COMP%]   .sub-title-message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#fff;padding:10px 0;line-height:18px}.warning-icon[_ngcontent-%COMP%]{flex:0;padding-top:1.8rem;height:100%;padding-right:var(--hyd-spacing-xs);font-size:18px}.warning-icon[_ngcontent-%COMP%]   icon[_ngcontent-%COMP%]{color:#fff}  .no-associate-blankslates .ui-blank-slate,   .no-results-blankslates .ui-blank-slate{padding-top:var(--hyd-spacing-huge)}  .no-associate-blankslates .ui-blank-slate .ui-typography-body{padding-left:100px;padding-right:100px}  .panel-data-browser>.docebo-data-browser>.section-wrapper,   .panel-data-browser>.docebo-data-browser>.section-wrapper .mdl-grid{height:100%;overflow:hidden}  .docebo-data-browser .full-width-header-container{max-height:50px}  her-adobeconnect-account-edit-panel{height:100%;overflow:hidden}  her-adobeconnect-account-edit-panel .mdl-cell.mdl-cell--12-col{margin-top:0;margin-bottom:0;height:100%;overflow:hidden}  her-adobeconnect-account-edit-panel .hyd-table-wrapper .hyd-table .hyd-table-body{overflow-y:auto}  her-adobeconnect-account-edit-panel .hyd-table-wrapper:not(.max-limit-reached) .hyd-table .hyd-table-body{height:calc(100vh - 261px)}  her-adobeconnect-account-edit-panel .hyd-table-wrapper.max-limit-reached .hyd-table .hyd-table-body{height:calc(100vh - 336px)}  her-adobeconnect-account-edit-panel .docebo-data-browser #sorting-filters .search-header-container{width:calc(100% - 1px);max-width:calc(100% - 1px)}  .hyd-selection-count-panel{position:fixed;bottom:40px;width:100%}.panel-data-browser[_ngcontent-%COMP%]{position:absolute;overflow:hidden;height:100%;width:100%}.panel-data-browser[_ngcontent-%COMP%]   .hyd-table-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.panel-data-browser[_ngcontent-%COMP%]   .hyd-table-wrapper[_ngcontent-%COMP%]   hyd-table[_ngcontent-%COMP%]{flex-grow:2}.panel-data-browser[_ngcontent-%COMP%]   .hyd-table-wrapper[_ngcontent-%COMP%]   hyd-paginator[_ngcontent-%COMP%]{bottom:0;left:0;width:100%;flex-grow:0}.panel-data-browser[_ngcontent-%COMP%]   .hyd-table-wrapper[_ngcontent-%COMP%]   .select-counter[_ngcontent-%COMP%]{height:44px;padding:0 12px 0 24px;display:flex;align-items:center;font-weight:700}"]}),e})();class mt{constructor(e,t){this.adobeAccount=e,this.adobeEditComponent=t}initDocServices(){var e,t,i,s,n;this.adobeEditComponent.docService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Adobe Connect V2",href:"/learn/adobeconnect/manage"},{label:null!==(t=null===(e=this.adobeAccount)||void 0===e?void 0:e.name)&&void 0!==t?t:"",href:"/learn/adobeconnect/manage"+(null===(i=this.adobeAccount)||void 0===i?void 0:i.id)}]),this.adobeEditComponent.docService.header.showTitleBar({title:null!==(n=null===(s=this.adobeAccount)||void 0===s?void 0:s.name)&&void 0!==n?n:"",subtitle:this.adobeEditComponent.dictionary.titleBarSubtitle,fullWidth:!0,mode:"bordered"})}setActionsButton(){this.adobeEditComponent.docService.actionButtons.setActionButtons([{properties:{icons:["plus"],BgClass:"bg-positive-green hover-bg-grey-light hover-text-main",tooltipText:"New"},subitems:this.populateSubItemsArray()}])}populateSubItemsArray(){var e;let t=[{icons:["collection-item"],BgClass:"bg-white-opacity text-main",tooltipText:Je.a.t("webinar","Assign Template"),onClick:()=>this.initializeRightPanel(xe.TEMPLATE)}];switch(null===(e=this.adobeAccount)||void 0===e?void 0:e.sessionType){case"meeting":t.push({icons:["folder"],BgClass:"bg-white-opacity text-main",tooltipText:Je.a.t("webinar","Assign Folder"),onClick:()=>this.initializeRightPanel(xe.FOLDER)});break;case"seminar":t.push({icons:["tab"],BgClass:"bg-white-opacity text-main",tooltipText:Je.a.t("webinar","Assign Room"),onClick:()=>this.initializeRightPanel(xe.ROOM)})}return t}initializeRightPanel(e){var t,i;let s=this.populatePanelDataByType(e);this.adobeEditComponent.pageService.rightPanel.setTitle(s.title),this.adobeEditComponent.pageService.rightPanel.setDescription(s.description),this.adobeEditComponent.pageService.rightPanel.setContent({params:{preSelectedRows:this.retrieveSelectedRows(e),sessionType:null===(t=this.adobeAccount)||void 0===t?void 0:t.sessionType,recordType:e,action:s.action,adobeAccountId:null===(i=this.adobeAccount)||void 0===i?void 0:i.id},component:pt}),mt.confirmButton={type:"normal",disabled:!0,properties:{text:Je.a.t("standard","Confirm")},handler:()=>{var t;let i=[];for(let s of mt.selectedItems){let t={name:s.name,sco_id:s.sco_id,assignment_date:this.populateAssignmentDate(s.sco_id,e)};i.push(t)}this.adobeEditComponent.backendService.request("/learn/v1/webinar/adobeconnect/accounts/assignments/"+(null===(t=this.adobeAccount)||void 0===t?void 0:t.id),Ie.a.PUT,{items:[{assignment_type:e,assignments:i}]}).subscribe(()=>{if(this.adobeEditComponent.docService.toast.showToast({message:this.adobeEditComponent.dictionary.successMessagePanelUi(e),type:"success"}),null!==this.adobeAccount){switch(e){case"template":this.adobeAccount.assignedTemplates=i,this.templatesListReference.initTableData(e);break;case"folder":this.adobeAccount.assignedFolders=i,this.foldersListReference.initTableData(e);break;case"room":this.adobeAccount.assignedRooms=i,this.roomsListReference.initTableData(e)}this.adobeEditComponent.tabsManagerComp.activateTabByName(e)}this.adobeEditComponent.pageService.rightPanel.close()},()=>{this.adobeEditComponent.docService.toast.showToast({message:this.adobeEditComponent.dictionary.errorMessage,type:"error"})})}},this.adobeEditComponent.pageService.rightPanel.setActions([{type:"cancel",properties:{text:Je.a.t("standard","_CANCEL")},handler:()=>{this.adobeEditComponent.pageService.rightPanel.close()}},mt.confirmButton]),this.adobeEditComponent.pageService.rightPanel.open()}retrieveSelectedRows(e){switch(e){case"template":return[...this.templatesListReference.tableData];case"folder":return[...this.foldersListReference.tableData];case"room":return[...this.roomsListReference.tableData]}return[]}static setConfirmButtonDisabled(e){mt.confirmButton.disabled=e}static setTemplateItemsSelected(e){mt.selectedItems=e}static setRoomItemsSelected(e){mt.selectedItems=e}static setFolderItemsSelected(e){mt.selectedItems=e}populatePanelDataByType(e){switch(e){case xe.FOLDER:return{title:this.adobeEditComponent.dictionary.foldersRightPanelTitle,description:this.adobeEditComponent.dictionary.foldersRightPanelDescription,action:"shared_folders"};case xe.TEMPLATE:return{title:this.adobeEditComponent.dictionary.templatesRightPanelTitle,description:this.adobeEditComponent.dictionary.templatesRightPanelDescription,action:"templates"};case xe.ROOM:return{title:this.adobeEditComponent.dictionary.roomsRightPanelTitle,description:this.adobeEditComponent.dictionary.roomsRightPanelDescription,action:"seminar_rooms"};default:return{title:this.adobeEditComponent.dictionary.defaultTitle,description:this.adobeEditComponent.dictionary.defaultDescription,action:""}}}static toCapitalLetter(e){try{return e.charAt(0).toUpperCase()+e.slice(1)}catch(t){return e}}populateAssignmentDate(e,t){let i=Date.now(),s=[];switch(t){case"template":s=this.templatesListReference.fullTableData;break;case"folder":s=this.foldersListReference.fullTableData;break;case"room":s=this.roomsListReference.fullTableData}return s.forEach(t=>{e!==t.sco_id||(i=t.assignment_date)}),i}}var gt=i("XNiG"),bt=i("1G5W"),ft=i("Kj3r"),vt=i("/uUt"),_t=i("Jc1x");const wt=["adobeConnectAccountEditTabContentDiv"];function yt(e,t){if(1&e&&(c.jc(0,"ui-input-select-option",27),c.fd(1),c.ic()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.hd(" ",e.label," ")}}const Ct=function(){return{category:"error"}};function St(e,t){1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.yc(2,1,"Something is missing, please select a Docebo Field",c.Hc(4,Ct))," "))}function Tt(e,t){if(1&e&&(c.jc(0,"div",24),c.jc(1,"ui-input-select",25),c.wc(2,"t"),c.wc(3,"t"),c.dd(4,yt,2,2,"ui-input-select-option",26),c.dd(5,St,3,5,"ui-input-error",14),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("label",c.xc(2,6,e.doceboFieldDropdown.label))("formControl",e.doceboFieldDropdown.inputFormControl)("requiredMarker",c.xc(3,8,e.doceboFieldDropdown.requiredMarker))("required",e.doceboFieldDropdown.required),c.Mb(3),c.Dc("ngForOf",e.doceboFieldDropdown.options),c.Mb(1),c.Dc("ngIf",(null==e.doceboFieldDropdown.inputFormControl.errors?null:e.doceboFieldDropdown.inputFormControl.errors.required)&&e.doceboFieldDropdown.inputFormControl.dirty)}}function kt(e,t){if(1&e&&(c.jc(0,"div",20),c.jc(1,"div",21),c.jc(2,"div",16),c.fd(3),c.wc(4,"t"),c.jc(5,"div",22),c.fd(6),c.wc(7,"t"),c.ic(),c.ic(),c.jc(8,"ui-input-checkbox",18),c.jc(9,"ui-input-label"),c.fd(10),c.wc(11,"t"),c.ic(),c.jc(12,"ui-input-description"),c.fd(13),c.wc(14,"t"),c.ic(),c.ic(),c.ic(),c.dd(15,Tt,6,10,"div",23),c.ic()),2&e){const e=c.vc();c.Mb(3),c.hd(" ",c.xc(4,6,e.dictionary.attendanceTrackingTitle)," "),c.Mb(3),c.hd(" ",c.xc(7,8,e.dictionary.attendanceTrackingSubtitle)," "),c.Mb(2),c.Dc("formControl",e.attendanceTrackingCheckbox.inputFormControl),c.Mb(2),c.hd(" ",c.xc(11,10,e.dictionary.attendanceTrackingCheckboxTitle)," "),c.Mb(3),c.hd(" ",c.xc(14,12,e.dictionary.attendanceTrackingCheckboxDesc)," "),c.Mb(2),c.Dc("ngIf",e.attendanceTrackingCheckbox.inputFormControl.value)}}function It(e,t){1&e&&c.ec(0,"hr")}function xt(e,t){if(1&e&&(c.jc(0,"div",28),c.ec(1,"textfield",29),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitCourses.type)("id",e.sessionLimitCourses.id)("floating_label",e.sessionLimitCourses.floating_label)("label",e.sessionLimitCourses.label)("max_length",e.sessionLimitCourses.max_length)("inputFormControl",e.sessionLimitCourses.inputFormControl)("showRequiredFieldIndicator",!0)}}function Dt(e,t){if(1&e&&(c.jc(0,"div",28),c.ec(1,"textfield",29),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitAccount.type)("id",e.sessionLimitAccount.id)("floating_label",e.sessionLimitAccount.floating_label)("label",e.sessionLimitAccount.label)("max_length",e.sessionLimitAccount.max_length)("inputFormControl",e.sessionLimitAccount.inputFormControl)("showRequiredFieldIndicator",!0)}}function Ot(e,t){if(1&e&&(c.jc(0,"div",28),c.ec(1,"textfield",29),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRooms.type)("id",e.sessionLimitConcurrentRooms.id)("floating_label",e.sessionLimitConcurrentRooms.floating_label)("label",e.sessionLimitConcurrentRooms.label)("max_length",e.sessionLimitConcurrentRooms.max_length)("inputFormControl",e.sessionLimitConcurrentRooms.inputFormControl)("showRequiredFieldIndicator",!0)}}const Et=function(){return{category:"standard"}},Pt=function(){return{category:"webinar"}};let Mt=(()=>{class e{constructor(e,t,i,s,n){this.dictionary=e,this.translationService=t,this.backendService=i,this.pageService=s,this.docService=n,this.canShowAttendanceTrackingOption=!1,this.ngUnsubscribe=new gt.a,this.NAME_MAX_LENGTH=50,this.formGroup=new Ke.h({})}ngOnInit(){this.updateAdobeAccountFormGroup(),this.initFormFieldsParameters(),this.sessionLimitCheckboxesValueChanges(["Courses","Account","ConcurrentRooms"]),this.canShowAttendanceTrackingOption&&this.attendanceTrackingCheckboxControlValueChanges()}ngAfterViewInit(){this.initFloatingSaveBarAndButton(),nt.a.delay(()=>{this.adobeConnectAccountEditTabContentDiv.nativeElement.insertAdjacentHTML("beforeend",'<div class="safariHotfix"> </div>')},500)}ngOnDestroy(){this.pageService.hideFloatingSaveBar(),this.pageService.destroyFloatingSaveBar(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}updateAdobeAccountFormGroup(){this.formGroup.setControl("name",new Ke.e(this.adobeAccountObject.name,[Ke.x.required,Ke.x.maxLength(this.NAME_MAX_LENGTH)])),this.formGroup.setControl("description",new Ke.e(this.adobeAccountObject.description)),this.formGroup.setControl("username",new Ke.e(this.adobeAccountObject.username,Ke.x.required)),this.formGroup.setControl("password",new Ke.e(this.adobeAccountObject.password,Ke.x.required)),this.formGroup.setControl("serverUrl",new Ke.e(this.adobeAccountObject.serverUrl,Ke.x.required)),this.formGroup.setControl("sessionType",new Ke.e(mt.toCapitalLetter(this.adobeAccountObject.sessionType))),this.formGroup.setControl("sessionLimitAccountCheckbox",new Ke.e(!!this.adobeAccountObject.sessionLimitAccount)),this.formGroup.setControl("sessionLimitCoursesCheckbox",new Ke.e(!!this.adobeAccountObject.sessionLimitCourses)),this.formGroup.setControl("sessionLimitConcurrentRoomsCheckbox",new Ke.e(!!this.adobeAccountObject.sessionLimitConcurrentRooms)),this.canShowAttendanceTrackingOption&&(this.formGroup.setControl("attendanceTrackingCheckbox",new Ke.e(!!this.adobeAccountObject.doceboField)),this.formGroup.setControl("doceboField",new Ke.e(this.adobeAccountObject.doceboField,[Ze("attendanceTrackingCheckbox")]))),this.formGroup.setControl("sessionLimitAccount",new Ke.e(this.adobeAccountObject.sessionLimitAccount,[et(999,"sessions",this.translationService),Ze("sessionLimitAccountCheckbox")])),this.formGroup.setControl("sessionLimitCourses",new Ke.e(this.adobeAccountObject.sessionLimitCourses,[et(999,"sessions",this.translationService),Ze("sessionLimitCoursesCheckbox")])),this.formGroup.setControl("sessionLimitConcurrentRooms",new Ke.e(this.adobeAccountObject.sessionLimitConcurrentRooms,[et(999,"sessions",this.translationService),Ze("sessionLimitConcurrentRoomsCheckbox")]))}initFormFieldsParameters(){this.name={label:Je.a.t("webinar","Account Name"),max_length:this.NAME_MAX_LENGTH,show_counter:!0,requiredMarker:this.dictionary.requiredMarkerLabel,inputFormControl:this.formGroup.controls.name},this.description={label:Je.a.t("app7020","Description"),inputFormControl:this.formGroup.controls.description},this.username={id:"username",label:Je.a.t("standard","Username"),requiredMarker:this.dictionary.requiredMarkerLabel,inputFormControl:this.formGroup.controls.username},this.password={label:Je.a.t("WebhookAuth","Password"),requiredMarker:this.dictionary.requiredMarkerLabel,tooltip_label_show:Je.a.t("standard","Show"),tooltip_label_hide:Je.a.t("standard","Hide"),inputFormControl:this.formGroup.controls.password},this.serverUrl={label:Je.a.t("custom_domain","_DOMAIN_NAME_"),requiredMarker:this.dictionary.requiredMarkerLabel,inputFormControl:this.formGroup.controls.serverUrl},this.sessionType={type:Xe.a.TEXT,label:this.dictionary.sessionTypeLabel,inputFormControl:this.formGroup.controls.sessionType},this.sessionLimitCoursesCheckbox={label:Je.a.t("webinar","Set session limits for courses"),inputFormControl:this.formGroup.controls.sessionLimitCoursesCheckbox,checked:!1},this.sessionLimitAccountCheckbox={label:Je.a.t("webinar","Set session limits per accounts"),inputFormControl:this.formGroup.controls.sessionLimitAccountCheckbox,checked:!1},this.sessionLimitConcurrentRoomsCheckbox={label:Je.a.t("webinar","Set session for concurrent rooms"),inputFormControl:this.formGroup.controls.sessionLimitConcurrentRoomsCheckbox,checked:!1},this.canShowAttendanceTrackingOption&&(this.attendanceTrackingCheckbox={label:Je.a.t("app7020","Attendance Tracking"),inputFormControl:this.formGroup.controls.attendanceTrackingCheckbox,checked:!1},this.doceboFieldDropdown={label:Je.a.t("salesforce","Docebo Field"),inputFormControl:this.formGroup.controls.doceboField,options:this.mapDoceboFields(this.adobeAccountObject.doceboFieldList),required:!0,requiredMarker:this.dictionary.requiredMarkerLabel}),this.sessionLimitAccount={type:Xe.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:Je.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.controls.sessionLimitAccount},this.sessionLimitCourses={type:Xe.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:Je.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.controls.sessionLimitCourses},this.sessionLimitConcurrentRooms={type:Xe.a.NUMBER,id:"session-limit-concurrent-rooms",floating_label:!0,label:Je.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.controls.sessionLimitConcurrentRooms}}mapDoceboFields(e){return e?Object.entries(e).map(([e,t])=>({value:e,label:t})):[]}setCheckBoxesAndInputTexts(){this.sessionLimitAccountCheckbox.checked=!!this.adobeAccountObject.sessionLimitAccount,this.sessionLimitCoursesCheckbox.checked=!!this.adobeAccountObject.sessionLimitCourses,this.sessionLimitConcurrentRoomsCheckbox.checked=!!this.adobeAccountObject.sessionLimitConcurrentRooms,this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{e?(this.sessionLimitAccount.inputFormControl.setValue(0!==this.adobeAccountObject.sessionLimitAccount?this.adobeAccountObject.sessionLimitAccount:null),this.sessionLimitAccountCheckbox.checked=!0):(this.sessionLimitAccount.inputFormControl.setValue(null),this.sessionLimitAccountCheckbox.checked=!1)}),this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{e?(this.sessionLimitCourses.inputFormControl.setValue(0!==this.adobeAccountObject.sessionLimitCourses?this.adobeAccountObject.sessionLimitCourses:null),this.sessionLimitCoursesCheckbox.checked=!0):(this.sessionLimitCourses.inputFormControl.setValue(null),this.sessionLimitCoursesCheckbox.checked=!1)}),this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{e?(this.sessionLimitConcurrentRooms.inputFormControl.setValue(0!==this.adobeAccountObject.sessionLimitConcurrentRooms?this.adobeAccountObject.sessionLimitConcurrentRooms:null),this.sessionLimitConcurrentRoomsCheckbox.checked=!0):(this.sessionLimitConcurrentRooms.inputFormControl.setValue(null),this.sessionLimitConcurrentRoomsCheckbox.checked=!1)})}initFloatingSaveBarAndButton(){this.pageService.initFloatingSaveButton({formControl:this.formGroup,initHidden:!0,isSubmitAlwaysEnabled:!1,actions:[{properties:{text:this.dictionary.confirmButton,colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>this.saveChanges()}]}),this.pageService.showFloatingSaveBar(),this.formGroup.markAsPristine(),this.formGroup.valueChanges.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{this.formGroup.markAsDirty(),this.pageService.floatingSaveButtonMarkAsDirty(this.formGroup.dirty),this.formGroup.dirty&&this.pageService.preventNavigation()})}saveChanges(){return this.formGroup.valid?new Promise((e,t)=>{const i=this.formGroup.getRawValue(),s=this.canShowAttendanceTrackingOption?i.attendanceTrackingCheckbox?i.doceboField:"":void 0,n={id:this.adobeAccountObject.id,name:i.name,tool:(a=i.sessionType.toLowerCase(),{meeting:"adobeconnectv2meeting",seminar:"adobeconnectv2seminar"}[a]),session_type:i.sessionType.toLowerCase(),additional_info:i.description,admin_username:i.username,admin_password:i.password,server_url:i.serverUrl,email:"",max_sessions:i.sessionLimitAccountCheckbox?i.sessionLimitAccount:0,max_sessions_per_course:i.sessionLimitCoursesCheckbox?i.sessionLimitCourses:0,max_concurrent_sessions:i.sessionLimitConcurrentRoomsCheckbox?i.sessionLimitConcurrentRooms:0,tool_mapping_field_lms:s};var a;this.backendService.request("/learn/v1/webinar/adobeconnect/accounts/"+this.adobeAccountObject.id,Ie.a.PUT,n).subscribe(({data:t})=>{var i;e(this.dictionary.successMessage),this.pageService.floatingSaveButtonMarkAsDirty(!1),this.formGroup.markAsPristine(),this.formGroup.controls.sessionLimitCourses.setValue(t.max_sessions_per_course),this.formGroup.controls.sessionLimitAccount.setValue(t.max_sessions),this.formGroup.controls.sessionLimitConcurrentRooms.setValue(t.max_concurrent_sessions),this.docService.header.showTitleBar({title:null!==(i=t.name)&&void 0!==i?i:"",subtitle:this.dictionary.titleBarSubtitle,fullWidth:!0,mode:"bordered"})},()=>{t(this.dictionary.errorMessage),this.pageService.floatingSaveButtonMarkAsDirty(!0)})}):(this.pageService.floatingSaveButtonMarkAsDirty(!0),this.markOptionalCheckboxesAsTouched(),new Promise((e,t)=>{t(this.dictionary.errorMessage)}))}markOptionalCheckboxesAsTouched(){this.sessionLimitAccountCheckbox.checked&&this.formGroup.controls.sessionLimitAccount.markAsTouched(),this.sessionLimitCoursesCheckbox.checked&&this.formGroup.controls.sessionLimitCourses.markAsTouched(),this.sessionLimitConcurrentRoomsCheckbox.checked&&this.formGroup.controls.sessionLimitConcurrentRooms.markAsTouched()}resetForm(){this.formGroup.reset()}attendanceTrackingCheckboxControlValueChanges(){return this.formGroup.controls.attendanceTrackingCheckbox.valueChanges.pipe(Object(ft.a)(400),Object(vt.a)()).subscribe(e=>{e?this.formGroup.controls.doceboField.setValidators([Ke.x.required]):(this.formGroup.controls.doceboField.clearValidators(),this.formGroup.controls.doceboField.setErrors(null)),this.formGroup.controls.doceboField.updateValueAndValidity()})}sessionLimitCheckboxesValueChanges(e){e.forEach(e=>{this.formGroup.controls[`sessionLimit${e}Checkbox`].valueChanges.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(t=>{t?this.formGroup.controls[`sessionLimit${e}`].setValidators([Ke.x.required,et(999,"ConcurrentRooms"===e?"rooms":"sessions",this.translationService)]):(this.formGroup.controls[`sessionLimit${e}`].clearValidators(),this.formGroup.controls[`sessionLimit${e}`].setValue(this.formGroup.controls[`sessionLimit${e}`].value||0)),this.formGroup.controls[`sessionLimit${e}`].updateValueAndValidity(),this.formGroup.controls[`sessionLimit${e}`].markAsTouched(),this.formGroup.controls[`sessionLimit${e}`].markAsDirty()})})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(P),c.dc(u.h),c.dc(S.a),c.dc(u.c),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["her-adobeconnect-account-edit-properties-tab"]],viewQuery:function(e,t){if(1&e&&c.md(wt,1),2&e){let e;c.Qc(e=c.sc())&&(t.adobeConnectAccountEditTabContentDiv=e.first)}},inputs:{adobeAccountObject:"adobeAccountObject",canShowAttendanceTrackingOption:"canShowAttendanceTrackingOption"},features:[c.Lb([P])],decls:87,vars:110,consts:[[1,"wrapper"],[3,"activeTab"],[3,"tabName","title"],[1,"adobeconnect-account-edit-tab-content"],["adobeConnectAccountEditTabContentDiv",""],[1,"hyd-row"],[1,"bold-subtitle","options-subtitle","hyd-col-24","hyd-col-md-24"],[1,"hyd-col-24","hyd-col-md-12"],[3,"label","requiredMarker","formControl","autocomplete","maxLength"],[3,"label","requiredMarker","formControl","autocomplete"],[1,"hyd-col-24","hyd-col-md-24"],[3,"label","formControl","autocomplete"],[3,"label","requiredMarker","formControl","tooltipLabelShow","tooltipLabelHide","autocomplete"],["class","ui-row",4,"ngIf"],[4,"ngIf"],[1,"hyd-row","session-type-row"],[1,"bold-subtitle","options-subtitle"],[3,"label","type","inputFormControl","readOnly","showRequiredFieldIndicator"],[3,"formControl"],["class","input-of-checkbox-spacer",4,"ngIf"],[1,"ui-row"],[1,"ui-col-24","ui-col-md-24"],[1,"ui-typography-subtitle","ui-color-typography-secondary"],["class","ui-col-24 ui-col-md-12",4,"ngIf"],[1,"ui-col-24","ui-col-md-12"],["ngDefaultControl","",3,"label","formControl","requiredMarker","required"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"input-of-checkbox-spacer"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"ui-tabs-vertical",1),c.jc(2,"ui-tab-vertical",2),c.wc(3,"t"),c.jc(4,"ui-tab-vertical-header"),c.jc(5,"ui-tab-vertical-title"),c.fd(6),c.wc(7,"t"),c.ic(),c.jc(8,"ui-tab-vertical-description"),c.fd(9),c.wc(10,"t"),c.ic(),c.ic(),c.jc(11,"ui-tab-vertical-content"),c.jc(12,"div",3,4),c.jc(14,"div",5),c.jc(15,"div",6),c.fd(16),c.wc(17,"t"),c.ic(),c.jc(18,"div",7),c.ec(19,"ui-input-text",8),c.wc(20,"t"),c.wc(21,"t"),c.ic(),c.jc(22,"div",7),c.ec(23,"ui-input-text",9),c.wc(24,"t"),c.wc(25,"t"),c.ic(),c.ic(),c.jc(26,"div",5),c.jc(27,"div",10),c.ec(28,"ui-input-text",11),c.wc(29,"t"),c.ic(),c.ic(),c.jc(30,"div",5),c.jc(31,"div",7),c.ec(32,"ui-input-text",9),c.wc(33,"t"),c.wc(34,"t"),c.ic(),c.jc(35,"div",7),c.ec(36,"ui-input-password",12),c.wc(37,"t"),c.wc(38,"t"),c.wc(39,"t"),c.wc(40,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(41,"ui-tab-vertical",2),c.wc(42,"t"),c.jc(43,"ui-tab-vertical-header"),c.jc(44,"ui-tab-vertical-title"),c.fd(45),c.wc(46,"t"),c.ic(),c.jc(47,"ui-tab-vertical-description"),c.fd(48),c.wc(49,"t"),c.ic(),c.ic(),c.jc(50,"ui-tab-vertical-content"),c.jc(51,"div",3),c.dd(52,kt,16,14,"div",13),c.dd(53,It,1,0,"hr",14),c.jc(54,"div",15),c.jc(55,"div",7),c.jc(56,"div",16),c.fd(57),c.wc(58,"t"),c.ic(),c.ec(59,"textfield",17),c.wc(60,"t"),c.wc(61,"t"),c.ic(),c.ec(62,"div",7),c.ic(),c.ec(63,"hr"),c.jc(64,"div",5),c.jc(65,"div",10),c.jc(66,"div",16),c.fd(67),c.wc(68,"t"),c.ic(),c.jc(69,"ui-input-checkbox",18),c.jc(70,"ui-input-label"),c.fd(71),c.wc(72,"t"),c.ic(),c.ic(),c.dd(73,xt,2,7,"div",19),c.wc(74,"async"),c.jc(75,"ui-input-checkbox",18),c.jc(76,"ui-input-label"),c.fd(77),c.wc(78,"t"),c.ic(),c.ic(),c.dd(79,Dt,2,7,"div",19),c.wc(80,"async"),c.jc(81,"ui-input-checkbox",18),c.jc(82,"ui-input-label"),c.fd(83),c.wc(84,"t"),c.ic(),c.ic(),c.dd(85,Ot,2,7,"div",19),c.wc(86,"async"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("activeTab","general-tab"),c.Mb(1),c.Dc("tabName","general-tab")("title",c.xc(3,50,t.dictionary.generalTabTitle)),c.Mb(4),c.hd(" ",c.xc(7,52,t.dictionary.generalVerticalTabTitle)," "),c.Mb(3),c.hd(" ",c.xc(10,54,t.dictionary.generalVerticalTabDescription)," "),c.Mb(7),c.hd(" ",c.yc(17,56,"General Information",c.Hc(108,Et))," "),c.Mb(3),c.Dc("label",c.xc(20,59,t.name.label))("requiredMarker",c.xc(21,61,t.name.requiredMarker))("formControl",t.name.inputFormControl)("autocomplete","off")("maxLength",t.name.max_length),c.Mb(4),c.Dc("label",c.xc(24,63,t.serverUrl.label))("requiredMarker",c.xc(25,65,t.serverUrl.requiredMarker))("formControl",t.serverUrl.inputFormControl)("autocomplete","off"),c.Mb(5),c.Dc("label",c.xc(29,67,t.description.label))("formControl",t.description.inputFormControl)("autocomplete","off"),c.Mb(4),c.Dc("label",c.xc(33,69,t.username.label))("requiredMarker",c.xc(34,71,t.username.requiredMarker))("formControl",t.username.inputFormControl)("autocomplete","off"),c.Mb(4),c.Dc("label",c.xc(37,73,t.password.label))("requiredMarker",c.xc(38,75,t.password.requiredMarker))("formControl",t.password.inputFormControl)("tooltipLabelShow",c.xc(39,77,t.password.tooltip_label_show))("tooltipLabelHide",c.xc(40,79,t.password.tooltip_label_hide))("autocomplete","new-password"),c.Mb(5),c.Dc("tabName","details-tab")("title",c.xc(42,81,t.dictionary.detailsTabTitle)),c.Mb(4),c.hd(" ",c.xc(46,83,t.dictionary.detailsTabTitle)," "),c.Mb(3),c.hd(" ",c.xc(49,85,t.dictionary.detailsVerticalTabDescription)," "),c.Mb(4),c.Dc("ngIf",t.canShowAttendanceTrackingOption),c.Mb(1),c.Dc("ngIf",t.canShowAttendanceTrackingOption),c.Mb(4),c.hd(" ",c.yc(58,87,"Session type",c.Hc(109,Pt))," "),c.Mb(2),c.Dc("label",c.xc(60,90,t.sessionType.label)+" "+c.xc(61,92,t.dictionary.requiredMarkerLabel))("type",t.sessionType.type)("inputFormControl",t.sessionType.inputFormControl)("readOnly",!0)("showRequiredFieldIndicator",!1),c.Mb(8),c.hd(" ",c.xc(68,94,t.dictionary.optionsLabel)," "),c.Mb(2),c.Dc("formControl",t.sessionLimitCoursesCheckbox.inputFormControl),c.Mb(2),c.hd(" ",c.xc(72,96,t.sessionLimitCoursesCheckbox.label)," "),c.Mb(2),c.Dc("ngIf",c.xc(74,98,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCourses.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value),c.Mb(2),c.Dc("formControl",t.sessionLimitAccountCheckbox.inputFormControl),c.Mb(2),c.hd(" ",c.xc(78,100,t.sessionLimitAccountCheckbox.label)," "),c.Mb(2),c.Dc("ngIf",c.xc(80,102,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccount.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value),c.Mb(2),c.Dc("formControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl),c.Mb(2),c.hd(" ",c.xc(84,104,t.sessionLimitConcurrentRoomsCheckbox.label)," "),c.Mb(2),c.Dc("ngIf",c.xc(86,106,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRooms.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value))},directives:[b.yd,b.nd,b.qd,b.rd,b.pd,b.od,b.gc,Ke.o,Ke.f,b.Ub,Ae.p,_t.a,b.Kb,b.Tb,b.Qb,b.cc,Ke.b,Ke.v,Ae.o,b.ec,b.Rb],pipes:[E.b,Ae.b],styles:[".force_refresh{z-index:100}.adobeconnect-account-edit-tab-content ui-input-select{margin:var(--hyd-spacing-xxs) var(--hyd-spacing-lg)}.adobeconnect-account-edit-tab-content .hyd-row{margin-bottom:var(--hyd-spacing-md)}.adobeconnect-account-edit-tab-content ui-input-checkbox div.ui-input-checkbox{margin-bottom:0}"],encapsulation:2}),e})();const At=["tabsManager"],Lt=["propertiesTab"],jt=["templatesList"],Ft=["foldersList"],Rt=["roomsList"];function Nt(e,t){if(1&e&&(c.jc(0,"tab",6),c.ec(1,"her-adobeconnect-account-edit-list-tab",7,10),c.ic()),2&e){const e=c.vc(2);c.Dc("title",e.dictionary.foldersListTabTitle)("name","folder"),c.Mb(1),c.Dc("recordsType",e.recordTypes.FOLDER)("adobeAccount",e.adobeAccountObject)}}function Ut(e,t){if(1&e&&(c.jc(0,"tab",6),c.ec(1,"her-adobeconnect-account-edit-list-tab",7,11),c.ic()),2&e){const e=c.vc(2);c.Dc("title",e.dictionary.roomsListTabTitle)("name","room"),c.Mb(1),c.Dc("recordsType",e.recordTypes.ROOM)("adobeAccount",e.adobeAccountObject)}}function qt(e,t){if(1&e){const e=c.kc();c.jc(0,"tabs-manager",1,2),c.rc("tabChoose",function(t){return c.Uc(e),c.vc().onTabChoose(t)}),c.jc(2,"tab",3),c.wc(3,"t"),c.ec(4,"her-adobeconnect-account-edit-properties-tab",4,5),c.ic(),c.jc(6,"tab",6),c.ec(7,"her-adobeconnect-account-edit-list-tab",7,8),c.ic(),c.dd(9,Nt,3,4,"tab",9),c.dd(10,Ut,3,4,"tab",9),c.ic()}if(2&e){const e=c.vc();c.cd("height",e.tabsHeight),c.Mb(2),c.Dc("title",c.xc(3,13,e.dictionary.propertiesTabTitle))("name","properties")("defaultTab",!0),c.Mb(2),c.Dc("adobeAccountObject",e.adobeAccountObject)("canShowAttendanceTrackingOption",e.canShowAttendanceTrackingOption),c.Mb(2),c.Dc("title",e.dictionary.templatesListTabTitle)("name","template"),c.Mb(1),c.Dc("recordsType",e.recordTypes.TEMPLATE)("adobeAccount",e.adobeAccountObject),c.Mb(2),c.Dc("ngIf",null!==e.adobeAccountObject&&"meeting"===e.adobeAccountObject.sessionType),c.Mb(1),c.Dc("ngIf",null!==e.adobeAccountObject&&"seminar"===e.adobeAccountObject.sessionType)}}let zt=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.dictionary=e,this.docService=t,this.backendService=i,this.pageService=s,this.changeDetectRef=n,this.translationService=a,this.route=o,this.toggleService=r,this.recordTypes=xe,this.accountId=0,this.adobeAccountObject=null,this.oldTabsHeight="0",this.tabsHeight="0",this.toggleAdobeConnectIsOn=!1,this.toggleAdobeConnectAttendanceTrackingIsOn=!1}get canShowAttendanceTrackingOption(){return this.toggleAdobeConnectAttendanceTrackingIsOn&&this.toggleAdobeConnectIsOn}ngOnInit(){this.toggleAdobeConnectIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_SESSION_COMPLETION_VILT),this.toggleAdobeConnectAttendanceTrackingIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_ATTENDANCE_TRACKING),this.route.paramMap.subscribe(e=>{this.accountId=Number(e.get("account_id")),this.getAdobeConnectAccountDetails(this.accountId).then(e=>{this.adobeAccountObject=e,this.adobeAccountEditHelper=new mt(this.adobeAccountObject,this),this.adobeAccountEditHelper.initDocServices()},e=>{console.log(e)})})}ngAfterViewInit(){this.templatesList.changes.subscribe(()=>{void 0!==this.templatesList&&(this.adobeAccountEditHelper.templatesListReference=this.templatesList.first,this.adobeAccountEditHelper.setActionsButton())}),this.foldersList.changes.subscribe(()=>{void 0!==this.foldersList&&(this.adobeAccountEditHelper.foldersListReference=this.foldersList.first,this.adobeAccountEditHelper.setActionsButton())}),this.roomsList.changes.subscribe(()=>{void 0!==this.roomsList&&(this.adobeAccountEditHelper.roomsListReference=this.roomsList.first,this.adobeAccountEditHelper.setActionsButton())}),setInterval(()=>{if(this.tabsManager){const e=this.tabsManager.nativeElement.getBoundingClientRect().top,t=window.innerHeight-e+"px";this.oldTabsHeight!==t&&(this.tabsHeight=t,this.oldTabsHeight=t)}},1e3)}ngOnDestroy(){this.docService.actionButtons.clearActionButtons()}getAdobeConnectAccountDetails(e){return new Promise(t=>{this.backendService.request("/learn/v1/webinar/adobeconnect/accounts/"+e,Ie.a.GET).subscribe(i=>{var s,n,a;let o={id:e,name:i.data.name,serverUrl:i.data.server_url,description:i.data.description,username:i.data.admin_username,password:i.data.admin_password,sessionType:(i.data.session_type||"meeting").toLowerCase(),createdAt:new Date(i.data.created_at),sessionLimitCourses:i.data.max_rooms_per_course,sessionLimitAccount:i.data.max_rooms,sessionLimitConcurrentRooms:i.data.max_concurrent_rooms,assignedTemplates:null!==(s=i.data.assigned_templates)&&void 0!==s?s:[],assignedFolders:null!==(n=i.data.assigned_folders)&&void 0!==n?n:[],assignedRooms:null!==(a=i.data.assigned_rooms)&&void 0!==a?a:[],doceboField:i.data.tool_mapping_field_lms,doceboFieldList:i.data.docebo_fields};t(o)})})}onTabChoose(e){switch(e){case xe.TEMPLATE:case xe.ROOM:case xe.FOLDER:this.pageService.hideFloatingSaveBar();break;case"properties":this.pageService.showFloatingSaveBar()}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(P),c.dc(M.a),c.dc(S.a),c.dc(u.c),c.dc(c.i),c.dc(u.h),c.dc(s.a),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["her-adobeconnect-account-edit"]],viewQuery:function(e,t){if(1&e&&(c.md(At,1,c.o),c.md(At,1),c.md(Lt,1),c.md(jt,1),c.md(Ft,1),c.md(Rt,1)),2&e){let e;c.Qc(e=c.sc())&&(t.tabsManager=e.first),c.Qc(e=c.sc())&&(t.tabsManagerComp=e.first),c.Qc(e=c.sc())&&(t.propertiesTab=e.first),c.Qc(e=c.sc())&&(t.templatesList=e),c.Qc(e=c.sc())&&(t.foldersList=e),c.Qc(e=c.sc())&&(t.roomsList=e)}},features:[c.Lb([P])],decls:1,vars:1,consts:[[3,"height","tabChoose",4,"ngIf"],[3,"tabChoose"],["tabsManager",""],[3,"title","name","defaultTab"],[3,"adobeAccountObject","canShowAttendanceTrackingOption"],["propertiesTab",""],[3,"title","name"],[3,"recordsType","adobeAccount"],["templatesList",""],[3,"title","name",4,"ngIf"],["foldersList",""],["roomsList",""]],template:function(e,t){1&e&&c.dd(0,qt,11,15,"tabs-manager",0),2&e&&c.Dc("ngIf",null!==t.adobeAccountObject)},styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}.wrapper{box-sizing:border-box;display:block;margin-top:var(--hyd-spacing-big);padding-bottom:var(--hyd-spacing-huge)}.adobeconnect-account-edit-tab-content{margin-top:var(--hyd-spacing-md);padding-bottom:var(--hyd-spacing-xs);margin-bottom:var(--hyd-spacing-tiny)}.safariHotfix{position:relative;width:1px;height:1px}.bold-subtitle{padding-bottom:15px;font-weight:600;font-size:14px;line-height:20px}.options-container{padding:2px 0}span.mdl-checkbox__label{font-size:13px!important}checkbox .mdl-checkbox__label{font-size:13px}.session-type-row{margin-bottom:var(--hyd-spacing-md)}.hyd-shadow-md{box-shadow:var(--hyd-shadow-md) var(--hyd-color-layout-shadow)!important}.input-of-checkbox-spacer{padding-left:var(--hyd-spacing-md)!important}tabs-manager{display:block}tabs-manager>.tabs-manager{height:100%}tabs-manager>.tabs-manager>.tabs-content{height:calc(100% - 50px)!important;overflow-y:auto!important}tabs-manager>.tabs-manager>.tabs-content>tab>.tab{height:100%}tabs-manager>.tabs-manager>.tabs-content>tab>.tab:not(.tab-visible){height:100%;overflow:hidden}tabs-manager>.tabs-manager>.tabs-content .docebo-data-browser{height:100%}tabs-manager>.tabs-manager>.tabs-content .docebo-data-browser>.section-wrapper{height:calc(100% - 51px);overflow-y:auto}tabs-manager>.tabs-manager>.tabs-content .docebo-data-browser>.section-wrapper>.grid-content-container{overflow:visible;height:auto}"],encapsulation:2}),e})(),Vt=(()=>{class e{constructor(e){this._toggleService=e}canLoad(e,t){return this._toggleService.isOn(u.f.TOGGLE_NEW_COURSE_EXPERIENCE)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(u.g))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Bt=i("Karm"),Gt=i("cp0P");let $t=(()=>{class e{constructor(e,t,i){this._router=e,this._toggleService=t,this._backendService=i}canActivate(e,t){return this._canAccessOldCourseExperience(e)}canActivateChild(e,t){return this._canAccessOldCourseExperience(e)}_canAccessOldCourseExperience(e){var t;if(!this._toggleService.isOn(u.f.TOGGLE_NEW_COURSE_EXPERIENCE))return!0;const i=e.params.id,s=e.params.title||e.params.slug,n=e.params.id_lo,o=e.params.id_session,r=e.params.lp;switch(null===(t=e.routeConfig)||void 0===t?void 0:t.path){case"view/elearning/:id/:title":case"view/classroom/:id/:title":case"view/webinar/:id/:title":case"course/:id/:slug":case"course/:id/:slug/:type":return this._router.createUrlTree([`/learn/courses/${i}/${s}`]);case"course/:id":case"course/:id/play":case"course/:id/play/:id_lo/:slug":case"course/:id/session/:id_session/:slug":return new a.a(t=>{let a=[this._backendService.request(`/learn/v1/courses/${i}`,"GET")];r&&a.push(this._backendService.request(`/learn/v1/lp/${r}`,"GET")),Object(Gt.a)(a).pipe(Object(ee.a)(1)).subscribe(a=>{var c,l,d,u,h,p,m,g;const b=a[0],f=a[1],v=null===(c=null==b?void 0:b.data)||void 0===c?void 0:c.slug_name,_=null===(l=null==f?void 0:f.data)||void 0===l?void 0:l.slug_name;let w=r?`/learn/learning-plans/${r}/${_}/courses/${i}/${v}`:`/learn/courses/${i}/${v}`;if((null===(d=e.routeConfig)||void 0===d?void 0:d.path)&&(null===(h=null===(u=e.routeConfig)||void 0===u?void 0:u.path)||void 0===h?void 0:h.indexOf("id_lo"))>-1){const{params:t}=e;t.slug===String(Bt.a.SIGN)&&t.id_lo.match(/^(sign_)[\d]+$/)?w+="/sign":w=w+=`/lo/${n}/${s}`}else(null===(p=e.routeConfig)||void 0===p?void 0:p.path)&&(null===(g=null===(m=e.routeConfig)||void 0===m?void 0:m.path)||void 0===g?void 0:g.indexOf("id_session"))>-1&&(w+=`/sessions/${o}/${s}`);t.next(this._router.createUrlTree([w])),t.complete()},()=>{t.next(this._router.createUrlTree["not-found"]),t.complete()})});case"lp/:id/:slug":case"view/:id/:title":return this._router.createUrlTree([`/learn/learning-plans/${i}/${s}`]);default:return!0}}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h),c.nc(u.g),c.nc(S.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ht=i("m77G");let Yt=(()=>{class e{constructor(e){this._auth0Service=e}ngOnInit(){this._auth0Service.authenticated||this._auth0Service.login()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ht.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},styles:[""]}),e})();var Wt=i("pLZG");let Qt=(()=>{class e{constructor(e,t,i){this.auth=e,this.docLayoutService=t,this.router=i,this.subscription=this.router.events.pipe(Object(Wt.a)(e=>e instanceof s.d)).subscribe(()=>{this.docLayoutService.page.activateNoLayoutMode()}),this.auth.handleLoginCallback()}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ht.a),c.dc(M.a),c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["app-callback"]],decls:1,vars:0,template:function(e,t){1&e&&c.ec(0,"div")},encapsulation:2}),e})();var Kt=i("aWaq"),Xt=i("3RMk"),Jt=i("quSY"),Zt=i("7vd5"),ei=i("3/UW"),ti=i("Gql0"),ii=i("vEO/");const si=function(){return{category:"learn"}};function ni(e,t){1&e&&(c.jc(0,"p"),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.yc(2,1,"Time shown is referred to the location time of the sessions:",c.Hc(4,si))," "))}function ai(e,t){if(1&e&&(c.jc(0,"div",6),c.ec(1,"ui-notification-inline",9),c.wc(2,"t"),c.wc(3,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("title",c.xc(2,3,e.waitingListTitle))("message",c.xc(3,5,e.waitingListMessage))("type","alert")}}let oi=(()=>{class e{constructor(e,t,i,s,n,a){this.backendService=e,this.fb=t,this.ref=i,this.store=s,this.overviewActions=n,this.formatterService=a,this.sessionFieldsParams={unenroll_session:{},enroll_session:{}},this.waitingListTitle=E.a.t("course","Session waiting list"),this.waitingListMessage=E.a.t("course","The maximum number of seats has been reached for the session you are switching to. You will be placed on the waiting list."),this.sessions=[],this.available_enroll=[],this.sessionChangeForm=this.fb.group({enroll_session:[],unenroll_session:[]})}ngOnInit(){this.fillSessionsToDropdowns()}changeSessionRequest(){return new Promise(e=>{const t=this.sessionChangeForm.getRawValue(),i=t.enroll_session.value,s={old_session_id:t.unenroll_session.value,course_id:this.idCourse,new_session:{id:t.enroll_session.value,slug_name:this.sessions.find(e=>{if(e.id_session==i)return e.slug_name})}};this.sessionChanges().pipe(Object(ee.a)(1)).subscribe(e=>{window.location.href=`learn/course/${this.idCourse}/session/${e.id}/${e.slug_name}`}),this.store.dispatch(this.overviewActions.changeEnrollmentSession(s)),e(!0)})}sessionChanges(){return a.a.create(e=>{let t=null,i=new Jt.a;i=this.store.select(ie.m).subscribe(s=>{s.current_session&&(t=null===t?Number(s.current_session.id):t,Number(s.current_session.id)!==t&&(i.unsubscribe(),e.next(s.current_session),e.complete()))})})}fillSessionsToDropdowns(){const e=[],t=[];this.sessions.forEach(i=>{let s,n,a="",o="";const r=i.dates.length-1;this.useLocationTimezone?(s=new Kt.a(`${i.dates[0].date} ${i.dates[0].start_hour}`).formatUTC(Object(Zt.l)(Object(Zt.i)(),"short","medium")),a=` (${i.dates[0].timezone})`,n=new Kt.a(`${i.dates[r].date} ${i.dates[r].end_hour}`).formatUTC(Object(Zt.l)(Object(Zt.i)(),"short","medium")),o=` (${i.dates[r].timezone})`,Object(Zt.j)()===i.dates[0].timezone&&Object(Zt.j)()===i.dates[r].timezone&&(a="",o="")):(s=(new Xt.a).transform(i.start_date),n=(new Xt.a).transform(i.end_date)),!1===this.useLocationTimezone&&i.dates[0].timezone===i.dates[r].timezone&&(a="",o="");let c={value:i.id_session,label:`<strong> ${i.name} </strong>\n                        <small> ${s}${a} - ${n}${o} </small>\n                    `};c=this.betterDateTimeFeature(i,c),i.enrolled.can_enroll_session?t.push(c):i.enrolled.is_enrolled&&e.push(c)}),this.sessionFieldsParams={unenroll_session:{label:E.a.t("standard","Unenroll from this session"),options:e,name:"unenroll_session",value:""},enroll_session:{label:E.a.t("standard","Enroll into this session"),options:t,name:"enroll_session",value:""}},this.ref.markForCheck()}betterDateTimeFeature(e,t){const i=Object(Zt.l)(Object(Zt.i)(),Zt.a,Zt.a),s=Object(Zt.j)(),n=this.formatterService.getFormattedTimezone(s),a=new Kt.a(e.start_date).formatTimezoned(i,s),o=new Kt.a(e.end_date).formatTimezoned(i,s);return t.label=`\n            <strong>${e.name}</strong>\n            <div class="datetime-and-timezone-text">${a.toUpperCase()} | ${o.toUpperCase()} | ${n}</div>\n        `,t}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(Ke.d),c.dc(c.i),c.dc(v.d),c.dc(ei.a),c.dc(ti.b))},e.\u0275cmp=c.Xb({type:e,selectors:[["change-session"]],inputs:{sessions:"sessions",available_enroll:"available_enroll",idCourse:"idCourse",useLocationTimezone:"useLocationTimezone"},decls:12,vars:20,consts:[[1,"change-session"],[1,"description"],[4,"ngIf"],[1,"session-change-form","text-black",3,"formGroup"],[1,"row","dropwdown",2,"padding-top","24px"],[3,"getLabels","floating_label","label","options","name","value","inputFormControl"],[1,"row",2,"padding-top","24px"],["customMaxHeight","200px",3,"getLabels","floating_label","label","options","name","value","inputFormControl"],["class","row","style","padding-top:24px",4,"ngIf"],[3,"title","message","type"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"p"),c.fd(3),c.wc(4,"t"),c.ic(),c.dd(5,ni,3,5,"p",2),c.ic(),c.jc(6,"form",3),c.jc(7,"div",4),c.ec(8,"dropdown",5),c.ic(),c.jc(9,"div",6),c.ec(10,"dropdown",7),c.ic(),c.dd(11,ai,4,7,"div",8),c.ic(),c.ic()),2&e&&(c.Mb(3),c.hd(" ",c.xc(4,18,"You will be unenrolled from the current session, then enrolled into the selected session. Are you sure you want to proceed with this session change?")," "),c.Mb(2),c.Dc("ngIf",t.useLocationTimezone),c.Mb(1),c.Dc("formGroup",t.sessionChangeForm),c.Mb(2),c.Dc("getLabels",!0)("floating_label",!0)("label",t.sessionFieldsParams.unenroll_session.label)("options",t.sessionFieldsParams.unenroll_session.options)("name",t.sessionFieldsParams.unenroll_session.name)("value",t.sessionFieldsParams.unenroll_session.value)("inputFormControl",t.sessionChangeForm.controls.unenroll_session),c.Mb(2),c.Dc("getLabels",!0)("floating_label",!0)("label",t.sessionFieldsParams.enroll_session.label)("options",t.sessionFieldsParams.enroll_session.options)("name",t.sessionFieldsParams.enroll_session.name)("value",t.sessionFieldsParams.enroll_session.value)("inputFormControl",t.sessionChangeForm.controls.enroll_session),c.Mb(1),c.Dc("ngIf",t.available_enroll[t.sessionChangeForm.getRawValue().enroll_session.value]<=0))},directives:[Ae.p,Ke.y,Ke.p,Ke.i,ii.a,b.Ec],pipes:[E.b],styles:["[_nghost-%COMP%]     .datetime-and-timezone-text{font-size:var(--hyd-typography-size-xs)}[_nghost-%COMP%]     .dropdown-head .datetime-and-timezone-text{color:var(--ui-color-typography-secondary)}"]}),e})();var ri=i("lJxs"),ci=i("j5TW"),li=i("NCOs");function di(e,t){if(1&e&&c.ec(0,"img",9),2&e){const e=c.vc();c.Nb("src",e.bannerImage,c.Xc)}}function ui(e,t){1&e&&(c.jc(0,"div",10),c.ec(1,"i",11),c.ic())}function hi(e,t){if(1&e&&c.ec(0,"line-limiter",12),2&e){const e=c.vc();c.Dc("content",e.limiter.content)("lines",e.limiter.lines)("removeHtml",e.limiter.removeHtml)("more_label",e.limiter.more_label)("less_label",e.limiter.less_label)("show_label",e.limiter.showLabel)}}let pi=(()=>{class e{constructor(e,t,i){this.backendService=e,this.pageService=t,this.formatter=i,this.collection="assets",this.hasImage=!0,this.showLimiter=!1,this.limiter={content:"",lines:5,removeHtml:!1,more_label:E.a.t("standard","Show more"),less_label:E.a.t("standard","Show less"),showLabel:!0}}ngOnInit(){if(this.initLimiter(this.course),!this.course.partner_data||""===this.course.partner_data.logo_full_path)return this.bannerImage="",void(this.hasImage=!1);this.bannerImage=this.course.partner_data.logo_full_path}renderJSON(e){const t=JSON.parse(e),i=o.a.getInstance().language;return"single_value"===t.type?t.value:t.values[i]?t.values[i]:t.values.en}initLimiter(e){this.backendService.request("/manage/v1/contentpartnerfields","GET",{id_partner:e.partner_data.id,as_array:!0,course_id:e.id}).pipe(Object(ri.a)(e=>e.data.items)).subscribe(t=>{this.limiter={content:this.renderBannerDescription(e.partner_data,t),lines:5,removeHtml:!1,more_label:E.a.t("standard","Show more"),less_label:E.a.t("standard","Show less"),showLabel:t&&t.length>1},this.showLimiter=!0})}renderBannerDescription(e,t){let i="";return i+=this.renderJSON(e.description),void 0!==t&&(i+="<br/>",i+='<ul class="partner-additional-fields-list">',t.forEach(e=>{switch(e.type){case"date":const t=Object(ci.a)(this.formatter,e.value);i+="<li><strong>"+e.title+"</strong>"+t+"</li>";break;case"dropdown":let s="";e.options.forEach(t=>{e.value===t.id&&(s=t.label)}),i+="<li><strong>"+e.title+"</strong>"+s+"</li>";break;default:let n="";null!==e.value&&(n=e.value),i+="<li><strong>"+e.title+"</strong>"+n+"</li>"}}),i+="</ul>",i+="<br/>"),i}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(O.a),c.dc(ti.b))},e.\u0275cmp=c.Xb({type:e,selectors:[["partner-banner"]],inputs:{course:"course"},decls:12,vars:7,consts:[[1,"partner-banner","bg-white","border-grey-light","mdl-shadow--2dp"],[1,"partner-banner-image"],[1,"text-grey-mid","hint","partner-provided"],["alt","",4,"ngIf"],["class","no-image-wrap bg-grey-light",4,"ngIf"],[1,"partner-banner-content"],[1,"title","title-popup","bolded"],[1,"description"],[3,"content","lines","removeHtml","more_label","less_label","show_label",4,"ngIf"],["alt",""],[1,"no-image-wrap","bg-grey-light"],[1,"zmdi","zmdi-image-o"],[3,"content","lines","removeHtml","more_label","less_label","show_label"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"p",2),c.fd(3),c.wc(4,"t"),c.ic(),c.dd(5,di,1,1,"img",3),c.dd(6,ui,2,0,"div",4),c.ic(),c.jc(7,"div",5),c.jc(8,"h2",6),c.fd(9),c.ic(),c.jc(10,"div",7),c.dd(11,hi,1,6,"line-limiter",8),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(3),c.hd("",c.xc(4,5,"Content provided by"),":"),c.Mb(2),c.Dc("ngIf",t.hasImage),c.Mb(1),c.Dc("ngIf",!t.hasImage),c.Mb(3),c.gd(t.renderJSON(t.course.partner_data.name)),c.Mb(2),c.Dc("ngIf",t.showLimiter))},directives:[Ae.p,li.a],pipes:[E.b],encapsulation:2}),e})();var mi=i("V3DN"),gi=i("5nM7"),bi=i("7o/Q");function fi(e){return t=>t.lift(new vi(e))}class vi{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new _i(e,this.predicate))}}class _i extends bi.a{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var wi=i("zp1y"),yi=i("eIep"),Ci=i("vkgz"),Si=i("Rm6y"),Ti=i("LVoI"),ki=i("zMZL"),Ii=i("sTJh"),xi=i("LRne"),Di=i("1uah"),Oi=i("KaK6"),Ei=i("O2fu"),Pi=i("jhN1"),Mi=i("4Y2v");function Ai(e,t){if(1&e&&(c.ec(0,"div",4),c.wc(1,"sanitizeHtml")),2&e){const e=c.vc();c.Dc("innerHTML",c.xc(1,1,e.description),c.Vc)}}function Li(e,t){1&e&&(c.jc(0,"div",9),c.ec(1,"span",10),c.ic())}function ji(e,t){1&e&&(c.jc(0,"div",9),c.ec(1,"span",10),c.ic())}function Fi(e,t){if(1&e&&(c.jc(0,"div",5),c.dd(1,Li,2,0,"div",6),c.jc(2,"div",7),c.fd(3),c.ic(),c.ec(4,"div",8),c.dd(5,ji,2,0,"div",6),c.ic()),2&e){const e=t.$implicit,i=t.index,s=c.vc();c.Mb(1),c.Dc("ngIf",0==i),c.Mb(2),c.gd(e.title),c.Mb(1),c.Dc("innerHTML",e.rendered,c.Vc),c.Mb(1),c.Dc("ngIf",i<s.additional_fields_count)}}let Ri=(()=>{class e{constructor(e,t,i){this._backendService=e,this.formatter=t,this.sanitizer=i}ngOnInit(){this.course_description_header=E.a.t("standard","Course Description"),this.showDescription=null!==this.widget.params.show_desc,this._backendService.request("/learn/v1/coursedesc/getCourseDescription?course_id="+this.course_id+"&current_session_id="+this.current_session_id+"&display_type="+this.widget.display_type,"GET").subscribe(e=>{this.title=e.data.course_description.Title,this.description=e.data.course_description.Description,this.additional_fields=this.filterVisibleAdditionalFields(e.data.course_description.Additional_fields),this.additional_fields_count=this.additional_fields.length-1})}filterVisibleAdditionalFields(e){let t=[];return e.forEach(e=>{this.widget.params.additional_fields&&this.widget.params.additional_fields.find(t=>t===e.id)&&"-"!==e.value&&(e.rendered=this.renderFieldValue(e),t.push(e))}),t}renderFieldValue(e){switch(e.type){case"date":return Object(ci.a)(this.formatter,e.value);case"textarea":let t="";return null!==e.value&&(t=e.value),this.sanitizer.bypassSecurityTrustHtml(t);default:let i="";return null!==e.value&&(i=e.value),i}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(ti.b),c.dc(Pi.b))},e.\u0275cmp=c.Xb({type:e,selectors:[["course-description"]],inputs:{course_id:"course_id",widget:"widget",current_session_id:"current_session_id"},decls:6,vars:5,consts:[[1,"course-widget","course-description"],[1,"course-widget-title"],["class","default-headings-styles default-list-style description-content",3,"innerHTML",4,"ngIf"],["class","mdl-grid",4,"ngFor","ngForOf"],[1,"default-headings-styles","default-list-style","description-content",3,"innerHTML"],[1,"mdl-grid"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[1,"mdl-cell","mdl-cell--3-col","bolded"],[1,"mdl-cell","mdl-cell--9-col",3,"innerHTML"],[1,"mdl-cell","mdl-cell--12-col"],[1,"separator-horizontal"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.fd(2),c.wc(3,"t"),c.ic(),c.dd(4,Ai,2,3,"div",2),c.dd(5,Fi,6,4,"div",3),c.ic()),2&e&&(c.Mb(2),c.gd(c.xc(3,3,t.course_description_header)),c.Mb(2),c.Dc("ngIf",t.showDescription),c.Mb(1),c.Dc("ngForOf",t.additional_fields))},directives:[Ae.p,Ae.o],pipes:[E.b,Mi.a],encapsulation:2}),e})();var Ni=i("BPI6"),Ui=i("a4yA"),qi=i("Xt1e"),zi=i("yfT8"),Vi=i("JIr8");let Bi=(()=>{class e{constructor(e,t,i){this._docLayoutService=e,this._backend=t,this._store=i,this._questionPostEndpoint=new zi.a("/share/v1/questions",Ie.a.POST)}postNewQuestion(e){return this._backend.request(this._questionPostEndpoint.url,this._questionPostEndpoint.verb,{title:e,id_course:this.idCourse,id_lo:this.idLearningObject}).pipe(Object(Ci.a)(e=>{this._store.dispatch(Object(qi.b)(e.data))}),Object(Vi.a)(e=>(this.errorSnackbar(e.message[0]),Object(xi.a)(e))))}errorSnackbar(e){this._docLayoutService.toast.showToast({message:e,type:"error"})}}return e.\u0275fac=function(t){return new(t||e)(c.nc(M.a),c.nc(S.a),c.nc(v.d))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var Gi=i("ahFQ"),$i=i("3E0/");const Hi=["menuTrigger"],Yi=["menuWrapper"];function Wi(e,t){1&e&&c.fc(0)}const Qi=function(e){return{status:e}},Ki=function(e){return{hidden:e}};function Xi(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",9),c.ec(2,"i",10),c.dd(3,Wi,1,0,"ng-container",11),c.ic(),c.jc(4,"span",12),c.jc(5,"span",13),c.fd(6),c.ic(),c.jc(7,"div",14),c.jc(8,"span",15),c.fd(9),c.wc(10,"t"),c.ic(),c.jc(11,"span",16),c.fd(12),c.ic(),c.ic(),c.ic(),c.jc(13,"span",17),c.ec(14,"ui-icon",18),c.ic(),c.gc()),2&e){const e=c.vc(),t=c.Rc(11);c.Mb(2),c.Dc("ngClass",e.learningObjectType[e.selectedOption.type].icon),c.Mb(1),c.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",c.Ic(10,Qi,e.selectedOption.status)),c.Mb(3),c.gd(null==e.selectedOption?null:e.selectedOption.name),c.Mb(3),c.gd(c.xc(10,8,e.learningObjectType[e.selectedOption.type].title)),c.Mb(2),c.Dc("ngClass",c.Ic(12,Ki,!e.selectedOption.duration)),c.Mb(1),c.hd("| ",e.selectedOption.duration,""),c.Mb(2),c.Dc("name",e.menuOpen?"caret-up":"caret-down")}}function Ji(e,t){if(1&e&&(c.ec(0,"i",19),c.jc(1,"span",12),c.jc(2,"span",13),c.fd(3),c.wc(4,"t"),c.ic(),c.ic(),c.jc(5,"span",17),c.ec(6,"ui-icon",18),c.ic()),2&e){const e=c.vc();c.Dc("ngClass",e.defaultOption.icon),c.Mb(3),c.gd(c.xc(4,3,e.defaultOption.label)),c.Mb(3),c.Dc("name",e.menuOpen?"caret-up":"caret-down")}}function Zi(e,t){1&e&&c.fc(0)}const es=function(e){return{"bolded ui-color-typography-accent":e}};function ts(e,t){if(1&e){const e=c.kc();c.jc(0,"dcb-ui-button-dropdown-option",20),c.rc("trigger",function(){c.Uc(e);const i=t.$implicit;return c.vc().select(i)}),c.jc(1,"div",21),c.jc(2,"div",9),c.ec(3,"i",10),c.dd(4,Zi,1,0,"ng-container",11),c.ic(),c.jc(5,"div",22),c.jc(6,"span",23),c.fd(7),c.ic(),c.jc(8,"div",24),c.jc(9,"span",15),c.fd(10),c.wc(11,"t"),c.ic(),c.jc(12,"span",16),c.fd(13),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=t.$implicit,i=c.vc(),s=c.Rc(11);c.Mb(3),c.Dc("ngClass",i.learningObjectType[e.type].icon),c.Mb(1),c.Dc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.Ic(10,Qi,e.status)),c.Mb(2),c.Dc("ngClass",c.Ic(12,es,(null==i.selectedOption?null:i.selectedOption.id)===e.id)),c.Mb(1),c.gd(e.name),c.Mb(3),c.gd(c.xc(11,8,i.learningObjectType[e.type].title)),c.Mb(2),c.Dc("ngClass",c.Ic(14,Ki,!e.duration)),c.Mb(1),c.hd("| ",e.duration,"")}}function is(e,t){1&e&&c.ec(0,"i",30)}function ss(e,t){1&e&&c.ec(0,"i",31)}function ns(e,t){1&e&&c.ec(0,"i",32)}function as(e,t){1&e&&c.ec(0,"i",32)}function os(e,t){1&e&&c.ec(0,"i",33)}function rs(e,t){1&e&&(c.hc(0,25),c.dd(1,is,1,0,"i",26),c.dd(2,ss,1,0,"i",27),c.dd(3,ns,1,0,"i",28),c.dd(4,as,1,0,"i",28),c.dd(5,os,1,0,"i",29),c.gc()),2&e&&(c.Dc("ngSwitch",t.status),c.Mb(1),c.Dc("ngSwitchCase","locked"),c.Mb(1),c.Dc("ngSwitchCase","failed"),c.Mb(1),c.Dc("ngSwitchCase","in_progress"),c.Mb(1),c.Dc("ngSwitchCase","incomplete"),c.Mb(1),c.Dc("ngSwitchCase","completed"))}const cs=function(e){return{opened:e}};let ls=(()=>{class e{constructor(e,t,i){this._store=e,this._element=t,this._ref=i,this.linkToLO=new c.q,this.defaultOption={icon:"zmdi zmdi-link",label:Je.a.t("standard","Link your question to course content")},this.menuOpen=!1,this.menuTopPosition=0,this.menuBottomPosition=0,this.learningObjectType=Gi.d}clickOutside(e){var t,i;(null===(i=null===(t=this._element)||void 0===t?void 0:t.nativeElement)||void 0===i?void 0:i.contains(null==e?void 0:e.target))||(this.menuOpen=!1)}ngOnInit(){this.selectOptions=this._store.select(ie.b)}select(e){this.selectedOption=e,this.linkToLO.emit(e),this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen,this._ref.detectChanges(),this.menuOpen&&Object(xi.a)({}).pipe(Object($i.a)(200),Object(ee.a)(1)).subscribe(()=>this._setMenuPosition())}_setMenuPosition(){const e=this.menuTrigger.nativeElement.getBoundingClientRect().height,t=this.menuWrapper.nativeElement.getBoundingClientRect().height;document.body.scrollHeight-document.body.scrollTop+t<=document.body.clientHeight?(this.menuTopPosition=null,this.menuBottomPosition=e):(this.menuTopPosition=e,this.menuBottomPosition=null),this._ref.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(v.d),c.dc(c.o),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-course-question-widget-lo-picker"]],viewQuery:function(e,t){if(1&e&&(c.md(Hi,1,c.o),c.md(Yi,1,c.o)),2&e){let e;c.Qc(e=c.sc())&&(t.menuTrigger=e.first),c.Qc(e=c.sc())&&(t.menuWrapper=e.first)}},hostBindings:function(e,t){1&e&&c.rc("click",function(e){return t.clickOutside(e)},!1,c.Sc)},outputs:{linkToLO:"linkToLO"},decls:12,vars:14,consts:[[3,"fullWidth","uppercase","trigger"],["menuTrigger",""],[1,"cqw-button-content"],[4,"ngIf","ngIfElse"],["defaultOptionTempl",""],["role","menu",1,"cqw-custom-select-menu","bg-white","ui-button-dropdown-menu","ui-shadow-md",3,"ngClass"],["menuWrapper",""],["class","ui-button-dropdown-option-content ui-color-typography-primary",3,"trigger",4,"ngFor","ngForOf"],["courseStatus",""],[1,"cqw-custom-select-icon"],[1,"course-type-icon","menu-option-icon",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cqw-lo-selected"],[1,"cqw-selected-name","ui-color-typography-accent"],[1,"cqw-selected-sub-label","text-grey-mid"],[1,"lo-type-title"],[3,"ngClass"],[1,"caret-icon"],["size","sm",3,"name"],[1,"selected-option-icon","course-type-icon",3,"ngClass"],[1,"ui-button-dropdown-option-content","ui-color-typography-primary",3,"trigger"],[1,"cqw-custom-select-option"],[1,"cqw-custom-option-info"],[1,"cqw-custom-option-info-label",3,"ngClass"],[1,"cqw-custom-option-info-sub-label","text-grey-mid"],[3,"ngSwitch"],["class","icon-status zmdi zmdi-lock",4,"ngSwitchCase"],["class","icon-status text-error zmdi zmdi-close-circle",4,"ngSwitchCase"],["class","icon-status text-warning zmdi zmdi-check-circle",4,"ngSwitchCase"],["class","icon-status text-positive-green zmdi zmdi-check-circle",4,"ngSwitchCase"],[1,"icon-status","zmdi","zmdi-lock"],[1,"icon-status","text-error","zmdi","zmdi-close-circle"],[1,"icon-status","text-warning","zmdi","zmdi-check-circle"],[1,"icon-status","text-positive-green","zmdi","zmdi-check-circle"]],template:function(e,t){if(1&e&&(c.jc(0,"dcb-ui-button-text",0,1),c.rc("trigger",function(){return t.toggleMenu()}),c.jc(2,"div",2),c.dd(3,Xi,15,14,"ng-container",3),c.dd(4,Ji,7,5,"ng-template",null,4,c.ed),c.ic(),c.ic(),c.jc(6,"div",5,6),c.dd(8,ts,14,16,"dcb-ui-button-dropdown-option",7),c.wc(9,"async"),c.ic(),c.dd(10,rs,6,6,"ng-template",null,8,c.ed)),2&e){const e=c.Rc(5);c.Dc("fullWidth",!0)("uppercase",!1),c.Mb(3),c.Dc("ngIf",!!t.selectedOption)("ngIfElse",e),c.Mb(3),c.cd("top",t.menuTopPosition,"px")("bottom",t.menuBottomPosition,"px"),c.Dc("ngClass",c.Ic(12,cs,t.menuOpen)),c.Mb(2),c.Dc("ngForOf",c.xc(9,10,t.selectOptions))}},directives:[b.G,Ae.p,Ae.n,Ae.o,Ae.u,b.Eb,b.v,Ae.r,Ae.s],pipes:[Ae.b,E.b],styles:["lrn-course-question-widget-lo-picker{position:relative;display:block;z-index:calc(var(--ui-zindex-sticky) + 1);border-top:solid var(--ui-size-border-xs) var(--ui-color-border-baseline);border-bottom:solid var(--ui-size-border-xs) var(--ui-color-border-baseline)}lrn-course-question-widget-lo-picker dcb-ui-button-dropdown-option{box-sizing:border-box}lrn-course-question-widget-lo-picker dcb-ui-button-text{cursor:pointer;box-sizing:border-box}lrn-course-question-widget-lo-picker dcb-ui-button-text button{display:block;justify-content:flex-start}lrn-course-question-widget-lo-picker .cqw-button-content{display:flex;flex-grow:1;flex-basis:100%;align-items:center;justify-content:space-between}lrn-course-question-widget-lo-picker .cqw-button-content .cqw-lo-selected{display:flex;flex-direction:column;flex-grow:1;text-align:initial}lrn-course-question-widget-lo-picker .cqw-button-content .lo-type-title{font-weight:var(--ui-typography-weight-regular)}lrn-course-question-widget-lo-picker .caret-icon,lrn-course-question-widget-lo-picker .selected-option-icon{padding:var(--ui-spacing-md)}lrn-course-question-widget-lo-picker .cqw-custom-select-icon{position:relative;margin:var(--ui-spacing-xs) var(--ui-spacing-md)}lrn-course-question-widget-lo-picker .cqw-custom-select-icon .menu-option-icon{color:var(--ui-color-button-label-neutral)}lrn-course-question-widget-lo-picker .cqw-custom-select-icon .course-type-icon{font-size:var(--ui-typography-size-xl)}lrn-course-question-widget-lo-picker .cqw-custom-select-icon .icon-status{position:absolute;top:calc(var(--ui-spacing-xs) * -1);right:calc(var(--ui-spacing-xs) * -1)}lrn-course-question-widget-lo-picker .cqw-custom-select-option{display:flex;align-items:center}lrn-course-question-widget-lo-picker .cqw-custom-select-menu{flex-wrap:nowrap;position:absolute;width:100%;max-height:210px;overflow-y:auto;overflow-x:hidden;z-index:var(--ui-zindex-sticky);background-color:var(--ui-color-layout-surface);opacity:0;pointer-events:none;transform:scale(0);transition:opacity var(--ui-motion-duration-short) var(--ui-motion-easing-default),transform var(--ui-motion-duration-short) var(--ui-motion-easing-entering)}lrn-course-question-widget-lo-picker .cqw-custom-select-menu.opened{transition:opacity var(--ui-motion-duration-short) var(--ui-motion-easing-default),transform var(--ui-motion-duration-short) var(--ui-motion-easing-leaving);opacity:1;transform:scale(1);pointer-events:auto}"],encapsulation:2}),e})();var ds=i("rnoZ"),us=i("y0sE");function hs(e,t){1&e&&c.fc(0)}function ps(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",2),c.jc(2,"div",3),c.dd(3,hs,1,0,"ng-container",4),c.ic(),c.ic(),c.gc()),2&e){c.vc();const e=c.Rc(2);c.Mb(3),c.Dc("ngTemplateOutlet",e)}}function ms(e,t){if(1&e&&c.ec(0,"doc-questions-and-answers-widget",18),2&e){const e=c.vc(2);c.Dc("data",e.qnaWidgetConfig)("size",e.widgetSize)}}function gs(e,t){1&e&&c.ec(0,"ui-spinner",19),2&e&&c.Dc("color","neutral")("size","md")}function bs(e,t){if(1&e){const e=c.kc();c.jc(0,"div",5),c.jc(1,"div",6),c.jc(2,"h3",7),c.fd(3),c.wc(4,"t"),c.ic(),c.jc(5,"div",8),c.fd(6),c.wc(7,"t"),c.ic(),c.ic(),c.jc(8,"lrn-course-question-widget-lo-picker",9),c.rc("linkToLO",function(t){return c.Uc(e),c.vc().linkLearningObjectToQuestion(t)}),c.ic(),c.jc(9,"div",10),c.ec(10,"ui-avatar",11),c.ec(11,"rich-textarea",12),c.ic(),c.jc(12,"div",13),c.jc(13,"ui-button-text",14),c.rc("trigger",function(){return c.Uc(e),c.vc().postNewQuestion()}),c.wc(14,"t"),c.ic(),c.ic(),c.ic(),c.jc(15,"div",15),c.dd(16,ms,1,2,"doc-questions-and-answers-widget",16),c.dd(17,gs,1,2,"ng-template",null,17,c.ed),c.ic()}if(2&e){const e=c.Rc(18),t=c.vc();c.Mb(3),c.hd(" ",c.xc(4,10,t.dictionary.title)," "),c.Mb(3),c.hd(" ",c.xc(7,12,t.dictionary.description)," "),c.Mb(4),c.Dc("imageUrl",t.loggedUser.avatar)("text",t.loggedUser.initials)("iconName",t.loggedUser.initials?"":"user"),c.Mb(1),c.Dc("preset",t.basePreset)("inputFormControl",t.textareaControl),c.Mb(2),c.Dc("label",c.xc(14,14,t.dictionary.cta)),c.Mb(3),c.Dc("ngIf",t.showWidget)("ngIfElse",e)}}let fs=(()=>{class e{constructor(e,t,i){this._store=e,this._route=t,this._service=i,this.overview=!1,this.basePreset=Ui.c.BASE,this.dictionary={title:Je.a.t("standard","Question & Answer"),description:Je.a.t("standard","Link your question to course content"),cta:Je.a.t("test","New question"),noRelation:Je.a.t("app7020","Select content before submitting a question")},this.qnaWidgetConfig={id:"course-question-widget",type:"questionsandanswers",settings:{showFiltersSelector:!1,isLazyLoading:!0,defaultSortBy:Ni.a.DESC,showQuestionTypeFilter:!0,showLoadMoreLink:!1,showSearchBar:!1,showSortBy:!0,showViewAllLink:!1,maxDisplayable:"10",isInlineView:!1}},this.showWidget=!1,this.widgetSize=12,this.textareaControl=new Ke.e(""),this.loggedUser={avatar:"",initials:""}}ngOnInit(){this.loggedUser={avatar:k.c.getInstance().avatar_url,initials:k.c.getInstance().user_initials},this.widgetSize=this.widget.columns_span,this._route.params.forEach(e=>{this.qnaWidgetConfig.settings.courseId=e.id,this._service.idCourse=e.id,this.showWidget=!0})}linkLearningObjectToQuestion(e){this._service.idLearningObject=e.id}postNewQuestion(){this.textareaControl.value&&(this._service.idLearningObject?this._service.postNewQuestion(this.textareaControl.value).subscribe(()=>{this.textareaControl.reset(""),this.textareaControl.updateValueAndValidity()}):this._service.errorSnackbar(this.dictionary.noRelation))}}return e.\u0275fac=function(t){return new(t||e)(c.dc(v.d),c.dc(s.a),c.dc(Bi))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-course-question-widget"]],hostVars:2,hostBindings:function(e,t){2&e&&c.Vb("overview",t.overview)},inputs:{widget:"widget",overview:"overview"},features:[c.Lb([Bi])],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["courseQuestionWidget",""],[1,"ui-row"],[1,"ui-col-24","course-question-widget__wrap"],[4,"ngTemplateOutlet"],[1,"ask-question-content","bg-white","ui-shadow-md"],[1,"ask-question-title"],[1,"ui-typography-heading-3"],[1,"ui-typography-body"],[3,"linkToLO"],[1,"ask-question-text-area"],["size","md",3,"imageUrl","text","iconName"],[3,"preset","inputFormControl"],[1,"ask-question-cta"],["color","accent",3,"label","trigger"],[1,"course-question-widget"],[3,"data","size",4,"ngIf","ngIfElse"],["showLoadingSpinner",""],[3,"data","size"],[3,"color","size"]],template:function(e,t){if(1&e&&(c.dd(0,ps,4,1,"ng-container",0),c.dd(1,bs,19,16,"ng-template",null,1,c.ed)),2&e){const e=c.Rc(2);c.Dc("ngIf",t.overview)("ngIfElse",e)}},directives:[Ae.p,Ae.u,ls,b.e,ds.a,b.G,us.a,b.fd],pipes:[E.b],styles:[".overview[_nghost-%COMP%]{display:block;padding:var(--ui-spacing-lg) 0}[_nghost-%COMP%]:not(.overview){display:grid;grid-template-columns:1fr;grid-template-rows:auto;grid-row-gap:var(--ui-spacing-lg)}[_nghost-%COMP%]   .ask-question-content[_ngcontent-%COMP%]{position:relative;z-index:1}[_nghost-%COMP%]   .course-question-widget[_ngcontent-%COMP%]{position:relative;z-index:0}[_nghost-%COMP%]   .course-question-widget__wrap[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto;grid-row-gap:var(--ui-spacing-lg)}[_nghost-%COMP%]   .ask-question-title[_ngcontent-%COMP%]{padding:var(--ui-spacing-lg) var(--ui-spacing-lg) var(--ui-spacing-xxs)}[_nghost-%COMP%]   .ask-question-text-area[_ngcontent-%COMP%]{display:grid;grid-template-columns:var(--ui-size-avatar-md) 1fr;grid-column-gap:var(--ui-spacing-xs);padding:var(--ui-spacing-lg) var(--ui-spacing-lg) 0}[_nghost-%COMP%]   .ask-question-cta[_ngcontent-%COMP%]{text-align:right;padding:var(--ui-spacing-xxs) var(--ui-spacing-lg) var(--ui-spacing-lg)}[dir=rtl]   [_nghost-%COMP%]   .ask-question-cta[_ngcontent-%COMP%]{text-align:left}"]}),e})();var vs=i("3zhW");function _s(e,t){if(1&e&&(c.jc(0,"div",10),c.fd(1),c.ic()),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Mb(1),c.gd(t.getInstructorFullName(e))}}function ws(e,t){if(1&e&&(c.jc(0,"div",10),c.fd(1),c.wc(2,"slice"),c.ic()),2&e){const e=c.vc().$implicit;c.Mb(1),c.gd(c.yc(2,1,e.userid,1))}}function ys(e,t){if(1&e&&(c.jc(0,"div",11),c.ec(1,"a",12),c.ic()),2&e){const e=c.vc().$implicit;c.Mb(1),c.Fc("href","mailto:",e.email,"",c.Xc)}}function Cs(e,t){if(1&e&&(c.jc(0,"div",6),c.ec(1,"avatar",7),c.dd(2,_s,2,1,"div",8),c.dd(3,ws,3,4,"div",8),c.dd(4,ys,2,1,"div",9),c.ic()),2&e){const e=t.$implicit,i=c.vc(2);c.Mb(1),c.Dc("image_url",e.urlAvatar)("size",i.avatarParams.size),c.Mb(1),c.Dc("ngIf",e.firstname.length>0&&e.lastname.length>0),c.Mb(1),c.Dc("ngIf",0==e.firstname.length||0==e.lastname.length),c.Mb(1),c.Dc("ngIf",e.email.length>0)}}const Ss=function(e){return{"not-border":e}};function Ts(e,t){if(1&e&&(c.jc(0,"div",4),c.dd(1,Cs,5,5,"div",5),c.ic()),2&e){const e=c.vc();c.Dc("ngClass",c.Ic(2,Ss,0==e.instructors.length)),c.Mb(1),c.Dc("ngForOf",e.instructors)}}const ks=function(){return{category:"classroom"}};function Is(e,t){1&e&&(c.jc(0,"div",13),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.gd(c.yc(2,1,"(No instructors)",c.Hc(4,ks))))}const xs=function(){return{category:"standard"}};let Ds=(()=>{class e{constructor(e){this._backendService=e,this.apiUrl="/learn/v1/instructor/getInstructorData"}ngOnInit(){let e={user_id:this.user_id,course_id:this.course_id};null!=this.session_id&&(e.session_id=this.session_id),this._backendService.request(this.apiUrl,"GET",e).subscribe(e=>{this.instructors=e.data.instructors}),this.avatarParams={image_url:"",size:40}}getInstructorFullName(e){return k.b.getInstance().getFullName(e)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],inputs:{user_id:"user_id",course_id:"course_id",session_id:"session_id"},decls:6,vars:7,consts:[[1,"course-widget","myinstructor-list"],[1,"course-widget-title"],["class","myinstructor-content",3,"ngClass",4,"ngIf"],["class","myinstructor-nodata",4,"ngIf"],[1,"myinstructor-content",3,"ngClass"],["class","myinstructor-row text-basic-size",4,"ngFor","ngForOf"],[1,"myinstructor-row","text-basic-size"],[3,"image_url","size"],["class","myinstructor-name",4,"ngIf"],["class","myinstructor-icon",4,"ngIf"],[1,"myinstructor-name"],[1,"myinstructor-icon"],[1,"fa","fa-envelope","fa-lg",3,"href"],[1,"myinstructor-nodata"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.fd(2),c.wc(3,"t"),c.ic(),c.dd(4,Ts,2,4,"div",2),c.dd(5,Is,3,5,"div",3),c.ic()),2&e&&(c.Mb(2),c.gd(c.yc(3,3,"Teacher(s)",c.Hc(6,xs))),c.Mb(2),c.Dc("ngIf",t.instructors),c.Mb(1),c.Dc("ngIf",t.instructors&&0==t.instructors.length))},directives:[Ae.p,Ae.n,Ae.o,vs.a],pipes:[E.b,Ae.x],encapsulation:2}),e})();function Os(e,t){if(1&e&&(c.jc(0,"div",5),c.jc(1,"div",6),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",7),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"div",7),c.fd(8),c.wc(9,"t"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.gd(c.xc(3,3,e.forum_header)),c.Mb(3),c.gd(c.xc(6,5,e.discussions_header)),c.Mb(3),c.gd(c.xc(9,7,e.posts_header))}}const Es=function(e){return[e]};function Ps(e,t){if(1&e&&(c.jc(0,"div",8),c.jc(1,"div",9),c.jc(2,"a",10),c.fd(3),c.ic(),c.ic(),c.jc(4,"div",11),c.fd(5),c.ic(),c.jc(6,"div",11),c.fd(7),c.ic(),c.ic()),2&e){const e=t.$implicit,i=c.vc();c.Mb(2),c.Dc("routerLink",c.Ic(4,Es,"/legacy/lms/index.php?r=forum/thread&forum_id="+e.ID+"&course_id="+i.course_id)),c.Mb(1),c.gd(e.FORUM),c.Mb(2),c.gd(e.DISCUSSIONS),c.Mb(2),c.gd(e.POSTS)}}function Ms(e,t){1&e&&(c.jc(0,"div",12),c.jc(1,"div",13),c.jc(2,"p",14),c.fd(3),c.wc(4,"t"),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(3),c.hd(" ",c.xc(4,1,"No forums")," "))}let As=(()=>{class e{constructor(e,t,i){this._backendService=e,this.router=t,this.sanitizer=i}ngOnInit(){this.title=E.a.t("course","Forums"),this.forum_header=E.a.t("standard","FORUM"),this.discussions_header=E.a.t("standard","DISCUSSIONS"),this.posts_header=E.a.t("standard","POSTS"),this._backendService.request("/learn/v1/forum/getForumData?course_id="+this.course_id+"&current_session_id="+this.current_session_id,"GET").subscribe(e=>{try{this.forums=e.data.forums,this.forums_count=this.forums.length}catch(t){console.log("FORUMS invalid app/version combination OR the returned JSON is invalid",t)}})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(s.h),c.dc(Pi.b))},e.\u0275cmp=c.Xb({type:e,selectors:[["forum"]],inputs:{course_id:"course_id",current_session_id:"current_session_id",widget:"widget"},decls:7,vars:6,consts:[[1,"course-widget","forum-description"],[1,"course-widget-title"],["class","mdl-grid bg-grey-light forum-description-header text-main",4,"ngIf"],["class","mdl-grid forum-description-row",4,"ngFor","ngForOf"],["class","mdl-grid forum-description-row no-border",4,"ngIf"],[1,"mdl-grid","bg-grey-light","forum-description-header","text-main"],[1,"mdl-cell","mdl-cell--6-col","bolded"],[1,"mdl-cell","mdl-cell--3-col","middle-cell-forum","bolded"],[1,"mdl-grid","forum-description-row"],[1,"mdl-cell","mdl-cell--6-col"],[1,"anchor-black",3,"routerLink"],[1,"mdl-cell","mdl-cell--3-col","middle-cell-forum"],[1,"mdl-grid","forum-description-row","no-border"],[1,"mdl-cell","mdl-cell--12-col"],[1,"empty-forum"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.fd(2),c.wc(3,"t"),c.ic(),c.dd(4,Os,10,9,"div",2),c.dd(5,Ps,8,6,"div",3),c.dd(6,Ms,5,3,"div",4),c.ic()),2&e&&(c.Mb(2),c.gd(c.xc(3,4,t.title)),c.Mb(2),c.Dc("ngIf",t.forums_count>0),c.Mb(1),c.Dc("ngForOf",t.forums),c.Mb(1),c.Dc("ngIf",t.forums_count<=0))},directives:[Ae.p,Ae.o,s.k],pipes:[E.b],encapsulation:2}),e})();var Ls=i("8h18"),js=i("JA8w"),Fs=i("PEGs"),Rs=i("GPJC");const Ns=["dropdown"],Us=["dropdown2"],qs=function(e){return{"is-selected bg-main text-hover-white text-white":e}};function zs(e,t){if(1&e){const e=c.kc();c.jc(0,"li",31),c.rc("click",function(){c.Uc(e);const i=t.$implicit;return c.vc(2).setFilter(i.value)}),c.ic()}if(2&e){const e=t.$implicit,i=c.vc(2);c.Dc("ngClass",c.Ic(2,qs,e.value==i.filter_navigator_state))("innerHTML",e.label,c.Vc)}}function Vs(e,t){if(1&e&&(c.jc(0,"h4",7),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.gd(c.xc(2,1,e.title))}}function Bs(e,t){if(1&e){const e=c.kc();c.jc(0,"div",32),c.jc(1,"question",33),c.rc("changeInfoQuestion",function(t){return c.Uc(e),c.vc(2).onChangeInfoQuestion(t)}),c.ic(),c.ic()}if(2&e){const e=t.$implicit,i=c.vc(2);c.Mb(1),c.Dc("data",e)("openMode",i.questionOptions.openMode)("viewSize",i.questionOptions.viewSize)("initialView",i.questionOptions.initialView)("isForCourseView",!0)}}function Gs(e,t){if(1&e){const e=c.kc();c.jc(0,"span",34),c.rc("click",function(){return c.Uc(e),c.vc(2).loadMore()}),c.fd(1),c.wc(2,"t"),c.ic()}2&e&&(c.Mb(1),c.gd(c.xc(2,1,"show more Questions & Answers")))}const $s=function(e){return{"mdl-cell mdl-cell--3-col":e}},Hs=function(e){return{"overview mdl-cell mdl-cell--9-col":e}},Ys=function(e){return{"loading-process":e}},Ws=function(){return{category:"app7020"}},Qs=function(){return{category:"social"}},Ks=function(e){return{"coach-overview":e}};function Xs(e,t){if(1&e){const e=c.kc();c.jc(0,"div",3),c.jc(1,"div",4),c.jc(2,"div",5),c.jc(3,"div",6),c.jc(4,"h4",7),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"ul"),c.dd(8,zs,1,4,"li",8),c.ic(),c.ic(),c.ic(),c.jc(9,"div",9),c.jc(10,"div",10),c.dd(11,Vs,3,3,"h4",11),c.jc(12,"div",12),c.jc(13,"p"),c.fd(14),c.wc(15,"t"),c.ic(),c.jc(16,"dropdown",13,14),c.rc("onChange",function(t){return c.Uc(e),c.vc().chaptersChange(t)}),c.ic(),c.ic(),c.jc(18,"div",15),c.jc(19,"div",16),c.jc(20,"div",17),c.ec(21,"avatar",18),c.ic(),c.jc(22,"div",19),c.ec(23,"rich-textarea",20),c.jc(24,"div",21),c.ec(25,"basic-button",22),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(26,"div",23),c.jc(27,"div",24),c.jc(28,"div",25),c.fd(29),c.wc(30,"t"),c.ic(),c.jc(31,"div",26),c.jc(32,"span"),c.fd(33),c.wc(34,"t"),c.ic(),c.jc(35,"dropdown",27),c.rc("onChange",function(t){return c.Uc(e),c.vc().sortChange(t)}),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(36,"div",28),c.dd(37,Bs,2,5,"div",29),c.dd(38,Gs,3,3,"span",30),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.Rc(17),t=c.vc();c.Mb(2),c.Dc("ngClass",c.Ic(48,$s,t.overview)),c.Mb(3),c.hd("",c.xc(6,38,"Show questions & answers for"),":"),c.Mb(3),c.Dc("ngForOf",t._navigator.options),c.Mb(1),c.Dc("ngClass",c.Ic(50,Hs,t.overview)),c.Mb(1),c.Dc("ngClass",c.Ic(52,Ys,t._loading)),c.Mb(1),c.Dc("ngIf",!t.overview),c.Mb(3),c.hd("",c.xc(15,40,"Link your question to course content"),":"),c.Mb(2),c.Dc("display_search",!1)("grouped",!1)("options",t._chapters.options)("name",t.chapters-e)("enabled",!0)("required",!0)("customMaxHeight",!0)("value",t._chapters.options[0].value),c.Mb(5),c.Dc("initials",t.getSessionUser().user_initials)("image_url",t.getSessionUser().avatar_url)("size",t._avatarOptions.size)("properties",t._avatarOptions.properties),c.Mb(2),c.Dc("preset",t.richTextareaPreset.BASE)("inputFormControl",t._textareaControl),c.Mb(2),c.Dc("type",t._textareaAction.type)("text",t._textareaAction.text)("state",t._textareaAction.state)("click",t._textareaAction.onClick),c.Mb(4),c.id("",t.totalQuestionCount," ",c.yc(30,42,"questions",c.Hc(54,Ws))," "),c.Mb(4),c.hd("",c.yc(34,45,"Sort by",c.Hc(55,Qs)),":"),c.Mb(2),c.Dc("display_search",!1)("grouped",!1)("options",t._sort.options)("name","sort-dropdown")("enabled",!0)("required",!1)("value",t._sort.options[0].value),c.Mb(1),c.Dc("ngClass",c.Ic(56,Ks,t.overview)),c.Mb(1),c.Dc("ngForOf",t._items),c.Mb(1),c.Dc("ngIf",t._load_more)}}function Js(e,t){if(1&e){const e=c.kc();c.jc(0,"div",32),c.jc(1,"question",33),c.rc("changeInfoQuestion",function(t){return c.Uc(e),c.vc(2).onChangeInfoQuestion(t)}),c.ic(),c.ic()}if(2&e){const e=t.$implicit,i=c.vc(2);c.Mb(1),c.Dc("data",e)("openMode",i.questionOptions.openMode)("viewSize",i.questionOptions.viewSize)("initialView",i.questionOptions.initialView)("isForCourseView",!0)}}function Zs(e,t){if(1&e){const e=c.kc();c.jc(0,"span",44),c.rc("click",function(){return c.Uc(e),c.vc(2).loadMore()}),c.fd(1),c.wc(2,"t"),c.ic()}2&e&&(c.Mb(1),c.gd(c.xc(2,1,"show more Questions & Answers")))}function en(e,t){if(1&e){const e=c.kc();c.jc(0,"div",35),c.jc(1,"div",36),c.jc(2,"h4",7),c.fd(3),c.wc(4,"t"),c.ic(),c.jc(5,"div",12),c.jc(6,"p"),c.fd(7),c.wc(8,"t"),c.ic(),c.jc(9,"dropdown",13,37),c.rc("onChange",function(t){return c.Uc(e),c.vc().chaptersChange(t)}),c.ic(),c.ic(),c.jc(11,"div",15),c.jc(12,"div",16),c.jc(13,"div",17),c.ec(14,"avatar",18),c.ic(),c.jc(15,"div",19),c.ec(16,"rich-textarea",20),c.jc(17,"div",21),c.ec(18,"basic-button",22),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(19,"div",38),c.jc(20,"div",24),c.jc(21,"div",39),c.jc(22,"span"),c.fd(23),c.wc(24,"t"),c.ic(),c.jc(25,"dropdown",27),c.rc("onChange",function(t){return c.Uc(e),c.vc().filterChange(t)}),c.ic(),c.ic(),c.jc(26,"div",26),c.jc(27,"span"),c.fd(28),c.wc(29,"t"),c.ic(),c.jc(30,"dropdown",27),c.rc("onChange",function(t){return c.Uc(e),c.vc().sortChange(t)}),c.ic(),c.ic(),c.ic(),c.jc(31,"div",40),c.jc(32,"div",25),c.fd(33),c.wc(34,"t"),c.ic(),c.ec(35,"div",41),c.ic(),c.ic(),c.jc(36,"div",42),c.dd(37,Js,2,5,"div",29),c.dd(38,Zs,3,3,"span",43),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("ngClass",c.Ic(52,Ys,e._loading)),c.Mb(2),c.gd(c.xc(4,41,e.title)),c.Mb(4),c.hd("",c.xc(8,43,"Link your question to course content"),":"),c.Mb(2),c.Dc("display_search",!1)("grouped",!1)("options",e._chapters.options)("name",e.chapters-e.dropdown)("enabled",!0)("required",!0)("customMaxHeight",!0)("value",e._chapters.options[0].value),c.Mb(5),c.Dc("initials",e.getSessionUser().user_initials)("image_url",e.getSessionUser().avatar_url)("size",e._avatarOptions.size)("properties",e._avatarOptions.properties),c.Mb(2),c.Dc("preset",e.richTextareaPreset.BASE)("inputFormControl",e._textareaControl),c.Mb(2),c.Dc("type",e._textareaAction.type)("text",e._textareaAction.text)("state",e._textareaAction.state)("click",e._textareaAction.onClick),c.Mb(5),c.hd("",c.xc(24,45,"SHOW Q&A FOR"),":"),c.Mb(2),c.Dc("display_search",!1)("grouped",!1)("options",e._filter.options)("name",e.filter-e.dropdown)("enabled",!0)("required",!1)("value",e._filter.options[0].value),c.Mb(3),c.hd("",c.yc(29,47,"Sort by",c.Hc(54,Qs)),":"),c.Mb(2),c.Dc("display_search",!1)("grouped",!1)("options",e._sort.options)("name",e.sort-e.dropdown)("enabled",!0)("required",!1)("value",e._sort.options[0].value),c.Mb(3),c.id("",e.totalQuestionCount," ",c.xc(34,50,"Questions"),""),c.Mb(4),c.Dc("ngForOf",e._items),c.Mb(1),c.Dc("ngIf",e._load_more)}}const tn=["/share/v1/questions","/share/v1/comments"];let sn=(()=>{class e{constructor(e,t,i,s,n,a,o,c){this.backend=e,this.translate=t,this._route=i,this.router=s,this.sanitizer=n,this._ref=a,this.translationPipe=o,this.docLayoutService=c,this.overview=!1,this.totalQuestionCount=0,this._page=1,this.filter_navigator_state=-1,this._page_size=3,this._requestParams={},this._loading=!1,this._load_more=!0,this.loTypes=Gi.d,this._items=[],this._textareaControl=new Ke.e("",Ke.x.minLength(3)),this._avatarOptions={size:40,properties:{bg_color_class:"bg-main",text_color_class:"text-white",icon_class:"zmdi zmdi-account"}},this.richTextareaPreset=Ui.c,this._textareaAction={type:"normal",text:E.a.t("test","New question"),state:"",onClick:()=>{this._textareaControl.value.length&&(null!=this._id_lo?(this._textareaAction.state="disabled",this._loading=!0,this.backend.request("/share/v1/questions","POST",{title:this._textareaControl.value,id_course:this._currentAsset,id_lo:this._id_lo}).subscribe(e=>{this._items.unshift(e.data),this._textareaAction.state="enabled",this._loading=!1,this._textareaControl.reset(""),this.totalQuestionCount+=1,this.resetDropdown()},null,()=>{this._textareaControl.reset(""),this._loading=!1,this._textareaAction.state="enabled"})):this.docLayoutService.toast.showToast({message:E.a.t("app7020","Select content before submitting a question"),type:"error"}))}},this._filter={options:[{label:E.a.t("standard","All course contents"),value:-1}]},this._sort={options:[{label:E.a.t("standard","Newest To Oldest"),value:"desc"},{label:E.a.t("standard","Oldest To Newest"),value:"asc"}]},this._chapters={options:[{label:`\n                    <div class='item mdl-grid chapter'>\n                                <div class='mdl-cell mdl-cell--2-col icon-wrap' >\n                                    <div class='icon'>\n                                        <i class='file-type text-grey-mid zmdi zmdi-link'></i>\n                                    </div>\n                                </div>\n                                <div class='information mdl-cell mdl-cell--10-col'>\n                                    <div class='title text-main text-hover-white'>${new E.b(this.translate,this._ref).transform(E.a.t("standard","Link your question to course content"))}</div>\n                                    <div class='info text-grey-mid'></div>\n                                </div>\n                            </div>\n                `,value:-1}]},this._navigator={options:[{label:`\n                    <div class='item mdl-grid chapter'>\n                                <div class='mdl-cell mdl-cell--2-col icon-wrap' >\n                                    <div class='icon'>\n                                        <i class='file-type text-grey-mid zmdi zmdi-collection-item'></i>\n                                    </div>\n                                </div>\n                                <div class='information mdl-cell mdl-cell--10-col'>\n                                    <div class='title text-main text-hover-white'>${new E.b(this.translate,this._ref).transform(E.a.t("standard","All course contents"))}</div>\n                                    <div class='info text-grey-mid'></div>\n                                </div>\n                            </div>\n                `,value:-1}]},this._route.params.forEach(e=>{this._currentAsset=e.id,this._requestParams={id_course:this._currentAsset,type_question:1,page:this._page,page_size:this._page_size},this.fetchData()}),this._formControlSubscribtion=this._textareaControl.valueChanges.subscribe(e=>{setTimeout(()=>{this._textareaAction.state=e.trim().length<=3?"disabled":""},50)}),this._deteleDataSubscribtion=r.a.singleton.subscribe("coachTileDelete",e=>{this.backend.request(`${tn[e.data.type-1]}/${e.data.id}`,"DELETE").subscribe(e=>{this._items.forEach((t,i)=>{t.id===e.data.id&&this._items.splice(i,1)})})},"coach-tile")}ngOnInit(){this.questionOptions={viewSize:6===this.widget.columns_span?Ls.d.MEDIUM:Ls.d.LARGE,openMode:Ls.c.INLINE,initialView:Ls.b.SHOW_BEST_FIRST},this.title=E.a.t("standard","Question & Answer"),this.backend.request("/learn/v1/courses/"+this._currentAsset,"GET",{},{},S.b,null,e=>this.backend.redirectWhenCode9000(e)).subscribe(e=>{e.data.tree.forEach(e=>this.renderLOTree(e))})}getSessionUser(){return o.a.getInstance()}filterChange(e){this._requestParams.id_lo=-1===e.selectedOption.value?null:e.selectedOption.value,this._requestParams.page=this._page,this._requestParams.page_size=this._page_size,this._load_more=!0,this.fetchData()}sortChange(e){this._requestParams.sort_attr="id",this._requestParams.sort_dir=e.selectedOption.value,this._requestParams.page=this._page,this._requestParams.page_size=this._page_size,this._load_more=!0,this.fetchData()}chaptersChange(e){this._id_lo=-1===e.selectedOption.value?null:e.selectedOption.value}setFilter(e){this.dropdown2?this.dropdown2.selectOptionByValue(e):this.dropdown&&this.dropdown.selectOptionByValue(e),this._requestParams.id_lo=-1===e?null:e,this.filter_navigator_state=e,this._requestParams.page=this._page,this._requestParams.page_size=this._page_size,this._load_more=!0,this.fetchData()}resetDropdown(){this.dropdown2?this.dropdown2.selectOptionByValue(-1):this.dropdown&&this.dropdown.selectOptionByValue(-1)}fetchData(){this._fetchDataSubscribtion=this.backend.request("/share/v1/questions","GET",this._requestParams).subscribe(e=>{1===e.data.total_page_count&&(this._load_more=!1),this._items=e.data.items,this.totalQuestionCount=e.data.total_count})}loadMore(){var e;const t=null===(e=this._items[this._items.length-1])||void 0===e?void 0:e.metadata.created_at;let i={};t?(i=Object.assign(Object.assign({},this._requestParams),{page_size:this._page_size+1,interval:{date_from:t},show:"new"}),"asc"===this._requestParams.sort_dir?i.interval.from=1:i.interval.to=1):(this._requestParams.page=1,i=this._requestParams),this._fetchDataSubscribtion=this.backend.request("/share/v1/questions","GET",i).subscribe(e=>{this._requestParams.page===e.data.total_page_count&&(this._load_more=!1),e.data.items.forEach(e=>{this._items.some(t=>t.id===e.id)||this._items.push(e)})})}getLOTitle(e){return this.loTypes[e]?this.loTypes[e].title:this.loTypes[void 0].title}getStatusIcon(e){return"in_progress"===e||"completed"===e||"incomplete"===e?"zmdi-check-circle":"locked"===e?"zmdi-lock":"failed"===e?"zmdi-close-circle":void 0}getLOIcon(e){return this.loTypes[e]?this.loTypes[e].icon:this.loTypes[void 0].icon}ngOnDestroy(){this._formControlSubscribtion&&this._formControlSubscribtion.unsubscribe(),this._fetchDataSubscribtion&&this._fetchDataSubscribtion.unsubscribe(),this._deteleDataSubscribtion&&this._deteleDataSubscribtion.unsubscribe()}onChangeInfoQuestion(e){switch(e.typeEvent){case Ls.a.DELETE_QUESTION:const t=this._items.filter(t=>t.id!==e.question.id);this._items=t,this.totalQuestionCount>0&&(this.totalQuestionCount-=1)}}renderLOTree(e){if(e.is_folder&&e.children)e.children.forEach(e=>this.renderLOTree(e));else{const t=this.getLOIcon(e.type),i=e.status,s=this.getStatusIcon(e.status),n=this.translationPipe.transform(this.getLOTitle(e.type));this._filter.options.push({label:e.name,value:e.id}),this._chapters.options.push({label:`\n                            <div class='item mdl-grid chapter'>\n                                <div class='mdl-cell mdl-cell--2-col icon-wrap' >\n                                    <div class='icon'>\n                                        <i class='file-type text-grey-mid ${t}'></i>\n                                        \x3c!-- status icons --\x3e\n                                        <div class='chapter-status ${i}'>\n                                            <i class='zmdi ${s}'></i>\n                                        </div>\n                                        \x3c!-- status icons --\x3e\n                                    </div>\n                                </div>\n                                <div class='information mdl-cell mdl-cell--10-col'>\n                                    <div class='title text-main'>${e.name}</div>\n                                    <div class='info text-grey-mid'>${n}\n                                    <span class="${e.duration?"":"hidden"}">| ${e.duration}</span></div>\n                                </div>\n                            </div>\n                        `,value:e.id}),this._navigator.options.push({label:`\n                            <div class='item mdl-grid chapter'>\n                                <div class='mdl-cell mdl-cell--2-col icon-wrap' >\n                                    <div class='icon'>\n                                        <i class='file-type text-grey-mid ${t}'></i>\n                                        \x3c!-- status icons --\x3e\n                                        <div class='chapter-status ${i}'>\n                                            <i class='zmdi ${s}'></i>\n                                        </div>\n                                        \x3c!-- status icons --\x3e\n                                    </div>\n                                </div>\n                                <div class='information mdl-cell mdl-cell--10-col'>\n                                    <div class='title text-main text-hover-white'>${e.name}</div>\n                                    <div class='info text-grey-mid'>${n} <span>${e.duration?` | ${e.duration}`:""}</span></div>\n                                </div>\n                            </div>\n                        `,value:e.id})}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(js.a),c.dc(s.a),c.dc(s.h),c.dc(Pi.b),c.dc(c.i),c.dc(E.b),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["questions-widget"]],viewQuery:function(e,t){if(1&e&&(c.md(Ns,1),c.md(Us,1)),2&e){let e;c.Qc(e=c.sc())&&(t.dropdown=e.first),c.Qc(e=c.sc())&&(t.dropdown2=e.first)}},inputs:{widget:"widget",overview:"overview"},features:[c.Lb([E.b])],decls:3,vars:2,consts:[[1,"questions-widget-wrapper"],["class","mdl-wrapper overview-mode-asset-coach-widget",4,"ngIf"],["class","asset-coach-wrapper",4,"ngIf"],[1,"mdl-wrapper","overview-mode-asset-coach-widget"],[1,"mdl-grid"],[1,"filter-navigator",3,"ngClass"],[1,"navigator-wrapper","bg-white","mdl-shadow--2dp"],[1,"headline"],["class","bg-hover-main text-hover-white",3,"ngClass","innerHTML","click",4,"ngFor","ngForOf"],[1,"asset-coach-wrapper",3,"ngClass"],[1,"form-wrapper","bg-white","mdl-shadow--2dp",3,"ngClass"],["class","headline",4,"ngIf"],[1,"related-dropdown"],[1,"link_questions_dropdown",3,"display_search","grouped","options","name","enabled","required","customMaxHeight","value","onChange"],["dropdown",""],[1,"container","clearfix"],[1,"form-section","clearfix"],[1,"avatar-wrapper"],[3,"initials","image_url","size","properties"],[1,"content-wrapper"],[3,"preset","inputFormControl"],[1,"submit-wrapper"],[3,"type","text","state","click"],[1,"filter-wrapper","bg-white","mdl-shadow--2dp","clearfix"],[1,"filters-wrapper","clearfix"],[1,"counter-wrapper"],[1,"sort"],[3,"display_search","grouped","options","name","enabled","required","value","onChange"],[1,"items-wrapper",3,"ngClass"],["class","item",4,"ngFor","ngForOf"],["class","load-more text-main bg-white mdl-shadow--2dp",3,"click",4,"ngIf"],[1,"bg-hover-main","text-hover-white",3,"ngClass","innerHTML","click"],[1,"item"],[3,"data","openMode","viewSize","initialView","isForCourseView","changeInfoQuestion"],[1,"load-more","text-main","bg-white","mdl-shadow--2dp",3,"click"],[1,"asset-coach-wrapper"],[1,"form-wrapper","bg-white",3,"ngClass"],["dropdown2",""],[1,"filter-wrapper","bg-white","clearfix"],[1,"filter"],[1,"search-wrapper","clearfix"],[1,"search"],[1,"items-wrapper"],["class","load-more text-main",3,"click",4,"ngIf"],[1,"load-more","text-main",3,"click"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,Xs,39,58,"div",1),c.dd(2,en,39,55,"div",2),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",t.overview),c.Mb(1),c.Dc("ngIf",!t.overview))},directives:[Ae.p,Ae.n,Ae.o,ii.a,vs.a,ds.a,Fs.a,Rs.a],pipes:[E.b],encapsulation:2}),e})();var nn=i("HpyV"),an=i("F97A");let on=(()=>{class e{constructor(e,t){this.router=e,this._backendService=t,this.onJoinButtonClick=()=>{window.open(this._backendService.getBaseUrl()+"/lms/index.php?r=videoconference/joinMeeting&room_id="+this.idSession+"&day="+this.daySession)}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["webconference-join-button"]],inputs:{idSession:"idSession",daySession:"daySession",buttonProperties:"buttonProperties"},decls:1,vars:2,consts:[[3,"properties","click"]],template:function(e,t){1&e&&c.ec(0,"rectangular-button",0),2&e&&c.Dc("properties",t.buttonProperties)("click",t.onJoinButtonClick)},directives:[an.a],encapsulation:2}),e})();var rn=i("E27F"),cn=i("yX1P");function ln(e,t){if(1&e){const e=c.kc();c.jc(0,"div",2),c.jc(1,"div",3),c.jc(2,"div",4),c.jc(3,"datetime-picker",5),c.rc("onConfirmDateDialog",function(t){return c.Uc(e),c.vc().onChange(t)}),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(3),c.Dc("type","date")("name","expiration-date")("label",e.searchlabel)("initialEmptyValue",!0)}}function dn(e,t){if(1&e&&(c.jc(0,"div",17),c.ec(1,"webconference-join-button",18),c.wc(2,"dateOrigin"),c.ic()),2&e){const e=c.vc(2).$implicit,t=c.vc(2);c.Mb(1),c.Dc("idSession",e.id_session)("daySession",c.yc(2,3,e.day,"yyyy-MM-dd"))("buttonProperties",t.buttonProperties)}}const un=function(){return{category:"classroom"}};function hn(e,t){if(1&e&&(c.jc(0,"div"),c.jc(1,"div",10),c.fd(2),c.wc(3,"dateOrigin"),c.jc(4,"div",11),c.fd(5),c.wc(6,"dateOrigin"),c.ic(),c.ic(),c.jc(7,"div",12),c.jc(8,"div",13),c.fd(9),c.ic(),c.jc(10,"div",14),c.ec(11,"em",15),c.fd(12),c.wc(13,"t"),c.ic(),c.jc(14,"div",14),c.ec(15,"em",15),c.fd(16),c.wc(17,"transformMinutes"),c.ic(),c.dd(18,dn,3,6,"div",16),c.ic(),c.ic()),2&e){const e=c.vc().$implicit;c.Mb(2),c.hd("",c.yc(3,7,e.day,"d")," "),c.Mb(3),c.gd(c.yc(6,10,e.day,"MM/y")),c.Mb(4),c.gd(e.name),c.Mb(3),c.id("",e.date_begin_object," ",c.yc(13,13,"(Your time)",c.Hc(18,un)),""),c.Mb(4),c.gd(c.xc(17,16,e.total_time)),c.Mb(2),c.Dc("ngIf",e.onair&&1==e.onair||e.isSessionNow)}}function pn(e,t){if(1&e&&(c.jc(0,"div",8),c.dd(1,hn,19,19,"div",9),c.ic()),2&e){const e=t.$implicit;c.Mb(1),c.Dc("ngIf",e.name.length>0)}}const mn=function(e){return{"no-margin-top":e}};function gn(e,t){if(1&e&&(c.jc(0,"div",6),c.dd(1,pn,2,1,"div",7),c.ic()),2&e){const e=c.vc();c.Dc("ngClass",c.Ic(2,mn,e.showSearch)),c.Mb(1),c.Dc("ngForOf",e.webconferenceList)}}function bn(e,t){if(1&e&&(c.jc(0,"div",6),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Dc("ngClass",c.Ic(5,mn,e.showSearch)),c.Mb(1),c.hd(" ",c.yc(2,2,"(No Webconference)",c.Hc(7,un)),"\n")}}let fn=(()=>{class e{constructor(e,t){this.formatter=e,this._backendService=t,this.showSearch=!1,this.searchlabel=E.a.t("coaching","Search by date"),this.buttonProperties={text:E.a.t("standard","Join"),typeStyle:"filled",textColor:"text-white",className:"webconference-tab-join-button"}}ngOnInit(){let e=this.formatter.currentUtcDateTime();for(let t=0;t<this.webconferenceList.length;t++)this.webconferenceList[t].isSessionNow=this.webconferenceList[t].date_begin<=e&&this.webconferenceList[t].date_end>=e;this.handleDates()}onChange(e){this._backendService.request("/learn/v1/webconference/getWebconferenceData","GET",{user_id:o.a.getInstance().id,course_id:this.course_id,date_time:e.substr(0,10)}).subscribe(e=>{e.data.webconference&&e.data.webconference.history&&(this.webconferenceList=e.data.webconference.history,this.handleDates())})}handleDates(){for(let e=0;e<this.webconferenceList.length;e++){this.formatter.format("dateTime",this.webconferenceList[e].date_begin,{timezone:o.a.getInstance().timezone,relativeMaxDaysDifference:1},{output:"calendar"}).subscribe(t=>{this.webconferenceList[e].date_begin_object=t});let t="";t=this.showSearch?this.webconferenceList[e].day:this.webconferenceList[e].date_begin,this.formatter.format("dateInUserTimeZone",t,{timezone:o.a.getInstance().timezone},{output:"isoString"}).subscribe(t=>{this.webconferenceList[e].day=t})}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(ti.b),c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],inputs:{webconferenceList:"webconferenceList",showSearch:"showSearch",course_id:"course_id"},decls:3,vars:3,consts:[["class","webconference-tab-wrapper text-basic-size no-margin-top",4,"ngIf"],["class","webconference-tab-wrapper text-basic-size",3,"ngClass",4,"ngIf"],[1,"webconference-tab-wrapper","text-basic-size","no-margin-top"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--4-col","mdl-grid","webconference-tab-row"],[3,"type","name","label","initialEmptyValue","onConfirmDateDialog"],[1,"webconference-tab-wrapper","text-basic-size",3,"ngClass"],["class","webconference-tab-row",4,"ngFor","ngForOf"],[1,"webconference-tab-row"],[4,"ngIf"],[1,"webconference-tab-row-day"],[1,"webconference-tab-row-date"],[1,"webconference-tab-row-content-box"],[1,"webconference-tab-row-title"],[1,"webconference-tab-row-display-time"],[1,"fa","fa-clock-o"],["class","webconference-tab-row-display-button",4,"ngIf"],[1,"webconference-tab-row-display-button"],[3,"idSession","daySession","buttonProperties"]],template:function(e,t){1&e&&(c.dd(0,ln,4,4,"div",0),c.dd(1,gn,2,4,"div",1),c.dd(2,bn,3,8,"div",1)),2&e&&(c.Dc("ngIf",t.showSearch),c.Mb(1),c.Dc("ngIf",t.webconferenceList&&t.webconferenceList.length>0),c.Mb(1),c.Dc("ngIf",t.webconferenceList&&0==t.webconferenceList.length))},directives:[Ae.p,nn.a,Ae.n,Ae.o,on],pipes:[rn.a,E.b,cn.a],encapsulation:2}),e})();var vn=i("z52M");function _n(e,t){if(1&e&&(c.jc(0,"div",3),c.ec(1,"tabs",4),c.ic()),2&e){const e=c.vc();c.Mb(1),c.ad(e.tabsParams.style),c.Dc("panels",e.tabsParams.panels)}}const wn=function(){return{category:"player"}};let yn=(()=>{class e{constructor(e){this._backendService=e,this.apiUrl="/learn/v1/webconference/getWebconferenceData"}ngOnInit(){this._backendService.request(this.apiUrl,"GET",{user_id:this.user_id,course_id:this.course_id}).subscribe(e=>{this.webconferences=e.data.webconference,this.tabsParams={panels:[{title:E.a.t("conference","Scheduled"),content:{params:{webconferenceList:this.webconferences.scheduled,course_id:this.course_id},component:fn}},{title:E.a.t("standard","_HISTORY"),content:{params:{webconferenceList:this.webconferences.history,showSearch:!0,course_id:this.course_id},component:fn}}],style:""}})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],inputs:{user_id:"user_id",course_id:"course_id"},decls:5,vars:6,consts:[[1,"course-widget","webconference"],[1,"course-widget-title"],["class","webconference-content",4,"ngIf"],[1,"webconference-content"],[3,"panels"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.fd(2),c.wc(3,"t"),c.ic(),c.dd(4,_n,2,3,"div",2),c.ic()),2&e&&(c.Mb(2),c.gd(c.yc(3,2,"Video Conferences",c.Hc(5,wn))),c.Mb(2),c.Dc("ngIf",t.webconferences))},directives:[Ae.p,vn.a],pipes:[E.b],encapsulation:2}),e})();var Cn=i("4VH+");function Sn(e,t){if(1&e&&(c.jc(0,"div",14),c.ec(1,"coachTile",15),c.ic()),2&e){const e=t.$implicit,i=c.vc();c.Mb(1),c.Dc("data",e)("open_mode",1)("actionMethods",i.coachTileActionMethods)}}function Tn(e,t){if(1&e){const e=c.kc();c.jc(0,"span",16),c.rc("click",function(){return c.Uc(e),c.vc().loadMoreDiscussions()}),c.fd(1),c.wc(2,"t"),c.ic()}2&e&&(c.Mb(1),c.gd(c.xc(2,1,"Load More")))}const kn=function(){return{category:"app7020"}},In=function(e){return{"loading-process":e}};let xn=(()=>{class e{constructor(e){this._backendService=e,this._discussionsPageSize=1,this._messagesPerDiscussionPageSize=10,this._discussions=[],this._loadMoreDiscussions=!0,this._textAreaControl=new Ke.e("",[Ke.x.minLength(3)]),this._textAreaLoading=!1,this._avatarOptions={size:40,properties:{bg_color_class:"bg-main",text_color_class:"text-white"}},this._textAreaAction={type:"normal",text:E.a.t("standard","Comment"),state:"normal",onClick:()=>{this._textAreaControl.value.length&&this._textAreaControl.valid&&(this._textAreaAction.state="disabled",this._textAreaLoading=!0,this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread`,"PUT",{course_id:this.course_id,forum_id:this.forum_id,text:this._textAreaControl.value}).subscribe(e=>{e.data.messageSave||this._discussions.unshift(e.data)},null,()=>{this._textAreaAction.state="normal",this._textAreaLoading=!1,this._textAreaControl.reset("")}))}},this.richTextareaPreset=Ui.c,this.coachTileActionMethods={like:e=>(console.log("CommentsWidgetComponent.observables.like"),this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread/message/${e}/like`,"PUT")),dislike:e=>(console.log("CommentsWidgetComponent.observables.dislike"),this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread/message/${e}/dislike`,"PUT")),updateItem:(e,t,i)=>(console.log("CommentsWidgetComponent.observables.updateItem"),this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread/${e}`,"PUT",{title:t})),updateSubItem:(e,t,i)=>(console.log("CommentsWidgetComponent.observables.updateSubItem"),this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread/${e}/message`,"PUT",{content:t})),fetchSubItems:(e,t,i)=>this._backendService.request(this._apiRequestUrl,"GET",{user_id:this.user_id,forum_id:this.forum_id,thread_id:e,messages_offset:this._messagesPerDiscussionPageSize*(i-1),messages_limit:t})},this._sessionUser=o.a.getInstance()}ngOnInit(){this._sesstionUserInitials=x.b.getInstance().settings.show_first_name_first?this._sessionUser.firstname.substring(0,1)+this._sessionUser.lastname.substring(0,1):this._sessionUser.lastname.substring(0,1)+this._sessionUser.firstname.substring(0,1),this._apiRequestUrl=`/learn/v1/courses/${this.course_id}/comments`,this._deteleThreadOrCommentSubscribtion=r.a.singleton.subscribe("coachTileDelete",e=>{this.indexOfDiscussion(e.data.id)>=0&&this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread/${e.data.id}`,"DELETE").subscribe(e=>{"success"===e.data.deleteDiscussion&&e.data.idThread&&this._discussions.splice(this.indexOfDiscussion(e.data.idThread),1)})},"coach-tile"),this.fetchData({user_id:this.user_id,forum_id:this.forum_id,discussions_offset:this._discussions.length,discussions_limit:this._discussionsPageSize,messages_offset:0,messages_limit:this._messagesPerDiscussionPageSize})}loadMoreDiscussions(){this._fetchDataSubscribtion=this._backendService.request(this._apiRequestUrl,"GET",{user_id:this.user_id,forum_id:this.forum_id,discussions_offset:this._discussions.length+this._discussionsPageSize-1,discussions_limit:this._discussionsPageSize,messages_offset:0,messages_limit:this._messagesPerDiscussionPageSize}).subscribe(t=>{e.isAllItemsLoaded(this._discussions.length,this._discussionsPageSize,t.data.discussions_count)&&(this._loadMoreDiscussions=!1),t.data.items.forEach((e,t)=>{this._discussions.push(e)})})}fetchData(t){this._fetchDataSubscribtion=this._backendService.request(this._apiRequestUrl,"GET",t).subscribe(t=>{e.isAllItemsLoaded(this._discussions.length,this._discussionsPageSize,t.data.discussions_count)&&(this._loadMoreDiscussions=!1),this._discussions=t.data.items})}ngOnDestroy(){this._fetchDataSubscribtion&&this._fetchDataSubscribtion.unsubscribe(),this._deteleThreadOrCommentSubscribtion&&this._deteleThreadOrCommentSubscribtion.unsubscribe()}static isAllItemsLoaded(e,t,i){return e+t>=i}indexOfDiscussion(e){let t=-1;return this._discussions.forEach((i,s)=>{i.id==e&&(t=s)}),t}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],inputs:{user_id:"user_id",course_id:"course_id",forum_id:"forum_id",widget:"widget"},decls:16,vars:20,consts:[[1,"course-widget","comments"],[1,"course-widget-title"],[1,"enter-discussion-wrapper","bg-white",3,"ngClass"],[1,"container","clearfix"],[1,"form-section","clearfix"],[1,"avatar-wrapper"],[3,"initials","image_url","size","properties"],[1,"content-wrapper"],[3,"preset","inputFormControl"],[1,"submit-wrapper"],[3,"type","text","state","click"],[1,"discussions-wrapper"],["class","discussion",4,"ngFor","ngForOf"],["class","load-more text-main",3,"click",4,"ngIf"],[1,"discussion"],[3,"data","open_mode","actionMethods"],[1,"load-more","text-main",3,"click"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",2),c.jc(5,"div",3),c.jc(6,"div",4),c.jc(7,"div",5),c.ec(8,"avatar",6),c.ic(),c.jc(9,"div",7),c.ec(10,"rich-textarea",8),c.jc(11,"div",9),c.ec(12,"basic-button",10),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(13,"div",11),c.dd(14,Sn,2,3,"div",12),c.dd(15,Tn,3,3,"span",13),c.ic(),c.ic()),2&e&&(c.Mb(2),c.gd(c.yc(3,14,"Comments",c.Hc(17,kn))),c.Mb(2),c.Dc("ngClass",c.Ic(18,In,t._textAreaLoading)),c.Mb(4),c.Dc("initials",t._sesstionUserInitials)("image_url",t._sessionUser.avatar_url)("size",t._avatarOptions.size)("properties",t._avatarOptions.properties),c.Mb(2),c.Dc("preset",t.richTextareaPreset.BASE)("inputFormControl",t._textAreaControl),c.Mb(2),c.Dc("type",t._textAreaAction.type)("text",t._textAreaAction.text)("state",t._textAreaAction.state)("click",t._textAreaAction.onClick),c.Mb(2),c.Dc("ngForOf",t._discussions),c.Mb(1),c.Dc("ngIf",t._loadMoreDiscussions))},directives:[Ae.n,vs.a,ds.a,Fs.a,Ae.o,Ae.p,Cn.a],pipes:[E.b],encapsulation:2}),e})();var Dn=i("2Jdu"),On=i("de78"),En=i("yUlE"),Pn=i("fnIB");const Mn=["paginatedTree"];let An=(()=>{class e{constructor(e,t){this._backendService=e,this.changeDetector=t}ngOnInit(){this.user_id=o.a.getInstance().id;let e=new Ln(10,1,3,15,this._backendService,this.course_id,this.user_id);this.treeParamsBrowse={has_search:!0,selection_mode:"single",mode:"browse",node_actions:[],source:e}}getFirstId(){let e=this.paginatedTree?this.paginatedTree.getSelectedNodesIds():"";return e.length?e[0].id:""}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["folder-list"]],viewQuery:function(e,t){if(1&e&&c.md(Mn,1),2&e){let e;c.Qc(e=c.sc())&&(t.paginatedTree=e.first)}},inputs:{course_id:"course_id"},decls:3,vars:5,consts:[[1,"tree-wrap"],[3,"source","selection_mode","has_search","node_actions","mode"],["paginatedTree",""]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.ec(1,"tree",1,2),c.ic()),2&e&&(c.Mb(1),c.Dc("source",t.treeParamsBrowse.source)("selection_mode",t.treeParamsBrowse.selection_mode)("has_search",t.treeParamsBrowse.has_search)("node_actions",t.treeParamsBrowse.node_actions)("mode",t.treeParamsBrowse.mode))},directives:[En.b],encapsulation:2}),e})();class Ln extends On.b{constructor(e=0,t,i,s,n,a,o){super(e,t,i,s,n),this.current_node=e,this.current_page=t,this.page_size=i,this.total=s,this.serviceProvider=n,this.course_id=a,this.user_id=o}fetchData(e){let t=e;return this.course_id&&(t.course_id=this.course_id),this.user_id&&(t.user_id=this.user_id),this.serviceProvider.request("/learn/v1/filerepo/getCourseFoldersTree","GET",t).pipe(Object(ri.a)(e=>{for(let t=0;t<e.data.items.length;t++)e.data.items[t].selection_status=0;return e}))}}var jn=i("/hE/"),Fn=i("ySfU");const Rn=["folderList"],Nn=["titleField"];function Un(e,t){if(1&e&&(c.jc(0,"span",13),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.gd(c.xc(2,1,e.errorFileSelected))}}function qn(e,t){if(1&e&&(c.jc(0,"span",13),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.gd(c.xc(2,1,e.generalError))}}function zn(e,t){if(1&e){const e=c.kc();c.jc(0,"radio",14),c.rc("OnChange",function(t){return c.Uc(e),c.vc().permissionChanged(t)}),c.ic()}if(2&e){const e=t.$implicit,i=c.vc();c.Dc("name","permission_type")("value",e.value)("label",e.label)("checked",e.checked)("inputFormControl",i.uploadForm.controls.permission_type)}}function Vn(e,t){if(1&e){const e=c.kc();c.jc(0,"div"),c.jc(1,"checkbox",15),c.rc("onChange",function(t){return c.Uc(e),c.vc().learnerSelection(t)}),c.ic(),c.jc(2,"checkbox",15),c.rc("onChange",function(t){return c.Uc(e),c.vc().tutorSelection(t)}),c.ic(),c.jc(3,"checkbox",15),c.rc("onChange",function(t){return c.Uc(e),c.vc().instructorSelection(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("label",e.learnerParams.label)("checked",e.learnerParams.checked)("value",e.learnerParams.value)("enabled",e.learnerParams.enabled),c.Mb(1),c.Dc("label",e.tutorParams.label)("checked",e.tutorParams.checked)("value",e.tutorParams.value)("enabled",e.tutorParams.enabled),c.Mb(1),c.Dc("label",e.instructorParams.label)("checked",e.instructorParams.checked)("value",e.instructorParams.value)("enabled",e.instructorParams.enabled)}}let Bn=(()=>{class e{constructor(e,t,i){this.fb=e,this._backendService=t,this.changeDetector=i,this.uploadedFile=null,this.errorFileSelected=null,this.generalError=null,this.visibleToAll=1,this.selectPermissions=!1,this.permissionList=[0,0,0],this.emitted=!1,this.uploadForm=e.group({fileInfo:["",Ke.x.required],uploader:["",Ke.x.required],permission_type:[""]})}ngOnInit(){this.learnerParams={label:"Learner",checked:!1,value:2,enabled:!1},this.tutorParams={label:"Tutor",checked:!1,value:8,enabled:!1},this.instructorParams={label:"Instructor",checked:!1,value:16,enabled:!1},this.fileInfo={type:"text",id:"fileInfo1",label:"Title",floating_label:!0},this.permissionOptions=[{id:0,value:0,label:E.a.t("player","All"),checked:"checked"},{id:1,value:1,label:E.a.t("player","Select enrollment levels"),checked:""}],this.uploadParams={label:"",placeholder:E.a.t("standard","Upload file"),allowed_extensions:["3gp","3gp2","arf","avi","bmp","csv","doc","docx","epub","flv","gif","ico","jpeg","jpg","mkv","mov","mp3","mp4","mpeg","mpeg4","mpg","mpg2","ogg","ogm","pdf","png","ppsx","ppt","pptx","srt","txt","vtt","wmv","wrf","xls","xlsx","zip"],max_file_size:300,collection:"coursedocs",disabledField:!1,style:"form"}}uploadFile(){console.log("upload file method")}submitForm(){console.log("submitted!")}uploadedFiles(e){console.log("Uploaded!"),this.uploadedFile=e,console.log(e)}reset(){this.uploadedFile=null,this.errorFileSelected=null,this.generalError=null,this.changeDetector.detectChanges()}getParams(e){let t=this.uploadForm.controls.fileInfo.value,i="*";return e.length>0&&(i="selected_sessions"),this.errorFileSelected=null,this.generalError=null,this.uploadedFile&&t.length>0?{original_file_name:this.uploadedFile.original_filename,file_name:this.uploadedFile.new_filename,title:t,course_id:this.course_id,parent_id:this.folderList.getFirstId(),user_id:this.user_id,visibility:this.visibleToAll,permissions:this.permissionList,viewable_by:i,sessions:e}:"missing parameters"}permissionChanged(e){0==e?(this.visibleToAll=1,this.selectPermissions=!1,this.changeDetector.detectChanges()):(this.visibleToAll=-1,this.selectPermissions=!0,this.learnerParams.enabled=!0,this.tutorParams.enabled=!0,this.instructorParams.enabled=!0,this.changeDetector.detectChanges())}learnerSelection(e){this.permissionList[0]=e.checked?2:0,console.log(this.permissionList)}tutorSelection(e){this.permissionList[1]=e.checked?8:0,console.log(this.permissionList)}instructorSelection(e){this.permissionList[2]=e.checked?16:0,console.log(this.permissionList)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(S.a),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["upload-file-wizard"]],viewQuery:function(e,t){if(1&e&&(c.md(Rn,3),c.md(Nn,3)),2&e){let e;c.Qc(e=c.sc())&&(t.folderList=e.first),c.Qc(e=c.sc())&&(t.titleField=e.first)}},inputs:{course_id:"course_id",user_id:"user_id"},decls:14,vars:19,consts:[[1,"upload-file"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],["class","text-error",4,"ngIf"],[3,"formGroup","ngSubmit"],[3,"label","allowed_extensions","collection","max_file_size","disabledField","inputFormControl","uploaded","reset"],[3,"id","type","label","floating_label","inputFormControl"],["titleField",""],[1,"folder-list-vl"],[3,"course_id"],["folderList",""],["id","permission_ + permission.id",3,"name","value","label","checked","inputFormControl","OnChange",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-error"],["id","permission_ + permission.id",3,"name","value","label","checked","inputFormControl","OnChange"],[3,"label","checked","value","enabled","onChange"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.dd(3,Un,3,3,"span",3),c.dd(4,qn,3,3,"span",3),c.jc(5,"form",4),c.rc("ngSubmit",function(){return t.submitForm()}),c.jc(6,"single-upload",5),c.rc("uploaded",function(e){return t.uploadedFiles(e)})("reset",function(){return t.reset()}),c.ic(),c.ec(7,"textfield",6,7),c.jc(9,"div",8),c.ec(10,"folder-list",9,10),c.ic(),c.dd(12,zn,1,5,"radio",11),c.dd(13,Vn,4,12,"div",12),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(3),c.Dc("ngIf",t.errorFileSelected),c.Mb(1),c.Dc("ngIf",t.generalError),c.Mb(1),c.Dc("formGroup",t.uploadForm),c.Mb(1),c.ad(t.uploadParams.style),c.Dc("label",t.uploadParams.label)("allowed_extensions",t.uploadParams.allowed_extensions)("collection",t.uploadParams.collection)("max_file_size",t.uploadParams.max_file_size)("disabledField",t.uploadParams.disabledField)("inputFormControl",t.uploadForm.controls.uploader),c.Mb(1),c.Dc("id",t.fileInfo.id)("type",t.fileInfo.type)("label",t.fileInfo.label)("floating_label",t.fileInfo.floating_label)("inputFormControl",t.uploadForm.controls.fileInfo),c.Mb(3),c.Dc("course_id",t.course_id),c.Mb(2),c.Dc("ngForOf",t.permissionOptions),c.Mb(1),c.Dc("ngIf",t.selectPermissions))},directives:[Ae.p,Ke.y,Ke.p,Ke.i,Pn.a,_t.a,An,Ae.o,jn.a,Fn.a],pipes:[E.b],styles:["body .wizard__wrapper {\n            height: calc(100vh - 110px);\n        }\n\n          body .wizard__wrapper .wizard-content {\n            max-height: unset;\n        }\n\n        .upload-file[_ngcontent-%COMP%] {\n            height: calc(100vh - 140px);\n        }"]}),e})();const Gn=["folderList"];let $n=(()=>{class e{constructor(e,t,i){this._backendService=e,this.fb=t,this.changeDetector=i,this.folderName=null,this.folderForm=t.group({folderName:["",Ke.x.required]})}submitForm(){}ngOnInit(){this.fileInfo={type:"text",id:"folder_name",label:E.a.t("storage","_ORGFOLDERNAME"),floating_label:!0}}getFolderName(e){this.folderName=e}create(){if(this.folderName&&this.folderName.length>0){let e={file_name:this.folderName,course_id:this.course_id,parent_id:this.folderList.getFirstId()};this._backendService.request("/learn/v1/filerepo/createNewFolder","POST",e).subscribe(e=>{try{console.log("OK Create File"),console.log(e),this.changeDetector.detectChanges()}catch(t){console.log("CREATE FILE! invalid app/version combination OR the returned JSON is invalid"),this.changeDetector.detectChanges()}})}else this.changeDetector.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(Ke.d),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&c.md(Gn,3),2&e){let e;c.Qc(e=c.sc())&&(t.folderList=e.first)}},inputs:{course_id:"course_id"},decls:5,vars:7,consts:[[1,"create-folder-text-field"],[3,"formGroup","ngSubmit"],[3,"id","type","label","floating_label","inputFormControl","onChange"],[3,"course_id"],["folderList",""]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"form",1),c.rc("ngSubmit",function(){return t.submitForm()}),c.jc(2,"textfield",2),c.rc("onChange",function(e){return t.getFolderName(e)}),c.ic(),c.ic(),c.ic(),c.ec(3,"folder-list",3,4)),2&e&&(c.Mb(1),c.Dc("formGroup",t.folderForm),c.Mb(1),c.Dc("id",t.fileInfo.id)("type",t.fileInfo.type)("label",t.fileInfo.label)("floating_label",t.fileInfo.floating_label)("inputFormControl",t.folderForm.controls.folderName),c.Mb(1),c.Dc("course_id",t.course_id))},directives:[Ke.y,Ke.p,Ke.i,_t.a,An],encapsulation:2}),e})();var Hn=i("nhDY");const Yn=["table"];function Wn(e,t){if(1&e){const e=c.kc();c.jc(0,"radio",6),c.rc("OnChange",function(t){return c.Uc(e),c.vc().selectionChange(t)}),c.ic()}if(2&e){const e=t.$implicit;c.Dc("name","selection_type")("value",e.value)("label",e.label)("checked",e.checked)}}function Qn(e,t){if(1&e&&(c.jc(0,"div",7),c.ec(1,"core-table",8,9),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("columns",e.tableParams.columns)("row_actions",e.tableParams.row_actions)("massive_actions",e.tableParams.massive_actions)("source",e.tableParams.source)("enable_massive_actions",e.tableParams.enable_massive_actions)}}let Kn=(()=>{class e{constructor(e,t){this.service=e,this.changeDetector=t,this.showTable=!1,this.selectionOptions=[{id:0,value:0,label:"All sessions",checked:"checked"},{id:1,value:1,label:"Select sessions",checked:""}]}getColumns(){return[{id:"name",name:"name",is_sortable:!1,renderer:ci.b.PlainText},{id:"date_begin",name:"date",is_sortable:!1,renderer:ci.b.PlainText}]}getRowActions(){return[]}getMassiveActions(){return[]}ngOnInit(){this.tableParams={columns:this.getColumns(),source:new Xn(this.course_id,1,[{column_id:"name",order:"asc"}],3,this.service),row_actions:this.getRowActions(),enable_massive_actions:!0,massive_actions:this.getMassiveActions()}}ngAfterViewInit(){}getSelectedSessions(){if(this.showTable){let e=this.table.getSelectedItems(),t=[];for(let i=0;i<e.length;i++)t.push(e[i].id_session);return t}return[]}selectionChange(e){0==e?(this.showTable=!1,this.changeDetector.detectChanges()):(this.showTable=!0,this.changeDetector.detectChanges())}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["session-selection"]],viewQuery:function(e,t){if(1&e&&c.md(Yn,1),2&e){let e;c.Qc(e=c.sc())&&(t.table=e.first)}},inputs:{course_id:"course_id"},decls:6,vars:2,consts:[[1,"component-content","session-selection__wrapper"],[1,"examples-reference"],[1,"elems-row"],["class","session-selection","id","selection_ + selection.id",3,"name","value","label","checked","OnChange",4,"ngFor","ngForOf"],[1,"sesion-table"],["class","wrap-table",4,"ngIf"],["id","selection_ + selection.id",1,"session-selection",3,"name","value","label","checked","OnChange"],[1,"wrap-table"],[3,"columns","row_actions","massive_actions","source","enable_massive_actions"],["table",""]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.dd(3,Wn,1,4,"radio",3),c.jc(4,"div",4),c.dd(5,Qn,3,5,"div",5),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(3),c.Dc("ngForOf",t.selectionOptions),c.Mb(2),c.Dc("ngIf",t.showTable))},directives:[Ae.o,Ae.p,jn.a,Hn.a],encapsulation:2}),e})();class Xn extends ci.b{constructor(e,t=0,i,s,n,a){super(t,i,s,n,a),this.current_page=t,this.sort_by=i,this.page_size=s,this.serviceProvider=n,this.columns=a,this.course_id=e}fetchData(e){return this.serviceProvider.request("/learn/v1/filerepo/getSessions?course_id="+this.course_id,"GET").pipe(Object(ri.a)(e=>e.data))}}const Jn=["folderList"];let Zn=(()=>{class e{constructor(e,t){this._backendService=t,this.linkUrlForm=e.group({inputTitle:["",Ke.x.required],inputUrl:["",Ke.x.required]}),this.inputTitleControl={type:"text",id:"input-title-control",label:E.a.t("standard","Title")},this.inputUrlControl={type:"text",id:"input-url-control",label:"URL"}}ngOnInit(){}save(){if(console.log("Title > ",this.linkUrlForm.controls.inputTitle.value),console.log("URL > ",this.linkUrlForm.controls.inputUrl.value),console.log("Folder > ",this.folderList.getFirstId()),this.linkUrlForm.valid){console.log("API call here");let e={title:this.linkUrlForm.controls.inputTitle.value,course_id:this.course_id,parent_id:this.folderList.getFirstId(),user_id:this.user_id,url:this.linkUrlForm.controls.inputUrl.value};this._backendService.request("/learn/v1/filerepo/linkByURL","POST",e).subscribe(e=>{try{console.log("OK link File by url"),console.log(e)}catch(t){console.log("LINK BY URL! invalid app/version combination OR the returned JSON is invalid")}})}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["link-url-tab"]],viewQuery:function(e,t){if(1&e&&c.md(Jn,3),2&e){let e;c.Qc(e=c.sc())&&(t.folderList=e.first)}},inputs:{user_id:"user_id",course_id:"course_id"},decls:6,vars:10,consts:[[1,"link-url-tab__wrapp"],["id","input-url-form",3,"formGroup"],[3,"id","type","label","inputFormControl"],[3,"course_id"],["folderList",""]],template:function(e,t){1&e&&(c.jc(0,"span",0),c.jc(1,"form",1),c.ec(2,"textfield",2),c.ec(3,"textfield",2),c.ic(),c.ec(4,"folder-list",3,4),c.ic()),2&e&&(c.Mb(1),c.Dc("formGroup",t.linkUrlForm),c.Mb(1),c.Dc("id",t.inputTitleControl.id)("type",t.inputTitleControl.type)("label",t.inputTitleControl.label)("inputFormControl",t.linkUrlForm.controls.inputTitle),c.Mb(1),c.Dc("id",t.inputUrlControl.id)("type",t.inputUrlControl.type)("label",t.inputUrlControl.label)("inputFormControl",t.linkUrlForm.controls.inputUrl),c.Mb(1),c.Dc("course_id",t.course_id))},directives:[Ke.y,Ke.p,Ke.i,_t.a,An],encapsulation:2}),e})();var ea=i("iw5W"),ta=i("2YCl"),ia=i("ILJs");const sa=["paginatedTreeInstance"],na=["rightpanel"];function aa(e,t){if(1&e&&c.ec(0,"btn-ellipsis",8),2&e){const e=c.vc();c.Dc("orientation",e.ellipsisParamsBL.orientation)("actions",e.ellipsisParamsBL.actions)}}function oa(e,t){if(1&e){const e=c.kc();c.jc(0,"div",9),c.jc(1,"rightpanel-component",10,11),c.rc("onClose",function(t){return c.Uc(e),c.vc().onRightPanelClose(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("width",e.rightpanelParams.width)("title",e.rightpanelParams.title)("content",e.rightpanelParams.content)("actions",e.rightpanelParams.actions)}}const ra=function(e){return{empty:e}};let ca=(()=>{class e{constructor(e,t,i,s){this.backendService=e,this.store=t,this.browserDetect=i,this.cdr=s,this.hasData=!0,this.adminView=!1,this.wizardMode=!1,this.itemsUploadLimit=0,this.userCanUploadFiles=!1,this.canSeeWidgetControls=!1,this.isRegularUserEnrolled=!1,this.uploadedItems=0,this.courseDocs=E.a.t("player","File repository area"),this.attachCourseStoreSubscriber()}ngOnInit(){const e=o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),t=o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER);let i=!1;this.courseData.instructors.forEach(e=>{e.instructor_id===o.a.getInstance().id&&(i=!0)}),this.canSeeWidgetControls=e||t&&this.courseData.can_enter||i,this.isRegularUserEnrolled=!this.canSeeWidgetControls&&this.courseData.can_enter,this.openRightpanel={type:"normal",properties:{text:"Open right panel"},state:"normal",uploader:()=>{const e=[];this.wizardMode=!0,this.rightpanelParams.actions=[],this.initWizard(),e.push({id:"step1",content:Bn,params:{course_id:this.course_id,user_id:this.user_id}}),this.courseData.type!==te.e.ELEARNING&&e.push({id:"step2",content:Kn,params:{course_id:this.course_id,user_id:this.user_id}}),this.rightpanel.setContent({params:{steps:e,navigationMode:"breadcrumbs",navigationItems:[{title:E.a.t("standard","Upload file")},{title:E.a.t("standard","Set Visibility")}]},component:Dn.a}),this.rightpanelParams.title=E.a.t("course","_DOCUMENT_UPLOAD"),this.rightpanel.open()},createFolder:()=>{this.rightpanelParams.actions=[{type:"normal",properties:{text:"Create"},handler:e=>(e.componentInstance.create(),new Promise((t,i)=>setTimeout(()=>{t({type:"success",message:"Right Panel confirmed"}),e.close()},2e3)))},{type:"delete",properties:{text:"Cancel"},handler:e=>{e.close()}}],this.rightpanelParams.content={params:{course_id:this.course_id},component:$n},this.rightpanelParams.title=E.a.t("standard","Create folder"),this.rightpanel.open()},linkUrl:()=>{this.rightpanelParams.actions=[{type:"normal",properties:{text:E.a.t("admin","Save")},handler:e=>(e.componentInstance.save(),new Promise((t,i)=>setTimeout(()=>{t({type:"success",message:E.a.t("standard","Link URL successfully uploaded")}),e.close()},2e3)))},{type:"delete",properties:{text:E.a.t("standard","Cancel")},handler:e=>{e.close()}}],this.rightpanelParams.content={component:Zn,params:{course_id:this.course_id,user_id:this.user_id}},this.rightpanelParams.title=E.a.t("standard","Link URL"),this.rightpanel.open()}};const s=new la(10,1,3,15,this.backendService,this.course_id,this.user_id,this.current_session_id);s.onFetchData((e=>{this.hasData=!!e.hasOwnProperty("data")&&e.data.count>0}).bind(this)),this.treeParamsBrowse={has_search:!0,selection_mode:"single",mode:"browse",node_actions:[],onClick:{action:e=>this.download(e)},source:s,search_placeholder:E.a.t("admin","Search all folders"),treeType:En.a.files},this.rightpanelParams={width:500,title:"",content:{component:null,params:{}}},this.ellipsisParamsBL={orientation:"bottom-right",actions:[]},this.afterAddingNewItem=r.a.singleton.subscribe("CourseFilesWidgetChanged",e=>{this.updatePermissions(e.data.data.extra_data)})}ngOnDestroy(){this.afterAddingNewItem.unsubscribe(),this.courseSubscription.unsubscribe()}updatePermissions(e){this.uploadedItems=e.uploadedItems,this.itemsUploadLimit=e.uploadItemsLimit,this.userCanUploadFiles=this.canSeeWidgetControls||this.isRegularUserEnrolled&&this.itemsUploadLimit>this.uploadedItems,this.adminView=!("admin"!==this.widget.display_type.toString()&&!this.userCanUploadFiles),this.coursePermissions&&this.coursePermissions.indexOf("course/update")>=0&&this.canSeeWidgetControls?this.ellipsisParamsBL.actions=[{title:E.a.t("standard","Create folder"),action:this.openRightpanel.createFolder},{title:E.a.t("standard","Upload file"),action:this.openRightpanel.uploader},{title:E.a.t("standard","Link URL"),action:this.openRightpanel.linkUrl}]:this.userCanUploadFiles&&(this.ellipsisParamsBL.actions=[{title:E.a.t("standard","Upload file"),action:this.openRightpanel.uploader},{title:E.a.t("standard","Link URL"),action:this.openRightpanel.linkUrl}])}onRightPanelClose(e){"afterClose"===e&&(this.wizardMode&&(this.wizardMode=!1,this.loadRightPanelSubscriber&&this.loadRightPanelSubscriber.unsubscribe(),this.onChangeStepSubscriber&&this.onChangeStepSubscriber.unsubscribe()),this.paginatedTreeInstance.refreshTree(this.paginatedTreeInstance.getSelectedNodesIds()[0].id,!0))}download(e){const t={file_id:e.id,course_id:this.course_id},i=window.open();new Promise((e,s)=>{this.backendService.request("/learn/v1/filerepo/getCourseFile","GET",t).subscribe(t=>{if(t){const s=t.data.Files;10!==s.item_type&&(0===s.item_type?i.location.href=s.path:this.backendService.request("/manage/v1/upload/presigned_url","GET",{filename:s.path,collection:t.data.collection,operation:"read",keep_original_filename:!0,mime:"noMime"}).subscribe(e=>{if(e){const e=ki.a.getInstance();i.location.href=`${window.location.origin}/learn/v1/filerepo/downloadCourseFile?course_id=${this.course_id}&file_id=${s.id_file}&access_token=${e.get("access_token").access_token}`;const t=this;setTimeout(()=>{t.browserDetect.isIE()||t.browserDetect.isMobile()||t.browserDetect.isIPad()||i.close()},3e3)}})),e({type:"success",message:E.a.t("standard","Upload success")})}else e({type:"error",message:E.a.t("standard","Upload failed")})}),this.rightpanel.close()})}initWizard(){this.loadRightPanelSubscriber=this.rightpanel.onLoad.subscribe(e=>{this.onChangeStepSubscriber=e.onChangeStep.subscribe(t=>{this.rightpanel.setFormControl(e.getWizardForm());const i=[];e.hasNext()&&i.push({type:"normal",properties:{text:E.a.t("standard","Next")},handler:i=>{e.nextStep(),t.next&&t.next()}}),e.hasPrev()&&i.push({type:"normal",properties:{text:E.a.t("standard","Previous"),className:"previous-button"},customClasses:"previous-button",handler:t=>{e.prevStep()}}),e.isLastStep()&&i.push({type:"submit",properties:{text:E.a.t("standard","Confirm")},handler:e=>{let t=[];e.componentInstance.instances.step2&&(t=e.componentInstance.instances.step2.getSelectedSessions());const i=e.componentInstance.instances.step1.getParams(t);return new Promise("missing parameters"===i?(e,t)=>{e({type:"error",message:E.a.t("standard","Missing title or upload file")})}:(e,t)=>{this.backendService.request("/learn/v1/filerepo/uploadNewFile","POST",i).subscribe(t=>{e(t?{type:"success",message:E.a.t("standard","Upload success")}:{type:"error",message:E.a.t("standard","Upload failed")})}),this.rightpanel.close()})}}),i.push({type:"cancel",properties:{text:E.a.t("standard","Cancel")},handler:e=>{e.close()}}),this.rightpanel.setActions(i),this.cdr.detectChanges()})})}attachCourseStoreSubscriber(){this.courseSubscription=this.store.select(ie.d).subscribe(e=>{e.course_status&&void 0!==e.course_status.permissions&&(this.coursePermissions=e.course_status.permissions)})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(v.d),c.dc(ea.a),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["course-docs"]],viewQuery:function(e,t){if(1&e&&(c.md(sa,1),c.md(na,1)),2&e){let e;c.Qc(e=c.sc())&&(t.paginatedTreeInstance=e.first),c.Qc(e=c.sc())&&(t.rightpanel=e.first)}},inputs:{current_session_id:"current_session_id",course_id:"course_id",courseData:"courseData",user_id:"user_id",widget:"widget"},decls:10,vars:17,consts:[[1,"course-widget","course-docs",3,"ngClass"],[1,"course-docs-header"],[1,"course-widget-title"],["class","ellipsis",3,"orientation","actions",4,"ngIf"],["class","course-doc-widget-panels",4,"ngIf"],[1,"tree-wrap"],[3,"source","selection_mode","has_search","node_actions","mode","onClick","show_root_label","treeType","search_placeholder"],["paginatedTreeInstance",""],[1,"ellipsis",3,"orientation","actions"],[1,"course-doc-widget-panels"],[3,"width","title","content","actions","onClose"],["rightpanel",""]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.fd(3),c.wc(4,"t"),c.ic(),c.dd(5,aa,1,2,"btn-ellipsis",3),c.ic(),c.dd(6,oa,3,4,"div",4),c.jc(7,"div",5),c.ec(8,"tree",6,7),c.ic(),c.ic()),2&e&&(c.Dc("ngClass",c.Ic(15,ra,!t.hasData)),c.Mb(3),c.gd(c.xc(4,13,t.courseDocs)),c.Mb(2),c.Dc("ngIf",t.userCanUploadFiles),c.Mb(1),c.Dc("ngIf",t.adminView),c.Mb(2),c.Dc("source",t.treeParamsBrowse.source)("selection_mode",t.treeParamsBrowse.selection_mode)("has_search",t.treeParamsBrowse.has_search)("node_actions",t.treeParamsBrowse.node_actions)("mode",t.treeParamsBrowse.mode)("onClick",t.treeParamsBrowse.onClick)("show_root_label",!1)("treeType",t.treeParamsBrowse.treeType)("search_placeholder",t.treeParamsBrowse.search_placeholder))},directives:[Ae.n,Ae.p,En.b,ta.a,ia.a],pipes:[E.b],encapsulation:2}),e})();class la extends On.b{constructor(e=0,t,i,s,n,a,o,r){super(e,t,i,s,n),this.current_node=e,this.current_page=t,this.page_size=i,this.total=s,this.serviceProvider=n,this.onFetch=null,this.courseId=a,this.userId=o,this.sessionId=r}onFetchData(e){e&&"function"==typeof e&&(this.onFetch=e)}fetchData(e){return this.current_node=e.node_id,this.courseId&&(e.course_id=this.courseId),this.userId&&(e.user_id=this.userId),this.sessionId&&(e.session_id=this.sessionId),this.serviceProvider.request("/learn/v1/filerepo/getCourseFilesTree","GET",e).pipe(Object(ri.a)(e=>{for(const t of e.data.items)t.selection_status=0,"laptop"===t.icon&&(t.css_class="unknown"!==t.file_type?`fa-file-${t.file_type}-o`:"fa-file");return r.a.singleton.publish({event_type:"CourseFilesWidgetChanged",sender_id:this.constructor.name,data:{data:e}}),e.extra_data&&(this.current_node=e.extra_data.id||0),null!==this.onFetch&&this.onFetch.apply(this,[e]),e}))}}var da=i("rzzE");function ua(e,t){if(1&e&&(c.jc(0,"ui-link",4),c.fd(1),c.ic()),2&e){const e=c.vc();c.Ec("href",e.urlLink),c.Mb(1),c.gd(e.linkText)}}let ha=(()=>{class e{constructor(e){this._backendService=e}ngOnInit(){let e=this.widget.params.enrollmentAdditionalField;this._backendService.request("/learn/v1/enrollments?id_course="+this.course_id+"&id_user="+this.user_id,"GET").subscribe(t=>{this.withInstructions(this.widget.params.instructionField),this.withUrlLink(t.data.items[0].enrollment_fields[e]),this.withLinkText(this.widget.params.linkTextField)})}ngOnDestroy(){}withInstructions(e){this.instructions=e}withUrlLink(e){this.urlLink=e}withLinkText(e){this.linkText=e&&0!=e.trim().length?e:this.urlLink}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],inputs:{course_id:"course_id",user_id:"user_id",widget:"widget"},decls:7,vars:4,consts:[[1,"course-widget"],[1,"course-widget-title"],[3,"innerHTML"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.fd(2,"Virtual Lab"),c.ic(),c.ec(3,"div",2),c.wc(4,"sanitizeHtml"),c.ec(5,"br"),c.dd(6,ua,2,2,"ui-link",3),c.ic()),2&e&&(c.Mb(3),c.Dc("innerHTML",c.xc(4,2,t.instructions),c.Vc),c.Mb(3),c.Dc("ngIf",null!=t.urlLink))},directives:[Ae.p,b.mc],pipes:[Mi.a],encapsulation:2}),e})();class pa extends Oi.b{static buildWidgetCustomComponent(e,t,i){switch(e.content_type){case Ei.a.coursedesc:return new Ei.b(Ri,t,e);case Ei.a.myinstructor:return new Ei.b(Ds,t,e);case Ei.a.forum:return new Ei.b(As,t,e);case Ei.a.questions:return new Ei.b(sn,t,e);case Ei.a.questionsNew:return new Ei.b(fs,t,e);case Ei.a.videoconf:return new Ei.b(yn,t,e);case Ei.a.comments:return new Ei.b(xn,t,e);case Ei.a.coursedocs:return new Ei.b(ca,t,e,i);case Ei.a.iframe:return new Ei.b(da.a,t,e);case Ei.a.virtuallab:return new Ei.b(ha,t,e,i);default:return null}}}class ma extends pa{constructor(e,t){super(),this._backendService=e,this.params=t}fetchData(e){let t=[],i=+this.params.course_id,s=x.b.getInstance();return this._backendService.request(`/learn/v1/courses/${i}`,"GET",{},{},S.b,null,e=>this._backendService.redirectWhenCode9000(e)).pipe(Object(ri.a)(e=>e.data)).subscribe(n=>{this._backendService.request(`/learn/v1/courses/${i}/widgets`,"GET").pipe(Object(ri.a)(e=>e.data)).subscribe(i=>{i.widgets&&i.widgets.length>0||!n.has_overview||e.defaultWidgets&&e.defaultWidgets.length>0&&(i.widgets=e.defaultWidgets);for(let e=0;e<i.widgets.length;e++){let a=i.widgets[e],o=new Ei.c(a.id,a.title,a.content_type,a.display_type,a.position,a.columns_span,a.params?JSON.parse(a.params):{});o.component=pa.buildWidgetCustomComponent(o,this.params,n),("questions"===a.content_type||"questions-new"===a.content_type)&&(n.has_overview||!s.isPluginActive("Share7020App")||0==n.tree.length)||t.push(o)}})}),Object(xi.a)(t)}}var ga=i("ReIE"),ba=i("GW7C"),fa=i("XRhs");function va(e,t){if(1&e&&(c.jc(0,"div",6),c.jc(1,"div",7),c.fd(2),c.wc(3,"t"),c.ic(),c.ec(4,"line-limiter",8),c.ic()),2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,2,"Instructors")," "),c.Mb(2),c.Dc("content",e.getInstructors(e.session.instructors))}}function _a(e,t){if(1&e&&c.ec(0,"div",15),2&e){const e=c.vc(2);c.Dc("innerHTML",e.locations[e.session.current_location].country_name,c.Vc)}}function wa(e,t){if(1&e&&c.ec(0,"div",15),2&e){const e=c.vc(2);c.Dc("innerHTML",e.locations[e.session.current_location].address,c.Vc)}}const ya=function(){return{category:"classroom"}};function Ca(e,t){if(1&e){const e=c.kc();c.jc(0,"div",9),c.ec(1,"i",10),c.jc(2,"div",11),c.ec(3,"div",12),c.wc(4,"t"),c.jc(5,"a",13),c.rc("click",function(t){c.Uc(e);const i=c.vc();return i.loadLocationPreview(i.locations[i.session.current_location],t)}),c.jc(6,"h4"),c.fd(7),c.ic(),c.ic(),c.dd(8,_a,1,1,"div",14),c.dd(9,wa,1,1,"div",14),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(3),c.Dc("innerHTML",c.yc(4,4,"Location",c.Hc(7,ya)),c.Vc),c.Mb(4),c.gd(e.locations[e.session.current_location].name),c.Mb(1),c.Dc("ngIf",e.locations[e.session.current_location].country_name),c.Mb(1),c.Dc("ngIf",e.locations[e.session.current_location].address)}}function Sa(e,t){if(1&e&&(c.hc(0),c.fd(1),c.wc(2,"t"),c.wc(3,"t"),c.gc()),2&e){const e=c.vc(3);c.Mb(1),c.hd(" ",e.userTimezoneEnabled&&e.isLoggedIn?c.xc(2,1,"Your Time"):c.xc(3,3,"Local Time")," ")}}function Ta(e,t){1&e&&(c.fd(0),c.wc(1,"t")),2&e&&c.hd(" ",c.xc(1,1,"Local Time")," ")}function ka(e,t){if(1&e&&(c.hc(0),c.fd(1),c.wc(2,"HTime"),c.gc()),2&e){const e=c.vc(2).$implicit,t=c.vc(2);c.Mb(1),c.hd("- ",c.zc(2,1,e.dateEndUTC,t.userTimezoneEnabled&&t.isLoggedIn?t.userTimezone:e.timezone,t.timeFormat),"")}}function Ia(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",32),c.jc(2,"span",33),c.fd(3),c.wc(4,"HTime"),c.dd(5,ka,3,5,"ng-container",28),c.ic(),c.jc(6,"div"),c.fd(7),c.wc(8,"timezoneFormatter"),c.ic(),c.ic(),c.gc()),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Mb(3),c.hd(" ",c.zc(4,3,e.dateStartUTC,t.userTimezoneEnabled&&t.isLoggedIn?t.userTimezone:e.timezone,t.timeFormat)," "),c.Mb(2),c.Dc("ngIf",t.isClassroom),c.Mb(2),c.gd(c.xc(8,7,t.userTimezoneEnabled&&t.isLoggedIn?t.userTimezone:e.timezone))}}function xa(e,t){if(1&e&&(c.hc(0),c.fd(1),c.wc(2,"HTime"),c.gc()),2&e){const e=c.vc(2).$implicit,t=c.vc(2);c.Mb(1),c.hd("- ",c.zc(2,1,e.dateEndUTC,e.timezone,t.timeFormat),"")}}function Da(e,t){if(1&e&&(c.jc(0,"div",32),c.jc(1,"span",33),c.fd(2),c.wc(3,"HTime"),c.dd(4,xa,3,5,"ng-container",28),c.ic(),c.jc(5,"div"),c.fd(6),c.wc(7,"timezoneFormatter"),c.ic(),c.ic()),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Mb(2),c.hd(" ",c.zc(3,3,e.dateStartUTC,e.timezone,t.timeFormat)," "),c.Mb(2),c.Dc("ngIf",t.isClassroom),c.Mb(2),c.gd(c.xc(7,7,e.timezone))}}function Oa(e,t){if(1&e&&(c.hc(0),c.ec(1,"i",35),c.fd(2),c.wc(3,"HDate"),c.gc()),2&e){const e=c.vc(2).$implicit,t=c.vc(2);c.Mb(2),c.hd(" ",c.yc(3,1,e.dateStartUTC,t.userTimezone)," | ")}}function Ea(e,t){if(1&e&&(c.hc(0),c.fd(1),c.wc(2,"HTime"),c.gc()),2&e){const e=c.vc(2).$implicit,t=c.vc(2);c.Mb(1),c.hd("- ",c.zc(2,1,e.dateEndUTC,t.userTimezone,t.timeFormat),"")}}function Pa(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",34),c.ec(2,"i",23),c.jc(3,"span"),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"div",32),c.jc(7,"span",33),c.dd(8,Oa,4,4,"ng-container",28),c.wc(9,"HDate"),c.wc(10,"HDate"),c.fd(11),c.wc(12,"HTime"),c.dd(13,Ea,3,5,"ng-container",28),c.ic(),c.jc(14,"div"),c.fd(15),c.wc(16,"timezoneFormatter"),c.ic(),c.ic(),c.ic(),c.gc()),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Mb(4),c.hd(" ",c.xc(5,5,"Your Time")," "),c.Mb(4),c.Dc("ngIf",c.yc(9,7,e.dateStartUTC,t.userTimezone)!==c.yc(10,10,e.dateStartUTC,e.timezone)),c.Mb(3),c.hd(" ",c.zc(12,13,e.dateStartUTC,t.userTimezone,t.timeFormat)," "),c.Mb(2),c.Dc("ngIf",t.isClassroom),c.Mb(2),c.gd(c.xc(16,17,t.userTimezone))}}function Ma(e,t){if(1&e&&(c.jc(0,"p"),c.ec(1,"i",36),c.jc(2,"span",37),c.fd(3),c.wc(4,"transformMinutes"),c.ic(),c.ic()),2&e){const e=c.vc().$implicit;c.Mb(3),c.hd(" ",c.xc(4,1,e.duration)," ")}}function Aa(e,t){if(1&e){const e=c.kc();c.jc(0,"div",38),c.ec(1,"i",10),c.jc(2,"div",11),c.jc(3,"a",39),c.rc("click",function(){c.Uc(e);const t=c.vc().$implicit,i=c.vc(2);return i.loadLocationPreview(i.locations[t.id_location])}),c.jc(4,"div"),c.fd(5),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc().$implicit,t=c.vc(2);c.Mb(5),c.gd(t.locations[e.id_location].name)}}function La(e,t){1&e&&(c.jc(0,"div",40),c.ec(1,"i",41),c.jc(2,"div",11),c.jc(3,"span",24),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(4),c.gd(c.xc(5,1,"Video Conference")))}function ja(e,t){if(1&e&&(c.jc(0,"div",42),c.jc(1,"div",43),c.ec(2,"ui-icon",44),c.ic(),c.jc(3,"div",45),c.jc(4,"span"),c.fd(5),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Mb(5),c.hd(" ",t.getInstructors(e.instructors),"")}}function Fa(e,t){if(1&e&&(c.jc(0,"div",19),c.jc(1,"h4",20),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",21),c.fd(5),c.wc(6,"HDate"),c.ic(),c.jc(7,"div",22),c.jc(8,"div"),c.ec(9,"i",23),c.jc(10,"span",24),c.dd(11,Sa,4,5,"ng-container",25),c.dd(12,Ta,2,3,"ng-template",null,26,c.ed),c.ic(),c.dd(14,Ia,9,9,"ng-container",25),c.dd(15,Da,8,9,"ng-template",null,27,c.ed),c.dd(17,Pa,17,19,"ng-container",28),c.dd(18,Ma,5,3,"p",28),c.ic(),c.dd(19,Aa,6,1,"div",29),c.dd(20,La,6,3,"div",30),c.dd(21,ja,6,1,"div",31),c.ic(),c.ic()),2&e){const e=t.$implicit,i=c.Rc(13),s=c.Rc(16),n=c.vc(2);c.Mb(2),c.hd(" ",c.xc(3,11,e.name)," "),c.Mb(3),c.hd(" ",c.yc(6,13,e.dateStartUTC,n.userTimezoneEnabled&&n.isLoggedIn&&!e.id_location?n.userTimezone:e.timezone)," "),c.Mb(6),c.Dc("ngIf",!e.id_location)("ngIfElse",i),c.Mb(3),c.Dc("ngIf",!e.id_location)("ngIfElse",s),c.Mb(3),c.Dc("ngIf",n.userTimezoneEnabled&&n.isLoggedIn&&!!e.id_location&&n.userTimezone!==e.timezone),c.Mb(1),c.Dc("ngIf",e.duration),c.Mb(1),c.Dc("ngIf",e.id_location&&n.locations[e.id_location]&&!n.locations[n.session.current_location]),c.Mb(1),c.Dc("ngIf",n.isClassroom&&n.vilt&&e.tool),c.Mb(1),c.Dc("ngIf",n.isClassroom&&n.vilt&&e.instructors.length>0)}}function Ra(e,t){if(1&e&&(c.jc(0,"div",16),c.jc(1,"div",17),c.dd(2,Fa,22,16,"div",18),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("ngForOf",e.session.dates)}}let Na=(()=>{class e{constructor(e,t,i,s,n){this._store=e,this._overviewActions=t,this.pageService=i,this.formatter=s,this.toggleService=n,this.enroll=new c.q,this.displayDateBegin=[],this.displayDateEnd=[],this.timezoneToUse=[],this.userUserLocalTimeArray=0,this.timeFormat=Object(Zt.m)(Object(Zt.i)(),"short"),this.userTimezoneEnabled="off"!==k.b.getInstance().user_settings.timezone_allow_user_override,this.isLoggedIn=k.c.getInstance().isValid(),this.userTimezone=k.c.getInstance().timezone,this.mapReady=!1}get hasInstructors(){return this.session.instructors&&this.session.instructors.some(e=>null!=e)}ngOnInit(){this.vilt=this.toggleService.isOn(u.f.TOGGLE_VILT),this.isWebinar="webinar"===this.course.type,this.isClassroom="classroom"===this.course.type,this.convertDatesWithTimezone(),this.locations=this.overview.locations;let e=E.a.t("standard","Enroll into this session");this.course.available_seats&&this.course.available_seats[this.session.id]<=0&&(e=E.a.t("ecommerce","Session full (waiting list)"));let t=!(!this.course.enrolled||!this.course.enrolled.is_enrolled)&&this.course.enrolled.is_enrolled;this.buttonSave={type:"normal",text:e,onClick:()=>{this._store.dispatch(this._overviewActions.enrollUserToSession(this.course.id,this.session.id,t))}}}loadLocationPreview(e,t){t.preventDefault(),this.pageService.locationViewer.loadMapPreview(e)}getInstructors(e){return 0==e.length?"":e.filter(e=>null!=e).map(e=>""==e.firstname||""==e.lastname?e.username:e.firstname+" "+e.lastname).join(", ")}ngOnDestroy(){var e;null===(e=this.changeTimeView)||void 0===e||e.unsubscribe()}convertDatesWithTimezone(){const e=this.session.dates;this.displayDateBegin=[],e.forEach((e,t)=>{if(e.duration){this.timezoneToUse.push([e.timezone,this.formatter.currentTimezone]);const i=this.formatter.convertTimeToUTC(`${e.day} ${e.start_hour}`,e.timezone),s=new Kt.a(i).formatTimezoned(Object(Zt.k)(Object(Zt.i)(),"short"),this.timezoneToUse[t][this.userUserLocalTimeArray]),n=new Kt.a(i).formatTimezoned(Object(Zt.m)(Object(Zt.i)(),"short"),this.timezoneToUse[t][this.userUserLocalTimeArray]);e.date=s,e.timeStart=n}else e.dateStartUTC=this.formatter.convertTimeToUTC(`${e.day} ${e.time_begin}`,e.timezone),e.dateEndUTC=this.formatter.convertTimeToUTC(`${e.day} ${e.time_end}`,e.timezone)})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(v.d),c.dc(ga.e),c.dc(O.a),c.dc(ti.b),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],inputs:{session:"session",course:"course",overview:"overview",userUserLocalTime:"userUserLocalTime"},outputs:{enroll:"enroll"},decls:6,vars:7,consts:[[1,"enroll-viewer_wrapper","bg-before-grey-light","mdl-grid"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],["class","mdl-cell mdl-cell--6-col location-details",4,"ngIf"],["class","mdl-cell mdl-cell--6-col session-details",4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col","enroll-footer","bg-before-grey-light"],[3,"buttonType","type","text","click"],[1,"mdl-cell","mdl-cell--12-col"],[1,"hyd-typography-heading-5","hyd-color-typography-primary"],["lines","2","more_label","Show more","less_label","Show less",3,"content"],[1,"mdl-cell","mdl-cell--6-col","location-details"],[1,"zmdi","zmdi-pin","text-grey-mid"],[1,"address-wrap"],[1,"location","text-grey-mid",3,"innerHTML"],["href","#",1,"text-main","location-ref",3,"click"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"mdl-cell","mdl-cell--6-col","session-details"],[1,"session-days"],["class","session-date","style","padding-bottom: 5px",4,"ngFor","ngForOf"],[1,"session-date",2,"padding-bottom","5px"],[1,"text-main",2,"margin","8px 0"],[1,"date","no-after","bg-after-grey-light","text-grey-dark","content"],[1,"date-info","content"],[1,"zmdi","zmdi-time","text-grey-mid"],[1,"simple-text"],[4,"ngIf","ngIfElse"],["venuesTemplateTitle",""],["venuesTemplate",""],[4,"ngIf"],["class","location-details",4,"ngIf"],["class","location-details","style","padding: 0",4,"ngIf"],["class","instructor-details",4,"ngIf"],[1,"session-translation"],[1,"bolded"],[2,"margin-top","8px"],[1,"zmdi","zmdi-alert-triangle"],[1,"zmdi","zmdi-time-interval","text-grey-mid"],[1,"text-grey-mid"],[1,"location-details"],["href","#","onclick","return false;",1,"text-main","location-ref",3,"click"],[1,"location-details",2,"padding","0"],[1,"zmdi","zmdi-videocam","text-grey-mid"],[1,"instructor-details"],[1,"icon"],["name","assignment-account","size","xs"],[1,"label"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,va,5,4,"div",1),c.dd(2,Ca,10,8,"div",2),c.dd(3,Ra,3,1,"div",3),c.jc(4,"div",4),c.ec(5,"basic-button",5),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",t.isClassroom&&t.vilt&&t.hasInstructors),c.Mb(1),c.Dc("ngIf",t.session.current_location&&t.locations[t.session.current_location]),c.Mb(1),c.Dc("ngIf",t.session.dates),c.Mb(2),c.Dc("buttonType",t.buttonSave.buttonType)("type",t.buttonSave.type)("text",t.buttonSave.text)("click",t.buttonSave.onClick))},directives:[Ae.p,Fs.a,li.a,Ae.o,b.Eb],pipes:[E.b,ze.a,ba.a,fa.a,cn.a],encapsulation:2}),e})();var Ua=i("MxMe");function qa(e,t){1&e&&c.ec(0,"i",11)}function za(e,t){1&e&&c.ec(0,"i",12)}function Va(e,t){if(1&e&&(c.jc(0,"span",15),c.ec(1,"i",16),c.fd(2),c.ic()),2&e){const e=c.vc(3);c.Mb(2),c.hd(" ",e.locations[e.session.current_location].name,"")}}function Ba(e,t){if(1&e&&(c.jc(0,"span",17),c.ec(1,"i",16),c.fd(2),c.wc(3,"t"),c.ic()),2&e){const e=c.vc(3);c.Mb(2),c.id(" ",c.xc(3,2,"Multiple locations")," (",e.locations_count,")")}}function Ga(e,t){if(1&e&&(c.jc(0,"span"),c.dd(1,Va,3,1,"span",13),c.dd(2,Ba,4,4,"span",14),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",e.course&&"-1"!==e.session.current_location&&e.locations[e.session.current_location]),c.Mb(1),c.Dc("ngIf",e.course&&e.locations_count>0&&!e.locations[e.session.current_location])}}function $a(e,t){if(1&e&&(c.jc(0,"div",2),c.jc(1,"span",3),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"span",4),c.ec(5,"i",5),c.fd(6),c.wc(7,"HDate"),c.ic(),c.jc(8,"span",6),c.dd(9,qa,1,0,"i",7),c.dd(10,za,1,0,"i",8),c.ic(),c.jc(11,"span",3),c.fd(12),c.wc(13,"t"),c.ic(),c.jc(14,"span",4),c.ec(15,"i",5),c.fd(16),c.wc(17,"HDate"),c.ic(),c.dd(18,Ga,3,2,"span",9),c.jc(19,"div",10),c.fd(20),c.wc(21,"timezoneFormatter"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.gd(c.xc(3,8,"_START")),c.Mb(4),c.hd(" ",c.yc(7,10,e.session.start_date,e.betterDateTimeTimezone)," "),c.Mb(3),c.Dc("ngIf",!e.isRtl),c.Mb(1),c.Dc("ngIf",e.isRtl),c.Mb(2),c.gd(c.xc(13,13,"_END")),c.Mb(4),c.hd(" ",c.yc(17,15,e.session.end_date,e.betterDateTimeTimezone)," "),c.Mb(2),c.Dc("ngIf","classroom"==e.course.type),c.Mb(2),c.gd(c.xc(21,18,e.betterDateTimeTimezone))}}function Ha(e,t){if(1&e&&(c.hc(0),c.jc(1,"span",22),c.fd(2),c.wc(3,"HTime"),c.wc(4,"HTime"),c.ic(),c.jc(5,"div"),c.fd(6),c.wc(7,"timezoneFormatter"),c.ic(),c.gc()),2&e){const e=c.vc(2);c.Mb(2),c.id(" ",c.zc(3,3,e.session.dateStartUTC,e.session.timezone,e.timeFormat)," - ",c.zc(4,7,e.session.dateEndUTC,e.session.timezone,e.timeFormat)," "),c.Mb(4),c.hd(" ",c.xc(7,11,e.session.timezone)," ")}}function Ya(e,t){if(1&e&&(c.jc(0,"span",22),c.fd(1),c.wc(2,"HTime"),c.wc(3,"HTime"),c.ic(),c.jc(4,"div"),c.fd(5),c.wc(6,"timezoneFormatter"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.id(" ",c.zc(2,3,e.session.dateStartUTC,e.userTimezoneEnabled?e.timeZone:e.session.timezone,e.timeFormat)," - ",c.zc(3,7,e.session.dateEndUTC,e.userTimezoneEnabled?e.timeZone:e.session.timezone,e.timeFormat)," "),c.Mb(4),c.hd(" ",c.xc(6,11,e.userTimezoneEnabled?e.timeZone:e.session.timezone)," ")}}function Wa(e,t){if(1&e&&(c.jc(0,"div",2),c.jc(1,"span",18),c.ec(2,"i",19),c.dd(3,Ha,8,13,"ng-container",20),c.dd(4,Ya,7,13,"ng-template",null,21,c.ed),c.ic(),c.ic()),2&e){const e=c.Rc(5),t=c.vc();c.Mb(3),c.Dc("ngIf",t.session.id_location)("ngIfElse",e)}}const Qa=function(e){return{length:"short",timezone:e}};function Ka(e,t){if(1&e&&(c.jc(0,"div",23),c.ec(1,"i",24),c.jc(2,"span",25),c.fd(3),c.wc(4,"time"),c.ic(),c.ec(5,"i",26),c.jc(6,"span",25),c.fd(7),c.wc(8,"transformMinutes"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(3),c.id(" ",c.yc(4,3,e.webinarListing.dateTime,c.Ic(8,Qa,e.webinarListing.timezone))," ",e.webinarListing.timezone," "),c.Mb(4),c.gd(c.xc(8,6,e.webinarListing.duration))}}let Xa=(()=>{class e{constructor(e,t){this.formatter=e,this.translationService=t,this.userUserLocalTimeArray=0,this.timeZone=o.a.getInstance().timezone,this.timeFormat=Object(Zt.m)(Object(Zt.i)(),"short"),this.userTimezoneEnabled="off"!==x.b.getInstance().user_settings.timezone_allow_user_override,this.isRtl=!1,this.betterDateTimeTimezone=Object(Zt.j)()}ngOnInit(){if(this.session&&this.session.day&&this.session.timezone&&(this.session.dateStartUTC=this.formatter.convertTimeToUTC(`${this.session.day} ${this.session.time_begin}`,this.session.timezone),this.session.dateEndUTC=this.formatter.convertTimeToUTC(`${this.session.day} ${this.session.time_end}`,this.session.timezone),this.convertDatesWithTimezone()),this.course&&this.overview){this.locations=this.overview.locations;let e=0;for(let t in this.session.dates){let i=this.session.dates[t];i.id_location&&this.locations[i.id_location]&&e++}this.locations_count=e}const e=this.translationService.languageToUse(),t=x.b.getInstance().active_languages;this.isRtl=!!t[e].is_rtl&&t[e].is_rtl}convertDatesWithTimezone(){let e,t;this.session&&(this.session.begin_day?(e=this.session,t=`${e.begin_day} ${e.begin_time}`,this.displayDateBegin=this.formatter.convertTimeToUTC(t,e.begin_timezone),t=`${e.end_day} ${e.end_time}`,this.displayDateEnd=this.formatter.convertTimeToUTC(t,e.end_timezone),this.timezoneToUse=[e.begin_timezone,this.formatter.currentTimezone],this.timezoneEndToUse=[e.end_timezone,this.formatter.currentTimezone],this.displayDateBegin=this.formatter.getTimezonedDate(this.displayDateBegin,this.timezoneToUse[this.userUserLocalTimeArray]),this.displayDateEnd=this.formatter.getTimezonedDate(this.displayDateEnd,this.timezoneEndToUse[this.userUserLocalTimeArray])):this.session.start_date?(this.displayDateBegin=this.session.start_date,this.displayDateEnd=this.session.end_date,this.timezoneToUse=[this.formatter.currentTimezone],this.timezoneEndToUse=[this.formatter.currentTimezone],this.displayDateBegin=this.formatter.getTimezonedDate(this.displayDateBegin,this.timezoneToUse[this.userUserLocalTimeArray]),this.displayDateEnd=this.formatter.getTimezonedDate(this.displayDateEnd,this.timezoneEndToUse[this.userUserLocalTimeArray])):this.session.time_begin&&(e=this.session,t=`${e.day} ${e.time_begin}`,this.displayDateBegin=this.formatter.convertTimeToUTC(t,e.timezone),t=`${e.day} ${e.time_end}`,this.displayDateEnd=this.formatter.convertTimeToUTC(t,e.timezone),this.timezoneToUse=[e.timezone,this.formatter.currentTimezone],this.timezoneEndToUse=[e.timezone,this.formatter.currentTimezone],this.displayDateBegin=this.formatter.getTimezonedDate(this.displayDateBegin,this.timezoneToUse[this.userUserLocalTimeArray]),this.displayDateEnd=this.formatter.getTimezonedDate(this.displayDateEnd,this.timezoneEndToUse[this.userUserLocalTimeArray])))}}return e.\u0275fac=function(t){return new(t||e)(c.dc(ti.b),c.dc(js.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],inputs:{session:"session",overview:"overview",course:"course",webinarListing:"webinarListing"},decls:3,vars:3,consts:[["class","ilt-description",4,"ngIf"],["class","ilt-description text-grey-mid",4,"ngIf"],[1,"ilt-description"],[1,"text-grey-mid","dates"],[1,"date","text-grey-dark"],[1,"zmdi","zmdi-calendar","text-grey-mid"],[1,"arrow","text-grey-mid"],["class","zmdi zmdi-arrow-right",4,"ngIf"],["class","zmdi zmdi-arrow-left",4,"ngIf"],[4,"ngIf"],[1,"timezone-desc"],[1,"zmdi","zmdi-arrow-right"],[1,"zmdi","zmdi-arrow-left"],["class","location text-main",4,"ngIf"],["class","location text-grey-dark",4,"ngIf"],[1,"location","text-main"],[1,"zmdi","zmdi-pin","text-grey-mid"],[1,"location","text-grey-dark"],[1,"text-grey-dark"],[1,"zmdi","zmdi-time","text-grey-mid"],[4,"ngIf","ngIfElse"],["webOnly",""],[1,"text-uppercase","bolded"],[1,"ilt-description","text-grey-mid"],[1,"zmdi","zmdi-time"],[1,"bolded","inner-text"],[1,"zmdi","zmdi-time-interval"]],template:function(e,t){1&e&&(c.dd(0,$a,22,20,"div",0),c.dd(1,Wa,6,2,"div",0),c.dd(2,Ka,9,10,"div",1)),2&e&&(c.Dc("ngIf",t.session&&!t.session.day),c.Mb(1),c.Dc("ngIf",t.session&&t.session.day&&t.session.time_begin),c.Mb(1),c.Dc("ngIf",t.webinarListing))},directives:[Ae.p],pipes:[E.b,ze.a,fa.a,ba.a,Ua.a,cn.a],encapsulation:2}),e})();var Ja=i("M+yG");const Za=function(){return{category:"classroom"}},eo=function(){return["/learn/home"]};function to(e,t){1&e&&(c.jc(0,"div",6),c.ec(1,"img",7),c.ec(2,"h4",8),c.wc(3,"t"),c.ec(4,"p",9),c.wc(5,"t"),c.ec(6,"a",10),c.wc(7,"t"),c.ic()),2&e&&(c.Mb(2),c.Dc("innerHTML",c.yc(3,4,"No Sessions Available",c.Hc(13,Za)),c.Vc),c.Mb(2),c.Dc("innerHTML",c.yc(5,7,"Unfortunately, we haven't found any available session for you to enroll. Please contact your platform Administrator.",c.Hc(14,Za)),c.Vc),c.Mb(2),c.Dc("routerLink",c.Hc(15,eo))("innerHTML",c.yc(7,10,"Go to dashboard",c.Hc(16,Za)),c.Vc))}function io(e,t){if(1&e&&(c.jc(0,"div",11),c.jc(1,"h4"),c.fd(2),c.wc(3,"t"),c.ic(),c.ec(4,"accordion",12),c.ic()),2&e){const e=c.vc();c.Mb(2),c.gd(c.yc(3,4,"You have not selected a session yet. Please select one, and click ENROLL INTO THIS SESSION.",c.Hc(7,Za))),c.Mb(2),c.Dc("type",e.accordionParams.type)("title",e.accordionParams.title)("panels",e.accordionParams.panels)}}function so(e,t){if(1&e&&(c.jc(0,"div",1),c.jc(1,"div",13),c.jc(2,"div",14),c.jc(3,"div",15),c.jc(4,"div",1),c.jc(5,"div",16),c.ec(6,"course-description",17),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(6),c.Dc("course_id",e.course.id)("widget",e.widgetData)}}let no=(()=>{class e{constructor(e,t){this.changeDetector=e,this.toggleService=t,this.isVilt=!1,this.panels=[],this.widgetData={},this.isSuperAdmin=k.c.getInstance().isCurrentUserA(k.c.LEVEL_SUPERADMIN),this.preferenceForTime=!1,this.eventEmitter=r.a.singleton}ngOnInit(){if(this.isVilt=this.toggleService.isOn(u.f.TOGGLE_VILT),this.overview.available_sessions){let t,i;for(var e=0;e<this.overview.available_sessions.length;e++){t=this.overview.available_sessions[e],"webinar"===this.course.type&&(this.preferenceForTime=!0),i={params:{session:t,course:this.course,overview:this.overview,userUserLocalTime:this.preferenceForTime},component:Na};const s=this.course.sessions.find(e=>e.id_session==t.id);void 0!==s&&s.enrolled.can_enroll_session&&this.panels.push({title:t.name,description:{params:{session:t,course:this.course,overview:this.overview},component:Xa},content:i,hideDescriptionOnOpen:!0})}}this.accordionParams={type:"split",panels:this.panels},this.widgetData={id:0,title:null,content_type:"coursedesc",display_type:"learner",position:1,columns_span:12,params:{course_id:this.course.id}}}showTimePreference(e){this.preferenceForTime=e,this.changeDetector.detectChanges(),this.eventEmitter.publish({event_type:"showTimeZonePreferenceForCourseOverview",sender_id:"session-enroller",data:{userUserLocalTime:e}})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["session-enroller"]],inputs:{course:"course",overview:"overview"},decls:6,vars:3,consts:[[1,"session-enroller__wrapper","mdl-wrapper"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],["class","no-sessions",4,"ngIf"],["class","sessions-list",4,"ngIf"],["class","mdl-grid",4,"ngIf"],[1,"no-sessions"],["src","/public/images/learn/no_session.png","all","No sessions available"],[3,"innerHTML"],[1,"text-grey-mid",3,"innerHTML"],[1,"text-main",3,"routerLink","innerHTML"],[1,"sessions-list"],[3,"type","title","panels"],[1,"widgets-area","mdl-cell","mdl-cell--12-col"],["id","collection-widgets-holder"],[1,"widgets-collection-course-wrapper","no-side-padding"],[1,"bg-white","mdl-shadow--2dp","mdl-cell","mdl-cell--12-col"],[3,"course_id","widget"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.dd(3,to,8,17,"div",3),c.dd(4,io,5,8,"div",4),c.ic(),c.ic(),c.dd(5,so,7,2,"div",5),c.ic()),2&e&&(c.Mb(3),c.Dc("ngIf",t.overview.available_sessions.length<=0),c.Mb(1),c.Dc("ngIf",t.overview.available_sessions&&t.overview.available_sessions.length>0),c.Mb(1),c.Dc("ngIf","classroom"==t.course.type&&t.isVilt&&t.isSuperAdmin))},directives:[Ae.p,s.k,Ja.a,Ri],pipes:[E.b],encapsulation:2}),e})();function ao(e,t){if(1&e&&(c.jc(0,"div",1),c.jc(1,"div",2),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",3),c.fd(5),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,2,"Description")," "),c.Mb(3),c.gd(e.day.description)}}function oo(e,t){if(1&e&&(c.jc(0,"div",7),c.jc(1,"div",8),c.ec(2,"ui-icon",9),c.ic(),c.jc(3,"div",10),c.jc(4,"span"),c.fd(5),c.wc(6,"t"),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(5),c.id(" ",c.xc(6,2,"Instructors:")," ",e.instructorLabel,"")}}function ro(e,t){if(1&e&&(c.jc(0,"span"),c.jc(1,"a",13),c.fd(2),c.ic(),c.fd(3),c.wc(4,"t"),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.Dc("href",e.day.collaboration_tool,c.Xc),c.Mb(1),c.gd(e.day.collaboration_tool),c.Mb(1),c.hd(" ",c.xc(4,3,"Collaboration Tool")," ")}}function co(e,t){if(1&e&&(c.jc(0,"span"),c.fd(1),c.wc(2,"t"),c.jc(3,"a",13),c.fd(4),c.ic(),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.hd(" ",c.xc(2,3,"Collaboration Tool")," "),c.Mb(2),c.Dc("href",e.day.collaboration_tool,c.Xc),c.Mb(1),c.gd(e.day.collaboration_tool)}}function lo(e,t){if(1&e&&(c.jc(0,"div",7),c.jc(1,"div",8),c.ec(2,"ui-icon",11),c.ic(),c.jc(3,"div",10),c.dd(4,ro,5,5,"span",12),c.dd(5,co,5,5,"span",12),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.Dc("ngIf",e.isRtl),c.Mb(1),c.Dc("ngIf",!e.isRtl)}}function uo(e,t){if(1&e&&(c.jc(0,"div",1),c.jc(1,"div",4),c.jc(2,"div"),c.jc(3,"h1",5),c.fd(4),c.wc(5,"t"),c.ic(),c.dd(6,oo,7,4,"div",6),c.dd(7,lo,6,2,"div",6),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(4),c.hd(" ",c.xc(5,3,"Event Information")," "),c.Mb(2),c.Dc("ngIf",e.day.instructors.length>0),c.Mb(1),c.Dc("ngIf",null!=e.day.collaboration_tool)}}function ho(e,t){if(1&e&&(c.hc(0),c.ec(1,"i",24),c.fd(2),c.wc(3,"HDate"),c.gc()),2&e){const e=c.vc(3);c.Mb(2),c.hd(" ",c.yc(3,1,e.displayDateBegin,e.userTimezone)," | ")}}function po(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",15),c.ec(2,"i",16),c.jc(3,"div",17),c.jc(4,"div",18),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"h4",19),c.dd(8,ho,4,4,"ng-container",12),c.wc(9,"HDate"),c.wc(10,"HDate"),c.fd(11),c.wc(12,"HTime"),c.wc(13,"HTime"),c.ic(),c.jc(14,"div",20),c.fd(15),c.wc(16,"timezoneFormatter"),c.ic(),c.ic(),c.ic(),c.gc()),2&e){const e=c.vc(2);c.Mb(5),c.hd(" ",c.xc(6,5,"Your Time")," "),c.Mb(3),c.Dc("ngIf",c.yc(9,7,e.displayDateBegin,e.userTimezone)!==c.yc(10,10,e.displayDateBegin,e.day.timezone)),c.Mb(3),c.id(" ",c.zc(12,13,e.displayDateBegin,e.userTimezone,e.timeFormat)," - ",c.zc(13,17,e.displayDateEnd,e.userTimezone,e.timeFormat)," "),c.Mb(4),c.hd(" ",c.xc(16,21,e.userTimezone)," ")}}const mo=function(){return{category:"classroom"}};function go(e,t){if(1&e){const e=c.kc();c.jc(0,"div",25),c.ec(1,"i",26),c.jc(2,"div",17),c.ec(3,"div",27),c.wc(4,"t"),c.jc(5,"h4",28),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.loadMapPreview(t.overview.locations[t.day.id_location])}),c.fd(6),c.ic(),c.jc(7,"div"),c.fd(8),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(3),c.Dc("innerHTML",c.yc(4,3,"Location",c.Hc(6,mo)),c.Vc),c.Mb(3),c.hd(" ",e.overview.locations[e.day.id_location].name," "),c.Mb(2),c.gd(e.overview.locations[e.day.id_location].address)}}const bo=function(){return{category:"standard"}};function fo(e,t){if(1&e&&(c.jc(0,"div",29),c.ec(1,"i",30),c.jc(2,"div",17),c.jc(3,"div",18),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"h4",19),c.fd(7),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.gd(c.yc(5,2,"Classroom",c.Hc(5,bo))),c.Mb(3),c.gd(e.classrooms[e.day.id_classroom].name)}}function vo(e,t){if(1&e&&(c.jc(0,"p"),c.ec(1,"i",32),c.fd(2),c.wc(3,"t"),c.ic()),2&e){const e=c.vc(4);c.Mb(2),c.id(" ",e.classrooms[e.day.id_classroom].seats," ",c.xc(3,2,"available seats")," ")}}function _o(e,t){if(1&e&&(c.jc(0,"p"),c.ec(1,"i",33),c.fd(2),c.ic()),2&e){const e=c.vc(4);c.Mb(2),c.hd(" ",e.classrooms[e.day.id_classroom].details," ")}}function wo(e,t){if(1&e&&(c.jc(0,"p"),c.ec(1,"i",34),c.fd(2),c.ic()),2&e){const e=c.vc(4);c.Mb(2),c.hd(" ",e.classrooms[e.day.id_classroom].equipment," ")}}function yo(e,t){if(1&e&&(c.hc(0),c.jc(1,"h5"),c.fd(2),c.wc(3,"t"),c.ic(),c.dd(4,vo,4,4,"p",12),c.dd(5,_o,3,1,"p",12),c.dd(6,wo,3,1,"p",12),c.gc()),2&e){const e=c.vc(3);c.Mb(2),c.gd(c.yc(3,4,"Additional classroom information",c.Hc(7,mo))),c.Mb(2),c.Dc("ngIf",e.classrooms[e.day.id_classroom].seats),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom].details),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom].equipment)}}function Co(e,t){if(1&e&&(c.jc(0,"div",31),c.dd(1,yo,7,8,"ng-container",12),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",0!=e.classrooms[e.day.id_classroom])}}function So(e,t){if(1&e&&(c.jc(0,"div",1),c.jc(1,"h1",5),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",14),c.jc(5,"div",15),c.ec(6,"i",16),c.jc(7,"div",17),c.jc(8,"div",18),c.fd(9),c.wc(10,"t"),c.ic(),c.jc(11,"h4",19),c.fd(12),c.wc(13,"HTime"),c.wc(14,"HTime"),c.ic(),c.jc(15,"div",20),c.fd(16),c.wc(17,"timezoneFormatter"),c.ic(),c.ic(),c.ic(),c.dd(18,po,17,23,"ng-container",12),c.ic(),c.dd(19,go,9,7,"div",21),c.dd(20,fo,8,6,"div",22),c.dd(21,Co,2,1,"div",23),c.ic()),2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,9,"Venue details")," "),c.Mb(7),c.hd(" ",c.xc(10,11,"Local Time")," "),c.Mb(3),c.id(" ",c.zc(13,13,e.displayDateBegin,e.day.timezone,e.timeFormat)," - ",c.zc(14,17,e.displayDateEnd,e.day.timezone,e.timeFormat)," "),c.Mb(4),c.hd(" ",c.xc(17,21,e.day.timezone)," "),c.Mb(2),c.Dc("ngIf",e.userTimezoneEnabled&&e.userTimezone!==e.day.timezone),c.Mb(1),c.Dc("ngIf",e.overview.locations[e.day.id_location]&&e.locations.length>1),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom]),c.Mb(1),c.Dc("ngIf",e.day.id_classroom)}}let To=(()=>{class e{constructor(e,t){this.pageService=e,this.formatter=t,this.locations=[],this.classrooms=[],this.isRtl=!1,this.userUserLocalTimeArray=0,this.userTimezoneEnabled="off"!==k.b.getInstance().user_settings.timezone_allow_user_override,this.timeFormat=Object(Zt.m)(Object(Zt.i)(),"short"),this.userTimezone=k.c.getInstance().timezone}ngOnInit(){this.isRtl=k.b.getInstance().getLangByShortCode(k.c.getInstance().language).is_rtl,this.changeTimeView=r.a.singleton.subscribe("showTimeZonePreferenceForCourseOverview",e=>{this.userUserLocalTimeArray=e.data.userUserLocalTime?1:0}),this.userUserLocalTimeArray=this.userUserLocalTime?1:0}get instructorLabel(){return 0==this.day.instructors.length?"":this.day.instructors.map(e=>""==e.firstname||""==e.lastname?e.username:e.firstname+" "+e.lastname).join(", ")}get currentLocation(){return this.locations.find(e=>e.id_location==this.day.id_location)}loadMapPreview(e){this.pageService.locationViewer.loadMapPreview(e)}ngOnDestroy(){this.changeTimeView.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(u.c),c.dc(ti.b))},e.\u0275cmp=c.Xb({type:e,selectors:[["ilt-new-viewer"]],inputs:{day:"day",overview:"overview",timezoneToUse:"timezoneToUse",displayDateBegin:"displayDateBegin",displayDateEnd:"displayDateEnd",locations:"locations",classrooms:"classrooms",userUserLocalTime:"userUserLocalTime"},decls:3,vars:3,consts:[["class","ilt-wrapper new-ilt-style bg-before-grey-light",4,"ngIf"],[1,"ilt-wrapper","new-ilt-style","bg-before-grey-light"],[1,"title-normal"],[1,"description"],[1,"button-block","button-block-collaboration-tool"],[1,"hyd-typography-heading-5","hyd-color-typography-primary","new-ilt-style"],["class","ilt-event-info",4,"ngIf"],[1,"ilt-event-info"],[1,"icon"],["name","assignment-account"],[1,"label"],["name","staff"],[4,"ngIf"],["target","_blank",3,"href"],[1,"block-wrap","time-details","new-better-timezone"],[1,"new-timezone-row-container"],[1,"zmdi","zmdi-time","text-grey-mid"],[1,"data-wrap"],[1,"location","text-grey-mid"],[1,"bolded"],[2,"margin-top","var(--hyd-spacing-tiny)"],["class","block-wrap location-details",4,"ngIf"],["class","block-wrap classroom-details",4,"ngIf"],["class","enroll-footer bg-before-grey-light",4,"ngIf"],[1,"zmdi","zmdi-alert-triangle"],[1,"block-wrap","location-details"],[1,"zmdi","zmdi-pin","text-grey-mid"],[1,"location","text-grey-mid",3,"innerHTML"],[1,"bolded","text-main","clickable",3,"click"],[1,"block-wrap","classroom-details"],[1,"zmdi","zmdi-home","text-grey-mid"],[1,"enroll-footer","bg-before-grey-light"],[1,"text-grey-mid","zmdi","zmdi-accounts-alt"],[1,"text-grey-mid","zmdi","zmdi-library"],[1,"text-grey-mid","zmdi","zmdi-wrench"]],template:function(e,t){1&e&&(c.dd(0,ao,6,4,"div",0),c.dd(1,uo,8,5,"div",0),c.dd(2,So,22,23,"div",0)),2&e&&(c.Dc("ngIf",t.day.description),c.Mb(1),c.Dc("ngIf",t.day.instructors.length>0||null!=t.day.collaboration_tool),c.Mb(1),c.Dc("ngIf",t.overview.locations[t.day.id_location]))},directives:[Ae.p,b.Eb],pipes:[E.b,ba.a,fa.a,ze.a],encapsulation:2}),e})();var ko=i("PqYM");const Io=function(){return{category:"webinar"}};function xo(e,t){1&e&&(c.jc(0,"div",10),c.jc(1,"div",11),c.ec(2,"ui-spinner"),c.jc(3,"h4"),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(4),c.gd(c.yc(5,1,"Importing and converting your webinar recording...",c.Hc(4,Io))))}function Do(e,t){if(1&e&&(c.jc(0,"div",3),c.jc(1,"div",3),c.ec(2,"radio",6),c.wc(3,"t"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("label",c.xc(3,7,e.apiGrab.label))("name",e.apiGrab.name)("value",e.apiGrab.value)("enabled",e.apiGrab.enabled)("required",e.apiGrab.required)("change",e.apiGrab.change)("inputFormControl",e.webinarRecordingsForm.controls.formal)}}function Oo(e,t){if(1&e&&(c.jc(0,"div",3),c.jc(1,"div",3),c.ec(2,"radio",6),c.wc(3,"t"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("label",c.xc(3,7,e.apiLink.label))("name",e.apiLink.name)("value",e.apiLink.value)("enabled",e.apiLink.enabled)("required",e.apiLink.required)("change",e.apiLink.change)("inputFormControl",e.webinarRecordingsForm.controls.formal)}}function Eo(e,t){1&e&&(c.jc(0,"div",12),c.jc(1,"div",13),c.ec(2,"i",14),c.jc(3,"span",15),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(4),c.hd(" ",c.yc(5,1,"In order to use this functionality, video service provider must be whitelisted in the Advanced Settings",c.Hc(4,Io))," "))}let Po=(()=>{class e{constructor(e,t,i,s){this.fb=e,this.docLayoutService=t,this.backendService=i,this.changeDetector=s,this.showUploader=!0,this.showLinkField=!1,this.uploadingFile=!1,this.ticker=Object(ko.a)(0,3e3)}ngOnInit(){this.uploader={label:E.a.t("webinar","Your video"),placeholder:E.a.t("standard","Click to choose a file"),allowed_extensions:["3gp","3gp2","avi","flv","mkv","mov","mp4","mpeg","mpeg4","mpg","mpg2","ogg","ogm","wmv"],max_file_size:800,collection:"webinar_recording",style:"form"},this.externalLink={id:"link_upload",label:"URL",type:"text",name:"link_upload",floating_label:!0,enableText:!0,value:""},this.videoUpload={label:E.a.t("webinar","Add webinar recording"),name:"radio-group",value:"custom",enabled:!0,checked:!0,required:!1,change:e=>{this.radioFunction(e)}},this.videoLink={label:E.a.t("webinar","Import video recording from an external link"),name:"radio-group",value:"embeded",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.apiGrab={label:E.a.t("webinar","Use {webinartool} recording",{webinartool:this.tool_name}),name:"radio-group",value:"api_grab",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.apiLink={label:E.a.t("webinar","Use {webinartool} recording",{webinartool:this.tool_name}),name:"radio-group",value:"api_link",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.webinarRecordingsForm=this.fb.group({video_type:[this.videoUpload.value],uploader:[""],external_link:[""]}),this.setFormValidators()}setFormValidators(e="custom"){switch(e){case"custom":this.webinarRecordingsForm.controls.uploader.setValidators([Ke.x.required]),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators(null),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators(null),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity();break;case"embeded":this.webinarRecordingsForm.controls.uploader.setValidators(null),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators([Ke.x.required]),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators(null),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity();break;case"api_link":case"api_grab":this.webinarRecordingsForm.controls.uploader.setValidators(null),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators(null),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators([Ke.x.required]),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity()}}radioFunction(e){this.showUploader="custom"==e,this.showLinkField="embeded"==e,"api_link"!=e&&"api_grab"!=e||(this.showUploader=!1,this.showLinkField=!1),this.setFormValidators(e),this.webinarRecordingsForm.controls.video_type.setValue(e)}submitVideo(){var e;switch(this.uploadingFile=!0,this.changeDetector.detectChanges(),this.webinarRecordingsForm.controls.video_type.value){case"custom":e={recording_type:2,filename:this.webinarRecordingsForm.controls.uploader.value};break;case"embeded":e={recording_type:3,url:this.webinarRecordingsForm.controls.external_link.value};break;case"api_link":e={recording_type:4};break;case"api_grab":e={recording_type:1}}this.backendService.request(`/course/v1/events/${this.id_event}/recording`,"POST",e).subscribe(e=>{this.subscriber=this.ticker.subscribe(e=>this.checkUploadStatus(e))},e=>{this.throwError(e)})}checkUploadStatus(e){this.backendService.request(`/course/v1/events/${this.id_event}/recording`,"GET").subscribe(t=>{this.handler("uploading"),"Converting"===t.data.status&&1800!=e||(1800==e?(this.throwError(),this.subscriber.unsubscribe()):(this.subscriber.unsubscribe(),this.docLayoutService.toast.showToast({message:E.a.t("standard","Your video has been uploaded."),type:"success"}),this.uploadingFile=!1,this.cleanForm(),this.handler("uploaded")))},e=>{this.throwError(e)})}throwError(e){if(e){console.log("error",e.message);for(let t=0;t<e.message.length;t++)this.docLayoutService.toast.showToast({message:E.a.t("standard",e.message[t]),type:"error"})}else this.docLayoutService.toast.showToast({message:E.a.t("standard","Your video hasn't been uploaded."),type:"error"});this.uploadingFile=!1,this.cleanForm(this.webinarRecordingsForm.controls.video_type.value),this.handler("failed")}cleanForm(e){e||(e="custom"),this.webinarRecordingsForm.reset(),this.webinarRecordingsForm.controls.uploader.setValue(null),this.webinarRecordingsForm.controls.external_link.setValue(null),this.webinarRecordingsForm.controls.video_type.setValue(e),this.setFormValidators(e)}uploadedRecording(){this.changeDetector.detectChanges()}deleteRecording(){this.cleanForm()}ngOnDestroy(){this.uploadingFile&&this.docLayoutService.toast.showToast({message:E.a.t("standard","Your recording is still being uploaded in the background. Please don't navigate away from the page."),type:"error"})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(M.a),c.dc(S.a),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],inputs:{id_session:"id_session",id_event:"id_event",tool_name:"tool_name",api_link:"api_link",api_grab:"api_grab",super_user:"super_user",handler:"handler"},decls:19,vars:45,consts:[["class","webinar-loading-overlay bg-white",4,"ngIf"],[1,"webinar-recordings"],[3,"formGroup","ngSubmit"],[1,"mdl-cell--12-col"],[3,"label","name","value","enabled","required","checked","change","inputFormControl"],[3,"label","allowed_extensions","placeholder","collection","max_file_size","inputFormControl","uploaded","reset"],[3,"label","name","value","enabled","required","change","inputFormControl"],[3,"id","type","floating_label","value","inputFormControl"],["class","mdl-cell--12-col",4,"ngIf"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[1,"webinar-loading-overlay","bg-white"],[1,"loader"],[1,"mdl-cell","mdl-cell--12-col"],[1,"webinar-completion-warning","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle"],[1,"inner-text"]],template:function(e,t){1&e&&(c.dd(0,xo,6,5,"div",0),c.jc(1,"div",1),c.jc(2,"form",2),c.rc("ngSubmit",function(){return t.submitVideo()}),c.jc(3,"div",3),c.jc(4,"div",3),c.ec(5,"radio",4),c.wc(6,"t"),c.ic(),c.jc(7,"div"),c.jc(8,"single-upload",5),c.rc("uploaded",function(){return t.uploadedRecording()})("reset",function(){return t.deleteRecording()}),c.wc(9,"t"),c.ic(),c.ic(),c.ic(),c.jc(10,"div",3),c.jc(11,"div",3),c.ec(12,"radio",6),c.wc(13,"t"),c.ic(),c.jc(14,"div"),c.ec(15,"textfield",7),c.ic(),c.ic(),c.dd(16,Do,4,9,"div",8),c.dd(17,Oo,4,9,"div",8),c.ic(),c.dd(18,Eo,6,5,"div",9),c.ic()),2&e&&(c.Dc("ngIf",t.uploadingFile),c.Mb(2),c.Dc("formGroup",t.webinarRecordingsForm),c.Mb(3),c.Dc("label",c.xc(6,39,t.videoUpload.label))("name",t.videoUpload.name)("value",t.videoUpload.value)("enabled",t.videoUpload.enabled)("required",t.videoUpload.required)("checked",t.videoUpload.checked)("change",t.videoUpload.change)("inputFormControl",t.webinarRecordingsForm.controls.formal),c.Mb(2),c.Rb("mdl-cell--12-col ",t.showUploader?"visible-item":"hidden-item"," "),c.Mb(1),c.ad(t.uploader.style),c.Dc("label",c.xc(9,41,t.uploader.label))("allowed_extensions",t.uploader.allowed_extensions)("placeholder",t.uploader.placeholder)("collection",t.uploader.collection)("max_file_size",t.uploader.max_file_size)("inputFormControl",t.webinarRecordingsForm.controls.uploader),c.Mb(4),c.Dc("label",c.xc(13,43,t.videoLink.label))("name",t.videoLink.name)("value",t.videoLink.value)("enabled",t.videoLink.enabled)("required",t.videoLink.required)("change",t.videoLink.change)("inputFormControl",t.webinarRecordingsForm.controls.formal),c.Mb(2),c.Rb("mdl-cell--12-col  ",t.showLinkField?"visible-item":"hidden-item"," "),c.Mb(1),c.Dc("id",t.externalLink.id)("type",t.externalLink.type)("floating_label",t.externalLink.floating_label)("value",t.externalLink.value)("inputFormControl",t.webinarRecordingsForm.controls.external_link),c.Mb(1),c.Dc("ngIf",t.api_grab),c.Mb(1),c.Dc("ngIf",t.api_link),c.Mb(1),c.Dc("ngIf",t.showLinkField))},directives:[Ae.p,Ke.y,Ke.p,Ke.i,jn.a,Pn.a,_t.a,b.fd],pipes:[E.b],encapsulation:2}),e})();var Mo=function(e){return e.adobeconnectv2meeting="adobeconnectv2meeting",e.adobeconnectv2seminar="adobeconnectv2seminar",e.gotomeetingv2meeting="gotomeetingv2meeting",e.gotomeetingv2training="gotomeetingv2training",e.gotomeetingv2webinar="gotomeetingv2webinar",e.webexv2event="webexv2event",e.webexv2meeting="webexv2meeting",e.webexv2training="webexv2training",e.zoomv2webinar="zoomv2webinar",e.zoomv2meeting="zoomv2meeting",e.onairv1meeting="onairv1meeting",e.onairv1webinar="onairv1webinar",e.trwebinar="trwebinar",e}({}),Ao=i("xIAn"),Lo=i("2Hr6");const jo=["rightpanel"],Fo=function(){return{category:"standard"}};function Ro(e,t){if(1&e&&(c.jc(0,"div",10),c.ec(1,"i",28),c.jc(2,"div",12),c.jc(3,"div",13),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"h4",14),c.fd(7),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.hd(" ",c.yc(5,2,"Event Type",c.Hc(5,Fo))," "),c.Mb(3),c.gd(e.date.event_type)}}const No=function(){return{category:"webinar"}};function Uo(e,t){if(1&e&&(c.jc(0,"div",10),c.ec(1,"i",29),c.jc(2,"div",12),c.jc(3,"div",13),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"h4",14),c.fd(7),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.hd(" ",c.yc(5,2,"Room",c.Hc(5,No))," "),c.Mb(3),c.gd(e.date.kaltura_v1_room)}}function qo(e,t){1&e&&(c.jc(0,"div",30),c.ec(1,"em",31),c.jc(2,"div"),c.jc(3,"div",32),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"div",33),c.fd(7),c.wc(8,"t"),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(4),c.hd(" ",c.yc(5,2,"Info",c.Hc(8,Fo))," "),c.Mb(3),c.hd(" ",c.yc(8,5,"Guest user will not be able to join this meeting",c.Hc(9,Fo))," "))}function zo(e,t){1&e&&(c.jc(0,"span",34),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"You did not attend this webinar. And the recording for it is still not available.")," "))}function Vo(e,t){1&e&&(c.jc(0,"span",34),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"You did not attend this webinar. However, a recording is available")," "))}function Bo(e,t){if(1&e&&(c.jc(0,"span",34),c.fd(1),c.wc(2,"t"),c.jc(3,"span",35),c.fd(4),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,2,"Your webinar starts in",c.Hc(5,No))," "),c.Mb(3),c.hd(" ",e.timerOutput,"")}}function Go(e,t){if(1&e&&c.ec(0,"rectangular-button",36),2&e){const e=c.vc(2);c.Dc("properties",e.viewRecording.properties)("click",e.viewRecording.onClick)}}function $o(e,t){if(1&e){const e=c.kc();c.jc(0,"a",37),c.rc("click",function(){return c.Uc(e),c.vc(2).deleteRecording()}),c.fd(1),c.wc(2,"t"),c.ic()}2&e&&(c.Mb(1),c.gd(c.yc(2,1,"Delete your webinar video recording",c.Hc(4,No))))}function Ho(e,t){if(1&e&&c.ec(0,"rectangular-button",36),2&e){const e=c.vc(2);c.Dc("properties",e.addRecording.properties)("click",e.addRecording.onClick)}}const Yo=function(e){return{category:"standard",time:e}};function Wo(e,t){if(1&e&&(c.jc(0,"span",35),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(4);c.Mb(1),c.gd(c.yc(2,1,"{time} ago",c.Ic(4,Yo,e.timerOutput)))}}function Qo(e,t){if(1&e&&(c.jc(0,"span",34),c.fd(1),c.wc(2,"t"),c.dd(3,Wo,3,6,"span",39),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.hd(" ",c.xc(2,2,"The webinar started:")," "),c.Mb(2),c.Dc("ngIf",!!e.timerOutput)}}function Ko(e,t){if(1&e&&(c.jc(0,"div",23),c.dd(1,Qo,4,4,"span",22),c.ec(2,"rectangular-button",38),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",!e.date.upcoming),c.Mb(1),c.Dc("properties",e.joinWebinar.properties)("state",e.date.webinar_tool_sync_failed?"disabled":"normal")("click",e.joinWebinar.onClick)}}function Xo(e,t){if(1&e){const e=c.kc();c.jc(0,"rightpanel-component",40,41),c.rc("onOpen",function(t){return c.Uc(e),c.vc(2).checkForm(t)}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("width",e.rightpanelParams.width)("title",e.rightpanelParams.title)("content",e.rightpanelParams.content)("actions",e.rightpanelParams.actions)}}function Jo(e,t){if(1&e&&(c.jc(0,"div",7),c.jc(1,"div",8),c.jc(2,"h1",9),c.fd(3),c.wc(4,"t"),c.ic(),c.jc(5,"div",10),c.ec(6,"i",11),c.jc(7,"div",12),c.jc(8,"div",13),c.fd(9),c.wc(10,"t"),c.ic(),c.jc(11,"h4",14),c.fd(12),c.wc(13,"HTime"),c.ic(),c.jc(14,"div",15),c.fd(15),c.wc(16,"timezoneFormatter"),c.ic(),c.ic(),c.ic(),c.jc(17,"div",10),c.ec(18,"i",16),c.jc(19,"div",12),c.jc(20,"div",13),c.fd(21),c.wc(22,"t"),c.ic(),c.jc(23,"h4",14),c.fd(24),c.wc(25,"transformMinutes"),c.ic(),c.ic(),c.ic(),c.jc(26,"div",10),c.ec(27,"i",17),c.jc(28,"div",12),c.jc(29,"div",13),c.fd(30),c.wc(31,"t"),c.ic(),c.jc(32,"h4",14),c.fd(33),c.ic(),c.ic(),c.ic(),c.dd(34,Ro,8,6,"div",18),c.dd(35,Uo,8,6,"div",18),c.ic(),c.jc(36,"div",19),c.dd(37,qo,9,10,"div",20),c.jc(38,"div",21),c.dd(39,zo,3,3,"span",22),c.dd(40,Vo,3,3,"span",22),c.dd(41,Bo,5,6,"span",22),c.jc(42,"div",23),c.dd(43,Go,1,2,"rectangular-button",24),c.ic(),c.jc(44,"div",23),c.dd(45,$o,3,5,"a",25),c.wc(46,"async"),c.ic(),c.jc(47,"div",23),c.dd(48,Ho,1,2,"rectangular-button",24),c.wc(49,"async"),c.ic(),c.dd(50,Ko,3,4,"div",26),c.ic(),c.ic(),c.dd(51,Xo,2,4,"rightpanel-component",27),c.ic()),2&e){const e=c.vc();c.Mb(3),c.hd(" ",c.xc(4,19,"Video conference details")," "),c.Mb(6),c.hd(" ",e.userTimezoneEnabled&&e.isLoggedIn?"Your Time":c.xc(10,21,"Local Time")," "),c.Mb(3),c.hd(" ",c.zc(13,23,e.UTCStartTime,e.userTimezoneEnabled?e.userTimeZone:e.sessionTimeZone,e.timeFormat)," "),c.Mb(3),c.hd(" ",c.xc(16,27,e.userTimezoneEnabled?e.userTimeZone:e.sessionTimeZone)," "),c.Mb(6),c.hd(" ",c.xc(22,29,"Duration")," "),c.Mb(3),c.gd(c.xc(25,31,e.date.duration)),c.Mb(6),c.hd(" ",c.yc(31,33,"Tool",c.Hc(40,No))," "),c.Mb(3),c.gd(e.date.tool),c.Mb(1),c.Dc("ngIf",!!e.date.event_type),c.Mb(1),c.Dc("ngIf",!!e.date.kaltura_v1_room),c.Mb(2),c.Dc("ngIf",e.showInfoBox),c.Mb(2),c.Dc("ngIf",e.date.not_attended&&!e.date.has_recording&&!e.showJoinButton),c.Mb(1),c.Dc("ngIf",e.date.not_attended&&e.date.has_recording&&!e.showJoinButton),c.Mb(1),c.Dc("ngIf",e.date.upcoming),c.Mb(2),c.Dc("ngIf",e.date.has_recording&&!e.showJoinButton),c.Mb(2),c.Dc("ngIf",("instructor"==e.date.user_level||e.date.super_user||e.date.power_user&&c.xc(46,36,e.canPowerUserManageRecording$))&&e.date.has_recording&&!e.date.upcoming&&!e.showJoinButton),c.Mb(3),c.Dc("ngIf",("instructor"==e.date.user_level||e.date.super_user||e.date.power_user&&c.xc(49,38,e.canPowerUserManageRecording$))&&!e.date.has_recording&&!e.date.upcoming&&!e.showJoinButton&&e.showAddNewVideo),c.Mb(2),c.Dc("ngIf",e.showJoinButton),c.Mb(1),c.Dc("ngIf",e.showRightPanel)}}function Zo(e,t){if(1&e&&(c.jc(0,"div",42),c.ec(1,"iframe",43),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("src",e.iframeUrl,c.Wc)}}function er(e,t){if(1&e&&c.ec(0,"player-iframe",44),2&e){const e=c.vc();c.Dc("url",e.recordData.recording.url)("bookmark",0)}}function tr(e,t){if(1&e&&c.ec(0,"player-flowplayer",45),2&e){const e=c.vc();c.Dc("mp4_url",e.recordData.recording.url)("hls_url",e.recordData.recording.hls)("speedControlEnabled","true")}}let ir=(()=>{class e{constructor(e,t,i,s,n,a,r,c,l,d,u,h){this.router=e,this._el=t,this.docLayoutService=i,this.backendService=s,this.formatter=n,this._store=a,this.overviewActions=r,this._route=c,this.changeDetector=l,this.sanitizer=d,this.toggleService=u,this.store=h,this.showJoinButton=!1,this.showAddNewVideo=!0,this.showRightPanel=!1,this.showVideoFrame=!1,this.userTimeZone=o.a.getInstance().timezone,this.canPowerUserManageRecording$=Object(xi.a)(!1),this.userTimezoneEnabled="off"!==k.b.getInstance().user_settings.timezone_allow_user_override,this.isLoggedIn=o.a.getInstance().isValid(),this.ticker=Object(ko.a)(0,1e3),this.disableConfirm=!0,this.viewRecording={},this.addRecording={},this.joinWebinar={},this.isIframeinit=!1,this.iframeUrl="",this.toggleAdobeConnectIsOn=!1,this.toggleAdobeConnectAttendanceTrackingIsOn=!1,this.joinWebinarAction=()=>{this.routeTo()}}ngOnInit(){this.initializeRightPanel(),this.toggleAdobeConnectIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_SESSION_COMPLETION_VILT),this.toggleAdobeConnectAttendanceTrackingIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_ATTENDANCE_TRACKING),this.joinWebinar={properties:{text:E.a.t("standard","join the webinar"),colorScheme:"positive-green",typeStyle:"filled"},onClick:this.joinWebinarAction},this.addRecording={properties:{text:E.a.t("webinar","Add recording"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>{this.rightpanel.open()}},this.viewRecording={properties:{text:E.a.t("standard","view the recording"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>{this.backendService.request(`/course/v1/events/${this.date.id}/watch_recording`,"GET").pipe(Object(ri.a)(e=>e)).subscribe(e=>{this.recordData=e.data,"link"==e.data.recording.type?(window.open(e.data.recording.url,"_blank"),this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))):"video"==e.data.recording.type||"iframe"==e.data.recording.type?(this.showVideoFrame=!0,this.changeDetector.detectChanges(),this._el.nativeElement.querySelector(".webinar-iframe-video")&&this._el.nativeElement.querySelector(".webinar-iframe-video").classList.add("opened"),document.body.classList.add("hide-overflow")):this.docLayoutService.toast.showToast({message:E.a.t("standard","Something went wrong."),type:"error"})})}},this.webinarStartHour=this.date.day+" "+this.date.time_begin;const e=this.formatter.convertTimeToUTC(this.webinarStartHour,this.date.timezone);this.UTCStartTime=e,this.timeFormat=Object(Zt.m)(Object(Zt.i)(),"short"),this.formatter.format("time",e,{length:"short"}).subscribe(e=>this.webinarStartDateToUserTimezone=e),this.sessionTimeZone=this.date.timezone,this.webinarEndHour=this.formatter.calculateDuration(e,this.date.duration);const t=!this.date.instructor_join||"instructor"!==this.date.user_level&&"tutor"!==this.date.user_level?this.date.student_join&&"learner"===this.date.user_level?this.date.student_join:null:this.date.instructor_join;this.webinarPreJoinDateToUTC=t?this.formatter.calculateDuration(e,-1*t):0,this.minutesRemainingToStart=this.formatter.getTime(e),this.webinarEndHour=this.formatter.getTime(this.webinarEndHour),0!==this.webinarPreJoinDateToUTC&&(this.joinInAdvanceMinutes=this.formatter.getTime(this.webinarPreJoinDateToUTC)),this.subscriber=this.ticker.subscribe(e=>{this.upcomingTimer()}),this.changeDetector.detectChanges(),this.canPowerUserManageRecording$=this.store.select(ie.e).pipe(Object(ri.a)(e=>!!e.permissions&&e.permissions.some(e=>e==u.e.COURSE_UPDATE)))}ngOnDestroy(){this.subscriber&&this.subscriber.unsubscribe(),this.rightpanel&&this.rightpanel.componentInstance&&this.rightpanel.componentInstance.subscriber&&this.rightpanel.componentInstance.subscriber.unsubscribe()}closeIframe(){this._el.nativeElement.querySelector(".webinar-iframe-video")&&this._el.nativeElement.querySelector(".webinar-iframe-video").classList.remove("opened"),document.body.classList.remove("hide-overflow"),this.showVideoFrame=!1,this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))}upcomingTimer(){let e=this.formatter.currentUtcDateTime();e=this.formatter.getTime(e);let t=this.formatter.returnTimer(this.webinarStartHour,{timezone:this.date.timezone});t||(this.date.upcoming=!1);const i=this.formatter.convertTimeToUTC(this.date.day+" "+this.date.time_end,this.date.timezone);this.formatter.getTime(i)>e?(this.minutesRemainingToStart<=e||this.joinInAdvanceMinutes&&this.joinInAdvanceMinutes<e||"-1"===this.date.instructor_join&&("instructor"===this.date.user_level||"tutor"===this.date.user_level)||"-1"===this.date.student_join&&"learner"===this.date.user_level?(this.showJoinButton=!0,this.showAddNewVideo=!1):(this.showJoinButton=!1,this.showAddNewVideo=!1),this.timerOutput=t):(this.showJoinButton=!1,this.showAddNewVideo=!0,this.subscriber.unsubscribe())}deleteRecording(){this.docLayoutService.dialog.showCommonDialog({title:E.a.t("standard","Delete recording"),content:E.a.t("standard","Delete your webinar video recording?"),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:E.a.t("standard","Yes, I want to proceed"),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"delete",type:"negative",label:E.a.t("standard","delete"),slot:"end"}]}).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.backendService.request(`/course/v1/events/${this.date.id}/recording`,"DELETE").subscribe(t=>{this.docLayoutService.toast.showToast({message:E.a.t("standard","Your recording has been deleted."),type:"success"}),e.actionSuccess.next(!0),this._route.params.pipe(Object(ee.a)(1)).subscribe(e=>{let t=e.id_session;t&&this.id_session==t&&this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))})},()=>{this.docLayoutService.toast.showToast({message:E.a.t("standard","Your recording hasn't been deleted."),type:"error"}),e.actionSuccess.next(!1)})})}uploadStatus(e){switch(e){case"uploaded":this.rightpanel.close(),this.showAddNewVideo=!0,this.date.has_recording=!0;let e=this._route.params.subscribe(e=>{let t=e.id_session;t&&this.id_session===t&&this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))});e&&e.unsubscribe();break;case"uploading":this.showAddNewVideo=!1;break;case"failed":this.showAddNewVideo=!0}}routeTo(){this.backendService.request(`/course/v1/events/${this.date.id}/join_webtool`,"GET").subscribe(e=>{if(void 0!==e.data.join_url)if(console.log("Getting url data"),console.log(e.data),void 0===e.data.credentials)if(console.log("Sending request via GET"),"undefined"!=e.data.show_type&&"iframe"==e.data.show_type){let t=this.sanitizer.bypassSecurityTrustResourceUrl(e.data.join_url);this.iframeStatus$.next({isInit:!0,url:t,name:this.date.name})}else window.open(e.data.join_url,"_blank");else{console.log("Sending request via POST");const i=e.data.credentials,s=e.data.join_url,n=document.createElement("form");if(n.target="_blank",n.method="POST",n.action=s,e.data.credentials)for(var t in i){let e=document.createElement("input");e.type="hidden",e.name=t,e.setAttribute("value",i[t]),n.appendChild(e)}document.body.appendChild(n),n.submit(),n.remove()}else this.docLayoutService.toast.showToast({message:E.a.t("standard","Failed to join webinar session."),type:"error"})},e=>{const t={20100:()=>{this.docLayoutService.toast.showToast({message:E.a.t("zoom","You cannot access a Zoom meeting without having a valid email in your profile"),type:"error"})},20101:()=>{this.docLayoutService.toast.showToast({message:E.a.t("webinar","Unable to retrieve join URL due to internal error"),type:"error"})},21021:()=>{this.docLayoutService.toast.showToast({message:E.a.t("bluejeans","You cannot access a Bluejeans meeting without having a valid email in your profile"),type:"error"})},500:()=>{this.docLayoutService.toast.showToast({message:E.a.t("standard","Internal Server Error"),type:"error"})}};t[e.code]&&t[e.code]()})}checkForm(){setTimeout(()=>{this.rightpanel.setFormControl(this.rightpanel.componentInstance.webinarRecordingsForm)})}initializeRightPanel(){this.rightpanelParams={width:500,title:E.a.t("webinar","Add recording"),content:{params:{id_session:this.id_session,id_event:this.date.id,api_link:this.date.api_link,api_grab:this.date.api_grab,tool_name:this.date.tool,super_user:this.date.super_user,handler:this.uploadStatus.bind(this)},component:Po},actions:[{type:"submit",properties:{text:E.a.t("standard","Confirm"),state:"disabled"},handler:()=>{this.rightpanel.componentInstance.submitVideo()}},{type:"cancel",properties:{text:"Cancel"},handler:e=>{e.close()}}]},this.showRightPanel=!0}isAdobeConnectTool(e){return e==Mo.adobeconnectv2meeting||e==Mo.adobeconnectv2seminar}isAdobeMeetingField(e){return e==Mo.adobeconnectv2meeting}get showInfoBox(){return this.isAdobeMeetingField(this.date.webinar_tool)&&this.toggleAdobeConnectAttendanceTrackingIsOn&&this.toggleAdobeConnectIsOn&&this.date.tool_mapping_field_lms}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(c.o),c.dc(M.a),c.dc(S.a),c.dc(ti.b),c.dc(v.d),c.dc(ga.e),c.dc(s.a),c.dc(c.i),c.dc(Pi.b),c.dc(u.g),c.dc(v.d))},e.\u0275cmp=c.Xb({type:e,selectors:[["ilt-viewer-tool"]],viewQuery:function(e,t){if(1&e&&c.md(jo,1),2&e){let e;c.Qc(e=c.sc())&&(t.rightpanel=e.first)}},inputs:{date:"date",id_session:"id_session",course_id:"course_id",session_slug_name:"session_slug_name",recordData:"recordData",iframeStatus$:"iframeStatus$"},decls:7,vars:4,consts:[["class","ilt-wrapper new-ilt-style bg-before-grey-light",4,"ngIf"],["class","webinar-iframe-holder player-wrapper",4,"ngIf"],[1,"webinar-iframe-video"],[1,"player-wrapper"],[3,"url","bookmark",4,"ngIf"],[3,"mp4_url","hls_url","speedControlEnabled",4,"ngIf"],[1,"zmdi","zmdi-close",3,"click"],[1,"ilt-wrapper","new-ilt-style","bg-before-grey-light"],[1,"information-wrap"],[1,"hyd-typography-heading-5","hyd-color-typography-primary","new-ilt-style"],[1,"block-wrap","time-details"],[1,"zmdi","zmdi-time","text-grey-mid"],[1,"data-wrap"],[1,"location","text-grey-mid"],[1,"bolded"],[2,"margin-top","var(--hyd-spacing-tiny)"],[1,"zmdi","zmdi-time-interval","text-grey-mid"],[1,"zmdi","zmdi-videocam","text-grey-mid"],["class","block-wrap time-details",4,"ngIf"],[1,"enroll-footer","bg-before-grey-light","recording-available"],["class","ilt-warning-block",4,"ngIf"],[1,"ilt-info-block"],["class","title-regular",4,"ngIf"],[1,"button-block"],[3,"properties","click",4,"ngIf"],["class","cursor text-main",3,"click",4,"ngIf"],["class","button-block",4,"ngIf"],[3,"width","title","content","actions","onOpen",4,"ngIf"],[1,"zmdi","zmdi-laptop","text-grey-mid"],[1,"zmdi","zmdi-home","text-grey-mid"],[1,"ilt-warning-block"],[1,"zmdi","zmdi-info","zmdi-hc-2x"],[1,"ui-typography-heading-5"],[1,"ui-typography-subtitle"],[1,"title-regular"],[1,"timer-string"],[3,"properties","click"],[1,"cursor","text-main",3,"click"],[3,"properties","state","click"],["class","timer-string",4,"ngIf"],[3,"width","title","content","actions","onOpen"],["rightpanel",""],[1,"webinar-iframe-holder","player-wrapper"],["title","community",1,"ilt-iframe",3,"src"],[3,"url","bookmark"],[3,"mp4_url","hls_url","speedControlEnabled"]],template:function(e,t){1&e&&(c.dd(0,Jo,52,41,"div",0),c.dd(1,Zo,2,1,"div",1),c.jc(2,"div",2),c.jc(3,"div",3),c.dd(4,er,1,2,"player-iframe",4),c.dd(5,tr,1,3,"player-flowplayer",5),c.jc(6,"i",6),c.rc("click",function(){return t.closeIframe()}),c.ic(),c.ic(),c.ic()),2&e&&(c.Dc("ngIf",t.date.tool&&!t.isIframeinit),c.Mb(1),c.Dc("ngIf",t.isIframeinit),c.Mb(3),c.Dc("ngIf",t.showVideoFrame&&t.date.has_recording&&"iframe"==t.recordData.recording.type),c.Mb(1),c.Dc("ngIf",t.showVideoFrame&&t.date.has_recording&&"video"==t.recordData.recording.type))},directives:[Ae.p,an.a,ia.a,Ao.a,Lo.a],pipes:[E.b,ba.a,fa.a,cn.a,Ae.b],encapsulation:2}),e})();var sr=i("Pg6A");const nr=function(){return{category:"classroom"}};function ar(e,t){if(1&e){const e=c.kc();c.jc(0,"div",11),c.ec(1,"i",12),c.jc(2,"div",6),c.ec(3,"div",13),c.wc(4,"t"),c.jc(5,"h4",14),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.loadMapPreview(t.overview.locations[t.day.id_location])}),c.fd(6),c.ic(),c.jc(7,"div"),c.fd(8),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(3),c.Dc("innerHTML",c.yc(4,3,"Location",c.Hc(6,nr)),c.Vc),c.Mb(3),c.hd(" ",e.overview.locations[e.day.id_location].name," "),c.Mb(2),c.gd(e.overview.locations[e.day.id_location].address)}}const or=function(){return{category:"standard"}};function rr(e,t){if(1&e&&(c.jc(0,"div",15),c.ec(1,"i",16),c.jc(2,"div",6),c.jc(3,"div",17),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"h4",18),c.fd(7),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.gd(c.yc(5,2,"Classroom",c.Hc(5,or))),c.Mb(3),c.gd(e.classrooms[e.day.id_classroom].name)}}function cr(e,t){if(1&e&&(c.jc(0,"p"),c.ec(1,"i",21),c.fd(2),c.wc(3,"t"),c.ic()),2&e){const e=c.vc(4);c.Mb(2),c.id(" ",e.classrooms[e.day.id_classroom].seats," ",c.xc(3,2,"available seats")," ")}}function lr(e,t){if(1&e&&(c.jc(0,"p"),c.ec(1,"i",22),c.fd(2),c.ic()),2&e){const e=c.vc(4);c.Mb(2),c.hd(" ",e.classrooms[e.day.id_classroom].details," ")}}function dr(e,t){if(1&e&&(c.jc(0,"p"),c.ec(1,"i",23),c.fd(2),c.ic()),2&e){const e=c.vc(4);c.Mb(2),c.hd(" ",e.classrooms[e.day.id_classroom].equipment," ")}}function ur(e,t){if(1&e&&(c.hc(0),c.jc(1,"h5"),c.fd(2),c.wc(3,"t"),c.ic(),c.dd(4,cr,4,4,"p",20),c.dd(5,lr,3,1,"p",20),c.dd(6,dr,3,1,"p",20),c.gc()),2&e){const e=c.vc(3);c.Mb(2),c.gd(c.yc(3,4,"Additional classroom information",c.Hc(7,nr))),c.Mb(2),c.Dc("ngIf",e.classrooms[e.day.id_classroom].seats),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom].details),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom].equipment)}}function hr(e,t){if(1&e&&(c.jc(0,"div",19),c.dd(1,ur,7,8,"ng-container",20),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",0!=e.classrooms[e.day.id_classroom])}}function pr(e,t){if(1&e&&(c.jc(0,"div",3),c.jc(1,"div",4),c.ec(2,"i",5),c.jc(3,"div",6),c.ec(4,"div",7),c.wc(5,"t"),c.ec(6,"div",7),c.wc(7,"t"),c.jc(8,"h4"),c.fd(9),c.wc(10,"HTime"),c.wc(11,"HTime"),c.ic(),c.jc(12,"span"),c.fd(13),c.wc(14,"t"),c.wc(15,"timezoneDifference"),c.ic(),c.ic(),c.ic(),c.dd(16,ar,9,7,"div",8),c.dd(17,rr,8,6,"div",9),c.dd(18,hr,2,1,"div",10),c.ic()),2&e){const e=c.vc();c.Mb(4),c.Rb("location text-grey-mid ",1==e.userUserLocalTimeArray?"hidden":"",""),c.Dc("innerHTML",c.yc(5,21,"location's time",c.Hc(39,or)),c.Vc),c.Mb(2),c.Rb("location text-grey-mid ",1==e.userUserLocalTimeArray?"":"hidden",""),c.Dc("innerHTML",c.yc(7,24,"my time",c.Hc(40,or)),c.Vc),c.Mb(2),c.Rb("text-uppercase bolded __TZ_",e.timezoneToUse[e.userUserLocalTimeArray],""),c.Mb(1),c.id(" ",c.zc(10,27,e.displayDateBegin,e.timezoneToUse[e.userUserLocalTimeArray],e.timeFormat)," - ",c.zc(11,31,e.displayDateEnd,e.timezoneToUse[e.userUserLocalTimeArray],e.timeFormat)," "),c.Mb(3),c.Rb("timezone-difference ",1==e.userUserLocalTimeArray?"is-hidden":"",""),c.Mb(1),c.id("(",e.day.timezone," | ",c.xc(14,35,c.xc(15,37,e.day.timezone)),")"),c.Mb(3),c.Dc("ngIf",e.overview.locations[e.day.id_location]&&e.locations.length>1),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom]),c.Mb(1),c.Dc("ngIf",e.day.id_classroom)}}function mr(e,t){if(1&e&&c.ec(0,"ilt-new-viewer",24),2&e){const e=c.vc();c.Dc("day",e.day)("timezoneToUse",e.timezoneToUse)("userUserLocalTime",e.userUserLocalTime)("displayDateBegin",e.displayDateBegin)("displayDateEnd",e.displayDateEnd)("locations",e.locations)("classrooms",e.classrooms)("overview",e.overview)}}function gr(e,t){if(1&e&&c.ec(0,"ilt-viewer-tool",25),2&e){const e=c.vc();c.Dc("date",e.day)("id_session",e.id_session)("course_id",e.course.id)("session_slug_name",e.session_slug_name)("recordData",e.recordData)("iframeStatus$",e.iframeStatus$)}}let br=(()=>{class e{constructor(e,t,i){this.pageService=e,this.formatter=t,this.toggleService=i,this.vilt=!1,this.userUserLocalTimeArray=0,this.timeFormat=Object(Zt.m)(Object(Zt.i)(),"short")}ngOnInit(){this.vilt=this.toggleService.isOn(u.f.TOGGLE_VILT),this.day.duration=this.day.effective_duration,this.classrooms=this.overview.classrooms,this.changeTimeView=r.a.singleton.subscribe("showTimeZonePreferenceForCourseOverview",e=>{this.userUserLocalTimeArray=e.data.userUserLocalTime?1:0}),this.userUserLocalTimeArray=this.userUserLocalTime?1:0,this.displayDateBegin=this.formatter.convertTimeToUTC(this.day.day+" "+this.day.time_begin,this.day.timezone),this.displayDateEnd=this.formatter.convertTimeToUTC(this.day.day+" "+this.day.time_end,this.day.timezone),this.timezoneToUse=[this.day.timezone,this.formatter.currentTimezone]}loadMapPreview(e){this.pageService.locationViewer.loadMapPreview(e)}ngOnDestroy(){this.changeTimeView.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(O.a),c.dc(ti.b),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["ilt-viewer"]],inputs:{day:"day",course:"course",overview:"overview",locations:"locations",userUserLocalTime:"userUserLocalTime",date:"date",id_session:"id_session",session_slug_name:"session_slug_name",recordData:"recordData",iframeStatus$:"iframeStatus$"},decls:3,vars:3,consts:[["class","ilt-wrapper bg-before-grey-light",4,"ngIf"],[3,"day","timezoneToUse","userUserLocalTime","displayDateBegin","displayDateEnd","locations","classrooms","overview",4,"ngIf"],[3,"date","id_session","course_id","session_slug_name","recordData","iframeStatus$",4,"ngIf"],[1,"ilt-wrapper","bg-before-grey-light"],[1,"block-wrap","time-details"],[1,"zmdi","zmdi-time","text-grey-mid"],[1,"data-wrap"],[3,"innerHTML"],["class","block-wrap location-details",4,"ngIf"],["class","block-wrap classroom-details",4,"ngIf"],["class","enroll-footer bg-before-grey-light",4,"ngIf"],[1,"block-wrap","location-details"],[1,"zmdi","zmdi-pin","text-grey-mid"],[1,"location","text-grey-mid",3,"innerHTML"],[1,"bolded","text-main","clickable",3,"click"],[1,"block-wrap","classroom-details"],[1,"zmdi","zmdi-home","text-grey-mid"],[1,"location","text-grey-mid"],[1,"bolded"],[1,"enroll-footer","bg-before-grey-light"],[4,"ngIf"],[1,"text-grey-mid","zmdi","zmdi-accounts-alt"],[1,"text-grey-mid","zmdi","zmdi-library"],[1,"text-grey-mid","zmdi","zmdi-wrench"],[3,"day","timezoneToUse","userUserLocalTime","displayDateBegin","displayDateEnd","locations","classrooms","overview"],[3,"date","id_session","course_id","session_slug_name","recordData","iframeStatus$"]],template:function(e,t){1&e&&(c.dd(0,pr,19,41,"div",0),c.dd(1,mr,1,8,"ilt-new-viewer",1),c.dd(2,gr,1,6,"ilt-viewer-tool",2)),2&e&&(c.Dc("ngIf",t.overview.locations[t.day.id_location]&&!t.vilt),c.Mb(1),c.Dc("ngIf",t.vilt),c.Mb(1),c.Dc("ngIf",t.vilt))},directives:[Ae.p,To,ir],pipes:[E.b,ba.a,sr.a],encapsulation:2}),e})();var fr=function(e){return e.SUBSCRIBED="subscribed",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.WAITING="waiting",e}({}),vr=function(e){return e[e.SCORM="scormorg"]="SCORM",e[e.AICC="aicc"]="AICC",e[e.TINCAN="tincan"]="TINCAN",e[e.VIDEO="video"]="VIDEO",e[e.YOUTUBE="youtube"]="YOUTUBE",e[e.WISTIA="wistia"]="WISTIA",e[e.VIMEO="vimeo"]="VIMEO",e[e.FILE="file"]="FILE",e[e.ASSIGNMENT="deliverable"]="ASSIGNMENT",e[e.HTMLPAGE="htmlpage"]="HTMLPAGE",e[e.SURVEY="poll"]="SURVEY",e[e.QUIZ="test"]="QUIZ",e[e.SIGN="sign"]="SIGN",e[e.GOOGLEDRIVE="googledrive"]="GOOGLEDRIVE",e}({}),_r=i("64/C");const wr=["googleMap"],yr=["locationSlider"];function Cr(e,t){if(1&e){const e=c.kc();c.jc(0,"i",19),c.rc("click",function(){c.Uc(e);const t=c.vc().index;return c.vc().movePrev(t)}),c.ic()}}const Sr=function(e,t){return{category:"classroom",index1:e,index2:t}};function Tr(e,t){if(1&e&&(c.jc(0,"h5"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc().index,t=c.vc();c.Mb(1),c.hd(" ",c.yc(2,1,"MULTIPLE LOCATIONS ({index1} of {index2})",c.Jc(4,Sr,e+1,t.location.length))," ")}}function kr(e,t){if(1&e&&c.ec(0,"div",14),2&e){const e=c.vc().$implicit;c.Dc("innerHTML",null==e?null:e.address,c.Vc)}}function Ir(e,t){if(1&e){const e=c.kc();c.jc(0,"i",20),c.rc("click",function(){c.Uc(e);const t=c.vc().index;return c.vc().moveNext(t)}),c.ic()}}function xr(e,t){if(1&e){const e=c.kc();c.jc(0,"div",10),c.dd(1,Cr,1,0,"i",11),c.dd(2,Tr,3,7,"h5",12),c.jc(3,"div",13),c.fd(4),c.ic(),c.ec(5,"div",14),c.dd(6,kr,1,1,"div",15),c.jc(7,"div",16),c.jc(8,"rectangular-button",17),c.rc("click",function(i){c.Uc(e);const s=t.$implicit;return c.vc().loadMap(s,i)}),c.ic(),c.ic(),c.dd(9,Ir,1,0,"i",18),c.ic()}if(2&e){const e=t.$implicit,i=t.last,s=t.first,n=c.vc();c.Mb(1),c.Dc("ngIf",n.location.length>1&&!s),c.Mb(1),c.Dc("ngIf",n.location.length>1),c.Mb(2),c.hd(" ",e.name," "),c.Mb(1),c.Dc("innerHTML",null==e?null:e.country_name,c.Vc),c.Mb(1),c.Dc("ngIf",null==e?null:e.address),c.Mb(2),c.Dc("properties",n.mapButton.properties),c.Mb(1),c.Dc("ngIf",n.location.length>1&&!i)}}const Dr=function(e){return{"carousel-locations":e}};let Or=(()=>{class e{constructor(e,t){this.el=e,this.pageService=t,this.location=[],this.address=""}ngOnInit(){this.location&&(this.mapButton={properties:{text:E.a.t("classroom","Location map and details"),colorScheme:"main",typeStyle:"filled"}})}onLocationChange(e){var t,i=new google.maps.DirectionsRenderer;(new google.maps.Geocoder).geocode({address:e=e.address&&""!==e.address?e.address:e.country_name},function(e,i){if(i==google.maps.GeocoderStatus.OK){var s={zoom:14,disableDefaultUI:!0,scrollwheel:!1,draggable:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};setTimeout(()=>{(t=new google.maps.Map(document.getElementById("location-map"),s)).setCenter(e[0].geometry.location)},100)}}),i.setMap(t)}loadMap(e,t){this.pageService.locationViewer.loadMapPreview(e)}ngAfterViewInit(){this.initCarousel(),"undefined"!=typeof google&&this.onLocationChange(this.location[0])}initCarousel(){this.owl=$(this.locationSlider.nativeElement),this.owl.owlCarousel({items:1,startPosition:0,nav:!1,dots:!1,loop:!1,touchDrag:!1,mouseDrag:!1})}moveNext(e){this.owl.trigger("next.owl.carousel"),this.onLocationChange(e+1<this.location.length?this.location[e+1]:this.location[0])}movePrev(e){this.owl.trigger("prev.owl.carousel"),this.onLocationChange(e>0?this.location[e-1]:this.location[this.location.length-1])}destroySlider(e=!1){this.owl&&(!0===e&&(this.owl.off(".owl.carousel"),this.owl.hasClass("owl-carousel")&&(this.owl.owlCarousel({touchDrag:!1,mouseDrag:!1}),this.owl.removeClass("owl-loaded"),this.owl.find(".owl-stage-outer").children().unwrap(),this.owl.removeData())),$(".owl-stage").off(".owl.core"),$(document).off(".owl.core"),this.owl.trigger("destroy.owl.carousel"))}ngOnDestroy(){this.destroySlider(!0)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.o),c.dc(O.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["location-map"]],viewQuery:function(e,t){if(1&e&&(c.md(wr,1),c.md(yr,1)),2&e){let e;c.Qc(e=c.sc())&&(t.googleMap=e.first),c.Qc(e=c.sc())&&(t.locationSlider=e.first)}},inputs:{location:"location"},decls:10,vars:4,consts:[[1,"mdl-wrapper","locations-position"],[1,"location-wrap",3,"ngClass"],["id","owl-locations-slider",1,"owl-carousel","owl-theme"],["locationSlider",""],["class","item",4,"ngFor","ngForOf"],[1,"marker-icon","bg-main"],[1,"zmdi","zmdi-pin","text-white"],[1,"map-wrapper"],["id","location-map",1,"map",2,"height","100%"],["googleMap",""],[1,"item"],["class","zmdi zmdi-chevron-left navigation left text-main",3,"click",4,"ngIf"],[4,"ngIf"],[1,"bolded"],[1,"country-name",3,"innerHTML"],["class","country-name",3,"innerHTML",4,"ngIf"],[1,"button-location"],[3,"properties","click"],["class","zmdi zmdi-chevron-right navigation right text-main",3,"click",4,"ngIf"],[1,"zmdi","zmdi-chevron-left","navigation","left","text-main",3,"click"],[1,"zmdi","zmdi-chevron-right","navigation","right","text-main",3,"click"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2,3),c.dd(4,xr,10,7,"div",4),c.ic(),c.ic(),c.jc(5,"div",5),c.ec(6,"i",6),c.ic(),c.ic(),c.jc(7,"div",7),c.ec(8,"div",8,9),c.ic()),2&e&&(c.Mb(1),c.Dc("ngClass",c.Ic(2,Dr,t.location.length>1)),c.Mb(3),c.Dc("ngForOf",t.location))},directives:[Ae.n,Ae.o,Ae.p,an.a],pipes:[E.b],encapsulation:2}),e})();function Er(e,t){if(1&e&&c.ec(0,"location-map",10),2&e){const e=c.vc(2);c.Dc("location",e.locations_array)}}function Pr(e,t){if(1&e&&(c.jc(0,"div",8),c.dd(1,Er,1,1,"location-map",9),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",e.mapReady)}}const Mr=function(e,t){return{category:"webinar",needed:e,total:t}};function Ar(e,t){if(1&e&&(c.jc(0,"span",14),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,1,"You must attend at least {needed}/{total} session dates to complete this course",c.Jc(4,Mr,e.minDates,e.maxDates))," ")}}function Lr(e,t){if(1&e&&(c.jc(0,"span",14),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,1,"You must attend at least {needed}/{total} events to complete this session",c.Jc(4,Mr,e.minDates,e.maxDates))," ")}}function jr(e,t){if(1&e&&(c.jc(0,"div",5),c.jc(1,"div",11),c.ec(2,"i",12),c.dd(3,Ar,3,7,"span",13),c.dd(4,Lr,3,7,"span",13),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(3),c.Dc("ngIf",!e.isVilt),c.Mb(1),c.Dc("ngIf",e.isVilt)}}function Fr(e,t){if(1&e&&c.ec(0,"accordion",15),2&e){const e=c.vc();c.Dc("type",e.accordionParams.type)("title",e.accordionParams.title)("panels",e.accordionParams.panels)("mode",e.accordionParams.mode)}}let Rr=(()=>{class e{constructor(e,t,i,s,n){this.googleMap=e,this.changeDetector=t,this.formatter=i,this.router=s,this.toggleService=n,this.panels=[],this.locations_array=[],this.timezoneToUse=[],this.isVilt=!1,this.userTimezoneEnabled="off"!==k.b.getInstance().user_settings.timezone_allow_user_override,this.mapReady=!1,this.minDates=null,this.maxDates=null,this.preferenceForTime=!1,this.eventEmitter=r.a.singleton}get courseStatusTypes(){return fr}ngOnInit(){var e,t;this.isVilt=this.toggleService.isOn(u.f.TOGGLE_VILT),this.maxDates=this.current_session.dates.length,this.minDates=this.current_session.min_dates_for_completion?this.current_session.min_dates_for_completion:this.current_session.dates.length,this.googleMap.loadMap().then(e=>{this.mapReady=!0}),this.chooseLanguage={ellipsisType:"inline",orientation:"bottom-left",actions:[{title:E.a.t("standard","location's time"),action:e=>{this.showTimePreference(!1)}},{title:E.a.t("standard","my time"),action:e=>{this.showTimePreference(!0)}}]},this.changeTimeView=this.eventEmitter.subscribe("showTimeZonePreferenceForCourseOverview",i=>{if(this.current_session)for(var s=0;s<this.current_session.dates.length;s++){this.panels[s].content&&(this.panels[s].content.params.userUserLocalTime=this.preferenceForTime);const i=this.formatter.convertTimeToUTC(e=this.current_session.dates[s].day+" "+this.current_session.dates[s].time_begin,this.current_session.dates[s].timezone);this.panels[s].timeline_zone=this.timezoneToUse[s][t=this.preferenceForTime?1:0],this.panels[s].timeline_date=this.formatter.getTimezonedDate(i,this.timezoneToUse[s][t]),this.changeDetector.detectChanges()}});const i=!this.toggleService.isOn(u.f.TOGGLE_VILT)&&o.a.getInstance().pu_manage_user_permission.can_evaluate_course,s="instructor"===this.course.level||o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN);let n;for(let a=0;a<this.current_session.dates.length;a++){n=this.toggleService.isOn(u.f.TOGGLE_VILT)?{params:{day:Object.assign(Object.assign({},this.current_session.dates[a]),{user_level:this.course.level,duration:this.current_session.dates[a].effective_duration,upcoming:this.current_session.dates[a].user_status==te.w.UPCOMING,not_attended:this.current_session.dates[a].user_status==te.w.NOT_ATTENDED,student_join:!!this.current_session.dates[a].join_in_advance_user&&this.current_session.dates[a].join_in_advance_user,instructor_join:!!this.current_session.dates[a].join_in_advance_instructor&&this.current_session.dates[a].join_in_advance_instructor,api_grab:!!this.current_session.dates[a].allowed_api_grab,api_link:!!this.current_session.dates[a].allowed_api_link,super_user:o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),power_user:this.course.can_manage_course&&o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER)}),course:this.course,overview:this.overview,locations:this.locations_array,userUserLocalTime:this.preferenceForTime,id_session:this.current_session.id,course_id:this.course.id,session_slug_name:this.current_session.slug_name,iframeStatus$:this.iframeStatus$},component:br}:{params:{day:this.current_session.dates[a],course:this.course,overview:this.overview,locations:this.locations_array,userUserLocalTime:this.preferenceForTime},component:br};let t=!1,r=[],c=this.course.can_manage_course,l=!!(o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER)&&this.course.enrolled.is_enrolled&&this.current_session.is_enrolled)&&this.course.enrolled.is_enrolled;(s||l&&c)&&(this.toggleService.isOn(u.f.TOGGLE_VILT)?r.push({icon:"zmdi zmdi-print",color:"text-grey-mid-permanent",tooltip_text:E.a.t("classroom","Print attendance sheet"),tooltip_position:"top",onClick:()=>{this.router.navigate([`/legacy/admin/index.php?r=ClassroomApp/instructor/axAttendanceSheet&course_id=${this.course.id}&id_session=${this.current_session.id}`])}}):r.push({icon:"zmdi zmdi-print",color:"text-grey-mid-permanent",tooltip_text:E.a.t("classroom","Print attendance sheet"),tooltip_position:"top",onClick:()=>{this.router.navigate(["/legacy/admin/index.php?r=player/training/session&course_id="+this.course.id+"&id_session="+this.current_session.id+"&printAttendance=1"])}}),(i||s)&&(this.toggleService.isOn(u.f.TOGGLE_VILT)?(this.current_session.is_instructor?r.push({icon:"zmdi zmdi-book",color:"text-grey-mid-permanent",tooltip_text:E.a.t("classroom","Evaluation"),tooltip_position:"top",onClick:()=>{this.router.navigate(["learn","instructor","session",this.current_session.id],{queryParams:{tab:"enrollments_evaluations"}})}}):(o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)||i)&&r.push({icon:"zmdi zmdi-book",color:"text-grey-mid-permanent",tooltip_text:E.a.t("classroom","Evaluation"),tooltip_position:"top",onClick:()=>{this.router.navigate(["course","session",this.current_session.id],{queryParams:{tab:"enrollments_evaluations"}})}}),this.current_session.dates[a].is_instructor||this.current_session.is_instructor?r.push({icon:"zmdi zmdi-accounts",color:"text-grey-mid-permanent",tooltip_text:E.a.t("standard","_ATTENDANCE"),tooltip_position:"top",onClick:()=>{this.router.navigate(["learn","instructor","event",this.current_session.dates[a].id])}}):(o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)||i)&&r.push({icon:"zmdi zmdi-accounts",color:"text-grey-mid-permanent",tooltip_text:E.a.t("standard","_ATTENDANCE"),tooltip_position:"top",onClick:()=>{this.router.navigate(["course","event",this.current_session.dates[a].id],{queryParams:{tab:"attendance"}})}})):r.push({icon:"zmdi zmdi-book",color:"text-grey-mid-permanent",tooltip_text:E.a.t("classroom","Evaluation & attendance"),tooltip_position:"top",onClick:()=>{this.router.navigate(["/legacy/admin/index.php?r=ClassroomApp/instructor/evaluation&course_id="+this.course.id+"&id_session="+this.current_session.id])}}))),this.current_session.dates[a].user_status===te.w.ATTENDED&&(t=!0),e=this.formatter.convertTimeToUTC(e=this.current_session.dates[a].day+" "+this.current_session.dates[a].time_begin,this.current_session.dates[a].timezone),e=this.formatter.getTimezonedDate(e,this.current_session.dates[a].timezone),this.timezoneToUse.push([this.current_session.dates[a].timezone,this.formatter.currentTimezone]),this.panels.push({title:this.current_session.dates[a].name,description:{params:{session:this.current_session.dates[a],course:this.course,overview:this.overview},component:Xa},content:n,hideDescriptionOnOpen:!0,timeline_date:e,timeline_zone:this.current_session.dates[a].timezone,markAsCompleted:t,action_buttons:r})}if(this.overview.locations){let e=this.overview.locations,t=(Object.keys(e).map(function(t){return e[t]}),[]);for(let i of this.current_session.dates)this.overview.locations[i.id_location]&&-1==t.indexOf(i.id_location)&&(t.push(i.id_location),this.locations_array.push(this.overview.locations[i.id_location]))}this.accordionParams={type:"split",panels:this.panels,mode:"timeline"},this.panels.forEach((t,i)=>{t.timeline_zone=this.current_session.dates[i].timezone,this.current_session.dates[i].id_location||(t.timeline_zone=this.userTimezoneEnabled?o.a.getInstance().timezone:this.current_session.dates[i].timezone);const s=this.formatter.convertTimeToUTC(e=this.current_session.dates[i].day+" "+this.current_session.dates[i].time_begin,this.current_session.dates[i].timezone);t.timeline_date=this.formatter.getTimezonedDate(s,t.timeline_zone).format()})}showTimePreference(e){this.preferenceForTime=e,this.changeDetector.detectChanges(),this.eventEmitter.publish({event_type:"showTimeZonePreferenceForCourseOverview",sender_id:"session-enroller",data:{userUserLocalTime:e}})}ngOnDestroy(){this.changeTimeView.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(_r.a),c.dc(c.i),c.dc(ti.b),c.dc(s.h),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["ilt-listing"]],inputs:{course:"course",overview:"overview",current_session:"current_session",webinarListing:"webinarListing",iframeStatus$:"iframeStatus$"},decls:8,vars:3,consts:[[1,"ilt-viewer__wrapper"],["class","locations-wrapper",4,"ngIf"],[1,"mdl-wrapper"],[1,"mdl-grid"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col"],[1,"sessions-dates"],[3,"type","title","panels","mode",4,"ngIf"],[1,"locations-wrapper"],[3,"location",4,"ngIf"],[3,"location"],[1,"webinar-completion-warning","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle"],["class","inner-text",4,"ngIf"],[1,"inner-text"],[3,"type","title","panels","mode"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,Pr,2,1,"div",1),c.jc(2,"div",2),c.jc(3,"div",3),c.dd(4,jr,5,2,"div",4),c.jc(5,"div",5),c.jc(6,"div",6),c.dd(7,Fr,1,4,"accordion",7),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",t.overview.locations&&t.locations_array.length>0),c.Mb(3),c.Dc("ngIf",2==t.current_session.evaluation_type&&t.course.status!==t.courseStatusTypes.COMPLETED),c.Mb(3),c.Dc("ngIf",t.accordionParams))},directives:[Ae.p,Or,Ja.a],pipes:[E.b],encapsulation:2}),e})();const Nr=function(){return{category:"webinar"}};function Ur(e,t){1&e&&(c.jc(0,"div",10),c.jc(1,"div",11),c.ec(2,"ui-spinner"),c.jc(3,"h4"),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(4),c.gd(c.yc(5,1,"Importing and converting your webinar recording...",c.Hc(4,Nr))))}function qr(e,t){if(1&e&&(c.jc(0,"div",3),c.jc(1,"div",3),c.ec(2,"radio",6),c.wc(3,"t"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("label",c.xc(3,7,e.apiGrab.label))("name",e.apiGrab.name)("value",e.apiGrab.value)("enabled",e.apiGrab.enabled)("required",e.apiGrab.required)("change",e.apiGrab.change)("inputFormControl",e.webinarRecordingsForm.controls.formal)}}function zr(e,t){if(1&e&&(c.jc(0,"div",3),c.jc(1,"div",3),c.ec(2,"radio",6),c.wc(3,"t"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("label",c.xc(3,7,e.apiLink.label))("name",e.apiLink.name)("value",e.apiLink.value)("enabled",e.apiLink.enabled)("required",e.apiLink.required)("change",e.apiLink.change)("inputFormControl",e.webinarRecordingsForm.controls.formal)}}function Vr(e,t){1&e&&(c.jc(0,"div",12),c.jc(1,"div",13),c.ec(2,"i",14),c.jc(3,"span",15),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(4),c.hd(" ",c.yc(5,1,"In order to use this functionality, video service provider must be whitelisted in the Advanced Settings",c.Hc(4,Nr))," "))}let Br=(()=>{class e{constructor(e,t,i,s){this.fb=e,this.docLayoutService=t,this.backendService=i,this.changeDetector=s,this.showUploader=!0,this.showLinkField=!1,this.uploadingFile=!1,this.ticker=Object(ko.a)(0,3e3)}ngOnInit(){this.uploader={label:E.a.t("webinar","Your video"),placeholder:E.a.t("standard","Click to choose a file"),allowed_extensions:["3gp","3gp2","avi","flv","mkv","mov","mp4","mpeg","mpeg4","mpg","mpg2","ogg","ogm","wmv"],max_file_size:800,fileSizeErrorMessage:E.a.t("forum","Max. file size {size} MB",{size:800}),collection:"webinar_recording",style:"form"},this.externalLink={id:"link_upload",label:"URL",type:"text",name:"link_upload",floating_label:!0,enableText:!0,value:""},this.videoUpload={label:E.a.t("webinar","Add webinar recording"),name:"radio-group",value:"custom",enabled:!0,checked:!0,required:!1,change:e=>{this.radioFunction(e)}},this.videoLink={label:E.a.t("webinar","Import video recording from an external link"),name:"radio-group",value:"embeded",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.apiGrab={label:E.a.t("webinar","Use {webinartool} recording",{webinartool:this.tool_name}),name:"radio-group",value:"api_grab",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.apiLink={label:E.a.t("webinar","Use {webinartool} recording",{webinartool:this.tool_name}),name:"radio-group",value:"api_link",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.webinarRecordingsForm=this.fb.group({video_type:[this.videoUpload.value],uploader:[""],external_link:[""]}),this.setFormValidators()}setFormValidators(e="custom"){switch(e){case"custom":this.webinarRecordingsForm.controls.uploader.setValidators([Ke.x.required]),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators(null),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators(null),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity();break;case"embeded":this.webinarRecordingsForm.controls.uploader.setValidators(null),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators([Ke.x.required]),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators(null),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity();break;case"api_link":case"api_grab":this.webinarRecordingsForm.controls.uploader.setValidators(null),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators(null),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators([Ke.x.required]),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity()}}radioFunction(e){this.showUploader="custom"==e,this.showLinkField="embeded"==e,"api_link"!=e&&"api_grab"!=e||(this.showUploader=!1,this.showLinkField=!1),this.setFormValidators(e),this.webinarRecordingsForm.controls.video_type.setValue(e)}submitVideo(){var e;switch(this.uploadingFile=!0,this.changeDetector.detectChanges(),this.webinarRecordingsForm.controls.video_type.value){case"custom":e={recording_type:2,filename:this.webinarRecordingsForm.controls.uploader.value};break;case"embeded":e={recording_type:3,url:this.webinarRecordingsForm.controls.external_link.value};break;case"api_link":e={recording_type:4};break;case"api_grab":e={recording_type:1}}this.backendService.request("/learn/v1/webinar/"+this.id_session+"/"+this.day+"/recording","POST",e).subscribe(e=>{this.subscriber=this.ticker.subscribe(e=>this.checkUploadStatus(e))},e=>{this.throwError(e)})}checkUploadStatus(e){this.backendService.request("/learn/v1/webinar/"+this.id_session+"/"+this.day+"/recording_status","GET").subscribe(t=>{this.handler("uploading"),"Converting"===t.data.status&&1800!=e||(1800==e?(this.throwError(),this.subscriber.unsubscribe()):(this.subscriber.unsubscribe(),this.docLayoutService.toast.showToast({message:E.a.t("standard","Your video has been uploaded."),type:"success"}),this.uploadingFile=!1,this.cleanForm(),this.handler("uploaded")))},e=>{this.throwError(e)})}throwError(e){if(e){console.log("error",e.message);for(let t=0;t<e.message.length;t++)this.docLayoutService.toast.showToast({message:E.a.t("standard",e.message[t]),type:"error"})}else this.docLayoutService.toast.showToast({message:E.a.t("standard","Your video hasn't been uploaded."),type:"error"});this.uploadingFile=!1,this.cleanForm(this.webinarRecordingsForm.controls.video_type.value),this.handler("failed")}cleanForm(e){e||(e="custom"),this.webinarRecordingsForm.reset(),this.webinarRecordingsForm.controls.uploader.setValue(null),this.webinarRecordingsForm.controls.external_link.setValue(null),this.webinarRecordingsForm.controls.video_type.setValue(e),this.setFormValidators(e)}uploadedRecording(){this.changeDetector.detectChanges()}deleteRecording(){this.cleanForm()}ngOnDestroy(){this.uploadingFile&&this.docLayoutService.toast.showToast({message:E.a.t("standard","Your recording is still being uploaded in the background. Please don't navigate away from the page."),type:"error"})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(M.a),c.dc(S.a),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],inputs:{id_session:"id_session",day:"day",tool_name:"tool_name",api_link:"api_link",api_grab:"api_grab",super_user:"super_user",handler:"handler"},decls:19,vars:46,consts:[["class","webinar-loading-overlay bg-white",4,"ngIf"],[1,"webinar-recordings"],[3,"formGroup","ngSubmit"],[1,"mdl-cell--12-col"],[3,"label","name","value","enabled","required","checked","change","inputFormControl"],[3,"label","allowed_extensions","placeholder","collection","max_file_size","fileSizeErrorMessage","inputFormControl","uploaded","reset"],[3,"label","name","value","enabled","required","change","inputFormControl"],[3,"id","type","floating_label","value","inputFormControl"],["class","mdl-cell--12-col",4,"ngIf"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[1,"webinar-loading-overlay","bg-white"],[1,"loader"],[1,"mdl-cell","mdl-cell--12-col"],[1,"webinar-completion-warning","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle"],[1,"inner-text"]],template:function(e,t){1&e&&(c.dd(0,Ur,6,5,"div",0),c.jc(1,"div",1),c.jc(2,"form",2),c.rc("ngSubmit",function(){return t.submitVideo()}),c.jc(3,"div",3),c.jc(4,"div",3),c.ec(5,"radio",4),c.wc(6,"t"),c.ic(),c.jc(7,"div"),c.jc(8,"single-upload",5),c.rc("uploaded",function(){return t.uploadedRecording()})("reset",function(){return t.deleteRecording()}),c.wc(9,"t"),c.ic(),c.ic(),c.ic(),c.jc(10,"div",3),c.jc(11,"div",3),c.ec(12,"radio",6),c.wc(13,"t"),c.ic(),c.jc(14,"div"),c.ec(15,"textfield",7),c.ic(),c.ic(),c.dd(16,qr,4,9,"div",8),c.dd(17,zr,4,9,"div",8),c.ic(),c.dd(18,Vr,6,5,"div",9),c.ic()),2&e&&(c.Dc("ngIf",t.uploadingFile),c.Mb(2),c.Dc("formGroup",t.webinarRecordingsForm),c.Mb(3),c.Dc("label",c.xc(6,40,t.videoUpload.label))("name",t.videoUpload.name)("value",t.videoUpload.value)("enabled",t.videoUpload.enabled)("required",t.videoUpload.required)("checked",t.videoUpload.checked)("change",t.videoUpload.change)("inputFormControl",t.webinarRecordingsForm.controls.formal),c.Mb(2),c.Rb("mdl-cell--12-col ",t.showUploader?"visible-item":"hidden-item"," "),c.Mb(1),c.ad(t.uploader.style),c.Dc("label",c.xc(9,42,t.uploader.label))("allowed_extensions",t.uploader.allowed_extensions)("placeholder",t.uploader.placeholder)("collection",t.uploader.collection)("max_file_size",t.uploader.max_file_size)("fileSizeErrorMessage",t.uploader.fileSizeErrorMessage)("inputFormControl",t.webinarRecordingsForm.controls.uploader),c.Mb(4),c.Dc("label",c.xc(13,44,t.videoLink.label))("name",t.videoLink.name)("value",t.videoLink.value)("enabled",t.videoLink.enabled)("required",t.videoLink.required)("change",t.videoLink.change)("inputFormControl",t.webinarRecordingsForm.controls.formal),c.Mb(2),c.Rb("mdl-cell--12-col  ",t.showLinkField?"visible-item":"hidden-item"," "),c.Mb(1),c.Dc("id",t.externalLink.id)("type",t.externalLink.type)("floating_label",t.externalLink.floating_label)("value",t.externalLink.value)("inputFormControl",t.webinarRecordingsForm.controls.external_link),c.Mb(1),c.Dc("ngIf",t.api_grab),c.Mb(1),c.Dc("ngIf",t.api_link),c.Mb(1),c.Dc("ngIf",t.showLinkField))},directives:[Ae.p,Ke.y,Ke.p,Ke.i,jn.a,Pn.a,_t.a,b.fd],pipes:[E.b],encapsulation:2}),e})();const Gr=["rightpanel"];function $r(e,t){1&e&&(c.jc(0,"span",24),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"You did not attend this webinar. And the recording for it is still not available.")," "))}function Hr(e,t){1&e&&(c.jc(0,"span",24),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"You did not attend this webinar. However, a recording is available")," "))}const Yr=function(){return{category:"webinar"}};function Wr(e,t){if(1&e&&(c.jc(0,"span",24),c.fd(1),c.wc(2,"t"),c.jc(3,"span",25),c.fd(4),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.yc(2,2,"Your webinar starts in",c.Hc(5,Yr))," "),c.Mb(3),c.hd(" ",e.timerOutput,"")}}function Qr(e,t){if(1&e&&c.ec(0,"rectangular-button",26),2&e){const e=c.vc();c.Dc("properties",e.viewRecording.properties)("click",e.viewRecording.onClick)}}function Kr(e,t){if(1&e){const e=c.kc();c.jc(0,"a",27),c.rc("click",function(){return c.Uc(e),c.vc().deleteRecording()}),c.fd(1),c.wc(2,"t"),c.ic()}2&e&&(c.Mb(1),c.gd(c.yc(2,1,"Delete your webinar video recording",c.Hc(4,Yr))))}function Xr(e,t){if(1&e&&c.ec(0,"rectangular-button",26),2&e){const e=c.vc();c.Dc("properties",e.addRecording.properties)("click",e.addRecording.onClick)}}const Jr=function(e){return{category:"standard",time:e}};function Zr(e,t){if(1&e&&(c.jc(0,"span",25),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.gd(c.yc(2,1,"{time} ago",c.Ic(4,Jr,e.timerOutput)))}}function ec(e,t){if(1&e&&(c.jc(0,"span",24),c.fd(1),c.wc(2,"t"),c.dd(3,Zr,3,6,"span",28),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,2,"The webinar started:")," "),c.Mb(2),c.Dc("ngIf",!!e.timerOutput)}}function tc(e,t){if(1&e&&(c.jc(0,"div",12),c.dd(1,ec,4,4,"span",11),c.ec(2,"rectangular-button",26),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",!e.date.upcoming),c.Mb(1),c.Dc("properties",e.joinWebinar.properties)("click",e.joinWebinar.onClick)}}const ic=function(){return{category:"app7020"}};function sc(e,t){1&e&&(c.jc(0,"div",29),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.yc(2,1,"Description",c.Hc(4,ic))," "))}function nc(e,t){if(1&e){const e=c.kc();c.jc(0,"rightpanel-component",30,31),c.rc("onOpen",function(t){return c.Uc(e),c.vc().checkForm(t)}),c.ic()}if(2&e){const e=c.vc();c.Dc("width",e.rightpanelParams.width)("title",e.rightpanelParams.title)("content",e.rightpanelParams.content)("actions",e.rightpanelParams.actions)}}function ac(e,t){if(1&e&&c.ec(0,"player-iframe",32),2&e){const e=c.vc();c.Dc("url",e.recordData.recording.url)("bookmark",0)}}function oc(e,t){if(1&e&&c.ec(0,"player-flowplayer",33),2&e){const e=c.vc();c.Dc("mp4_url",e.recordData.recording.url)("hls_url",e.recordData.recording.hls)("speedControlEnabled","true")}}let rc=(()=>{class e{constructor(e,t,i,s,n,a,r,c,l){this.router=e,this._el=t,this.docLayoutService=i,this.backendService=s,this.formatter=n,this._store=a,this.overviewActions=r,this._route=c,this.changeDetector=l,this.showJoinButton=!1,this.showAddNewVideo=!0,this.showRightPanel=!1,this.showVideoFrame=!1,this.userTimeZone=o.a.getInstance().timezone,this.ticker=Object(ko.a)(0,1e3),this.disableConfirm=!0,this.viewRecording={},this.addRecording={},this.joinWebinar={},this.isIframeinit=!1,this.iframeUrl="",this.joinWebinarAction=()=>{this.routeTo()}}ngOnInit(){this.initializeRightPanel(),this.joinWebinar={properties:{text:E.a.t("standard","join the webinar"),colorScheme:"positive-green",typeStyle:"filled"},onClick:this.joinWebinarAction},this.addRecording={properties:{text:E.a.t("webinar","Add recording"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>{this.rightpanel.open()}},this.viewRecording={properties:{text:E.a.t("standard","view the recording"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>{this.backendService.request("/learn/v1/courses/session/"+this.id_session+"/date/"+this.date.day,"GET").pipe(Object(ri.a)(e=>e)).subscribe(e=>{this.recordData=e.data,"link"==e.data.recording.type?(window.open(e.data.recording.url,"_blank"),this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))):"video"==e.data.recording.type||"iframe"==e.data.recording.type?(this.showVideoFrame=!0,this.changeDetector.detectChanges(),this._el.nativeElement.querySelector(".webinar-iframe-video")&&this._el.nativeElement.querySelector(".webinar-iframe-video").classList.add("opened"),document.body.classList.add("hide-overflow")):this.docLayoutService.toast.showToast({message:E.a.t("standard","Something went wrong."),type:"error"})})}},this.webinarStartHour=this.date.day+" "+this.date.time_begin;const e=this.formatter.convertTimeToUTC(this.webinarStartHour,this.date.timezone);this.formatter.format("time",e,{length:"short"}).subscribe(e=>this.webinarStartDateToUserTimezone=e),this.sessionTimeZone=this.date.timezone,this.webinarEndHour=this.formatter.calculateDuration(e,this.date.duration);const t=this.date.student_join&&["learner","tutor"].includes(this.date.user_level)?this.date.student_join:null,i=this.date.instructor_join&&"instructor"===this.date.user_level?this.date.instructor_join:t;this.webinarPreJoinDateToUTC=i?this.formatter.calculateDuration(e,-1*i):0,this.minutesRemainingToStart=this.formatter.getTime(e),this.webinarEndHour=this.formatter.getTime(this.webinarEndHour),0!==this.webinarPreJoinDateToUTC&&(this.joinInAdvanceMinutes=this.formatter.getTime(this.webinarPreJoinDateToUTC)),this.subscriber=this.ticker.subscribe(e=>{this.upcomingTimer()}),this.changeDetector.detectChanges()}ngOnDestroy(){this.subscriber&&this.subscriber.unsubscribe(),this.rightpanel&&this.rightpanel.componentInstance&&this.rightpanel.componentInstance.subscriber&&this.rightpanel.componentInstance.subscriber.unsubscribe()}closeIframe(){this._el.nativeElement.querySelector(".webinar-iframe-video")&&this._el.nativeElement.querySelector(".webinar-iframe-video").classList.remove("opened"),document.body.classList.remove("hide-overflow"),this.showVideoFrame=!1,this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))}upcomingTimer(){let e=this.formatter.currentUtcDateTime();e=this.formatter.getTime(e);let t=this.formatter.returnTimer(this.webinarStartHour,{timezone:this.date.timezone});t||(this.date.upcoming=!1),this.webinarEndHour>e?(this.minutesRemainingToStart<=e||this.joinInAdvanceMinutes&&this.joinInAdvanceMinutes<e||"-1"===this.date.instructor_join&&"instructor"===this.date.user_level||"-1"===this.date.student_join&&["learner","tutor"].includes(this.date.user_level)?(this.showJoinButton=!0,this.showAddNewVideo=!1):(this.showJoinButton=!1,this.showAddNewVideo=!1),this.timerOutput=t):(console.log(this.date),this.showJoinButton=!1,this.showAddNewVideo=this.date.is_recording_supported,this.subscriber.unsubscribe())}deleteRecording(){this.docLayoutService.dialog.showCommonDialog({title:E.a.t("standard","Delete recording"),content:E.a.t("standard","Delete your webinar video recording?"),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:E.a.t("standard","Yes, I want to proceed"),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"delete",type:"negative",label:E.a.t("standard","delete"),slot:"end"}]}).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.backendService.request("/learn/v1/webinar/"+this.id_session+"/"+this.date.day+"/recording","DELETE").subscribe(t=>{this.docLayoutService.toast.showToast({message:E.a.t("standard","Your recording has been deleted."),type:"success"}),e.actionSuccess.next(!0),this._route.params.pipe(Object(ee.a)(1)).subscribe(e=>{let t=e.id_session;t&&this.id_session==t&&this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))})},()=>{this.docLayoutService.toast.showToast({message:E.a.t("standard","Your recording hasn't been deleted."),type:"error"}),e.actionSuccess.next(!1)})})}uploadStatus(e){switch(e){case"uploaded":this.rightpanel.close(),this.showAddNewVideo=!0;let e=this._route.params.subscribe(e=>{let t=e.id_session;t&&this.id_session===t&&this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))});e&&e.unsubscribe();break;case"uploading":this.showAddNewVideo=!1;break;case"failed":this.showAddNewVideo=!0}}routeTo(){this.backendService.request("/learn/v1/courses/"+this.course_id+"/session/"+this.id_session+"/date/"+this.date.day+"/join","GET").subscribe(e=>{if(void 0!==e.data.join_url)if(console.log("Getting url data"),console.log(e.data),void 0===e.data.credentials)console.log("Sending request via GET"),"undefined"!=e.data.show_type&&"iframe"==e.data.show_type?(this.isIframeinit=!0,this.iframeUrl=e.data.join_url):window.open(e.data.join_url,"_blank");else{console.log("Sending request via POST");const i=e.data.credentials,s=e.data.join_url,n=document.createElement("form");if(n.target="_blank",n.method="POST",n.action=s,e.data.credentials)for(var t in i){let e=document.createElement("input");e.type="hidden",e.name=t,e.setAttribute("value",i[t]),n.appendChild(e)}document.body.appendChild(n),n.submit(),n.remove()}else this.docLayoutService.toast.showToast({message:E.a.t("standard","Failed to join webinar session."),type:"error"})},e=>{20100===e.code&&this.docLayoutService.toast.showToast({message:E.a.t("zoom","You cannot access a Zoom meeting without having a valid email in your profile"),type:"error"})})}checkForm(){setTimeout(()=>{this.rightpanel.setFormControl(this.rightpanel.componentInstance.webinarRecordingsForm)})}initializeRightPanel(){this.rightpanelParams={width:500,title:E.a.t("webinar","Add webinar recording"),content:{params:{id_session:this.id_session,day:this.date.day,api_link:this.date.api_link,api_grab:this.date.api_grab,tool_name:this.date.tool,super_user:this.date.super_user,handler:this.uploadStatus.bind(this)},component:Br},actions:[{type:"submit",properties:{text:E.a.t("standard","Confirm"),state:"disabled"},handler:()=>{this.rightpanel.componentInstance.submitVideo()}},{type:"cancel",properties:{text:"Cancel"},handler:e=>{e.close()}}]},this.showRightPanel=!0}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(c.o),c.dc(M.a),c.dc(S.a),c.dc(ti.b),c.dc(v.d),c.dc(ga.e),c.dc(s.a),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["webinar-viewer"]],viewQuery:function(e,t){if(1&e&&c.md(Gr,1),2&e){let e;c.Qc(e=c.sc())&&(t.rightpanel=e.first)}},inputs:{date:"date",id_session:"id_session",course_id:"course_id",session_slug_name:"session_slug_name",recordData:"recordData"},decls:49,vars:28,consts:[[1,"ilt-wrapper","bg-before-grey-light"],[1,"information-wrap"],[1,"block-wrap","time-details"],[1,"zmdi","zmdi-time","text-grey-mid"],[1,"data-wrap"],[1,"location","text-grey-mid"],[1,"bolded"],[1,"zmdi","zmdi-time-interval","text-grey-mid"],[1,"zmdi","zmdi-videocam","text-grey-mid"],[1,"enroll-footer","bg-before-grey-light","recording-available"],[1,"webinar-info-block"],["class","title-regular",4,"ngIf"],[1,"button-block"],[3,"properties","click",4,"ngIf"],["class","cursor text-main",3,"click",4,"ngIf"],["class","button-block",4,"ngIf"],["class","title-normal",4,"ngIf"],[1,"description"],[3,"width","title","content","actions","onOpen",4,"ngIf"],[1,"webinar-iframe-video"],[1,"player-wrapper"],[3,"url","bookmark",4,"ngIf"],[3,"mp4_url","hls_url","speedControlEnabled",4,"ngIf"],[1,"zmdi","zmdi-close",3,"click"],[1,"title-regular"],[1,"timer-string"],[3,"properties","click"],[1,"cursor","text-main",3,"click"],["class","timer-string",4,"ngIf"],[1,"title-normal"],[3,"width","title","content","actions","onOpen"],["rightpanel",""],[3,"url","bookmark"],[3,"mp4_url","hls_url","speedControlEnabled"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.ec(3,"i",3),c.jc(4,"div",4),c.jc(5,"div",5),c.fd(6),c.wc(7,"t"),c.ic(),c.jc(8,"h4",6),c.fd(9),c.ic(),c.ic(),c.ic(),c.jc(10,"div",2),c.ec(11,"i",7),c.jc(12,"div",4),c.jc(13,"div",5),c.fd(14),c.wc(15,"t"),c.ic(),c.jc(16,"h4",6),c.fd(17),c.wc(18,"transformMinutes"),c.ic(),c.ic(),c.ic(),c.jc(19,"div",2),c.ec(20,"i",8),c.jc(21,"div",4),c.jc(22,"div",5),c.fd(23),c.wc(24,"t"),c.ic(),c.jc(25,"h4",6),c.fd(26),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(27,"div",9),c.jc(28,"div",10),c.dd(29,$r,3,3,"span",11),c.dd(30,Hr,3,3,"span",11),c.dd(31,Wr,5,6,"span",11),c.jc(32,"div",12),c.dd(33,Qr,1,2,"rectangular-button",13),c.ic(),c.jc(34,"div",12),c.dd(35,Kr,3,5,"a",14),c.ic(),c.jc(36,"div",12),c.dd(37,Xr,1,2,"rectangular-button",13),c.ic(),c.dd(38,tc,3,3,"div",15),c.ic(),c.jc(39,"div"),c.dd(40,sc,3,5,"div",16),c.jc(41,"div",17),c.fd(42),c.ic(),c.ic(),c.ic(),c.dd(43,nc,2,4,"rightpanel-component",18),c.ic(),c.jc(44,"div",19),c.jc(45,"div",20),c.dd(46,ac,1,2,"player-iframe",21),c.dd(47,oc,1,3,"player-flowplayer",22),c.jc(48,"i",23),c.rc("click",function(){return t.closeIframe()}),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(6),c.hd(" ",c.xc(7,18,"my time")," "),c.Mb(3),c.hd(" ",t.webinarStartDateToUserTimezone," "),c.Mb(5),c.hd(" ",c.xc(15,20,"Duration")," "),c.Mb(3),c.gd(c.xc(18,22,t.date.duration)),c.Mb(6),c.hd(" ",c.yc(24,24,"Tool",c.Hc(27,Yr))," "),c.Mb(3),c.gd(t.date.tool),c.Mb(3),c.Dc("ngIf",t.date.not_attended&&!t.date.has_recording&&!t.showJoinButton),c.Mb(1),c.Dc("ngIf",t.date.not_attended&&t.date.has_recording&&!t.showJoinButton),c.Mb(1),c.Dc("ngIf",t.date.upcoming),c.Mb(2),c.Dc("ngIf",t.date.has_recording&&!t.showJoinButton),c.Mb(2),c.Dc("ngIf",("instructor"==t.date.user_level||t.date.super_user)&&t.date.has_recording&&!t.date.upcoming&&!t.showJoinButton),c.Mb(2),c.Dc("ngIf",("instructor"==t.date.user_level||t.date.super_user)&&!t.date.has_recording&&!t.date.upcoming&&!t.showJoinButton&&t.showAddNewVideo),c.Mb(1),c.Dc("ngIf",t.showJoinButton),c.Mb(2),c.Dc("ngIf",t.date.description),c.Mb(2),c.gd(t.date.description),c.Mb(1),c.Dc("ngIf",t.showRightPanel),c.Mb(3),c.Dc("ngIf",t.showVideoFrame&&t.date.has_recording&&"iframe"==t.recordData.recording.type),c.Mb(1),c.Dc("ngIf",t.showVideoFrame&&t.date.has_recording&&"video"==t.recordData.recording.type))},directives:[Ae.p,an.a,ia.a,Ao.a,Lo.a],pipes:[E.b,cn.a],encapsulation:2}),e})();const cc=function(e,t){return{category:"webinar",needed:e,total:t}};function lc(e,t){if(1&e&&(c.jc(0,"div",4),c.jc(1,"div",7),c.ec(2,"i",8),c.jc(3,"span",9),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(4),c.hd(" ",c.yc(5,1,"You must attend at least {needed}/{total} session dates to complete this course",c.Jc(4,cc,e.minDates,e.maxDates))," ")}}let dc=(()=>{class e{constructor(e){this.formatter=e,this.panels=[],this.minDates=null,this.maxDates=null}get courseStatusTypes(){return te.d}ngOnInit(){let e;this.maxDates=this.session_date.length,this.current_session.min_dates_for_completion&&(this.minDates=this.current_session.min_dates_for_completion);for(var t=0;t<this.session_date.length;t++){e={params:{date:{day:this.session_date[t].day,name:this.session_date[t].name,description:this.session_date[t].description,upcoming:this.session_date[t].user_status==te.y.UPCOMING,not_attended:this.session_date[t].user_status==te.y.NOT_ATTENDED,duration:this.session_date[t].duration,timezone:this.session_date[t].timezone,time_begin:this.session_date[t].start_hour,user_level:this.user_level,super_user:o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),student_join:!!this.session_date[t].join_in_advance_user&&this.session_date[t].join_in_advance_user,instructor_join:!!this.session_date[t].join_in_advance_instructor&&this.session_date[t].join_in_advance_instructor,has_recording:this.session_date[t].has_recording,tool:this.session_date[t].tool,url:this.session_date[t].url,api_grab:!!this.session_date[t].allowed_api_grab,api_link:!!this.session_date[t].allowed_api_link,is_recording_supported:!!this.session_date[t].is_recording_supported},id_session:this.current_session.id,course_id:this.course_id,session_slug_name:this.current_session.slug_name},component:rc};let i=this.formatter.convertTimeToUTC(`${this.current_session.dates[t].day} ${this.current_session.dates[t].start_hour}`,this.current_session.dates[t].timezone);i=this.formatter.getTimezonedDate(i,o.a.getInstance().timezone);const s={dateTime:i,duration:this.session_date[t].duration,timezone:o.a.getInstance().timezone};this.panels.push({title:this.session_date[t].name,description:{params:{webinarListing:s},component:Xa},content:e,hideDescriptionOnOpen:!0,timeline_date:i,label:{background:this.session_date[t].user_status==te.y.NOT_ATTENDED?"bg-grey-dark":this.session_date[t].user_status==te.y.ATTENDED?"bg-positive-green":"bg-main",color:"text-white",text:this.labelTranslatableText(t)},markAsCompleted:this.session_date[t].user_status==te.y.ATTENDED})}this.webinarAccordion={type:"split",panels:this.panels,mode:"timeline"}}labelTranslatableText(e){return E.a.t("webinar",this.session_date[e].user_status===te.y.NOT_ATTENDED?"Not attended":this.session_date[e].user_status===te.y.ATTENDED?"Attended":"Upcoming")}}return e.\u0275fac=function(t){return new(t||e)(c.dc(ti.b))},e.\u0275cmp=c.Xb({type:e,selectors:[["webinar-listing"]],inputs:{current_session:"current_session",session_date:"session_date",user_level:"user_level",course_id:"course_id",course_status:"course_status"},decls:7,vars:5,consts:[[1,"ilt-viewer__wrapper"],[1,"mdl-wrapper"],[1,"mdl-grid"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col"],[1,"sessions-dates"],[3,"type","title","panels","mode"],[1,"webinar-completion-warning","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle"],[1,"inner-text"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.dd(3,lc,6,7,"div",3),c.jc(4,"div",4),c.jc(5,"div",5),c.ec(6,"accordion",6),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(3),c.Dc("ngIf",t.minDates&&t.course_status!==t.courseStatusTypes.COMPLETED),c.Mb(3),c.Dc("type",t.webinarAccordion.type)("title",t.webinarAccordion.title)("panels",t.webinarAccordion.panels)("mode",t.webinarAccordion.mode))},directives:[Ae.p,Ja.a],pipes:[E.b],encapsulation:2}),e})();var uc=i("rwK9");function hc(e,t){if(1&e&&c.ec(0,"session-enroller",9),2&e){const e=c.vc(2);c.Dc("course",e.course)("overview",e.overview)}}function pc(e,t){if(1&e&&c.ec(0,"ilt-listing",10),2&e){const e=c.vc(2);c.Dc("course",e.course)("current_session",e.overview.current_session)("overview",e.overview)("iframeStatus$",e.iframeStatus$)}}function mc(e,t){if(1&e&&c.ec(0,"webinar-listing",11),2&e){const e=c.vc(2);c.Dc("course_id",e.course.id)("current_session",e.current_session)("session_date",e.session_date)("course_status",e.course.status)("user_level",e.course.level)}}function gc(e,t){if(1&e&&(c.jc(0,"div"),c.dd(1,hc,1,2,"session-enroller",6),c.dd(2,pc,1,4,"ilt-listing",7),c.dd(3,mc,1,5,"webinar-listing",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",e.overview.enrolled_sessions.length<=0&&e.overview.available_sessions.length>0),c.Mb(1),c.Dc("ngIf","webinar"!==e.course.type&&e.enrolled_sessions&&e.enrolled_sessions.length>0&&e.overview.current_session),c.Mb(1),c.Dc("ngIf","webinar"===e.course.type&&e.enrolled_sessions&&e.enrolled_sessions.length>0)}}function bc(e,t){if(1&e&&(c.jc(0,"span"),c.fd(1),c.ic()),2&e){const e=c.vc(4);c.Mb(1),c.hd("/",e.current_session.score_base,"")}}const fc=function(){return{category:"standard"}};function vc(e,t){if(1&e&&(c.jc(0,"div"),c.fd(1),c.wc(2,"t"),c.jc(3,"span",29),c.fd(4),c.dd(5,bc,2,1,"span",0),c.ic(),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.hd(" ",c.yc(2,3,"_SCORE",c.Hc(6,fc)),": "),c.Mb(3),c.hd(" ",e.current_session.evaluation.score,""),c.Mb(1),c.Dc("ngIf","0"==e.current_session.evaluation_type)}}const _c=function(){return{category:"classroom"}};function wc(e,t){if(1&e&&(c.jc(0,"div",25),c.ec(1,"i",26),c.jc(2,"div",27),c.jc(3,"div",28),c.fd(4),c.wc(5,"t"),c.ic(),c.dd(6,vc,6,7,"div",0),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.gd(c.yc(5,2,"Failed!",c.Hc(5,_c))),c.Mb(2),c.Dc("ngIf","joined_webinar"!=e.current_session.evaluation_type)}}function yc(e,t){if(1&e&&(c.jc(0,"span"),c.fd(1),c.ic()),2&e){const e=c.vc(4);c.Mb(1),c.hd("/",e.current_session.score_base,"")}}function Cc(e,t){if(1&e&&(c.jc(0,"div"),c.fd(1),c.wc(2,"t"),c.jc(3,"span",33),c.fd(4),c.dd(5,yc,2,1,"span",0),c.ic(),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.hd(" ",c.yc(2,3,"_SCORE",c.Hc(6,fc)),": "),c.Mb(3),c.hd(" ",e.current_session.evaluation.score,""),c.Mb(1),c.Dc("ngIf","0"==e.current_session.evaluation_type)}}function Sc(e,t){if(1&e&&(c.jc(0,"div",30),c.ec(1,"i",31),c.jc(2,"div",27),c.jc(3,"div",32),c.fd(4),c.wc(5,"t"),c.ic(),c.dd(6,Cc,6,7,"div",0),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.gd(c.yc(5,2,"Session Passed!",c.Hc(5,_c))),c.Mb(2),c.Dc("ngIf","joined_webinar"!=e.current_session.evaluation_type)}}function Tc(e,t){if(1&e&&c.ec(0,"img",36),2&e){const e=c.vc(3);c.Dc("alt",(null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.firstname)+" "+(null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.lastname))("src",null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.avatar,c.Xc)}}function kc(e,t){if(1&e&&(c.jc(0,"div",34),c.dd(1,Tc,1,2,"img",35),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.avatar)}}const Ic=function(){return{length:"short"}};function xc(e,t){if(1&e&&(c.jc(0,"div",37),c.fd(1),c.wc(2,"date"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,1,e.current_session.evaluation.evaluation_date,c.Hc(4,Ic))," ")}}const Dc=function(){return{category:"levels"}};function Oc(e,t){if(1&e&&(c.jc(0,"div",38),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.jd(" ",c.yc(2,3,"_LEVEL_6",c.Hc(6,Dc)),": ",null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.firstname," ",null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.lastname," ")}}function Ec(e,t){if(1&e&&c.ec(0,"div",39),2&e){const e=c.vc(2);c.Dc("innerHtml",e.current_session.evaluation.comment,c.Vc)}}function Pc(e,t){if(1&e&&(c.jc(0,"a",43),c.fd(1),c.ic()),2&e){const e=c.vc(3);c.Dc("href",e.current_session.evaluation.evaluation_attachment.url,c.Xc),c.Mb(1),c.hd(" ",e.current_session.evaluation.evaluation_attachment.name," ")}}function Mc(e,t){if(1&e&&(c.jc(0,"a",43),c.fd(1),c.ic()),2&e){const e=c.vc(3);c.Dc("href",e.current_session.evaluation.evaluation_attachment.url,c.Xc),c.Mb(1),c.hd(" ","Attachment"," ")}}function Ac(e,t){if(1&e&&(c.jc(0,"div",40),c.ec(1,"i",41),c.dd(2,Pc,2,2,"a",42),c.dd(3,Mc,2,2,"a",42),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("ngIf",!e.isVilt),c.Mb(1),c.Dc("ngIf",e.isVilt)}}function Lc(e,t){if(1&e&&(c.jc(0,"div",12),c.jc(1,"div",13),c.jc(2,"h4"),c.fd(3),c.wc(4,"t"),c.ic(),c.jc(5,"div",14),c.dd(6,wc,7,6,"div",15),c.dd(7,Sc,7,6,"div",16),c.ic(),c.jc(8,"div",17),c.jc(9,"div",18),c.jc(10,"h6"),c.fd(11),c.wc(12,"t"),c.ic(),c.jc(13,"div",19),c.dd(14,kc,2,1,"div",20),c.dd(15,xc,3,5,"div",21),c.dd(16,Oc,3,7,"div",22),c.dd(17,Ec,1,1,"div",23),c.dd(18,Ac,4,2,"div",24),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(3),c.gd(c.yc(4,9,"Personal Performance Evaluation",c.Hc(15,_c))),c.Mb(3),c.Dc("ngIf",!e.current_session.evaluation.evaluation_status),c.Mb(1),c.Dc("ngIf",e.current_session.evaluation.evaluation_status),c.Mb(4),c.gd(c.yc(12,12,"Student performance evaluation",c.Hc(16,_c))),c.Mb(3),c.Dc("ngIf",e.current_session.evaluation.evaluator),c.Mb(1),c.Dc("ngIf",e.current_session.evaluation.evaluator),c.Mb(1),c.Dc("ngIf",e.current_session.evaluation.evaluator),c.Mb(1),c.Dc("ngIf",e.current_session.evaluation.comment),c.Mb(1),c.Dc("ngIf",e.current_session.evaluation.evaluation_attachment)}}function jc(e,t){if(1&e&&(c.jc(0,"div",44),c.ec(1,"partner-banner",45),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("course",e.course)}}function Fc(e,t){if(1&e&&(c.jc(0,"div",46),c.ec(1,"collection-widgets",47),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("widgetsDataSource",e.courseWidgets)("defaultWidgets",e.defaultWidgets)}}let Rc=(()=>{class e{constructor(e){this.toggleService=e,this.defaultWidgets=[],this.JOINED_WEBINAR="joined_webinar",this.JOINED_WEBINAR_ILT="2",this.isVilt=!1}ngOnInit(){this.current_session&&(this.session_date=this.current_session.dates,this.courseWidgets.params.current_session_id=this.current_session.id),this.isVilt=this.toggleService.isOn(u.f.TOGGLE_VILT)&&"classroom"===this.course.type,this.current_session&&this.courseWidgets&&this.isVilt&&(this.courseWidgets.params.session_id=this.current_session.id),this.defaultWidgets.push({id:0,title:null,content_type:"coursedesc",display_type:"learner",position:1,columns_span:12,params:`{ "course_id": ${this.course.id} }`})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["session-overview"]],inputs:{course:"course",current_session:"current_session",overview:"overview",courseWidgets:"courseWidgets",iframeStatus$:"iframeStatus$"},decls:6,vars:4,consts:[[4,"ngIf"],[1,"mdl-wrapper"],[1,"mdl-grid"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],["class","partner-wrapper mdl-cell mdl-cell--12-col",4,"ngIf"],["class","widgets-area mdl-cell mdl-cell--12-col",4,"ngIf"],[3,"course","overview",4,"ngIf"],[3,"course","current_session","overview","iframeStatus$",4,"ngIf"],[3,"course_id","current_session","session_date","course_status","user_level",4,"ngIf"],[3,"course","overview"],[3,"course","current_session","overview","iframeStatus$"],[3,"course_id","current_session","session_date","course_status","user_level"],[1,"mdl-cell","mdl-cell--12-col"],[1,"evaluation-box","bg-white","mdl-grid"],[1,"mdl-cell--2-col","session-status-column"],["class","status-box status-failed",4,"ngIf"],["class","status-box status-passed",4,"ngIf"],[1,"mdl-cell--9-col","evaluation","border-grey-light"],[1,"evaluation-details-wrapper"],[1,"evaluation-details"],["class","avatar-box bg-grey-superlight",4,"ngIf"],["class","ev-date text-grey-mid",4,"ngIf"],["class","ev-instructor",4,"ngIf"],[3,"innerHtml",4,"ngIf"],["class","ev-attachment",4,"ngIf"],[1,"status-box","status-failed"],[1,"zmdi","zmdi-close-circle","text-error"],[1,"score-details"],[1,"bigger-text","text-error"],[1,"text-error"],[1,"status-box","status-passed"],[1,"zmdi","zmdi-check-circle","text-positive-green"],[1,"bigger-text","text-positive-green"],[1,"text-positive-green"],[1,"avatar-box","bg-grey-superlight"],[3,"alt","src",4,"ngIf"],[3,"alt","src"],[1,"ev-date","text-grey-mid"],[1,"ev-instructor"],[3,"innerHtml"],[1,"ev-attachment"],[1,"zmdi","zmdi-file","text-grey-mid"],["class","text-main",3,"href",4,"ngIf"],[1,"text-main",3,"href"],[1,"partner-wrapper","mdl-cell","mdl-cell--12-col"],[3,"course"],[1,"widgets-area","mdl-cell","mdl-cell--12-col"],[3,"widgetsDataSource","defaultWidgets"]],template:function(e,t){1&e&&(c.dd(0,gc,4,3,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.dd(3,Lc,19,17,"div",3),c.dd(4,jc,2,1,"div",4),c.dd(5,Fc,2,2,"div",5),c.ic(),c.ic()),2&e&&(c.Dc("ngIf","elearning"!==t.course.type),c.Mb(3),c.Dc("ngIf",(null==t.current_session?null:t.current_session.evaluation)&&t.current_session.evaluation_type!=t.JOINED_WEBINAR&&t.current_session.evaluation_type!=t.JOINED_WEBINAR_ILT&&("classroom"==t.course.type||"webinar"==t.course.type&&2==t.current_session.system_status)),c.Mb(1),c.Dc("ngIf",t.course.partner_data&&t.course.partner_data.active&&t.course.partner_data.course_visible),c.Mb(1),c.Dc("ngIf",t.courseWidgets&&(t.overview.enrolled_sessions.length>0||"elearning"===t.course.type)))},directives:[Ae.p,no,Rr,dc,pi,Oi.a],pipes:[E.b,uc.a],encapsulation:2}),e})();function Nc(e,t){if(e&&t&&0!==t.length){if(-1===["completed","passed"].indexOf(e.status))return e;for(let i=0;i<t.length;i++){const s=t[i];if(s&&s.id&&s.id===e.id)return t[i+1]?Nc(t[i+1],t):t[i]}}}var Uc=i("TrxT"),qc=i("zNDF"),zc=i("A1Wd");let Vc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Bc=(()=>{class e{constructor(e,t,i,s){this.src=e,this.lrnCachedCourseService=t,this.docLayoutService=i,this.translationService=s}getCourseInfo(e){let t=e.payload;return"object"==typeof t&&t.hasOwnProperty("id")&&(t=t.id),a.a.create(e=>{this.src.request(`/learn/v1/courses/${t}?get_all_sessions=1`,"GET").subscribe(t=>{if(t.data.hasOwnProperty("has_esignature_enabled")&&t.data.has_esignature_enabled&&(t.data.tree.length&&t.data.type===qc.a.ELEARNING||t.data.type===qc.a.CLASSROOM||t.data.type===qc.a.WEBINAR)){const e=`sign_${t.data.id}`;t.data.tree=[...t.data.tree,{id:e,name:t.data.esignature_title?t.data.esignature_title:E.a.t("esignature","E-Signature"),slug_name:te.a.SIGN.toString(),description:"",params:"",is_folder:!1,short_description:"",status:t.data.esignature_status===te.h.PENDING?te.l.NOT_STARTED:t.data.esignature_status===te.h.SIGNED?te.l.COMPLETED:te.l.NOT_STARTED,type:te.a.SIGN.toString()}],t.data.chapter_sequence=[...t.data.chapter_sequence,[e]]}this.lrnCachedCourseService.cachedCourseResponse=t,e.next(t)},t=>{e.error(t)})})}getLosTree(e){return this.src.request(`/learn/v1/courses/${e}/los/tree`,"GET")}getChapterLockStatus(e,t){return this.getLosTree(e).pipe(Object(ri.a)(e=>{var i;return{chapters:e.data,locked:null===(i=Object(zc.b)(e.data).find(e=>e.id===t))||void 0===i?void 0:i.locked}}))}showChapterLockedModal(e,t){if(e.locked){const i=this.getChapterLockedModalTitle(e,t),s=this.getChapterLockedModalContent(e,t);this.docLayoutService.dialog.showCommonDialog({title:i,content:s,closable:!0,actions:[{id:"confirm",type:"neutral",label:E.a.t("app7020","Got it"),slot:"end"}]}).subscribe(e=>{e.actionSuccess.next(!0)})}}getChapterLockedModalTitle(e,t){switch(e.locked){case te.k.LOCKED:return E.a.t("subscribe","Prerequisites not met");case te.k.MAX_NUMBER_VIEWS:return E.a.t("course","Max Number of Views Reached");default:return E.a.t("course","Max Number of Attempts Reached")}}getChapterLockedModalContent(e,t){switch(e.locked){case te.k.LOCKED:return`${new E.b(this.translationService,t).transform("To unlock this lesson you must first complete the following:")}<br />\n                    <div style="font-weight: var(--ui-typography-weight-semibold)">${e.status_message}</div>`;case te.k.MAX_NUMBER_VIEWS:return E.a.t("course","The lesson {name} is locked because you have reached the maximum number of views",{name:e.name});default:return E.a.t("course","The lesson {name} is locked because you have reached the maximum allowed number of {attempts} attempts",{name:e.name,attempts:e.failed_attempts_allowed})}}rateCourse(e){return this.src.request("/learn/v1/courses/"+e.payload.id_course+"/rating","POST",{rating:e.payload.rating})}getCourseRating(e){return this.src.request("/learn/v1/courses/"+e.payload.id_course+"/rating","GET")}getLoInfo(e,t,i){return this.src.request("/learn/v1/lo/"+e+"/play","GET",t,{},S.b,null,i)}trackLo(e){return this.src.request(`/learn/v1/lo/${e}/track`,"POST")}trackSurveyData(e){return e.is_dirty?this.src.request("/learn/v1/lo/"+e.idOrg+"/track","POST",JSON.stringify({track:{submitted:e.submitted,questions:e.user_answers}})):Object(xi.a)(e)}trackQuizData(e){let t={track:{action:e.action}};return e.user_answers&&(t.track.questions=e.user_answers),this.src.request("/learn/v1/lo/"+e.idOrg+"/track","POST",JSON.stringify(t))}getOverviewInfo(e){let t={};return!1!==e.payload.sessionId&&(t={id_session:e.payload.sessionId}),this.src.request("/learn/v1/courses/"+e.payload.courseId+"/sessions","GET",t)}enrollUser(e){let t=o.a.getInstance().id;return a.a.create(i=>{this.src.request("/learn/v1/enrollment/"+e.payload.courseId+"/"+t,"POST",{session_id:e.payload.sessionId}).subscribe(t=>{var s=Object.assign({},t,{payload:e.payload});i.next(s)},e=>{i.error(e)})})}changeEnrollmentSession(e){return a.a.create(t=>{this.src.request("/learn/v1/courses/switch_sessions","PUT",e).subscribe(e=>{t.next(e)},e=>{t.error(e)})})}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a),c.nc(Vc),c.nc(M.a),c.nc(u.h))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})(),Gc=(()=>{class e{constructor(e){this._backendService=e}getLearningPlanInfo(e){return this._backendService.request("/learn/v1/lp/"+e.payload,"GET",{},{},S.b,null,e=>this._backendService.redirectWhenCode9000(e))}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var $c=i("sWYD"),Hc=i("zbbA"),Yc=i("cnyc"),Wc=i("f0Wu");let Qc=(()=>{class e{constructor(e){this.src=e,this.dateFormatStandard="yyyy-MM-dd",this.sortAttr="start",this.sortDir="asc"}getEventsData(e){const t=e.payload.filters;let i="";const s=Object($c.a)(e.payload.startDate,this.dateFormatStandard),n=Object($c.a)(e.payload.endDate,this.dateFormatStandard);if(void 0!==t&&void 0!==t.search){i="&q="+t.search;const e=Object($c.a)(new Date,this.dateFormatStandard),s=Object($c.a)(Object(Hc.a)(new Date,4),this.dateFormatStandard);return this.src.request("/manage/v1/user/events?start_date="+e+"&end_date="+s+"&sort_attr="+this.sortAttr+"&sort_dir="+this.sortDir+i,"GET")}return this.src.request("/manage/v1/user/events?start_date="+s+"&end_date="+n+"&sort_attr="+this.sortAttr+"&sort_dir="+this.sortDir,"GET")}getMonthHasEventsData(e){const t=Object(Yc.a)(e.payload.updateParams.viewDate);return this.src.request("/manage/v1/user/events_in_year?year="+t,"GET")}filterMonthHasEvents(e,t){return void 0!==t&&void 0!==t.type?e.filter(e=>{let i=!1;return e.course_types.forEach(e=>{t.type.forEach(t=>{t===e&&(i=!0)})}),i}):e}formatEvents(e){const t=[];return e.forEach(e=>{const i={start:new Date(Wc(e.start,"YYYY/MM/DD HH:mm:ss").locale("en").tz(o.a.getInstance().timezone).format("YYYY/MM/DD HH:mm:ss")),end:new Date(Wc(e.end,"YYYY/MM/DD HH:mm:ss").locale("en").tz(o.a.getInstance().timezone).format("YYYY/MM/DD HH:mm:ss")),allDay:e.all_day,title:e.date_name||e.session_name||e.title,description:e.date_information||e.session_information||e.course_description,location:e.location,courseType:e.course_type,link:e.expired?null:"/learn/course/"+e.course_id+("webinar"===e.course_type||"classroom"===e.course_type?"/session/"+e.session_id:"")+"/"+e.slug_name,expired:e.expired};t.push(i)}),t}filterEvents(e,t){return void 0!==t&&void 0!==t.type?e.filter(e=>t.type.some(t=>t===e.courseType)):e}getAppliedFilters(e){return void 0!==e&&void 0!==e.type?e.type.length:0}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var Kc=i("3D7D"),Xc=i("QXP6");function Jc(e,t){if(1&e&&(c.ec(0,"span",21),c.wc(1,"sanitizeHtml")),2&e){const e=c.vc(2).$implicit;c.Dc("innerHtml",c.xc(1,1,e.short_description),c.Vc)}}const Zc=function(e){return{display:e}};function el(e,t){if(1&e){const e=c.kc();c.jc(0,"tree-view",22),c.rc("toggleFolders",function(){return c.Uc(e),c.vc(3).emitToggleFolderOutput()}),c.ic()}if(2&e){const e=c.vc(2).$implicit,t=c.vc();c.Dc("current_tree",e.children)("mode",t.mode)("level",t.level)("current_chapter",t.current_chapter)("course",t.course)("treeListStatic",t.treeListStatic)("courseStatus",t.courseStatus)("chapters",t.chapters)("isCourseStarted",t.isCourseStarted)("ngStyle",c.Ic(10,Zc,t.isFolderExpanded(e.id)?"flex":"none"))}}const tl=function(e){return{"first-folder":e}},il=function(e,t){return{"text-main":e,"text-grey-mid-permanent":t}},sl=function(e,t){return{"text-white":e,"text-grey-dark":t}},nl=function(e,t){return{"zmdi-chevron-up":e,"zmdi-chevron-down":t}};function al(e,t){if(1&e){const e=c.kc();c.jc(0,"div",5),c.jc(1,"div",6),c.jc(2,"div",7),c.rc("click",function(){c.Uc(e);const t=c.vc().$implicit;return c.vc().toggleFolder(t.id)})("keydown.enter",function(){c.Uc(e);const t=c.vc().$implicit;return c.vc().toggleFolder(t.id)}),c.jc(3,"div",8),c.jc(4,"div",9),c.ec(5,"em",10),c.ic(),c.ic(),c.jc(6,"div",11),c.jc(7,"div",12),c.ec(8,"div",13),c.wc(9,"stripTags"),c.wc(10,"t"),c.jc(11,"div",14),c.dd(12,Jc,2,3,"span",15),c.ic(),c.ic(),c.ic(),c.jc(13,"div",16),c.jc(14,"span",17),c.fd(15),c.ic(),c.ic(),c.jc(16,"div",18),c.ec(17,"em",19),c.ic(),c.ic(),c.dd(18,el,1,12,"tree-view",20),c.ic(),c.ic()}if(2&e){const e=c.vc(),t=e.$implicit,i=e.index,s=c.vc();c.Mb(2),c.Rb("mdl-grid folder bg-grey-superlight border-grey-light level_",s.level,""),c.Ec("id",t.id),c.Dc("ngClass",c.Ic(18,tl,0===i)),c.Nb("expanded",s.isFolderExpanded(t.id).toString()),c.Mb(3),c.Dc("ngClass",c.Jc(20,il,s.isFolderExpanded(t.id),!s.isFolderExpanded(t.id))),c.Mb(3),c.Dc("innerHTML",c.xc(9,14,c.xc(10,16,t.name)),c.Vc),c.Mb(3),c.Dc("ngClass",c.Jc(23,sl,s.loIsSelected(t.id),!s.loIsSelected(t.id))),c.Mb(1),c.Dc("ngIf",t.short_description),c.Mb(3),c.id(" ",t.completed," / ",t.all," "),c.Mb(2),c.Dc("ngClass",c.Jc(26,nl,s.isFolderExpanded(t.id),!s.isFolderExpanded(t.id))),c.Mb(1),c.Dc("ngIf",t.children.length>0)}}function ol(e,t){if(1&e&&c.ec(0,"em"),2&e){const e=c.vc(2).$implicit,t=c.vc();c.Sb("file-type ",t.loIsSelected(e.id)?"text-white":"text-grey-mid-permanent"," ",t.getLOIcon(e.type),"")}}function rl(e,t){if(1&e&&c.ec(0,"img",31),2&e){const e=c.vc(2).$implicit,t=c.vc();c.Qb(t.loIsSelected(e.id)?"border-main":"border-grey-light"),c.Ec("src",e.thumbnail,c.Xc)}}function cl(e,t){if(1&e&&c.ec(0,"div"),2&e){const e=c.vc(2).$implicit,t=c.vc();c.Rb("overlay-status ",t.getThumbnailBackground(e),"")}}function ll(e,t){if(1&e&&(c.jc(0,"div",32),c.ec(1,"em"),c.ic()),2&e){const e=c.vc(2).$implicit,t=c.vc();c.Mb(1),c.Rb("zmdi ",t.getThumbnailStatusIcon(e),"")}}function dl(e,t){if(1&e&&(c.jc(0,"div"),c.ec(1,"em"),c.ic()),2&e){const e=c.vc(2).$implicit,t=c.vc();c.Rb("chapter-status ",t.getStatusTextColor(e),""),c.Mb(1),c.Rb("zmdi ",t.getStatusIcon(e),"")}}function ul(e,t){if(1&e&&(c.jc(0,"span"),c.fd(1),c.ic()),2&e){const e=c.vc(3).$implicit;c.Mb(1),c.hd(" | ",e.duration,"")}}function hl(e,t){if(1&e&&(c.ec(0,"span",21),c.wc(1,"sanitizeHtml")),2&e){const e=c.vc(3).$implicit;c.Dc("innerHtml",c.xc(1,1,e.short_description),c.Vc)}}const pl=function(e,t){return{"text-white":e,"text-main":t}},ml=function(e,t,i){return{"text-white":e,"text-main":t,"text-grey-mid":i}};function gl(e,t){if(1&e&&(c.jc(0,"div",33),c.ec(1,"div",34),c.wc(2,"stripTags"),c.wc(3,"t"),c.jc(4,"div",35),c.fd(5),c.wc(6,"t"),c.dd(7,ul,2,1,"span",36),c.ic(),c.jc(8,"div",37),c.dd(9,hl,2,3,"span",15),c.ic(),c.ic()),2&e){const e=c.vc(2).$implicit,t=c.vc();c.Mb(1),c.Dc("ngClass",c.Jc(13,pl,t.loIsSelected(e.id)&&t.isCourseStarted,!t.loIsSelected(e.id)&&t.isCourseStarted))("innerHTML",c.xc(2,7,c.xc(3,9,e.name)),c.Vc),c.Mb(3),c.Dc("ngClass",c.Kc(16,ml,t.loIsSelected(e.id)&&t.isCourseStarted,!t.loIsSelected(e.id)&&e.type!==t.eSignatureType&&t.isCourseStarted,!t.loIsSelected(e.id)&&e.type===t.eSignatureType&&t.isCourseStarted)),c.Mb(1),c.hd(" ",c.xc(6,11,t.getLOTitle(e.type))," "),c.Mb(2),c.Dc("ngIf",e.duration),c.Mb(1),c.Dc("ngClass",c.Jc(20,sl,t.loIsSelected(e.id),!t.loIsSelected(e.id))),c.Mb(1),c.Dc("ngIf",e.short_description)}}const bl=function(e,t){return{"selected bg-main":e,disabled:t}};function fl(e,t){if(1&e){const e=c.kc();c.jc(0,"div",23,24),c.rc("click",function(t){c.Uc(e);const i=c.vc().$implicit,s=c.vc();return s.isCourseStarted?s.startPlaying(i,t):null})("keydown.enter",function(t){c.Uc(e);const i=c.vc().$implicit,s=c.vc();return s.isCourseStarted?s.startPlaying(i,t):null}),c.jc(2,"div",25),c.jc(3,"div",26),c.wc(4,"t"),c.dd(5,ol,1,4,"em",27),c.dd(6,rl,1,4,"img",28),c.dd(7,cl,1,3,"div",27),c.dd(8,ll,2,3,"div",29),c.dd(9,dl,2,6,"div",27),c.ic(),c.ic(),c.dd(10,gl,10,23,"div",30),c.ic()}if(2&e){const e=c.Rc(1),t=c.vc().$implicit,i=c.vc();c.Rb("item mdl-grid chapter level_",i.level,""),c.Ec("id",t.id),c.Dc("level",i.level)("ngClass",c.Jc(16,bl,i.loIsSelected(t.id),!i.isCourseStarted)),c.Mb(3),c.Dc("tooltip",c.xc(4,14,i.getLOTooltipContent(t)))("tooltipTrigger",e),c.Mb(2),c.Dc("ngIf",!t.thumbnail),c.Mb(1),c.Dc("ngIf",t.thumbnail),c.Mb(1),c.Dc("ngIf",t.thumbnail&&t.status),c.Mb(1),c.Dc("ngIf",t.thumbnail&&t.status),c.Mb(1),c.Dc("ngIf",!t.thumbnail&&t.status),c.Mb(1),c.Dc("ngIf","full"==i.mode)}}function vl(e,t){1&e&&(c.jc(0,"div",38),c.fd(1,"|"),c.ic())}const _l=function(e){return{"folder-item":e}};function wl(e,t){if(1&e&&(c.jc(0,"div",1),c.dd(1,al,19,29,"div",2),c.dd(2,fl,11,19,"div",3),c.dd(3,vl,2,0,"div",4),c.ic()),2&e){const e=t.$implicit,i=t.index,s=c.vc();c.Dc("ngClass",c.Ic(4,_l,1==e.is_folder)),c.Mb(1),c.Dc("ngIf",1==e.is_folder),c.Mb(1),c.Dc("ngIf",0==e.is_folder),c.Mb(1),c.Dc("ngIf","compact"==s.mode&&i<s.childMaterialsCount-1)}}let yl=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a){super(),this.router=e,this.translationPipe=t,this.route=i,this.store$=s,this.svc=n,this.ref=a,this.current_tree=[],this.level=0,this.mode=te.o.FULL,this.treeListStatic=[],this.isCourseStarted=!0,this.toggleFolders=new c.q,this.eSignatureType=te.a.SIGN.toString(),this.chapterCountWithoutESignature=0,this.eSignatureChapterLocked=!1,this.childMaterialsCount=0,this.loTypes=Gi.d,this.loStatus={in_progress:E.a.t("course","Activity in progress"),incomplete:E.a.t("course","Activity in progress"),"ab-initio":E.a.t("course","Activity to begin"),completed:E.a.t("course","Activity completed"),passed:E.a.t("course","Activity completed"),attempted:E.a.t("course","Attempted activity"),not_started:E.a.t("course","Activity to begin"),failed:E.a.t("course","Failed activity"),locked:E.a.t("course","Activity is locked"),locked_maxattempts:E.a.t("course","Maximum attempts reached")}}ngOnInit(){this.level++,this.level>3&&(this.level=3),this.chapterCountWithoutESignature=this.current_tree.filter(e=>e.type!==Gi.c.sign).length,this.store$.pipe(Object(v.p)(ie.i),Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{this.eSignatureChapterLocked=e})}ngAfterViewInit(){this.course&&(this.whereYouLeftOfChapter=Nc(this.course.last_played_chapter,this.chapters)),this.getFolderItems(this.current_tree),this.openFirstLOFolder()}ngOnChanges(){this.openCurrentPlayingLOFolder()}toggleFolder(e){const t=document.getElementById(e),i=!("true"==t.getAttribute("expanded"));t.setAttribute("expanded",String(i)),i?te.i.folders.push(e):te.i.folders=nt.a.difference(te.i.folders,[e]),this.emitToggleFolderOutput()}emitToggleFolderOutput(){this.toggleFolders.emit("toggled")}isFolderExpanded(e){return-1!=nt.a.indexOf(te.i.folders,e)}getFolderItems(e){let t=!1;for(let i=0;i<e.length;i++){const s=e[i];!0===s.is_folder?void 0!==s.children&&s.children.length>0&&this.getFolderItems(s.children)&&(t=!0,document.getElementById(s.id).setAttribute("expanded",String(t)),te.i.folders.push(s.id)):(this.childMaterialsCount++,this.current_chapter&&this.current_chapter.id===s.id&&(t=!0))}return t}getLOTooltipContent(e){if(this.mode!==te.o.COMPACT){if(!e.locked)return this.loStatus[e.status];switch(e.locked){case te.k.LOCKED:return E.a.t("course","You must complete {message} in order to unlock this activity",{message:`<div>${e.status_message}</div>`});case te.k.MAX_NUMBER_VIEWS:return E.a.t("course","You have reached the maximum number of views");case te.k.MAX_ATTEMPTS:return this.translationPipe.transform(e.status_message);default:return null}}if(""===e.status)return"";let t=`<span style="text-transform: uppercase">${this.translationPipe.transform(this.loStatus[e.status])}</span><br>${e.name}<br>${this.translationPipe.transform(this.getLOTitleToTranslate(e.type))}`;return e.duration&&(t+=" | "+e.duration),t}getLOTitleToTranslate(e){return this.loTypes[e]?this.loTypes[e].title:this.loTypes[void 0].title}getLOTitle(e){return e===this.eSignatureType&&this.course&&this.course.esignature_description?this.course.esignature_description:this.translationPipe.transform(this.loTypes[e]&&this.loTypes[e].title?this.loTypes[e].title:this.loTypes[void 0].title)}getLOIcon(e){return this.loTypes[e]?this.loTypes[e].icon:this.loTypes[void 0].icon}startPlaying(e,t){var i;t&&t.preventDefault(),this.current_chapter&&e.id===this.current_chapter.id||e&&((null==e?void 0:e.locked)?this.svc.getChapterLockStatus((null===(i=this.course)||void 0===i?void 0:i.id)||-1,e.id).subscribe(({chapters:t,locked:i})=>{i?this.svc.showChapterLockedModal(e,this.ref):(this.store$.dispatch(ga.a.reloadChapters(t)),this.playChapter(e))}):this.playChapter(e))}playChapter(e){const t=document.querySelector(".course-player-elements__main");t&&t.focus(),this.route.params.subscribe(e=>{const t=e.lp;t&&(this.learning_plan_id=t)}),new Promise((e,t)=>{const i=document.getElementById("scorm-iframe");i?(i.addEventListener("load",t=>{i.parentNode&&i.parentNode.removeChild(i),e(!0)}),i.setAttribute("src","about:blank")):e(!1)}).then(()=>{this.router.navigate(this.learning_plan_id?["/learn/course/"+this.course.id+"/play/"+e.id+"/"+e.slug_name,{lp:this.learning_plan_id}]:["/learn/course/"+this.course.id+"/play/"+e.id+"/"+e.slug_name],mi.b)})}getStatusTextColor(e){if(e.locked||e.type===String(te.a.SIGN)&&this.eSignatureChapterLocked)return"text-black";switch(e.status){case te.l.IN_PROGRESS:case te.l.INCOMPLETE:return"text-warning";case te.l.COMPLETED:case te.l.PASSED:return"text-positive-green";case te.l.FAILED:return"text-error"}}getStatusIcon(e){if(e.locked||e.type===String(te.a.SIGN)&&this.eSignatureChapterLocked)return"zmdi-lock";switch(e.status){case te.l.IN_PROGRESS:case te.l.COMPLETED:case te.l.INCOMPLETE:case te.l.PASSED:return"zmdi-check-circle";case te.l.FAILED:return"zmdi-close-circle"}}getThumbnailBackground(e){if(e.locked||e.type===String(te.a.SIGN)&&this.eSignatureChapterLocked)return"bg-black";switch(e.status){case te.l.IN_PROGRESS:case te.l.INCOMPLETE:return"bg-warning";case te.l.COMPLETED:case te.l.PASSED:return"bg-positive-green";case te.l.FAILED:return"bg-error"}}getThumbnailStatusIcon(e){if(e.locked||e.type===String(te.a.SIGN)&&this.eSignatureChapterLocked)return"zmdi-lock";switch(e.status){case te.l.IN_PROGRESS:case te.l.INCOMPLETE:case te.l.COMPLETED:case te.l.PASSED:return"zmdi-check";case te.l.FAILED:return"zmdi-close"}}courseResumingIsEnabled(){return!(!this.course||!this.courseStatus||nt.a.isEmpty(this.course.last_played_chapter)||this.courseStatus.status===Bt.e.COMPLETED)}openFirstLOFolder(){this.treeListStatic&&!this.current_chapter&&nt.a.isEmpty(this.course.last_played_chapter)&&!nt.a.isEmpty(this.treeListStatic)&&this.treeListStatic[0].is_folder&&te.i.folders.push(this.treeListStatic[0].id)}openCurrentPlayingLOFolder(e=null){null===e&&(te.i.folders=[],e=this.treeListStatic);let t=!1;const i=Nc(this.course.last_played_chapter,this.chapters);for(const s of e)if(s.is_folder&&s.children&&s.children.length>0)for(const e of s.children)e.is_folder&&e.children&&e.children.length>0?this.openCurrentPlayingLOFolder([e])&&(te.i.folders.push(s.id),t=!0):(this.current_chapter&&e.id===this.current_chapter.id&&(te.i.folders.push(s.id),t=!0),i&&!this.current_chapter&&this.courseResumingIsEnabled()&&i.id===e.id&&(te.i.folders.push(s.id),t=!0));return t}loIsSelected(e){return this.current_chapter?this.current_chapter.id===e:this.courseResumingIsEnabled()?!!this.whereYouLeftOfChapter&&this.whereYouLeftOfChapter.id===e:void 0}get isFullMode(){return this.mode===te.o.FULL}get hasEsignatureEnabled(){return!!this.course&&!!this.course.has_esignature_enabled}get hasContentLabelShown(){return!(this.level>1||!this.hasEsignatureEnabled||!this.isFullMode)&&this.current_tree.filter(e=>e.type!==Gi.c.sign).length>0}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(E.b),c.dc(s.a),c.dc(v.d),c.dc(Bc),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["tree-view"]],inputs:{current_chapter:"current_chapter",current_tree:"current_tree",level:"level",mode:"mode",course:"course",learning_plan_id:"learning_plan_id",treeListStatic:"treeListStatic",courseStatus:"courseStatus",chapters:"chapters",isCourseStarted:"isCourseStarted"},outputs:{toggleFolders:"toggleFolders"},features:[c.Lb([E.b]),c.Jb,c.Kb],decls:1,vars:1,consts:[["class","mdl-cell--12-col tree-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"mdl-cell--12-col","tree-item",3,"ngClass"],["class","item mdl-grid folderContainer",4,"ngIf"],["tabindex","0",3,"class","level","id","ngClass","click","keydown.enter",4,"ngIf"],["class","delimeter text-grey-mid-permanent",4,"ngIf"],[1,"item","mdl-grid","folderContainer"],[1,"mdl-cell","mdl-cell--12-col","folder-cell"],["tabindex","0",3,"ngClass","id","click","keydown.enter"],[1,"mdl-cell--2-col"],[1,"icon"],[1,"file-type","zmdi","zmdi-folder-outline",3,"ngClass"],[1,"information","mdl-cell","mdl-cell--7-col"],[1,"title","text-main"],[3,"innerHTML"],[1,"short-description",2,"padding","3px 0 0","font-weight","normal","font-size","12px",3,"ngClass"],[3,"innerHtml",4,"ngIf"],[1,"information","mdl-cell","mdl-cell--2-col",2,"text-align","right"],[1,"info"],[1,"information","mdl-cell","mdl-cell--1-col","text-grey-mid"],[1,"zmdi","chevron",3,"ngClass"],["class","mdl-grid border-grey-light",3,"current_tree","mode","level","current_chapter","course","treeListStatic","courseStatus","chapters","isCourseStarted","ngStyle","toggleFolders",4,"ngIf"],[3,"innerHtml"],[1,"mdl-grid","border-grey-light",3,"current_tree","mode","level","current_chapter","course","treeListStatic","courseStatus","chapters","isCourseStarted","ngStyle","toggleFolders"],["tabindex","0",3,"level","id","ngClass","click","keydown.enter"],["chapterElement",""],[1,"mdl-cell","mdl-cell--2-col","icon-wrap"],["position","top",1,"icon",3,"tooltip","tooltipTrigger"],[3,"class",4,"ngIf"],["alt","","width","30",3,"src","class",4,"ngIf"],["class","overlay-status-icon text-white",4,"ngIf"],["class","information mdl-cell mdl-cell--10-col",4,"ngIf"],["alt","","width","30",3,"src"],[1,"overlay-status-icon","text-white"],[1,"information","mdl-cell","mdl-cell--10-col"],[1,"title",3,"ngClass","innerHTML"],[1,"info",3,"ngClass"],[4,"ngIf"],[1,"info","short-description",3,"ngClass"],[1,"delimeter","text-grey-mid-permanent"]],template:function(e,t){1&e&&c.dd(0,wl,4,6,"div",0),2&e&&c.Dc("ngForOf",t.current_tree)},directives:[Ae.o,Ae.n,Ae.p,e,Ae.q,Kc.a],pipes:[Xc.a,E.b,Mi.a],encapsulation:2}),e})(),Cl=(()=>{class e{constructor(){this.level=0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["overview-navigation"]],inputs:{current_chapter:"current_chapter",chapter:"chapter",level:"level",course:"course",learning_plan_id:"learning_plan_id"},decls:3,vars:5,consts:[[1,"mdl-wrapper","overview-navigation__wrapper"],[1,"overview-navigation","full-mode","bg-white"],[1,"mdl-grid","border-grey-light","tree-view","tree-wrapper","bg-white",3,"learning_plan_id","mode","current_tree","course","current_chapter"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.ec(2,"tree-view",2),c.ic(),c.ic()),2&e&&(c.Mb(2),c.Dc("learning_plan_id",t.learning_plan_id)("mode","full")("current_tree",t.chapter)("course",t.course)("current_chapter",t.current_chapter))},directives:[yl],encapsulation:2}),e})();var Sl=i("fY+D");function Tl(e,t){if(1&e&&c.ec(0,"radio",8),2&e){const e=c.vc(2);c.Dc("inputFormControl",e.form_control)("label",e.course_label)("name","enrollment_type")("value","course_unenrollment")("subtitle",e.course.name)("checked",e.course.can_self_unenroll&&!(null!=e.current_session&&e.current_session.can_self_unenroll))}}function kl(e,t){if(1&e&&c.ec(0,"radio",8),2&e){const e=c.vc(2);c.Dc("inputFormControl",e.form_control)("label",e.session_label)("name","enrollment_type")("value","session_unenrollment")("subtitle",null==e.current_session?null:e.current_session.name)("checked",e.current_session&&e.course.session_self_unenrollment_enabled)}}const Il=function(){return{category:"course"}};function xl(e,t){if(1&e&&(c.jc(0,"div",5),c.jc(1,"h4"),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"form",6),c.jc(5,"div"),c.dd(6,Tl,1,6,"radio",7),c.ic(),c.jc(7,"div"),c.dd(8,kl,1,6,"radio",7),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.gd(c.yc(3,3,"Please select where you want to be unenrolled from",c.Hc(6,Il))),c.Mb(4),c.Dc("ngIf",e.course.can_self_unenroll),c.Mb(2),c.Dc("ngIf",e.course.session_self_unenrollment_enabled)}}function Dl(e,t){1&e&&(c.jc(0,"div",9),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Please, confirm that you want to unsubscribe from this course")," "))}function Ol(e,t){1&e&&(c.jc(0,"div",10),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Please, confirm that you want to unsubscribe from the current session")," "))}function El(e,t){if(1&e){const e=c.kc();c.jc(0,"ui-input-checkbox",11),c.rc("trigger",function(t){return c.Uc(e),c.vc().onConfirmCheckboxToggle(t)}),c.jc(1,"ui-input-label"),c.fd(2),c.wc(3,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Dc("formControl",e.confirmation_form_control),c.Mb(2),c.hd(" ",c.xc(3,2,e.confirmationLabel)," ")}}let Pl=(()=>{class e{constructor(e,t,i){this.backendService=e,this.router=t,this.docLayoutService=i,this.showCheckbox=!1,this.confirmationToggle=new c.q,this.showCourseOrSesionSelection=!1,this.confirmation_form_control=new Ke.e(!1),this.confirmationLabel=E.a.t("standard","Yes, I want to proceed")}ngOnInit(){this.current_session&&this.current_session.is_enrolled&&this.course.session_self_unenrollment_enabled?this.unenrollment_type="session_unenrollment":this.course.can_self_unenroll&&(this.unenrollment_type="course_unenrollment"),this.form_control.setValue(this.unenrollment_type),this.course_label=E.a.t("course","This course"),this.session_label=E.a.t("course","Current session"),this.current_session&&0===this.course.learningplans.length&&this.course.session_self_unenrollment_enabled&&this.course.can_self_unenroll&&this.current_session.is_enrolled&&(this.showCourseOrSesionSelection=!0)}onConfirmCheckboxToggle(e){this.confirmationToggle.emit(e.target.checked)}onSelfUnenrollConfirm(e){let t;t=this.form_control?this.form_control.value:this.unenrollment_type;let i=k.c.getInstance().id;"session_unenrollment"===t?this.backendService.request("/learn/v1/enrollment/"+this.course.id+"/"+i+"/session/"+this.current_session.id,"DELETE").subscribe(t=>{e.hide(),new RegExp("^/learn/course/\\d+$").test(this.router.url)?this.router.navigate(["/learn/course/"+this.course.id+"/"+this.course.slug_name],mi.b):this.router.navigate(["/learn/course/"+this.course.id],mi.b)},e=>{this.docLayoutService.toast.showToast({message:e.error_message[0],type:"error"})}):this.backendService.request("/learn/v1/enrollments/"+this.course.id+"/"+i,"DELETE").subscribe(t=>{e.hide(),this.router.navigate(["/learn/mycourses"],mi.b)})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(s.h),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["self-unenroll-dialog"]],inputs:{course:"course",course_state:"course_state",form_control:"form_control",current_session:"current_session",showCheckbox:"showCheckbox"},outputs:{confirmationToggle:"confirmationToggle"},decls:5,vars:4,consts:[[1,"unenroll-dialog_wrapper"],["class","session-course-enrollment",4,"ngIf"],["class","course-enrollment",4,"ngIf"],["class","session-enrollment",4,"ngIf"],[3,"formControl","trigger",4,"ngIf"],[1,"session-course-enrollment"],[1,"enrollment-form"],[3,"inputFormControl","label","name","value","subtitle","checked",4,"ngIf"],[3,"inputFormControl","label","name","value","subtitle","checked"],[1,"course-enrollment"],[1,"session-enrollment"],[3,"formControl","trigger"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,xl,9,7,"div",1),c.dd(2,Dl,3,3,"div",2),c.dd(3,Ol,3,3,"div",3),c.dd(4,El,4,4,"ui-input-checkbox",4),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",t.showCourseOrSesionSelection),c.Mb(1),c.Dc("ngIf","course_unenrollment"===t.unenrollment_type&&!t.showCourseOrSesionSelection),c.Mb(1),c.Dc("ngIf","session_unenrollment"===t.unenrollment_type&&!t.showCourseOrSesionSelection),c.Mb(1),c.Dc("ngIf",t.showCheckbox))},directives:[Ae.p,Ke.y,Ke.p,Ke.q,jn.a,b.Kb,Ke.o,Ke.f,b.Tb],pipes:[E.b],encapsulation:2}),e})(),Ml=(()=>{class e{constructor(e,t,i,s){this.router=e,this.pageService=t,this.backendService=i,this.docLayoutService=s,this.chapterMustBeTracked=!0,this._buttonAdded=!1}get buttonAdded(){return this._buttonAdded}set buttonAdded(e){this._buttonAdded=e}initDependencies(e,t,i){this.course=e,this.selfUnenrollForm=i,this.chapterMustBeTracked=t}getSelfUnenrollmentActionButton(){if(void 0===this.course)return;let e=E.a.t("course","_SELF_UNSUBSCRIBE");return this.current_session&&this.current_session.is_enrolled&&this.course.session_self_unenrollment_enabled&&(e=E.a.t("standard","Unenroll from this session")),{properties:{icons:["account","block-alt"],tooltipText:e},onClick:()=>{this.openSelfUnenrollmentDialog()},key:"unenrollment"}}addSelfUnenrollmentButton(){if(this.buttonAdded)return;const e=this.getSelfUnenrollmentActionButton();if(!e)return;let t=[];t.push(e),t=[...t,...this.docLayoutService.getDocLayoutConfig().actionButtons.actionButtons],this.docLayoutService.actionButtons.setActionButtons(t),this._buttonAdded=!0}removeSelfUnenrollmentButton(){const e=this.docLayoutService.getDocLayoutConfig().actionButtons.actionButtons,t=e.map(e=>e.key).indexOf("unenrollment");-1!==t&&(e.splice(t,1),this.docLayoutService.actionButtons.setActionButtons(e),this._buttonAdded=!1)}setCurrentSession(e){this.current_session=e}openSelfUnenrollmentDialog(){let e;this.pageService.dialog.open({width:435,height:this.course.can_self_unenroll&&this.current_session&&this.current_session.is_enrolled?320:250,title:E.a.t("course","Unenrollment"),content:{params:{course:this.course,form_control:this.selfUnenrollForm.controls.enrollment_type,current_session:this.current_session},component:Pl},type:"confirmation",show_confirmation_check:!0,confirmation_check_text:E.a.t("standard","Yes, I want to proceed"),overlayClick:!0,actions:[{type:"cancel",properties:{text:E.a.t("standard","_CANCEL"),handler:e=>{e.close()}}},{type:"normal",properties:{text:E.a.t("standard","Confirm")},handler:t=>{e=t.dynamicComponents.form_control?t.dynamicComponents.form_control.value:t.dynamicComponents.unenrollment_type,t.content="<ui-spinner></ui-spinner>",t.actions=[],t.show_confirmation_check=!1,this.chapterMustBeTracked=!1;let i=o.a.getInstance().id;"session_unenrollment"===e?this.backendService.request("/learn/v1/enrollment/"+this.course.id+"/"+i+"/session/"+this.current_session.id,"DELETE").subscribe(e=>{t.close(),new RegExp("^/learn/course/\\d+$").test(this.router.url)?this.router.navigate(["/learn/course/"+this.course.id+"/"+this.course.slug_name],mi.b):this.router.navigate(["/learn/course/"+this.course.id],mi.b)},e=>{this.docLayoutService.toast.showToast({message:e.error_message[0],type:"error"})}):this.backendService.request("/learn/v1/enrollments/"+this.course.id+"/"+i,"DELETE").subscribe(e=>{t.close(),this.router.navigate(["/learn/mycourses"],mi.b)})}}]})}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h),c.nc(O.a),c.nc(S.a),c.nc(M.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var Al=i("920G"),Ll=i("/kCD"),jl=i("4P8L"),Fl=i("ZOB2"),Rl=i("M9jS"),Nl=i("jg0+"),Ul=i("7M0w"),ql=i("384c"),zl=i("aEIV"),Vl=i("ajSx"),Bl=i("3QLk"),Gl=i("YbcG");function $l(e,t){1&e&&(c.jc(0,"span"),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.gd(c.xc(2,1,"Instructor:")))}const Hl=function(){return{category:"course"}};function Yl(e,t){1&e&&(c.jc(0,"span"),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd("",c.yc(2,1,"_THEACER_LIST",c.Hc(4,Hl)),":"))}function Wl(e,t){1&e&&(c.jc(0,"span"),c.fd(1,","),c.ic())}function Ql(e,t){if(1&e&&(c.jc(0,"p"),c.jc(1,"span",12),c.fd(2),c.ic(),c.dd(3,Wl,2,0,"span",9),c.ic()),2&e){const e=t.$implicit,i=t.index,s=c.vc(2);c.Mb(2),c.gd(e.name),c.Mb(1),c.Dc("ngIf",i<s.course.instructors.length-1)}}function Kl(e,t){if(1&e&&(c.jc(0,"li"),c.dd(1,$l,3,3,"span",9),c.dd(2,Yl,3,5,"span",9),c.dd(3,Ql,4,2,"p",11),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",1==e.course_instructors.length),c.Mb(1),c.Dc("ngIf",e.course_instructors.length>1),c.Mb(1),c.Dc("ngForOf",e.course_instructors)}}function Xl(e,t){if(1&e&&(c.jc(0,"li"),c.jc(1,"p"),c.fd(2),c.wc(3,"t"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.id(" ",c.xc(3,2,"Language:")," ",e.course_language," ")}}function Jl(e,t){if(1&e&&(c.jc(0,"li"),c.jc(1,"p"),c.fd(2),c.wc(3,"t"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.id("",c.xc(3,2,"Duration:")," ",e.course_duration,"")}}function Zl(e,t){if(1&e){const e=c.kc();c.jc(0,"li"),c.jc(1,"rating",13),c.rc("rate",function(t){c.Uc(e);const i=c.vc();return i.rateChange(t,i.course.id)}),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("enable_voting",e.courseRating.enable_voting)("voter",e.courseRating.voter)("value",e.courseRating.value)("mode",e.courseRating.mode)("show_value",!0)("size",e.courseRating.size)("color",e.courseRating.color)}}function ed(e,t){if(1&e){const e=c.kc();c.jc(0,"div",14),c.jc(1,"div",1),c.jc(2,"div",2),c.jc(3,"div",3),c.jc(4,"tabs",15),c.rc("onChange",function(t){return c.Uc(e),c.vc().tabChange(t)}),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(4),c.ad(e.tabsParams.stlye),c.Dc("panels",e.tabsParams.panels)("content_background","bg-white")("innerContentBackground",e.innerContentBackground)}}const td=function(e){return{"background-image":e}},id=function(e){return{hidden:e}};let sd=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this._backendService=e,this.el=t,this._formatServ=i,this.router=s,this.route=n,this.pageService=a,this.changeDetector=o,this.location=r,this.visible_sessions=[],this.innerContentBackground="bg-white"}ngOnInit(){this.sortData(),this.courseRating={enable_voting:this.course.can_rate,value:this.course_rating,mode:"five_stars",show_value:!0,size:15,color:"rgb(244,196,0)"},this.tabsParams&&this.tabsParams.panels.filter(e=>e.content.component==zl.a).length&&(this.innerContentBackground="bg-grey-superlight"),this.course_duration=this._formatServ.getDurationHours(+this.course_duration,"seconds"),this.course_instructors&&(this.course_instructors=this.course_instructors.map(e=>({instructor_id:e.instructor_id,avatar_url:e.avatar_url,name:this.parseName(e.firstname,e.lastname)})))}rateChange(e,t){this.courseRating.enable_voting=!1,this._backendService.request("/learn/v1/courses/"+t+"/rating","POST",{rating:e}).subscribe()}ngOnChanges(e){e&&(this.sortData(),this.initTabs())}sortData(){this.course&&(this.thumbnailImage=Object(ql.i)(this.course.thumbnail)||"",this.course_type=this.course.type,this.course_name=this.course.name,this.course_rating=this.course.current_rating,this.course_instructors=this.course.instructors,this.course_language=this.course.lang_code,this.course_duration=this.course.duration,this.course_description=this.course.description,this.course_training_materials=this.course.flat_los,this.course_additional_information=this.course.additional_fields,this.course_sessions=this.course.sessions)}tabChange(e){e.content.component&&e.content.component==zl.a?(e.tabsCmp.innerContentBackground="bg-grey-superlight",this.changeDetector.detectChanges()):(e.tabsCmp.innerContentBackground="bg-white",this.changeDetector.detectChanges())}parseName(e,t){return t?e.charAt(0)+"."+t:e}initTabs(){this.visible_sessions=[],this.course_sessions&&this.course_sessions.forEach(e=>{e.enrolled.is_enrolled&&this.visible_sessions.push(e)});let e,t=0;if(this.course_additional_information.forEach(e=>{void 0!==e.value&&""!==e.value&&null!==e.value&&t++}),e="elearning"==this.course_type?[{tab:{title:E.a.t("standard","About this course"),content:`<div class="tabs-description"> ${this.course_description} </div>`},field:this.course_description},{tab:{title:E.a.t("course","Content"),content:{params:{panels:Object(Bl.c)(this.course_training_materials,this.course_type)},component:zl.a}},field:this.course_training_materials}]:"webinar"==this.course_type?[{tab:{title:E.a.t("dashboard","Sessions"),content:{params:{panels:Object(Bl.d)(this.visible_sessions,this.course_type)},component:zl.a}},field:this.visible_sessions},{tab:{title:E.a.t("standard","About this webinar"),content:`<div class="tabs-description"> ${this.course_description} </div>`},field:this.course_description},{tab:{title:E.a.t("course","Content"),content:{params:{panels:Object(Bl.c)(this.course_training_materials,this.course_type)},component:zl.a}},field:this.course_training_materials}]:[{tab:{title:E.a.t("dashboard","Sessions"),content:{params:{panels:Object(Bl.d)(this.visible_sessions,this.course_type)},component:zl.a}},field:this.visible_sessions},{tab:{title:E.a.t("course","About this classroom"),content:`<div class="tabs-description"> ${this.course_description} </div>`},field:this.course_description},{tab:{title:E.a.t("course","Content"),content:{params:{panels:Object(Bl.c)(this.course_training_materials,this.course_type)},component:zl.a}},field:this.course_training_materials}],0!==t){const t={tab:{title:E.a.t("webinar","Additional information"),content:{params:{additional_information:this.course_additional_information,removeEmpty:!0,instructors:this.course.instructors,courseData:this.course},component:Vl.a}},field:this.course_additional_information};e.push(t)}this.tabsParams={panels:Object(Bl.e)(e),style:""}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(c.o),c.dc(ti.b),c.dc(s.h),c.dc(s.a),c.dc(O.a),c.dc(c.i),c.dc(Ae.k))},e.\u0275cmp=c.Xb({type:e,selectors:[["course-waiting-list"]],inputs:{course:"course",tabsParams:"tabsParams"},features:[c.Kb],decls:16,vars:12,consts:[[1,"course-head","bg-white"],[1,"mdl-wrapper"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],[1,"course-head-image",3,"ngStyle"],[1,"zmdi","zmdi-image-alt","text-white",3,"ngClass"],[1,"course-head-content"],[1,"title"],[1,"course-info"],[4,"ngIf"],["class","course-tabs",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"instructor-title","text-main"],[3,"enable_voting","voter","value","mode","show_value","size","color","rate"],[1,"course-tabs"],[3,"panels","content_background","innerContentBackground","onChange"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.jc(3,"div",3),c.jc(4,"div",4),c.ec(5,"i",5),c.ic(),c.jc(6,"div",6),c.jc(7,"h2",7),c.fd(8),c.ic(),c.jc(9,"div",8),c.jc(10,"ul"),c.dd(11,Kl,4,3,"li",9),c.dd(12,Xl,4,4,"li",9),c.dd(13,Jl,4,4,"li",9),c.dd(14,Zl,2,7,"li",9),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.dd(15,ed,5,5,"div",10)),2&e&&(c.Mb(4),c.Dc("ngStyle",c.Ic(8,td,"url("+t.thumbnailImage+")")),c.Mb(1),c.Dc("ngClass",c.Ic(10,id,null==t.thumbnailImage?null:t.thumbnailImage.length)),c.Mb(3),c.gd(t.course_name),c.Mb(3),c.Dc("ngIf",t.course_instructors&&0!=t.course_instructors.length),c.Mb(1),c.Dc("ngIf",t.course_language),c.Mb(1),c.Dc("ngIf",t.course_duration),c.Mb(1),c.Dc("ngIf",void 0!==t.course_rating),c.Mb(1),c.Dc("ngIf",t.tabsParams))},directives:[Ae.q,Ae.n,Ae.p,Ae.o,Gl.a,vn.a],pipes:[E.b],encapsulation:2}),e})();var nd=i("VdKp"),ad=i("9crc"),od=i("tk/3"),rd=i("D6+O"),cd=i("9ls6"),ld=i("Vqln");let dd=(()=>{class e{constructor(e){this.backendService=e}updateUserEmail(e){return this.backendService.request(`manage/v1/user/${o.a.getInstance().id}`,"PUT",e)}send2faTokenToEmail(){return this.backendService.request("/manage/v1/2fa/emails","POST")}validateAndSignCourse(e,t){return this.backendService.request(`/course/v1/courses/${e}/sign`,"POST",t)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var ud=i("0XDt"),hd=i("l5mm"),pd=i("JX91"),md=i("GJmQ");function gd(e,t){if(1&e&&(c.ec(0,"div",2),c.wc(1,"t")),2&e){const e=c.vc();c.Dc("innerHTML",c.xc(1,1,e.description),c.Vc)}}let bd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["recovery-key-dialog"]],inputs:{description:"description",recoveryKey:"recoveryKey"},decls:3,vars:2,consts:[[3,"innerHTML",4,"ngIf"],[1,"recovery-key","text-grey-mid","bolded"],[3,"innerHTML"]],template:function(e,t){1&e&&(c.dd(0,gd,2,3,"div",0),c.jc(1,"div",1),c.fd(2),c.ic()),2&e&&(c.Dc("ngIf",t.description),c.Mb(2),c.gd(t.recoveryKey))},directives:[Ae.p],pipes:[E.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}  .confirmation-checkbox{margin-bottom:15px}.recovery-key[_ngcontent-%COMP%]{margin-top:30px;font-size:23px;text-align:center}"],changeDetection:0}),e})();const fd=function(){return{category:"esignature"}};function vd(e,t){1&e&&(c.hc(0),c.jc(1,"div",10),c.fd(2),c.wc(3,"t"),c.ic(),c.gc()),2&e&&(c.Mb(2),c.hd(" ",c.yc(3,1,"Verify your Identity via Authenticator App",c.Hc(4,fd))," "))}function _d(e,t){1&e&&(c.hc(0),c.jc(1,"span",11),c.fd(2),c.wc(3,"t"),c.ic(),c.gc()),2&e&&(c.Mb(2),c.hd(" ",c.yc(3,1,"To complete this course, please enter the 6-digit verification code that is shown in the app.",c.Hc(4,fd))," "))}const wd=function(){return{category:"mobile"}};function yd(e,t){1&e&&(c.hc(0),c.jc(1,"div",10),c.fd(2),c.wc(3,"t"),c.ic(),c.gc()),2&e&&(c.Mb(2),c.hd(" ",c.yc(3,1,"Enter your recovery key",c.Hc(4,wd))," "))}function Cd(e,t){1&e&&(c.hc(0),c.jc(1,"span",11),c.fd(2),c.wc(3,"t"),c.ic(),c.ec(4,"br"),c.jc(5,"span",11),c.fd(6),c.wc(7,"t"),c.ic(),c.gc()),2&e&&(c.Mb(2),c.hd(" ",c.yc(3,2,"We asked you to save your emergency recovery key when you enabled the authenticator app.",c.Hc(8,fd))," "),c.Mb(4),c.hd(" ",c.yc(7,5,"Please enter this key to continue with the course completion.",c.Hc(9,fd))," "))}function Sd(e,t){1&e&&(c.hc(0),c.jc(1,"div",10),c.fd(2),c.wc(3,"t"),c.ic(),c.gc()),2&e&&(c.Mb(2),c.hd(" ",c.yc(3,1,"Verify your Identity via Email",c.Hc(4,fd))," "))}const Td=function(e){return{category:"esignature",email:e}};function kd(e,t){if(1&e&&(c.hc(0),c.fd(1),c.wc(2,"t"),c.gc()),2&e){const e=c.vc(3);c.Mb(1),c.hd(" ",c.yc(2,1,"An email has been sent to {email}. Please enter the 6-digit verification code that has been sent to you at your email address.",c.Ic(4,Td,e.userEmail))," ")}}const Id=function(){return{category:"standard"}};function xd(e,t){1&e&&(c.hc(0),c.fd(1),c.wc(2,"t"),c.gc()),2&e&&(c.Mb(1),c.hd(" ",c.yc(2,1,"An email has been sent.Please enter the 6-digit verification code that has been sent to you at your email address.",c.Hc(4,Id))," "))}function Dd(e,t){if(1&e&&(c.jc(0,"span",11),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.hd(" ",c.yc(2,1,"An email has been sent.Please enter the 6-digit verification code that has been sent to you at your email address.",c.Ic(4,Td,e.userEmail))," ")}}function Od(e,t){if(1&e&&(c.hc(0),c.jc(1,"span",11),c.dd(2,kd,3,6,"ng-container",3),c.dd(3,xd,3,5,"ng-container",3),c.ic(),c.dd(4,Dd,3,6,"span",12),c.gc()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("ngIf",e.isEmailConfigured),c.Mb(1),c.Dc("ngIf",!e.isEmailConfigured),c.Mb(1),c.Dc("ngIf",!e.isEmailConfigured)}}function Ed(e,t){if(1&e){const e=c.kc();c.hc(0),c.jc(1,"span",13),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.viewState=t.viewStateEnum.RECOVERYKEY}),c.fd(2),c.wc(3,"t"),c.ic(),c.gc()}2&e&&(c.Mb(2),c.hd(" ",c.yc(3,1,"I do not have an OTP",c.Hc(4,wd))," "))}function Pd(e,t){if(1&e){const e=c.kc();c.hc(0),c.jc(1,"span",13),c.rc("click",function(){return c.Uc(e),c.vc(2).contactYourAdministrator()}),c.fd(2),c.wc(3,"t"),c.ic(),c.gc()}2&e&&(c.Mb(2),c.hd(" ",c.yc(3,1,"I cannot find my recovery key",c.Hc(4,wd))," "))}function Md(e,t){if(1&e&&(c.jc(0,"span"),c.fd(1),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.hd(" (",e.resendPasswordRemainingSecondsFormatted,") ")}}const Ad=function(e){return{disabled:e}},Ld=function(){return{category:"course"}};function jd(e,t){if(1&e){const e=c.kc();c.hc(0),c.jc(1,"span",14),c.rc("click",function(){return c.Uc(e),c.vc(2).resendOtpPassword()}),c.fd(2),c.wc(3,"t"),c.dd(4,Md,2,1,"span",3),c.ic(),c.gc()}if(2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngClass",c.Ic(6,Ad,!e.resendPasswordEnabled)),c.Mb(1),c.hd(" ",c.yc(3,3,"Resend the One Time Password",c.Hc(8,Ld))," "),c.Mb(2),c.Dc("ngIf",e.resendPasswordRemainingSeconds>0)}}function Fd(e,t){if(1&e){const e=c.kc();c.jc(0,"span",15),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.viewState=t.viewStateEnum.AUTHENTICATORAPP}),c.fd(1),c.wc(2,"t"),c.ic()}2&e&&(c.Mb(1),c.hd(" ",c.yc(2,1,"Use authenticator app",c.Hc(4,fd))," "))}function Rd(e,t){if(1&e){const e=c.kc();c.jc(0,"span",15),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.viewState=t.viewStateEnum.EMAIL}),c.fd(1),c.wc(2,"t"),c.ic()}2&e&&(c.Mb(1),c.hd(" ",c.yc(2,1,"Use email",c.Hc(4,fd))," "))}function Nd(e,t){if(1&e&&(c.jc(0,"div",1),c.jc(1,"div",2),c.dd(2,vd,4,5,"ng-container",3),c.dd(3,_d,4,5,"ng-container",3),c.dd(4,yd,4,5,"ng-container",3),c.dd(5,Cd,8,10,"ng-container",3),c.dd(6,Sd,4,5,"ng-container",3),c.dd(7,Od,5,3,"ng-container",3),c.ic(),c.ec(8,"textfield",4),c.jc(9,"div",5),c.dd(10,Ed,4,5,"ng-container",3),c.dd(11,Pd,4,5,"ng-container",3),c.dd(12,jd,5,9,"ng-container",3),c.ic(),c.jc(13,"div",6),c.dd(14,Fd,3,5,"span",7),c.dd(15,Rd,3,5,"span",7),c.jc(16,"div",8),c.ec(17,"rectangular-button",9),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("ngIf",e.isAuthenticatorAppEnabled&&e.currentViewState===e.viewStateEnum.AUTHENTICATORAPP),c.Mb(1),c.Dc("ngIf",e.isAuthenticatorAppEnabled&&e.currentViewState===e.viewStateEnum.AUTHENTICATORAPP),c.Mb(1),c.Dc("ngIf",e.isAuthenticatorAppEnabled&&e.currentViewState===e.viewStateEnum.RECOVERYKEY),c.Mb(1),c.Dc("ngIf",e.isAuthenticatorAppEnabled&&e.currentViewState===e.viewStateEnum.RECOVERYKEY),c.Mb(1),c.Dc("ngIf",e.isEmailAuthenticationEnabled&&e.currentViewState===e.viewStateEnum.EMAIL),c.Mb(1),c.Dc("ngIf",e.isEmailAuthenticationEnabled&&e.currentViewState===e.viewStateEnum.EMAIL),c.Mb(1),c.Dc("type",e.signContentInputs[e.currentViewState].type)("label",e.signContentInputs[e.currentViewState].label)("floating_label",e.signContentInputs[e.currentViewState].floating_label)("inputFormControl",e.signContentInputs[e.currentViewState].inputFormControl),c.Mb(2),c.Dc("ngIf",e.currentViewState===e.viewStateEnum.AUTHENTICATORAPP),c.Mb(1),c.Dc("ngIf",e.currentViewState===e.viewStateEnum.RECOVERYKEY),c.Mb(1),c.Dc("ngIf",e.currentViewState===e.viewStateEnum.EMAIL),c.Mb(2),c.Dc("ngIf",e.isAuthenticatorAppEnabled&&(e.currentViewState===e.viewStateEnum.RECOVERYKEY||e.currentViewState===e.viewStateEnum.EMAIL)),c.Mb(1),c.Dc("ngIf",e.isEmailAuthenticationEnabled&&e.isEmailConfigured&&e.currentViewState===e.viewStateEnum.AUTHENTICATORAPP),c.Mb(2),c.Dc("properties",e.signContentInputs[e.currentViewState].submitButton.properties)("formInstance",e.signContentInputs[e.currentViewState].inputFormControl)("click",e.signContentInputs[e.currentViewState].submitButton.onClick)}}var Ud=function(e){return e.AUTHENTICATORAPP="authenticatorapp",e.RECOVERYKEY="recoverykey",e.EMAIL="email",e}({});let qd=(()=>{class e extends Uc.a{constructor(e,t,i,s,n){super(),this.signViewerService=e,this.pageService=t,this.docLayoutService=i,this.store$=s,this.changeDetector=n,this.completed=new c.q,this.viewStateEnum=Ud,this.localStorage=ki.a.getInstance(),this.resendPasswordEnabled=!0,this.resendPasswordRemainingSeconds=0,this.sessionInstance=o.a.getInstance(),this.eSignatureSettings=x.b.getInstance().getPluginSettings("EsignatureApp"),this.isAuthenticatorAppEnabled=this.eSignatureSettings&&!!this.eSignatureSettings.auth_types.filter(e=>e.type===String(this.viewStateEnum.AUTHENTICATORAPP)&&e.enabled).length,this.isEmailAuthenticationEnabled=this.eSignatureSettings&&!!this.eSignatureSettings.auth_types.filter(e=>e.type===String(this.viewStateEnum.EMAIL)&&e.enabled).length,this.isAuthenticatorAppConfigured=!!this.sessionInstance.authenticatorapp_pair_date,this.isEmailConfigured=!!this.sessionInstance.email,this.userEmail=this.sessionInstance.email,this.signContentInputs={[this.viewStateEnum.AUTHENTICATORAPP]:{type:Xe.a.NUMBER,label:E.a.t("two_factor_auth","One Time Password"),floating_label:!0,inputFormControl:new Ke.e("",Ke.x.compose([Ke.x.required,Ke.x.maxLength(6),Ke.x.minLength(6)])),submitButton:{properties:{text:E.a.t("esignature","Complete the course"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>this.validateAndSignCourse(this.signContentInputs[this.viewStateEnum.AUTHENTICATORAPP].inputFormControl.value,this.viewStateEnum.AUTHENTICATORAPP)}},[this.viewStateEnum.RECOVERYKEY]:{type:Xe.a.TEXT,label:E.a.t("esignature","Recovery Key"),floating_label:!0,inputFormControl:new Ke.e(null,[Ke.x.required,ud.a.authenticatorappRecoveryKey(),Ke.x.minLength(16),Ke.x.maxLength(16)]),submitButton:{properties:{text:E.a.t("esignature","Validate recovery key"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>this.validateAndSignCourse(this.signContentInputs[this.viewStateEnum.RECOVERYKEY].inputFormControl.value,this.viewStateEnum.RECOVERYKEY)}},[this.viewStateEnum.EMAIL]:{type:Xe.a.NUMBER,label:E.a.t("two_factor_auth","One Time Password"),floating_label:!0,inputFormControl:new Ke.e("",Ke.x.compose([Ke.x.required,Ke.x.maxLength(6),Ke.x.minLength(6)])),submitButton:{properties:{text:E.a.t("esignature","Complete the course"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>this.validateAndSignCourse(this.signContentInputs[this.viewStateEnum.EMAIL].inputFormControl.value,this.viewStateEnum.EMAIL)}}}}ngOnInit(){this.viewState=this.defaultViewState;const e=this.localStorage.get("time",0);e&&(this.resendPasswordTimer=e,this.resendPasswordRemainingSeconds=this.remainingSeconds,this.checkResendPassword())}get remainingSeconds(){return Math.floor(this.resendPasswordTimer-(new Date).getTime()/1e3)}get remainingSeccondsFormatted(){return`00:${this.resendPasswordRemainingSeconds.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}`}checkResendPassword(){this.resendPasswordEnabled=this.resendPasswordRemainingSeconds<=0,this.resendPasswordRemainingSecondsFormatted=this.remainingSeccondsFormatted,Object(hd.a)(1e3).pipe(Object(pd.a)(1),Object(bt.a)(this.ngUnsubscribe),Object(md.a)(e=>this.resendPasswordRemainingSeconds>0)).subscribe(e=>{this.resendPasswordRemainingSeconds=Math.floor(this.resendPasswordTimer-(new Date).getTime()/1e3),this.resendPasswordEnabled=this.resendPasswordRemainingSeconds<=0,this.resendPasswordRemainingSecondsFormatted=this.remainingSeccondsFormatted,this.changeDetector.markForCheck()})}resendOtpPassword(){this.resendPasswordEnabled=!1,this.signViewerService.send2faTokenToEmail().subscribe(()=>{this.resendPasswordTimer=(new Date).getTime()/1e3+60,this.localStorage.set("time",this.resendPasswordTimer),this.resendPasswordRemainingSeconds=this.remainingSeconds,this.checkResendPassword()},e=>{this.docLayoutService.toast.showToast({message:e.error.message.join(" "),type:"error"})})}sendOtpPasswordToEmail(){this.signViewerService.send2faTokenToEmail().subscribe(()=>{this.currentViewState=Ud.EMAIL,this.changeDetector.markForCheck()},e=>{this.docLayoutService.toast.showToast({message:e.error.message.join(" "),type:"error"})})}set viewState(e){this.currentViewState&&this.signContentInputs[this.currentViewState].inputFormControl.reset(),e===Ud.EMAIL&&this.isEmailConfigured?this.sendOtpPasswordToEmail():this.currentViewState=e}get defaultViewState(){return this.isAuthenticatorAppEnabled?!this.isAuthenticatorAppEnabled&&this.isEmailAuthenticationEnabled&&this.isEmailConfigured?Ud.EMAIL:Ud.AUTHENTICATORAPP:Ud.EMAIL}validateAndSignCourse(e,t){this.signViewerService.validateAndSignCourse(this.course.id,{[t===this.viewStateEnum.AUTHENTICATORAPP||t===this.viewStateEnum.EMAIL?"otp":"recovery_code"]:e,identifier:t===this.viewStateEnum.EMAIL?this.viewStateEnum.EMAIL:this.viewStateEnum.AUTHENTICATORAPP}).subscribe(e=>{this.store$.dispatch(ga.a.reloadCoursePlayer(this.course.id,this.currentChapter.id)),this.completed.emit(this.currentChapter.id),t===this.viewStateEnum.RECOVERYKEY&&this.pageService.dialog.open(this.saveRecoveryKeyDialogParams(e.data.recovery_code))},e=>{1004===e.code?(t===this.viewStateEnum.AUTHENTICATORAPP||t===this.viewStateEnum.EMAIL?this.signContentInputs[t].inputFormControl.setErrors({remote:e.error.message.join(" ")}):this.signContentInputs[this.viewStateEnum.RECOVERYKEY].inputFormControl.setErrors({remote:E.a.t("mobile","This recovery Key is not valid")}),this.changeDetector.markForCheck()):this.docLayoutService.toast.showToast({message:e.error.message.join(" "),type:"error"})})}saveRecoveryKeyDialogParams(e){return{width:460,height:300,title:E.a.t("mobile","Save New Emergency Recovery Key",{boldStart:"<b>",boldEnd:"</b>"}),content:{component:bd,params:{description:E.a.t("esignature","You have used your recovery key to complete this course. The recovery key can be used only once. Print, copy or write down this new recovery key without letting anyone see it."),recoveryKey:e}},type:"confirmation",show_confirmation_check:!0,confirmation_check_text:E.a.t("mobile","I saved the recovery key"),overlayClick:!1,top_padding_content:"0",actions:[{type:"normal",properties:{text:E.a.t("standard","Done")},handler:e=>{this.docLayoutService.toast.showToast({message:E.a.t("esignature","Recovery key created successfully"),type:"success"}),e.close()}}]}}get contactYourAdministratorDialogParams(){return{width:460,height:190,title:E.a.t("app7020","Contact your administrator",{boldStart:"<b>",boldEnd:"</b>"}),content:E.a.t("esignature","In order to proceed with the course completion, you must enter a valid One Time Password or a valid recovery key. If you are not able to find them, please contact your administrator."),type:"confirmation",show_confirmation_check:!1,overlayClick:!1,top_padding_content:"32px",actions:[{type:"cancel",properties:{text:E.a.t("standard","Close")},handler:e=>{e.close()}}]}}contactYourAdministrator(){this.pageService.dialog.open(this.contactYourAdministratorDialogParams)}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(dd),c.dc(O.a),c.dc(M.a),c.dc(v.d),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["sign-content"]],inputs:{course:"course",currentChapter:"currentChapter"},outputs:{completed:"completed"},features:[c.Lb([E.b,dd]),c.Jb],decls:1,vars:1,consts:[["class","sign-content-wrapper",4,"ngIf"],[1,"sign-content-wrapper"],[1,"sign-content-heading-wrapper"],[4,"ngIf"],[3,"type","label","floating_label","inputFormControl"],[1,"help-action-wrapper"],[1,"action-buttons-wrapper"],["class","button-text text-main",3,"click",4,"ngIf"],[1,"submit-button-wrapper"],[3,"properties","formInstance","click"],[1,"title-regular"],[1,"title-normal-regular"],["class","title-normal-regular",4,"ngIf"],[1,"help-action-label","subtitle-normal","text-main",3,"click"],[1,"help-action-label","subtitle-normal","text-main",3,"ngClass","click"],[1,"button-text","text-main",3,"click"]],template:function(e,t){1&e&&c.dd(0,Nd,18,18,"div",0),2&e&&c.Dc("ngIf",t.currentViewState)},directives:[Ae.p,_t.a,an.a,Ae.n],pipes:[E.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]{text-align:left}  .submit-button-wrapper .docebo-button{margin:0}.sign-content-heading-wrapper[_ngcontent-%COMP%]{margin-bottom:32px}.sign-content-heading-wrapper[_ngcontent-%COMP%]   .title-regular[_ngcontent-%COMP%]{font-size:18px;margin-bottom:5px}.sign-content-wrapper[_ngcontent-%COMP%]{width:600px}.sign-content-wrapper[_ngcontent-%COMP%]   .help-action-wrapper[_ngcontent-%COMP%]{position:relative;text-align:right;margin-top:-15px;margin-bottom:60px;z-index:1}.sign-content-wrapper[_ngcontent-%COMP%]   .help-action-wrapper[_ngcontent-%COMP%]   .help-action-label[_ngcontent-%COMP%]{cursor:pointer}.sign-content-wrapper[_ngcontent-%COMP%]   .help-action-wrapper[_ngcontent-%COMP%]   .help-action-label.disabled[_ngcontent-%COMP%]{cursor:default;opacity:.5;pointer-events:none}.sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{text-transform:uppercase;cursor:pointer}.router-outlet:not(.direction-rtl):not(.heracles-root)[_nghost-%COMP%]   .sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%], .router-outlet:not(.direction-rtl):not(.heracles-root)   [_nghost-%COMP%]   .sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%]{margin-left:auto}.router-outlet.direction-rtl:not(.heracles-root)[_nghost-%COMP%]   .sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%], .router-outlet.direction-rtl:not(.heracles-root)   [_nghost-%COMP%]   .sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%]{margin-right:auto}"],changeDetection:0}),e})();function zd(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",3),c.ec(2,"em",4),c.jc(3,"p",5),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"p",6),c.fd(7),c.wc(8,"async"),c.wc(9,"async"),c.ic(),c.jc(10,"p",7),c.fd(11),c.wc(12,"t"),c.ic(),c.ic(),c.gc()),2&e){const e=c.vc(4);c.Mb(4),c.hd(" ",c.xc(5,3,"You must complete")," "),c.Mb(3),c.hd(" ",e.getChapterNamesToComplete(c.xc(8,5,e.chapterNamesToComplete),c.xc(9,7,e.endObjectChapters))," "),c.Mb(4),c.hd(" ",c.xc(12,9,"in order to unlock this activity")," ")}}const Vd=function(){return{category:"course"}};function Bd(e,t){1&e&&(c.hc(0),c.jc(1,"div",3),c.ec(2,"em",8),c.jc(3,"p",9),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.gc()),2&e&&(c.Mb(4),c.hd(" ",c.yc(5,1,"The Authentication via OTP is not required",c.Hc(4,Vd))," "))}function Gd(e,t){if(1&e&&(c.hc(0),c.dd(1,zd,13,11,"ng-container",2),c.wc(2,"async"),c.dd(3,Bd,6,5,"ng-container",2),c.wc(4,"async"),c.gc()),2&e){const e=c.vc(3);c.Mb(1),c.Dc("ngIf",c.xc(2,2,e.chapterNamesToComplete).length),c.Mb(2),c.Dc("ngIf",!c.xc(4,4,e.chapterNamesToComplete).length)}}function $d(e,t){1&e&&(c.hc(0),c.jc(1,"div",3),c.ec(2,"em",8),c.jc(3,"p",9),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.gc()),2&e&&(c.Mb(4),c.hd(" ",c.yc(5,1,"The authentication via OTP is not yet available",c.Hc(4,Vd))," "))}function Hd(e,t){if(1&e&&(c.hc(0),c.dd(1,Gd,5,6,"ng-container",2),c.dd(2,$d,6,5,"ng-container",2),c.gc()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",e.isCourseElearning),c.Mb(1),c.Dc("ngIf",!e.isCourseElearning)}}function Yd(e,t){if(1&e){const e=c.kc();c.hc(0),c.jc(1,"sign-content",10),c.rc("completed",function(t){return c.Uc(e),c.vc(2).onChapterComplete(t)}),c.ic(),c.gc()}if(2&e){const e=c.vc(2);c.Mb(1),c.Dc("course",e.course)("currentChapter",e.currentChapter)}}function Wd(e,t){1&e&&(c.hc(0),c.jc(1,"div",3),c.ec(2,"em",8),c.jc(3,"p",9),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.gc()),2&e&&(c.Mb(4),c.hd(" ",c.yc(5,1,"The Authentication via OTP is not required",c.Hc(4,Vd))," "))}function Qd(e,t){if(1&e&&(c.hc(0),c.dd(1,Hd,3,2,"ng-container",2),c.dd(2,Yd,2,2,"ng-container",2),c.dd(3,Wd,6,5,"ng-container",2),c.gc()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",e.course.esignature_status===e.eSignatureStatus.LOCKED),c.Mb(1),c.Dc("ngIf",e.course.esignature_status===e.eSignatureStatus.PENDING),c.Mb(1),c.Dc("ngIf",e.course.esignature_status===e.eSignatureStatus.SIGNED)}}function Kd(e,t){1&e&&(c.hc(0),c.jc(1,"div",3),c.ec(2,"em",8),c.jc(3,"p",9),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.gc()),2&e&&(c.Mb(4),c.hd(" ",c.yc(5,1,"The Authentication via OTP is not required",c.Hc(4,Vd))," "))}function Xd(e,t){if(1&e&&(c.hc(0),c.dd(1,Kd,6,5,"ng-container",2),c.gc()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",e.course.esignature_status!==e.eSignatureStatus.SIGNED)}}let Jd=(()=>{class e extends Uc.a{constructor(e,t,i){super(),this.store$=e,this.router=t,this.translationPipe=i,this.completed=new c.q,this.eSignatureStatus=te.h,this.courseStatusTypeCompleted=String(te.d.COMPLETED)}ngOnInit(){this.chapterNamesToComplete=this.store$.pipe(Object(bt.a)(this.ngUnsubscribe),Object(v.p)(ie.a)),this.endObjectChapters=this.store$.pipe(Object(bt.a)(this.ngUnsubscribe),Object(v.p)(ie.g))}get isCourseElearning(){return this.course.type===String(te.e.ELEARNING)}getChapterNamesToComplete(e,t){const i=t.length?` ${this.translationPipe.transform(E.a.t("standard","or"))} `:", ";return e.join(i)}onChapterComplete(e){this.completed.emit(e)}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(v.d),c.dc(s.h),c.dc(E.b))},e.\u0275cmp=c.Xb({type:e,selectors:[["sign-viewer"]],inputs:{currentChapter:"currentChapter",chapters:"chapters",completionDate:"completionDate",course:"course"},outputs:{completed:"completed"},features:[c.Lb([E.b,dd]),c.Jb],decls:4,vars:2,consts:[[1,"course-state-ready"],[1,"mdl-grid","course-content-wrap"],[4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col"],[1,"zmdi","zmdi-lock-outline","zmdi-hc-5x"],[1,"title-normal-regular","text-grey-mid","course-completed-text"],[1,"text-grey-dark","title-normal-regular"],[1,"title-normal-regular","text-grey-mid"],[1,"zmdi","zmdi-alert-circle-o","zmdi-hc-5x"],[1,"title-normal-regular","text-grey-dark","course-completed-text"],[3,"course","currentChapter","completed"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.dd(2,Qd,4,3,"ng-container",2),c.dd(3,Xd,2,1,"ng-container",2),c.ic(),c.ic()),2&e&&(c.Mb(2),c.Dc("ngIf",t.course.status!==t.courseStatusTypeCompleted),c.Mb(1),c.Dc("ngIf",t.course.status===t.courseStatusTypeCompleted))},directives:[Ae.p,qd],pipes:[Ae.b,E.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}.sign-title[_ngcontent-%COMP%]{font-size:18px}.sign-description[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:24px}"],changeDetection:0}),e})();var Zd=i("yRWM");class eu{constructor(e,t,i,s){this.chapterTitle=e,this.launchParams=t,this.router=i,this.learningPlanId=s,this.platformInstance=k.b.getInstance(),this.launchParams=t,this.chapterTitle=e,this.learningPlanId=s}get contactYourAdministrator(){return{checklistTitle:Je.a.t("standard","Your training material cannot be created"),checklistSlateType:Zd.a.SAD004,checklistSubTitles:[Je.a.t("standard","This checklist is not available for you"),Je.a.t("mobile","If you need any help, please contact your Administrator")]}}get uponSendingSelf(){return{checklistTitle:Je.a.t("standard","Your training material has been completed"),checklistSlateType:Zd.a.HAPPY006,checklistSubTitles:[Je.a.t("standard","Manage your checklist"),Je.a.t("standard","Completed on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.start_date))})],checklistButton:{properties:{text:Je.a.t("standard","View Checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get completedBySomeoneElseSelf(){return{checklistTitle:Je.a.t("standard","Your training material has been completed"),checklistSlateType:Zd.a.HAPPY006,checklistSubTitles:[Je.a.t("standard","Manage your checklist"),Je.a.t("standard","Completed on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.start_date))})],checklistButton:{properties:{text:Je.a.t("standard","View Checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get completedBySomeoneElseCustomUserOrManager(){return{checklistTitle:Je.a.t("standard","Your training material has been completed"),checklistSlateType:Zd.a.HAPPY006,checklistSubTitles:[Je.a.t("standard","Completed on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.start_date))})]}}get uponSendingCustomUserOrManager(){return{checklistTitle:Je.a.t("standard","Your training material has been completed"),checklistSlateType:Zd.a.HAPPY006,checklistSubTitles:[Je.a.t("standard","Completed on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.start_date))})]}}get selfMustComplete(){return{checklistTitle:this.chapterTitle,checklistSubTitles:[Je.a.t("standard","You still have to complete this training material. To do so, please fill this observation checklist"),Je.a.t("mobilerebranding","Created on {time}",{time:Object(Zt.d)(new Kt.a(this.launchParams.assignment.start_date))})],checklistButton:{properties:{text:Je.a.t("standard","Open the checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get uponConclusionSelfNoApprovalCompleted(){return{checklistTitle:Je.a.t("standard","Your checklist has been completed"),checklistSubTitles:[Je.a.t("standard","Manage your checklist"),Je.a.t("standard","Completed on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.completion_date))})],checklistSlateType:Zd.a.HAPPY006,checklistButton:{properties:{text:Je.a.t("standard","View Checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get uponConclusionSelfWaitingForApproval(){var e,t;return{checklistTitle:Je.a.t("standard","Your checklist has been sent to {fullname} for approval",{fullname:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Zd.a.HAPPY006,checklistSubTitles:[Je.a.t("standard","Manage your checklist"),Je.a.t("standard","Sent for approval on {date}",{date:Object(Zt.d)(new Kt.a(null===(t=null===(e=this.launchParams.assignment.approval)||void 0===e?void 0:e.last_attempt)||void 0===t?void 0:t.submission_date))})],checklistButton:{properties:{text:Je.a.t("standard","View Checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get uponConclusionSelfApproved(){return{checklistTitle:Je.a.t("standard","{approver} approved the observation checklist",{approver:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Zd.a.HAPPY006,checklistSubTitles:[Je.a.t("standard","Manage your checklist"),Je.a.t("standard","Approved on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.approval.last_attempt.approval_date))})],checklistButton:{properties:{text:Je.a.t("standard","View Checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get uponConclusionSelfRejected(){return{checklistTitle:Je.a.t("standard","{approver} rejected the observation checklist",{approver:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Zd.a.SAD004,checklistSubTitles:[Je.a.t("standard","This checklist will still be available to you, allowing you to correct the responses you gave and read the notes that were added. Once corrected, you can submit again the checklist for approval."),Je.a.t("standard","Rejected on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.approval.last_attempt.approval_date))})],checklistButton:{properties:{text:Je.a.t("standard","Open the checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get uponConclusionManagerCustomUserNotified(){return{checklistTitle:Je.a.t("standard","{evaluator} has been notified to complete your checklist",{evaluator:this.platformInstance.getFullName(this.launchParams.assignment.evaluator,!0)}),checklistSlateType:Zd.a.HAPPY001,checklistSubTitles:[Je.a.t("standard","Notified on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.start_date))})]}}get uponConclusionManagerCustomUserCompleted(){return{checklistTitle:Je.a.t("standard","Your checklist has been completed by {evaluator}",{evaluator:this.platformInstance.getFullName(this.launchParams.assignment.evaluator,!0)}),checklistSlateType:Zd.a.HAPPY006,checklistSubTitles:[Je.a.t("standard","Completed on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.start_date))})]}}get uponConclusionManagerCustomUserWaitingForApproval(){return{checklistTitle:Je.a.t("standard","Your checklist has been sent to {fullname} for approval",{fullname:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Zd.a.HAPPY006,checklistSubTitles:[Je.a.t("standard","The checklist was completed by {evaluator}",{evaluator:this.platformInstance.getFullName(this.launchParams.assignment.evaluator,!0)}),Je.a.t("standard","Sent for approval on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.approval.last_attempt.submission_date))})]}}get uponConclusionManagerCustomUserRejected(){return{checklistTitle:Je.a.t("standard","{approver} rejected the observation checklist",{approver:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Zd.a.SAD004,checklistSubTitles:[Je.a.t("standard","The checklist was completed by {evaluator}. This checklist will still be available to the observer, allowing to correct the responses given and read the notes that were added. Once corrected, the observer can submit again the checklist for approval",{evaluator:this.platformInstance.getFullName(this.launchParams.assignment.evaluator,!0)}),Je.a.t("standard","Rejected on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.approval.last_attempt.approval_date))})]}}get uponConclusionManagerCustomUserApproved(){return{checklistTitle:Je.a.t("standard","{approver} approved the observation checklist",{approver:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Zd.a.HAPPY006,checklistSubTitles:[Je.a.t("standard","The checklist was completed by {evaluator}",{evaluator:this.platformInstance.getFullName(this.launchParams.assignment.evaluator,!0)}),Je.a.t("standard","Approved on {date}",{date:Object(Zt.d)(new Kt.a(this.launchParams.assignment.approval.last_attempt.approval_date))})]}}navigateToChecklist(){let e={context:"course"};this.learningPlanId&&(e=Object.assign(Object.assign({},e),{lp:this.learningPlanId})),this.router.navigate([`/otj/assignments/${this.launchParams.assignment.id}`,e]).then()}}var tu=function(e){return e.UPON_SENDING="assignment_created",e.UPON_CONCLUSION="assignment_completed",e}({}),iu=function(e){return e.TODO="todo",e.IN_PROGRESS="in_progress",e.NEW="new",e.COMPLETED="completed",e.REJECTED="rejected",e.APPROVED="approved",e}({}),su=function(e){return e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.NOT_STARTED="not_started",e}({}),nu=function(e){return e.SELF="self",e}({});function au(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",3),c.ec(2,"blankslate",4),c.ic(),c.gc()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("isVisible",!0)("type",e.currentOtjChecklistViewState.checklistSlateType)}}const ou=function(e){return{"title-size18":e}};function ru(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",5),c.fd(2),c.wc(3,"t"),c.ic(),c.gc()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngClass",c.Ic(4,ou,null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistSlateType)),c.Mb(1),c.hd(" ",c.xc(3,2,e.currentOtjChecklistViewState.checklistTitle)," ")}}function cu(e,t){if(1&e&&(c.jc(0,"div",8),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=t.$implicit;c.Mb(1),c.hd(" ",c.xc(2,1,e)," ")}}const lu=function(e){return{"rejected-checklist-width":e}};function du(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",6),c.dd(2,cu,3,3,"div",7),c.ic(),c.gc()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngClass",c.Ic(2,lu,(null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistSlateType)===e.blankSlateType.SAD004)),c.Mb(1),c.Dc("ngForOf",e.currentOtjChecklistViewState.checklistSubTitles)}}function uu(e,t){if(1&e){const e=c.kc();c.hc(0),c.jc(1,"rectangular-button",9),c.rc("click",function(){return c.Uc(e),c.vc(2).currentOtjChecklistViewState.checklistButton.properties.click()}),c.ic(),c.gc()}if(2&e){const e=c.vc(2);c.Mb(1),c.Dc("properties",e.currentOtjChecklistViewState.checklistButton.properties)("state","normal")("buttonType","submit")}}function hu(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",1),c.jc(2,"div",2),c.dd(3,au,3,2,"ng-container",0),c.dd(4,ru,4,6,"ng-container",0),c.dd(5,du,3,4,"ng-container",0),c.dd(6,uu,2,3,"ng-container",0),c.ic(),c.ic(),c.gc()),2&e){const e=c.vc();c.Mb(3),c.Dc("ngIf",null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistSlateType),c.Mb(1),c.Dc("ngIf",null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistTitle),c.Mb(1),c.Dc("ngIf",null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistSubTitles.length),c.Mb(1),c.Dc("ngIf",null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistButton)}}let pu=(()=>{class e extends Uc.a{constructor(e,t,i){super(),this.router=e,this.cdr=t,this.store$=i,this.completed=new c.q,this.blankSlateType=Zd.a}ngOnInit(){this.store$.pipe(Object(v.p)(ie.f),Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{var t,i;const s=new eu(e.current_chapter.name,this.launch_params,this.router,this.learning_plan_id),n=null===(i=null===(t=this.launch_params.assignment)||void 0===t?void 0:t.approval)||void 0===i?void 0:i.last_attempt;this.store$.pipe(Object(v.p)(ie.h),Object(bt.a)(this.ngUnsubscribe)).subscribe(t=>{var i,a,o,r;t?this.currentOtjChecklistViewState=s.contactYourAdministrator:(this.launch_params.lo_completion_type===tu.UPON_SENDING&&(e.current_chapter.status===su.COMPLETED&&(this.currentOtjChecklistViewState=this.launch_params.assignment.evaluation_type===nu.SELF?s.uponSendingSelf:s.uponSendingCustomUserOrManager),e.current_chapter.status!==su.COMPLETED&&this.completed.emit(e.current_chapter.id)),this.launch_params.lo_completion_type===tu.UPON_CONCLUSION&&(this.launch_params.assignment.evaluation_type!==nu.SELF&&((null===(i=this.launch_params.assignment)||void 0===i?void 0:i.approval)||(this.currentOtjChecklistViewState=e.current_chapter.status===su.COMPLETED&&this.launch_params.assignment.status!==iu.COMPLETED?s.completedBySomeoneElseCustomUserOrManager:e.current_chapter.status===su.COMPLETED&&this.launch_params.assignment.status===iu.COMPLETED?s.uponConclusionManagerCustomUserCompleted:s.uponConclusionManagerCustomUserNotified),(null===(a=this.launch_params.assignment)||void 0===a?void 0:a.approval)&&(e.current_chapter.status===su.COMPLETED&&(n.status===iu.APPROVED&&(this.currentOtjChecklistViewState=s.uponConclusionManagerCustomUserApproved),n.status!==iu.APPROVED&&(this.currentOtjChecklistViewState=s.completedBySomeoneElseCustomUserOrManager)),e.current_chapter.status!==su.COMPLETED&&(n.status===iu.NEW&&(this.currentOtjChecklistViewState=s.uponConclusionManagerCustomUserWaitingForApproval),n.status===iu.REJECTED&&(this.currentOtjChecklistViewState=s.uponConclusionManagerCustomUserRejected),this.launch_params.assignment.status===iu.TODO&&(this.currentOtjChecklistViewState=s.uponConclusionManagerCustomUserNotified)))),this.launch_params.assignment.evaluation_type===nu.SELF&&((null===(o=this.launch_params.assignment)||void 0===o?void 0:o.approval)||(this.currentOtjChecklistViewState=e.current_chapter.status===su.COMPLETED&&this.launch_params.assignment.status!==iu.COMPLETED?s.completedBySomeoneElseSelf:e.current_chapter.status===su.COMPLETED&&this.launch_params.assignment.status===iu.COMPLETED?s.uponConclusionSelfNoApprovalCompleted:s.selfMustComplete),(null===(r=this.launch_params.assignment)||void 0===r?void 0:r.approval)&&(e.current_chapter.status===su.COMPLETED&&(n.status===iu.APPROVED&&(this.currentOtjChecklistViewState=s.uponConclusionSelfApproved),n.status!==iu.APPROVED&&(this.currentOtjChecklistViewState=s.completedBySomeoneElseSelf)),e.current_chapter.status!==su.COMPLETED&&(this.currentOtjChecklistViewState=n.status===iu.NEW?s.uponConclusionSelfWaitingForApproval:n.status===iu.REJECTED?s.uponConclusionSelfRejected:s.selfMustComplete)))))}),this.cdr.markForCheck()})}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(c.i),c.dc(v.d))},e.\u0275cmp=c.Xb({type:e,selectors:[["otj-viewer"]],inputs:{launch_params:"launch_params",course_id:"course_id",learning_plan_id:"learning_plan_id"},outputs:{completed:"completed"},features:[c.Jb],decls:1,vars:1,consts:[[4,"ngIf"],[1,"otj-wrapper"],[1,"otj-content"],["id","otj-blankslate"],[3,"isVisible","type"],[1,"checklist-title",3,"ngClass"],[1,"checklist-subtitle-wrapper",3,"ngClass"],["class","checklist-subtitle",4,"ngFor","ngForOf"],[1,"checklist-subtitle"],[1,"otj-button",3,"properties","state","buttonType","click"]],template:function(e,t){1&e&&c.dd(0,hu,7,4,"ng-container",0),2&e&&c.Dc("ngIf",t.currentOtjChecklistViewState)},directives:[Ae.p,ld.a,Ae.n,Ae.o,an.a],pipes:[E.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}  .blank-slate-image{padding-bottom:0!important}.otj-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;min-height:510px}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]{align-self:center;max-width:420px}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .checklist-title[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-sm);font-weight:var(--hyd-typography-weight-semibold);font-size:var(--hyd-typography-size-xl);line-height:var(--hyd-typography-lineheight-sm)}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .checklist-title.title-size18[_ngcontent-%COMP%]{font-size:var(--hyd-typography-size-lg)}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .checklist-subtitle-wrapper[_ngcontent-%COMP%]{max-width:282px;margin:0 auto}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .checklist-subtitle-wrapper.rejected-checklist-width[_ngcontent-%COMP%]{max-width:443px}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .checklist-subtitle[_ngcontent-%COMP%]{padding-bottom:var(--hyd-spacing-sm);color:var(--hyd-color-typography-secondary);font-weight:var(--hyd-typography-weight-semibold);font-size:var(--hyd-typography-size-xs)}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .otj-button[_ngcontent-%COMP%]{display:block;padding-top:var(--hyd-typography-size-xxs)}"],changeDetection:0}),e})();var mu=i("M6VA");const gu=["iframe"];let bu=(()=>{class e{constructor(e,t,i){this.backendService=e,this.cd=t,this.userInteractionService=i,this.completed=new c.q,this.loaded=new c.q,this.baseStyle='\n        body{\n            font-family: "Open Sans", sans-serif;\n        }\n    '}ngOnInit(){this.wrapperSelector=document.querySelector(".chapter-viewer__wrapper"),this.current_chapter&&this.chapter_viewer&&this.chapter_viewer.launch_params.height?(this.iframeHeight=this.chapter_viewer.launch_params.height+"px",this.wrapperSelector.classList.add("no-min-height")):this.wrapperSelector&&(this.iframeHeight=this.wrapperSelector.clientHeight)}markAsCompleted(){this.current_chapter.status!==String(Bt.e.COMPLETED)&&this.completed.emit(this.current_chapter.id)}ngAfterViewChecked(){}ngAfterViewInit(){this.loaded.emit({height:this.iframeHeight}),this.iframe.nativeElement.addEventListener("load",()=>{this.iframeContentLoaded()})}iframeContentLoaded(){this.backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST").subscribe(e=>{if(e&&e.data&&e.data.acknowledge&&e.data.acknowledge.contents){this.hasContent=!0,this.cd.markForCheck();const t=this.iframe.nativeElement.contentWindow;t&&t.postMessage({action:"setHtmlContent",payload:{content:e.data.acknowledge.contents,customCss:[this.baseStyle,this.custom_css].join("")}},"*"),this.markAsCompleted(),this.trackLoad()}})}ngOnDestroy(){this.observableData&&this.observableData.unsubscribe()}trackLoad(){this.userInteractionService.track(Al.a.HTML_LOAD,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.HTML})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(c.i),c.dc(Al.c))},e.\u0275cmp=c.Xb({type:e,selectors:[["html-viewer"]],viewQuery:function(e,t){if(1&e&&c.md(gu,1),2&e){let e;c.Qc(e=c.sc())&&(t.iframe=e.first)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",custom_css:"custom_css",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:3,vars:4,consts:[[1,"html-viewer-wrapper"],["src","/public/vendor/htmlViewerContent.html","width","100%","allowfullscreen","",3,"hidden","height"],["iframe",""]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.ec(1,"iframe",1,2),c.ic()),2&e&&(c.cd("height",t.iframeHeight),c.Mb(1),c.Ec("height",t.iframeHeight),c.Dc("hidden",!t.hasContent))},styles:[".html-viewer-wrapper[_ngcontent-%COMP%] {\n      overflow-y: auto;\n      -webkit-overflow-scrolling: touch;\n      -webkit-transform: translate3d(0,0,0);\n    }"]}),e})();var fu=i("UQPH");let vu=(()=>{class e{constructor(e,t){this.backendService=e,this.userInteractionService=t,this.completed=new c.q,this.loaded=new c.q}urlLoad(){const e=new gt.a;return this.trackDownload(),this.backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST").subscribe(t=>{e.next(t.data.acknowledge.url),this.downloadViewerActive.next(!0),this.completed.emit(this.current_chapter.id)}),e.asObservable()}ngOnInit(){this.playerDownloadParams={config:{url:"",title:this.chapter_viewer.launch_params.filename,size:this.chapter_viewer.launch_params.filesize,description:this.current_chapter.description},download:()=>{const e=this.urlLoad();this.downloadableUrl=()=>e}}}ngAfterViewInit(){this.loaded.emit(!0)}trackDownload(){this.userInteractionService.track(Al.a.DOWNLOAD_DOWNLOAD,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.DOWNLOAD})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(Al.c))},e.\u0275cmp=c.Xb({type:e,selectors:[["download-viewer"]],inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",downloadViewerActive:"downloadViewerActive",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:2,vars:7,consts:[[3,"active","filename","filesize","description","url","download"]],template:function(e,t){1&e&&(c.jc(0,"player-download",0),c.rc("download",function(){return t.playerDownloadParams.download()}),c.wc(1,"async"),c.ic()),2&e&&c.Dc("active",c.xc(1,5,t.downloadViewerActive))("filename",t.playerDownloadParams.config.title)("filesize",t.playerDownloadParams.config.size)("description",t.playerDownloadParams.config.description)("url",t.downloadableUrl)},directives:[fu.a],pipes:[Ae.b],encapsulation:2}),e})();var _u=i("ZW3K");let wu=(()=>{class e{constructor(e,t,i){this.element=e,this._backendService=t,this.userInteractionService=i,this.completed=new c.q,this.loaded=new c.q,this.isAreadyTracked=!1}ngOnInit(){this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode===gi.d.LIGHTBOX&&this.element.nativeElement.querySelector(".slides-player__wrap").classList.add("lightbox")}changeSlide(e){const t={track:{bookmark:e.slide}};this.userInteractionService.track(Al.a.SLIDES_CHANGE_SLIDE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.SLIDES,slideNumber:e.slide}),this._backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST",t).subscribe(t=>{e.completed&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.slides.length-1==e.slide&&"completed"!==this.current_chapter.status&&this.emitCompleted()})}emitCompleted(){"completed"!==this.current_chapter.status&&this.completed.emit(this.current_chapter.id)}ngAfterViewInit(){this.loaded.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.o),c.dc(S.a),c.dc(Al.c))},e.\u0275cmp=c.Xb({type:e,selectors:[["slides-view"]],inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:1,vars:3,consts:[[3,"slides","bookmark","mode","changeSlide"]],template:function(e,t){1&e&&(c.jc(0,"slides-player",0),c.rc("changeSlide",function(e){return t.changeSlide(e)}),c.ic()),2&e&&c.Dc("slides",t.chapter_viewer.launch_params.slides)("bookmark",t.chapter_viewer.launch_params.bookmark)("mode",t.chapter_viewer.launch_params.mode)},directives:[_u.a],encapsulation:2}),e})();const yu=["iframe"];function Cu(e,t){if(1&e&&c.ec(0,"iframe",2,3),2&e){const e=c.vc();c.Ec("height",e.height),c.Dc("src",e.src,c.Wc)}}let Su=(()=>{class e{constructor(e,t,i,s,n){this._sanitizer=e,this.router=t,this._store=i,this.courseActions=s,this.userInteractionService=n,this.courseHasAutoplay=!1,this.loaded=new c.q,this.completed=new c.q,this.showIframe=!1}ngOnInit(){if(this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode)if("fullscreen"==this.chapter_viewer.launch_params.mode)window.location.href=this.chapter_viewer.launch_params.url,this.showIframe=!1;else if(this.chapter_viewer.launch_params&&"popup"==this.chapter_viewer.launch_params.mode){let e=window.open(this.chapter_viewer.launch_params.url),t=setInterval(()=>{if(e.closed||null===e){if(void 0!==this.course_id){const e=[`/learn/course/${this.course_id}/play/`];this.learning_plan_id&&e.push({lp:this.learning_plan_id}),this.courseHasAutoplay&&e.push({autoplay:0}),this.router.navigate(e)}else console.warn("No course ID was passed to the viewer, hence the redirect is not possible.");clearInterval(t)}},500);this.showIframe=!1}else this.src=this._sanitizer.bypassSecurityTrustResourceUrl(this.chapter_viewer.launch_params.url),this.showIframe=!0,window.addEventListener("message",e=>{this.callEventListener(e)});this.height=this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.height&&"lightbox"!=this.chapter_viewer.launch_params.mode?this.chapter_viewer.launch_params.height:"100%"}callEventListener(e){const t=e.data;t.target&&"dcd"===t.target&&t.status&&("completed"!==t.status&&"closed"!==t.status||(this.completed.emit(this.current_chapter.id),this.userInteractionService.track(Al.a.TINCAN_COMPLETE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.TINCAN})))}ngAfterViewInit(){this.loaded.emit(!0),this.userInteractionService.track(Al.a.TINCAN_LOAD,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.TINCAN})}ngOnDestroy(){window.removeEventListener("message",e=>{this.callEventListener(e)}),this.chapter_viewer&&"fullscreen"!==this.chapter_viewer.launch_params.mode&&this._store.dispatch(ga.a.reloadCoursePlayer(this.course_id,this.current_chapter.id))}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Pi.b),c.dc(s.h),c.dc(v.d),c.dc(ga.a),c.dc(Al.c))},e.\u0275cmp=c.Xb({type:e,selectors:[["tincan-viewer"]],viewQuery:function(e,t){if(1&e&&c.md(yu,1),2&e){let e;c.Qc(e=c.sc())&&(t.iframe=e.first)}},inputs:{current_chapter:"current_chapter",courseHasAutoplay:"courseHasAutoplay",chapter_viewer:"chapter_viewer",course_id:"course_id",learning_plan_id:"learning_plan_id"},outputs:{loaded:"loaded",completed:"completed"},decls:2,vars:1,consts:[["id","tincan-iframe-wrapper"],["width","100%","webkitallowfullscreen","","mozallowfullscreen","","allowfullscreen","","scrolling","auto",3,"height","src",4,"ngIf"],["width","100%","webkitallowfullscreen","","mozallowfullscreen","","allowfullscreen","","scrolling","auto",3,"height","src"],["iframe",""]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,Cu,2,2,"iframe",1),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",t.showIframe))},directives:[Ae.p],styles:["#tincan-iframe-wrapper[_ngcontent-%COMP%] {\n          -webkit-overflow-scrolling: touch;\n          overflow: scroll;\n          width: 100%;\n          height: 100%;\n          position: relative;\n      }\n      #tincan-iframe-wrapper[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%] {\n        min-height: 510px;\n      }"]}),e})();const Tu=["iframe"];function ku(e,t){if(1&e&&c.ec(0,"iframe",1,2),2&e){const e=c.vc();c.Ec("width",e.width),c.Ec("height",e.height),c.Dc("src",e.src,c.Wc)}}let Iu=(()=>{class e{constructor(e,t,i,s,n,a,o){this._sanitizer=e,this.router=t,this.activatedRoute=i,this._store=s,this.userInteractionService=n,this._backendService=a,this.http=o,this.width="100%",this.keepAliveInterval=null,this.courseHasAutoplay=!1,this.loaded=new c.q,this.completed=new c.q,this.showIframe=!1}ngOnInit(){if(this.chapter_viewer&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode)if("fullscreen"==this.chapter_viewer.launch_params.mode)window.location.href=this.chapter_viewer.launch_params.url,this.showIframe=!1;else if("popup"==this.chapter_viewer.launch_params.mode){let e=window.open(this.chapter_viewer.launch_params.url),t=setInterval(()=>{if(null===e||e.closed){if(void 0!==this.course_id){const e={},t=this.activatedRoute.snapshot.paramMap.get("lp");t&&(e.lp=t),this.courseHasAutoplay&&(e.autoplay=0),this.router.navigate(["/learn/course/"+this.course_id+"/play/",e],mi.b)}else console.warn("No course ID was passed to the viewer, hence the redirect is not possible.");clearInterval(t)}},500);this.showIframe=!1}else this.src=this._sanitizer.bypassSecurityTrustResourceUrl(this.chapter_viewer.launch_params.url),this.showIframe=!0;this.height=this.chapter_viewer&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.height&&"lighbox"!=this.chapter_viewer.launch_params.mode?this.chapter_viewer.launch_params.height:"100%"}ngAfterViewInit(){this.loaded.emit(!0),this.userInteractionService.track(Al.a.AICC_LOAD,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.AICC})}ngOnDestroy(){this.keepAliveInterval&&clearInterval(this.keepAliveInterval)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Pi.b),c.dc(s.h),c.dc(s.a),c.dc(v.d),c.dc(Al.c),c.dc(S.a),c.dc(od.b))},e.\u0275cmp=c.Xb({type:e,selectors:[["aicc-viewer"]],viewQuery:function(e,t){if(1&e&&c.md(Tu,1),2&e){let e;c.Qc(e=c.sc())&&(t.iframe=e.first)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",courseHasAutoplay:"courseHasAutoplay",course_id:"course_id"},outputs:{loaded:"loaded",completed:"completed"},decls:1,vars:1,consts:[["id","aicc-iframe",3,"width","height","src",4,"ngIf"],["id","aicc-iframe",3,"width","height","src"],["iframe",""]],template:function(e,t){1&e&&c.dd(0,ku,2,3,"iframe",0),2&e&&c.Dc("ngIf",t.showIframe)},directives:[Ae.p],styles:["#aicc-iframe[_ngcontent-%COMP%] {\n            min-height: 510px;\n        }"]}),e})();const xu=["iframe"];function Du(e,t){if(1&e&&c.ec(0,"iframe",2,3),2&e){const e=c.vc();c.Ec("height",e.height),c.Dc("src",e.src,c.Wc)}}const Ou=function(){return{"padding-top":"25%"}};function Eu(e,t){1&e&&(c.jc(0,"div",4),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Dc("ngStyle",c.Hc(4,Ou)),c.Mb(1),c.hd(" ",c.xc(2,2,"You have completed the SCORM.")," "))}let Pu,Mu=!0,Au=(()=>{class e{constructor(e,t,i,s,n){this._sanitizer=e,this.router=t,this.activatedRoute=i,this._store=s,this.userInteractionService=n,this.isCompleted=!1,this.showIframe=!1,this.courseHasAutoplay=!1,this.completed=new c.q,this.loaded=new c.q,this.next=new c.q}showScormIframe(){return!this.isCompleted&&this.showIframe}showScormMessage(){return this.isCompleted&&this.showIframe}openScormInNewWindow(){void 0===Pu||!0===Pu.closed?(Pu=window.open(this.chapter_viewer.launch_params.url),Pu.onload=()=>{Pu.onunload=()=>{window.postMessage({target:"dcd",status:"closed"},"*")}}):(clearInterval(this.externalWindowInterval),Pu.location.replace(this.chapter_viewer.launch_params.url)),this.externalWindowInterval=setInterval(()=>{if(Pu.closed||null===Pu){if(void 0!==this.course_id){clearInterval(this.externalWindowInterval);const e={},t=this.activatedRoute.snapshot.paramMap.get("lp");t&&(e.lp=t),this.courseHasAutoplay&&(e.autoplay=0),this.router.navigate(["/learn/course/"+this.course_id+"/play/",e],mi.b)}else clearInterval(this.externalWindowInterval),console.warn("No course ID was passed to the viewer, hence the redirect is not possible.");clearInterval(this.externalWindowInterval)}},500),this.showIframe=!1}setScormHeight(){this.height=this.chapter_viewer.launch_params&&"lightbox"!==this.chapter_viewer.launch_params.mode?"inline"!==this.chapter_viewer.launch_params.mode||this.chapter_viewer.launch_params.height?this.chapter_viewer.launch_params.height:"510":"100%"}ngOnInit(){if(this.chapter_viewer&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode)if("fullscreen"===this.chapter_viewer.launch_params.mode){for(let e=0;e<=5;e++)history.pushState({},"",window.location.href);window.location.href=this.chapter_viewer.launch_params.url,this.showIframe=!1}else"popup"===this.chapter_viewer.launch_params.mode?this.openScormInNewWindow():(this.src=this._sanitizer.bypassSecurityTrustResourceUrl(this.chapter_viewer.launch_params.url),this.showIframe=!0);this.setScormHeight()}checkForStoppingExecutionOfListener(e){return!e.target||"dcd"!==e.target&&!e.status||!Mu&&(Mu=!0,!0)}scormListenerCompleteClosed(){"inline"!==this.chapter_viewer.launch_params.mode&&(this.isCompleted=!0),this.userInteractionService.track(Al.a.SCORM_COMPLETE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.SCORM}),this.completed.emit(this.current_chapter.id),Pu&&(clearInterval(this.externalWindowInterval),Pu.close(),Pu=void 0)}scormListenerNext(e){if(e.hasOwnProperty("chapter_id")){if(String(e.chapter_id)!==String(this.current_chapter.id))return}else console.warn("The DCD did not send ID to identify the chapter we want to change");"popup"===this.chapter_viewer.launch_params.mode&&(Mu=!1,Pu&&clearInterval(this.externalWindowInterval)),this.next.emit("next")}listenForIframePostMessages(){Object(Ti.i)(this.iframeElement).then(()=>{const e=this;this.scormListeningFunction=function(t){const i=t.data;e.checkForStoppingExecutionOfListener(i)||("completed"!==i.status&&"closed"!==i.status||e.scormListenerCompleteClosed(),"next"===i.status&&e.scormListenerNext(i))},window.addEventListener("message",this.scormListeningFunction)})}ngAfterViewInit(){this.userInteractionService.track(Al.a.SCORM_LOAD,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.SCORM}),this.loaded.emit(!0),this.listenForIframePostMessages()}ngOnDestroy(){void 0!==this.scormListeningFunction&&window.removeEventListener("message",this.scormListeningFunction),"inline"===this.chapter_viewer.launch_params.mode&&(this.userInteractionService.track(Al.a.SCORM_COMPLETE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.SCORM}),this.completed.emit(this.current_chapter.id))}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Pi.b),c.dc(s.h),c.dc(s.a),c.dc(v.d),c.dc(Al.c))},e.\u0275cmp=c.Xb({type:e,selectors:[["scorm-viewer"]],viewQuery:function(e,t){if(1&e&&(c.md(xu,1),c.md(xu,1)),2&e){let e;c.Qc(e=c.sc())&&(t.iframe=e.first),c.Qc(e=c.sc())&&(t.iframeElement=e)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",courseHasAutoplay:"courseHasAutoplay",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded",next:"next"},decls:2,vars:2,consts:[["id","scorm-iframe","width","100%","allow","autoplay",3,"src","height",4,"ngIf"],["class","text-main",3,"ngStyle",4,"ngIf"],["id","scorm-iframe","width","100%","allow","autoplay",3,"src","height"],["iframe",""],[1,"text-main",3,"ngStyle"]],template:function(e,t){1&e&&(c.dd(0,Du,2,2,"iframe",0),c.dd(1,Eu,3,5,"div",1)),2&e&&(c.Dc("ngIf",t.showScormIframe()),c.Mb(1),c.Dc("ngIf",t.showScormMessage()))},directives:[Ae.p,Ae.q],pipes:[E.b],styles:["#scorm-iframe[_ngcontent-%COMP%] {\n            min-height: 510px;\n        }"]}),e})();var Lu=i("QbTB"),ju=i("0V5H"),Fu=i("VRNE"),Ru=i("SOpw");const Nu=["linkField"],Uu=function(){return{category:"standard"}};function qu(e,t){if(1&e&&(c.jc(0,"div",4),c.jc(1,"div",5),c.jc(2,"div",6),c.jc(3,"span",7),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"span",8),c.ec(7,"line-limiter",9),c.ic(),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(4),c.gd(c.yc(5,7,"_INSTRUCTION",c.Hc(10,Uu))),c.Mb(3),c.Dc("content",e.instructionsText)("lines",null==e.lineLimiterParams?null:e.lineLimiterParams.lines)("removeHtml",!1)("skipSanitization",!0)("more_label",null==e.lineLimiterParams?null:e.lineLimiterParams.more_label)("less_label",null==e.lineLimiterParams?null:e.lineLimiterParams.less_label)}}function zu(e,t){if(1&e){const e=c.kc();c.jc(0,"div",21),c.jc(1,"screen-recording",22),c.rc("launchSuccess",function(){return c.Uc(e),c.vc(3).startPolling()}),c.ic(),c.ic()}if(2&e){const e=c.vc(3);c.Mb(1),c.Dc("layout",e.screenRecordingParams.layout)("uploadRequestPath",e.screenRecordingParams.uploadRequestPath)("uploadSuccessPath",e.screenRecordingParams.uploadSuccessPath)}}function Vu(e,t){1&e&&(c.jc(0,"div",23),c.fd(1),c.wc(2,"t"),c.jc(3,"span",24),c.fd(4),c.wc(5,"t"),c.ic(),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,2,"Alternatively,")," "),c.Mb(3),c.hd(" ",c.xc(5,4,"you can submit a YouTube/Vimeo video link")," "))}function Bu(e,t){if(1&e&&c.ec(0,"basic-button",29),2&e){const e=c.vc(4);c.Dc("type",e.buttonConfirm.type)("text",e.buttonConfirm.text)("state",e.linkEmbeded.valid?e.buttonConfirm.state:"disabled")("click",e.confirmUrl)}}function Gu(e,t){if(1&e&&c.ec(0,"basic-button",29),2&e){const e=c.vc(4);c.Dc("type",e.buttonCancel.type)("text",e.buttonCancel.text)("state",e.linkEmbeded.valid?e.buttonCancel.state:"disabled")("click",e.cancelURL)}}function $u(e,t){if(1&e&&(c.jc(0,"div"),c.ec(1,"textfield",25,26),c.jc(3,"div",27),c.dd(4,Bu,1,4,"basic-button",28),c.dd(5,Gu,1,4,"basic-button",28),c.ic(),c.ic()),2&e){const e=c.vc(3);c.Rb("link-wrapper ",e.disabledField?"is-disabled":"",""),c.Mb(1),c.Dc("id",e.linkAssignment.id)("type",e.linkAssignment.type)("label",e.linkAssignment.label)("disabledField",e.disableLinkField)("link_types",e.linkAssignment.link_types)("inputFormControl",e.linkEmbeded.controls.linkAssignment),c.Mb(3),c.Dc("ngIf",e.linkEmbeded.value.linkAssignment&&e.linkEmbeded.value.linkAssignment.length>0),c.Mb(1),c.Dc("ngIf",e.linkEmbeded.value.linkAssignment&&e.linkEmbeded.value.linkAssignment.length>0)}}const Hu=function(e){return{"full-width":e}};function Yu(e,t){if(1&e){const e=c.kc();c.jc(0,"div",14),c.jc(1,"div",15),c.jc(2,"div",16),c.jc(3,"single-upload",17),c.rc("uploading",function(t){return c.Uc(e),c.vc(2).submitFile(t)})("uploaded",function(t){return c.Uc(e),c.vc(2).uploadComplete(t)})("failed",function(t){return c.Uc(e),c.vc(2).uploadFailed(t)}),c.ic(),c.ic(),c.dd(4,zu,2,3,"div",18),c.ic(),c.dd(5,Vu,6,6,"div",19),c.dd(6,$u,6,11,"div",20),c.ic()}if(2&e){const e=c.vc(2);c.Mb(2),c.Dc("ngClass",c.Ic(12,Hu,!e.screenRecordingApp)),c.Mb(1),c.ad(e.dropzoneUploader.style),c.Dc("disabled",e.linkEmbeded.touched)("placeholder",e.dropzoneUploader.placeholder)("allowed_extensions",e.dropzoneUploader.allowed_extensions)("max_file_size",e.dropzoneUploader.max_file_size)("collection",e.dropzoneUploader.collection)("disabledField",e.linkEmbeded.value.linkAssignment),c.Mb(1),c.Dc("ngIf",e.screenRecordingApp),c.Mb(1),c.Dc("ngIf",1==e.numberOfFiles),c.Mb(1),c.Dc("ngIf",1==e.numberOfFiles)}}function Wu(e,t){if(1&e){const e=c.kc();c.jc(0,"div",38),c.jc(1,"div",39),c.jc(2,"div",40),c.fd(3),c.wc(4,"t"),c.jc(5,"a",41),c.rc("click",function(){return c.Uc(e),c.vc(3).buttonControls("reuploadVideo")}),c.fd(6),c.wc(7,"t"),c.ic(),c.ic(),c.ic(),c.jc(8,"div",42),c.ec(9,"player-iframe",43),c.ic(),c.ic()}if(2&e){const e=c.vc(3);c.Mb(3),c.hd(" ",c.xc(4,4,"You have submitted the following video file. Do you want to proceed with this one or")," "),c.Mb(3),c.gd(c.xc(7,6,"link to another video?")),c.Mb(3),c.Dc("url",e.track.submission.video_url)("bookmark",0)}}function Qu(e,t){if(1&e){const e=c.kc();c.jc(0,"div",39),c.jc(1,"a",46),c.rc("click",function(){return c.Uc(e),c.vc(4).deleteFiles()}),c.fd(2),c.wc(3,"t"),c.ic(),c.ic()}2&e&&(c.Mb(2),c.gd(c.xc(3,1,"Remove all")))}const Ku=function(e){return{number:e}};function Xu(e,t){if(1&e&&(c.jc(0,"div",38),c.jc(1,"div",44),c.fd(2),c.wc(3,"t"),c.ic(),c.dd(4,Qu,4,3,"div",45),c.ic()),2&e){const e=c.vc(3);c.Mb(2),c.hd("",c.yc(3,2,"You are submitting {number} items",c.Ic(5,Ku,e.numberOfFiles))," "),c.Mb(2),c.Dc("ngIf",e.multipleUploads)}}function Ju(e,t){if(1&e){const e=c.kc();c.jc(0,"div",48),c.jc(1,"div",49),c.ec(2,"em",50),c.ic(),c.jc(3,"div",51),c.fd(4),c.ic(),c.jc(5,"div",52),c.jc(6,"em",53),c.rc("click",function(){c.Uc(e);const i=t.index;return c.vc(4).deleteFiles(i)}),c.ic(),c.ic(),c.ic()}if(2&e){const e=t.$implicit;c.Mb(4),c.hd(" ",e.filename," ")}}function Zu(e,t){if(1&e&&(c.jc(0,"div",38),c.dd(1,Ju,7,1,"div",47),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.Dc("ngForOf",e.track.submission.files)}}function eh(e,t){if(1&e&&c.ec(0,"basic-button",29),2&e){const e=c.vc(3);c.Dc("type",e.uploadMoreButton.type)("text",e.uploadMoreButton.text)("state",e.uploadMoreButton.state)("click",e.uploadMore)}}function th(e,t){if(1&e){const e=c.kc();c.jc(0,"div",30),c.dd(1,Wu,10,8,"div",31),c.dd(2,Xu,5,7,"div",31),c.dd(3,Zu,2,1,"div",31),c.jc(4,"div",32),c.jc(5,"div",33),c.dd(6,eh,1,4,"basic-button",28),c.ic(),c.jc(7,"div",34),c.jc(8,"form",35),c.rc("ngSubmit",function(){return c.Uc(e),c.vc(2).buttonControls("submitAssignment")}),c.ec(9,"textfield",36),c.ec(10,"textareaField",37),c.jc(11,"div",33),c.ec(12,"basic-button",29),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",!e.showSubReviewItems),c.Mb(1),c.Dc("ngIf",e.showSubReviewItems),c.Mb(1),c.Dc("ngIf",e.showSubReviewItems),c.Mb(3),c.Dc("ngIf",e.numberOfFiles<10&&e.multipleUploads&&e.showSubReviewItems),c.Mb(2),c.Dc("formGroup",e.assignmentForm),c.Mb(1),c.Dc("id",e.assignmentName.id)("type",e.assignmentName.type)("label",e.assignmentName.label)("errors",e.assignmentName.errorMessages)("floating_label",e.assignmentName.floating_label)("inputFormControl",e.assignmentForm.controls.name),c.Mb(1),c.Dc("type",e.textareaDescription.type)("name",e.textareaDescription.name)("value",e.textareaDescription.value)("label",e.textareaDescription.label)("floating_label",e.textareaDescription.floating_label)("tinymce_options",e.textareaDescription.tinymce_options)("inputFormControl",e.assignmentForm.controls.description),c.Mb(2),c.Dc("type",e.submitAssignmentButton.type)("text",e.submitAssignmentButton.text)("state",e.assignmentForm.valid?e.submitAssignmentButton.state:"disabled")("click",e.submitAssignment)}}const ih=function(){return{category:"classroom"}};function sh(e,t){1&e&&(c.ec(0,"div",63),c.wc(1,"t")),2&e&&c.Dc("innerHtml",c.yc(1,1,"Waiting for evaluation",c.Hc(4,ih)),c.Vc)}function nh(e,t){if(1&e){const e=c.kc();c.jc(0,"div",64),c.ec(1,"em",65),c.jc(2,"span",66),c.fd(3),c.ic(),c.jc(4,"span",67),c.fd(5,"/100"),c.ic(),c.jc(6,"em",68),c.rc("click",function(){c.Uc(e);const t=c.vc().index;return c.vc(3).buttonControls("reviewAssignment",t)}),c.ic(),c.ic()}if(2&e){const e=c.vc().$implicit;c.Mb(3),c.gd(e.score)}}function ah(e,t){if(1&e){const e=c.kc();c.jc(0,"div",69),c.ec(1,"em",70),c.jc(2,"span",71),c.fd(3),c.ic(),c.jc(4,"span",67),c.fd(5,"/100"),c.ic(),c.jc(6,"em",68),c.rc("click",function(){c.Uc(e);const t=c.vc().index;return c.vc(3).buttonControls("reviewAssignment",t)}),c.ic(),c.ic()}if(2&e){const e=c.vc().$implicit;c.Mb(3),c.gd(e.score)}}function oh(e,t){if(1&e&&(c.jc(0,"div",56),c.jc(1,"div",57),c.jc(2,"span",58),c.fd(3),c.wc(4,"t"),c.ic(),c.jc(5,"span",59),c.fd(6),c.wc(7,"t"),c.wc(8,"t"),c.ic(),c.ic(),c.dd(9,sh,2,5,"div",60),c.dd(10,nh,7,1,"div",61),c.dd(11,ah,7,1,"div",62),c.ic()),2&e){const e=t.$implicit,i=t.index,s=c.vc(3);c.Mb(3),c.gd(c.xc(4,7,e.name)),c.Mb(3),c.jd("",c.xc(7,9,"Submitted")," ",s.countTimeAgo(i)," ",c.xc(8,11,"days ago"),""),c.Mb(3),c.Dc("ngIf","waiting"==e.status),c.Mb(1),c.Dc("ngIf","failed"==e.status),c.Mb(1),c.Dc("ngIf","passed"==e.status)}}function rh(e,t){if(1&e&&c.ec(0,"basic-button",29),2&e){const e=c.vc(3);c.Dc("type",e.reSubmitAssignmentButton.type)("text",e.reSubmitAssignmentButton.text)("state",e.reSubmitAssignmentButton.state)("click",e.reSubmitAssignment)}}function ch(e,t){if(1&e&&(c.jc(0,"div",54),c.dd(1,oh,12,13,"div",55),c.jc(2,"div",33),c.dd(3,rh,1,4,"basic-button",28),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngForOf",e.assignemntSubmissions),c.Mb(2),c.Dc("ngIf",e.resubmissionAllowed&&e.assignemntSubmissions&&"passed"!=e.assignemntSubmissions[0].status&&"waiting"!=e.assignemntSubmissions[0].status)}}function lh(e,t){if(1&e&&(c.jc(0,"div",10),c.dd(1,Yu,7,14,"div",11),c.dd(2,th,13,22,"div",12),c.dd(3,ch,4,2,"div",13),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",e.uploadAssignment),c.Mb(1),c.Dc("ngIf",e.submissionReview),c.Mb(1),c.Dc("ngIf",e.assignmentStatus||"activity_completed"==e.chapter_viewer.status)}}function dh(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",80),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",82),c.ec(5,"avatar",83),c.ic(),c.jc(6,"div",84),c.jc(7,"div",85),c.fd(8),c.ic(),c.jc(9,"a",86),c.fd(10),c.ic(),c.jc(11,"span",87),c.fd(12),c.wc(13,"t"),c.wc(14,"t"),c.wc(15,"dateTime"),c.ic(),c.ic(),c.gc()),2&e){const e=c.vc(2);c.Mb(2),c.hd(" ",c.xc(3,10,"Evaluated by:"),""),c.Mb(3),c.Dc("image_url",e.evaluatorAvatarURL)("size",e.evaluatorAvatar.size)("properties",e.evaluatorAvatar.properties),c.Mb(3),c.gd(e.evaluatorName),c.Mb(1),c.Gc("href","mailto:",e.evaluatorEmail,"?Subject=Assignment%20from%20",e.evaluatedDate,"",c.Xc),c.Mb(1),c.gd(e.evaluatorEmail),c.Mb(2),c.id(" ",c.yc(13,12,"Evaluated on",c.Hc(19,ih)),": ",c.xc(14,15,c.xc(15,17,e.evaluatedDate))," ")}}const uh=function(){return{category:"course"}};function hh(e,t){if(1&e&&(c.jc(0,"div",88),c.ec(1,"em",65),c.jc(2,"span",89),c.jc(3,"span",90),c.fd(4),c.ic(),c.jc(5,"span",67),c.fd(6,"/100"),c.ic(),c.ic(),c.jc(7,"span",91),c.jc(8,"span",92),c.fd(9),c.wc(10,"t"),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.gd(e.pointsState),c.Mb(5),c.gd(c.yc(10,2,"_PROGRESS_FAILED",c.Hc(5,uh)))}}const ph=function(){return{category:"coursereport"}};function mh(e,t){if(1&e&&(c.jc(0,"div",88),c.ec(1,"em",70),c.jc(2,"span",89),c.jc(3,"span",71),c.fd(4),c.ic(),c.jc(5,"span",67),c.fd(6,"/100"),c.ic(),c.ic(),c.jc(7,"span",91),c.jc(8,"span",93),c.fd(9),c.wc(10,"t"),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.gd(e.pointsState),c.Mb(5),c.gd(c.yc(10,2,"_PASSED",c.Hc(5,ph)))}}function gh(e,t){if(1&e){const e=c.kc();c.jc(0,"div",72),c.jc(1,"div",73),c.jc(2,"div",74),c.jc(3,"div",75),c.jc(4,"em",76),c.rc("click",function(){return c.Uc(e),c.vc().buttonControls("viewAssignmentList")}),c.ic(),c.ic(),c.jc(5,"div",77),c.dd(6,dh,16,20,"ng-container",78),c.ic(),c.jc(7,"div",79),c.jc(8,"div",80),c.fd(9),c.wc(10,"t"),c.ic(),c.jc(11,"div",34),c.dd(12,hh,11,6,"div",81),c.dd(13,mh,11,6,"div",81),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(6),c.Dc("ngIf",e.evaluatorName),c.Mb(3),c.hd(" ",c.xc(10,4,"Your score and status:"),""),c.Mb(3),c.Dc("ngIf","failed"==e.statusState),c.Mb(1),c.Dc("ngIf","passed"==e.statusState)}}function bh(e,t){if(1&e&&(c.jc(0,"div",101),c.jc(1,"div",102),c.jc(2,"div",103),c.ec(3,"player-iframe",43),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(3),c.Dc("url",e.filesView)("bookmark",0)}}function fh(e,t){1&e&&(c.jc(0,"div",80),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Submitted files:"),""))}const vh=function(e){return{category:"standard",index:e}};function _h(e,t){if(1&e&&(c.jc(0,"div",105),c.jc(1,"div",49),c.ec(2,"em",50),c.ic(),c.jc(3,"div",106),c.ec(4,"a",107),c.wc(5,"t"),c.ic(),c.ic()),2&e){const e=t.$implicit,i=t.index;c.Mb(4),c.Dc("href",e.url,c.Xc)("innerHtml",c.yc(5,2,"File {index}",c.Ic(5,vh,i+1)),c.Vc)}}function wh(e,t){if(1&e&&(c.jc(0,"div",101),c.dd(1,_h,6,7,"div",104),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngForOf",e.filesView)}}function yh(e,t){if(1&e&&c.ec(0,"basic-button",29),2&e){const e=c.vc(2);c.Dc("type",e.reSubmitAssignmentButton.type)("text",e.reSubmitAssignmentButton.text)("state",e.reSubmitAssignmentButton.state)("click",e.reSubmitAssignment)}}function Ch(e,t){1&e&&(c.jc(0,"div",108),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Instructor comments:")," "))}function Sh(e,t){if(1&e&&c.ec(0,"line-limiter",114),2&e){const e=c.vc(3);c.Dc("content",e.evaluatorComment)("more_label",null==e.lineLimiterParams?null:e.lineLimiterParams.more_label)("less_label",null==e.lineLimiterParams?null:e.lineLimiterParams.less_label)}}function Th(e,t){if(1&e&&(c.jc(0,"div",109),c.jc(1,"div",110),c.ec(2,"avatar",83),c.ic(),c.jc(3,"div",111),c.jc(4,"div",80),c.fd(5),c.ic(),c.jc(6,"div",34),c.jc(7,"span",112),c.dd(8,Sh,1,3,"line-limiter",113),c.ic(),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("image_url",e.evaluatorAvatarURL)("size",e.evaluatorAvatar.size)("properties",e.evaluatorAvatar.properties),c.Mb(3),c.gd(e.evaluatorName),c.Mb(3),c.Dc("ngIf",e.evaluatorComment)}}function kh(e,t){if(1&e&&(c.jc(0,"div",101),c.jc(1,"div",105),c.jc(2,"div",49),c.ec(3,"em",50),c.ic(),c.jc(4,"div",106),c.jc(5,"a",115),c.fd(6),c.ic(),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(5),c.Ec("href",e.evaluationAttachment.url,c.Xc),c.Mb(1),c.gd(e.evaluationAttachment.filename)}}function Ih(e,t){1&e&&(c.jc(0,"div",108),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Leave a comment:")," "))}function xh(e,t){if(1&e&&c.ec(0,"basic-button",29),2&e){const e=c.vc(3);c.Dc("type",e.submitLearnerComment.type)("text",e.submitLearnerComment.text)("state",e.submitLearnerComment.state)("click",e.sendLearnerCommentToEvaluation)}}function Dh(e,t){if(1&e){const e=c.kc();c.jc(0,"div",116),c.ec(1,"div",117),c.jc(2,"div",118),c.jc(3,"div",119),c.ec(4,"avatar",83),c.ic(),c.jc(5,"div",120),c.jc(6,"form",35),c.rc("ngSubmit",function(){return c.Uc(e),c.vc(2).buttonControls("sendLearnerCommentToEvaluation")}),c.ec(7,"textareaField",121),c.wc(8,"t"),c.ic(),c.ic(),c.jc(9,"div",122),c.dd(10,xh,1,4,"basic-button",28),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(4),c.Dc("image_url",e.userAvatar)("size",e.smallAvatar.size)("properties",e.evaluatorAvatar.properties),c.Mb(2),c.Dc("formGroup",e.reviewForm),c.Mb(1),c.Dc("type",e.learnerReplyField.type)("name",e.learnerReplyField.name)("value",e.learnerReplyField.value)("label",c.xc(8,12,e.learnerReplyField.label))("floating_label",e.learnerReplyField.floating_label)("inputFormControl",e.reviewForm.controls.learner_reply)("tinymce_options",e.learnerReplyField.tinymce_options),c.Mb(3),c.Dc("ngIf",e.reviewForm.value.learner_reply.length>0)}}function Oh(e,t){1&e&&(c.jc(0,"div",108),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"User comment to the evaluation:")," "))}function Eh(e,t){if(1&e&&c.ec(0,"line-limiter",114),2&e){const e=c.vc(3);c.Dc("content",e.learnerReply)("more_label",null==e.lineLimiterParams?null:e.lineLimiterParams.more_label)("less_label",null==e.lineLimiterParams?null:e.lineLimiterParams.less_label)}}function Ph(e,t){if(1&e&&(c.jc(0,"div",109),c.jc(1,"div",110),c.ec(2,"avatar",83),c.ic(),c.jc(3,"div",111),c.jc(4,"div",80),c.fd(5),c.ic(),c.jc(6,"div",34),c.dd(7,Eh,1,3,"line-limiter",113),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("image_url",e.userAvatar)("size",e.evaluatorAvatar.size)("properties",e.evaluatorAvatar.properties),c.Mb(3),c.gd(e.userName),c.Mb(2),c.Dc("ngIf",e.learnerReply)}}function Mh(e,t){if(1&e&&(c.jc(0,"div",10),c.jc(1,"div",94),c.dd(2,bh,4,2,"div",95),c.ic(),c.jc(3,"div",96),c.jc(4,"div",34),c.dd(5,fh,3,3,"div",97),c.dd(6,wh,2,1,"div",95),c.jc(7,"div",33),c.dd(8,yh,1,4,"basic-button",28),c.ic(),c.ic(),c.jc(9,"div",34),c.dd(10,Ch,3,3,"div",98),c.dd(11,Th,9,5,"div",99),c.dd(12,kh,7,2,"div",95),c.dd(13,Ih,3,3,"div",98),c.dd(14,Dh,11,14,"div",100),c.dd(15,Oh,3,3,"div",98),c.dd(16,Ph,8,5,"div",99),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("ngIf",!e.showFilesList),c.Mb(3),c.Dc("ngIf",e.showFilesList),c.Mb(1),c.Dc("ngIf",e.showFilesList),c.Mb(2),c.Dc("ngIf",e.resubmissionAllowed&&e.assignemntSubmissions&&"passed"!=e.assignemntSubmissions[0].status&&"waiting"!=e.assignemntSubmissions[0].status),c.Mb(2),c.Dc("ngIf",e.evaluatorComment||e.evaluationAttachment),c.Mb(1),c.Dc("ngIf",e.evaluatorComment),c.Mb(1),c.Dc("ngIf",e.evaluationAttachment),c.Mb(1),c.Dc("ngIf",!e.learnerReply),c.Mb(1),c.Dc("ngIf",!e.learnerReply),c.Mb(1),c.Dc("ngIf",e.learnerReply),c.Mb(1),c.Dc("ngIf",e.learnerReply)}}let Ah=(()=>{class e{constructor(e,t,i,s,n,a,r,l,d){this.el=e,this.backendService=t,this.fb=i,this.sanitizer=s,this.formatter=n,this.changeDetector=a,this.toggleService=r,this.docLayoutService=l,this.userInteractionService=d,this.completed=new c.q,this.loaded=new c.q,this.track={type:"submission",submission:{id:null,learner_reply:"",name:"",description:"",files:[],video_url:""}},this.uploadAssignment=!0,this.submissionReview=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.trigger=new c.q,this.resubmissionAllowed=!1,this.disableLinkField=!1,this.disableUploadField=!1,this.linkTextfield=!0,this.showSubReviewItems=!0,this.assignemntSubmissions=[],this.numberOfFiles=1,this.showFilesList=!0,this.instructionsText="",this.userName=o.a.getInstance().firstname+" "+o.a.getInstance().lastname,this.userAvatar=o.a.getInstance().avatar_url,this.buttonConfirm={type:"normal",text:E.a.t("standard","Confirm")},this.buttonCancel={type:"cancel",text:E.a.t("standard","cancel")},this.uploadMoreButton={type:"mainColor",text:E.a.t("standard","upload more files")},this.submitAssignmentButton={type:"submit",text:E.a.t("standard","submit my assignment")},this.reSubmitAssignmentButton={type:"submit",text:E.a.t("standard","re-submit assignment")},this.submitLearnerComment={type:"submit",text:E.a.t("standard","send your comment")},this.dropzoneUploader={placeholder:E.a.t("standard","Drop your file here or browse"),allowed_extensions:["3gp","3gp2","arf","avi","bmp","csv","doc","docx","epub","flv","gif","ico","jpeg","jpg","mkv","mov","mp3","mp4","mpeg","mpeg4","mpg","mpg2","ogg","ogm","pdf","png","ppsx","ppt","pptx","srt","txt","vtt","wmv","wrf","xls","xlsx","zip"],style:"dropzone",collection:"deliverable",max_file_size:40},this.linkAssignment={id:"assignemnt-link",type:"link",label:E.a.t("standard","Paste here your link"),link_types:["youtube","vimeo"]},this.textareaDescription={type:"mdl",name:"description-name",label:E.a.t("standard","Description/comments"),floating_label:!0,tinymce_options:{selector:"#description-assignemnt-textarea",menubar:!1,statusbar:!1,toolbar:!1,plugins:["autoresize"],autoresize_min_height:5}},this.assignmentName={type:"text",floating_label:!0,id:"assignment-name-field",label:E.a.t("standard","Assignment Name")},this.learnerReplyField={type:"mdl",name:"learner-reply-field",label:E.a.t("standard","Write your comment here"),floating_label:!0,tinymce_options:{selector:"#learner-reply-field",menubar:!1,statusbar:!1,toolbar:!1,plugins:["autoresize"],autoresize_min_height:18}},this.lineLimiterParams={content:null,lines:2,more_label:E.a.t("app7020","Show more"),less_label:E.a.t("standard","Show less")},this.evaluatorAvatar={size:40,properties:{bg_color_class:"bg-grey-mid",text_color_class:"text-white",icon_class:"zmdi zmdi-account"}},this.smallAvatar={size:30},this.ngUnsubscribe=new gt.a,this.localStorageInstance=ki.a.getInstance(),this.platformInstance=x.b.getInstance(),this.accessToken=this.localStorageInstance.get("access_token").access_token,this.screenRecordingFileName=Object(Ti.n)()+".mp4",this.screenRecordingApp=this.platformInstance.isPluginActive("ScreenRecordingApp"),this.confirmUrl=()=>{this.buttonControls("confirmUrl")},this.cancelURL=()=>{this.buttonControls("cancelURL")},this.uploadMore=()=>{this.buttonControls("uploadMore")},this.submitAssignment=()=>{this.buttonControls("submitAssignment")},this.reSubmitAssignment=()=>{this.buttonControls("reSubmitAssignment")},this.sendLearnerCommentToEvaluation=()=>{this.buttonControls("sendLearnerCommentToEvaluation")},this.assignmentForm=i.group({description:[""],name:["",Ke.x.compose([Ke.x.required,Ke.x.maxLength(255)])]}),this.screenRecordingApp&&this.setScreenRecordingInitialParams(),this.linkEmbeded=i.group({linkAssignment:["",ud.a.urlRegex(this.linkAssignment.link_types)]}),this.reviewForm=i.group({learner_reply:[""]})}setScreenRecordingInitialParams(){this.screenRecordingParams={layout:Lu.a.BIG,uploadRequestPath:Object(Ti.d)(this.platformInstance.originalDomain,"/learn/v1/assignment/upload/presigned_url",{access_token:this.accessToken,filename:this.screenRecordingFileName}),uploadSuccessPath:""}}ngOnInit(){this.descriotionText=this.sanitizer.bypassSecurityTrustHtml(this.current_chapter.description),this.instructionsText=this.chapter_viewer.launch_params.instructions,this.multipleUploads=!!this.chapter_viewer.launch_params.allow_multiple_uploads,this.changeDetector.detectChanges(),this.chapter_viewer.launch_params.allow_resubmission&&(this.resubmissionAllowed=this.chapter_viewer.launch_params.allow_resubmission),this.chapter_viewer.launch_params.submissions&&(this.assignemntSubmissions=this.chapter_viewer.launch_params.submissions,this.assignmentStatus=!0,this.assignmentReview=!1,this.submissionReview=!1,this.uploadAssignment=!1),this.chapter_viewer.launch_params.allowed_max_file_size&&(this.dropzoneUploader.max_file_size=this.chapter_viewer.launch_params.allowed_max_file_size)}buttonControls(e,t){switch(e){case"confirmUrl":this.submissionReview=!0,this.uploadAssignment=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.showSubReviewItems=!1,this.track.submission.video_url=this.linkEmbeded.value.linkAssignment,this.changeDetector.detectChanges(),this.loaded.emit(!0);break;case"cancelURL":this.linkEmbeded.reset();break;case"uploadMore":this.numberOfFiles++,this.changeDetector.detectChanges(),this.uploadAssignment=!0,this.submissionReview=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.loaded.emit(!0);break;case"reuploadVideo":this.track.submission.video_url="",this.linkEmbeded.reset(),this.uploadAssignment=!0,this.showSubReviewItems=!0,this.submissionReview=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.linkTextfield=!1,this.loaded.emit(!0);break;case"submitAssignment":this.assignemntSubmissions.unshift({status:"waiting",name:this.assignmentForm.value.name,submission_date:this.formatter.currentUtcDateTime()}),this.assignmentStatus=!0,this.assignmentReview=!1,this.submissionReview=!1,this.uploadAssignment=!1,this.track.type="submission",this.assignmentForm.value.description&&(this.track.submission.description=this.assignmentForm.value.description),this.track.submission.name=this.assignmentForm.value.name,this.trackSubmit(),this.sendToTrackApi(),this.loaded.emit(!0);break;case"reviewAssignment":void 0!==t&&(this.assignemntSubmissions[t].evaluator&&(this.evaluatorName=this.platformInstance.getFullName(this.assignemntSubmissions[t].evaluator,!0),this.evaluatorEmail=this.assignemntSubmissions[t].evaluator.email,this.evaluatorAvatarURL=this.assignemntSubmissions[t].evaluator.avatar_url),this.evaluatedDate=this.assignemntSubmissions[t].evaluation_date,this.evaluationAttachment=this.assignemntSubmissions[t].evaluation_file?this.assignemntSubmissions[t].evaluation_file:null,this.statusState=this.assignemntSubmissions[t].status,this.pointsState=this.assignemntSubmissions[t].score,this.evaluatorComment=this.assignemntSubmissions[t].evaluator_comment,this.assignmentID=this.assignemntSubmissions[t].id,this.learnerReply=this.reviewForm.value.learner_reply?this.reviewForm.value.learner_reply:this.assignemntSubmissions[t].learner_reply,this.assignemntSubmissions[t].files?(this.filesView=this.assignemntSubmissions[t].files,this.showFilesList=!0):(this.filesView=this.assignemntSubmissions[t].video_url,this.showFilesList=!1)),this.assignmentReview=!0,this.assignmentStatus=!1,this.submissionReview=!1,this.uploadAssignment=!1,this.loaded.emit(!0);break;case"viewAssignmentList":this.assignmentStatus=!0,this.assignmentReview=!1,this.submissionReview=!1,this.uploadAssignment=!1,this.loaded.emit(!0);break;case"reSubmitAssignment":this.uploadAssignment=!0,this.assignmentStatus=!1,this.assignmentReview=!1,this.submissionReview=!1,this.changeDetector.detectChanges(),this.loaded.emit(!0);break;case"sendLearnerCommentToEvaluation":this.learnerReply=this.reviewForm.value.learner_reply,this.track.submission.id=this.assignmentID,this.track.type="comment_reply",this.track.submission.learner_reply=this.reviewForm.value.learner_reply,this.trackComment(),this.sendToTrackApi(),this.loaded.emit(!0)}}deleteFiles(e){if(void 0!==e){const t=this.track.submission.files.splice(e,1);this.backendService.request("/manage/v1/upload?filename="+t[0].url,"DELETE").pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{console.log("deleted",e)},e=>{console.log("deleted error",e)}),0===this.track.submission.files.length?(this.uploadAssignment=!0,this.submissionReview=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.numberOfFiles=1):this.numberOfFiles--}else this.numberOfFiles=1,this.disableLinkField=!1,this.track.submission.files=[],this.uploadAssignment=!0,this.submissionReview=!1;this.disableLinkField=!1}sendToTrackApi(){return this.backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST",{track:this.track}).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{this.completed.emit(this.current_chapter.id)},e=>{this.docLayoutService.toast.showToast({message:E.a.t("standard",e.message[0]),type:"error"}),this.track=null,console.log("error",e),this.changeDetector.detectChanges()})}countTimeAgo(e){const t=this.assignemntSubmissions[e].submission_date,i=this.formatter.currentUtcDateTime();return this.formatter.diffDays(i,t)}submitFile(e){e&&(this.disableLinkField=!0,this.linkEmbeded.disable(),this.changeDetector.detectChanges())}uploadComplete(e){this.track.submission.files.push({url:e.new_filename,filename:e.original_filename}),this.showSubmissionReview()}uploadFailed(e){console.log("failed name: ",e.original_filename),console.log("failed link: ",e.new_filename)}startPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null),this.pollingInterval=setInterval(()=>{this.backendService.request("/learn/v1/assignment/upload/status","GET",{filename:this.screenRecordingFileName}).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{e.data.uploaded&&(clearInterval(this.pollingInterval),this.pollingInterval=null,this.track.submission.files.push({url:this.screenRecordingFileName,filename:this.screenRecordingFileName}),this.showSubmissionReview(),this.changeDetector.detectChanges())})},5e3)}showSubmissionReview(){this.submissionReview=!0,this.uploadAssignment=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.screenRecordingApp&&(this.screenRecordingFileName=Object(Ti.n)()+".mp4",this.setScreenRecordingInitialParams())}ngAfterViewInit(){this.loaded.emit(!0)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}trackSubmit(){this.userInteractionService.track(Al.a.ASSIGNMENT_SUBMIT,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.ASSIGNMENT})}trackComment(){this.userInteractionService.track(Al.a.ASSIGNMENT_COMMENT,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.ASSIGNMENT})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.o),c.dc(S.a),c.dc(Ke.d),c.dc(Pi.b),c.dc(ti.b),c.dc(c.i),c.dc(rd.a),c.dc(M.a),c.dc(Al.c))},e.\u0275cmp=c.Xb({type:e,selectors:[["assignments-viewer"]],viewQuery:function(e,t){if(1&e&&c.md(Nu,1),2&e){let e;c.Qc(e=c.sc())&&(t.linkField=e.first)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:5,vars:4,consts:[[1,"assignments__wraper","bg-white"],["class","assignments__header",4,"ngIf"],["class","assignments__body mdl-wrapper",4,"ngIf"],["class","assignments__header border-grey-light bg-grey-superlight",4,"ngIf"],[1,"assignments__header"],[1,"description","default-list-style","default-headings-styles","mdl-wrapper"],[1,"mdl-grid"],[1,"title","mdl-cell--12-col"],[1,"input-desc","mdl-cell--12-col"],[3,"content","lines","removeHtml","skipSanitization","more_label","less_label"],[1,"assignments__body","mdl-wrapper"],["class","upload-assignments",4,"ngIf"],["class","submission-review mdl-wrapper",4,"ngIf"],["class","assignment-status mdl-wrapper",4,"ngIf"],[1,"upload-assignments"],[1,"uploaders-wrapper"],[1,"single-uploader",3,"ngClass"],[3,"disabled","placeholder","allowed_extensions","max_file_size","collection","disabledField","uploading","uploaded","failed"],["class","screen-recording-uploader",4,"ngIf"],["class","additional-text title-regular text-grey-dark",4,"ngIf"],[3,"class",4,"ngIf"],[1,"screen-recording-uploader"],[3,"layout","uploadRequestPath","uploadSuccessPath","launchSuccess"],[1,"additional-text","title-regular","text-grey-dark"],[1,"snackbar","text-grey-mid"],[3,"id","type","label","disabledField","link_types","inputFormControl"],["linkField",""],[1,"control-buttons","button-cell"],[3,"type","text","state","click",4,"ngIf"],[3,"type","text","state","click"],[1,"submission-review","mdl-wrapper"],["class","mdl-grid file-view",4,"ngIf"],[1,"mdl-grid","file-view-controls"],[1,"mdl-cell","mdl-cell--12-col","button-cell"],[1,"mdl-cell","mdl-cell--12-col"],[3,"formGroup","ngSubmit"],[3,"id","type","label","errors","floating_label","inputFormControl"],[3,"type","name","value","label","floating_label","tinymce_options","inputFormControl"],[1,"mdl-grid","file-view"],[1,"mdl-cell","mdl-cell--6-col","text-main","button-cell"],[1,"video-submit-text","snackbar","text-grey-mid"],[3,"click"],[1,"mdl-cell","mdl-cell--6-col","text-grey-mid","lifeview-player"],[3,"url","bookmark"],[1,"mdl-cell","mdl-cell--6-col","text-grey-mid"],["class","mdl-cell mdl-cell--6-col text-main button-cell",4,"ngIf"],[1,"text-main",3,"click"],["class","cell-view border-grey-light mdl-cell--12-col",4,"ngFor","ngForOf"],[1,"cell-view","border-grey-light","mdl-cell--12-col"],[1,"cloud-icon"],[1,"zmdi","zmdi-cloud-done","text-grey-mid-permanent"],[1,"file-name-text","text-main"],[1,"delete-icon"],[1,"zmdi","zmdi-close","clickable","text-grey-mid-permanent",3,"click"],[1,"assignment-status","mdl-wrapper"],["class","status-box border-grey-light mdl-grid",4,"ngFor","ngForOf"],[1,"status-box","border-grey-light","mdl-grid"],[1,"mdl-cell--9-col"],[1,"title","text-main"],[1,"sub-title","text-grey-mid"],["class","status",3,"innerHtml",4,"ngIf"],["class","status-failed text-grey-mid",4,"ngIf"],["class","status-passed text-grey-mid",4,"ngIf"],[1,"status",3,"innerHtml"],[1,"status-failed","text-grey-mid"],[1,"zmdi","zmdi-assignment-alert","text-error","score-icon"],[1,"text-error","max-points"],[1,"max-points"],[1,"zmdi","zmdi-chevron-right","clickable","text-grey","see-more-arrow",3,"click"],[1,"status-passed","text-grey-mid"],[1,"zmdi","zmdi-assignment-check","text-positive-green","score-icon"],[1,"text-positive-green","received-points"],[1,"assignments__header","border-grey-light","bg-grey-superlight"],[1,"evaluator"],[1,"evaluation-info","mdl-grid"],[1,"mdl-cell","mdl-cell--1-col"],[1,"zmdi","zmdi-arrow-left","clickable","text-grey","back-to-assignments-list",3,"click"],[1,"mdl-cell","mdl-cell--5-col","mdl-grid"],[4,"ngIf"],[1,"mdl-cell","mdl-cell--6-col","mdl-grid"],[1,"mdl-cell","mdl-cell--12-col","title"],["class","status bg-white border-grey-light text-grey-mid",4,"ngIf"],[1,"avatar"],[3,"image_url","size","properties"],[1,"mdl-cell--9-col","evaluation-header"],[1,"evaluator-name"],["target","_top",1,"text-main",3,"href"],[1,"evaluated-on-information"],[1,"status","bg-white","border-grey-light","text-grey-mid"],[1,"points-text"],[1,"text-error","received-points"],[1,"state-text"],[1,"text-error"],[1,"text-positive-green"],[1,"assignments-review-video"],["class","mdl-cell--12-col",4,"ngIf"],[1,"assignment-review","mdl-grid"],["class","mdl-cell mdl-cell--12-col title",4,"ngIf"],["class","mdl-cell mdl-cell--12-col review-small-title",4,"ngIf"],["class","mdl-cell mdl-cell--12-col mdl-grid",4,"ngIf"],["class","mdl-cell--12-col mdl-grid",4,"ngIf"],[1,"mdl-cell--12-col"],[1,"iframe-assignment-wrap","bg-grey-dark"],[1,"iframe-assignment-body"],["class","cell-view border-grey-light mdl-cell mdl-cell--12-col mdl-grid",4,"ngFor","ngForOf"],[1,"cell-view","border-grey-light","mdl-cell","mdl-cell--12-col","mdl-grid"],[1,"cell-text","text-main"],["download","","target","_blank",1,"text-main",3,"href","innerHtml"],[1,"mdl-cell","mdl-cell--12-col","review-small-title"],[1,"mdl-cell","mdl-cell--12-col","mdl-grid"],[1,"mdl-cell","avatar","mdl-cell--1-col"],[1,"mdl-cell","mdl-cell--11-col","mdl-grid"],[1,"evaluator-comment-container"],[3,"content","more_label","less_label",4,"ngIf"],[3,"content","more_label","less_label"],["download","","target","_blank",1,"text-main",3,"href"],[1,"mdl-cell--12-col","mdl-grid"],[1,"avatar","mdl-cell--1-col"],[1,"mdl-cell--11-col","mdl-grid","user-comments"],[1,"mdl-cell","mdl-cell--1-col","avatar-small"],[1,"mdl-cell","mdl-cell--11-col"],[3,"type","name","value","label","floating_label","inputFormControl","tinymce_options"],[1,"mdl-cell","mdl-cell--12-col","button-cell","send-comment"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,qu,8,11,"div",1),c.dd(2,lh,4,3,"div",2),c.dd(3,gh,14,6,"div",3),c.dd(4,Mh,17,11,"div",2),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",!t.assignmentReview),c.Mb(1),c.Dc("ngIf",!t.assignmentReview),c.Mb(1),c.Dc("ngIf",t.assignmentReview),c.Mb(1),c.Dc("ngIf",t.assignmentReview))},directives:[Ae.p,li.a,Ae.n,Pn.a,ju.a,_t.a,Fs.a,Ke.y,Ke.p,Ke.i,Fu.a,Ao.a,Ae.o,vs.a],pipes:[E.b,Ru.a],encapsulation:2}),e})();var Lh=i("Kf5b"),jh=i("2Rox"),Fh=i("UIvz");let Rh=(()=>{class e{checkMandatoryQuestions(e,t){let i=this.generateTypeQuestionsObject(e,t),s=this.performValidations(i);return 0===s.length||(this.toggleRequiredLabelsColor(s),!1)}generateTypeQuestionsObject(e,t){let i={};for(let s=0;s<t.length;s++){let n=t[s];if(n.is_mandatory){let t=e[n.id_question];i.hasOwnProperty(n.type)||(i[n.type]=[]),i[n.type].push({question_id:Number(n.id_question),answer:t})}}return i}performValidations(e){let t=[];for(const i in e){let s=e[i];switch(i){case te.q.CHOICE.toString():case te.q.INLINE_CHOICE.toString():t=t.concat(this.validateSingleChoiceQuestions(s));break;case te.q.EXTENDED_TEXT.toString():t=t.concat(this.validateExtendedTextQuestions(s));break;case te.q.CHOICE_MULTIPLE.toString():t=t.concat(this.validateMultipleChoiceQuestions(s));break;case te.q.LIKERT_SCALE.toString():t=t.concat(this.validateLikertQuestions(s))}}return t}validateSingleChoiceQuestions(e){let t=[];for(const i of e)i.answer||null===i.answer||t.push(i.question_id);return t}validateExtendedTextQuestions(e){let t=[];for(const i of e)null!==i.answer&&""!==String(i.answer).trim()||t.push(i.question_id);return t}validateMultipleChoiceQuestions(e){var t;let i=[];for(const s of e){let e=!1,n=null!==(t=s.answer)&&void 0!==t?t:{};for(const t in n)n.hasOwnProperty(t)&&null!==n[t]&&!1!==n[t]&&(e=!0);e||i.push(s.question_id)}return i}validateLikertQuestions(e){let t=[];for(const i of e){let e=!0,s=i.answer;for(const t in s)s.hasOwnProperty(t)&&!s[t]&&(e=!1);e||t.push(i.question_id)}return t}toggleRequiredLabelsColor(e){let t=document.getElementsByClassName("question-mandatory");for(let i=0;i<t.length;i++){let s=document.getElementsByClassName("question-mandatory")[i].getAttribute("data-question-id");e.includes(Number(s))?t[i].classList.add("question-mandatory-red"):t[i].classList.remove("question-mandatory-red")}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Nh=i("sVTu");function Uh(e,t){if(1&e&&(c.jc(0,"div",4),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.gd(c.xc(2,1,e.type))}}function qh(e,t){if(1&e&&(c.jc(0,"span",5),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Nb("data-question-id",e.question_id),c.Mb(1),c.gd(c.xc(2,2,"(Required)"))}}function zh(e,t){if(1&e&&(c.ec(0,"div",6),c.wc(1,"sanitizeHtml")),2&e){const e=c.vc();c.Dc("innerHtml",c.xc(1,1,e.title),c.Vc)}}let Vh=(()=>{class e{constructor(){this.is_mandatory=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["question-title"]],inputs:{title:"title",type:"type",is_mandatory:"is_mandatory",question_id:"question_id"},decls:5,vars:3,consts:[[1,"sub-question-title-block"],["class","type text-grey-mid type-right-shifted",4,"ngIf"],["class","text-grey-mid question-mandatory",4,"ngIf"],["class","question-title",3,"innerHtml",4,"ngIf"],[1,"type","text-grey-mid","type-right-shifted"],[1,"text-grey-mid","question-mandatory"],[1,"question-title",3,"innerHtml"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,Uh,3,3,"div",1),c.jc(2,"div"),c.dd(3,qh,3,4,"span",2),c.ic(),c.ic(),c.dd(4,zh,2,3,"div",3)),2&e&&(c.Mb(1),c.Dc("ngIf","title"!==t.type),c.Mb(2),c.Dc("ngIf",t.is_mandatory),c.Mb(1),c.Dc("ngIf",t.title))},directives:[Ae.p],pipes:[E.b,Mi.a],encapsulation:2}),e})();const Bh=function(e){return{"padding-bottom":e}},Gh=function(e){return{expand:e}};function $h(e,t){if(1&e&&(c.jc(0,"div",6),c.ec(1,"div",7),c.wc(2,"sanitizeHtml"),c.jc(3,"div",8),c.ec(4,"dropdown",9),c.ic(),c.ic()),2&e){const e=t.$implicit,i=t.last,s=t.count,n=c.vc(2);c.Mb(1),c.Dc("innerHTML",c.xc(2,8,e.text),c.Vc),c.Mb(2),c.Dc("ngStyle",c.Ic(10,Bh,n.isQuestionLast&&i&&n.getOpenedElementIndex()>=s-2?140:null))("ngClass",c.Ic(12,Gh,n.isQuestionLast&&i&&n.getOpenedElementIndex()>0)),c.Mb(1),c.Dc("options",n.dropdownOptions)("name",e.id_answer)("enabled",n.enabled)("inputFormControl",n.basic_info.form_group.controls[n.basic_info.name].controls[e.id_answer])("value","")}}function Hh(e,t){if(1&e&&(c.jc(0,"div",4),c.dd(1,$h,5,14,"div",5),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngForOf",e.additional_info.answers)}}function Yh(e,t){if(1&e&&c.ec(0,"span",15),2&e){const e=c.vc().$implicit;c.Dc("innerHTML",e.title,c.Vc)}}function Wh(e,t){if(1&e&&(c.jc(0,"div"),c.dd(1,Yh,1,1,"span",18),c.ic()),2&e){const e=t.$implicit,i=c.vc().$implicit,s=c.vc(2);c.Mb(1),c.Dc("ngIf",s.user_status.id_answers&&e.id===s.user_status.id_answers[i.id_answer])}}function Qh(e,t){if(1&e&&(c.jc(0,"div",19),c.jc(1,"span",20),c.fd(2),c.wc(3,"t"),c.ic(),c.ec(4,"span",15),c.ic()),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Mb(2),c.hd("",c.xc(3,2,"_COMMENTS"),": "),c.Mb(2),c.Dc("innerHTML",t.feedback.comments[e.id_answer],c.Vc)}}const Kh=function(e,t){return{"zmdi-check-circle text-positive-green":e,"zmdi-close-circle text-error":t}};function Xh(e,t){if(1&e&&(c.jc(0,"div",12),c.jc(1,"div",13),c.ec(2,"i",14),c.ec(3,"span",15),c.ic(),c.jc(4,"div",13),c.dd(5,Wh,2,1,"div",16),c.ic(),c.dd(6,Qh,5,4,"div",17),c.ic()),2&e){const e=t.$implicit,i=c.vc(2);c.Mb(2),c.Dc("ngClass",c.Jc(4,Kh,i.user_status.id_answers&&i.user_status.id_answers[e.id_answer]&&i.user_status.is_correct[e.id_answer],i.user_status.id_answers&&i.user_status.id_answers[e.id_answer]&&!i.user_status.is_correct[e.id_answer])),c.Mb(1),c.Dc("innerHTML",e.text+" -",c.Vc),c.Mb(2),c.Dc("ngForOf",i.additional_info.associations),c.Mb(1),c.Dc("ngIf",i.feedback.comments&&i.feedback.comments[e.id_answer])}}function Jh(e,t){if(1&e&&(c.jc(0,"div",10),c.dd(1,Xh,7,7,"div",11),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngForOf",e.additional_info.answers)}}function Zh(e,t){if(1&e&&c.ec(0,"span",15),2&e){const e=c.vc().$implicit;c.Dc("innerHTML",e.title,c.Vc)}}function ep(e,t){if(1&e&&(c.jc(0,"div"),c.dd(1,Zh,1,1,"span",18),c.ic()),2&e){const e=t.$implicit,i=c.vc().$implicit,s=c.vc(3);c.Mb(1),c.Dc("ngIf",e.id===s.feedback.correct_answers[i.id_answer])}}function tp(e,t){if(1&e&&(c.jc(0,"div",12),c.ec(1,"div",24),c.jc(2,"div",13),c.dd(3,ep,2,1,"div",16),c.ic(),c.ic()),2&e){const e=t.$implicit,i=c.vc(3);c.Mb(1),c.Dc("innerHTML",e.text+" -",c.Vc),c.Mb(2),c.Dc("ngForOf",i.additional_info.associations)}}const ip=function(){return{category:"player"}};function sp(e,t){if(1&e&&(c.jc(0,"div",23),c.fd(1),c.wc(2,"t"),c.dd(3,tp,4,2,"div",11),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,2,"Correct answers:",c.Hc(5,ip))," "),c.Mb(2),c.Dc("ngForOf",e.additional_info.answers)}}function np(e,t){if(1&e&&(c.jc(0,"div",21),c.fd(1),c.wc(2,"t"),c.dd(3,sp,4,6,"div",22),c.ic()),2&e){const e=c.vc();c.Mb(1),c.id(" ",c.xc(2,3,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(2),c.Dc("ngIf",e.feedback.correct_answers)}}let ap=(()=>{class e{constructor(){this.isQuestionLast=!1,this.dropDownComponents=[],this.enabled=!0,this.type=E.a.t("standard","Associate")}getOpenedElementIndex(){for(let e=0;e<this.dropDownComponents.length;e++)if(this.dropDownComponents[e].isOpened)return e;return 0}ngOnInit(){this.dropdownOptions=[];for(let e=0;e<this.additional_info.associations.length;e++)this.dropdownOptions.push({label:this.additional_info.associations[e].title,value:this.additional_info.associations[e].id});this.basic_info.mode===Nh.a.READONLY&&(this.enabled=!1)}ngAfterViewInit(){this.isQuestionLast&&Object(xi.a)(this.associateWrapper.changes).pipe(Object(ee.a)(1)).subscribe(()=>{this.dropDownComponents=this.associateWrapper.toArray()})}ngOnChanges(){const e={};for(let t=0;t<this.additional_info.answers.length;t++){const i=this.additional_info.answers[t].id_answer;e[i]=new Ke.e(this.user_status&&this.user_status.id_answers?this.user_status.id_answers[i]:"")}this.basic_info.form_group.addControl(this.basic_info.name,new Ke.h(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["associate"]],viewQuery:function(e,t){if(1&e&&c.md(ii.a,1),2&e){let e;c.Qc(e=c.sc())&&(t.associateWrapper=e)}},inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info",isQuestionLast:"isQuestionLast"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],["class","associate-wrap",4,"ngIf"],["class","review-answers",4,"ngIf"],["class","review-block",4,"ngIf"],[1,"associate-wrap"],["class","row mdl-grid",4,"ngFor","ngForOf"],[1,"row","mdl-grid"],[1,"mdl-cell","mdl-cell--8-col","text-for-association",3,"innerHTML"],[1,"mdl-cell","mdl-cell--4-col","dropdown-choices",3,"ngStyle","ngClass"],[3,"options","name","enabled","inputFormControl","value"],[1,"review-answers"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"part-wrap"],[1,"zmdi",3,"ngClass"],[3,"innerHTML"],[4,"ngFor","ngForOf"],["class","comments",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"comments"],[1,"text-grey-mid"],[1,"review-block"],["class","correct-answers single-choice review-mode",4,"ngIf"],[1,"correct-answers","single-choice","review-mode"],[1,"part-wrap",3,"innerHTML"]],template:function(e,t){1&e&&(c.ec(0,"question-title",0),c.dd(1,Hh,2,1,"div",1),c.dd(2,Jh,2,1,"div",2),c.dd(3,np,4,5,"div",3)),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngIf","review"!==t.basic_info.mode),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[Vh,Ae.p,Ae.o,Ae.q,Ae.n,ii.a],pipes:[Mi.a,E.b],styles:["[_nghost-%COMP%]     .dropdown-body {\n            max-height: 140px !important;\n        }"]}),e})();function op(e,t){if(1&e&&c.ec(0,"textfield",4),2&e){const e=c.vc();c.Ec("value",null==e.user_status?null:e.user_status.answer),c.Dc("floating_label","true")("disabledField",e.disabled)("inputFormControl",e.basic_info.form_group.controls[e.basic_info.name])}}function rp(e,t){if(1&e&&(c.jc(0,"div",9),c.jc(1,"span",10),c.fd(2),c.wc(3,"t"),c.ic(),c.ec(4,"span",7),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.hd("",c.xc(3,2,"_COMMENTS"),": "),c.Mb(2),c.Dc("innerHTML",e.feedback.comment,c.Vc)}}const cp=function(e,t){return{"zmdi-check-circle text-positive-green":e,"zmdi-close-circle text-error":t}};function lp(e,t){if(1&e&&(c.jc(0,"div",5),c.ec(1,"i",6),c.ec(2,"span",7),c.dd(3,rp,5,4,"div",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngClass",c.Jc(3,cp,e.user_answer&&e.user_status.is_correct,e.user_answer&&!e.user_status.is_correct)),c.Mb(1),c.Dc("innerHTML",e.user_status.answer,c.Vc),c.Mb(1),c.Dc("ngIf",e.feedback.comment)}}const dp=function(){return{category:"player"}};function up(e,t){if(1&e&&(c.jc(0,"div",13),c.fd(1),c.wc(2,"t"),c.jc(3,"span"),c.fd(4),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,2,"Correct answers:",c.Hc(5,dp))," "),c.Mb(3),c.gd(e.feedback.correct_answer)}}function hp(e,t){if(1&e&&(c.jc(0,"div",11),c.fd(1),c.wc(2,"t"),c.dd(3,up,5,6,"div",12),c.ic()),2&e){const e=c.vc();c.Mb(1),c.id(" ",c.xc(2,3,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(2),c.Dc("ngIf",e.feedback.correct_answer&&!e.user_status.is_correct)}}let pp=(()=>{class e{constructor(){this.disabled=!1}ngOnInit(){"readonly"===this.basic_info.mode&&(this.disabled=!0),!nt.a.isEmpty(this.user_status)&&this.user_status.answer&&(this.user_answer=this.user_status.answer.toLowerCase()),!nt.a.isEmpty(this.feedback)&&this.feedback.correct_answer&&(this.feedback_answer=this.feedback.correct_answer.toLowerCase())}ngOnChanges(){this.type=E.a.t("test","_QUEST_TEXT_ENTRY");let e=!nt.a.isEmpty(this.user_status)&&this.user_status.answer?this.user_status.answer:"";this.basic_info.form_group.addControl(this.basic_info.name,new Ke.e(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["text-entry"]],inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],[3,"value","floating_label","disabledField","inputFormControl",4,"ngIf"],["class","review-content",4,"ngIf"],["class","review-block",4,"ngIf"],[3,"value","floating_label","disabledField","inputFormControl"],[1,"review-content"],[1,"zmdi",3,"ngClass"],[3,"innerHTML"],["class","comments",4,"ngIf"],[1,"comments"],[1,"text-grey-mid"],[1,"review-block"],["class","correct-answers single-choice review-mode",4,"ngIf"],[1,"correct-answers","single-choice","review-mode"]],template:function(e,t){1&e&&(c.ec(0,"question-title",0),c.dd(1,op,1,4,"textfield",1),c.dd(2,lp,4,6,"div",2),c.dd(3,hp,4,5,"div",3)),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngIf","review"!==t.basic_info.mode),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[Vh,Ae.p,_t.a,Ae.n],pipes:[E.b],encapsulation:2}),e})();function mp(e,t){if(1&e&&c.ec(0,"radio",6),2&e){const e=t.$implicit,i=c.vc(2);c.Ec("id",e.id_answer),c.Dc("label",e.text)("enabled",i.enabled)("inputFormControl",i.form_control)("name",i.groupName)("value",e.id_answer)}}function gp(e,t){if(1&e&&(c.jc(0,"div",4),c.dd(1,mp,1,6,"radio",5),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngForOf",e.additional_info.answers)}}function bp(e,t){if(1&e&&(c.jc(0,"div",13),c.jc(1,"span",14),c.fd(2),c.wc(3,"t"),c.ic(),c.ec(4,"span",15),c.ic()),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Mb(2),c.hd("",c.xc(3,2,"_COMMENTS"),": "),c.Mb(2),c.Dc("innerHTML",t.feedback.comments[e.id_answer],c.Vc)}}const fp=function(e,t){return{"correct text-positive-green":e,"wrong text-error":t}},vp=function(e,t){return{"zmdi-check-circle":e,"zmdi-close-circle":t}};function _p(e,t){if(1&e&&(c.jc(0,"li"),c.jc(1,"span",9),c.ec(2,"i",10),c.ic(),c.ec(3,"span",11),c.wc(4,"sanitizeHtml"),c.dd(5,bp,5,4,"div",12),c.ic()),2&e){const e=t.$implicit,i=c.vc(2);c.Mb(1),c.Dc("ngClass",c.Jc(6,fp,e.id_answer===i.user_status.id_answer&&i.user_status.is_correct,e.id_answer===i.user_status.id_answer&&!i.user_status.is_correct)),c.Mb(1),c.Dc("ngClass",c.Jc(9,vp,e.id_answer===i.user_status.id_answer&&i.user_status.is_correct,e.id_answer===i.user_status.id_answer&&!i.user_status.is_correct)),c.Mb(1),c.Dc("innerHtml",c.xc(4,4,e.text),c.Vc),c.Mb(2),c.Dc("ngIf",i.feedback.comments&&i.feedback.comments[e.id_answer]&&i.user_status.id_answer&&i.user_status.id_answer==e.id_answer)}}function wp(e,t){if(1&e&&(c.jc(0,"div",7),c.jc(1,"ul"),c.dd(2,_p,6,12,"li",8),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("ngForOf",e.additional_info.answers)}}const yp=function(e){return{"correct text-positive-green":e}},Cp=function(e){return{"zmdi-check-circle":e}};function Sp(e,t){if(1&e&&(c.jc(0,"li"),c.jc(1,"span",9),c.ec(2,"i",10),c.ic(),c.ec(3,"span",11),c.wc(4,"sanitizeHtml"),c.ic()),2&e){const e=t.$implicit,i=c.vc(3);c.Mb(1),c.Dc("ngClass",c.Ic(5,yp,e.id_answer===i.feedback.correct_answer)),c.Mb(1),c.Dc("ngClass",c.Ic(7,Cp,e.id_answer===i.feedback.correct_answer)),c.Mb(1),c.Dc("innerHtml",c.xc(4,3,e.text),c.Vc)}}const Tp=function(){return{category:"player"}};function kp(e,t){if(1&e&&(c.jc(0,"div",18),c.fd(1),c.wc(2,"t"),c.jc(3,"ul"),c.dd(4,Sp,5,9,"li",8),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,2,"Correct answers:",c.Hc(5,Tp))," "),c.Mb(3),c.Dc("ngForOf",e.additional_info.answers)}}function Ip(e,t){if(1&e&&(c.jc(0,"div",16),c.fd(1),c.wc(2,"t"),c.dd(3,kp,5,6,"div",17),c.ic()),2&e){const e=c.vc();c.Mb(1),c.id(" ",c.xc(2,3,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(2),c.Dc("ngIf",e.feedback.correct_answer&&!e.user_status.is_correct)}}let xp=0,Dp=(()=>{class e{constructor(){this.enabled=!1,xp++,this.groupName="group-"+xp,this.type=E.a.t("poll","_QUEST_CHOICE")}ngOnChanges(){this.basic_info.mode===Nh.a.ANSWER&&(this.enabled=!0);const e=new Ke.e(!(nt.a.isEmpty(this.user_status)||!this.user_status.id_answer)&&this.user_status.id_answer);this.basic_info.form_group.addControl(this.basic_info.name,e),this.form_control=this.basic_info.form_group.controls[this.basic_info.name]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["single-choice"]],inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],["class","single-choice",4,"ngIf"],["class","single-choice review-mode",4,"ngIf"],["class","review-block",4,"ngIf"],[1,"single-choice"],[3,"id","label","enabled","inputFormControl","name","value",4,"ngFor","ngForOf"],[3,"id","label","enabled","inputFormControl","name","value"],[1,"single-choice","review-mode"],[4,"ngFor","ngForOf"],[1,"circle-icon",3,"ngClass"],[1,"zmdi",3,"ngClass"],[1,"title",3,"innerHtml"],["class","comments",4,"ngIf"],[1,"comments"],[1,"text-grey-mid"],[3,"innerHTML"],[1,"review-block"],["class","correct-answers single-choice review-mode",4,"ngIf"],[1,"correct-answers","single-choice","review-mode"]],template:function(e,t){1&e&&(c.ec(0,"question-title",0),c.dd(1,gp,2,1,"div",1),c.dd(2,wp,3,1,"div",2),c.dd(3,Ip,4,5,"div",3)),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngIf","review"!=t.basic_info.mode),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[Vh,Ae.p,Ae.o,jn.a,Ae.n],pipes:[Mi.a,E.b],encapsulation:2}),e})();function Op(e,t){if(1&e&&c.ec(0,"checkbox",6),2&e){const e=t.$implicit,i=c.vc(2);c.Ec("id",e.id_answer),c.Dc("label",e.text)("inputFormControl",i.basicInfo.form_group.controls[i.basicInfo.name].controls[e.id_answer])("name",e.text)("value",e.id_answer)("enabled",i.enabled)("checked",!!i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer+"")>-1)}}function Ep(e,t){if(1&e&&(c.jc(0,"div",4),c.dd(1,Op,1,7,"checkbox",5),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngForOf",e.additionalInfo.answers)("ngForTrackBy",e.answersTrackByFunction)}}function Pp(e,t){if(1&e&&(c.jc(0,"div",13),c.jc(1,"span",14),c.fd(2),c.wc(3,"t"),c.ic(),c.ec(4,"span",15),c.ic()),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Mb(2),c.hd("",c.xc(3,2,"_COMMENTS"),": "),c.Mb(2),c.Dc("innerHTML",t.feedback.comments[e.id_answer],c.Vc)}}const Mp=function(e,t){return{"correct text-positive-green":e,"wrong text-error":t}},Ap=function(e,t){return{"zmdi-check-circle":e,"zmdi-close-circle":t}};function Lp(e,t){if(1&e&&(c.jc(0,"li"),c.jc(1,"span",9),c.ec(2,"i",10),c.ic(),c.ec(3,"span",11),c.dd(4,Pp,5,4,"div",12),c.ic()),2&e){const e=t.$implicit,i=c.vc(2);c.Mb(1),c.Dc("ngClass",c.Jc(4,Mp,i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer)>-1&&i.userStatus.is_correct[e.id_answer],i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer)>-1&&!i.userStatus.is_correct[e.id_answer])),c.Mb(1),c.Dc("ngClass",c.Jc(7,Ap,i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer)>-1&&i.userStatus.is_correct[e.id_answer],i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer)>-1&&!i.userStatus.is_correct[e.id_answer])),c.Mb(1),c.Dc("innerHtml",e.text,c.Vc),c.Mb(1),c.Dc("ngIf",i.feedback.comments&&i.feedback.comments[e.id_answer]&&i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer)>-1)}}function jp(e,t){if(1&e&&(c.jc(0,"div",7),c.jc(1,"ul"),c.dd(2,Lp,5,10,"li",8),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("ngForOf",e.additionalInfo.answers)("ngForTrackBy",e.answersTrackByFunction)}}const Fp=function(e){return{"correct text-positive-green":e}},Rp=function(e){return{"zmdi-check-circle":e}};function Np(e,t){if(1&e&&(c.jc(0,"li"),c.jc(1,"span",9),c.ec(2,"i",10),c.ic(),c.ec(3,"span",11),c.wc(4,"sanitizeHtml"),c.ic()),2&e){const e=t.$implicit,i=c.vc(3);c.Mb(1),c.Dc("ngClass",c.Ic(5,Fp,i.feedback.correct_answers.indexOf(e.id_answer)>-1)),c.Mb(1),c.Dc("ngClass",c.Ic(7,Rp,i.feedback.correct_answers.indexOf(e.id_answer)>-1)),c.Mb(1),c.Dc("innerHtml",c.xc(4,3,e.text),c.Vc)}}const Up=function(){return{category:"player"}};function qp(e,t){if(1&e&&(c.jc(0,"div",18),c.fd(1),c.wc(2,"t"),c.jc(3,"ul"),c.dd(4,Np,5,9,"li",8),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,3,"Correct answers:",c.Hc(6,Up))," "),c.Mb(3),c.Dc("ngForOf",e.additionalInfo.answers)("ngForTrackBy",e.answersTrackByFunction)}}function zp(e,t){if(1&e&&(c.jc(0,"div",16),c.fd(1),c.wc(2,"t"),c.dd(3,qp,5,7,"div",17),c.ic()),2&e){const e=c.vc();c.Mb(1),c.id(" ",c.xc(2,3,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(2),c.Dc("ngIf",e.feedback.correct_answers&&e.showCorrectAnswersOnReview)}}let Vp=(()=>{class e{constructor(){this.type=E.a.t("test","_QUEST_CHOICE_MULTIPLE"),this.enabled=!1,this.showCorrectAnswersOnReview=!0}ngOnChanges(){this.userStatus.id_answers&&this.userStatus.id_answers.length&&(this.userStatus.id_answers=this.userStatus.id_answers.map(e=>String(e))),this.additionalInfo.answers&&this.additionalInfo.answers.length&&(this.additionalInfo.answers=this.additionalInfo.answers.map(e=>Object.assign(Object.assign({},e),{id_answer:String(e.id_answer)}))),this.feedback&&this.feedback.correct_answers&&this.feedback.correct_answers.length&&(this.feedback.correct_answers=this.feedback.correct_answers.map(e=>String(e)));const e={};for(const t of this.additionalInfo.answers){const i=t.id_answer,s=!!(this.userStatus.id_answers&&this.userStatus.id_answers.length>0)&&-1!==this.userStatus.id_answers.indexOf(String(i));e[i]=new Ke.e(s)}this.showCorrectAnswersOnReview=this.canShowCorrectAnswers(),this.basicInfo.form_group.addControl(this.basicInfo.name,new Ke.h(e))}ngOnInit(){this.basicInfo.mode===Nh.a.ANSWER&&(this.enabled=!0)}canShowCorrectAnswers(){if(this.userStatus.is_correct){let e=0;for(const t in this.userStatus.is_correct)this.userStatus.is_correct[t]&&e++;if(this.feedback.correct_answers)return this.feedback.correct_answers.length!==e}return!0}answersTrackByFunction(e,t){return t.id_answer}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["multiple-choice"]],inputs:{additionalInfo:"additionalInfo",userStatus:"userStatus",feedback:"feedback",basicInfo:"basicInfo"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],["class","single-choice",4,"ngIf"],["class","multiple-choice review-mode",4,"ngIf"],["class","review-block multiple",4,"ngIf"],[1,"single-choice"],[3,"id","label","inputFormControl","name","value","enabled","checked",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","label","inputFormControl","name","value","enabled","checked"],[1,"multiple-choice","review-mode"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"circle-icon",3,"ngClass"],[1,"zmdi",3,"ngClass"],[1,"title",3,"innerHtml"],["class","comments",4,"ngIf"],[1,"comments"],[1,"text-grey-mid"],[3,"innerHTML"],[1,"review-block","multiple"],["class","correct-answers single-choice review-mode",4,"ngIf"],[1,"correct-answers","single-choice","review-mode"]],template:function(e,t){1&e&&(c.ec(0,"question-title",0),c.dd(1,Ep,2,2,"div",1),c.dd(2,jp,3,2,"div",2),c.dd(3,zp,4,5,"div",3)),2&e&&(c.Dc("title",t.basicInfo.title)("type",t.type)("is_mandatory",t.basicInfo.is_mandatory)("question_id",t.basicInfo.name),c.Mb(1),c.Dc("ngIf","review"!==t.basicInfo.mode),c.Mb(1),c.Dc("ngIf","review"===t.basicInfo.mode&&t.userStatus.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basicInfo.mode))},directives:[Vh,Ae.p,Ae.o,Fn.a,Ae.n],pipes:[E.b,Mi.a],encapsulation:2}),e})();function Bp(e,t){if(1&e&&c.ec(0,"textareaField",4),2&e){const e=c.vc();c.Vb("invisible",!e.isEditorReady),c.Dc("type","boxed")("label",e.label)("name",e.basic_info.name)("floating_label",e.floating_label)("inputFormControl",e.control)("disabledField",e.disabled)("focus_on_load",!0)("tinymce_options",e.tinymce_options)}}function Gp(e,t){if(1&e&&c.ec(0,"textareaField",5),2&e){const e=c.vc();c.Dc("type","mdl")("label","")("name",e.basic_info.name)("value",e.user_status.answer)("floating_label",e.floating_label)("inputFormControl",e.control)("disabledField",!0)("tinymce_options",e.tinymce_options)}}function $p(e,t){if(1&e&&(c.jc(0,"div",6),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.id(" ",c.xc(2,2,"_SCORE"),": ",e.feedback.user_score," ")}}var Hp=0;let Yp=(()=>{class e{constructor(e){this.cdr=e,this.isEditorReady=!1,this.floating_label=!0,this.disabled=!1,Hp++;const t=x.b.getInstance().getLangByShortCode(o.a.getInstance().language).is_rtl;this.tinymce_options={directionality:t?"rtl":"ltr",selector:"#textarea-boxed"+Hp,menubar:!1,statusbar:!1,toolbar:!1,plugins:["autoresize"],autoresize_min_height:70,init_instance_callback:e=>{this.isEditorReady=!0,this.cdr.detectChanges()}},this.type=E.a.t("poll","_QUEST_EXTENDED_TEXT")}ngOnInit(){this.basic_info.mode===Nh.a.READONLY&&(this.disabled=!0)}ngOnChanges(){let e=null;if(!nt.a.isEmpty(this.user_status))if(this.user_status.answer){const t=document.createElement("textarea");t.innerHTML=this.user_status.answer,this.user_status.answer=t.value,e=this.user_status.answer}else this.user_status.text&&(e=this.user_status.text);this.basic_info.form_group.addControl(this.basic_info.name,new Ke.e(e)),this.control=this.basic_info.form_group.controls[this.basic_info.name],this.label=E.a.t("standard","Answer here")}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["extended-text"]],inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],[3,"invisible","type","label","name","floating_label","inputFormControl","disabledField","focus_on_load","tinymce_options",4,"ngIf"],[3,"type","label","name","value","floating_label","inputFormControl","disabledField","tinymce_options",4,"ngIf"],["class","review-block",4,"ngIf"],[3,"type","label","name","floating_label","inputFormControl","disabledField","focus_on_load","tinymce_options"],[3,"type","label","name","value","floating_label","inputFormControl","disabledField","tinymce_options"],[1,"review-block"]],template:function(e,t){1&e&&(c.ec(0,"question-title",0),c.dd(1,Bp,1,10,"textareaField",1),c.dd(2,Gp,1,8,"textareaField",2),c.dd(3,$p,3,4,"div",3)),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngIf","review"!==t.basic_info.mode),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[Vh,Ae.p,Fu.a],pipes:[E.b],encapsulation:2}),e})();const Wp=["inlineDropDownElementWrapper"];function Qp(e,t){if(1&e&&(c.ec(0,"div",6,7),c.wc(2,"sanitizeHtml")),2&e){const e=c.vc();c.Sb("question-with-token",e.hasEnoughSpaceToOpenDownwards()?"":" open-dropdown-up","","review"!==e.basic_info.mode&&e.enabled?"":" review-question-with-token",""),c.Dc("innerHtml",c.xc(2,5,e.concatenatedHTMLElements),c.Vc)}}function Kp(e,t){if(1&e&&c.ec(0,"dropdown",8,9),2&e){const e=c.vc();c.Dc("options",e.dropdownOptions)("floating_label",!0)("label",e.label)("name",e.basic_info.name)("enabled",e.enabled)("inputFormControl",e.basic_info.form_group.controls[e.basic_info.name])}}function Xp(e,t){if(1&e&&(c.jc(0,"div",16),c.jc(1,"span",17),c.fd(2),c.wc(3,"t"),c.ic(),c.ec(4,"span",18),c.ic()),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Mb(2),c.hd("",c.xc(3,2,"_COMMENTS"),": "),c.Mb(2),c.Dc("innerHTML",t.feedback.comments[e.id_answer],c.Vc)}}const Jp=function(e,t,i){return{"correct text-positive-green":e,neutral:t,"wrong text-error":i}},Zp=function(e,t){return{"zmdi-check-circle":e,"zmdi-close-circle":t}};function em(e,t){if(1&e&&(c.jc(0,"li"),c.jc(1,"span",12),c.ec(2,"i",13),c.ic(),c.ec(3,"span",14),c.wc(4,"sanitizeHtml"),c.dd(5,Xp,5,4,"div",15),c.ic()),2&e){const e=t.$implicit,i=c.vc(2);c.Mb(1),c.Dc("ngClass",c.Kc(6,Jp,i.isAnswerCorrect(e),!i.feedback.correct_answer&&i.user_status&&e.id_answer===i.user_status.id_answer,i.isAnswerWrong(e))),c.Mb(1),c.Dc("ngClass",c.Jc(10,Zp,i.isAnswerCorrect(e),i.isAnswerWrong(e))),c.Mb(1),c.Dc("innerHTML",c.xc(4,4,e.text),c.Vc),c.Mb(2),c.Dc("ngIf",i.feedback.correct_answer&&i.feedback.comments&&i.feedback.comments[e.id_answer])}}function tm(e,t){if(1&e&&(c.jc(0,"div",10),c.jc(1,"ul"),c.dd(2,em,6,13,"li",11),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("ngForOf",e.additional_info.answers)}}const im=function(e){return{"correct text-positive-green":e}},sm=function(e){return{"zmdi-check-circle":e}};function nm(e,t){if(1&e&&(c.jc(0,"li"),c.jc(1,"span",12),c.ec(2,"i",13),c.ic(),c.ec(3,"span",22),c.wc(4,"sanitizeHtml"),c.ic()),2&e){const e=t.$implicit,i=c.vc(3);c.Mb(1),c.Dc("ngClass",c.Ic(5,im,e.id_answer===i.feedback.correct_answer)),c.Mb(1),c.Dc("ngClass",c.Ic(7,sm,e.id_answer===i.feedback.correct_answer)),c.Mb(1),c.Dc("innerHtml",c.xc(4,3,e.text),c.Vc)}}const am=function(){return{category:"player"}};function om(e,t){if(1&e&&(c.jc(0,"div",21),c.fd(1),c.wc(2,"t"),c.jc(3,"ul"),c.dd(4,nm,5,9,"li",11),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,2,"Correct answers:",c.Hc(5,am))," "),c.Mb(3),c.Dc("ngForOf",e.additional_info.answers)}}function rm(e,t){if(1&e&&(c.jc(0,"div",19),c.fd(1),c.wc(2,"t"),c.dd(3,om,5,6,"div",20),c.ic()),2&e){const e=c.vc();c.Mb(1),c.id(" ",c.xc(2,3,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(2),c.Dc("ngIf",e.feedback.correct_answer&&!e.user_status.is_correct)}}const cm=function(e,t){return{expand:e,"last-question":t}};let lm=(()=>{class e{constructor(){this.isQuestionLast=!1,this.dropDownComponents=[],this.dropdownOptions=[],this.enabled=!0,this.concatenatedHTMLElements="",this.openDropdownUpwards=!1,this.disposableListeners=[],this.label=E.a.t("standard","Choose something..."),this.type=E.a.t("standard","Inline choice")}ngOnChanges(){const e=!(nt.a.isEmpty(this.user_status)||!this.user_status.id_answer)&&this.user_status.id_answer;if(this.basic_info.form_group.addControl(this.basic_info.name,new Ke.e(e)),this.additional_info.answers.length>0)for(let t=0;t<this.additional_info.answers.length;t++)this.dropdownOptions.push({label:this.additional_info.answers[t].text,value:this.additional_info.answers[t].id_answer})}ngOnInit(){this.basic_info.mode===te.p.READONLY&&(this.enabled=!1);const e=this.basic_info.title.split("[answer]");e.length>1&&this.createDropdownHTMLForShortcode(e)}ngAfterViewInit(){this.isQuestionLast&&Object(xi.a)(this.associateWrapper.changes).pipe(Object(ee.a)(1)).subscribe(()=>{this.dropDownComponents=this.associateWrapper.toArray()}),this.concatenatedHTMLElements.length>0&&this.attachEventListenersToCustomDropDown()}createDropdownHTMLForShortcode(e){for(let t=0;t<e.length;t++)this.concatenatedHTMLElements+=e[t],0===t&&(this.concatenatedHTMLElements+="review"!==this.basic_info.mode||this.user_status.show_user_answers?this.fakeDropDownUIComponentForInlineAnswer():"<span>*****</span>")}fakeDropDownUIComponentForInlineAnswer(){const e=document,t=e.createElement("ul");t.className="list-options";for(let c=0;c<this.dropdownOptions.length;c++){const i=e.createElement("li");i.className="bg-hover-main text-hover-white text-grey-dark",0!==c||"review"===this.basic_info.mode||this.user_status?("review"!==this.basic_info.mode&&this.user_status&&this.dropdownOptions[c].value===this.user_status.id_answer||"review"===this.basic_info.mode&&this.basic_info.form_group.controls[this.basic_info.name].value===this.dropdownOptions[c].value)&&(i.className+=" is-selected"):i.className+=" is-selected",i.innerHTML=this.dropdownOptions[c].label,i.setAttribute("rel",this.dropdownOptions[c].value),t.innerHTML+=i.outerHTML}const i=e.createElement("div");i.className="dropdown-items",i.innerHTML=t.outerHTML;const s=e.createElement("div");s.className="dropdown-body",s.innerHTML=i.outerHTML;const n=e.createElement("div");n.className="dropdown-head text-grey-dark border-grey";const a=e.createElement("span");if(a.className="dropdown-title text-grey-dark","review"!==this.basic_info.mode)if(this.user_status&&this.user_status.hasOwnProperty("id_answer")){const e=this.dropdownOptions.filter(e=>e.value===this.user_status.id_answer)[0];a.innerHTML=e.label,this.basic_info.form_group.controls[this.basic_info.name].setValue(e.value)}else a.innerHTML=this.dropdownOptions[0].label,this.basic_info.form_group.controls[this.basic_info.name].setValue(this.dropdownOptions[0].value);else a.innerHTML=this.returnOptionLabel(this.basic_info.form_group.controls[this.basic_info.name].value);n.innerHTML=a.outerHTML;const o=e.createElement("div");o.className="dropdown",o.innerHTML=n.outerHTML,o.innerHTML+=s.outerHTML;const r=e.createElement("div");return r.className="dropdown-wrapper",r.innerHTML+=o.outerHTML,r.outerHTML}handleDropDownToggle(e,t,i){i&&i.stopPropagation(),e.nativeElement.querySelector(".dropdown").classList[t]("dropdown-opened"),e.nativeElement.querySelector(".dropdown-head").classList[t]("border-main")}hasEnoughSpaceToOpenDownwards(){return 0===this.concatenatedHTMLElements.length||!this.inlineElement||!this.inlineElement.nativeElement.classList.contains("open-dropdown-up")&&window.outerHeight>this.inlineElement.nativeElement.querySelector(".dropdown-items").getBoundingClientRect().bottom+100}attachEventListenersToCustomDropDown(){"review"===this.basic_info.mode&&this.user_status.show_user_answers||Object(xi.a)(this.inlineDropDownElementWrapper.changes).pipe(Object(ee.a)(1)).subscribe(()=>{this.inlineDropDownElementWrapper.toArray().forEach(e=>{this.disposableListeners.push({element:e.nativeElement.querySelector(".dropdown"),listener:this.handleDropDownToggle.bind(this,e,"toggle")}),this.disposableListeners.push({element:document,listener:this.handleDropDownToggle.bind(this,e,"remove")});const t=e.nativeElement.querySelectorAll("ul.list-options li");for(const i of t)this.disposableListeners.push({element:i,listener:this.chooseDropDownOption.bind(this,e)});this.handleEventListeners("addEventListener")})})}returnOptionLabel(e){const t=nt.a.head(this.dropdownOptions.filter(t=>t.value===e));return t?t.label:""}getDropDownTitleElement(e){return e.classList.contains("dropdown-wrapper")?e.querySelector(".dropdown-title"):e.parentElement?this.getDropDownTitleElement(e.parentElement):null}handleEventListeners(e){if(0!==this.disposableListeners.length)for(const t of this.disposableListeners)t.element[e]("click",t.listener)}chooseDropDownOption(e,t){var i;t.stopPropagation();const s=Number(t.currentTarget.getAttribute("rel")),n=this.getDropDownTitleElement(t.srcElement.parentElement);n&&(n.innerHTML=this.returnOptionLabel(s));const a=(null===(i=t.currentTarget.parentElement)||void 0===i?void 0:i.children)||[],o=a.length;for(let r=0;r<o;r++)a[r].classList.remove("is-selected");t.currentTarget.classList.add("is-selected"),this.basic_info.form_group.controls[this.basic_info.name].setValue(s),this.handleDropDownToggle(e,"remove",t)}isAnswerCorrect(e){return e.id_answer===this.user_status.id_answer&&this.user_status.is_correct}isAnswerWrong(e){return e.id_answer===this.user_status.id_answer&&!this.user_status.is_correct}ngOnDestroy(){this.handleEventListeners("removeEventListener")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["inline-choice"]],viewQuery:function(e,t){if(1&e&&(c.md(Wp,1),c.md(ii.a,1),c.md(Wp,1)),2&e){let e;c.Qc(e=c.sc())&&(t.inlineElement=e.first),c.Qc(e=c.sc())&&(t.associateWrapper=e),c.Qc(e=c.sc())&&(t.inlineDropDownElementWrapper=e)}},inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info",isQuestionLast:"isQuestionLast"},features:[c.Kb],decls:6,vars:12,consts:[[3,"title","type","is_mandatory","question_id"],[1,"inline-dropdown-item",3,"ngClass"],[3,"class","innerHtml",4,"ngIf"],[3,"options","floating_label","label","name","enabled","inputFormControl",4,"ngIf"],["class","single-choice review-mode",4,"ngIf"],["class","review-block",4,"ngIf"],[3,"innerHtml"],["inlineDropDownElementWrapper",""],[3,"options","floating_label","label","name","enabled","inputFormControl"],["inlineElement",""],[1,"single-choice","review-mode"],[4,"ngFor","ngForOf"],[1,"circle-icon",3,"ngClass"],[1,"zmdi",3,"ngClass"],[1,"title",3,"innerHTML"],["class","comments",4,"ngIf"],[1,"comments"],[1,"text-grey-mid"],[3,"innerHTML"],[1,"review-block"],["class","correct-answers single-choice review-mode",4,"ngIf"],[1,"correct-answers","single-choice","review-mode"],[1,"title",3,"innerHtml"]],template:function(e,t){1&e&&(c.ec(0,"question-title",0),c.jc(1,"div",1),c.dd(2,Qp,3,7,"div",2),c.dd(3,Kp,2,6,"dropdown",3),c.ic(),c.dd(4,tm,3,1,"div",4),c.dd(5,rm,4,5,"div",5)),2&e&&(c.Dc("title",0!==(null==t.concatenatedHTMLElements?null:t.concatenatedHTMLElements.length)?null:t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngClass",c.Jc(9,cm,t.isQuestionLast&&(null==t.dropDownComponents[0]?null:t.dropDownComponents[0].isOpened),t.isQuestionLast)),c.Mb(1),c.Dc("ngIf",0!==(null==t.concatenatedHTMLElements?null:t.concatenatedHTMLElements.length)),c.Mb(1),c.Dc("ngIf","review"!==t.basic_info.mode&&0===(null==t.concatenatedHTMLElements?null:t.concatenatedHTMLElements.length)),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[Vh,Ae.n,Ae.p,ii.a,Ae.o],pipes:[Mi.a,E.b],encapsulation:2}),e})();const dm=["fibQuestionContainer"];function um(e,t){1&e&&(c.jc(0,"th"),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.gd(c.xc(2,1,"Answers")))}const hm=function(){return{category:"test"}};function pm(e,t){1&e&&(c.jc(0,"th"),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.gd(c.yc(2,1,"Correct answers",c.Hc(4,hm))))}const mm=function(e,t){return{"text-positive-green":e,"text-error":t}};function gm(e,t){if(1&e&&(c.jc(0,"td",11),c.fd(1),c.ic()),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Dc("ngClass",c.Jc(2,mm,t.user_status.is_correct&&t.user_status.is_correct[e.id],!(t.user_status.is_correct&&t.user_status.is_correct[e.id]))),c.Mb(1),c.hd(" ",e.id&&t.user_status.id_answers&&t.user_status.id_answers[e.id]?t.user_status.id_answers[e.id]:""," ")}}function bm(e,t){if(1&e&&c.ec(0,"td",1),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Dc("innerHTML",t.feedback.correct_answers[e.id],c.Vc)}}function fm(e,t){if(1&e&&c.ec(0,"td",1),2&e){const e=c.vc().$implicit,t=c.vc(2);c.Dc("innerHTML",t.feedback.comments[e.id],c.Vc)}}function vm(e,t){if(1&e&&(c.jc(0,"tr"),c.dd(1,gm,2,5,"td",9),c.dd(2,bm,1,1,"td",10),c.dd(3,fm,1,1,"td",10),c.ic()),2&e){const e=t.$implicit,i=c.vc(2);c.Mb(1),c.Dc("ngIf",i.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf",i.feedback.correct_answers&&e.id&&i.feedback.correct_answers[e.id]),c.Mb(1),c.Dc("ngIf",i.feedback.comments&&e.id&&i.feedback.comments[e.id])}}function _m(e,t){if(1&e&&(c.jc(0,"div",4),c.fd(1),c.wc(2,"t"),c.jc(3,"div",5),c.jc(4,"table"),c.jc(5,"tr",6),c.dd(6,um,3,3,"th",7),c.dd(7,pm,3,5,"th",7),c.jc(8,"th"),c.fd(9),c.wc(10,"t"),c.ic(),c.ic(),c.dd(11,vm,4,3,"tr",8),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(1),c.id(" ",c.xc(2,6,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(5),c.Dc("ngIf",e.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf",e.feedback.correct_answers),c.Mb(2),c.gd(c.xc(10,8,"_COMMENTS")),c.Mb(2),c.Dc("ngForOf",e.slices)}}let wm=(()=>{class e{constructor(){this.disabled=!1,this.slices=[],this.concatenatedHTMLElements="",this.controls={},this.type=E.a.t("test","_QUEST_FILL_IN_THE_BLANK")}ngOnChanges(){this.slices=this.findMatch(this.basic_info.title),this.createStringHTMLForQuestion(),this.basic_info.form_group.addControl(this.basic_info.name,new Ke.h(this.controls))}createStringHTMLForQuestion(){for(let e=0;e<this.slices.length;e++)switch(this.slices[e].type){case"string":this.concatenatedHTMLElements+=this.slices[e].text;break;case"placeholder":const t=document.createElement("span");t.id=this.slices[e].id,t.className="mdl-textfield mdl-js-textfield bg-after-main docebo-textfield text-grey-dark border-grey fill-the-blank";const i=document.createElement("input");if(i.id=this.slices[e].id,i.name=this.slices[e].id,i.type="text",i.setAttribute("value","text"),i.className="mdl-textfield__input docebo-input-text text-grey-dark",t.innerHTML=i.outerHTML,this.concatenatedHTMLElements+=t.outerHTML,"review"===this.basic_info.mode&&!this.user_status.show_user_answers){const t=document.createElement("span");t.id=this.slices[e].id,t.innerHTML="*****",this.concatenatedHTMLElements+=t.outerHTML}}}findMatch(e){let t=[];if(0===e.length)return t;const i=e.match(/(\[answ\s\d+\])/g);let s,n,a,o;if(null!==i){s=e.substr(0,e.indexOf(i[0])),n=i[0],a=e.substr(e.indexOf(i[0])+i[0].length,e.length);const r=nt.a.isEmpty(this.user_status.id_answers)?"":this.user_status.id_answers[i[0]];this.controls[n]=new Ke.e(r),t.push({type:"string",text:s}),t.push({type:"placeholder",text:n,id:i[0]}),o=this.findMatch(a),o.length>0&&(t=t.concat(o))}else t=t.concat({type:"string",text:e});return t}ngOnInit(){this.basic_info.mode!==Nh.a.READONLY&&this.basic_info.mode!==Nh.a.REVIEW||(this.disabled=!0)}ngAfterViewInit(){this.childrenDetector=Object(xi.a)(this.fibQuestionContainer.changes),this.childrenDetector.pipe(Object(ee.a)(1)).subscribe(()=>{this.fibQuestionContainer.toArray().forEach(e=>{const t=e.nativeElement.getElementsByTagName("input");for(let i=0;i<t.length;i++)t[i].value=this.basic_info.form_group.controls[this.basic_info.name].controls[t[i].id].value,t[i].disabled=!!this.user_status.show_user_answers||this.disabled,t[i].disabled&&(t[i].style.color="rgba(0, 0, 0, 0.26)"),t[i].addEventListener("blur",this.onBlur.bind(this)),t[i].addEventListener("focus",this.onFocus.bind(this)),t[i].addEventListener("change",this.onInputChange.bind(this))})})}onFocus(e){e.path[1].classList.add("text-main"),e.path[1].classList.add("border-main")}onBlur(e){e.path[1].className.indexOf("border-main")>-1&&e.path[1].classList.remove("border-main"),e.path[1].className.indexOf("text-main")>-1&&e.path[1].classList.remove("text-main")}onInputChange(e){this.basic_info.form_group.controls[this.basic_info.name].controls[e.target.id].setValue(e.target.value)}ngOnDestroy(){this.fibQuestionContainer.toArray().forEach(e=>{const t=e.nativeElement.getElementsByTagName("input");for(let i=0;i<t.length;i++)t[i]&&(t[i].removeEventListener("blur",this.onBlur.bind(this)),t[i].removeEventListener("focus",this.onFocus.bind(this)),t[i].addEventListener("change",this.onInputChange.bind(this)))})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["fill-in-the-blank"]],viewQuery:function(e,t){if(1&e&&c.md(dm,1),2&e){let e;c.Qc(e=c.sc())&&(t.fibQuestionContainer=e)}},inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info"},features:[c.Kb],decls:5,vars:8,consts:[[3,"title","type","is_mandatory","question_id"],[3,"innerHTML"],["fibQuestionContainer",""],["class","review-block",4,"ngIf"],[1,"review-block"],[1,"correct-answers","review-mode"],[1,"head"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngClass"]],template:function(e,t){1&e&&(c.ec(0,"question-title",0),c.ec(1,"div",1,2),c.wc(3,"sanitizeHtml"),c.dd(4,_m,12,10,"div",3)),2&e&&(c.Dc("title","\xa0")("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("innerHTML",c.xc(3,6,t.concatenatedHTMLElements),c.Vc),c.Mb(3),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[Vh,Ae.p,Ae.o,Ae.n],pipes:[Mi.a,E.b],encapsulation:2}),e})();function ym(e,t){if(1&e){const e=c.kc();c.jc(0,"single-upload",4),c.rc("uploaded",function(){return c.Uc(e),c.vc().fileUploaded()}),c.ic()}if(2&e){const e=c.vc();c.ad("form"),c.Dc("placeholder",e.placeholder)("inputFormControl",e.basic_info.form_group.controls[e.basic_info.name])("allowed_extensions",e.allowed_extensions)("collection","test")("disabledField",e.disabled)("disabledDelete",e.disabledDelete)("keepOriginalFilename",!0)("validateFileName",!0)}}function Cm(e,t){if(1&e&&(c.jc(0,"div",5),c.fd(1),c.ic()),2&e){const e=c.vc();c.Mb(1),c.gd(null==e.user_status?null:e.user_status.answer)}}function Sm(e,t){if(1&e&&(c.jc(0,"div",6),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.id(" ",c.xc(2,2,"_SCORE"),": ",e.feedback.user_score," ")}}let Tm=(()=>{class e{constructor(){this.additional_info=null,this.disabledDelete=!1,this.allowed_extensions=["3gp","3gp2","arf","avi","bmp","csv","doc","docx","epub","flv","gif","ico","jpeg","jpg","mkv","mov","mp3","mp4","mpeg","mpeg4","mpg","mpg2","ogg","ogm","pdf","png","ppsx","ppt","pptx","srt","txt","vtt","wmv","wrf","xls","xlsx","zip"],this.disabled=!1,this.placeholder=E.a.t("standard","Upload your file..."),this.type=E.a.t("standard","File upload")}ngOnInit(){this.user_status.answer&&(this.placeholder=this.user_status.answer),this.basic_info.mode===Nh.a.READONLY&&(this.disabled=!0,this.disabledDelete=!0)}fileUploaded(){this.addFormGroupControl()}ngOnChanges(){this.addFormGroupControl()}addFormGroupControl(){const e=!(nt.a.isEmpty(this.user_status)||!this.user_status.answer)&&this.user_status.answer;this.basic_info.form_group.addControl(this.basic_info.name,new Ke.e(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["file-upload"]],inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info",disabledDelete:"disabledDelete"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],[3,"placeholder","inputFormControl","allowed_extensions","collection","disabledField","disabledDelete","keepOriginalFilename","validateFileName","style","uploaded",4,"ngIf"],["class","review-mode text-main",4,"ngIf"],["class","review-block",4,"ngIf"],[3,"placeholder","inputFormControl","allowed_extensions","collection","disabledField","disabledDelete","keepOriginalFilename","validateFileName","uploaded"],[1,"review-mode","text-main"],[1,"review-block"]],template:function(e,t){1&e&&(c.ec(0,"question-title",0),c.dd(1,ym,1,10,"single-upload",1),c.dd(2,Cm,2,1,"div",2),c.dd(3,Sm,3,4,"div",3)),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngIf","review"!==t.basic_info.mode),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[Vh,Ae.p,Pn.a],pipes:[E.b],encapsulation:2}),e})();function km(e,t){if(1&e&&(c.jc(0,"th",4),c.fd(1),c.ic()),2&e){const e=t.$implicit;c.Mb(1),c.gd(e.title)}}function Im(e,t){if(1&e&&(c.jc(0,"td",6),c.ec(1,"radio",7),c.ic()),2&e){const e=t.$implicit,i=c.vc(),s=i.index,n=i.$implicit,a=c.vc();c.Mb(1),c.Gc("name","",s,"-",n.id_scale_item,""),c.Dc("label","")("inputFormControl",a.basic_info.form_group.controls[a.basic_info.name].controls[n.id_scale_item])("value",e.id_scale_item)("enabled",a.enabled)}}function xm(e,t){if(1&e&&(c.jc(0,"tr"),c.jc(1,"td"),c.fd(2),c.ic(),c.dd(3,Im,2,6,"td",5),c.ic()),2&e){const e=t.$implicit,i=c.vc();c.Mb(2),c.gd(e.label),c.Mb(1),c.Dc("ngForOf",i.additional_info.scale)}}let Dm=(()=>{class e{constructor(e){this.fb=e,this.feedback=null,this.enabled=!0,this.type=E.a.t("standard","Likert scale")}ngOnChanges(){"review"===this.basic_info.mode&&(this.enabled=!1);var e={};for(let t=0;t<this.additional_info.questions.length;t++){let i=this.additional_info.questions[t].id_scale_item,s=!(nt.a.isEmpty(this.user_status.answers)||!this.user_status.answers[i])&&this.user_status.answers[i];e[i]=new Ke.e(s)}this.basic_info.form_group.addControl(this.basic_info.name,new Ke.h(e))}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d))},e.\u0275cmp=c.Xb({type:e,selectors:[["likert-scale"]],inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info"},features:[c.Kb],decls:8,vars:6,consts:[[3,"title","type","is_mandatory","question_id"],[1,"playLikertScale"],["class","scaleCheckboxHeader",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"scaleCheckboxHeader"],["class","scaleCheckBox",4,"ngFor","ngForOf"],[1,"scaleCheckBox"],[3,"name","label","inputFormControl","value","enabled"]],template:function(e,t){1&e&&(c.ec(0,"question-title",0),c.jc(1,"table",1),c.jc(2,"thead"),c.jc(3,"tr"),c.ec(4,"th"),c.dd(5,km,2,1,"th",2),c.ic(),c.ic(),c.jc(6,"tbody"),c.dd(7,xm,4,2,"tr",3),c.ic(),c.ic()),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(5),c.Dc("ngForOf",t.additional_info.scale),c.Mb(2),c.Dc("ngForOf",t.additional_info.questions))},directives:[Vh,Ae.o,jn.a],encapsulation:2}),e})();function Om(e,t){if(1&e&&c.ec(0,"question-title",6),2&e){const e=c.vc();c.Dc("type",e.type)("title",e.title)}}function Em(e,t){if(1&e&&c.ec(0,"associate",7),2&e){const e=c.vc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)("isQuestionLast",e.isQuestionLast)}}function Pm(e,t){if(1&e&&c.ec(0,"text-entry",8),2&e){const e=c.vc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}function Mm(e,t){if(1&e&&c.ec(0,"single-choice",8),2&e){const e=c.vc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}function Am(e,t){if(1&e&&c.ec(0,"multiple-choice",9),2&e){const e=c.vc();c.Dc("basicInfo",e.basic_info)("additionalInfo",e.additional_info)("userStatus",e.user_status)("feedback",e.feedback)}}function Lm(e,t){if(1&e&&c.ec(0,"extended-text",8),2&e){const e=c.vc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}function jm(e,t){if(1&e&&c.ec(0,"inline-choice",7),2&e){const e=c.vc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)("isQuestionLast",e.isQuestionLast)}}function Fm(e,t){if(1&e&&c.ec(0,"fill-in-the-blank",8),2&e){const e=c.vc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}function Rm(e,t){if(1&e&&c.ec(0,"file-upload",8),2&e){const e=c.vc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}function Nm(e,t){if(1&e&&c.ec(0,"likert-scale",10),2&e){const e=c.vc();c.Dc("basic_info",e.basic_info)("form_group",e.form_control)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}let Um=(()=>{class e{constructor(e){this.toggleService=e,this.is_mandatory=!1,this.mode=Nh.a.ANSWER,this.type="associate",this.additional_info=null,this.user_status=null,this.feedback=null,this.isQuestionLast=!1,this.isQuestionFirst=!1}ngOnChanges(){this.basic_info={type:this.type,title:this.title,is_mandatory:this.is_mandatory,name:this.id_question,mode:this.mode,form_group:this.form_control}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["questions-render"]],inputs:{id_question:"id_question",title:"title",is_mandatory:"is_mandatory",mode:"mode",type:"type",additional_info:"additional_info",user_status:"user_status",feedback:"feedback",form_control:"form_control",isQuestionLast:"isQuestionLast",isQuestionFirst:"isQuestionFirst"},features:[c.Kb],decls:11,vars:11,consts:[[1,"question-block","default-headings-styles",3,"id"],[3,"type","title",4,"ngIf"],[3,"basic_info","additional_info","user_status","feedback","isQuestionLast",4,"ngIf"],[3,"basic_info","additional_info","user_status","feedback",4,"ngIf"],[3,"basicInfo","additionalInfo","userStatus","feedback",4,"ngIf"],[3,"basic_info","form_group","additional_info","user_status","feedback",4,"ngIf"],[3,"type","title"],[3,"basic_info","additional_info","user_status","feedback","isQuestionLast"],[3,"basic_info","additional_info","user_status","feedback"],[3,"basicInfo","additionalInfo","userStatus","feedback"],[3,"basic_info","form_group","additional_info","user_status","feedback"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,Om,1,2,"question-title",1),c.dd(2,Em,1,5,"associate",2),c.dd(3,Pm,1,4,"text-entry",3),c.dd(4,Mm,1,4,"single-choice",3),c.dd(5,Am,1,4,"multiple-choice",4),c.dd(6,Lm,1,4,"extended-text",3),c.dd(7,jm,1,5,"inline-choice",2),c.dd(8,Fm,1,4,"fill-in-the-blank",3),c.dd(9,Rm,1,4,"file-upload",3),c.dd(10,Nm,1,5,"likert-scale",5),c.ic()),2&e&&(c.Ec("id",t.id_question),c.Mb(1),c.Dc("ngIf","title"===t.type),c.Mb(1),c.Dc("ngIf","associate"===t.type),c.Mb(1),c.Dc("ngIf","text_entry"===t.type),c.Mb(1),c.Dc("ngIf","choice"===t.type),c.Mb(1),c.Dc("ngIf","choice_multiple"===t.type),c.Mb(1),c.Dc("ngIf","extended_text"===t.type),c.Mb(1),c.Dc("ngIf","inline_choice"===t.type),c.Mb(1),c.Dc("ngIf","fill_in_the_blank"===t.type),c.Mb(1),c.Dc("ngIf","upload"===t.type),c.Mb(1),c.Dc("ngIf","likert_scale"===t.type))},directives:[Ae.p,Vh,ap,pp,Dp,Vp,Yp,lm,wm,Tm,Dm],encapsulation:2}),e})();function qm(e,t){if(1&e){const e=c.kc();c.jc(0,"div",3),c.jc(1,"div",4),c.jc(2,"div",5),c.fd(3),c.ic(),c.jc(4,"rectangular-button",6),c.rc("click",function(t){return c.Uc(e),c.vc().begin(t)}),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(3),c.gd(e.current_chapter.name),c.Mb(1),c.Dc("properties",e.startButtonParams)("state","normal")("buttonType","submit")}}const zm=function(e){return{"not-title":e}};function Vm(e,t){if(1&e&&(c.jc(0,"div",16),c.ec(1,"questions-render",17),c.ic()),2&e){const e=t.$implicit,i=c.vc(2);c.Dc("ngClass",c.Ic(9,zm,"title"!==e.type)),c.Mb(1),c.Dc("id_question",e.id_question)("title",e.title)("score",0)("type",e.type)("is_mandatory",e.is_mandatory)("form_control",i.surveyForm.controls[i.curPage])("additional_info",e.additional_info)("user_status",e.user_status)}}function Bm(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",18),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.moveToPage(t.curPage-1,"prev")}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",e.prevButtonParams)("state","normal")("buttonType","button")}}function Gm(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",19),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.moveToPage(t.curPage+1,"next")}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",e.nextButtonParams)("state","normal")("buttonType","button")}}function $m(e,t){if(1&e&&c.ec(0,"rectangular-button",20),2&e){const e=c.vc(2);c.Dc("properties",e.submitButtonParams)("state",e.submitButtonState)("buttonType","submit")}}function Hm(e,t){if(1&e){const e=c.kc();c.jc(0,"form",7),c.rc("ngSubmit",function(t){return c.Uc(e),c.vc().submitSurvey(t)}),c.dd(1,Vm,2,11,"div",8),c.jc(2,"div",9),c.jc(3,"div",10),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"div",11),c.jc(7,"rectangular-button",12),c.rc("click",function(t){return c.Uc(e),c.vc().leave(t)}),c.ic(),c.dd(8,Bm,1,3,"rectangular-button",13),c.dd(9,Gm,1,3,"rectangular-button",14),c.dd(10,$m,1,3,"rectangular-button",15),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Dc("formGroup",e.surveyForm),c.Mb(1),c.Dc("ngForOf",e.pages[e.curPage].questions),c.Mb(3),c.gd(c.xc(5,9,e.paginationTitle)),c.Mb(3),c.Dc("properties",e.leaveButtonParams)("state","normal")("buttonType","button"),c.Mb(1),c.Dc("ngIf",e.pages[e.curPage].hasPrev),c.Mb(1),c.Dc("ngIf",e.pages[e.curPage].hasNext),c.Mb(1),c.Dc("ngIf",!e.pages[e.curPage].hasNext)}}const Ym=function(){return{category:"poll"}};function Wm(e,t){if(1&e&&(c.jc(0,"div",21),c.jc(1,"div",22),c.jc(2,"div",23),c.fd(3),c.ic(),c.ec(4,"div",24),c.wc(5,"sanitizeHtml"),c.ic(),c.jc(6,"div",25),c.ec(7,"em",26),c.jc(8,"div",27),c.fd(9),c.wc(10,"t"),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(3),c.gd(e.current_chapter.name),c.Mb(1),c.Dc("innerHTML",c.xc(5,3,e.current_chapter.description),c.Vc),c.Mb(5),c.gd(c.yc(10,5,"_POLL_COMPLETED",c.Hc(8,Ym)))}}let Qm=(()=>{class e{constructor(e,t,i){this.toggleService=t,this.mandatoryQuestionsUtils=i,this.startPlaying=new c.q,this.leaveSurvey=new c.q,this.goToPage=new c.q,this.surveyCompleted=new c.q,this.survey_statuses=jh.a,this.startButtonParams={text:E.a.t("poll","_POLL_BEGIN"),colorScheme:"positive-green",typeStyle:"filled"},this.leaveButtonParams={text:E.a.t("test","Leave Survey"),colorScheme:"grey-light",typeStyle:"filled"},this.submitButtonParams={text:E.a.t("standard","Submit"),colorScheme:"positive-green",typeStyle:"filled"},this.submitButtonState="normal",this.prevButtonParams={text:E.a.t("standard","Prev page"),colorScheme:"main",typeStyle:"filled"},this.nextButtonParams={text:E.a.t("standard","Next page"),colorScheme:"main",typeStyle:"filled"}}ngOnInit(){}begin(){this.startPlaying.emit(!0)}leave(){this.leaveSurvey.emit()}moveToPage(e,t){(this.mandatoryQuestionsUtils.checkMandatoryQuestions(this.surveyForm.getRawValue()[this.curPage],this.pages[this.curPage].questions)||"prev"===t)&&this.goToPage.emit({id:e,is_dirty:this.surveyForm.dirty,user_answers:this.surveyForm.getRawValue()[this.curPage]})}submitSurvey(e){e.preventDefault(),this.mandatoryQuestionsUtils.checkMandatoryQuestions(this.surveyForm.getRawValue()[this.curPage],this.pages[this.curPage].questions)&&(this.submitButtonState="disabled",this.surveyCompleted.emit({is_dirty:!0,user_answers:this.surveyForm.getRawValue()[this.curPage]}))}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(u.g),c.dc(Rh))},e.\u0275cmp=c.Xb({type:e,selectors:[["survey-viewer"]],inputs:{current_chapter:"current_chapter",survey_status:"survey_status",curPage:"curPage",pages:"pages",paginationTitle:"paginationTitle",surveyForm:"surveyForm"},outputs:{startPlaying:"startPlaying",leaveSurvey:"leaveSurvey",goToPage:"goToPage",surveyCompleted:"surveyCompleted"},decls:3,vars:3,consts:[["class","begin-wrap",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","submitted-wrap",4,"ngIf"],[1,"begin-wrap"],[1,"begin-survey"],[1,"title"],[1,"navigate","next",3,"properties","state","buttonType","click"],[3,"formGroup","ngSubmit"],["class","question-block",3,"ngClass",4,"ngFor","ngForOf"],[1,"survey-footer"],[1,"pagination-info"],[1,"pagination-nav"],[1,"leave_survey",3,"properties","state","buttonType","click"],["class","prev_page",3,"properties","state","buttonType","click",4,"ngIf"],["class","next_page",3,"properties","state","buttonType","click",4,"ngIf"],["class","submit",3,"properties","state","buttonType",4,"ngIf"],[1,"question-block",3,"ngClass"],["feedback","question.feedback",3,"id_question","title","score","type","is_mandatory","form_control","additional_info","user_status"],[1,"prev_page",3,"properties","state","buttonType","click"],[1,"next_page",3,"properties","state","buttonType","click"],[1,"submit",3,"properties","state","buttonType"],[1,"submitted-wrap"],[1,"submitted-wrap__info"],[1,"title","text-main","text-bigger-icons"],[1,"description",3,"innerHTML"],[1,"submitted-wrap__thanks","bg-grey-superlight"],[1,"zmdi","zmdi-check-circle","text-positive-green"],[1,"text","text-bigger-icons"]],template:function(e,t){1&e&&(c.dd(0,qm,5,4,"div",0),c.dd(1,Hm,11,11,"form",1),c.dd(2,Wm,11,9,"div",2)),2&e&&(c.Dc("ngIf",t.survey_status==t.survey_statuses.TO_BE_STARTED),c.Mb(1),c.Dc("ngIf",t.survey_status==t.survey_statuses.STARTED&&t.pages[t.curPage]),c.Mb(1),c.Dc("ngIf",t.survey_status==t.survey_statuses.SUBMITTED))},directives:[Ae.p,an.a,Ke.y,Ke.p,Ke.i,Ae.o,Ae.n,Um],pipes:[E.b,Mi.a],encapsulation:2}),e})(),Km=(()=>{class e{constructor(e,t,i,s,n){this._store=e,this.surveyPlayerActions=t,this.ref=i,this.fb=s,this.userInteractionService=n,this.completed=new c.q,this.loaded=new c.q,this.is_submitted=!1,this._store.select(ie.p).subscribe(e=>{if(void 0!==e)if(e.status==jh.a.SUBMITTED)this.is_submitted=!0,this.survey_status=e.status,this.current_chapter&&this.completed.emit(this.current_chapter.id);else{this.survey_status=e.status,this.curPage=e.curPage,this.pages=e.pages;let t={};for(let e in this.pages)t[e]=s.group({});this.surveyForm=s.group(t),this.pages[this.curPage]&&(this.paginationTitle=E.a.t("standard","Page {cur} of {all}",{cur:this.pages[this.curPage].index,all:this.pages.length}))}})}ngOnInit(){this.current_chapter.status==String(Bt.e.COMPLETED)?this.survey_status=jh.a.SUBMITTED:this._store.dispatch(this.surveyPlayerActions.loadLaunchParams(this.chapter_viewer.launch_params))}startPlaying(e){this._store.dispatch(this.surveyPlayerActions.beginSurvey({idOrg:this.current_chapter.id,is_dirty:!0,submitted:!1,user_answers:[]})),setTimeout(()=>{this.loaded.emit(!0),this.userInteractionService.track(Al.a.SURVEY_START,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.SURVEY})},300)}leaveSurvey(e){this._store.dispatch(this.surveyPlayerActions.leaveSurvey()),this.userInteractionService.track(Al.a.SURVEY_LEAVE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.SURVEY})}goToPage(e){e=nt.a.assign({},e,{idOrg:this.current_chapter.id,submitted:!1,user_answers:Fh.a.formatUserEntry(e.user_answers)}),this._store.dispatch(this.surveyPlayerActions.goToPage(e)),this.userInteractionService.track(Al.a.SURVEY_GO_TO_PAGE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.SURVEY,pageNumber:e.id}),Lh.a.scrollTo(0,0)}surveyCompleted(e){e=nt.a.assign({},e,{idOrg:this.current_chapter.id,submitted:!0,user_answers:Fh.a.formatUserEntry(e.user_answers)}),this._store.dispatch(this.surveyPlayerActions.surveyCompleted(e)),this.userInteractionService.track(Al.a.SURVEY_SUBMIT,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.SURVEY})}ngAfterViewInit(){this.loaded.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(v.d),c.dc(ga.g),c.dc(c.i),c.dc(Ke.d),c.dc(Al.c))},e.\u0275cmp=c.Xb({type:e,selectors:[["survey-player"]],inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:1,vars:6,consts:[[3,"current_chapter","survey_status","curPage","pages","paginationTitle","surveyForm","startPlaying","leaveSurvey","goToPage","surveyCompleted"]],template:function(e,t){1&e&&(c.jc(0,"survey-viewer",0),c.rc("startPlaying",function(e){return t.startPlaying(e)})("leaveSurvey",function(e){return t.leaveSurvey(e)})("goToPage",function(e){return t.goToPage(e)})("surveyCompleted",function(e){return t.surveyCompleted(e)}),c.ic()),2&e&&c.Dc("current_chapter",t.current_chapter)("survey_status",t.survey_status)("curPage",t.curPage)("pages",t.pages)("paginationTitle",t.paginationTitle)("surveyForm",t.surveyForm)},directives:[Qm],encapsulation:2}),e})();var Xm=i("wqqH"),Jm=i("Ozuj"),Zm=i("+K5A");const eg=["bottomRow"],tg=["pushBottomRow"],ig=["formContainer"],sg=["dialog"],ng=function(e,t,i){return{"not-title":e,"bg-grey-superlight":t,"bg-white":i}};function ag(e,t){if(1&e&&(c.jc(0,"div",6),c.ec(1,"questions-render",7),c.ic()),2&e){const e=t.$implicit,i=t.index,s=t.odd,n=t.even,a=t.last,o=c.vc();c.Dc("ngClass",c.Kc(10,ng,"title"!==e.type,s,n)),c.Mb(1),c.Dc("id_question",e.id_question)("title",e.title)("mode",e.mode)("type",e.type)("form_control",o.quizForm.controls[i])("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)("isQuestionLast",a)}}function og(e,t){1&e&&c.ec(0,"div",8,9)}function rg(e,t){if(1&e&&c.ec(0,"rectangular-button",21),2&e){const e=c.vc(2);c.Dc("properties",e.saveAndLeaveButtonParams)("state",e.clicked?"disabled":"normal")("buttonType","button")("click",e.saveAndLeave.bind(e))}}function cg(e,t){if(1&e&&c.ec(0,"rectangular-button",22),2&e){const e=c.vc(2);c.Dc("properties",e.leaveButtonParams)("state","normal")("buttonType","button")("click",e.openModal.bind(e))}}function lg(e,t){if(1&e&&c.ec(0,"rectangular-button",23),2&e){const e=c.vc(2);c.Dc("properties",e.prevButtonParams)("state",e.clicked?"disabled":"normal")("buttonType","button")("click",e.prevPage.bind(e))}}function dg(e,t){if(1&e&&c.ec(0,"rectangular-button",24),2&e){const e=c.vc(2);c.Dc("properties",e.nextButtonParams)("state",e.clicked?"disabled":"normal")("buttonType","button")("click",e.nextPage.bind(e))}}function ug(e,t){if(1&e&&c.ec(0,"rectangular-button",25),2&e){const e=c.vc(2);c.Dc("properties",e.submitButtonParams)("state",e.clicked?"disabled":"normal")("buttonType","submit")("click",e.submit.bind(e))}}function hg(e,t){if(1&e&&(c.jc(0,"div",10,11),c.jc(2,"div",12),c.fd(3),c.wc(4,"t"),c.ic(),c.jc(5,"div",13),c.dd(6,rg,1,4,"rectangular-button",14),c.dd(7,cg,1,4,"rectangular-button",15),c.ec(8,"dialog-component",16,17),c.dd(10,lg,1,4,"rectangular-button",18),c.dd(11,dg,1,4,"rectangular-button",19),c.dd(12,ug,1,4,"rectangular-button",20),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(3),c.gd(c.xc(4,13,e.paginationTitle)),c.Mb(3),c.Dc("ngIf",e.settings.allow_partial_submission),c.Mb(1),c.Dc("ngIf",1==e.current_page),c.Mb(1),c.Dc("id",e.dialogParams.id)("width",e.dialogParams.width)("height",e.dialogParams.height)("title",e.dialogParams.title)("content",e.dialogParams.content)("type",e.dialogParams.type)("actions",e.dialogParams.actions),c.Mb(2),c.Dc("ngIf",e.hasPrevPage),c.Mb(1),c.Dc("ngIf",e.hasNextPage),c.Mb(1),c.Dc("ngIf",!e.hasNextPage)}}function pg(e,t){if(1&e){const e=c.kc();c.jc(0,"div",26,11),c.jc(2,"rectangular-button",22),c.rc("click",function(t){return c.Uc(e),c.vc().leaveReview(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.Dc("properties",e.backToResultsButtonParams)("state","normal")("buttonType",e.clicked?"disabled":"button")}}let mg=(()=>{class e{constructor(){this.processing=!1,this.saveAndExit=new c.q,this.leavePlayMode=new c.q,this.leaveReviewMode=new c.q,this.movePrevPage=new c.q,this.moveNextPage=new c.q,this.submitQuiz=new c.q,this.loaded=new c.q,this.quizStatuses=te.u,this.clicked=!1,this.saveAndLeaveButtonParams={text:E.a.t("test","_TEST_SAVE_KEEP"),colorScheme:"positive-green",typeStyle:"filled"},this.leaveButtonParams={text:E.a.t("test","Leave Test"),colorScheme:"grey-mid",typeStyle:"filled"},this.dialogParams={id:"leave_quiz",width:450,height:200,title:E.a.t("test","Leave Test?"),content:this.leaveDialogContentMessage,type:"confirmation",actions:[{type:"delete",properties:{text:E.a.t("standard","Leave")},handler:e=>{this.leavePlayMode.emit(this.quizForm.getRawValue()),e.close()}},{type:"cancel",properties:{text:E.a.t("standard","Cancel")},handler:e=>{e.close()}}]},this.submitButtonParams={text:E.a.t("standard","Submit (Test Completed)"),colorScheme:"positive-green",typeStyle:"filled"},this.prevButtonParams={text:E.a.t("standard","Prev page"),colorScheme:"main",typeStyle:"filled"},this.nextButtonParams={text:E.a.t("test","_TEST_NEXT_PAGE"),colorScheme:"main",typeStyle:"filled"},this.backToResultsButtonParams={text:E.a.t("test","Back To Results"),colorScheme:"main",typeStyle:"filled"},this.element=document.getElementById("scrollableContent")}ngOnChanges(e){this.clicked=this.processing,e.leaveDialogContentMessage&&(this.dialogParams.content=this.leaveDialogContentMessage)}ngAfterViewInit(){this.loaded.emit(!0),this.dialogParams.content=this.leaveDialogContentMessage;const e=document.querySelector(".chapter-viewer__wrapper.standalone");e.scrollHeight>e.clientHeight&&e.classList.add("scrolable"),this.pushBottomRow&&this.bottomRow&&(this.pushBottomRow.nativeElement.style.height=`${this.bottomRow.nativeElement.offsetHeight}px`)}leaveReview(){this.clicked=!0,this.leaveReviewMode.emit(!0)}saveAndLeave(){this.clicked=!0,this.saveAndExit.emit(this.quizForm.getRawValue())}openModal(){this.dialog.open()}prevPage(){this.clicked=!0,this.movePrevPage.emit(this.quizForm.getRawValue()),Object(qc.i)(this.element,this.element.offsetTop,300)}nextPage(){this.clicked=!0,this.moveNextPage.emit(this.quizForm.getRawValue()),Object(qc.i)(this.element,this.element.offsetTop,300)}submit(){this.clicked=!0,this.submitQuiz.emit(this.quizForm.getRawValue())}trackByQuestion(e,t){return t.id_question}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["quiz-viewer"]],viewQuery:function(e,t){if(1&e&&(c.md(eg,1),c.md(tg,1),c.md(ig,3),c.md(sg,1)),2&e){let e;c.Qc(e=c.sc())&&(t.bottomRow=e.first),c.Qc(e=c.sc())&&(t.pushBottomRow=e.first),c.Qc(e=c.sc())&&(t.formContainer=e.first),c.Qc(e=c.sc())&&(t.dialog=e.first)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",questions:"questions",quizForm:"quizForm",hasPrevPage:"hasPrevPage",hasNextPage:"hasNextPage",processing:"processing",paginationTitle:"paginationTitle",status:"status",current_page:"current_page",settings:"settings",leaveDialogContentMessage:"leaveDialogContentMessage"},outputs:{saveAndExit:"saveAndExit",leavePlayMode:"leavePlayMode",leaveReviewMode:"leaveReviewMode",movePrevPage:"movePrevPage",moveNextPage:"moveNextPage",submitQuiz:"submitQuiz",loaded:"loaded"},features:[c.Kb],decls:6,vars:6,consts:[[1,"boxes-shadow",3,"formGroup"],["formContainer",""],["class","question-block",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","push-quiz-bottom-row",4,"ngIf"],["class","bottom-row bg-white",4,"ngIf"],["class","bottom-row bg-white boxes-shadow",4,"ngIf"],[1,"question-block",3,"ngClass"],[3,"id_question","title","mode","type","form_control","additional_info","user_status","feedback","isQuestionLast"],[1,"push-quiz-bottom-row"],["pushBottomRow",""],[1,"bottom-row","bg-white"],["bottomRow",""],[1,"pagination-info"],[1,"pagination-nav"],["class","save_n_leave",3,"properties","state","buttonType","click",4,"ngIf"],["class","leave_quiz",3,"properties","state","buttonType","click",4,"ngIf"],[3,"id","width","height","title","content","type","actions"],["dialog",""],["class","prev_page",3,"properties","state","buttonType","click",4,"ngIf"],["class","next_page",3,"properties","state","buttonType","click",4,"ngIf"],["class","submit",3,"properties","state","buttonType","click",4,"ngIf"],[1,"save_n_leave",3,"properties","state","buttonType","click"],[1,"leave_quiz",3,"properties","state","buttonType","click"],[1,"prev_page",3,"properties","state","buttonType","click"],[1,"next_page",3,"properties","state","buttonType","click"],[1,"submit",3,"properties","state","buttonType","click"],[1,"bottom-row","bg-white","boxes-shadow"]],template:function(e,t){1&e&&(c.jc(0,"form",0,1),c.dd(2,ag,2,14,"div",2),c.dd(3,og,2,0,"div",3),c.dd(4,hg,13,15,"div",4),c.dd(5,pg,3,3,"div",5),c.ic()),2&e&&(c.Dc("formGroup",t.quizForm),c.Mb(2),c.Dc("ngForOf",t.questions)("ngForTrackBy",t.trackByQuestion),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.STARTED),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.STARTED),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.REVIEW))},directives:[Ke.y,Ke.p,Ke.i,Ae.o,Ae.p,Ae.n,Um,Zm.a,an.a],pipes:[E.b],encapsulation:2}),e})();const gg=function(){return{category:"course"}};function bg(e,t){1&e&&(c.jc(0,"div",5),c.jc(1,"div",6),c.jc(2,"div",7),c.jc(3,"div",8),c.ec(4,"em",9),c.jc(5,"p",10),c.fd(6),c.wc(7,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(6),c.hd(" ",c.yc(7,1,"You have reached the maximum number of views",c.Hc(4,gg))," "))}function fg(e,t){if(1&e&&(c.jc(0,"div",24),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc().$implicit;c.Mb(1),c.hd(" ",c.xc(2,1,e.value)," ")}}function vg(e,t){if(1&e&&(c.jc(0,"div",20),c.jc(1,"div",21),c.ec(2,"em"),c.ic(),c.dd(3,fg,3,3,"div",22),c.jc(4,"div",23),c.fd(5),c.wc(6,"t"),c.ic(),c.ic()),2&e){const e=t.$implicit;c.Mb(2),c.Rb("zmdi ",e.icon,""),c.Mb(1),c.Dc("ngIf",!1!==e.value),c.Mb(2),c.gd(c.xc(6,5,e.name))}}function _g(e,t){if(1&e&&(c.jc(0,"div",18),c.ec(1,"br"),c.dd(2,vg,7,7,"div",19),c.ec(3,"br"),c.ic()),2&e){const e=c.vc(3);c.Mb(2),c.Dc("ngForOf",e.quizInfo)}}const wg=function(){return{right:"300px",width:"200px"}},yg=function(e){return{text:e,colorScheme:"positive-green",typeStyle:"filled"}};function Cg(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",17),c.rc("click",function(t){return c.Uc(e),c.vc(3).triggerContinuePlaying(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("ngStyle",c.Hc(4,wg))("properties",c.Ic(5,yg,e.buttonTranslations.resumeTest))("state","normal")("buttonType","submit")}}const Sg=function(e,t){return{right:e,width:t}};function Tg(e,t){if(1&e){const e=c.kc();c.jc(0,"div",11),c.jc(1,"div",12),c.fd(2),c.ic(),c.ec(3,"div",13),c.wc(4,"sanitizeHtml"),c.dd(5,_g,4,1,"div",14),c.jc(6,"div",15),c.dd(7,Cg,1,7,"rectangular-button",16),c.jc(8,"rectangular-button",17),c.rc("click",function(t){return c.Uc(e),c.vc(2).triggerStartPlaying(t)}),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(2),c.gd(e.current_chapter.name),c.Mb(1),c.Dc("innerHTML",c.xc(4,8,e.current_chapter.description),c.Vc),c.Mb(2),c.Dc("ngIf",!e.settings.hide_user_info),c.Mb(2),c.Dc("ngIf",e.showResumeButton&&"in_progress"==e.current_chapter.status),c.Mb(1),c.Dc("ngStyle",c.Jc(10,Sg,e.showResumeButton&&"in_progress"==e.current_chapter.status?"-200px":"0px",e.showResumeButton&&"in_progress"==e.current_chapter.status?"300px":"100%"))("properties",c.Ic(13,yg,e.buttonTranslations.beginTest))("state",e.beginTestButtonState)("buttonType","submit")}}function kg(e,t){if(1&e&&(c.jc(0,"div"),c.dd(1,bg,8,5,"div",3),c.dd(2,Tg,9,15,"div",4),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",e.hasLockedMessage),c.Mb(1),c.Dc("ngIf",!e.hasLockedMessage)}}function Ig(e,t){1&e&&(c.jc(0,"div",25),c.ec(1,"ui-spinner"),c.ic())}function xg(e,t){if(1&e&&(c.jc(0,"div",31),c.jc(1,"span",32),c.ec(2,"em",33),c.ic(),c.fd(3),c.wc(4,"t"),c.ic()),2&e){const e=c.vc(3);c.Mb(3),c.hd(" ",c.xc(4,1,e.timer)," ")}}function Dg(e,t){1&e&&(c.jc(0,"div",34),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"You must answer all questions to proceed with the test")," "))}function Og(e,t){if(1&e&&(c.jc(0,"div",28),c.dd(1,xg,5,3,"div",29),c.dd(2,Dg,3,3,"div",30),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf","none"!=e.settings.time_option),c.Mb(1),c.Dc("ngIf",e.settings.request_all_answers)}}function Eg(e,t){if(1&e){const e=c.kc();c.jc(0,"div"),c.dd(1,Og,3,2,"div",26),c.jc(2,"quiz-viewer",27),c.rc("leavePlayMode",function(t){return c.Uc(e),c.vc().triggerLeavePlayMode(t)})("saveAndExit",function(t){return c.Uc(e),c.vc().triggerSaveAndExit(t)})("movePrevPage",function(t){return c.Uc(e),c.vc().triggerShowPrevPage(t)})("moveNextPage",function(t){return c.Uc(e),c.vc().triggerShowNextPage(t)})("submitQuiz",function(t){return c.Uc(e),c.vc().triggerSubmitQuiz(t)})("loaded",function(t){return c.Uc(e),c.vc().triggerLoaded(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf","none"!=e.settings.time_option||e.settings.request_all_answers),c.Mb(1),c.Dc("questions",e.questions)("quizForm",e.quizForm)("status",e.status)("hasPrevPage",e.hasPrevPage)("hasNextPage",e.hasNextPage)("processing",e.processing)("paginationTitle",e.paginationTitle)("current_page",e.current_page)("settings",e.settings)("leaveDialogContentMessage",e.leaveDialogContentMessage)}}function Pg(e,t){1&e&&(c.jc(0,"h4",53),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Passed!")," "))}function Mg(e,t){1&e&&(c.jc(0,"h4",54),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Not passed")," "))}function Ag(e,t){if(1&e&&(c.jc(0,"div"),c.dd(1,Pg,3,3,"h4",51),c.dd(2,Mg,3,3,"h4",52),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf","completed"==e.user_status.completion_status),c.Mb(1),c.Dc("ngIf","failed"==e.user_status.completion_status)}}function Lg(e,t){1&e&&(c.jc(0,"div"),c.jc(1,"h4",32),c.fd(2),c.wc(3,"t"),c.ic(),c.ic()),2&e&&(c.Mb(2),c.hd(" ",c.xc(3,1,"Waiting for final grade...")," "))}const jg=function(e,t){return{"text-positive-green":e,"text-error":t}};function Fg(e,t){if(1&e&&(c.jc(0,"span",58),c.fd(1),c.ic()),2&e){const e=c.vc(3);c.Dc("ngClass",c.Jc(2,jg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.hd(" ",e.user_status.score," % ")}}function Rg(e,t){if(1&e&&(c.jc(0,"span",59),c.fd(1),c.ic()),2&e){const e=c.vc(3);c.Dc("ngClass",c.Jc(3,jg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.id(" ",e.user_status.score,"/",e.user_status.max_score," ")}}function Ng(e,t){if(1&e&&(c.jc(0,"div",55),c.fd(1),c.wc(2,"t"),c.dd(3,Fg,2,5,"span",56),c.dd(4,Rg,2,6,"span",57),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,3,"Total score"),": "),c.Mb(2),c.Dc("ngIf",e.settings.score_type==e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",e.settings.score_type!=e.quizPlayerScoreType.PERCENTAGE)}}function Ug(e,t){if(1&e&&c.ec(0,"div",60),2&e){const e=c.vc(2);c.Dc("innerHtml",e.couldIncreaseByScoreLabel+" <span class=bolded>"+e.maxManualScore+" "+e.pointsLabel+"</span>",c.Vc)}}function qg(e,t){if(1&e&&c.ec(0,"div",60),2&e){const e=c.vc(2);c.Dc("innerHtml",e.couldIncreaseByScoreLabel+" <span class=bolded>"+e.maxManualScore+" %</span>",c.Vc)}}function zg(e,t){if(1&e&&(c.ec(0,"div",60),c.wc(1,"sanitizeHtml")),2&e){const e=c.vc(2);c.Dc("innerHtml",c.xc(1,1,null==e.user_status?null:e.user_status.feedback_message),c.Vc)}}function Vg(e,t){if(1&e&&(c.jc(0,"span",58),c.fd(1),c.ic()),2&e){const e=c.vc(3);c.Dc("ngClass",c.Jc(2,jg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.hd(" ",e.user_status.average_user_score," % ")}}function Bg(e,t){if(1&e&&(c.jc(0,"span",59),c.fd(1),c.ic()),2&e){const e=c.vc(3);c.Dc("ngClass",c.Jc(3,jg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.id(" ",e.user_status.average_user_score,"/",e.user_status.max_score," ")}}const Gg=function(){return{category:"test"}};function $g(e,t){1&e&&(c.jc(0,"div"),c.jc(1,"p"),c.fd(2),c.wc(3,"t"),c.ic(),c.ic()),2&e&&(c.Mb(2),c.gd(c.yc(3,1,"You are the first one that completed the test",c.Hc(4,Gg))))}const Hg=function(e){return{category:"test",completed_cnt:e}};function Yg(e,t){if(1&e&&(c.jc(0,"p"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(4);c.Mb(1),c.hd(" ",c.yc(2,1,"Right now {completed_cnt} user(s) have already completed the test and you are above the average!",c.Ic(4,Hg,e.settings.completion_counts))," ")}}function Wg(e,t){if(1&e&&(c.jc(0,"p"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(4);c.Mb(1),c.hd(" ",c.yc(2,1,"Right now {completed_cnt} user(s) have already completed the test and you are below the average!",c.Ic(4,Hg,e.settings.completion_counts))," ")}}function Qg(e,t){if(1&e&&(c.jc(0,"div"),c.dd(1,Yg,3,6,"p",0),c.dd(2,Wg,3,6,"p",0),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.Dc("ngIf",e.user_status.score>=e.user_status.average_user_score),c.Mb(1),c.Dc("ngIf",e.user_status.score<e.user_status.average_user_score)}}function Kg(e,t){if(1&e&&(c.jc(0,"div",61),c.jc(1,"div",62),c.fd(2),c.wc(3,"t"),c.dd(4,Vg,2,5,"span",56),c.dd(5,Bg,2,6,"span",57),c.ic(),c.dd(6,$g,4,5,"div",0),c.dd(7,Qg,3,2,"div",0),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.hd(" ",c.xc(3,5,"Average score:")," "),c.Mb(2),c.Dc("ngIf",e.settings.score_type==e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",e.settings.score_type!=e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",0==e.settings.completion_counts),c.Mb(1),c.Dc("ngIf",e.settings.completion_counts>0)}}const Xg=function(e){return{category:"test",time:e}};function Jg(e,t){if(1&e&&(c.jc(0,"span",63),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,1,"Your test is suspended. You will be able to retake your test in {time}.",c.Ic(4,Xg,e.displaySuspensionTime(null==e.user_status?null:e.user_status.suspension_time)))," ")}}function Zg(e,t){1&e&&(c.jc(0,"span"),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Maximum number of attempts reached!")," "))}const eb=function(e){return{text:e,colorScheme:"main",typeStyle:"filled"}};function tb(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",64),c.rc("click",function(t){return c.Uc(e),c.vc(2).triggerShowReviewMode(t)}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",c.Ic(3,eb,e.buttonTranslations.showAnswers))("state","normal")("buttonType","button")}}function ib(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",65),c.rc("click",function(t){return c.Uc(e),c.vc(2).triggerRetakeTheTest(t)}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",c.Ic(3,yg,e.buttonTranslations.retakeTest))("state","normal")("buttonType","button")}}function sb(e,t){if(1&e&&(c.jc(0,"div",24),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc().$implicit;c.Mb(1),c.hd(" ",c.xc(2,1,e.value)," ")}}function nb(e,t){if(1&e&&(c.jc(0,"div",20),c.jc(1,"div",21),c.ec(2,"em"),c.ic(),c.dd(3,sb,3,3,"div",22),c.jc(4,"div",23),c.fd(5),c.wc(6,"t"),c.ic(),c.ic()),2&e){const e=t.$implicit;c.Mb(2),c.Rb("zmdi ",e.icon,""),c.Mb(1),c.Dc("ngIf",!1!==e.value),c.Mb(2),c.gd(c.xc(6,5,e.name))}}function ab(e,t){if(1&e&&(c.jc(0,"div",18),c.ec(1,"br"),c.dd(2,nb,7,7,"div",19),c.ec(3,"br"),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("ngForOf",e.quizInfo)}}function ob(e,t){if(1&e&&(c.jc(0,"tr"),c.jc(1,"td"),c.fd(2),c.ic(),c.jc(3,"td"),c.fd(4),c.ic(),c.jc(5,"td"),c.fd(6),c.ic(),c.ic()),2&e){const e=t.$implicit;c.Mb(2),c.gd(e.category_name),c.Mb(2),c.gd(e.questions_count),c.Mb(2),c.gd(e.score)}}const rb=function(){return{category:"menu"}},cb=function(){return{category:"coursereport"}};function lb(e,t){if(1&e&&(c.jc(0,"div",66),c.jc(1,"table"),c.jc(2,"tr",67),c.jc(3,"th",68),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"th",68),c.fd(7),c.wc(8,"t"),c.ic(),c.jc(9,"th",68),c.fd(10),c.wc(11,"t"),c.ic(),c.ic(),c.dd(12,ob,7,3,"tr",69),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.gd(c.yc(5,4,"_QUESTCATEGORY",c.Hc(12,rb))),c.Mb(3),c.gd(c.yc(8,7,"_TOT_QUESTION",c.Hc(13,cb))),c.Mb(3),c.gd(c.xc(11,10,"Total score")),c.Mb(2),c.Dc("ngForOf",e.user_status.score_per_category)}}function db(e,t){if(1&e&&(c.jc(0,"div",70),c.jc(1,"div",71),c.ec(2,"p",72),c.wc(3,"t"),c.jc(4,"div",73),c.ec(5,"em",74),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("innerHTML",c.xc(3,1,e.activityCompletedMessage),c.Vc)}}function ub(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",65),c.rc("click",function(t){return c.Uc(e),c.vc(3).triggerNextChapter(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("properties",c.Ic(3,eb,e.buttonTranslations.nextActivity))("state","normal")("buttonType","button")}}const hb=function(e){return{text:e,colorScheme:"grey-mid",typeStyle:"filled"}};function pb(e,t){if(1&e){const e=c.kc();c.jc(0,"div",75),c.jc(1,"rectangular-button",64),c.rc("click",function(t){return c.Uc(e),c.vc(2).triggerBackToCourse(t)}),c.ic(),c.dd(2,ub,1,5,"rectangular-button",47),c.ic()}if(2&e){const e=c.vc(2);c.Mb(1),c.Dc("properties",c.Ic(4,hb,e.buttonTranslations.backToCourse))("state","normal")("buttonType","button"),c.Mb(1),c.Dc("ngIf",e.next_chapter.id)}}const mb=function(e,t){return{"zmdi-check-circle text-positive-green":e,"zmdi-close-circle text-error":t}};function gb(e,t){if(1&e&&(c.jc(0,"div",35),c.jc(1,"div",36),c.jc(2,"div",37),c.ec(3,"em",38),c.ic(),c.jc(4,"div",39),c.dd(5,Ag,3,2,"div",0),c.dd(6,Lg,4,3,"div",0),c.dd(7,Ng,5,5,"div",40),c.jc(8,"div",41),c.dd(9,Ug,1,1,"div",42),c.dd(10,qg,1,1,"div",42),c.dd(11,zg,2,3,"div",42),c.ic(),c.dd(12,Kg,8,7,"div",43),c.jc(13,"div",44),c.dd(14,Jg,3,6,"span",45),c.dd(15,Zg,3,3,"span",0),c.dd(16,tb,1,5,"rectangular-button",46),c.dd(17,ib,1,5,"rectangular-button",47),c.ic(),c.ic(),c.dd(18,ab,4,1,"div",14),c.ic(),c.dd(19,lb,13,14,"div",48),c.dd(20,db,6,3,"div",49),c.dd(21,pb,3,6,"div",50),c.ic()),2&e){const e=c.vc();c.Mb(3),c.Dc("ngClass",c.Jc(16,mb,"completed"==e.user_status.completion_status,"completed"!=e.user_status.completion_status)),c.Mb(2),c.Dc("ngIf","evaluated"==e.user_status.evaluation_status),c.Mb(1),c.Dc("ngIf","waiting_evaluation"==e.user_status.evaluation_status),c.Mb(1),c.Dc("ngIf",e.settings.show_final_score),c.Mb(2),c.Dc("ngIf",e.showIncreaseScoreMessage()&&e.settings.score_type!=e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",e.showIncreaseScoreMessage()&&e.settings.score_type==e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",null==e.user_status?null:e.user_status.feedback_message),c.Mb(1),c.Dc("ngIf",e.settings.show_average_score),c.Mb(2),c.Dc("ngIf",e.user_status.suspension_time),c.Mb(1),c.Dc("ngIf",e.settings.max_attempts==e.user_status.attempts_consumed&&"failed"===e.user_status.completion_status),c.Mb(1),c.Dc("ngIf",e.showResultsButton),c.Mb(1),c.Dc("ngIf",e.handleRetakeTestVisibility()),c.Mb(1),c.Dc("ngIf",e.showInfoOnSubmit),c.Mb(1),c.Dc("ngIf",e.showScorePerCategory),c.Mb(1),c.Dc("ngIf","not_started"===e.current_chapter.status&&"completed"===e.user_status.completion_status),c.Mb(1),c.Dc("ngIf","standalone"===e.current_mode)}}function bb(e,t){if(1&e&&(c.jc(0,"span",58),c.fd(1),c.ic()),2&e){const e=c.vc(3);c.Dc("ngClass",c.Jc(2,jg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.hd(" ",e.user_status.score," % ")}}function fb(e,t){if(1&e&&(c.jc(0,"span",59),c.fd(1),c.ic()),2&e){const e=c.vc(3);c.Dc("ngClass",c.Jc(3,jg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.id(" ",e.user_status.score,"/",e.user_status.max_score," ")}}const vb=function(){return{category:"standard"}};function _b(e,t){if(1&e&&(c.jc(0,"div",55),c.fd(1),c.wc(2,"t"),c.dd(3,bb,2,5,"span",56),c.dd(4,fb,2,6,"span",57),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,3,"Final Score:",c.Hc(6,vb))," "),c.Mb(2),c.Dc("ngIf",e.settings.score_type==e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",e.settings.score_type!=e.quizPlayerScoreType.PERCENTAGE)}}function wb(e,t){if(1&e&&c.ec(0,"div",60),2&e){const e=c.vc(2);c.Dc("innerHtml",e.couldIncreaseByScoreLabel+" <span class=bolded>"+e.maxManualScore+" "+e.pointsLabel+"</span>",c.Vc)}}function yb(e,t){if(1&e){const e=c.kc();c.jc(0,"div"),c.jc(1,"div",76),c.jc(2,"div",37),c.ec(3,"em",38),c.ic(),c.dd(4,_b,5,7,"div",40),c.dd(5,wb,1,1,"div",42),c.ic(),c.jc(6,"quiz-viewer",77),c.rc("leaveReviewMode",function(t){return c.Uc(e),c.vc().triggerLeaveReviewMode(t)})("loaded",function(t){return c.Uc(e),c.vc().triggerLoaded(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(3),c.Dc("ngClass",c.Jc(6,mb,"completed"==e.user_status.completion_status,"completed"!=e.user_status.completion_status)),c.Mb(1),c.Dc("ngIf",e.settings.show_final_score),c.Mb(1),c.Dc("ngIf","waiting_evaluation"==e.user_status.evaluation_status&&"absolute"==e.settings.score_type),c.Mb(1),c.Dc("questions",e.questions)("quizForm",e.quizForm)("status",e.status)}}let Cb=(()=>{class e{constructor(e,t,i,s){this._sanitizer=e,this.formatter=t,this.translate=i,this._ref=s,this.startPlaying=new c.q,this.retakeTheTest=new c.q,this.continuePlaying=new c.q,this.backToCourse=new c.q,this.leavePlayMode=new c.q,this.leaveReviewMode=new c.q,this.saveAndExit=new c.q,this.showPrevPage=new c.q,this.showNextPage=new c.q,this.submitQuiz=new c.q,this.loaded=new c.q,this.showReviewMode=new c.q,this.nextChapter=new c.q,this.quizStatuses=te.u,this.buttonTranslations={beginTest:E.a.t("test","BEGIN THE TEST"),retakeTest:E.a.t("test","RETAKE THE TEST"),showAnswers:E.a.t("test","_TEST_REVIEW_ANSWER"),resumeTest:E.a.t("test","_TEST_CONTINUE"),backToCourse:E.a.t("test","_TEST_SAVEKEEP_BACK"),nextActivity:E.a.t("test"," Next Activity")},this.quizPlayerScoreType=te.t,this.beginTestButtonState="normal"}ngOnInit(){this.feedback_message=this._sanitizer.bypassSecurityTrustHtml(this.user_status.feedback_message),this.translate.get("_TEST_MANUAL_SCORE",{category:"test"}).subscribe(e=>{this.couldIncreaseByScoreLabel=e}),this.translate.get("_TEST_SCORES",{category:"test"}).subscribe(e=>{this.pointsLabel=e})}displaySuspensionTime(e){const t=this.formatter.currentUtcDateTime();void 0===e&&(e=t),e=this.formatter.addMinutes(t,e);const i=this.formatter.getFormattedDurationJSON(e,5),s=[];for(const n in i){if(0===i[n])continue;const e=this.translate.instant(n,{category:"webapp"});s.push(i[n]+" "+e)}if(s.length>1){const e=new E.b(this.translate,this._ref).transform(E.a.t("webapp","and"));s.splice(s.length-1,0,e)}return s.join(" ")}triggerStartPlaying(){this.beginTestButtonState="disabled",this.startPlaying.emit(!0)}triggerRetakeTheTest(){this.retakeTheTest.emit(!0)}triggerContinuePlaying(){this.continuePlaying.emit(!0)}triggerBackToCourse(){this.backToCourse.emit(!0)}triggerLeavePlayMode(e){this.leavePlayMode.emit(e)}triggerLeaveReviewMode(){this.leaveReviewMode.emit(!0)}triggerSaveAndExit(e){this.saveAndExit.emit(e)}triggerShowPrevPage(e){this.showPrevPage.emit(e)}triggerShowNextPage(e){this.showNextPage.emit(e)}triggerSubmitQuiz(e){this.submitQuiz.emit(e)}triggerLoaded(){this.loaded.emit(!0)}triggerShowReviewMode(){this.showReviewMode.emit(!0)}triggerNextChapter(){this.next_chapter.id&&this.nextChapter.emit({chapter:this.next_chapter})}showIncreaseScoreMessage(){return this.user_status.evaluation_status===te.s.WAITING_EVALUATION&&this.maxManualScore>0}get maxManualScore(){return Number(this.settings.max_manual_score)||Number(this.user_status.max_manual_score)}handleRetakeTestVisibility(){return!("NULL"===this.settings.self_prerequisite&&this.user_status.attempts_consumed||"incomplete"===this.settings.self_prerequisite&&"completed"===this.user_status.completion_status||this.user_status.suspension_time||!(0==this.settings.max_attempts||this.settings.max_attempts>this.user_status.attempts_consumed)||this.courseMaxAttempts&&!(this.courseMaxAttempts>this.user_status.attempts_consumed))}get hasLockedMessage(){return"max_number_views"===this.current_chapter.locked}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Pi.b),c.dc(ti.b),c.dc(js.a),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["quiz-player-dummy"]],inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",next_chapter:"next_chapter",status:"status",settings:"settings",user_status:"user_status",questions:"questions",quizInfo:"quizInfo",quizForm:"quizForm",paginationTitle:"paginationTitle",hasPrevPage:"hasPrevPage",hasNextPage:"hasNextPage",processing:"processing",current_mode:"current_mode",current_page:"current_page",showScorePerCategory:"showScorePerCategory",showInfoOnSubmit:"showInfoOnSubmit",showResumeButton:"showResumeButton",showResultsButton:"showResultsButton",activityCompletedMessage:"activityCompletedMessage",is_submitted:"is_submitted",leaveDialogContentMessage:"leaveDialogContentMessage",timer:"timer",courseMaxAttempts:"courseMaxAttempts"},outputs:{startPlaying:"startPlaying",retakeTheTest:"retakeTheTest",continuePlaying:"continuePlaying",backToCourse:"backToCourse",leavePlayMode:"leavePlayMode",leaveReviewMode:"leaveReviewMode",saveAndExit:"saveAndExit",showPrevPage:"showPrevPage",showNextPage:"showNextPage",submitQuiz:"submitQuiz",loaded:"loaded",showReviewMode:"showReviewMode",nextChapter:"nextChapter"},decls:5,vars:5,consts:[[4,"ngIf"],["class","play-spinner",4,"ngIf"],["class","quiz-submitted",4,"ngIf"],["class","chapter-play-rejected-wrapper",4,"ngIf"],["class","begin-quiz",4,"ngIf"],[1,"chapter-play-rejected-wrapper"],[1,"course-completed-rejected"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],[1,"zmdi","zmdi-lock-outline","zmdi-hc-5x"],[1,"text-basic-size","text-grey-mid","course-completed-text"],[1,"begin-quiz"],[1,"title","text-main"],[1,"description","default-list-style",3,"innerHTML"],["class","quizBaseInformation mdl-grid bg-grey-superlight",4,"ngIf"],[1,"start-playing-buttons"],["class","navigate next",3,"ngStyle","properties","state","buttonType","click",4,"ngIf"],[1,"navigate","next",3,"ngStyle","properties","state","buttonType","click"],[1,"quizBaseInformation","mdl-grid","bg-grey-superlight"],["class","quizInfo mdl-cell mdl-cell--2-col",4,"ngFor","ngForOf"],[1,"quizInfo","mdl-cell","mdl-cell--2-col"],[1,"icon","text-main"],["class","value bolded",4,"ngIf"],[1,"text-grey-mid","additional-info"],[1,"value","bolded"],[1,"play-spinner"],["class","quizTopInfo",4,"ngIf"],[3,"questions","quizForm","status","hasPrevPage","hasNextPage","processing","paginationTitle","current_page","settings","leaveDialogContentMessage","leavePlayMode","saveAndExit","movePrevPage","moveNextPage","submitQuiz","loaded"],[1,"quizTopInfo"],["class","leftSideShowingTheTiming",4,"ngIf"],["class","rightSideShowingMandatoryAnswers text-error",4,"ngIf"],[1,"leftSideShowingTheTiming"],[1,"text-grey-mid"],[1,"zmdi","zmdi-timer"],[1,"rightSideShowingMandatoryAnswers","text-error"],[1,"quiz-submitted"],[1,"upper-part","bg-grey-superlight"],[1,"icon-check"],[1,"zmdi",3,"ngClass"],[1,"wrap-right"],["class","showFinalScore bolded",4,"ngIf"],[1,"infoQuestionsEvaluation","default-list-style"],[3,"innerHtml",4,"ngIf"],["class","averageUserScore",4,"ngIf"],[1,"showResultsOrRetake"],["class","suspension-text",4,"ngIf"],["class","navigate prev",3,"properties","state","buttonType","click",4,"ngIf"],["class","navigate next",3,"properties","state","buttonType","click",4,"ngIf"],["class","showCategory",4,"ngIf"],["class","intime-completed quiz-completed",4,"ngIf"],["class","bottomButtons",4,"ngIf"],["class","text-positive-green",4,"ngIf"],["class","text-error",4,"ngIf"],[1,"text-positive-green"],[1,"text-error"],[1,"showFinalScore","bolded"],["class","percentage",3,"ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"percentage",3,"ngClass"],[3,"ngClass"],[3,"innerHtml"],[1,"averageUserScore"],[1,"bolded"],[1,"suspension-text"],[1,"navigate","prev",3,"properties","state","buttonType","click"],[1,"navigate","next",3,"properties","state","buttonType","click"],[1,"showCategory"],[1,"head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"intime-completed","quiz-completed"],[1,"activity-completed","bg-main"],[1,"activity-completed-message","text-white",3,"innerHTML"],[1,"activity-icon","bg-white"],[1,"zmdi","zmdi-hc-2x","zmdi-check-all","text-positive-green"],[1,"bottomButtons"],[1,"review-info"],[3,"questions","quizForm","status","leaveReviewMode","loaded"]],template:function(e,t){1&e&&(c.dd(0,kg,3,2,"div",0),c.dd(1,Ig,2,0,"div",1),c.dd(2,Eg,3,11,"div",0),c.dd(3,gb,22,19,"div",2),c.dd(4,yb,7,9,"div",0)),2&e&&(c.Dc("ngIf",t.status==t.quizStatuses.TO_BE_STARTED),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.REQUEST_FOR_PLAY),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.STARTED),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.SUBMITTED),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.REVIEW))},directives:[Ae.p,an.a,Ae.q,Ae.o,b.fd,mg,Ae.n],pipes:[E.b,Mi.a],encapsulation:2}),e})(),Sb=(()=>{class e{constructor(e,t,i,s,n,a,o){this._store=e,this.quizPlayerActions=t,this.ref=i,this.fb=s,this.docLayoutService=n,this.router=a,this.userInteractionService=o,this.completed=new c.q,this.loaded=new c.q,this.changeMode=new c.q,this.loadChapter=new c.q,this.timer_enabled=!1,this.timeElapsedForPrevPage={},this.expirationSnackbarShown=!1,this.quizInfo=[],this.processing=!1,this.current_mode=Xm.a.INLINE,this.can_view_prev_page=!1,this.showScorePerCategory=!1,this.showInfoOnSubmit=!1,this.showResumeButton=!1,this.showResultsButton=!1,this.leaveDialogContentMessage=E.a.t("test","Are you sure you want to leave the test? You'll be able to resume it later"),this.reloadQuiz=!1,this.quizSubscriber=this._store.select(ie.n).subscribe(e=>{if(e.has_error&&(this.errorWhilePlayingTest(e.error_message,e.error_code),setTimeout(()=>this.ref.markForCheck(),1e3)),!1===e.has_error)switch(this.fillLocalVariables(e),this.showResultsButton=this.user_status.show_results,this.manageTestInfo(),this.status===Xm.d.STARTED?(this.handleTimeLimit(),this.reloadQuiz=!1):this.timeElapsedForPrevPage={},this.handleDisplayMode(),this.is_submitted&&this.status===Xm.d.SUBMITTED&&!this.reloadQuiz&&(this.user_status.time_consumed=0,setTimeout(()=>this.ref.markForCheck()),this.reloadQuiz=!0),this.handleLeaveDialogMessage(),this.trackingAction){case Xm.g.SUBMIT:case Xm.g.SUBMIT_PARTIAL:case Xm.g.TIME_ENABLED_FORCE_EXIT:case Xm.g.TIME_ELAPSED_SUBMIT:this.destroyTimingCounter()}})}destroyTimingCounter(){this.timer_enabled&&(this.timer_enabled=!1,this.startTime=null,this.trackingAction=Xm.g.NO_ACTION,this.timeObservable&&this.timeObservable.unsubscribe())}errorWhilePlayingTest(e,t){if(1004!==t){const t=e||E.a.t("standard","Something went wrong. Please, try again later!");this.docLayoutService.toast.showToast({message:t,type:"error"})}t&&1015!==t&&1004!==t?this.leavePlayMode(this.quizForm.getRawValue()):this.processing=!1}fillLocalVariables(e){this.current_page!==e.current_page&&(this.processing=!1),this.status=e.status,this.mode=e.mode,this.settings=e.settings,this.pages_count=e.pages_count,this.can_view_prev_page=e.can_view_prev_page,this.questions_count=e.questions_count,this.user_status=e.user_status,this.questions=e.questions,this.is_submitted=e.is_submitted,this.current_page=e.current_page,this.paginationTitle=E.a.t("standard","Page {cur} of {all}",{cur:e.current_page,all:this.pages_count}),this.hasPrevPage=e.current_page>1&&e.settings.allow_backtracking&&this.can_view_prev_page,this.timeElapsedForPrevPage[String(e.current_page-1)]&&!0===this.timeElapsedForPrevPage[String(e.current_page-1)]&&(this.hasPrevPage=!1),this.hasNextPage=e.current_page<e.pages_count;const t={};for(const i in this.questions)this.questions[i]&&(t[i]=this.fb.group({}));this.quizForm=this.fb.group(t),this.showScorePerCategory=this.settings.show_score_by_category&&!nt.a.isEmpty(this.user_status)&&this.user_status.score_per_category,this.showResumeButton=this.settings.allow_partial_submission&&this.user_status.status===Xm.e.NOT_SUBMITTED}manageTestInfo(){this.showInfoOnSubmit=this.current_mode===Xm.a.INLINE&&this.settings.allow_partial_submission&&this.settings.max_attempts>this.user_status.attempts_consumed&&!this.settings.hide_user_info;const e="percentage"===this.settings.score_type?this.settings.pass_mark+" %":this.settings.pass_mark;this.quizInfo=[{icon:"zmdi-check-circle-u",name:E.a.t("test","Pass Mark"),value:""+e},{icon:"zmdi-timer",name:E.a.t("test","Time limit"),value:this.getTimeLimitValue()}],this.settings.order_type<2&&this.quizInfo.push({icon:"zmdi-check-circle",name:E.a.t("standard","_MAX_SCORE"),value:""+Math.round(100*this.settings.max_score)/100}),this.quizInfo.push({icon:"zmdi-help-outline",name:E.a.t("test","No. of questions"),value:""+this.questions_count},{icon:"zmdi-plus-circle-o",name:E.a.t("test","No. of attempts"),value:0===this.settings.max_attempts?E.a.t("test","Unlimited"):String(this.settings.max_attempts-this.user_status.attempts_consumed)},{icon:"zmdi-refresh-sync-off",name:E.a.t("test",this.showResumeButton?"Test can be resumed later":" Test cannot be resumed later"),value:E.a.t("standard",this.showResumeButton?"Yes":"No")})}getTimeLimitValue(){switch(this.settings.time_option){case"none":return E.a.t("standard","No");case"per_question":return E.a.t("standard","Yes");case"per_test":{const e=this.parseTimeLeft(this.settings.time_limit-this.user_status.time_consumed);let t="";return t+=e.hours?"{hours} h ":"",t+=e.minutes||e.hours&&e.seconds?"{minutes} min ":"",t+=e.seconds?"{seconds} sec":"",E.a.t("standard",t,{hours:e.hours,minutes:e.minutes,seconds:e.seconds})}}}parseTimeLeft(e){const t=Wc.duration(e,"seconds"),i=Math.floor(t.asHours()),s=Math.floor(t.asMinutes())-60*i;return{hours:i,minutes:s,seconds:e-60*i*60-60*s}}handleDisplayMode(){let e=!0;this.status!==Xm.d.TO_BE_STARTED&&(e=this.status===Xm.d.SUBMITTED&&!this.is_submitted),this.current_mode=e?Xm.a.INLINE:Xm.a.STAND_ALONE,this.changeMode.emit({mode:this.current_mode})}handleLeaveDialogMessage(){if("NULL"===this.settings.self_prerequisite)return void(this.leaveDialogContentMessage=E.a.t("test","Are you sure you want to leave the test? Note that you may not be able to resume it later or to access it anymore, and it could be marked as failed."));if(0===this.settings.max_attempts||!1!==this.settings.allow_partial_submission)return;const e=this.settings.max_attempts-this.user_status.attempts_consumed;this.leaveDialogContentMessage=1!==e?E.a.t("test","Are you sure you want to leave the test? You'll have {number} attempts remaining to complete it",{number:e}):E.a.t("test","Are you sure you want to leave the test?")}handleTimeLimit(){if("none"!==this.settings.time_option&&(this.expirationSnackbarShown=!1,this.timeObservable&&this.timeObservable.unsubscribe(),"per_test"===this.settings.time_option||this.current_page)){let e=this.getCurrentTimeLimitInSeconds();const t=Wc().add(String(e),"s").unix();this.handleTimeExpiration(t),e*=1e3,this.timeElapsedForPrevPage[this.current_page]||!0===this.timeElapsedForPrevPage[this.current_page]||(this.timer=this.generateTimeLeftMessage(e/1e3)),e||(this.processing=!0,this.ref.markForCheck()),this.timeObservable=Object(ko.a)(1e3,1e3).pipe(Object(bt.a)(Object(ko.a)().pipe(Object($i.a)(e)))).subscribe(i=>{this.handleTimeExpiration(t),e=t-Wc().unix()<=0?0:t-Wc().unix(),this.timer=this.generateTimeLeftMessage(e),this.ref.markForCheck(),0===e&&this.timeHasElapsed()},e=>this.errorWhilePlayingTest(e),()=>this.timeHasElapsed()),this.timer_enabled=!0}}generateTimeLeftMessage(e){const t=this.parseTimeLeft(e);return t.hours?E.a.t("standard","Time left: {hours}h {minutes}m {seconds}s",{hours:t.hours,minutes:t.minutes,seconds:t.seconds}):E.a.t("standard","Time left: {min}m {sec}s",{min:t.minutes,sec:t.seconds})}handleTimeExpiration(e){e-Wc().unix()<=5&&!this.expirationSnackbarShown&&(this.timeElapsedForPrevPage[String(this.current_page)]=!0,this.hasPrevPage=!1,this.docLayoutService.toast.showToast({message:E.a.t("standard","Your time is expiring soon"),type:"error"}),this.expirationSnackbarShown=!0)}getCurrentTimeLimitInSeconds(){const e=this.settings,t=this.user_status,i=nt.a.head(this.questions),s=Wc().unix()-this.startTime;let n=Number(e&&"per_test"===e.time_option?e.time_limit:i?i.time_limit:0);const a=e.time_option,o=Number(nt.a.cloneDeep(t.time_consumed))+s;return o&&"per_test"===a&&(n-=Number(o)),n}timeHasElapsed(){const e=this.quizForm.getRawValue();"per_test"===this.settings.time_option?this.current_page===this.pages_count?this.submitQuiz(e):this.timeElapsedSubmit(e):this.hasNextPage?(this.showNextPage(e),this.timeElapsedForPrevPage[String(this.current_page)]=!0):this.submitQuiz(e)}ngOnInit(){this._store.dispatch(this.quizPlayerActions.loadLaunchParams(this.chapter_viewer.launch_params)),this.activityCompletedMessage=this.next_chapter.id?E.a.t("course","{open_one}This activity is completed{close_one}, you can now proceed using {open_two}Back to Course buttons{close_two}",{open_one:'<span class="bolded">',close_one:"</span>",open_two:'<span class="bolded">',close_two:"</span>"}):E.a.t("course","The activity is completed. You can now proceed using the navigation buttons")}ngAfterViewInit(){this.loaded.emit(!0)}startPlaying(){this.userInteractionService.track(Al.a.QUIZ_START,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.QUIZ}),this._store.dispatch(this.quizPlayerActions.startPlaying({idOrg:this.current_chapter.id,action:Xm.g.START})),this.processing=!1,this.startTime=Wc().unix()}retakeTheTest(){this.userInteractionService.track(Al.a.QUIZ_RETAKE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.QUIZ}),this._store.dispatch(this.quizPlayerActions.retakeTheTest({idOrg:this.current_chapter.id,action:Xm.g.START})),this.processing=!1,this.startTime=Wc().unix()}continuePlaying(){this.userInteractionService.track(Al.a.QUIZ_CONTINUE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.QUIZ}),this._store.dispatch(this.quizPlayerActions.continuePlaying({idOrg:this.current_chapter.id,action:Xm.g.CONTINUE})),this.processing=!1,this.startTime=Wc().unix()}saveAndExit(e){this.userInteractionService.track(Al.a.QUIZ_SUBMIT_PARTIAL,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.QUIZ}),this.trackingAction=Xm.g.SUBMIT_PARTIAL,this._store.dispatch(this.quizPlayerActions.submitQuizPartial({idOrg:this.current_chapter.id,action:Xm.g.SUBMIT_PARTIAL,user_answers:Jm.a.formatUserEntry(e)})),this.completed.emit(this.current_chapter.id)}leaveReviewMode(){this._store.dispatch(this.quizPlayerActions.leaveReviewMode()),this.current_mode=Xm.a.STAND_ALONE,this.changeMode.emit({mode:this.current_mode})}leavePlayMode(e){this.timer_enabled&&(this.userInteractionService.track(Al.a.QUIZ_FORCE_SUBMIT,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.QUIZ}),this.trackingAction=Xm.g.TIME_ENABLED_FORCE_EXIT,this._store.dispatch(this.quizPlayerActions.submitQuizPartial({idOrg:this.current_chapter.id,action:Xm.g.TIME_ENABLED_FORCE_EXIT,user_answers:Jm.a.formatUserEntry(e)})));const t=this.status===Xm.d.REVIEW?Xm.d.SUBMITTED:Xm.d.TO_BE_STARTED;this._store.dispatch(ga.b.setCoursePlayerChapterLoading(!0)),this._store.dispatch(this.quizPlayerActions.leavePlayMode({courseId:this.course_id,status:t}))}showPrevPage(e){this.processing||(this.userInteractionService.track(Al.a.QUIZ_GO_TO_PAGE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.QUIZ,pageNumber:this.current_page-1}),this._store.dispatch(this.quizPlayerActions.goToPrevPage({idOrg:this.current_chapter.id,action:Xm.g.PREV,user_answers:Jm.a.formatUserEntry(e)})),this.processing=!0)}showNextPage(e){this.processing||(this.userInteractionService.track(Al.a.QUIZ_GO_TO_PAGE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.QUIZ,pageNumber:this.current_page+1}),this.trackingAction=Xm.g.NEXT,this._store.dispatch(this.quizPlayerActions.goToNextPage({idOrg:this.current_chapter.id,action:Xm.g.NEXT,user_answers:Jm.a.formatUserEntry(e)})),"per_question"!==this.settings.time_option||this.storeSubscriber||(this.storeSubscriber=this._store.select(ie.n).subscribe(e=>{e.has_error||this.current_page===e.current_page||(this.destroyTimingCounter(),this.storeSubscriber.unsubscribe())})),this.ref.detectChanges(),this.processing=!0)}timeEnabledForceExit(e){this._store.dispatch(this.quizPlayerActions.timeEnabledForceExit({idOrg:this.current_chapter.id,action:Xm.g.TIME_ENABLED_FORCE_EXIT,user_answers:Jm.a.formatUserEntry(e)}))}timeElapsedSubmit(e){this.userInteractionService.track(Al.a.QUIZ_SUBMIT_TIME_ELAPSED,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.QUIZ}),this.trackingAction=Xm.g.TIME_ELAPSED_SUBMIT,this._store.dispatch(this.quizPlayerActions.timeElapsedSubmit({idOrg:this.current_chapter.id,action:Xm.g.TIME_ELAPSED_SUBMIT,user_answers:Jm.a.formatUserEntry(e)}))}submitQuiz(e){this.processing||(this._store.select(ie.d).subscribe(e=>{this.courseMaxAttempts=void 0===e.max_attempts||"0"===e.max_attempts?0:e.max_attempts}),this.userInteractionService.track(Al.a.QUIZ_SUBMIT,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.QUIZ}),this.trackingAction=Xm.g.SUBMIT,this._store.dispatch(this.quizPlayerActions.submitQuiz({idOrg:this.current_chapter.id,action:Xm.g.SUBMIT,user_answers:Jm.a.formatUserEntry(e)})),this.processing=!0,this.ref.detectChanges())}showReviewMode(){this._store.dispatch(this.quizPlayerActions.showReview({idOrg:this.current_chapter.id,action:Xm.g.REVIEW}))}isLoaded(){}backToCourse(){this.manageTestInfo(),this.is_submitted&&this.completed.emit(this.current_chapter.id),this.current_mode=Xm.a.INLINE,this.changeMode.emit({mode:this.current_mode})}autoSubmitWithEnabledForceExit(){if("none"!==this.settings.time_option&&!0===this.timer_enabled){const e={track:{action:"time_enabled_force_exit",questions:Jm.a.formatUserEntry(this.quizForm.getRawValue())}},t=ki.a.getInstance().get("access_token").access_token,i=`/learn/v1/lo/${this.current_chapter.id}/track`;if(window.fetch){const s=new Headers({"Content-Type":"application/json; charset=UTF-8",Authorization:`Bearer ${t}`});fetch(i,{method:"POST",headers:s,body:JSON.stringify(e),mode:"same-origin",keepalive:!0})}else{const s=new XMLHttpRequest;s.open("POST",i,!1),s.setRequestHeader("Content-Type","application/json; charset=UTF-8"),s.setRequestHeader("Authorization","Bearer "+t),s.send(JSON.stringify(e))}}}beforeUnloadHander(e){this.autoSubmitWithEnabledForceExit()}onBrowserBack(e){this.autoSubmitWithEnabledForceExit()}loadNextChapter(){this.router.navigate(this.learning_plan_id?["/learn/course/"+this.course_id+"/play/"+this.next_chapter.id+"/"+this.next_chapter.slug_name,{lp:this.learning_plan_id}]:["learn/course/"+this.course_id+"/play/"+this.next_chapter.id+"/"+this.next_chapter.slug_name]),this.completed.emit(this.current_chapter.id),this.loadChapter.emit({chapter:this.next_chapter}),this.current_mode=Xm.a.INLINE,this.changeMode.emit({mode:this.current_mode})}ngOnDestroy(){this._store.dispatch(this.quizPlayerActions.setInitialState()),this.quizSubscriber&&this.quizSubscriber.unsubscribe(),this.destroyTimingCounter()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(v.d),c.dc(ga.f),c.dc(c.i),c.dc(Ke.d),c.dc(M.a),c.dc(s.h),c.dc(Al.c))},e.\u0275cmp=c.Xb({type:e,selectors:[["quiz-player"]],hostBindings:function(e,t){1&e&&c.rc("beforeunload",function(e){return t.beforeUnloadHander(e)},!1,c.Tc)("popstate",function(e){return t.onBrowserBack(e)},!1,c.Tc)},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",next_chapter:"next_chapter",learning_plan_id:"learning_plan_id",course_id:"course_id",course:"course"},outputs:{completed:"completed",loaded:"loaded",changeMode:"changeMode",loadChapter:"loadChapter"},decls:1,vars:24,consts:[[3,"current_chapter","chapter_viewer","next_chapter","status","settings","user_status","questions","quizInfo","quizForm","paginationTitle","hasPrevPage","hasNextPage","processing","current_mode","current_page","showScorePerCategory","showInfoOnSubmit","showResumeButton","showResultsButton","activityCompletedMessage","is_submitted","leaveDialogContentMessage","timer","courseMaxAttempts","startPlaying","retakeTheTest","continuePlaying","backToCourse","leavePlayMode","leaveReviewMode","saveAndExit","showPrevPage","showNextPage","submitQuiz","loaded","showReviewMode","nextChapter"]],template:function(e,t){1&e&&(c.jc(0,"quiz-player-dummy",0),c.rc("startPlaying",function(){return t.startPlaying()})("retakeTheTest",function(){return t.retakeTheTest()})("continuePlaying",function(){return t.continuePlaying()})("backToCourse",function(){return t.backToCourse()})("leavePlayMode",function(e){return t.leavePlayMode(e)})("leaveReviewMode",function(){return t.leaveReviewMode()})("saveAndExit",function(e){return t.saveAndExit(e)})("showPrevPage",function(e){return t.showPrevPage(e)})("showNextPage",function(e){return t.showNextPage(e)})("submitQuiz",function(e){return t.submitQuiz(e)})("loaded",function(){return t.isLoaded()})("showReviewMode",function(){return t.showReviewMode()})("nextChapter",function(){return t.loadNextChapter()}),c.ic()),2&e&&c.Dc("current_chapter",t.current_chapter)("chapter_viewer",t.chapter_viewer)("next_chapter",t.next_chapter)("status",t.status)("settings",t.settings)("user_status",t.user_status)("questions",t.questions)("quizInfo",t.quizInfo)("quizForm",t.quizForm)("paginationTitle",t.paginationTitle)("hasPrevPage",t.hasPrevPage)("hasNextPage",t.hasNextPage)("processing",t.processing)("current_mode",t.current_mode)("current_page",t.current_page)("showScorePerCategory",t.showScorePerCategory)("showInfoOnSubmit",t.showInfoOnSubmit)("showResumeButton",t.showResumeButton)("showResultsButton",t.showResultsButton)("activityCompletedMessage",t.activityCompletedMessage)("is_submitted",t.is_submitted)("leaveDialogContentMessage",t.leaveDialogContentMessage)("timer",t.timer)("courseMaxAttempts",t.courseMaxAttempts)},directives:[Cb],encapsulation:2}),e})();const Tb=["iframe"],kb=["form"];let Ib,xb=(()=>{class e{constructor(e,t,i,s){this.backendService=e,this.userInteractionService=t,this.activatedRoute=i,this.router=s,this.completed=new c.q,this.loaded=new c.q,this.fakeFormTemplateStart='\n        <form method="post" action=":action" id="lti-fake-form" name="ltiFakeForm" enctype="application/x-www-form-urlencoded">\n            <input type="submit" name="basiclti_submit" id="submitFakeButton" style="display: none" value=":launch"/>\n\n',this.fakeFormTemplateEnd='\n        </form>\n        <script type="text/javascript">\n        document.addEventListener("DOMContentLoaded", function(event) {         \n            document.getElementById("submitFakeButton").click();           \n        });          \n        <\/script>\n'}ngOnInit(){if(this.wrapperSelector=document.querySelector(".chapter-viewer__wrapper"),this.current_chapter&&this.chapter_viewer&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.height&&"lightbox"!=this.chapter_viewer.launch_params.mode?(this.iframeHeight=this.chapter_viewer.launch_params.height+"px",this.wrapperSelector.classList.add("no-min-height")):this.iframeHeight="100vh",this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.url){this.fakeFormTemplateStart=this.fakeFormTemplateStart.replace(":action",this.chapter_viewer.launch_params.url),this.fakeFormTemplateStart=this.fakeFormTemplateStart.replace(":launch",this.chapter_viewer.launch_params.basiclti_submit);let e=this.chapter_viewer.launch_params;this.launchMode=e.mode,this.completionMode=e.completion_mode,e=this.stripNotSighedOauthParams(Object.assign({},e));for(let t in e)e.hasOwnProperty(t)&&(this.fakeFormTemplateStart+='<input type="hidden" name="'+t+'" value="'+e[t]+'" />');if("fullscreen"==this.launchMode)return this.markAsCompleted(),void(window.location.href=e.launch_presentation_return_url);if("lightbox"==this.launchMode||"inline"==this.launchMode){let e=this.iframe.nativeElement;e=e.contentDocument.document||e.contentWindow.document,e.open(),e.write(this.fakeFormTemplateStart+this.fakeFormTemplateEnd),e.close(),e.onload=this.markAsCompleted()}else this.markAsCompleted(),Ib=window.open(),Ib.document.body.innerHTML=this.fakeFormTemplateStart+this.fakeFormTemplateEnd,Ib.document.getElementById("submitFakeButton").click(),this.externalWindowInterval=setInterval(()=>{(Ib.closed||null===Ib)&&(this.redirectUserToCoursePlayer(),clearInterval(this.externalWindowInterval),Ib=null)},500)}}listenForIframePostMessages(){Object(ql.g)(this.iframeElement).then(()=>{const e=this;this.ltiListeningFunction=t=>{const i=t.data;switch(i.action){case"legacy.closeLtiObject":"close"===i.message.state&&(window.removeEventListener("message",this.ltiListeningFunction),e.redirectUserToCoursePlayer())}},window.addEventListener("message",this.ltiListeningFunction)})}redirectUserToCoursePlayer(){if(void 0!==this.course_id){const e={autoplay:0},t=this.activatedRoute.snapshot.paramMap.get("lp");t&&(e.lp=t),this.router.navigate(["/learn/course/"+this.course_id+"/play/",e])}else console.warn("No course ID was passed to the viewer, hence the redirect is not possible.")}stripNotSighedOauthParams(e){if(e.oauth_skipped_params){let t=e.oauth_skipped_params;delete e.oauth_skipped_params,delete e.basiclti_submit;for(let i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(t[i])&&delete e[t[i]]}return e}ngAfterViewInit(){this.loaded.emit({height:this.iframeHeight}),this.trackLoad(),this.listenForIframePostMessages()}markAsCompleted(){this.chapter_viewer.launch_params&&"on_open"==this.completionMode&&(this.trackComplete(),this.backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST").subscribe(e=>{"inline"!==this.launchMode&&"popup"!==this.launchMode||this.completed.emit(this.current_chapter.id)}))}trackComplete(){this.userInteractionService.track(Al.a.LTI_COMPLETE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.LTI})}trackLoad(){this.userInteractionService.track(Al.a.LTI_LOAD,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.LTI})}ngOnDestroy(){void 0!==this.ltiListeningFunction&&window.removeEventListener("message",this.ltiListeningFunction)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(Al.c),c.dc(s.a),c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["lti-viewer"]],viewQuery:function(e,t){if(1&e&&(c.md(Tb,3),c.md(kb,1),c.md(Tb,1)),2&e){let e;c.Qc(e=c.sc())&&(t.iframe=e.first),c.Qc(e=c.sc())&&(t.form=e.first),c.Qc(e=c.sc())&&(t.iframeElement=e)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:5,vars:2,consts:[[1,"lti-wrapper"],["iframe",""],["method","post","id","lti-fake-form","name","ltiFakeForm"],["form",""]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.ec(1,"iframe",null,1),c.ec(3,"form",2,3),c.ic()),2&e&&c.Vb("lightbox","lightbox"===t.launchMode)},directives:[Ke.y,Ke.p,Ke.q],styles:[".lti-wrapper[_ngcontent-%COMP%] {\n            -webkit-overflow-scrolling: touch;\n            overflow-y: scroll;\n            width: 100%;\n            height: 510px;\n        }\n\n        .lightbox[_ngcontent-%COMP%] {\n            height: 100%;\n        }\n\n        .lti-wrapper[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%] {\n            height: 100%;\n            width: 100%;\n        }"]}),e})();var Db=i("jcE0");let Ob=(()=>{class e{constructor(e,t){this.backendService=e,this.userInteractionService=t,this.completed=new c.q,this.loaded=new c.q,this.height="100%"}urlLoad(){let e,t=new a.a(t=>{e=t});return this.backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST").subscribe(t=>{e&&e.next(t.data.acknowledge.url)}),t}ngOnInit(){}ngAfterViewInit(){this.trackLoad(),this.loaded.emit(!0)}ngAfterViewChecked(){}markAsCompleted(){this.trackComplete(),this.completed.emit(this.current_chapter.id)}trackComplete(){this.userInteractionService.track(Al.a.GDRIVE_COMPLETE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.GOOGLE_DRIVE})}trackLoad(){this.userInteractionService.track(Al.a.GDRIVE_LOAD,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.GOOGLE_DRIVE})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(Al.c))},e.\u0275cmp=c.Xb({type:e,selectors:[["gdrive-viewer"]],inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:1,vars:2,consts:[[3,"url","max_height","complete"]],template:function(e,t){1&e&&(c.jc(0,"iframe-gdrive",0),c.rc("complete",function(){return t.markAsCompleted()}),c.ic()),2&e&&c.Dc("url",t.urlLoad.bind(t))("max_height",t.height)},directives:[Db.a],encapsulation:2}),e})();const Eb=["iframe"];function Pb(e,t){if(1&e&&c.ec(0,"iframe",1,2),2&e){const e=c.vc();c.Ec("height",e.height),c.Dc("src",e.src,c.Wc)}}let Mb=(()=>{class e{constructor(e,t,i){this._sanitizer=e,this._router=t,this.userInteractionService=i,this.completed=new c.q,this.loaded=new c.q,this.showIframe=!1}ngOnInit(){this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode&&("fullscreen"==this.chapter_viewer.launch_params.mode?(window.location.href=this.chapter_viewer.launch_params.url,this.showIframe=!1):"popup"==this.chapter_viewer.launch_params.mode?this.openElucidatInNewWindow():(this.src=this._sanitizer.bypassSecurityTrustResourceUrl(this.chapter_viewer.launch_params.url),this.showIframe=!0)),this.height="100%",this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.height&&"lightbox"!=this.chapter_viewer.launch_params.mode&&(this.height=this.chapter_viewer.launch_params.height)}ngAfterViewInit(){this.loaded.emit(!0),this.userInteractionService.track(Al.a.ELUCIDAT_LOAD,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.ELUCIDAT})}ngOnDestroy(){this.completed.emit(this.current_chapter.id),this.userInteractionService.track(Al.a.ELUCIDAT_COMPLETE,Al.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.ELUCIDAT})}openElucidatInNewWindow(){const e=window.open(this.chapter_viewer.launch_params.url);if(null==e)return;const t=setInterval(()=>{console.log(e),(e.closed||null==e)&&(void 0!==this.course_id&&this.course_id?(clearInterval(t),this._router.navigate(["/learn/course/"+this.course_id+"/play/"])):(clearInterval(t),console.warn("No course ID was passed to the viewer, hence the redirect is not possible.")),clearInterval(t))},600);this.showIframe=!1}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Pi.b),c.dc(s.h),c.dc(Al.c))},e.\u0275cmp=c.Xb({type:e,selectors:[["elucidat-viewer"]],viewQuery:function(e,t){if(1&e&&c.md(Eb,1),2&e){let e;c.Qc(e=c.sc())&&(t.iframe=e.first)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:1,vars:1,consts:[["id","elucidat-iframe","width","100%",3,"height","src",4,"ngIf"],["id","elucidat-iframe","width","100%",3,"height","src"],["iframe",""]],template:function(e,t){1&e&&c.dd(0,Pb,2,2,"iframe",0),2&e&&c.Dc("ngIf",t.showIframe)},directives:[Ae.p],styles:["#elucidat-iframe[_ngcontent-%COMP%] {\n            min-height: 510px;\n        }"]}),e})();const Ab=["playerFlowPlayer"];let Lb=(()=>{class e{constructor(e,t,i,s,n){this._backendService=e,this.router=t,this._store$=i,this.userInteractionService=s,this.store=n,this.isFirstTrack=!0,this.flowPlayerParams={disable_hls:!0,flowplayer_key:null,mp4_url:null,hls_url:null,bookmark:0,is_seekable:!0,seekable_status:1,subtitles:[],track_interval:1,allow_change_speed:!1,progress:()=>{}},this.autoStart=!0,this.completed=new c.q,this.loaded=new c.q,this.ready=new c.q}beforeWindowClose(){this.track(this.currentPlayerDuration,this.currentPlayerDuration===this.totalVideoDuration,!0)}ngOnInit(){this.chapter_viewer.launch_params&&(this.currentPlayerDuration=this.chapter_viewer.launch_params.bookmark,this.flowPlayerParams.disable_hls=!this.chapter_viewer.launch_params.hasOwnProperty("disable_hls")||this.chapter_viewer.launch_params.disable_hls,this.flowPlayerParams.flowplayer_key=this.chapter_viewer.launch_params.flowplayer_key||null,this.flowPlayerParams.mp4_url=this.chapter_viewer.launch_params.mp4_url||null,this.flowPlayerParams.hls_url=this.chapter_viewer.launch_params.hls_url||null,this.flowPlayerParams.bookmark=this.chapter_viewer.launch_params.bookmark||0,this.flowPlayerParams.allow_change_speed=this.chapter_viewer.launch_params.allow_change_speed||!1,this.flowPlayerParams.track_interval=5,this.flowPlayerParams.progress=e=>{this.currentPlayerDuration=e.current,this.totalVideoDuration=e.duration,this.totalVideoDuration=this.totalVideoDuration>150?e.duration-15:.9*e.duration;const t=this.current_chapter.status!==String(te.d.COMPLETED),i=this.currentPlayerDuration>=this.totalVideoDuration&&t;this.isFirstTrack&&0===Math.round(e.current)?this.isFirstTrack=!1:(this.track(Math.round(this.currentPlayerDuration),i),i||this.trackProgress(e.current),i&&2===Number(this.chapter_viewer.launch_params.seekable_status)&&(this.flowPlayerParams.is_seekable=!0))},this.chapter_viewer.launch_params.is_seekable||(this.flowPlayerParams.is_seekable=!1),this.flowPlayerParams.subtitles=this.chapter_viewer.launch_params.subtitles||[])}ngOnDestroy(){const e=this.currentPlayerDuration>=this.totalVideoDuration;this.track(this.currentPlayerDuration,e),e||this.completed.emit(this.current_chapter.id)}track(e,t=!1,i=!1){if(o.a.getInstance().isValid()){const s={track:{bookmark:e,complete:t}},n=ki.a.getInstance().get("access_token").access_token,a=`/learn/v1/lo/${this.current_chapter.id}/track`;if(i&&window.fetch){const e=new Headers({"Content-Type":"application/json; charset=UTF-8",Authorization:`Bearer ${n}`});fetch(a,{method:"POST",headers:e,body:JSON.stringify(s),mode:"same-origin",keepalive:!0}).then(()=>{this.trackSuccess(t)}).catch(e=>this.trackError(e))}else this._backendService.request(a,"POST",s,{},"",void 0,e=>this.trackError(e)).subscribe(()=>{this.trackSuccess(t)})}}trackSuccess(e){e&&this.completed.emit(this.current_chapter.id)}trackError(e){return 403===e.status?(this.router.navigate(["/learn/mycourses"],mi.b),Object(xi.a)(null)):this._backendService.handleApiErrors(e)}ngAfterViewInit(){this.loaded.emit(!0)}onPlay(e){this.currentUserInteraction=Al.a.UPLOADED_VIDEO_PLAY,this.userInteractionService.track(Al.a.UPLOADED_VIDEO_PLAY,Al.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:mu.a.UPLOADED_VIDEO,progress:e.current})}onStop(e){this.currentUserInteraction=Al.a.UPLOADED_VIDEO_PAUSE,this.userInteractionService.track(Al.a.UPLOADED_VIDEO_PAUSE,Al.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:mu.a.UPLOADED_VIDEO,progress:e.current})}onResume(e){this.currentUserInteraction=Al.a.UPLOADED_VIDEO_PLAY,this.userInteractionService.track(Al.a.UPLOADED_VIDEO_PLAY,Al.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:mu.a.UPLOADED_VIDEO,progress:e.current})}onComplete(e){this.store.dispatch(ga.b.videoCompleted()),this.currentUserInteraction=Al.a.UPLOADED_VIDEO_END,this.userInteractionService.track(Al.a.UPLOADED_VIDEO_END,Al.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:mu.a.UPLOADED_VIDEO})}onReady(){this.ready.emit()}trackProgress(e){this.currentUserInteraction=Al.a.UPLOADED_VIDEO_PROGRESS,this.userInteractionService.track(Al.a.UPLOADED_VIDEO_PROGRESS,Al.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:mu.a.UPLOADED_VIDEO,progress:e})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(s.h),c.dc(v.d),c.dc(Al.c),c.dc(v.d))},e.\u0275cmp=c.Xb({type:e,selectors:[["video-upload-viewer"]],viewQuery:function(e,t){if(1&e&&c.md(Ab,1),2&e){let e;c.Qc(e=c.sc())&&(t.playerFlowPlayer=e.first)}},hostBindings:function(e,t){1&e&&c.rc("beforeunload",function(){return t.beforeWindowClose()},!1,c.Tc)},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course:"course",autoStart:"autoStart"},outputs:{completed:"completed",loaded:"loaded",ready:"ready"},decls:3,vars:9,consts:[[1,"player-wrapper"],[3,"disable_hls","mp4_url","hls_url","bookmark","is_seekable","subtitles","track_interval","autostart","speedControlEnabled","progress","play","stop","resume","complete","ready"],["playerFlowPlayer",""]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"player-flowplayer",1,2),c.rc("progress",function(e){return t.flowPlayerParams.progress(e)})("play",function(e){return t.onPlay(e)})("stop",function(e){return t.onStop(e)})("resume",function(e){return t.onResume(e)})("complete",function(e){return t.onComplete(e)})("ready",function(){return t.onReady()}),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("disable_hls",t.flowPlayerParams.disable_hls)("mp4_url",t.flowPlayerParams.mp4_url)("hls_url",t.flowPlayerParams.hls_url)("bookmark",t.flowPlayerParams.bookmark)("is_seekable",t.flowPlayerParams.is_seekable)("subtitles",t.flowPlayerParams.subtitles)("track_interval",t.flowPlayerParams.track_interval)("autostart",t.autoStart)("speedControlEnabled",t.flowPlayerParams.allow_change_speed))},directives:[Lo.a],styles:[".player-wrapper[_ngcontent-%COMP%] {\n            direction: ltr;\n        }"]}),e})();const jb=["playerIframe"];let Fb=(()=>{class e{constructor(e,t,i,s){this._backendService=e,this.router=t,this.userInteractionService=i,this.store=s,this.playerParams={url:null,bookmark:0,track_interval:1,progress:()=>{}},this.currentPlayerDuration=0,this.autoStart=!0,this.completed=new c.q,this.loaded=new c.q,this.ready=new c.q}beforeWindowClose(){this.track(this.currentPlayerDuration,this.currentPlayerDuration>=this.totalVideoDuration,!0)}ngOnInit(){this.chapter_viewer.launch_params&&(this.currentPlayerDuration=this.chapter_viewer.launch_params.bookmark,this.playerParams={url:this.chapter_viewer.launch_params.url||null,bookmark:this.chapter_viewer.launch_params.bookmark||0,track_interval:5,progress:e=>{this.currentPlayerDuration=e.current,this.totalVideoDuration=e.duration,this.totalVideoDuration=this.totalVideoDuration>150?e.duration-15:.9*e.duration;const t=this.current_chapter.status!==String(te.d.COMPLETED),i=this.currentPlayerDuration>=this.totalVideoDuration&&t;this.track(Math.round(this.currentPlayerDuration),i)}})}ngOnDestroy(){const e=Math.round(this.currentPlayerDuration)>=Math.round(this.totalVideoDuration);this.chapter_must_be_tracked&&this.track(this.currentPlayerDuration,e),e||this.completed.emit(this.current_chapter.id)}ngAfterViewInit(){this.loaded.emit(!0)}onUserInteraction(e){const t=e&&e.payload?e.payload:{},i=Object.assign(Object.assign({},{courseId:this.course_id,loId:this.current_chapter.id,loType:mu.a.EMBEDDED_VIDEO}),t);e&&(this.currentUserInteraction=e.action),this.userInteractionService.track(e.action,Al.b.COURSE_PLAYER,i)}track(e,t=!1,i=!1){if(o.a.getInstance().isValid()){const s={track:{bookmark:e,complete:t}},n=ki.a.getInstance().get("access_token").access_token,a=`/learn/v1/lo/${this.current_chapter.id}/track`;if(i&&window.fetch){const e=new Headers({"Content-Type":"application/json; charset=UTF-8",Authorization:`Bearer ${n}`});fetch(a,{method:"POST",headers:e,body:JSON.stringify(s),mode:"same-origin",keepalive:!0}).then(()=>{this.trackSuccess(t)}).catch(e=>this.trackError(e))}else this._backendService.request(a,"POST",s,{},"",void 0,e=>this.trackError(e)).subscribe(()=>{this.trackSuccess(t)})}}trackSuccess(e){e&&this.completed.emit(this.current_chapter.id)}trackError(e){return 403===e.status?(this.router.navigate(["/learn/mycourses"],mi.b),Object(xi.a)(null)):this._backendService.handleApiErrors(e)}onReady(){this.ready.emit()}onEmbedCompleted(){this.store.dispatch(ga.b.videoCompleted())}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(s.h),c.dc(Al.c),c.dc(v.d))},e.\u0275cmp=c.Xb({type:e,selectors:[["embeded-video-viewer"]],viewQuery:function(e,t){if(1&e&&c.md(jb,1),2&e){let e;c.Qc(e=c.sc())&&(t.playerIframe=e.first)}},hostBindings:function(e,t){1&e&&c.rc("beforeunload",function(){return t.beforeWindowClose()},!1,c.Tc)},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course:"course",course_id:"course_id",autoStart:"autoStart",chapter_must_be_tracked:"chapter_must_be_tracked"},outputs:{completed:"completed",loaded:"loaded",ready:"ready"},decls:2,vars:4,consts:[[3,"url","bookmark","track_interval","autostart","progress","userInteraction","ready","complete"],["playerIframe",""]],template:function(e,t){1&e&&(c.jc(0,"player-iframe",0,1),c.rc("progress",function(e){return t.playerParams.progress(e)})("userInteraction",function(e){return t.onUserInteraction(e)})("ready",function(){return t.onReady()})("complete",function(){return t.onEmbedCompleted()}),c.ic()),2&e&&c.Dc("url",t.playerParams.url)("bookmark",t.playerParams.bookmark)("track_interval",t.playerParams.track_interval)("autostart",t.autoStart)},directives:[Ao.a],encapsulation:2}),e})();var Rb=i("1vPS");const Nb=["chapterPlayingWrapper"],Ub=["chapterViewerWrapper"],qb=["chapterViewerContainer"],zb=["videoUploadViewer"],Vb=["embededVideoViewer"];function Bb(e,t){if(1&e&&(c.jc(0,"div",21),c.jc(1,"div",22),c.ec(2,"h3",23),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("innerHTML",null==e.current_chapter?null:e.current_chapter.name,c.Vc)}}function Gb(e,t){1&e&&(c.jc(0,"div",24),c.ec(1,"ui-spinner"),c.ic())}function $b(e,t){if(1&e&&(c.ec(0,"p",31),c.wc(1,"t")),2&e){const e=c.vc(2);c.Dc("innerHTML",c.xc(1,1,e.lockedMessage),c.Vc)}}function Hb(e,t){if(1&e&&(c.jc(0,"div",25),c.jc(1,"div",26),c.jc(2,"div",27),c.jc(3,"div",28),c.ec(4,"em",29),c.dd(5,$b,2,3,"p",30),c.ic(),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(5),c.Dc("ngIf",null==e.current_chapter?null:e.current_chapter.locked)}}function Yb(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",35),c.rc("click",function(){return c.Uc(e),c.vc(2).goToProfile()}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",e.goToProfileButton.properties)("buttonType","submit")}}const Wb=function(){return{category:"marketplace"}};function Qb(e,t){if(1&e&&(c.jc(0,"div",32),c.ec(1,"blankslate",33),c.wc(2,"t"),c.wc(3,"t"),c.ec(4,"blankslate",33),c.wc(5,"t"),c.wc(6,"t"),c.dd(7,Yb,1,2,"rectangular-button",34),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("title",c.xc(2,9,e.accessDeniedMessage))("subtitle",c.yc(3,11,"You cannot play this learning object because some details are missing in your profile: First Name, Last Name and/or Email. Fill them out in your My Profile area.",c.Hc(19,Wb)))("isVisible",!e.userAllowOnlyPasswordChange)("type","sad001"),c.Mb(3),c.Dc("title",c.xc(5,14,e.accessDeniedMessage))("subtitle",c.yc(6,16,"You cannot play this learning object because some details are missing in your profile. Please contact your Administrator.",c.Hc(20,Wb)))("isVisible",e.userAllowOnlyPasswordChange)("type","sad002"),c.Mb(3),c.Dc("ngIf",!e.userAllowOnlyPasswordChange)}}function Kb(e,t){1&e&&(c.jc(0,"span",40),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd("",c.xc(2,1,"Here's where you left off"),": "))}function Xb(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",41),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.startPlaying(t.last_played_chapter,!0)}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",e.resumeButton.properties)("state",e.isCourseStarted?"normal":"disabled")("buttonType","submit")}}function Jb(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",41),c.rc("click",function(){return c.Uc(e),c.vc(2).startPlaying()}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",e.startButton.properties)("state",e.isCourseStarted?"normal":"disabled")("buttonType","submit")}}function Zb(e,t){if(1&e&&(c.jc(0,"div",36),c.jc(1,"div",27),c.jc(2,"div",28),c.dd(3,Kb,3,3,"span",37),c.wc(4,"json"),c.ec(5,"span",38),c.wc(6,"t"),c.wc(7,"t"),c.ic(),c.jc(8,"div",28),c.dd(9,Xb,1,3,"rectangular-button",39),c.dd(10,Jb,1,3,"rectangular-button",39),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();let t=null;c.Mb(3),c.Dc("ngIf","{}"!=c.xc(4,4,e.last_played_chapter)),c.Mb(2),c.Dc("innerHTML",c.xc(6,6,null==(t=e.whereYouLeftOfChapter(e.last_played_chapter))?null:t.name)?c.xc(7,8,null==(t=e.whereYouLeftOfChapter(e.last_played_chapter))?null:t.name):"",c.Vc),c.Mb(4),c.Dc("ngIf",e.resumeButton.properties.display),c.Mb(1),c.Dc("ngIf",e.startButton.properties.display)}}const ef=function(){return{category:"course"}};function tf(e,t){1&e&&(c.jc(0,"p",40),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.yc(2,1,"How would you rate this course?",c.Hc(4,ef))," "))}function sf(e,t){1&e&&(c.jc(0,"p",40),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Thanks for rating!")," "))}function nf(e,t){if(1&e){const e=c.kc();c.jc(0,"div",28),c.dd(1,tf,3,5,"p",37),c.dd(2,sf,3,3,"p",37),c.jc(3,"rating",51),c.rc("rate",function(t){return c.Uc(e),c.vc(2).rateChange(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",!(null!=e.course&&null!=e.course.course_status&&e.course.course_status.is_rated)),c.Mb(1),c.Dc("ngIf",null==e.course||null==e.course.course_status?null:e.course.course_status.is_rated),c.Mb(1),c.Dc("value",e.raterParams.value)("mode",null==e.raterParams?null:e.raterParams.mode)("show_value",!0)("enable_voting",e.raterParams.enable_voting)("value_position",e.raterParams.value_position)("size",e.raterParams.size)("color",e.raterParams.color)}}function af(e,t){if(1&e&&(c.jc(0,"div",42),c.jc(1,"div",43),c.jc(2,"div",28),c.jc(3,"div",44),c.ec(4,"em",45),c.ec(5,"em",46),c.ic(),c.jc(6,"div",47),c.fd(7),c.wc(8,"t"),c.wc(9,"date"),c.ic(),c.ic(),c.jc(10,"div",48),c.jc(11,"h1",49),c.fd(12),c.wc(13,"cut"),c.ic(),c.ic(),c.dd(14,nf,4,9,"div",50),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(7),c.id(" ",c.xc(8,4,e.courseCompletedOnText)," ",c.xc(9,6,e.courseCompletionDate)," "),c.Mb(5),c.gd(c.yc(13,8,null==e.course?null:e.course.name,130)),c.Mb(2),c.Dc("ngIf",(null==e.course?null:e.course.rating_option)==e.ratingStatus.ALWAYS||(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_ENROLLED||(null==e.course_status?null:e.course_status.status)==e.courseStatusType.COMPLETED&&(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_COMPLETED)}}function of(e,t){if(1&e){const e=c.kc();c.jc(0,"sign-viewer",67),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("currentChapter",e.current_chapter)("chapters",e.chapters)("completionDate",e.completionDate)("course",e.course)}}function rf(e,t){if(1&e){const e=c.kc();c.jc(0,"otj-viewer",68),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("launch_params",e.chapter_viewer.launch_params)("course_id",null==e.course?null:e.course.id)("learning_plan_id",e.learning_plan_id)}}function cf(e,t){if(1&e){const e=c.kc();c.jc(0,"html-viewer",69),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("custom_css",null==e.course?null:e.course.html_page_css)("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function lf(e,t){if(1&e){const e=c.kc();c.jc(0,"download-viewer",70),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("downloadViewerActive",e.downloadViewerActive)("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function df(e,t){if(1&e){const e=c.kc();c.jc(0,"slides-view",71),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function uf(e,t){if(1&e){const e=c.kc();c.jc(0,"tincan-viewer",72),c.rc("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)})("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("courseHasAutoplay",null==e.course?null:e.course.has_autoplay)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)("learning_plan_id",e.learning_plan_id)}}function hf(e,t){if(1&e){const e=c.kc();c.jc(0,"aicc-viewer",73),c.rc("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)})("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("courseHasAutoplay",null==e.course?null:e.course.has_autoplay)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function pf(e,t){if(1&e){const e=c.kc();c.jc(0,"scorm-viewer",74),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)})("next",function(t){return c.Uc(e),c.vc(3).changeChapter(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("courseHasAutoplay",null==e.course?null:e.course.has_autoplay)("course_id",null==e.course?null:e.course.id)}}function mf(e,t){if(1&e){const e=c.kc();c.jc(0,"assignments-viewer",75),c.rc("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)})("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function gf(e,t){if(1&e){const e=c.kc();c.jc(0,"survey-player",71),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function bf(e,t){if(1&e){const e=c.kc();c.jc(0,"quiz-player",76),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)})("changeMode",function(t){return c.Uc(e),c.vc(3).switchMode(t)})("loadChapter",function(t){return c.Uc(e),c.vc(3).loadChapter(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("next_chapter",e.next_chapter)("learning_plan_id",e.learning_plan_id)("course_id",null==e.course?null:e.course.id)("course",e.course)}}function ff(e,t){if(1&e){const e=c.kc();c.jc(0,"lti-viewer",71),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function vf(e,t){if(1&e){const e=c.kc();c.jc(0,"gdrive-viewer",71),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function _f(e,t){if(1&e){const e=c.kc();c.jc(0,"elucidat-viewer",77),c.rc("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function wf(e,t){if(1&e){const e=c.kc();c.jc(0,"video-upload-viewer",78,79),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)})("ready",function(){return c.Uc(e),c.vc(3).setPlayerStatus()}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course",e.course)("autoStart",e.playerAutoStart)}}function yf(e,t){if(1&e){const e=c.kc();c.jc(0,"embeded-video-viewer",80,81),c.rc("completed",function(t){return c.Uc(e),c.vc(3).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(3).chapterLoaded(t)})("ready",function(){return c.Uc(e),c.vc(3).setPlayerStatus()}),c.ic()}if(2&e){const e=c.vc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)("chapter_must_be_tracked",e.chapter_must_be_tracked)("autoStart",e.playerAutoStart)}}function Cf(e,t){if(1&e&&(c.hc(0),c.dd(1,of,1,4,"sign-viewer",54),c.dd(2,rf,1,3,"otj-viewer",55),c.dd(3,cf,1,4,"html-viewer",56),c.dd(4,lf,1,4,"download-viewer",57),c.dd(5,df,1,3,"slides-view",58),c.dd(6,uf,1,5,"tincan-viewer",59),c.dd(7,hf,1,4,"aicc-viewer",60),c.dd(8,pf,1,4,"scorm-viewer",61),c.dd(9,mf,1,3,"assignments-viewer",62),c.dd(10,gf,1,3,"survey-player",58),c.dd(11,bf,1,6,"quiz-player",63),c.dd(12,ff,1,3,"lti-viewer",58),c.dd(13,vf,1,3,"gdrive-viewer",58),c.dd(14,_f,1,3,"elucidat-viewer",64),c.dd(15,wf,2,4,"video-upload-viewer",65),c.dd(16,yf,2,5,"embeded-video-viewer",66),c.gc()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",(null==e.current_chapter?null:e.current_chapter.type)===e.chapterTypeSign),c.Mb(1),c.Dc("ngIf","otj"===(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","htmlpage"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","file"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","authoring"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","tincan"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","aicc"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","scormorg"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","deliverable"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","poll"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","test"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","lti"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","googledrive"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","elucidat"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","video"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","youtube"==(null==e.current_chapter?null:e.current_chapter.type)||"wistia"==(null==e.current_chapter?null:e.current_chapter.type)||"vimeo"==(null==e.current_chapter?null:e.current_chapter.type))}}function Sf(e,t){if(1&e&&(c.jc(0,"div",null,52),c.dd(2,Cf,17,16,"ng-container",53),c.ic()),2&e){const e=c.vc();c.Rb("chapter-playing ",e.chapter_viewer&&null!=e.chapter_viewer&&e.chapter_viewer.launch_params&&"popup"!=(null==e.chapter_viewer||null==e.chapter_viewer.launch_params?null:e.chapter_viewer.launch_params.mode)||(null==e.current_chapter?null:e.current_chapter.type)===e.chapterTypeSign?"bg-white":"",""),c.Mb(2),c.Dc("ngIf",!e.showCompletedInfo)}}function Tf(e,t){1&e&&(c.jc(0,"span",90),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.yc(2,1,"How would you rate this course?",c.Hc(4,ef))," "))}function kf(e,t){1&e&&(c.jc(0,"span",90),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Thanks for rating!")," "))}function If(e,t){if(1&e){const e=c.kc();c.jc(0,"div",88),c.jc(1,"div",27),c.jc(2,"div",28),c.dd(3,Tf,3,5,"span",89),c.dd(4,kf,3,3,"span",89),c.jc(5,"rating",51),c.rc("rate",function(t){return c.Uc(e),c.vc(2).rateChange(t)}),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(3),c.Dc("ngIf",!(null!=e.course&&null!=e.course.course_status&&e.course.course_status.is_rated)),c.Mb(1),c.Dc("ngIf",null==e.course||null==e.course.course_status?null:e.course.course_status.is_rated),c.Mb(1),c.Dc("value",e.raterParams.value)("mode",null==e.raterParams?null:e.raterParams.mode)("show_value",!0)("enable_voting",e.raterParams.enable_voting)("value_position",e.raterParams.value_position)("size",e.raterParams.size)("color",e.raterParams.color)}}const xf=function(e,t){return{shown:e,"with-rating":t}},Df=function(e,t,i){return{"bg-main":e,"bg-grey-mid":t,"bg-positive-green":i}},Of=function(e,t){return{"zmdi-check-all text-positive-green":e,"zmdi-time text-grey-mid":t}};function Ef(e,t){if(1&e&&(c.jc(0,"div",82),c.jc(1,"div",83),c.ec(2,"p",84),c.wc(3,"t"),c.jc(4,"div",85),c.ec(5,"em",86),c.ic(),c.ic(),c.dd(6,If,6,9,"div",87),c.ic()),2&e){const e=c.vc();c.Dc("ngClass",c.Jc(7,xf,e.showCompletionBar,(null==e.course?null:e.course.rating_option)==e.ratingStatus.ALWAYS||(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_ENROLLED||(null==e.course_status?null:e.course_status.status)==e.courseStatusType.COMPLETED&&(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_ENROLLED)),c.Mb(1),c.Dc("ngClass",c.Kc(10,Df,"deliverable"!=(null==e.current_chapter?null:e.current_chapter.type)&&(null==e.chapter_viewer?null:e.chapter_viewer.status)!=e.courseViewerStatus.COURSE_COMPLETED&&(null==e.chapter_viewer?null:e.chapter_viewer.status)==e.courseViewerStatus.ACTIVITY_COMPLETED,"deliverable"==(null==e.current_chapter?null:e.current_chapter.type)&&(null==e.chapter_viewer?null:e.chapter_viewer.status)!=e.courseViewerStatus.COURSE_COMPLETED&&(null==e.chapter_viewer?null:e.chapter_viewer.status)==e.courseViewerStatus.ACTIVITY_COMPLETED,(null==e.chapter_viewer?null:e.chapter_viewer.status)!=e.courseViewerStatus.ACTIVITY_COMPLETED&&(null==e.course_status?null:e.course_status.status)==e.courseStatusType.COMPLETED)),c.Mb(1),c.Dc("innerHTML",c.xc(3,5,e.activityCompletedMessage),c.Vc),c.Mb(3),c.Dc("ngClass",c.Jc(14,Of,(null==e.current_chapter?null:e.current_chapter.status)==e.courseStatusType.COMPLETED&&"deliverable"!=(null==e.current_chapter?null:e.current_chapter.type)||(null==e.course_status?null:e.course_status.status)==e.courseStatusType.COMPLETED,(null==e.current_chapter?null:e.current_chapter.status)==e.courseStatusType.COMPLETED&&"deliverable"==(null==e.current_chapter?null:e.current_chapter.type))),c.Mb(1),c.Dc("ngIf",(null==e.course?null:e.course.rating_option)==e.ratingStatus.ALWAYS||(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_ENROLLED||(null==e.course_status?null:e.course_status.status)==e.courseStatusType.COMPLETED&&(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_COMPLETED)}}function Pf(e,t){if(1&e&&c.ec(0,"rectangular-button",100),2&e){const e=c.vc(3);c.Dc("properties",e.prevButtonParams.properties)("state",e.lockedNavigationButtons(e.prev_chapter,e.prevButtonParams.properties))("displayText",!0)("click",e.prevButtonParams.onClick)}}function Mf(e,t){if(1&e&&c.ec(0,"span",101),2&e){const e=c.vc(3);c.Dc("innerHTML",null==e.prev_chapter?null:e.prev_chapter.name,c.Vc)}}function Af(e,t){if(1&e&&(c.jc(0,"div",95),c.jc(1,"div",96),c.dd(2,Pf,1,4,"rectangular-button",97),c.ic(),c.jc(3,"div",98),c.dd(4,Mf,1,1,"span",99),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("ngIf",e.hasPreviousNavigationButton),c.Mb(2),c.Dc("ngIf",e.hasPreviousNavigationButton)}}function Lf(e,t){if(1&e&&c.ec(0,"span",104),2&e){const e=c.vc(3);c.Dc("innerHTML",null==e.next_chapter?null:e.next_chapter.name,c.Vc)}}function jf(e,t){if(1&e&&c.ec(0,"rectangular-button",100),2&e){const e=c.vc(3);c.Dc("properties",e.nextButtonParams.properties)("state",e.lockedNavigationButtons(e.next_chapter,e.nextButtonParams.properties))("displayText",!0)("click",e.nextButtonParams.onClick)}}function Ff(e,t){if(1&e&&(c.jc(0,"div",102),c.jc(1,"div",98),c.dd(2,Lf,1,1,"span",103),c.ic(),c.jc(3,"div",96),c.dd(4,jf,1,4,"rectangular-button",97),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("ngIf",e.hasNextNavigationButton),c.Mb(2),c.Dc("ngIf",e.hasNextNavigationButton)}}function Rf(e,t){if(1&e&&(c.jc(0,"div",91),c.jc(1,"div",92),c.dd(2,Af,5,2,"div",93),c.dd(3,Ff,5,2,"div",94),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("ngIf",e.showNavigation),c.Mb(1),c.Dc("ngIf",e.showNavigation)}}const Nf=function(e){return{"bg-grey-superlight":e}},Uf=function(e){return{"background-image":e}},qf=function(){return{category:"app7020"}},zf=function(){return{"":""}};let Vf;function Bf(){setInterval(()=>{postMessage("track")},3e5)}let Gf=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a,o,r,l,d,u,h,p,m,g){super(),this._el=e,this._renderer=t,this.cd=i,this.router=s,this._store=n,this._coursePlayerAction=a,this._backendService=o,this.http=r,this.formatterService=l,this.route=d,this.toggleService=u,this.userInteractionService=h,this.windowService=p,this.svc=m,this._docLayoutService=g,this.preserve_lightbox=null,this.device=null,this.isCourseStarted=!0,this.rate=new c.q,this.play=new c.q,this.completed=new c.q,this.loaded=new c.q,this.nextChapter=new c.q,this.raterParams={},this.downloadViewerActive=new gt.a,this.showCompletedInfo=!1,this.ratingStatus=nd.a,this.courseViewerStatus=Bt.h,this.chapterTypeSign=Bt.a.SIGN.toString(),this.eSignatureStatus=Bt.i,this.courseStatusType=Bt.e,this.showCompletionBar=!1,this.showNavigation=!0,this.hasWindowFocus=!0,this.hasLightboxView=!1,this.docLayoutConfig=this._docLayoutService.getDocLayoutConfig(),this.hideTitleBar=!1,this.disableLightbox=!1,this.keepAliveInterval=null,this.platform=x.b.getInstance(),this.playerAutoStart=!0,this.routeSubscriber=this.route.params.subscribe(e=>{e.lp&&(this.activeLpFromRoute=e.lp)})}get lastPlayedChapter(){return this.last_played_chapter}set lastPlayedChapter(e){this.last_played_chapter=e,this.manageChapterButtons()}eventHandler(e){var t,i,s;(null===(t=this.current_chapter)||void 0===t?void 0:t.id)&&"sign"!==(null===(i=this.current_chapter)||void 0===i?void 0:i.type)&&"locked"!==(null===(s=this.current_chapter)||void 0===s?void 0:s.locked)&&fetch(`/learn/v1/lo/${this.current_chapter.id}/session`,{method:"POST",body:JSON.stringify({context:"lms"}),keepalive:!0,cache:"no-cache",headers:{Authorization:"Bearer "+ki.a.getInstance().get("access_token").access_token,"Content-Type":"application/json"}})}ngAfterViewInit(){Boolean(this.platform.disable_simultaneous_access)&&this.windowService.focus().pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{void 0!==this.current_chapter&&this.isCurrentChapterVideo()&&(this.hasWindowFocus=e,this.setPlayerStatus())})}onCloseButtonClick(){const e=this.chapterViewerWrapper.nativeElement,t=this.chapterViewerWrapper.nativeElement.querySelector(".chapter-viewer__body");e.classList.contains("lightbox")&&(e.classList.toggle("lightbox"),e.classList.add("inline"),this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.height&&(this._renderer.setStyle(t,"height",this.chapter_viewer.launch_params.height),e.classList.add("no-min-height")),document.body.classList.contains("hide-overflow")&&document.body.classList.remove("hide-overflow"),this.loaded.emit(!0)),this.chapterViewerWrapper.nativeElement.querySelector(".slides-player__wrap")&&this.chapterViewerWrapper.nativeElement.querySelector(".slides-player__wrap").classList.contains("lightbox")&&(this.chapterViewerWrapper.nativeElement.querySelector(".slides-player__wrap").classList.remove("lightbox"),document.body.classList.contains("hide-overflow")&&document.body.classList.remove("hide-overflow"));const i=`/learn/course/${this.course.id}/play/`,s=mi.b;this.course.has_autoplay&&(s.autoplay=0),this.activeLpFromRoute&&(s.lp=this.activeLpFromRoute);const n="authoring"===this.current_chapter.type;"scormorg"===this.current_chapter.type||"tincan"===this.current_chapter.type||"aicc"===this.current_chapter.type||"elucidat"===this.current_chapter.type||n?new Promise((e,t)=>{var i,s,a,o,r;const c=null!==(r=null!==(o=null!==(a=null!==(s=null!==(i=document.getElementById("scorm-iframe"))&&void 0!==i?i:document.querySelector("#tincan-iframe-wrapper iframe"))&&void 0!==s?s:document.getElementById("aicc-iframe"))&&void 0!==a?a:document.querySelector(".slides-player__wrap"))&&void 0!==o?o:document.getElementById("elucidat-iframe"))&&void 0!==r?r:document.querySelector(".chapter-viewer__body");c?n?(c.remove(),e(!0)):(c.addEventListener("load",t=>{c.parentNode&&c.parentNode.removeChild(c),e(!0)}),c.setAttribute("src","about:blank")):e(!1)}).then(e=>{if(e){const e=Object.assign(Object.assign({},mi.b),{autoplay:0});this.activeLpFromRoute&&(e.lp=this.activeLpFromRoute),this.router.navigate([`/learn/course/${this.course.id}/play`,e],mi.b),this._store.dispatch(ga.b.onLightboxWindowClose(this.course.id,this.current_chapter.id,[`/learn/course/${this.course.id}/play`,e]))}else this.router.navigate([i,s]),this._store.dispatch(ga.b.onLightboxWindowClose(this.course.id,this.current_chapter.id,[i,s]))}):this.router.navigate([i,s])}ngOnChanges(e){var t;const i=this._el.nativeElement.querySelector(".chapter-viewer__wrapper"),s=this._el.nativeElement.querySelector(".chapter-viewer__body");if(e.current_chapter&&this.current_chapter){e.current_chapter.previousValue&&e.current_chapter.previousValue.id&&this.userInteractionService.track(Al.a.LEARNING_OBJECT_CLOSE,Al.b.COURSE_PLAYER,{courseId:this.course.id,loId:e.current_chapter.previousValue.id,loType:Object(ad.a)(e.current_chapter.previousValue.type||"")});try{const e=["aicc","scormorg","tincan","authoring"],i=JSON.parse(this.current_chapter.params);this.hasLightboxView=i&&i.desktop_openmode&&"lightbox"===i.desktop_openmode&&-1!==e.indexOf(this.current_chapter.type)||"lightbox"===(null===(t=this.current_chapter)||void 0===t?void 0:t.mode)}catch(n){}this.userInteractionService.track(Al.a.LEARNING_OBJECT_OPEN,Al.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:Object(ad.a)(this.current_chapter.type||"")})}if(this.current_chapter&&Vf!==this.current_chapter.id&&i&&(this._renderer.setStyle(s,"height",""),i.classList.contains("auto-height-player")&&i.classList.remove("auto-height-player"),i.classList.contains("no-min-height")&&i.classList.remove("no-min-height"),document.body.classList.contains("hide-overflow")&&!this.preserve_lightbox&&document.body.classList.remove("hide-overflow"),i.classList.contains("inline")&&i.classList.remove("inline"),i.classList.contains("lightbox")&&!this.preserve_lightbox&&(i.classList.remove("lightbox"),i.classList.contains("inline")||i.classList.add("inline"))),this.chapter_viewer){if(Vf=this.current_chapter?this.current_chapter.id:null,this.chapter_viewer.launch_params)if(this.hideTitleBar=this.chapter_viewer.launch_params.hide_title_bar,this.chapter_viewer.status==Bt.h.PLAYING&&this.chapter_viewer.launch_params.mode)switch(this.chapter_viewer.launch_params.mode){case"lightbox":i&&(i.classList.contains("inline")&&i.classList.remove("inline"),this.disableLightbox||i.classList.add("lightbox"),this.disableLightbox=!1,document.body.classList.add("hide-overflow"),this._renderer.setStyle(i,"height",""));break;case"fullscreen":case"popup":this._renderer.setStyle(s,"height",""),i.classList.contains("no-min-height")&&i.classList.remove("no-min-height");break;case"inline":i&&(i.classList.contains("lightbox")&&i.classList.remove("lightbox"),i.classList.add("inline"),document.body.classList.contains("hide-overflow")&&document.body.classList.remove("hide-overflow"),this.chapter_viewer.launch_params.height&&this.chapter_viewer.launch_params.height>100&&"video"!=this.current_chapter.type&&"wistia"!=this.current_chapter.type&&"vimeo"!=this.current_chapter.type&&"youtube"!=this.current_chapter.type&&"googledrive"!=this.current_chapter.type&&(this._renderer.setStyle(s,"height",this.chapter_viewer.launch_params.height),i.classList.add("no-min-height")));break;default:i&&this.chapter_viewer.launch_params.height?(this._renderer.setStyle(s,"height",this.chapter_viewer.launch_params.height),i.classList.add("no-min-height")):i&&!this.chapter_viewer.launch_params.height&&(this._renderer.setStyle(s,"height",""),i.classList.contains("no-min-height")&&i.classList.remove("no-min-height"))}else nt.a.isEmpty(this.chapter_viewer.launch_params.mode)&&i&&(i.classList.contains("lightbox")&&!this.prev_chapter&&i.classList.remove("lightbox"),document.body.classList.contains("hide-overflow")&&!this.preserve_lightbox&&document.body.classList.remove("hide-overflow"),this.chapter_viewer.launch_params.height&&this.chapter_viewer.launch_params.height>100&&"video"!=this.current_chapter.type&&"wistia"!=this.current_chapter.type&&"vimeo"!=this.current_chapter.type&&"youtube"!=this.current_chapter.type&&"googledrive"!=this.current_chapter.type&&(this._renderer.setStyle(s,"height",this.chapter_viewer.launch_params.height),i.classList.add("no-min-height")));this.current_chapter&&this.oldChapter&&this.current_chapter.id===this.oldChapter.id&&this.oldChapter.status!==this.current_chapter.status&&this.current_chapter.status==String(this.courseStatusType.COMPLETED)&&("deliverable"===this.current_chapter.type?this.activityCompletedMessage=E.a.t("course",'<span class="bolded">This activity requires instructor\'s evaluation.</span> In the meantime, you can proceed using <span class="bolded">next</span> or <span class="bolded">previous</span> buttons'):(this.activityCompletedMessage=E.a.t("course",this.chapters.length>1?'<span class="bolded">This activity is completed</span>, you can now proceed using <span class="bolded">next</span> or <span class="bolded">previous</span> buttons':'<span class="bolded">You have completed the course</span>.'),this.completionBarAnimation("up"),this.completionBarAnimation("down"))),this.course_status.status_changed&&this.chapter_viewer.status==this.courseViewerStatus.COURSE_COMPLETED&&(this.activityCompletedMessage=E.a.t("course",this.course.certificate_url?'<span class="bolded">You have completed the course</span>, you can now <span class="bolded">download your certificate.</span>':'<span class="bolded">You have completed the course</span>.'),this.completionBarAnimation("up"),this.completionBarAnimation("down")),this.chapter_viewer.status===this.courseViewerStatus.PLAY_REJECT_USERFIELDS&&(this.userAllowOnlyPasswordChange=x.b.getInstance().settings.allow_only_password_change)}this.course_status.status===Bt.e.COMPLETED&&this.course_status.hasOwnProperty("completion_date")&&(!this.current_chapter||nt.a.isEmpty(this.current_chapter))||this.course.esignature_status===Bt.i.SIGNED&&this.course_status.status===Bt.e.COMPLETED&&this.current_chapter.type===Bt.a.SIGN.toString()?(this.showCompletedInfo=!0,this.completionDate=this.formatterService.getTimezonedDate(this.course_status.completion_date,o.a.getInstance().timezone),this.courseCompletedOnText=E.a.t("course","Course completed on")):this.showCompletedInfo=!1,this.raterParams.hasOwnProperty("value")&&this.course.hasOwnProperty("current_rating")&&(this.raterParams.value=this.course.current_rating,this.raterParams.enable_voting=!this.course_status.is_rated)}ngOnInit(){var e,t,i;this.raterParams={value:this.course.hasOwnProperty("current_rating")?this.course.current_rating:0,enable_voting:!this.course_status.is_rated,show_value:!0,mode:"five_stars",value_position:"left",size:30,color:"rgb(255,215,0)",title:E.a.t("standard","How would you rate this course?")},this.showNavigation=this.course.hasOwnProperty("show_lightbox_nav")&&this.course.show_lightbox_nav,this.nextButtonParams={properties:{text:E.a.t("standard","_NEXT"),colorScheme:"main",typeStyle:"filled"},onClick:()=>{this.changeChapter("next")}},this.prevButtonParams={properties:{text:E.a.t("standard","_PREV"),colorScheme:"main",typeStyle:"filled"},onClick:()=>{this.changeChapter("prev")}},this.manageChapterButtons(),this.accessDeniedMessage=E.a.t("course","_NOENTER");let s=!1;if("scormorg"===(null===(e=this.current_chapter)||void 0===e?void 0:e.type)&&(null===(t=this.current_chapter)||void 0===t?void 0:t.params)){const e=JSON.parse(this.current_chapter.params);e.hasOwnProperty("openmode")&&(s="lightbox"===e.openmode||"inline"===e.openmode)}if(!s&&this.current_chapter&&"locked"!==(null===(i=this.current_chapter)||void 0===i?void 0:i.locked))if("undefined"!=typeof Worker){const e=this.fn2workerURL(Bf);this.trackSessionWorker=new Worker(e),this.trackSessionWorker.onmessage=({})=>{this.trackSessionRequest()}}else this.keepAliveInterval=setInterval(()=>{this.trackSessionRequest()},3e5);this.course_status&&"completion_date"in this.course_status&&this.course_status.completion_date&&(this.completionDate=this.formatterService.getTimezonedDate(this.course_status.completion_date,o.a.getInstance().timezone))}fn2workerURL(e){const t=new Blob(["("+e.toString()+")()"],{type:"text/javascript"});return URL.createObjectURL(t)}ngOnDestroy(){var e;super.ngOnDestroy(),this.current_chapter&&this.current_chapter.id&&(this.userInteractionService.track(Al.a.LEARNING_OBJECT_CLOSE,Al.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter?this.current_chapter.id:void 0,loType:Object(ad.a)(this.current_chapter.type||"")}),"locked"!==(null===(e=this.current_chapter)||void 0===e?void 0:e.locked)&&this.trackSessionRequest()),this.keepAliveInterval&&clearInterval(this.keepAliveInterval),this.trackSessionWorker&&this.trackSessionWorker.terminate(),this.routeSubscriber&&this.routeSubscriber.unsubscribe(),document.body.classList.remove("hide-overflow")}getChapterMode(e){let t={},i="lightbox";if(e.params?t=JSON.parse(e.params):e.params_inherited&&(t=JSON.parse(e.params_inherited)),["aicc","authoring","elucidat","lti","scormorg","tincan"].indexOf(e.type)>-1)if("authoring"==e.type||"tincan"==e.type){let s=t.hasOwnProperty("openmode")?t.openmode:"lightbox";"authoring"==e.type&&"popup"==s&&(s="lightbox"),i=s}else i=t.hasOwnProperty("desktop_openmode")?t.desktop_openmode:"lightbox";else i="inline";return i}isChapterLightbox(e){return"lightbox"===e&&!(!this.chapter_viewer||void 0===this.chapter_viewer)&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode==e}changeChapter(e="next"){var t;const i="next"===e?this.next_chapter:this.prev_chapter;i&&((null==i?void 0:i.locked)?this.svc.getChapterLockStatus((null===(t=this.course)||void 0===t?void 0:t.id)||-1,i.id).subscribe(({chapters:t,locked:s})=>{s?this.svc.showChapterLockedModal(i,this.cd):(this._store.dispatch(ga.a.reloadChapters(t)),this.playChapter(i,e))}):this.playChapter(i,e))}playChapter(e,t="next"){new Promise((e,t)=>{const i=document.getElementById("scorm-iframe");i?(i.addEventListener("load",t=>{i.parentNode&&i.parentNode.removeChild(i),e(!0)}),i.setAttribute("src","about:blank")):e(!1)}).then(()=>{const e={};if(this.device&&(e.device=this.device),"next"===t){const t=this.getChapterMode(this.next_chapter);this.isChapterLightbox(t)?this._store.dispatch(ga.b.startPlaying({id:this.next_chapter.id,preserve_lightbox:"lightbox"===t,chapters:this.chapters,params:e})):(this._store.dispatch(ga.a.reloadCoursePlayer(this.course.id,this.current_chapter.id)),this.router.navigate([`learn/course/${this.course.id}/play/${this.next_chapter.id}/${this.next_chapter.slug_name}`]))}else{const t=this.getChapterMode(this.prev_chapter);this.isChapterLightbox(t)?this._store.dispatch(ga.b.startPlaying({id:this.prev_chapter.id,preserve_lightbox:"lightbox"===t,navigating_back:!0,chapters:this.chapters,params:e})):(this._store.dispatch(ga.a.reloadCoursePlayer(this.course.id,this.current_chapter.id)),this.router.navigate([`learn/course/${this.course.id}/play/${this.prev_chapter.id}/${this.prev_chapter.slug_name}`]))}})}rateChange(e){this.rate.emit(e)}playCourse(){this.play.emit(!0),(this.current_chapter&&this.current_chapter.status==String(this.courseStatusType.COMPLETED)||this.chapter_viewer.status==this.courseViewerStatus.COURSE_COMPLETED)&&(this.completionBarAnimation("up"),this.completionBarAnimation("down"))}startPlaying(e,t=!1){nt.a.isEmpty(e)&&(e=this.current_chapter);const i={};if(this.learning_plan_id&&(i.lp=this.learning_plan_id),nt.a.isEmpty(e))this.play.emit();else{if(t){const t=this.whereYouLeftOfChapter(e);return void this.router.navigate([`learn/course/${this.course.id}/play/${t.id}/${t.slug_name}`,i])}this.router.navigate([`learn/course/${this.course.id}/play/${e.id}/${e.slug_name}`,i])}}chapterCompleted(e){if(this.current_chapter.id==e&&"scormorg"===this.current_chapter.type){this.switchMode({mode:"inline"},!0),this.disableLightbox=!0;const e={};this.course.has_autoplay&&(e.autoplay=0),this.learning_plan_id&&(e.lp=this.learning_plan_id),this.router.navigate([`learn/course/${this.course.id}/play`,e],mi.b),this._store.dispatch(ga.b.onLightboxWindowClose(this.course.id,this.current_chapter.id,[`/learn/course/${this.course.id}/play`,e]))}this.completed.emit(e),this.current_chapter&&this.current_chapter.status!==String(this.courseStatusType.COMPLETED)&&(this.oldChapter=this.current_chapter)}chapterLoaded(e){"authoring"!=this.current_chapter.type&&"video"!=this.current_chapter.type&&"youtube"!=this.current_chapter.type&&"vimeo"!=this.current_chapter.type&&"sign"!=this.current_chapter.type&&"wistia"!=this.current_chapter.type&&"file"!=this.current_chapter.type&&"googledrive"!=this.current_chapter.type||this.chapterViewerWrapper.nativeElement.classList.add("auto-height-player"),setTimeout(()=>{this.downloadViewerActive.next("file"==this.current_chapter.type),this.loaded.emit(!0)},30),this.oldChapter=this.current_chapter,this.manageChapterButtons()}switchMode(e,t){e.mode||(e.mode="lightbox");const i=e.mode;this.changedMode=this.current_chapter.mode=i;const s=this.chapterViewerWrapper.nativeElement;"standalone"===i&&(s.classList.add("standalone"),s.classList.add("bg-grey-superlight"),document.querySelector("body").classList.add("standalone-mode")),"inline"===i&&(s.className.indexOf("standalone")>-1&&s.classList.remove("standalone"),s.className.indexOf("bg-grey-superlight")>-1&&s.classList.remove("bg-grey-superlight"),document.querySelector("body").className.indexOf("standalone-mode")>-1&&document.querySelector("body").classList.remove("standalone-mode")),"lightbox"===i&&s.classList.add("lightbox"),"inline"==i&&((s.className.indexOf("lightbox")&&!this.preserve_lightbox||t)&&s.classList.remove("lightbox"),s.classList.add("inline"))}completionBarAnimation(e){let t,i;"up"===e?(i=!0,t=800):(i=!1,t=5e3),setTimeout(()=>{this.showCompletionBar=i,this.downloadViewerActive.next(!i),this.cd.markForCheck()},t)}loadChapter(e){this.nextChapter.emit(e.chapter.id)}lockedNavigationButtons(e,t){return t.icon="",e.hasOwnProperty("locked")||e.hasOwnProperty("status")?"normal":"disabled"}whereYouLeftOfChapter(e){return Nc(e,this.chapters)}isInLightboxMode(){return this.chapterViewerWrapper&&this.chapterViewerWrapper.nativeElement&&this.chapterViewerWrapper.nativeElement.classList.contains("lightbox")}getLightboxPosition(e){return this.isInLightboxMode()?document.body.getBoundingClientRect()[e]-this.chapterViewerContainer.nativeElement.getBoundingClientRect()[e]+"px":"0px"}detectChanges(){this.cd.detectChanges()}setPlayerStatus(){this.videoUploadViewer&&this.videoUploadViewer.playerFlowPlayer&&this.videoUploadViewer.playerFlowPlayer.player?this.setFlowPlayerStatus():this.embededVideoViewer&&this.embededVideoViewer.playerIframe&&this.embededVideoViewer.playerIframe.dclComponent&&this.embededVideoViewer.playerIframe.dclComponent.player&&this.setIframePlayerStatus()}goToProfile(){this.router.navigate(["/learn/my-profile"])}get lockedMessage(){switch(this.current_chapter.locked){case"max_number_views":return E.a.t("course","You have reached the maximum number of views");case"locked_maxattempts":return this.current_chapter.status_message;default:return E.a.t("course","You must complete {message} in order to unlock this activity",{message:`\n                <div class="mdl-cell--12-col">\n                    <h1 class=" text-grey-dark">${this.current_chapter.status_message}</h1>\n                </div>\n                `})}}get courseCompletionDate(){if(this.course_status&&"completion_date"in this.course_status&&this.course_status.completion_date)return this.formatterService.getTimezonedDate(this.course_status.completion_date,o.a.getInstance().timezone)}isCurrentChapterVideo(){return"video"===this.current_chapter.type||"youtube"===this.current_chapter.type||"vimeo"===this.current_chapter.type||"wistia"===this.current_chapter.type}manageChapterButtons(){const e=!nt.a.isEmpty(this.last_played_chapter)&&this.course_status.status!=Bt.e.COMPLETED&&("elearning"==this.course.type||"classroom"==this.course.type&&this.toggleService.isOn(u.f.TOGGLE_VILT)),t=this.chapters&&this.chapters.length>0&&(!this.current_chapter||nt.a.isEmpty(this.current_chapter)&&!e)&&this.course_status.status!=Bt.e.COMPLETED;this.resumeButton={properties:{text:E.a.t("standard","Resume where you left off"),colorScheme:"main",typeStyle:"filled",display:e}},this.startButton={properties:{text:E.a.t("standard","Start learning now"),colorScheme:"positive-green",typeStyle:"filled",display:t}},this.goToProfileButton={properties:{text:E.a.t("course","Go to my profile"),colorScheme:"positive-green",typeStyle:"filled",display:t}}}setFlowPlayerStatus(){if((this.videoUploadViewer.currentUserInteraction!==Al.a.UPLOADED_VIDEO_PAUSE||this.playerFocusStatus===Bt.b.PAUSE)&&this.videoUploadViewer.currentUserInteraction!==Al.a.UPLOADED_VIDEO_END)try{this.hasWindowFocus?(this.playerFocusStatus=Bt.b.PLAY,this.videoUploadViewer.playerFlowPlayer.player.play()):(this.playerFocusStatus=Bt.b.PAUSE,this.videoUploadViewer.playerFlowPlayer.player.pause())}catch(e){console.warn("Couldn't set the player status automatically")}}setIframePlayerStatus(){if((this.embededVideoViewer.currentUserInteraction!==Al.a.EMBEDDED_VIDEO_PAUSE||this.playerFocusStatus===Bt.b.PAUSE)&&this.embededVideoViewer.currentUserInteraction!==Al.a.EMBEDDED_VIDEO_END)try{this.hasWindowFocus?(this.playerFocusStatus=Bt.b.PLAY,"youtube"===this.current_chapter.type?this.embededVideoViewer.playerIframe.dclComponent.player.playVideo():this.embededVideoViewer.playerIframe.dclComponent.player.play()):(this.playerFocusStatus=Bt.b.PAUSE,"youtube"===this.current_chapter.type?this.embededVideoViewer.playerIframe.dclComponent.player.pauseVideo():this.embededVideoViewer.playerIframe.dclComponent.player.pause())}catch(e){console.warn("Couldn't set the player status automatically")}}trackSessionRequest(){var e,t;(null===(e=this.current_chapter)||void 0===e?void 0:e.id)&&"sign"!==(null===(t=this.current_chapter)||void 0===t?void 0:t.type)&&this._backendService.request(`/learn/v1/lo/${this.current_chapter.id}/session`,"POST",{context:"lms"}).subscribe(()=>{})}get hasPreviousNavigationButton(){return!nt.a.isEmpty(this.prev_chapter)}get hasNextNavigationButton(){return!nt.a.isEmpty(this.next_chapter)}get hasNavigationButtons(){return this.hasPreviousNavigationButton||this.hasNextNavigationButton}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.o),c.dc(c.M),c.dc(c.i),c.dc(s.h),c.dc(v.d),c.dc(ga.b),c.dc(S.a),c.dc(od.b),c.dc(ti.b),c.dc(s.a),c.dc(rd.a),c.dc(Al.c),c.dc(cd.a),c.dc(Bc),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["chapter-viewer"]],viewQuery:function(e,t){if(1&e&&(c.md(Nb,1),c.md(Ub,3),c.md(qb,3),c.md(zb,1),c.md(Vb,1)),2&e){let e;c.Qc(e=c.sc())&&(t.chapterPlayingWrapper=e.first),c.Qc(e=c.sc())&&(t.chapterViewerWrapper=e.first),c.Qc(e=c.sc())&&(t.chapterViewerContainer=e.first),c.Qc(e=c.sc())&&(t.videoUploadViewer=e.first),c.Qc(e=c.sc())&&(t.embededVideoViewer=e.first)}},hostBindings:function(e,t){1&e&&c.rc("unload",function(e){return t.eventHandler(e)},!1,c.Tc)},inputs:{course:"course",course_status:"course_status",current_chapter:"current_chapter",chapters:"chapters",chapter_viewer:"chapter_viewer",prev_chapter:"prev_chapter",next_chapter:"next_chapter",chapter_must_be_tracked:"chapter_must_be_tracked",lastPlayedChapter:"lastPlayedChapter",preserve_lightbox:"preserve_lightbox",device:"device",learning_plan_id:"learning_plan_id",isCourseStarted:"isCourseStarted"},outputs:{rate:"rate",play:"play",completed:"completed",loaded:"loaded",nextChapter:"nextChapter"},features:[c.Jb,c.Kb],decls:24,vars:37,consts:[["chapterViewerContainer",""],[3,"active"],["id","scrollableContent",3,"ngClass","ngStyle","resize"],["chapterViewerWrapper",""],[1,"chapter-viewer__overlay","bg-grey-dark"],[1,"chapter-viewer__header","bg-grey-dark",3,"hidden"],[1,"title"],[1,"text-white","text-normal",3,"innerHTML"],[1,"close-button",3,"uiKeyboardFocusable","click","keydown.enter"],[1,"text-white"],[1,"zmdi","zmdi-close","zmdi-hc-2x","text-white"],["class","standalone-header bg-main",4,"ngIf"],[3,"ngStyle"],["class","play-spinner",4,"ngIf"],["class","chapter-play-rejected-wrapper",4,"ngIf"],["class","chapter-play-reject-userfields bg-white",4,"ngIf"],["class","course-state-ready",4,"ngIf"],["class","course-completed-ready",4,"ngIf"],[3,"class",4,"ngIf"],["class","intime-completed",3,"ngClass",4,"ngIf"],["class","chapter-viewer__footer bg-white",4,"ngIf"],[1,"standalone-header","bg-main"],[1,"wrapper","text-white"],[3,"innerHTML"],[1,"play-spinner"],[1,"chapter-play-rejected-wrapper"],[1,"course-completed-rejected"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],[1,"zmdi","zmdi-lock-outline","zmdi-hc-5x"],["class","text-basic-size text-grey-mid course-completed-text rejection-reason-text",3,"innerHTML",4,"ngIf"],[1,"text-basic-size","text-grey-mid","course-completed-text","rejection-reason-text",3,"innerHTML"],[1,"chapter-play-reject-userfields","bg-white"],[3,"title","subtitle","isVisible","type"],["class","go-to-profile-btn",3,"properties","buttonType","click",4,"ngIf"],[1,"go-to-profile-btn",3,"properties","buttonType","click"],[1,"course-state-ready"],["class","text-grey-mid title-regular",4,"ngIf"],[1,"title-regular","text-main",3,"innerHTML"],["class","start-now",3,"properties","state","buttonType","click",4,"ngIf"],[1,"text-grey-mid","title-regular"],[1,"start-now",3,"properties","state","buttonType","click"],[1,"course-completed-ready"],[1,"mdl-grid","course-content-wrap"],[1,"complete-course-icons"],[1,"fa","fa-trophy","gm-yellow"],[1,"zmdi","zmdi-check-circle","check"],[1,"title-regular","text-grey-mid","course-completed-text"],[1,"mdl-cell","mdl-cell--11-col"],[1,"title-section","text-grey-dark","description-two-line-12fs-white"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[3,"value","mode","show_value","enable_voting","value_position","size","color","rate"],["chapterPlayingWrapper",""],[4,"ngIf"],[3,"currentChapter","chapters","completionDate","course","completed",4,"ngIf"],[3,"launch_params","course_id","learning_plan_id","completed",4,"ngIf"],[3,"custom_css","current_chapter","chapter_viewer","course_id","completed","loaded",4,"ngIf"],[3,"downloadViewerActive","current_chapter","chapter_viewer","course_id","completed","loaded",4,"ngIf"],[3,"current_chapter","chapter_viewer","course_id","completed","loaded",4,"ngIf"],[3,"current_chapter","courseHasAutoplay","chapter_viewer","course_id","learning_plan_id","loaded","completed",4,"ngIf"],[3,"current_chapter","courseHasAutoplay","chapter_viewer","course_id","loaded","completed",4,"ngIf"],[3,"current_chapter","chapter_viewer","courseHasAutoplay","course_id","completed","loaded","next",4,"ngIf"],[3,"current_chapter","chapter_viewer","course_id","loaded","completed",4,"ngIf"],[3,"current_chapter","chapter_viewer","next_chapter","learning_plan_id","course_id","course","completed","loaded","changeMode","loadChapter",4,"ngIf"],[3,"current_chapter","chapter_viewer","course_id","loaded",4,"ngIf"],[3,"current_chapter","chapter_viewer","course","autoStart","completed","loaded","ready",4,"ngIf"],[3,"current_chapter","chapter_viewer","course_id","chapter_must_be_tracked","autoStart","completed","loaded","ready",4,"ngIf"],[3,"currentChapter","chapters","completionDate","course","completed"],[3,"launch_params","course_id","learning_plan_id","completed"],[3,"custom_css","current_chapter","chapter_viewer","course_id","completed","loaded"],[3,"downloadViewerActive","current_chapter","chapter_viewer","course_id","completed","loaded"],[3,"current_chapter","chapter_viewer","course_id","completed","loaded"],[3,"current_chapter","courseHasAutoplay","chapter_viewer","course_id","learning_plan_id","loaded","completed"],[3,"current_chapter","courseHasAutoplay","chapter_viewer","course_id","loaded","completed"],[3,"current_chapter","chapter_viewer","courseHasAutoplay","course_id","completed","loaded","next"],[3,"current_chapter","chapter_viewer","course_id","loaded","completed"],[3,"current_chapter","chapter_viewer","next_chapter","learning_plan_id","course_id","course","completed","loaded","changeMode","loadChapter"],[3,"current_chapter","chapter_viewer","course_id","loaded"],[3,"current_chapter","chapter_viewer","course","autoStart","completed","loaded","ready"],["videoUploadViewer",""],[3,"current_chapter","chapter_viewer","course_id","chapter_must_be_tracked","autoStart","completed","loaded","ready"],["embededVideoViewer",""],[1,"intime-completed",3,"ngClass"],[1,"activity-completed",3,"ngClass"],[1,"activity-completed-message","text-white",3,"innerHTML"],[1,"activity-icon","bg-white"],[1,"zmdi","zmdi-hc-2x",3,"ngClass"],["class","rate-chapter bg-grey-superlight",4,"ngIf"],[1,"rate-chapter","bg-grey-superlight"],["class","text-grey-mid text-basic-size",4,"ngIf"],[1,"text-grey-mid","text-basic-size"],[1,"chapter-viewer__footer","bg-white"],[1,"mdl-grid","mdl-grid--no-spacing","lightbox-controls"],["class","prev-chapter mdl-grid mdl-cell mdl-cell--6-col mdl-cell--6-col-tablet mdl-cell--middle",4,"ngIf"],["class","next-chapter mdl-grid mdl-cell mdl-cell--6-col mdl-cell--6-col-tablet mdl-cell--middle ",4,"ngIf"],[1,"prev-chapter","mdl-grid","mdl-cell","mdl-cell--6-col","mdl-cell--6-col-tablet","mdl-cell--middle"],[1,"button-wrap","mdl-cell--middle"],[3,"properties","state","displayText","click",4,"ngIf"],[1,"neighbour-title","mdl-cell--middle"],["class","text-grey-dark text-basic-size description-two-line-13fs-white prev-chapter-title",3,"innerHTML",4,"ngIf"],[3,"properties","state","displayText","click"],[1,"text-grey-dark","text-basic-size","description-two-line-13fs-white","prev-chapter-title",3,"innerHTML"],[1,"next-chapter","mdl-grid","mdl-cell","mdl-cell--6-col","mdl-cell--6-col-tablet","mdl-cell--middle"],["class","text-grey-dark text-basic-size description-two-line-13fs-white next-chapter-title",3,"innerHTML",4,"ngIf"],[1,"text-grey-dark","text-basic-size","description-two-line-13fs-white","next-chapter-title",3,"innerHTML"]],template:function(e,t){1&e&&(c.jc(0,"div",null,0),c.jc(2,"ui-trap",1),c.jc(3,"div",2,3),c.rc("resize",function(){return t.detectChanges()},!1,c.Tc),c.ec(5,"div",4),c.jc(6,"div",5),c.jc(7,"div",6),c.ec(8,"h1",7),c.ic(),c.jc(9,"div",8),c.rc("click",function(){return t.onCloseButtonClick()})("keydown.enter",function(){return t.onCloseButtonClick()}),c.jc(10,"span",9),c.fd(11),c.wc(12,"t"),c.ic(),c.ec(13,"em",10),c.ic(),c.ic(),c.dd(14,Bb,3,1,"div",11),c.jc(15,"div",12),c.dd(16,Gb,2,0,"div",13),c.dd(17,Hb,6,1,"div",14),c.dd(18,Qb,8,21,"div",15),c.dd(19,Zb,11,10,"div",16),c.dd(20,af,15,11,"div",17),c.dd(21,Sf,3,4,"div",18),c.dd(22,Ef,7,17,"div",19),c.ic(),c.dd(23,Rf,4,2,"div",20),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(2),c.Dc("active",t.hasLightboxView&&!t.docLayoutConfig.page.dialogs.length&&!t.docLayoutConfig.page.commonDialogs.length),c.Mb(1),c.Rb("bg-white chapter-viewer__wrapper mdl-shadow--2dp ",null!=t.course&&null!=t.course.background_image&&t.course.background_image.url?"fill"==(null==t.course||null==t.course.background_image?null:t.course.background_image.aspect_ratio)?"fill-background":"tile-background":"",""),c.cd("top",t.getLightboxPosition("top"))("left",t.getLightboxPosition("left")),c.Dc("ngClass",c.Ic(29,Nf,"standalone"===(null==t.current_chapter?null:t.current_chapter.mode)||"standalone"===t.changedMode))("ngStyle",c.Ic(31,Uf,null!=t.course&&null!=t.course.background_image&&t.course.background_image.url&&"poll"!==(null==t.current_chapter?null:t.current_chapter.type)&&(null!=t.current_chapter&&t.current_chapter.mode&&"standalone"!=(null==t.current_chapter?null:t.current_chapter.mode)||"standalone"!=t.changedMode)&&(null==t.chapter_viewer?null:t.chapter_viewer.status)!=t.courseViewerStatus.PLAY_REJECT_USERFIELDS?"url("+(null==t.course||null==t.course.background_image?null:t.course.background_image.url)+")":"")),c.Mb(3),c.Dc("hidden",t.hideTitleBar),c.Mb(2),c.Dc("innerHTML",null==t.current_chapter?null:t.current_chapter.name,c.Vc),c.Mb(3),c.gd(c.yc(12,26,"Close",c.Hc(33,qf))),c.Mb(3),c.Dc("ngIf",(null==t.current_chapter?null:t.current_chapter.mode)&&"standalone"===(null==t.current_chapter?null:t.current_chapter.mode)||"standalone"===t.changedMode),c.Mb(1),c.Rb("chapter-viewer__body bg-white ","fill"==(null==t.course||null==t.course.background_image?null:t.course.background_image.aspect_ratio)?"fill-background":"tile-background",""),c.Dc("ngStyle",null!=t.course&&null!=t.course.background_image&&t.course.background_image.url&&"poll"!==(null==t.current_chapter?null:t.current_chapter.type)?c.Ic(34,Uf,"url("+(null==t.course||null==t.course.background_image?null:t.course.background_image.url)+")"):c.Hc(36,zf)),c.Mb(1),c.Dc("ngIf",(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.REQUEST_FOR_PLAY||(null==t.chapter_viewer?null:t.chapter_viewer.isLoading)),c.Mb(1),c.Dc("ngIf",(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.PLAY_REJECTED),c.Mb(1),c.Dc("ngIf",(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.PLAY_REJECT_USERFIELDS),c.Mb(1),c.Dc("ngIf",!t.showCompletedInfo&&(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.READY&&(t.startButton.properties.display||t.resumeButton.properties.display)),c.Mb(1),c.Dc("ngIf",((null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.READY||(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.PLAYING||(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.COURSE_COMPLETED)&&t.showCompletedInfo),c.Mb(1),c.Dc("ngIf",!((null==t.chapter_viewer?null:t.chapter_viewer.status)!=t.courseViewerStatus.PLAYING&&(null==t.chapter_viewer?null:t.chapter_viewer.status)!=t.courseViewerStatus.ACTIVITY_COMPLETED&&(null==t.chapter_viewer?null:t.chapter_viewer.status)!=t.courseViewerStatus.COURSE_COMPLETED||t.showCompletedInfo||null!=t.chapter_viewer&&t.chapter_viewer.isLoading)),c.Mb(1),c.Dc("ngIf",t.activityCompletedMessage&&((null==t.course_status?null:t.course_status.status)==t.courseStatusType.COMPLETED||(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.ACTIVITY_COMPLETED)),c.Mb(1),c.Dc("ngIf",t.hasNavigationButtons))},directives:[b.Hd,Ae.n,Ae.q,b.kc,Ae.p,b.fd,ld.a,an.a,Gl.a,Jd,pu,bu,vu,wu,Su,Iu,Au,Ah,Km,Sb,xb,Ob,Mb,Lb,Fb],pipes:[E.b,Ae.h,uc.a,Rb.a],encapsulation:2,changeDetection:0}),e})();var $f=i("t/UT");function Hf(e,t){1&e&&c.ec(0,"em",7)}const Yf=function(){return{category:"course"}};function Wf(e,t){if(1&e&&(c.jc(0,"div",8),c.fd(1),c.wc(2,"t"),c.wc(3,"date"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.id(" ",c.yc(2,2,"Course completed on",c.Hc(7,Yf))," ",c.xc(3,5,e.completionDate)," ")}}function Qf(e,t){if(1&e&&(c.jc(0,"div",8),c.fd(1),c.wc(2,"t"),c.wc(3,"HDate"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.id(" ",c.yc(2,2,"Course completed on",c.Hc(7,Yf))," ",c.xc(3,5,e.completionDate)," ")}}function Kf(e,t){if(1&e&&(c.jc(0,"div"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Rb("title-regular text-grey-mid course-status-text ",e.displayClass,""),c.Mb(1),c.hd(" ",c.yc(2,4,"This course is not yet completed.",c.Hc(7,Yf))," ")}}const Xf=function(e){return{n:e}};function Jf(e,t){if(1&e&&(c.jc(0,"div"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Rb("title-regular text-grey-mid course-status-text ",e.displayClass,""),c.Mb(1),c.hd(" ",c.yc(2,4,"You must complete {n} more sessions to complete this course.",c.Ic(7,Xf,e.viltNumberToSessionForCompleted))," ")}}function Zf(e,t){if(1&e&&(c.jc(0,"div"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Rb("title-regular text-grey-mid auth-required-text ",e.displayClass,""),c.Mb(1),c.hd(" ",c.xc(2,4,"OTP Authenticator Required")," ")}}function ev(e,t){1&e&&(c.jc(0,"div",12),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.yc(2,1,"How would you rate this course?",c.Hc(4,Yf))," "))}function tv(e,t){1&e&&(c.jc(0,"div",12),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,"Thanks for rating!")," "))}function iv(e,t){if(1&e){const e=c.kc();c.hc(0),c.dd(1,ev,3,5,"div",9),c.dd(2,tv,3,3,"div",9),c.jc(3,"div",10),c.jc(4,"rating",11),c.rc("rate",function(t){return c.Uc(e),c.vc().rateChange(t)}),c.ic(),c.ic(),c.gc()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",!e.isRated),c.Mb(1),c.Dc("ngIf",e.isRated),c.Mb(2),c.Dc("enable_voting",e.fiveStarsParams.enable_voting)("value",e.currentRating)("mode",e.fiveStarsParams.mode)("show_value",!0)("size",e.fiveStarsParams.size)("color",e.fiveStarsParams.color)}}const sv=function(e,t){return{"gm-yellow":e,"text-grey":t}};let nv=(()=>{class e{constructor(e,t){this.changeDetector=e,this.toggleService=t,this.displayMode="",this.displayType="",this.mode="",this.completedLessonsPercentage=0,this.rate=new c.q,this.showOtpAuthLabel=!1,this.hasCompletedSessions=!1}get isVilt(){return this.toggleService.isOn(u.f.TOGGLE_VILT)&&"classroom"==this.course.type}get viltNumberToSessionForCompleted(){return this.isVilt&&this.course.has_session_completion_rule&&null!=this.course.max_session_to_pass&&null!=this.course.min_session_to_pass?this.course.max_session_to_pass-=this.course.min_session_to_pass:null}ngOnInit(){this.fiveStarsParams={enable_voting:!this.isRated,show_value:!1,mode:"five_stars",size:15,color:"#f6cf46"},this.hasCompletedSessions=!(void 0===this.course.sessions||!this.course.sessions.length)&&this.course.sessions.filter(e=>void 0!==e.enrolled&&!0===e.enrolled.is_enrolled&&e.enrolled.status===te.v.COMPLETED).length>0,this.showOtpAuthLabel=this.course.has_esignature_enabled&&this.course.esignature_status!==te.h.SIGNED&&this.hasCompletedSessions}get showRatingOnOverviewView(){return this.displayType&&"navigation"!==this.displayMode&&(100===this.completedLessonsPercentage&&"elearning"===this.course.type||"elearning"!==this.course.type)}get showRatingOnNavigationView(){return this.displayType&&this.mode!==String(te.o.COMPACT)&&(100!==this.completedLessonsPercentage&&"elearning"===this.course.type||"navigation"===this.displayMode&&this.displayType&&this.mode!==String(te.o.COMPACT))}ngOnChanges(){this.isRated&&this.fiveStarsParams&&(this.fiveStarsParams.enable_voting=!this.isRated,this.changeDetector.markForCheck())}rateChange(e){this.rate.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["course-rating-control"]],inputs:{isRated:"isRated",course:"course",completionDate:"completionDate",currentRating:"currentRating",displayClass:"displayClass",displayMode:"displayMode",displayType:"displayType",mode:"mode",completedLessonsPercentage:"completedLessonsPercentage"},outputs:{rate:"rate"},features:[c.Kb],decls:12,vars:17,consts:[[1,"course-rating-control__wrapper","border-grey-light"],[1,"course-rating-control__body"],[1,"fa","fa-trophy",3,"ngClass"],["class","fa fa-check-circle check text-white",4,"ngIf"],["class","title-regular text-grey-mid course-status-text",4,"ngIf"],[3,"class",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-check-circle","check","text-white"],[1,"title-regular","text-grey-mid","course-status-text"],["class","rating-text",4,"ngIf"],[1,"rating-component"],[3,"enable_voting","value","mode","show_value","size","color","rate"],[1,"rating-text"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div"),c.ec(3,"em",2),c.dd(4,Hf,1,0,"em",3),c.ic(),c.jc(5,"div"),c.dd(6,Wf,4,8,"div",4),c.dd(7,Qf,4,8,"div",4),c.dd(8,Kf,3,8,"div",5),c.dd(9,Jf,3,9,"div",5),c.dd(10,Zf,3,6,"div",5),c.dd(11,iv,5,8,"ng-container",6),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(2),c.Rb("complete-course-icons ",t.displayClass,""),c.Mb(1),c.Dc("ngClass",c.Jc(14,sv,t.completionDate,!t.completionDate)),c.Mb(1),c.Dc("ngIf",t.completionDate),c.Mb(1),c.Rb("course-rating-information ",t.displayClass,""),c.Mb(1),c.Dc("ngIf",t.completionDate&&"overview"==t.displayClass&&!t.isVilt),c.Mb(1),c.Dc("ngIf",t.completionDate&&"overview"==t.displayClass&&t.isVilt),c.Mb(1),c.Dc("ngIf",!t.completionDate&&"overview"===t.displayClass&&(!t.isVilt||!t.course.has_session_completion_rule&&t.isVilt)),c.Mb(1),c.Dc("ngIf",!t.completionDate&&"overview"===t.displayClass&&t.isVilt&&t.course.has_session_completion_rule),c.Mb(1),c.Dc("ngIf",!t.completionDate&&t.showOtpAuthLabel&&"overview"===t.displayClass),c.Mb(1),c.Dc("ngIf",t.showRatingOnOverviewView||t.showRatingOnNavigationView))},directives:[Ae.n,Ae.p,Gl.a],pipes:[E.b,uc.a,ze.a],styles:["[_nghost-%COMP%] {\n        display: block;\n        overflow: hidden;\n      }"],changeDetection:0}),e})();var av=i("UFo5");function ov(e,t){if(1&e){const e=c.kc();c.jc(0,"course-rating-control",4),c.rc("rate",function(t){return c.Uc(e),c.vc().rateChange(t)}),c.ic()}if(2&e){const e=c.vc();c.Dc("course",e.course)("completedLessonsPercentage",e.completedLessonsPercentage)("isRated",e.course_status.is_rated)("completionDate",e.course_status.completion_date)("currentRating",e.course.current_rating)("displayClass",e.displayRating.mode)("displayType",null==e.displayRating?null:e.displayRating.display)("displayMode",e.displayRating.mode)}}function rv(e,t){if(1&e&&c.ec(0,"progress-bar",13),2&e){const e=c.vc(3);c.Dc("percentage",e.progressParams.percentage)("is_animated",e.progressParams.is_animated)("text_blocks",e.progressParams.text_blocks)("uid",e.course.uidCourse)}}function cv(e,t){if(1&e&&c.ec(0,"em"),2&e){const e=c.vc(3);c.Rb("trophy-cell fa fa-trophy icon-type ","completed"==e.course_status.status?"text-positive-green":"text-grey-mid-permanent","")}}const lv=function(e,t){return{"mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-phone":e,"mdl-cell--6-col mdl-cell--6-col-tablet mdl-cell--6-col-phone":t}};function dv(e,t){if(1&e&&(c.jc(0,"div",10),c.jc(1,"div",11),c.dd(2,rv,1,4,"progress-bar",12),c.dd(3,cv,1,3,"em",3),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Dc("ngClass",c.Jc(3,lv,e.mode==e.playerMode.FULL,e.mode==e.playerMode.FLAT)),c.Mb(2),c.Dc("ngIf",e.showProgressBar),c.Mb(1),c.Dc("ngIf","navigation"==e.displayRating.mode||!(null!=e.displayRating&&e.displayRating.display)&&"elearning"==e.course.type||(null==e.displayRating?null:e.displayRating.display)&&100!=e.completedLessonsPercentage&&"elearning"==e.course.type)}}function uv(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",14),c.rc("click",function(){return c.Uc(e),c.vc(2).startPlaying()}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",e.startNowButton.properties)("state",e.isCourseStarted?"normal":"disabled")("buttonType","submit")}}function hv(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",14),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.startPlaying(t.lastPlayedChapter,!0)}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",e.startWhereYouLeftButton.properties)("state",e.isCourseStarted?"normal":"disabled")("buttonType","submit")}}function pv(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",14),c.rc("click",function(){return c.Uc(e),c.vc(2).downloadCertificate()}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",e.certificateButton.properties)("state",e.isCourseStarted?"normal":"disabled")("buttonType","submit")}}const mv=function(e,t){return{"mdl-cell--6-col-tablet mdl-cell--6-col-phone":e,"mdl-cell--12-col-tablet mdl-cell--12-col-phone":t}};function gv(e,t){if(1&e){const e=c.kc();c.jc(0,"div",15),c.jc(1,"rectangular-button",16),c.rc("onClick",function(){c.Uc(e);const t=c.vc(2);return t.startPlaying(t.prev_chapter)}),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Dc("ngClass",c.Jc(4,mv,e.mode==e.playerMode.FLAT,e.mode!=e.playerMode.FLAT)),c.Mb(1),c.Dc("properties",e.showPrevNextButtons.prev.properties)("buttonType",e.showPrevNextButtons.prev.buttonType)("state",e.lockedNavigationButtons(e.prev_chapter,e.showPrevNextButtons.prev.properties))}}function bv(e,t){if(1&e){const e=c.kc();c.jc(0,"div",15),c.jc(1,"rectangular-button",17),c.rc("onClick",function(){c.Uc(e);const t=c.vc(2);return t.startPlaying(t.next_chapter)}),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Dc("ngClass",c.Jc(4,mv,e.mode==e.playerMode.FLAT,e.mode!=e.playerMode.FLAT)),c.Mb(1),c.Dc("properties",e.showPrevNextButtons.next.properties)("state",e.lockedNavigationButtons(e.next_chapter,e.showPrevNextButtons.next.properties))("buttonType",e.showPrevNextButtons.next.buttonType)}}const fv=function(e){return{"border-grey-light in-navigation":e}},vv=function(e,t){return{"full-navigation-mode mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-phone":e,"flat-navigation-mode mdl-cell mdl-cell--6-col mdl-cell--6-col-tablet mdl-cell--6-col-phone":t}};function _v(e,t){if(1&e&&(c.jc(0,"div",5),c.dd(1,dv,4,6,"div",6),c.jc(2,"div",5),c.jc(3,"div",7),c.dd(4,uv,1,3,"rectangular-button",8),c.dd(5,hv,1,3,"rectangular-button",8),c.dd(6,pv,1,3,"rectangular-button",8),c.dd(7,gv,2,7,"div",9),c.dd(8,bv,2,7,"div",9),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Rb("controls mdl-grid ",e.mode,"-mode"),c.Dc("ngClass",c.Ic(11,fv,"navigation"==e.displayRating.mode)),c.Mb(1),c.Dc("ngIf","navigation"==e.displayRating.mode||!(null!=e.displayRating&&e.displayRating.display)&&"elearning"==e.course.type&&"navigation"!=(null==e.displayRating?null:e.displayRating.mode)||(null==e.displayRating?null:e.displayRating.display)&&100!=e.completedLessonsPercentage&&"elearning"==e.course.type),c.Mb(1),c.Dc("ngClass",c.Jc(13,vv,e.mode==e.playerMode.FULL,e.mode==e.playerMode.FLAT)),c.Mb(2),c.Dc("ngIf",e.startNowButton.properties.display),c.Mb(1),c.Dc("ngIf",e.startWhereYouLeftButton.properties.display),c.Mb(1),c.Dc("ngIf",e.certificateButton.properties.display),c.Mb(1),c.Dc("ngIf",e.showPrevNext),c.Mb(1),c.Dc("ngIf",e.showPrevNext)}}function wv(e,t){if(1&e){const e=c.kc();c.jc(0,"course-rating-control",18),c.rc("rate",function(t){return c.Uc(e),c.vc().rateChange(t)}),c.ic()}if(2&e){const e=c.vc();c.Dc("isRated",e.course_status.is_rated)("completionDate",e.course_status.completion_date)("currentRating",e.course.current_rating)("displayClass","navigation")("displayType",null==e.displayRating?null:e.displayRating.display)("displayMode",e.displayRating.mode)("course",e.course)("mode",e.mode)("completedLessonsPercentage",e.completedLessonsPercentage)}}function yv(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",24),c.rc("click",function(){return c.Uc(e),c.vc(2).startPlaying()}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("properties",e.startNowButton.properties)("state","normal")("buttonType","submit")}}const Cv=function(){return{colorScheme:"positive-green",typeStyle:"filled",icon:"fa-trophy"}};function Sv(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",24),c.rc("click",function(){return c.Uc(e),c.vc(2).downloadCertificate()}),c.ic()}2&e&&c.Dc("properties",c.Hc(3,Cv))("state","normal")("buttonType","submit")}const Tv=function(){return{colorScheme:"main",typeStyle:"filled",icon:"fa-play-circle"}};function kv(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",24),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.startPlaying(t.lastPlayedChapter)}),c.ic()}2&e&&c.Dc("properties",c.Hc(3,Tv))("state","normal")("buttonType","submit")}const Iv=function(){return{adminButton:!0,text:"",colorScheme:"main",typeStyle:"filled",icon:"zmdi-arrow-left"}},xv=function(){return{adminButton:!0,text:"",colorScheme:"main",typeStyle:"filled",icon:"zmdi-arrow-right"}};function Dv(e,t){if(1&e){const e=c.kc();c.jc(0,"div",25),c.jc(1,"div",26),c.jc(2,"rectangular-button",27),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.startPlaying(t.prev_chapter)}),c.ic(),c.ic(),c.jc(3,"div",26),c.jc(4,"rectangular-button",28),c.rc("click",function(){c.Uc(e);const t=c.vc(2);return t.startPlaying(t.next_chapter)}),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(2),c.Dc("properties",c.Hc(8,Iv))("state",e.lockedNavigationButtons(e.prev_chapter,e.showPrevNextButtons.next.properties))("displayText",!1)("buttonType","submit"),c.Mb(2),c.Dc("properties",c.Hc(9,xv))("state",e.lockedNavigationButtons(e.next_chapter,e.showPrevNextButtons.next.properties))("displayText",!1)("buttonType","submit")}}function Ov(e,t){if(1&e&&c.ec(0,"progress-bar",31),2&e){const e=c.vc(3);c.Dc("percentage",e.progressParams.percentage)("mode",e.progressParamsCircle.mode)("color","completed"==e.course_status.status?"text-positive-green":e.progressParamsCircle.color)("uid",e.course.uidCourse)("text_blocks",e.progressParamsCircle.text_blocks)}}function Ev(e,t){if(1&e&&(c.jc(0,"div",29),c.dd(1,Ov,1,5,"progress-bar",30),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",e.showProgressBar)}}function Pv(e,t){if(1&e&&(c.jc(0,"div"),c.jc(1,"div",19),c.dd(2,yv,1,3,"rectangular-button",20),c.dd(3,Sv,1,4,"rectangular-button",20),c.dd(4,kv,1,4,"rectangular-button",20),c.ic(),c.dd(5,Dv,5,10,"div",21),c.dd(6,Ev,2,1,"div",22),c.jc(7,"div",23),c.fd(8),c.ic(),c.ic()),2&e){const e=c.vc();c.Rb("controls mdl-grid mdl-cell--12-col ",e.mode,"-mode course-navigation-controls"),c.Mb(2),c.Dc("ngIf",e.startNowButton.properties.display),c.Mb(1),c.Dc("ngIf",e.certificateButton.properties.display),c.Mb(1),c.Dc("ngIf",e.startWhereYouLeftButton.properties.display),c.Mb(1),c.Dc("ngIf",e.showPrevNext),c.Mb(1),c.Dc("ngIf",!e.certificateButton.properties.display),c.Mb(2),c.id(" ",e.course_status.competed_lessons," / ",e.allChaptersCount," ")}}let Mv=(()=>{class e{constructor(e,t,i,s,n){this.router=e,this.changeDetector=t,this.store$=i,this.toggleService=s,this.svc=n,this.isCourseStarted=!0,this.play=new c.q,this.playNext=new c.q,this.playPrev=new c.q,this.rate=new c.q,this.showRating=new c.q,this.showPrevNext=!1,this.showProgressBar=!1,this.playerMode=te.o,this.gamificationIcon={type:"icon",title:"fa fa-trophy"},this.startNowButton={properties:{text:E.a.t("standard","Start learning now"),colorScheme:"positive-green",typeStyle:"filled",display:!1}},this.startWhereYouLeftButton={properties:{text:E.a.t("standard","Resume where you left off"),colorScheme:"main",typeStyle:"filled",display:!1}},this.certificateButton={properties:{text:E.a.t("standard","Download your certificate"),icon:null,colorScheme:"positive-green",typeStyle:"filled",display:!1}},this.progressParams={percentage:0,color:"bg-main",is_animated:!1,text_blocks:{"top-left":"","bottom-left":""}},this.progressParamsCircle={percentage:0,color:"border-positive-green",mode:"circle",text_blocks:{innerHtml:'<div class="fa fa-trophy header-icons border-grey-light icon-type"></div>',backgroundClass:"bg-white",fontClass:"text-grey-mid"}},this.showPrevNextButtons={prev:{properties:{text:E.a.t("standard","_PREV"),colorScheme:"main",typeStyle:"filled"},buttonType:"submit"},next:{properties:{text:E.a.t("standard","_NEXT"),colorScheme:"main",typeStyle:"filled"},buttonType:"submit"}}}ngOnInit(){this.updateCourseNavigationView()}ngOnChanges(){this.calculatePercentOfCourse(),this.displayRatingLogic()}updateCourseNavigationView(){this.calculatePercentOfCourse(),this.updateResumeButton(),this.displayRatingLogic()}updateResumeButton(){this.lastPlayedChapter=this.course.last_played_chapter?{id:this.course.last_played_chapter.id,slug_name:this.course.last_played_chapter.slug_name,status:this.course.last_played_chapter.status}:nt.a.head(this.chapters.filter((e,t,i)=>i[t-1]&&-1!==["completed","passed"].indexOf(i[t-1].status)).map(e=>({id:e.id,slug_name:e.slug_name,status:e.status}))),this.startWhereYouLeftButton.properties.display=this.lastPlayedChapter&&this.lastPlayedChapter.id&&!this.showPrevNext&&!this.certificateButton.properties.display&&this.course_status.status!==te.d.COMPLETED&&("elearning"===this.course.type||"classroom"===this.course.type&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&"navigation"==this.displayRating.mode),this.changeDetector.markForCheck()}displayRatingLogic(){this.progressParams.text_blocks["top-left"]=(new Xc.a).transform(this.course.name);const e=E.a.t("course","{completed} / {all} lessons completed",{completed:this.course_status.competed_lessons,all:this.allChaptersCount}),t=E.a.t("course","{completed} / {all} lessons completed (with OTP Authentication)",{completed:this.course_status.competed_lessons,all:this.allChaptersCount});this.progressParams.text_blocks["bottom-left"]=this.course.has_esignature_enabled?t:e,this.changeDetector.detectChanges(),this.changeProperties(),this.course.rating_option!=nd.a.DISABLED&&(this.course.rating_option==nd.a.ALWAYS||this.course.rating_option==nd.a.ONLY_ENROLLED||this.course_status.status==te.d.COMPLETED&&this.course.rating_option==nd.a.ONLY_COMPLETED)&&"overview"!=this.displayRating.mode&&(this.displayRating.display=!0),this.course_status.status==te.d.COMPLETED&&this.course.rating_option==nd.a.ONLY_COMPLETED&&this.showRating.emit(!0)}startPlaying(e,t=!1){var i;nt.a.isEmpty(e)&&(e=this.current_chapter),e&&(null==e?void 0:e.locked)?this.svc.getChapterLockStatus((null===(i=this.course)||void 0===i?void 0:i.id)||-1,e.id).subscribe(({chapters:i,locked:s})=>{s?this.svc.showChapterLockedModal(e,this.changeDetector):(this.store$.dispatch(ga.a.reloadChapters(i)),this.playChapter(e,t))}):this.playChapter(e,t)}playChapter(e,t=!1){new Promise((e,t)=>{const i=document.getElementById("scorm-iframe");i?(i.addEventListener("load",t=>{i.parentNode&&i.parentNode.removeChild(i),e(!0)}),i.setAttribute("src","about:blank")):e(!1)}).then(()=>{if(nt.a.isEmpty(e))this.play.emit();else{const i={};this.learning_plan_id&&(i.lp=this.learning_plan_id),t&&(e=this.whereYouLeftOfChapter(e)),this.router.navigate([`learn/course/${this.course.id}/play/${null==e?void 0:e.id}/${null==e?void 0:e.slug_name}`,i]).then(),this.showPrevNext=!0,this.updateResumeButton(),this.startWhereYouLeftButton.properties.display=!1}})}whereYouLeftOfChapter(e){return Nc(e,this.chapters)||null}downloadCertificate(){window.open(this.course.certificate_url)}calculatePercentOfCourse(){this.completedLessonsPercentage=Math.trunc(100*(this.course_status.competed_lessons?this.course_status.competed_lessons:0)/this.chapters.length),this.progressParams.percentage=this.completedLessonsPercentage,this.showProgressBar=!0,this.changeDetector.detectChanges()}rateChange(e){this.rate.emit(e)}changeProperties(){var e;if(this.courseState==te.c.OVERVIEW||this.chapter_viewer){let t=this.chapters&&this.chapters.length>0&&(!this.current_chapter||nt.a.isEmpty(this.current_chapter)&&!this.startWhereYouLeftButton.properties.display)&&(this.course_status.status!=te.d.COMPLETED||this.course_status.status==te.d.COMPLETED&&""==this.course.certificate_url),i=(this.courseState==te.c.OVERVIEW||this.courseState===te.c.PLAYER||(null===(e=this.chapter_viewer)||void 0===e?void 0:e.status)===te.g.READY)&&this.course_status.status===te.d.COMPLETED&&""!==this.course.certificate_url;this.courseState==te.c.OVERVIEW?(this.showPrevNext=!1,!this.startWhereYouLeftButton.properties.display&&!i&&this.chapters&&this.chapters.length>0&&(t=!0)):this.showPrevNext=this.chapters&&this.chapters.length>0&&!i&&!t&&!this.startWhereYouLeftButton.properties.display,t=t&&("elearning"==this.course.type||"classroom"===this.course.type&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&"navigation"==this.displayRating.mode),this.certificateButton.properties.text=this.mode==te.o.COMPACT?"":E.a.t("standard","Download your certificate"),this.certificateButton.properties.icon=this.mode==te.o.COMPACT?"fa-arrow-circle-o-down":null,this.certificateButton.properties.display=i,this.startNowButton.properties.text=this.mode==te.o.COMPACT?"":E.a.t("standard","Start learning now"),this.startNowButton.properties.icon=this.mode==te.o.COMPACT?"fa-play-circle":null,this.startNowButton.properties.display=t,this.updateResumeButton()}}lockedNavigationButtons(e,t){return t.icon="",(e.hasOwnProperty("locked")||e.type===te.a.SIGN.toString())&&this.isCourseStarted?"normal":!e.hasOwnProperty("locked")&&this.isCourseStarted?e.hasOwnProperty("status")?"normal":"disabled":(t.icon="zmdi-lock-outline text-mid-icons",t.adminButton=!0,t.hideText=!1,"disabled")}get allChaptersCount(){return this.chapters.length}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(c.i),c.dc(v.d),c.dc(u.g),c.dc(Bc))},e.\u0275cmp=c.Xb({type:e,selectors:[["course-navigation-control"]],inputs:{mode:"mode",current_chapter:"current_chapter",prev_chapter:"prev_chapter",next_chapter:"next_chapter",course:"course",course_status:"course_status",chapters:"chapters",chapter_viewer:"chapter_viewer",displayRating:"displayRating",learning_plan_id:"learning_plan_id",isCourseStarted:"isCourseStarted",courseState:"courseState"},outputs:{play:"play",playNext:"playNext",playPrev:"playPrev",rate:"rate",showRating:"showRating"},features:[c.Kb],decls:5,vars:7,consts:[[3,"course","completedLessonsPercentage","isRated","completionDate","currentRating","displayClass","displayType","displayMode","rate",4,"ngIf"],[3,"class","ngClass",4,"ngIf"],[3,"isRated","completionDate","currentRating","displayClass","displayType","displayMode","course","mode","completedLessonsPercentage","rate",4,"ngIf"],[3,"class",4,"ngIf"],[3,"course","completedLessonsPercentage","isRated","completionDate","currentRating","displayClass","displayType","displayMode","rate"],[3,"ngClass"],["class","mdl-cell",3,"ngClass",4,"ngIf"],[1,"mdl-grid","center-buttons"],["class","start-now mdl-cell mdl-cell--12-col",3,"properties","state","buttonType","click",4,"ngIf"],["class","mdl-cell mdl-cell--6-col navigation-buttons",3,"ngClass",4,"ngIf"],[1,"mdl-cell",3,"ngClass"],[1,"mdl-grid","progress-grid"],["class","mdl-cell mdl-cell--10-col mdl-cell--11-col-tablet mdl-cell--11-col-phone progress-bar",3,"percentage","is_animated","text_blocks","uid",4,"ngIf"],[1,"mdl-cell","mdl-cell--10-col","mdl-cell--11-col-tablet","mdl-cell--11-col-phone","progress-bar",3,"percentage","is_animated","text_blocks","uid"],[1,"start-now","mdl-cell","mdl-cell--12-col",3,"properties","state","buttonType","click"],[1,"mdl-cell","mdl-cell--6-col","navigation-buttons",3,"ngClass"],[1,"navigate","prev",3,"properties","buttonType","state","onClick"],[1,"navigate","next",3,"properties","state","buttonType","onClick"],[3,"isRated","completionDate","currentRating","displayClass","displayType","displayMode","course","mode","completedLessonsPercentage","rate"],[1,"mdl-cell","mdl-cell--12-col"],["class","start-now",3,"properties","state","buttonType","click",4,"ngIf"],["class","mdl-cell--12-col course-navigation-button__wrapper",4,"ngIf"],["class","circle-progress-bar-course-navigation",4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col","text-grey-mid","border-grey-light","compact-course-info"],[1,"start-now",3,"properties","state","buttonType","click"],[1,"mdl-cell--12-col","course-navigation-button__wrapper"],[1,"course-navigation-button"],[1,"navigate","prev",3,"properties","state","displayText","buttonType","click"],[1,"navigate","next",3,"properties","state","displayText","buttonType","click"],[1,"circle-progress-bar-course-navigation"],[3,"percentage","mode","color","uid","text_blocks",4,"ngIf"],[3,"percentage","mode","color","uid","text_blocks"]],template:function(e,t){1&e&&(c.jc(0,"div"),c.dd(1,ov,1,8,"course-rating-control",0),c.dd(2,_v,9,16,"div",1),c.dd(3,wv,1,9,"course-rating-control",2),c.dd(4,Pv,9,10,"div",3),c.ic()),2&e&&(c.Rb("wrap-controls course-navigation-controls ",t.mode,"-mode"),c.Mb(1),c.Dc("ngIf","navigation"!=t.displayRating.mode),c.Mb(1),c.Dc("ngIf",(t.mode==t.playerMode.FULL||t.mode==t.playerMode.FLAT)&&(t.startNowButton.properties.display||t.startWhereYouLeftButton.properties.display||t.certificateButton.properties.display||t.showPrevNext)),c.Mb(1),c.Dc("ngIf","navigation"==t.displayRating.mode&&(null==t.displayRating?null:t.displayRating.display)&&t.mode!=t.playerMode.COMPACT),c.Mb(1),c.Dc("ngIf",t.mode==t.playerMode.COMPACT))},directives:[Ae.p,nv,Ae.n,av.a,an.a],encapsulation:2,changeDetection:0}),e})();const Av=["navigationTree"],Lv=["navigationControls"],jv=["navigationWrapper"],Fv=function(e){return{"chapters border-grey-light":e}};function Rv(e,t){if(1&e){const e=c.kc();c.jc(0,"div",5,6),c.rc("resize",function(){return c.Uc(e),c.vc().calculateElementHeight()},!1,c.Tc),c.jc(2,"tree-view",7),c.rc("toggleFolders",function(){return c.Uc(e),c.vc().updateScroll()}),c.ic(),c.ic()}if(2&e){const e=c.vc();c.cd("height",e.treeViewHeight,"%"),c.Dc("ngClass",c.Ic(12,Fv,e.mode==e.playerModes.FULL)),c.Mb(2),c.Dc("current_tree",e.course.tree)("current_chapter",e.current_chapter)("mode",e.mode)("course",e.course)("learning_plan_id",e.learning_plan_id)("treeListStatic",e.course.tree)("courseStatus",e.course_status)("chapters",e.chapters)("isCourseStarted",e.isCourseStarted)}}let Nv=(()=>{class e{constructor(e,t){this.changeDetector=e,this.router=t,this.isCourseStarted=!0,this.play=new c.q,this.playNext=new c.q,this.playPrev=new c.q,this.rate=new c.q,this.playerModes=Bt.o,this.displayRatingComponent={display:!1,mode:"navigation"},this.treeViewHeight=100,this.tooltips=[{title:"What a view!",text:"Switch your course player`s size for a customized learning experiance!",style:"blue"},{title:"Take Control!",text:"Use this table of content to check your progress, navigate and move throught your course`s activities",style:"blue"}]}ngAfterViewInit(){this.navigationTree&&(this.perfectScrollbar=new $f.a(this.navigationTree.nativeElement,{suppressScrollX:!0})),this.calculateHeightAndUpdateScroll()}calculateHeightAndUpdateScroll(){this.navigationTableOfContent&&Object(Ti.i)(this.navigationTableOfContent).then(e=>{Object(Ti.i)(this.navigationControlsContent).then(e=>{this.calculateElementHeight(),this.updateScroll()})})}calculateElementHeight(){const e=this.navigationWrapper&&this.navigationWrapper.hasOwnProperty("nativeElement"),t=this.navigationControls&&this.navigationControls.hasOwnProperty("nativeElement");e&&t?(this.treeViewHeight=(this.navigationWrapper.nativeElement.offsetHeight-this.navigationControls.nativeElement.offsetHeight)/this.navigationWrapper.nativeElement.offsetHeight*100,this.treeViewHeight=this.treeViewHeight.toFixed(2),this.changeDetector.markForCheck()):this.treeViewHeight=100}rateChange(e){this.rate.emit(e)}startPlaying(e){this.play.emit(e)}updateScroll(){this.navigationTree&&this.mode!=Bt.o.FLAT&&setTimeout(()=>{this.perfectScrollbar.update()},500)}ngOnDestroy(){this.navigationTree&&this.perfectScrollbar.destroy()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i),c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["course-navigation"]],viewQuery:function(e,t){if(1&e&&(c.md(Av,1),c.md(Lv,3),c.md(jv,3),c.md(Av,1),c.md(Lv,1)),2&e){let e;c.Qc(e=c.sc())&&(t.navigationTree=e.first),c.Qc(e=c.sc())&&(t.navigationControls=e.first),c.Qc(e=c.sc())&&(t.navigationWrapper=e.first),c.Qc(e=c.sc())&&(t.navigationTableOfContent=e),c.Qc(e=c.sc())&&(t.navigationControlsContent=e)}},inputs:{mode:"mode",current_chapter:"current_chapter",prev_chapter:"prev_chapter",next_chapter:"next_chapter",chapter_viewer:"chapter_viewer",course:"course",course_status:"course_status",chapters:"chapters",folders:"folders",learning_plan_id:"learning_plan_id",courseState:"courseState",navigationHeight:"navigationHeight",isCourseStarted:"isCourseStarted"},outputs:{play:"play",playNext:"playNext",playPrev:"playPrev",rate:"rate"},decls:7,vars:19,consts:[["navigationWrapper",""],[1,"course-navigation__flex-wrapper"],["navigationControls",""],[3,"mode","current_chapter","next_chapter","prev_chapter","course_status","course","chapters","chapter_viewer","courseState","displayRating","learning_plan_id","isCourseStarted","rate","play","showRating"],["class","mdl-cell--hide-phone mdl-cell--hide-tablet",3,"height","ngClass","resize",4,"ngIf"],[1,"mdl-cell--hide-phone","mdl-cell--hide-tablet",3,"ngClass","resize"],["navigationTree",""],[1,"mdl-grid","border-grey-light","tree-view","tree-wrapper","bg-white",3,"current_tree","current_chapter","mode","course","learning_plan_id","treeListStatic","courseStatus","chapters","isCourseStarted","toggleFolders"]],template:function(e,t){1&e&&(c.jc(0,"div",null,0),c.jc(2,"div",1),c.jc(3,"div",null,2),c.jc(5,"course-navigation-control",3),c.rc("rate",function(e){return t.rateChange(e)})("play",function(e){return t.startPlaying(e)})("showRating",function(){return t.calculateHeightAndUpdateScroll()}),c.ic(),c.ic(),c.dd(6,Rv,3,14,"div",4),c.ic(),c.ic()),2&e&&(c.Rb("course-navigation__wrapper bg-white mdl-shadow--2dp ",t.mode,"-mode"),c.Mb(3),c.Rb("control-wrapper mdl-grid mdl-cell--",t.mode==t.playerModes.FLAT?"7":"12","-col"),c.Mb(2),c.Dc("mode",t.mode)("current_chapter",t.current_chapter)("next_chapter",t.next_chapter)("prev_chapter",t.prev_chapter)("course_status",t.course_status)("course",t.course)("chapters",t.chapters)("chapter_viewer",t.chapter_viewer)("courseState",t.courseState)("displayRating",t.displayRatingComponent)("learning_plan_id",t.learning_plan_id)("isCourseStarted",t.isCourseStarted),c.Mb(1),c.Dc("ngIf",t.mode!=t.playerModes.FLAT&&t.treeViewHeight))},directives:[Mv,Ae.p,Ae.n,yl],encapsulation:2,changeDetection:0}),e})();var Uv=i("29ye");function qv(e,t){if(1&e){const e=c.kc();c.jc(0,"div",7),c.rc("click",function(){c.Uc(e);const t=c.vc();return t.isCourseStarted?t.play.emit():null}),c.wc(1,"t"),c.ic()}if(2&e){const e=c.vc();c.Dc("innerHTML",c.xc(1,1,e.startMessage),c.Vc)}}function zv(e,t){if(1&e&&(c.ec(0,"div",8),c.wc(1,"sanitizeHtml"),c.wc(2,"t")),2&e){const e=c.vc();c.Dc("innerHTML",c.xc(1,1,c.xc(2,3,null==e.current_chapter?null:e.current_chapter.name)),c.Vc)}}function Vv(e,t){if(1&e&&(c.jc(0,"div",9),c.ec(1,"metadata-bar",10),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("items",e.metadataBarParams.items)}}function Bv(e,t){if(1&e&&c.ec(0,"line-limiter",14),2&e){const e=c.vc(2);c.Dc("content",null==e.lineLimiterParams?null:e.lineLimiterParams.content)("lines",null==e.lineLimiterParams?null:e.lineLimiterParams.lines)("removeHtml",!1)("more_label",null==e.lineLimiterParams?null:e.lineLimiterParams.more_label)("less_label",null==e.lineLimiterParams?null:e.lineLimiterParams.less_label)}}function Gv(e,t){if(1&e&&(c.jc(0,"div",11),c.jc(1,"div",12),c.fd(2),c.wc(3,"t"),c.ic(),c.dd(4,Bv,1,5,"line-limiter",13),c.ic()),2&e){const e=c.vc();c.Mb(2),c.gd(c.xc(3,2,e.subTitle)),c.Mb(2),c.Dc("ngIf",e.showLimiter)}}function $v(e,t){if(1&e&&c.ec(0,"div",15),2&e){const e=c.vc();c.Dc("innerHtml",e.descriptionText,c.Vc)}}let Hv=(()=>{class e{constructor(e,t,i,s,n){this.router=e,this._el=t,this.sanitizer=i,this.translate=s,this.changeDetector=n,this.isCourseStarted=!0,this.rate=new c.q,this.play=new c.q,this.metadataBarParams={items:[]},this.startMessage=E.a.t("course","Click {openTag}Start Learning Now{closeTag} to begin your course",{openTag:"<span class='text-main'>",closeTag:"</span>"}),this.showLimiter=!1,this.descriptionText=null,this.tags=[],this.subTitle=E.a.t("course","About this lesson"),this.tagsTitle=new E.b(this.translate,this.changeDetector).transform(E.a.t("app7020","Tags")),this.instructor_avatar=[],this.instructor_name=[],this.instructor_id=[]}ngOnInit(){this.current_chapter&&this.current_chapter.id&&this.currentChapterId!==Number(this.current_chapter.id)&&(this.currentChapterId=Number(this.current_chapter.id),this.initializeChapterInformationData())}ngAfterViewInit(){this.isCourseStarted||(this.startMessage=E.a.t("course","Click {openTag}Start Learning Now{closeTag} to begin your course",{openTag:"<span>",closeTag:"</span>"}))}ngOnChanges(){this.course&&this.current_chapter&&this.current_chapter.id&&this.currentChapterId!==Number(this.current_chapter.id)&&(this.currentChapterId=Number(this.current_chapter.id),this.initializeChapterInformationData())}initializeChapterInformationData(){let e;if(this.metadataBarParams={items:[]},this.instructor_avatar=[],this.instructor_name=[],this.instructor_id=[],this.tags=[],this.descriptionText="",this.course.instructors&&0!==this.course.instructors.length){const t=[];for(const i of this.course.instructors){const s=null==i?void 0:i.avatar_url;s&&this.instructor_avatar.push(s),e=x.b.getInstance().getFullName(i,!0),t.push(this.getUserInitials(i)),this.instructor_name.push(e),this.instructor_id.push(i.instructor_id)}this.metadataBarParams.items=[{component:vs.a,params:{image_url:this.instructor_avatar.length?this.instructor_avatar:null,initials:t,size:30,stacked:this.instructor_avatar.length>1,extra_text:{visible:this.instructor_name.length>0,position:"right",prefix:new E.b(this.translate,this.changeDetector).transform(E.a.t("standard","Instructor:")),suffix:" ",content:this.instructor_name,class:"text-main"},has_border:{class:"border-white"},properties:{bg_color_class:"bg-grey-mid",text_color_class:"text-white",icon_class:"zmdi zmdi-account"}}}]}if(this.course_status.status===Bt.e.COMPLETED&&(this.startMessage=E.a.t("course","Want to re-play the course? {openTag}Select a lesson{closeTag} from the navigation panel.",{openTag:"<span class='text-main'>",closeTag:"</span>"})),this.current_chapter.tags)this.populateTags(this.current_chapter.tags);else{let e=null;if(this.current_chapter.id&&!Number(this.current_chapter.id)&&this.current_chapter.id.indexOf(":")&&(e=this.current_chapter.id.split(":")[0]),e){const t=this.course.tree.filter(t=>Number(t.id)===Number(e))[0];void 0!==t&&void 0!==this.course.tags&&this.populateTags(t.tags)}}this.tags.length&&-1===this.current_chapter.description.indexOf("tags-title")&&(this.current_chapter.description+=`<br id="tags-line-break">\n                <div class="chapter-tags-wrapper">\n                    <div class="text-grey-mid sub-title" id="tags-title">${this.tagsTitle}</div>\n                    ${this.tags.join("")}\n                </div>`),this.onlyTagsInDescription=8===this.current_chapter.description.indexOf("tags-line-break"),this.current_chapter&&this.current_chapter.description&&(this.descriptionText=this.sanitizer.bypassSecurityTrustHtml(this.current_chapter.description)),this.current_chapter&&this.current_chapter.description&&(this.showLimiter=!0,this.lineLimiterParams={content:this.descriptionText,lines:3,more_label:E.a.t("app7020","Show more"),less_label:E.a.t("standard","Show less")}),this.changeDetector.detectChanges()}populateTags(e){for(const t in e)e.hasOwnProperty(t)&&this.tags.indexOf(e[t])<0&&this.tags.push(`<span class="lo-tag bg-grey-light text-grey-dark border-grey-light">${e[t]}</span>`)}getUserInitials(e){return e.hasOwnProperty("firstname")&&e.hasOwnProperty("lastname")?""!==e.firstname&&""!==e.lastname?x.b.getInstance().settings.show_first_name_first?e.firstname.slice(0,1)+e.lastname.slice(0,1):e.lastname.slice(0,1)+e.firstname.slice(0,1):e.username.slice(0,1).toUpperCase():null}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(c.o),c.dc(Pi.b),c.dc(js.a),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["chapter-information"]],inputs:{course:"course",course_status:"course_status",current_chapter:"current_chapter",isCourseStarted:"isCourseStarted"},outputs:{rate:"rate",play:"play"},features:[c.Kb],decls:11,vars:13,consts:[[1,"chapter-info__wrapper","mdl-shadow--2dp","bg-white"],[1,"chapter-info__body","bg-white","text-grey-dark"],["class","info-start title-regular",3,"innerHTML","click",4,"ngIf"],["class","chapter-title text-grey-dark",3,"innerHTML",4,"ngIf"],["class","chapter-section",4,"ngIf"],["class","chapter-section default-list-style default-headings-styles",4,"ngIf"],[3,"innerHtml",4,"ngIf"],[1,"info-start","title-regular",3,"innerHTML","click"],[1,"chapter-title","text-grey-dark",3,"innerHTML"],[1,"chapter-section"],[3,"items"],[1,"chapter-section","default-list-style","default-headings-styles"],[1,"text-grey-mid","sub-title"],[3,"content","lines","removeHtml","more_label","less_label",4,"ngIf"],[3,"content","lines","removeHtml","more_label","less_label"],[3,"innerHtml"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.dd(2,qv,2,3,"div",2),c.wc(3,"json"),c.dd(4,zv,3,5,"div",3),c.wc(5,"json"),c.dd(6,Vv,2,1,"div",4),c.wc(7,"json"),c.dd(8,Gv,5,4,"div",5),c.wc(9,"json"),c.dd(10,$v,1,1,"div",6),c.ic(),c.ic()),2&e&&(c.Mb(2),c.Dc("ngIf",!t.current_chapter||"{}"==c.xc(3,5,t.current_chapter)),c.Mb(2),c.Dc("ngIf",t.current_chapter&&"{}"!=c.xc(5,7,t.current_chapter)),c.Mb(2),c.Dc("ngIf",t.current_chapter&&"{}"!=c.xc(7,9,t.current_chapter)&&0!=t.metadataBarParams.items.length),c.Mb(2),c.Dc("ngIf",t.current_chapter&&"{}"!=c.xc(9,11,t.current_chapter)&&t.descriptionText&&!t.onlyTagsInDescription),c.Mb(2),c.Dc("ngIf",t.onlyTagsInDescription))},directives:[Ae.p,Uv.a,li.a],pipes:[Ae.h,E.b,Mi.a],encapsulation:2}),e})();var Yv=i("GuO3"),Wv=i("wd/R"),Qv=i.n(Wv);function Kv(e,t){if(1&e){const e=c.kc();c.jc(0,"rectangular-button",12),c.rc("click",function(){return c.Uc(e),c.vc().downloadLpCertificate()}),c.ic()}if(2&e){const e=c.vc();c.Dc("properties",e.learningPlanCertificateButton.properties)("state","normal")("buttonType","submit")}}const Xv=function(){return{category:"course"}};function Jv(e,t){if(1&e&&(c.jc(0,"div",13),c.jc(1,"span",14),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",15),c.ec(5,"btn-ellipsis",16),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.gd(c.yc(3,5,"Current course",c.Hc(8,Xv))),c.Mb(3),c.Dc("orientation",e.ellipsisParams.orientation)("ellipsisType",e.ellipsisParams.ellipsisType)("treeBody",e.ellipsisParams.treeBody)("actions",e.ellipsisParams.actions)}}function Zv(e,t){if(1&e&&(c.jc(0,"div",17),c.ec(1,"rectangular-button",18),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("properties",e.resumeButtonParams.properties)("click",e.resumeButtonParams.onClick)}}let e_=(()=>{class e{constructor(e,t,i){this.router=e,this._store=t,this._changeDetector=i,this.name=E.a.t("learning_plan","Learning Plan progress"),this.courses=[],this.lp_courses=[],this.show_course_ellipsis=!0,this.lp_complete_percent=0,this.lp_certificate_url="",this.learningPlanTimeSpent=0,this.learningPlanTotalTime=0,this.timeSeparator="|",this.lastCourseInProgress=null,this._learningPlanStoreSubscriber=null,this.learningPlanCertificateButton={properties:{text:E.a.t("standard","Download your certificate"),icon:null,colorScheme:"positive-green",typeStyle:"filled",display:!1}},this.resumeButtonParams={properties:{text:E.a.t("learning_plan","Resume where you left off"),colorScheme:"main",typeStyle:"filled"},onClick:()=>{this.lastCourseInProgress&&this.router.navigate(["/learn/course/"+this.lastCourseInProgress.idCourse+"/"+this.lastCourseInProgress.slug_name,{lp:this.lp_id}])}}}downloadLpCertificate(){window.open(this.lp_certificate_url)}buildEllipsisMenu(e){this.ellipsisParams={orientation:"bottom-left",ellipsisType:"inline",treeBody:this.container_wrap,actions:[]};for(let t=0;t<e.length;t++){let i=e[t],s="",n="",a=!0;this.learningPlanTimeSpent+=i.duration,this.learningPlanTotalTime+=i.time_spent,i.percentage=Math.round(i.competed_lessons/i.all_lessons*100);let o=!1;void 0!==this.course&&void 0!==this.course.type&&"elearning"==this.course.type&&(o=!0),i.status==Bt.e.COMPLETED?(s='<i class="zmdi zmdi-check-circle check-complete"></i>',n="text-green",a=!1):(i.percentage>=100&&1==o||i.status==Bt.e.IN_PROGRESS)&&(s='<i class="zmdi zmdi-check-circle check-complete"></i>',n="text-warning",a=!1),this.ellipsisParams.actions.push({title:i.name,active:!!this.course&&this.course.id==i.idCourse,action:()=>this.router.navigate(["/learn/course/"+i.idCourse+"/"+i.slug_name,{lp:this.lp_id}]),subtitle:this.translateCourseType(i.course_type,i.competed_lessons,i.all_lessons),beforeTitle:{component:av.a,params:{percentage:i.percentage,color:"border-positive-green",mode:"circle",text_blocks:{no_caption:a,innerHtml:s,backgroundClass:"bg-white",fontClass:n}}},maxChars:42})}}ngOnInit(){for(let e=0;e<this.courses.length;e++){let t=this.courses[e];if(t.status==Bt.e.IN_PROGRESS){this.lastCourseInProgress=t;break}}this.circularProgressbarParams={mode:"circle",color:"border-positive-green"},this.trophyColor=100===this.lp_complete_percent?"text-positive-green":"text-grey",this.buildEllipsisMenu(this.courses),this.learningPlanSpentTime=this.calculateLearningPlanTimes(this.learningPlanTimeSpent,this.learningPlanTotalTime),this._learningPlanStoreSubscriber=this._store.select(ie.k).subscribe(e=>{e.state==Bt.l.VIEWING&&this.buildEllipsisMenu(e.courses)}),this.learningPlanCertificateButton.properties.display=""!==this.lp_certificate_url&&void 0!==this.lp_certificate_url}static calculateTime(e=0){let t=Math.floor(e/3600);return{hours:t,minutes:Math.floor((e-3600*t)/60)}}calculateLearningPlanTimes(t=0,i=0){let s=0,n=0,a=0,o=0,r=e.calculateTime(t),c=e.calculateTime(i);return s=r.hours,n=r.minutes,a=c.hours,o=c.minutes,{timeSpentHours:E.a.t("standard","{hours}h",{hours:s}),timeSpentMinutes:E.a.t("standard","{minutes}m",{minutes:n}),totalTimeSpentHours:E.a.t("standard","{hours}h",{hours:a}),totalTimeSpentMinutes:E.a.t("standard","{minutes}m",{minutes:o})}}translateCourseType(e,t,i){let s="";switch(e){case Bt.f.ELEARNING:s="E-Learning";break;case Bt.f.CLASSROOM:s="Classroom";break;case Bt.f.WEBINAR:s="Webinar";break;case Bt.f.LEARNING_PLAN:s="Learning plan"}return E.a.t("standard",'{courseTypeTxt} <span class="separator">|</span> {completed}/{all} lessons completed',{courseTypeTxt:s,all:i,completed:t})}ngOnDestroy(){this._learningPlanStoreSubscriber&&this._learningPlanStoreSubscriber.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(v.d),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["lp-progress"]],inputs:{mode:"mode",name:"name",course:"course",courses:"courses",lp_courses:"lp_courses",lp_id:"lp_id",show_course_ellipsis:"show_course_ellipsis",lp_complete_percent:"lp_complete_percent",container_wrap:"container_wrap",lp_certificate_url:"lp_certificate_url"},decls:22,vars:31,consts:[[1,"mdl-cell--3-col","lp-progress-circle"],[1,"lp-circular-progressbar-holder"],[3,"percentage","mode","color"],[1,"mdl-cell--2-col","lp-icons-holder"],[1,"zmdi","zmdi-arrow-right","header-icons","icon-type","text-grey","lp-arrow-right-icon"],[1,"mdl-cell--7-col","lp-title-holder"],[1,"lp-title","text-gray-dark"],[1,"lp-time","text-grey-mid"],[1,"mdl-grid","center-buttons"],["class","start-now mdl-cell mdl-cell--12-col lp-certificate-btn",3,"properties","state","buttonType","click",4,"ngIf"],["class","mdl-cell--12-col lp-dropdown-container",4,"ngIf"],["class","lp-resume-button-holder",4,"ngIf"],[1,"start-now","mdl-cell","mdl-cell--12-col","lp-certificate-btn",3,"properties","state","buttonType","click"],[1,"mdl-cell--12-col","lp-dropdown-container"],[1,"lp-course-title","text-grey-mid"],[1,"lp-dropdown-holder"],[3,"orientation","ellipsisType","treeBody","actions"],[1,"lp-resume-button-holder"],[3,"properties","click"]],template:function(e,t){1&e&&(c.jc(0,"div"),c.jc(1,"div",0),c.jc(2,"div",1),c.ec(3,"progress-bar",2),c.ic(),c.ic(),c.jc(4,"div",3),c.ec(5,"em",4),c.ec(6,"div"),c.ic(),c.jc(7,"div",5),c.jc(8,"div",6),c.fd(9),c.wc(10,"cut"),c.wc(11,"t"),c.ic(),c.jc(12,"span",7),c.fd(13),c.wc(14,"t"),c.wc(15,"t"),c.wc(16,"t"),c.wc(17,"t"),c.ic(),c.ic(),c.ic(),c.jc(18,"div",8),c.dd(19,Kv,1,3,"rectangular-button",9),c.ic(),c.dd(20,Jv,6,9,"div",10),c.dd(21,Zv,2,2,"div",11)),2&e&&(c.Rb("lp-progress-container mdl-grid ",t.mode,""),c.Mb(3),c.Dc("percentage",t.lp_complete_percent)("mode",t.circularProgressbarParams.mode)("color",t.circularProgressbarParams.color),c.Mb(3),c.Rb("fa fa-trophy header-icons icon-type ",t.trophyColor," lp-trophy-icon"),c.Mb(3),c.gd(c.yc(10,18,c.xc(11,21,t.name),60)),c.Mb(4),c.ld(" ",c.xc(14,23,t.learningPlanSpentTime.totalTimeSpentHours)," ",c.xc(15,25,t.learningPlanSpentTime.totalTimeSpentMinutes)," ",t.timeSeparator," ",c.xc(16,27,t.learningPlanSpentTime.timeSpentHours)," ",c.xc(17,29,t.learningPlanSpentTime.timeSpentMinutes)," "),c.Mb(6),c.Dc("ngIf",t.learningPlanCertificateButton.properties.display),c.Mb(1),c.Dc("ngIf",t.show_course_ellipsis),c.Mb(1),c.Dc("ngIf",t.lastCourseInProgress&&!t.show_course_ellipsis))},directives:[av.a,Ae.p,an.a,ta.a],pipes:[Rb.a,E.b],encapsulation:2}),e})();const t_=["sessionDropdown"];function i_(e,t){if(1&e&&(c.jc(0,"div",12),c.jc(1,"div",13),c.ec(2,"img",14),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("src",e.thumbnailPicture,c.Xc)}}const s_=function(e){return{category:"course",days:e}};function n_(e,t){if(1&e&&(c.ec(0,"span",17),c.wc(1,"t")),2&e){const e=c.vc(3);c.Dc("innerHTML",c.yc(1,1,"DEADLINE: the course expires in {days} days",c.Ic(4,s_,e.deadlineTimeLeft.days)),c.Vc)}}const a_=function(e){return{category:"standard",hours:e}};function o_(e,t){if(1&e&&(c.ec(0,"span",17),c.wc(1,"t")),2&e){const e=c.vc(3);c.Dc("innerHTML",c.yc(1,1," and {hours} hours",c.Ic(4,a_,e.deadlineTimeLeft.hours)),c.Vc)}}const r_=function(e){return{category:"course",hours:e}};function c_(e,t){if(1&e&&(c.ec(0,"span",17),c.wc(1,"t")),2&e){const e=c.vc(3);c.Dc("innerHTML",c.yc(1,1,"DEADLINE: the course expires in {hours} hours",c.Ic(4,r_,e.deadlineTimeLeft.hours)),c.Vc)}}function l_(e,t){if(1&e&&(c.jc(0,"div",5),c.jc(1,"span",15),c.dd(2,n_,2,6,"span",16),c.dd(3,o_,2,6,"span",16),c.dd(4,c_,2,6,"span",16),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("ngIf",e.deadlineTimeLeft.days>0),c.Mb(1),c.Dc("ngIf",e.deadlineTimeLeft.hours>0&&e.deadlineTimeLeft.days>0),c.Mb(1),c.Dc("ngIf",e.deadlineTimeLeft.hours>0&&0==e.deadlineTimeLeft.days)}}function d_(e,t){if(1&e&&(c.jc(0,"div"),c.dd(1,l_,5,3,"div",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",e.deadlineTimeLeft.days>0||e.deadlineTimeLeft.hours>0)}}const u_=function(){return{category:"esignature"}};function h_(e,t){1&e&&(c.jc(0,"div",18),c.fd(1),c.wc(2,"uppercase"),c.wc(3,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.xc(2,1,c.yc(3,3,"E-Signature",c.Hc(6,u_)))," "))}const p_=function(e){return{category:"standard",x:e}};function m_(e,t){if(1&e&&(c.jc(0,"div",5),c.jc(1,"span",19),c.fd(2),c.wc(3,"t"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.yc(3,1,"{x} courses",c.Ic(4,p_,e.lpCoursesCount))," ")}}function g_(e,t){if(1&e&&(c.jc(0,"span",25),c.fd(1),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",e.sessionMenu.actions[0].title," ")}}function b_(e,t){if(1&e&&c.ec(0,"btn-ellipsis",26,27),2&e){const e=c.vc(2);c.Dc("ellipsisType",e.sessionMenu.ellipsisType)("actions",e.sessionMenu.actions)}}const f_=function(){return{category:"classroom"}};function v_(e,t){if(1&e&&(c.jc(0,"div",20),c.jc(1,"span",21),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",22),c.dd(5,g_,2,1,"span",23),c.dd(6,b_,2,2,"btn-ellipsis",24),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Vb("session-label-single",1===e.sessionMenu.actions.length),c.Mb(1),c.hd(" ",c.yc(3,5,"Session",c.Hc(8,f_)),": "),c.Mb(3),c.Dc("ngIf",1===e.sessionMenu.actions.length),c.Mb(1),c.Dc("ngIf",e.sessionMenu.actions.length>1)}}function __(e,t){if(1&e&&(c.jc(0,"div",28),c.ec(1,"line-limiter",29),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("content",null==e.lineLimiter?null:e.lineLimiter.content)("lines",e.lineLimiter.lines)("removeHtml",e.lineLimiter.removeHtml)("more_label",null==e.lineLimiter?null:e.lineLimiter.more_label)("less_label",null==e.lineLimiter?null:e.lineLimiter.less_label)("skipSanitization",!e.lineLimiter.sanitize)}}function w_(e,t){if(1&e&&(c.jc(0,"div",5),c.ec(1,"metadata-bar",30),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("items",e.courseMetabar.items)}}function y_(e,t){if(1&e&&(c.jc(0,"div",31),c.jc(1,"div",32),c.ec(2,"lp-progress",33),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("course",e.course)("courses",e.learning_plan.courses)("lp_id",e.learning_plan.id)("lp_complete_percent",e.learning_plan.complete_percent)("show_course_ellipsis",e.showCourseEllipsis)("lp_certificate_url",e.learning_plan.certificate_url)}}function C_(e,t){if(1&e){const e=c.kc();c.jc(0,"div",31),c.jc(1,"course-navigation-control",34),c.rc("rate",function(t){return c.Uc(e),c.vc().rateChange(t)})("play",function(t){return c.Uc(e),c.vc().startPlaying(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("mode",e.mode)("current_chapter",e.current_chapter)("next_chapter",e.next_chapter)("prev_chapter",e.prev_chapter)("course_status",e.course_status)("course",e.course)("chapters",e.chapters)("courseState",e.courseState)("displayRating",e.displayRatingComponent)("isCourseStarted",e.isCourseStarted)}}let S_=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.el=e,this._formatServ=t,this.router=i,this.route=s,this.docLayoutService=n,this.changeDetector=a,this.translationPipe=o,this.toggleService=r,this.enrolled_sessions=[],this.isCourseStarted=!0,this.changeSession=new c.q,this.play=new c.q,this.playNext=new c.q,this.playPrev=new c.q,this.rate=new c.q,this.courseMetabar={items:[]},this.showEllipsis=!1,this.showDescription=!1,this.displayRatingComponent={display:!1,mode:"overview"},this.overviewStyle=!1,this.showCourseEllipsis=!1,this.instructor_avatar=[],this.instructor_name=[],this.instructor_id=[],this.sessionMenuOptions=[],this.lineLimiter={content:null,more_label:E.a.t("app7020","Show more"),less_label:E.a.t("standard","Show less"),lines:2,removeHtml:!1,sanitize:!0},this.learningPlanStyle=!1}onResize(e){this.recalculateWidthOfSessionDropdown()}ngOnInit(){if(this.showDescription=!1,this.sortDataBasedOnTypeOfOverview(),this.deadlineTimeLeft){const e=new Date(this.course.deadline),t=new Date(this._formatServ.currentUtcDateTime()),i=Math.abs(t.getTime()-e.getTime());this.deadlineTimeLeft=this._formatServ.millisToDaysHoursMinutes(i)}this.loadMetaBarInstructors(),this.loadSessionDatesIntoEllipsis()}ngOnChanges(e){e&&this.sortDataBasedOnTypeOfOverview()}sortDataBasedOnTypeOfOverview(){this.course?(this.displayRatingLogic(),this.overviewStyle=!0,this.thumbnailPicture=Object(ql.i)(this.course.thumbnail)||"",this.displayName=this.course.name,this.deadlineTimeLeft=this.course.deadline,this.current_session?(this.showDescription=!1,this.changeDetector.detectChanges(),this.lineLimiter.content=this.courseDescription(),this.showDescription=!0):this.showDescription=!1,this.changeDetector.detectChanges(),this.course_status&&(this.navigationStatus=this.course_status,this.certificateUrl=this.course_status.certificate_url)):this.learning_plan&&(this.learningPlanStyle=!0,this.thumbnailPicture=this.learning_plan.image,this.displayName=this.learning_plan.name,this.learning_plan.deadline&&(this.deadlineTimeLeft=this.learning_plan.deadline),this.navigationStatus=this.learning_plan,this.certificateUrl=this.learning_plan.certificate_url,this.lpCoursesCount=this.learning_plan.courses.length)}getUserInitials(e){return""!==e.firstname&&""!==e.lastname?x.b.getInstance().settings.show_first_name_first?e.firstname.slice(0,1)+e.lastname.slice(0,1):e.lastname.slice(0,1)+e.firstname.slice(0,1):null}loadMetaBarInstructors(){let e;const t=[];if(this.course&&this.course.instructors&&this.course.instructors.length>0){for(let i=0;i<this.course.instructors.length;i++)this.instructor_avatar.push(this.course.instructors[i].avatar_url),e=x.b.getInstance().getFullName(this.course.instructors[i],!0),t.push(this.getUserInitials(this.course.instructors[i])),this.instructor_name.push(e),this.course.instructors[i].instructor_id&&this.instructor_id.push(this.course.instructors[i].instructor_id);this.courseMetabar.items=[{component:vs.a,params:{image_url:this.instructor_avatar,initials:t,size:30,stacked:!!(this.instructor_avatar&&this.instructor_avatar.length>1),extra_text:{visible:!!(this.instructor_name&&this.instructor_name.length>0),position:"right",prefix:this.translationPipe.transform(E.a.t("classroom","Instructor")),suffix:" ",content:this.instructor_name,class:"text-main"},has_border:{class:"border-white"},properties:{bg_color_class:"bg-grey-mid",text_color_class:"text-white",icon_class:"zmdi zmdi-account"}}}]}}loadSessionDatesIntoEllipsis(){let e,t,i;if(this.course&&"elearning"!==this.course.type&&this.enrolled_sessions&&this.enrolled_sessions.length>0){for(let s=0;s<this.enrolled_sessions.length;s++){if(i=this.enrolled_sessions[s],this.current_session&&this.enrolled_sessions[s].id===this.current_session.id){this.route.params.subscribe(e=>{if(e&&e.errorMessage){let t=e.errorMessage;t=decodeURIComponent((t.replace("percent_sign","%")+"").replace(/\+/g,"%20")),this.docLayoutService.toast.showToast({message:E.a.t("standard",t),type:"error"})}});const e=Object.keys(this.route.snapshot.params).filter(e=>!["id","slug","id_session"].includes(e)).reduce((e,t)=>(e[t]=this.route.snapshot.params[t],e),{});this.router.navigate([`learn/course/${this.course.id}/session/${this.current_session.id}/${this.current_session.slug_name?this.current_session.slug_name:this.current_session.id}`,e],mi.b)}const n="webinar"===this.course.type,a="classroom"===this.course.type,r=o.a.getInstance().timezone;if("begin_day"in i){const s=`${i.begin_day} ${i.begin_time}`,o=`${i.end_day} ${i.end_time}`;n?(e=(new ze.a).transform(s,r),t=(new ze.a).transform(o,r)):a&&this.toggleService.isOn(u.f.TOGGLE_VILT)?(e=(new ze.a).transform(Qv.a.tz(s,i.begin_timezone)),t=(new ze.a).transform(Qv.a.tz(o,i.end_timezone))):(e=(new ze.a).transform(s),t=(new ze.a).transform(o))}else"start_date"in i&&(n?(e=(new ze.a).transform(i.start_date,r),t=(new ze.a).transform(i.end_date,r)):(e=(new ze.a).transform(i.start_date),t=(new ze.a).transform(i.end_date)));const c=a?`<span class="session-classroom-info">\n                        (${this.translationPipe.transform(E.a.t("standard","location's time"))})\n                    </span>`:"",l={id:this.enrolled_sessions[s].id,title:this.enrolled_sessions[s].name,afterTitle:{actionHTML:`\n                            <i class="zmdi zmdi-calendar text-grey-mid-permanent"></i>\n                            <span class="session-date">\n                                ${e}\n                            </span>\n                            <i class="zmdi zmdi-long-arrow-right text-grey-mid-permanent"></i>\n                            <span class="session-date">\n                                ${t} ${c}\n                            </span>`},action:e=>{this.sessionAction(this.enrolled_sessions[s].id,this.enrolled_sessions[s].slug_name)},active:!!this.current_session&&this.enrolled_sessions[s].id===this.current_session.id},d=Object(Zt.k)(Object(Zt.i)(),Zt.a),h=this._formatServ.getContextTimezone();e=new Kt.a(i.start_date).formatTimezoned(d,h),t=new Kt.a(i.end_date).formatTimezoned(d,h),l.afterTitle.actionHTML=`\n                            <i class="zmdi zmdi-calendar text-grey-mid-permanent"></i>\n                            <span class="session-date">\n                                ${e}\n                            </span>\n                            <i class="zmdi zmdi-long-arrow-right text-grey-mid-permanent"></i>\n                            <i class="zmdi zmdi-calendar text-grey-mid-permanent"></i>\n                            <span class="session-date">\n                                ${t}\n                            </span>\n                            <div class="timezone">\n                                ${this._formatServ.getFormattedTimezone(this._formatServ.getContextTimezone())}\n                            </div>`,this.sessionMenuOptions.push(l)}this.sessionMenu={ellipsisType:"inline",orientation:"bottom-left",actions:this.sessionMenuOptions},this.recalculateWidthOfSessionDropdown(),this.showEllipsis=!0}}recalculateWidthOfSessionDropdown(){for(let e=0;e<this.sessionMenuOptions.length;e++)this.sessionMenuOptions[e].title.length>.35*window.innerWidth/8&&(this.sessionMenuOptions[e].maxChars=Math.ceil((window.innerWidth-600)/8));this.sessionMenu&&(this.sessionMenu.actions=this.sessionMenuOptions),this.sessionDropdown&&this.sessionDropdown.resetMdlStyles(!0,!0)}displayRatingLogic(){this.course.rating_option===nd.a.DISABLED?this.displayRatingComponent.display=!1:this.course_status.status===te.d.COMPLETED&&this.course.rating_option===nd.a.ONLY_COMPLETED?this.displayRatingComponent.display=!0:this.course_status.status!==te.d.SUBSCRIBED&&this.course_status.status!==te.d.IN_PROGRESS&&this.course_status.status!==te.d.COMPLETED||this.course.rating_option!==nd.a.ONLY_ENROLLED?this.course.rating_option===nd.a.ALWAYS&&(this.displayRatingComponent.display=!0):this.displayRatingComponent.display=!0}sessionAction(e,t){this.router.navigate(["learn/course/"+this.course.id+"/session/"+e+"/"+t],Object.assign({replaceUrl:!0},mi.b)),this.changeDetector.detectChanges()}startPlaying(e){this.play.emit(e)}rateChange(e){this.rate.emit(e)}isLearningPlanWithCourses(){return!(!this.learning_plan||!this.learning_plan.courses)}isElearningWithChapters(){return!!(this.chapters&&this.chapters.length>0&&this.overviewStyle&&this.course&&"elearning"===this.course.type)}isCourseWithSessions(){return!!(!this.learning_plan&&this.enrolled_sessions&&this.enrolled_sessions.length>0)}isCourseClassroomOrWebinarCompleted(){return!(this.learning_plan||this.course_status.status!==te.d.COMPLETED||this.course.type!==qc.a.CLASSROOM&&this.course.type!==qc.a.WEBINAR)}setGridClasses(){return this.isElearningWithChapters()||this.isCourseWithSessions()||this.isLearningPlanWithCourses()||this.isCourseClassroomOrWebinarCompleted()?"mdl-cell--8-col":"mdl-cell--12-col"}renderSessionDescription(e){let t=0;if(e.additional_fields)for(;t<e.additional_fields.length;)e.additional_fields[t].value&&""!=e.additional_fields[t].value?t++:e.additional_fields.splice(t,1);const i=e.description?e.description:"",s=e.additional_fields?e.additional_fields:Array();let n="";return n+=i,void 0!==s&&(n+='<ul class="session-additional-fields-list">',s.forEach(e=>{switch(e.type){case Yv.a.DATE:const t=Object(ci.a)(this._formatServ,e.value);n+='<li><div class="mdl-grid"><div class="mdl-cell mdl-cell--5-col"><strong>'+e.title+'</strong></div><div class="mdl-cell mdl-cell--5-col">'+t+"</div></div></li>";break;case Yv.a.TEXTAREA:this.lineLimiter.sanitize=!1;default:let i="";null!==e.value&&(i=e.value),n+='<li><div class="mdl-grid"><div class="mdl-cell mdl-cell--5-col"><strong>'+e.title+'</strong></div><div class="mdl-cell mdl-cell--5-col">'+i+"</div></div></li>"}}),n+="</ul>",n+="<br/>"),n}courseDescription(){const e=/\/learn\/course\/[0-9+\-.]*\/session\/[0-9+\-.]*\/./.test(this.router.url);return this.course.description&&!e?this.course.description:this.current_session.additional_fields.length>0?this.renderSessionDescription(this.current_session):this.current_session.description}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.o),c.dc(ti.b),c.dc(s.h),c.dc(s.a),c.dc(M.a),c.dc(c.i),c.dc(E.b),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["overview-header"]],viewQuery:function(e,t){if(1&e&&c.md(t_,1),2&e){let e;c.Qc(e=c.sc())&&(t.sessionDropdown=e.first)}},hostBindings:function(e,t){1&e&&c.rc("resize",function(e){return t.onResize(e)},!1,c.Tc)},inputs:{course:"course",learning_plan:"learning_plan",current_session:"current_session",enrolled_sessions:"enrolled_sessions",course_status:"course_status",mode:"mode",current_chapter:"current_chapter",prev_chapter:"prev_chapter",next_chapter:"next_chapter",chapters:"chapters",courseState:"courseState",isCourseStarted:"isCourseStarted"},outputs:{changeSession:"changeSession",play:"play",playNext:"playNext",playPrev:"playPrev",rate:"rate"},features:[c.Lb([E.b]),c.Kb],decls:16,vars:13,consts:[[1,"overview-course-header__wrapper","text-grey-dark","bg-white"],[1,"overview-course-header__body","mdl-grid","mdl-wrapper"],["class","mdl-cell course-thumbnail rectangular",4,"ngIf"],[1,"mdl-cell","course-content"],[4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col"],["class","course-tag text-white",4,"ngIf"],[1,"title-popup",3,"innerHTML"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],["class","mdl-cell mdl-cell--12-col session-wrapper",4,"ngIf"],["class","mdl-cell mdl-cell--12-col description",4,"ngIf"],["class","mdl-cell mdl-cell--4-col",4,"ngIf"],[1,"mdl-cell","course-thumbnail","rectangular"],[1,"thumbnail-wrapper"],[3,"src"],[1,"deadline-message","bg-error","text-white"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"course-tag","text-white"],[1,"text-grey-mid"],[1,"mdl-cell","mdl-cell--12-col","session-wrapper"],[1,"session-label","title-section","text-grey-mid"],[1,"session-menu","title-section","text-main"],["class","session-title-single",4,"ngIf"],[3,"ellipsisType","actions",4,"ngIf"],[1,"session-title-single"],[3,"ellipsisType","actions"],["sessionDropdown",""],[1,"mdl-cell","mdl-cell--12-col","description"],[3,"content","lines","removeHtml","more_label","less_label","skipSanitization"],[3,"items"],[1,"mdl-cell","mdl-cell--4-col"],[1,"lp-progress__wrapper","no-padding","bg-white"],[1,"learnin-plan-progress",3,"course","courses","lp_id","lp_complete_percent","show_course_ellipsis","lp_certificate_url"],[3,"mode","current_chapter","next_chapter","prev_chapter","course_status","course","chapters","courseState","displayRating","isCourseStarted","rate","play"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div"),c.dd(3,i_,3,1,"div",2),c.jc(4,"div",3),c.dd(5,d_,2,1,"div",4),c.jc(6,"div",5),c.dd(7,h_,4,7,"div",6),c.ic(),c.jc(8,"div",5),c.ec(9,"span",7),c.ic(),c.dd(10,m_,4,6,"div",8),c.dd(11,v_,7,9,"div",9),c.dd(12,__,2,6,"div",10),c.dd(13,w_,2,1,"div",8),c.ic(),c.ic(),c.dd(14,y_,3,6,"div",11),c.dd(15,C_,2,10,"div",11),c.ic(),c.ic()),2&e&&(c.Mb(2),c.Rb("mdl-cell ",t.setGridClasses()," mdl-grid header-body"),c.Mb(1),c.Dc("ngIf",t.thumbnailPicture),c.Mb(2),c.Dc("ngIf",t.deadlineTimeLeft),c.Mb(2),c.Dc("ngIf",t.course&&t.course.has_esignature_enabled),c.Mb(2),c.Dc("innerHTML",t.displayName,c.Vc),c.Mb(1),c.Dc("ngIf",t.isLearningPlanWithCourses()),c.Mb(1),c.Dc("ngIf",t.showEllipsis&&t.overviewStyle),c.Mb(1),c.Dc("ngIf",t.showDescription),c.Mb(1),c.Dc("ngIf",t.overviewStyle&&(null==t.course?null:t.course.instructors)&&"elearning"==(null==t.course?null:t.course.type)),c.Mb(1),c.Dc("ngIf",t.isLearningPlanWithCourses()),c.Mb(1),c.Dc("ngIf",t.isElearningWithChapters()||t.isCourseWithSessions()||t.isCourseClassroomOrWebinarCompleted()))},directives:[Ae.p,ta.a,li.a,Uv.a,e_,Mv],pipes:[E.b,Ae.z],styles:["[_nghost-%COMP%]  .session-wrapper btn-ellipsis .mdl-menu__container{z-index:10000}[_nghost-%COMP%]  .session-wrapper btn-ellipsis .btn-ellipsis.with-after-titles .mdl-menu, [_nghost-%COMP%]  .session-wrapper btn-ellipsis .btn-ellipsis.with-after-titles .mdl-menu__container, [_nghost-%COMP%]  .session-wrapper btn-ellipsis .btn-ellipsis.with-after-titles .mdl-menu__outline{min-width:800px}.course-thumbnail[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center}.course-thumbnail[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%}"]}),e})();var T_=i("jH9s"),k_=i("UwqK"),I_=i("sgaC"),x_=i("MZXA"),D_=i("9wRM");let O_=(()=>{class e{constructor(){this.lp_courses=[],this.lp_complete_percent=0,this.lp_title="",this.learningPlanTimeSpent=0,this.learningPlanTotalTime=0}ngOnInit(){for(let e=0;e<this.lp_courses.length;e++){const t=this.lp_courses[e];this.learningPlanTimeSpent+=t.duration,this.learningPlanTotalTime+=t.time_spent}this.learningPlanSpentTime=this.calculateLearningPlanTimes(this.learningPlanTimeSpent,this.learningPlanTotalTime),this.updateParams()}ngOnChanges(e){this.updateParams()}calculateLearningPlanTimes(e=0,t=0){let i=0,s=0,n=0,a=0;const o=e_.calculateTime(e),r=e_.calculateTime(t);return i=o.hours,s=o.minutes,n=r.hours,a=r.minutes,E.a.t("standard","{hours}h {minutes}m / {total_hours}h {total_minutes}m",{hours:n,minutes:a,total_hours:i,total_minutes:s})}updateParams(){this.progressParams={percentage:this.lp_complete_percent,color:"bg-positive-green",is_animated:!1,text_blocks:{"bottom-left":E.a.t("course","{progress}% progress",{progress:this.lp_complete_percent}),"bottom-right":this.learningPlanSpentTime}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["slideup-header"]],inputs:{lp_courses:"lp_courses",lp_id:"lp_id",lp_complete_percent:"lp_complete_percent",lp_title:"lp_title"},features:[c.Kb],decls:13,vars:14,consts:[[1,"slideup-header__wrapper","text-white"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--7-col"],[1,"descriptions"],[1,"mdl-cell","mdl-cell--4-col","right-align"],[3,"percentage","mode","color","text_blocks"],[1,"trophy-cell","mdl-cell--1-col"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.jc(3,"p",3),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"h3"),c.fd(7),c.wc(8,"cut"),c.ic(),c.ic(),c.jc(9,"div",4),c.ec(10,"progress-bar",5),c.ic(),c.jc(11,"div",6),c.ec(12,"div"),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(4),c.gd(c.xc(5,9,"Learning plan")),c.Mb(3),c.gd(c.yc(8,11,t.lp_title,100)),c.Mb(3),c.Dc("percentage",t.progressParams.percentage)("mode",t.progressParams.mode)("color",t.progressParams.color)("text_blocks",t.progressParams.text_blocks),c.Mb(2),c.Rb("fa fa-trophy header-icons icon-type ",100==t.progressParams.percentage?"text-positive-green":"text-white",""))},directives:[av.a],pipes:[E.b,Rb.a],encapsulation:2}),e})();var E_=i("AytR"),P_=i("crwO"),M_=function(e){return e[e.COMPLETED=0]="COMPLETED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.LOCKED_BY_COURSES=2]="LOCKED_BY_COURSES",e[e.LOCKED_BY_COURSES_SOFT=3]="LOCKED_BY_COURSES_SOFT",e[e.LOCKED_BY_COURSES_NUMBER=4]="LOCKED_BY_COURSES_NUMBER",e[e.LOCKED_BY_TIME=5]="LOCKED_BY_TIME",e[e.LOCKED_BY_WAITING=6]="LOCKED_BY_WAITING",e[e.NOT_STARTED=7]="NOT_STARTED",e[e.LOCKED=8]="LOCKED",e}({});function A_(e){return e.status===Bt.e.COMPLETED?M_.COMPLETED:e.status===Bt.e.IN_PROGRESS?M_.IN_PROGRESS:!e.can_enter&&e.unlocking_datetime?M_.LOCKED_BY_TIME:e.can_enter?e.status===Bt.e.WAITING&&e.can_enter?M_.LOCKED_BY_WAITING:M_.NOT_STARTED:M_.LOCKED}function L_(e,t){const i=["",""];switch(A_(e)){case M_.COMPLETED:return E.a.t("course","_T_USER_STATUS_END");case M_.IN_PROGRESS:return E.a.t("standard","_USER_STATUS_BEGIN");case M_.LOCKED_BY_COURSES:return E.a.t("curricula","Please complete the following courses to unlock this course:");case M_.LOCKED_BY_COURSES_SOFT:return E.a.t("curricula","Please complete at least {n} of the following courses to unlock this course:",{n:i.length});case M_.LOCKED_BY_COURSES_NUMBER:return E.a.t("curricula","Require at least {n} courses to be completed",{n:["",""].length});case M_.LOCKED_BY_TIME:return E.a.t("curricula","The course will be available from {datetime}",{datetime:j_(e,t)});case M_.LOCKED:return E.a.t("standard","Subscription not active");case M_.LOCKED_BY_WAITING:return E.a.t("standard","in waiting list");case M_.NOT_STARTED:default:return E.a.t("standard","To start")}}function j_(e,t){return new Ru.a(t.formatterService,t.changeDetectorRef).transform(e.unlocking_datetime,{disableRelativeTime:!0,length:"short"})}var F_=i("dHR3");function R_(e,t){1&e&&(c.jc(0,"div",3),c.jc(1,"div",4),c.ec(2,"ui-spinner"),c.jc(3,"div",5),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(4),c.gd(c.xc(5,1,"Loading the Learning Plan...")))}function N_(e,t){if(1&e){const e=c.kc();c.jc(0,"div",14),c.jc(1,"flat-vertical-list",15),c.rc("onClick",function(t){return c.Uc(e),c.vc(2).redirectToCourse(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(1),c.Dc("items",e.learningPlanCourses)}}function U_(e,t){if(1&e&&(c.jc(0,"div",6),c.jc(1,"div"),c.ec(2,"overview-header",7),c.ic(),c.jc(3,"div",8),c.jc(4,"div",9),c.jc(5,"div",10),c.jc(6,"div",11),c.fd(7),c.wc(8,"t"),c.ic(),c.ec(9,"div",12),c.wc(10,"sanitizeHtml"),c.ic(),c.ic(),c.dd(11,N_,2,1,"div",13),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("learning_plan",e.learningPlanModel),c.Mb(5),c.gd(c.xc(8,4,"About this Learning Plan")),c.Mb(2),c.Dc("innerHtml",c.xc(10,6,e.learningPlanModel.description),c.Vc),c.Mb(2),c.Dc("ngIf",e.learningPlanModel.courses.length>0)}}const q_=function(e){return{initializing:e}};let z_=(()=>{class e{constructor(e,t,i,s,n,a,o,r,c,l,d){this._store=e,this._learningPlanActions=t,this._router=i,this._route=s,this._el=n,this.route=a,this.router=o,this._backendService=r,this.formatterService=c,this.changeDetectorRef=l,this.docLayoutService=d,this.LearningPlanStates=Bt.l,this.lineLimiter={content:null,lines:12,more_label:E.a.t("app7020","Show more"),less_label:E.a.t("standard","Show less")},this.learningPlanCourses=[],this.disposableSubscriptions=[],this.idLP=null}ngOnInit(){const e=this.getLPId().subscribe(e=>{console.log("Navigated to learning plan "+e);const t=this.validateDeeplink().subscribe(()=>{this.attachLPSubscription(),this._store.dispatch(this._learningPlanActions.loadLearningPlanInfo(this.idLP))});this.disposableSubscriptions.push(t)});this.disposableSubscriptions.push(e)}getLPId(){return a.a.create(e=>{this.route.params.subscribe(t=>{if(void 0!==t.id){const i=t.id;this.idLP!==i&&(this.idLP=i,e.next(i))}else e.error()})})}deeplinkActionButton(){if(this.learningPlanModel.deeplink&&""!==this.learningPlanModel.deeplink){const e=o.a.getInstance();let t="";void 0!==E_.a.subfolder&&(t="/"+E_.a.subfolder);const i={singleLink:document.location.origin+t+"/lms/index.php?r=coursepath/deeplink&id_path="+this.idLP+"&hash="+this.learningPlanModel.deeplink+"&generated_by="+e.id};this.docLayoutService.actionButtons.setActionButtons([{properties:{icons:["zmdi zmdi-link"],baloon:{width:520,title:"",style:"white",position:"bottom-left",component:{params:i,component:P_.a}}}}])}}validateDeeplink(){return a.a.create(e=>{const t=this.route.queryParams.subscribe(t=>{const i=void 0!==t.hash?t.hash:null,s=void 0!==t.generated_by?t.generated_by:null;if(i&&s&&null!==i&&null!==s){console.log("Detected deeplink related param changes in URL. Validating deeplink");const t=this._backendService.request("/learn/v1/lp/"+this.idLP+"/deeplink","POST",{hash:i,generated_by:s}).subscribe(i=>{t&&t.unsubscribe(),console.log("Deeplink valid"),i.data.message&&""!==i.data.message&&this.docLayoutService.toast.showToast({message:i.data.message,type:i.data.success?"success":"error"}),i.data.success?(e.next(!0),this.router.navigate([i.data.redirectUrl])):(this.router.navigate([i.data.redirectUrl]),e.error("Deeplink not valid. Rejecting access"))})}else e.next(!0)});this.disposableSubscriptions.push(t)})}redirectToCourse(e){return this._router.navigate(["learn/course/"+e.id+"/"+e.payload.slug,{lp:e.payload.id_learningplan}])}attachLPSubscription(){const t=this._store.select(ie.k).subscribe(t=>{this.learningPlanModel=t,t.state===Bt.l.VIEWING&&(this.learningPlanModel.state===Bt.l.UNAUTHORIZED||this.learningPlanModel.status===Bt.m.NOT_ENROLLED&&!this.learningPlanModel.settings.show_in_catalog?this._router.navigate(["/unauthorized"],mi.b):this.learningPlanModel&&this.learningPlanModel.status===Bt.m.NOT_ENROLLED&&this.learningPlanModel.settings.show_in_catalog&&!this.learningPlanModel.is_assigned&&this.router.navigate(["/learn/learning_plan/view/"+this.learningPlanModel.id+"/"+this.learningPlanModel.slug_name],mi.b),this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Si.a.myCoursesAndLearningPlans,href:"/learn/mycourses"},{label:this.learningPlanModel.name,href:this.router.url}]),this.learningPlanCourses=e.formatLPCourses(this.learningPlanModel,{changeDetectorRef:this.changeDetectorRef,formatterService:this.formatterService}),this.deeplinkActionButton())});this.disposableSubscriptions.push(t)}static formatLPCourses(e,t){const i=e.id,s=[];for(let n=0;n<e.courses.length;n++){e.courses[n].percentage=Math.round(e.courses[n].competed_lessons/e.courses[n].all_lessons*100),isNaN(e.courses[n].percentage)&&(e.courses[n].percentage="completed"===e.courses[n].status?100:0);const a=e.courses[n];let o="",r="",c=!0,l=!1;switch(void 0!==a.course_type&&"elearning"===a.course_type&&(l=!0),l||a.status!==Bt.e.COMPLETED||(a.percentage=100),A_(a)){case M_.COMPLETED:o='<i class="zmdi zmdi-check-circle check-complete"></i>',r="text-positive-green",c=!1;break;case M_.IN_PROGRESS:o='<i class="zmdi zmdi-check-circle check-complete"></i>',r="text-warning",c=!1;break;case M_.NOT_STARTED:default:o='<i class="zmdi zmdi-check-circle check-complete text-grey-mid"></i>',r="text-grey-mid-permanent",c=!1}s.push({id:a.idCourse,title:a.name,description:a.short_description,type:a.course_type,image_url:a.image,duration:a.duration,payload:{slug:a.slug_name,id_learningplan:i},prefix:{component:av.a,params:{percentage:a.percentage,color:"border-positive-green",mode:"circle",text_blocks:{innerHtml:o,backgroundClass:"bg-white",fontClass:r}}},tooltip:{position:"top",text:L_(a,t)},can_enter:"elearning"===a.course_type?"waiting"!==a.status&&a.can_enter:a.can_enter,can_enter_reason:(()=>{switch(A_(a)){case M_.LOCKED_BY_TIME:case M_.LOCKED_BY_WAITING:return L_(a,t);default:return a.status_message||a.can_enter_reason}})()})}return s}ngOnDestroy(){this.learningPlanCourses=[];for(const t in this.disposableSubscriptions){const i=this.disposableSubscriptions[t];if(i)try{i.unsubscribe()}catch(e){console.log("The subscriber is already unsubscribed")}}this._store.dispatch(this._learningPlanActions.cleanLearningPlanStoreData()),this.docLayoutService.actionButtons.clearActionButtons()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(v.d),c.dc(ga.c),c.dc(s.h),c.dc(s.a),c.dc(c.o),c.dc(s.a),c.dc(s.h),c.dc(S.a),c.dc(ti.b),c.dc(c.i),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],decls:3,vars:5,consts:[[1,"learning-plan-lp",3,"ngClass"],["class","learning-plan-lp__loader",4,"ngIf"],["class","learning-plan-lp__viewing",4,"ngIf"],[1,"learning-plan-lp__loader"],[1,"loader"],[1,"message","text-grey-mid"],[1,"learning-plan-lp__viewing"],[3,"learning_plan"],[1,"mdl-wrapper","learning-plan-lp__wrapper"],[1,"overview-description__wrapper","text-grey-dark","bg-white"],[1,"overview-description__body"],[1,"description-title"],[1,"description-content","default-list-style","default-headings-styles",3,"innerHtml"],["class","learning-plan-courses-list rectangular",4,"ngIf"],[1,"learning-plan-courses-list","rectangular"],[3,"items","onClick"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,R_,6,3,"div",1),c.dd(2,U_,12,8,"div",2),c.ic()),2&e&&(c.Dc("ngClass",c.Ic(3,q_,(null==t.learningPlanModel?null:t.learningPlanModel.state)==t.LearningPlanStates.INITIALIZING)),c.Mb(1),c.Dc("ngIf",(null==t.learningPlanModel?null:t.learningPlanModel.state)==t.LearningPlanStates.INITIALIZING),c.Mb(1),c.Dc("ngIf",(null==t.learningPlanModel?null:t.learningPlanModel.state)==t.LearningPlanStates.VIEWING))},directives:[Ae.n,Ae.p,b.fd,S_,F_.a],pipes:[E.b,Mi.a],styles:['.description-content[_ngcontent-%COMP%]:after{content:"";display:block;clear:both}']}),e})();function V_(e,t){if(1&e){const e=c.kc();c.jc(0,"div",3),c.jc(1,"flat-vertical-list",4),c.rc("onClick",function(t){return c.Uc(e),c.vc().redirectToCourse(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("items",e.learningPlanCourses)}}let B_=(()=>{class e{constructor(e,t,i,s){this._router=e,this._store=t,this.formatterService=i,this.changeDetectorRef=s,this.learningPlanCourses=[]}ngOnInit(){this.lpSubscriber=this._store.select(ie.k).subscribe(e=>{e&&(this.lp_model=e,this.learningPlanCourses=z_.formatLPCourses(this.lp_model,{changeDetectorRef:this.changeDetectorRef,formatterService:this.formatterService}))})}redirectToCourse(e){return this._router.navigate(["learn/course/"+e.id+"/"+e.payload.slug,{lp:e.payload.id_learningplan}])}ngOnDestroy(){this.lpSubscriber&&this.lpSubscriber.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(v.d),c.dc(ti.b),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["slideup-content"]],decls:3,vars:2,consts:[[1,"learning-plan-lp__wrapper"],[3,"description"],["class","learning-plan-courses-list",4,"ngIf"],[1,"learning-plan-courses-list"],[3,"items","onClick"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.ec(1,"overview-description",1),c.dd(2,V_,2,1,"div",2),c.ic()),2&e&&(c.Mb(1),c.Dc("description",null==t.lp_model?null:t.lp_model.description),c.Mb(1),c.Dc("ngIf",(null==t.lp_model?null:t.lp_model.courses.length)>0))},directives:[Ae.p,F_.a],encapsulation:2}),e})();const G_=["overlay"],$_=["slideupPanel"];function H_(e,t){1&e&&(c.jc(0,"div",12),c.jc(1,"div",13),c.ec(2,"slideup-content"),c.ic(),c.ic())}const Y_=function(e){return{slided:e}},W_=function(e,t){return{"zmdi-chevron-down":e,"zmdi-chevron-up":t}};let Q_=(()=>{class e{constructor(e){this.docLayoutService=e,this.docLayoutConfig=this.docLayoutService.getDocLayoutConfig(),this.showPanel=!1}toggleSlideupPanel(){this.showPanel=!this.showPanel,this.overlay.nativeElement.classList.toggle("showed"),this.showPanel&&setTimeout(()=>{this.maxContentPanelHeight=60!==this.slideupPanel.nativeElement.offsetHeight||0!==this.slideupPanel.nativeElement.offsetHeight?this.slideupPanel.nativeElement.offsetHeight:300},300),this.showPanel?this.docLayoutService.page.hidePageOverflow():this.docLayoutService.page.showPageOverflow()}ngOnDestroy(){this.docLayoutService.page.showPageOverflow()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["slideup-panel"]],viewQuery:function(e,t){if(1&e&&(c.md(G_,1),c.md($_,1)),2&e){let e;c.Qc(e=c.sc())&&(t.overlay=e.first),c.Qc(e=c.sc())&&(t.slideupPanel=e.first)}},inputs:{learningPlanCourses:"learningPlanCourses",learningPlanID:"learningPlanID",learningPlanCompletePercent:"learningPlanCompletePercent",learningPlanTitle:"learningPlanTitle"},decls:12,vars:13,consts:[[3,"active"],[1,"slideup-panel__wrapper","bg-grey-superlight",3,"ngClass"],["slideupPanel",""],[1,"slideup-panel__header","bg-main",3,"uiKeyboardFocusable","click","keydown.enter"],[1,"mdl-wrapper"],[1,"header-component_wrapper"],[3,"lp_courses","lp_id","lp_complete_percent","lp_title"],[1,"toggle-panel"],[1,"text-white","zmdi",3,"ngClass"],["class","slideup-panel__content bg-grey-superlight",4,"ngIf"],[1,"slideup-panel-overlay"],["overlay",""],[1,"slideup-panel__content","bg-grey-superlight"],[1,"content-component_wrapper","mdl-wrapper"]],template:function(e,t){1&e&&(c.jc(0,"ui-trap",0),c.jc(1,"div",1,2),c.jc(3,"div",3),c.rc("click",function(){return t.toggleSlideupPanel()})("keydown.enter",function(){return t.toggleSlideupPanel()}),c.jc(4,"div",4),c.jc(5,"div",5),c.ec(6,"slideup-header",6),c.jc(7,"div",7),c.ec(8,"i",8),c.ic(),c.ic(),c.ic(),c.ic(),c.dd(9,H_,3,0,"div",9),c.ic(),c.ic(),c.ec(10,"div",10,11)),2&e&&(c.Dc("active",t.showPanel),c.Mb(1),c.Dc("ngClass",c.Ic(8,Y_,t.showPanel)),c.Mb(5),c.Dc("lp_courses",t.learningPlanCourses)("lp_id",t.learningPlanID)("lp_complete_percent",t.learningPlanCompletePercent)("lp_title",t.learningPlanTitle),c.Mb(2),c.Dc("ngClass",c.Jc(10,W_,t.showPanel,!t.showPanel)),c.Mb(1),c.Dc("ngIf",t.showPanel))},directives:[b.Hd,Ae.n,b.kc,O_,Ae.p,B_],styles:['.color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}slideup-panel .slideup-panel__wrapper{position:fixed;left:0;right:0;bottom:0;margin:auto;min-height:55px;z-index:3;transition-duration:.3s;transition-timing-function:cubic-bezier(0,1,.5,1);max-height:70px}slideup-panel .slideup-panel__wrapper.slided{max-height:87%;min-height:86%}slideup-panel .slideup-panel__header{position:relative;padding:5px 0 0;min-height:60px;cursor:pointer}slideup-panel .slideup-panel__header:after{content:" ";position:absolute;top:var(--ui-spacing-micro);left:var(--ui-spacing-micro);width:calc(100% - var(--ui-spacing-tiny));height:calc(100% - var(--ui-spacing-tiny));box-sizing:border-box;opacity:var(--ui-opacity-transparent);border:solid var(--ui-size-border-xs) var(--ui-color-border-accessibility-negative);border-radius:var(--ui-radius-default);transition:opacity var(--ui-motion-duration-short) var(--ui-motion-easing-entering)}.ui-keyboard-navigation slideup-panel .slideup-panel__header:focus:after{opacity:var(--ui-opacity-full)}slideup-panel .slideup-panel__header .mdl-wrapper .header-component_wrapper{position:relative;padding-right:20px;min-height:50px}slideup-panel .slideup-panel__header .mdl-wrapper .header-component_wrapper .toggle-panel{padding-left:30px;position:absolute;right:0;top:0;bottom:0;margin:auto;height:25px;cursor:pointer}slideup-panel .slideup-panel__header .mdl-wrapper .header-component_wrapper .toggle-panel i{font-size:26px}slideup-panel .slideup-panel__content{max-height:78vh;overflow:auto;padding:35px 0;box-sizing:border-box}slideup-panel .slideup-panel-overlay{position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;visibility:hidden;z-index:2;transition-property:all;transition-duration:.5s;transition-timing-function:cubic-bezier(0,1,.5,1);background:rgba(0,0,0,.5)}slideup-panel .slideup-panel-overlay.showed{opacity:1;visibility:visible}@media (max-width:1024px){slideup-panel .slideup-panel__wrapper{max-height:inherit}}'],encapsulation:2}),e})();const K_=["additionalFieldsDialog"],X_=["courseNavigation"],J_=["coursePlayerContainer"],Z_=["changeSessionDialog"],ew=["changeSession"],tw=["selfUnenrollDialog"],iw=["selfUnenrollDialogComponent"],sw=["selfUnenrollDialogConfirmButton"];function nw(e,t){if(1&e&&(c.jc(0,"div",4),c.jc(1,"div",5),c.ec(2,"iframe",6),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(2),c.Dc("src",e.iframeUrl,c.Wc)}}function aw(e,t){if(1&e&&(c.jc(0,"div",14),c.ec(1,"course-waiting-list",15),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("course",e.course)}}function ow(e,t){1&e&&(c.jc(0,"div",18),c.jc(1,"div",19),c.jc(2,"div",20),c.jc(3,"div",21),c.jc(4,"div",22),c.ec(5,"div",23),c.jc(6,"div",24),c.fd(7),c.wc(8,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(7),c.hd(" ",c.xc(8,1,"This course has no sessions available at this time. Please, check back later.")," "))}function rw(e,t){if(1&e&&(c.jc(0,"div",19),c.ec(1,"div",31),c.jc(2,"div",32),c.ec(3,"em",33),c.fd(4),c.ic(),c.ec(5,"div",31),c.ic()),2&e){const e=c.vc(4);c.Mb(4),c.hd("",e.softDeadlineText," ")}}function cw(e,t){1&e&&(c.jc(0,"div"),c.jc(1,"div",21),c.jc(2,"div",22),c.ec(3,"div",23),c.jc(4,"div",24),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"div",34),c.fd(8),c.wc(9,"t"),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(5),c.hd(" ",c.xc(6,2,"Ops, no Training Materials found for this course")," "),c.Mb(3),c.hd(" ",c.xc(9,4,"You may want to contact your administrator or instructor to fix this problem")," "))}function lw(e,t){if(1&e){const e=c.kc();c.jc(0,"div",42),c.jc(1,"course-navigation",43),c.rc("rate",function(t){return c.Uc(e),c.vc(5).rateChange(t)})("play",function(t){return c.Uc(e),c.vc(5).startPlaying(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc(5);c.Mb(1),c.Dc("mode",e.navigationMode)("current_chapter",e.currentChapter)("next_chapter",e.nextChapter)("prev_chapter",e.prevChapter)("course_status",e.courseStatus)("chapter_viewer",e.chapterViewer)("course",e.course)("chapters",e.chapters)("folders",e.folders)("courseState",e.courseState)("learning_plan_id",e.learningPlanId)("isCourseStarted",e.isCourseStarted)}}function dw(e,t){if(1&e){const e=c.kc();c.jc(0,"chapter-information",45),c.rc("rate",function(t){return c.Uc(e),c.vc(6).rateChange(t)})("play",function(t){return c.Uc(e),c.vc(6).startPlaying(t)}),c.wc(1,"json"),c.ic()}if(2&e){const e=c.vc(6);c.Dc("course",e.course)("current_chapter","{}"!=c.xc(1,4,e.currentChapter)?e.currentChapter:e.lastPlayedChapter)("course_status",e.courseStatus)("isCourseStarted",e.isCourseStarted)}}function uw(e,t){if(1&e&&(c.jc(0,"div",42),c.dd(1,dw,2,6,"chapter-information",44),c.ic()),2&e){const e=c.vc(5);c.Mb(1),c.Dc("ngIf",e.currentChapter||e.lastPlayedChapter)}}const hw=function(e,t){return{"mdl-cell--4-col":e,"mdl-cell--1-col":t}};function pw(e,t){if(1&e){const e=c.kc();c.jc(0,"div",46),c.jc(1,"course-navigation",43,47),c.rc("rate",function(t){return c.Uc(e),c.vc(5).rateChange(t)})("play",function(t){return c.Uc(e),c.vc(5).startPlaying(t)}),c.ic(),c.ic()}if(2&e){const e=c.vc(5);c.Dc("ngClass",c.Jc(13,hw,"full"==e.mode,"compact"==e.mode)),c.Mb(1),c.Dc("mode",e.navigationMode)("current_chapter",e.currentChapter)("next_chapter",e.nextChapter)("prev_chapter",e.prevChapter)("course_status",e.courseStatus)("chapter_viewer",e.chapterViewer)("course",e.course)("chapters",e.chapters)("folders",e.folders)("courseState",e.courseState)("learning_plan_id",e.learningPlanId)("isCourseStarted",e.isCourseStarted)}}const mw=function(e,t,i){return{"mdl-cell--11-col":e,"mdl-cell--8-col":t,"mdl-cell--12-col":i}};function gw(e,t){if(1&e){const e=c.kc();c.jc(0,"div",35,36),c.jc(2,"div",37),c.jc(3,"div",38),c.jc(4,"chapter-viewer",39),c.rc("rate",function(t){return c.Uc(e),c.vc(4).rateChange(t)})("play",function(t){return c.Uc(e),c.vc(4).startPlaying(t)})("completed",function(t){return c.Uc(e),c.vc(4).chapterCompleted(t)})("loaded",function(t){return c.Uc(e),c.vc(4).chapterLoaded(t)})("closeLightbox",function(){return c.Uc(e),c.vc(4).exitLightboxMode}),c.ic(),c.ic(),c.dd(5,lw,2,12,"div",40),c.dd(6,uw,2,1,"div",40),c.ic(),c.dd(7,pw,3,16,"div",41),c.ic()}if(2&e){const e=c.vc(4);c.Mb(2),c.Dc("ngClass",c.Kc(17,mw,"compact"==e.mode,"full"==e.mode,"flat"==e.mode)),c.Mb(2),c.Dc("current_chapter",e.currentChapter)("course_status",e.courseStatus)("course",e.course)("chapter_viewer",e.chapterViewer)("next_chapter",e.nextChapter)("prev_chapter",e.prevChapter)("chapter_must_be_tracked",e.chapterMustBeTracked)("lastPlayedChapter",e.lastPlayedChapter)("chapters",e.chapters)("preserve_lightbox",e.preserveLightbox)("device",e.device)("learning_plan_id",e.learningPlanId)("isCourseStarted",e.isCourseStarted),c.Mb(1),c.Dc("ngIf",e.showNavigationUnderChapterViewer),c.Mb(1),c.Dc("ngIf",(null==e.currentChapter?null:e.currentChapter.type)!=e.ChapterType.QUIZ),c.Mb(1),c.Dc("ngIf","flat"!=e.navigationMode)}}function bw(e,t){if(1&e&&(c.jc(0,"div",48),c.ec(1,"partner-banner",15),c.ic()),2&e){const e=c.vc(4);c.Mb(1),c.Dc("course",e.course)}}const fw=function(){return{wrapper:"no-side-padding"}};function vw(e,t){if(1&e&&c.ec(0,"collection-widgets",49),2&e){const e=c.vc(4);c.ad(c.Hc(3,fw)),c.Dc("widgetsDataSource",e.courseWidgets)}}function _w(e,t){if(1&e&&(c.jc(0,"div",18),c.dd(1,rw,6,1,"div",25),c.jc(2,"div",26),c.jc(3,"div",27),c.dd(4,cw,10,6,"div",9),c.dd(5,gw,8,21,"div",28),c.ic(),c.ic(),c.dd(6,bw,2,1,"div",29),c.dd(7,vw,1,4,"collection-widgets",30),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.Dc("ngIf",e.inSoftDeadline),c.Mb(3),c.Dc("ngIf",e.status==e.playerStatus.EMPTY),c.Mb(1),c.Dc("ngIf",e.status!=e.playerStatus.INITIALIZING&&e.status!=e.playerStatus.EMPTY),c.Mb(1),c.Dc("ngIf",e.course.partner_data&&e.course.partner_data.active&&e.course.partner_data.course_visible),c.Mb(1),c.Dc("ngIf",!e.course.has_overview&&e.courseWidgets&&!e.isLightBoxChapter)}}function ww(e,t){if(1&e&&(c.jc(0,"div",54),c.jc(1,"div",19),c.ec(2,"div",31),c.jc(3,"div",32),c.ec(4,"em",33),c.fd(5),c.ic(),c.ec(6,"div",31),c.ic(),c.ic()),2&e){const e=c.vc(4);c.Mb(5),c.hd("",e.softDeadlineText," ")}}function yw(e,t){if(1&e&&c.ec(0,"tabs",57),2&e){const e=c.vc(5);c.ad(null==e.tabsParams?null:e.tabsParams.style),c.Dc("panels",null==e.tabsParams?null:e.tabsParams.panels)("reInitTabsOnChange",!0)}}function Cw(e,t){if(1&e&&(c.jc(0,"div",55),c.dd(1,yw,1,4,"tabs",56),c.ic()),2&e){const e=c.vc(4);c.Mb(1),c.Dc("ngIf",e.tabsParams)}}function Sw(e,t){if(1&e&&(c.jc(0,"div"),c.ec(1,"session-overview",58),c.ic()),2&e){const e=c.vc(4);c.Mb(1),c.Dc("course",e.course)("overview",e.overview)("available_sessions",e.overview.available_sessions.length>0?e.overview.available_sessions:e.overview.managed_sessions)}}function Tw(e,t){if(1&e){const e=c.kc();c.jc(0,"div",50),c.dd(1,ww,7,1,"div",51),c.jc(2,"overview-header",52),c.rc("rate",function(t){return c.Uc(e),c.vc(3).rateChange(t)})("play",function(t){return c.Uc(e),c.vc(3).startPlaying(t)})("changeSession",function(t){return c.Uc(e),c.vc(3).changeSession(t)}),c.ic(),c.dd(3,Cw,2,1,"div",53),c.dd(4,Sw,2,3,"div",9),c.ic()}if(2&e){const e=c.vc(3);c.Mb(1),c.Dc("ngIf",1==e.inSoftDeadline),c.Mb(1),c.Dc("course",e.course)("course_status",e.courseStatus)("current_session",e.overview.current_session)("enrolled_sessions",e.overview.enrolled_sessions.length>0?e.overview.enrolled_sessions:e.overview.managed_sessions)("mode",e.mode)("current_chapter",e.currentChapter)("next_chapter",e.nextChapter)("prev_chapter",e.prevChapter)("chapters",e.chapters)("courseState",e.courseState)("isCourseStarted",e.isCourseStarted),c.Mb(1),c.Dc("ngIf",e.overview.enrolled_sessions&&e.overview.enrolled_sessions.length>0||e.overview.managed_sessions.length>0||"elearning"===e.course.type),c.Mb(1),c.Dc("ngIf",e.overview.enrolled_sessions.length<=0&&e.overview.managed_sessions.length<=0&&"elearning"!==e.course.type)}}function kw(e,t){if(1&e&&(c.jc(0,"div"),c.dd(1,ow,9,3,"div",16),c.dd(2,_w,8,5,"div",16),c.dd(3,Tw,5,14,"div",17),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngIf",e.courseState==e.courseStates.OVERVIEW&&(null==e.overview?null:e.overview.status)==e.overviewStatuses.NO_SESSION&&(null==e.course?null:e.course.type)!=e.CourseType.ELEARNING),c.Mb(1),c.Dc("ngIf",e.courseState==e.courseStates.PLAYER),c.Mb(1),c.Dc("ngIf",e.courseState==e.courseStates.OVERVIEW&&(null==e.overview?null:e.overview.status)==e.overviewStatuses.READY)}}function Iw(e,t){if(1&e&&c.ec(0,"change-session",61,62),2&e){const e=c.vc(3);c.Dc("sessions",e.changeSessionParameters.sessions)("available_enroll",e.changeSessionParameters.available_enroll)("idCourse",e.changeSessionParameters.idCourse)("useLocationTimezone",e.changeSessionParameters.useLocationTimezone)}}function xw(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title"),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"doc-shared-dialog-content"),c.dd(5,Iw,2,4,"change-session",59),c.ic(),c.ic(),c.jc(6,"doc-shared-dialog-actions"),c.jc(7,"doc-shared-dialog-action",60),c.rc("trigger",function(){return c.Uc(e),c.vc(),c.Rc(5).hide()}),c.wc(8,"t"),c.ic(),c.jc(9,"doc-shared-dialog-action",60),c.rc("trigger",function(){return c.Uc(e),c.vc(2).onChangeSessionConfirm()}),c.wc(10,"t"),c.ic(),c.ic()}if(2&e){c.vc();const e=c.Rc(5),t=c.vc();c.Mb(2),c.hd(" ",c.xc(3,4,t.changeSessionTitle)," "),c.Mb(3),c.Dc("ngIf",e.open),c.Mb(2),c.Dc("label",c.xc(8,6,t.cancelLabel)),c.Mb(2),c.Dc("label",c.xc(10,8,t.confirmLabel))}}function Dw(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title"),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"doc-shared-dialog-content"),c.jc(5,"self-unenroll-dialog",63,64),c.rc("confirmationToggle",function(t){return c.Uc(e),c.Rc(11).disabled=!t}),c.ic(),c.ic(),c.ic(),c.jc(7,"doc-shared-dialog-actions"),c.jc(8,"doc-shared-dialog-action",60),c.rc("trigger",function(){return c.Uc(e),c.vc(),c.Rc(8).hide()}),c.wc(9,"t"),c.ic(),c.jc(10,"doc-shared-dialog-action",65,66),c.rc("trigger",function(){return c.Uc(e),c.vc(2).onSelfUnenrollConfirm()}),c.wc(12,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(2),c.hd(" ",c.xc(3,8,e.selfUnenrollTitle)," "),c.Mb(3),c.Dc("course",e.selfUnenrollParameters.course)("form_control",null==e.selfUnenrollParameters.selfUnenrollForm?null:e.selfUnenrollParameters.selfUnenrollForm.controls.enrollment_type)("current_session",e.selfUnenrollParameters.currentSession)("showCheckbox",!0),c.Mb(3),c.Dc("label",c.xc(9,10,e.cancelLabel)),c.Mb(2),c.Dc("type","positive")("label",c.xc(12,12,e.confirmLabel))}}const Ow=function(e,t){return{initializing:e,"with-lp":t}};function Ew(e,t){if(1&e&&(c.jc(0,"div",7),c.dd(1,aw,2,1,"div",8),c.dd(2,kw,4,3,"div",9),c.jc(3,"div",10),c.jc(4,"doc-shared-dialog",null,11),c.dd(6,xw,11,10,"ng-template"),c.ic(),c.jc(7,"doc-shared-dialog",12,13),c.dd(9,Dw,13,14,"ng-template"),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Dc("ngClass",c.Jc(4,Ow,e.courseState==e.courseStates.INITIALIZING&&e.courseState!=e.courseStates.PLAYER,e.showSlideUpPanel)),c.Mb(1),c.Dc("ngIf",1==e.waitingList),c.Mb(1),c.Dc("ngIf",!e.waitingList),c.Mb(5),c.Dc("size","sm")}}function Pw(e,t){if(1&e&&c.ec(0,"slideup-panel",67),2&e){const e=c.vc();c.Dc("learningPlanID",e.slideUpPanelConfig.learningPlanID)("learningPlanCourses",e.slideUpPanelConfig.learningPlanCourses)("learningPlanTitle",e.slideUpPanelConfig.learningPlanTitle)("learningPlanCompletePercent",e.slideUpPanelConfig.learningPlanCompletePercent)}}function Mw(e,t){if(1&e&&c.ec(0,"dialog-component",68,69),2&e){const e=c.vc();c.Dc("id",e.additionalFieldsDialogParams.id)("width",e.additionalFieldsDialogParams.width)("height",e.additionalFieldsDialogParams.height)("title",e.additionalFieldsDialogParams.title)("content",e.additionalFieldsDialogParams.content)("type",e.additionalFieldsDialogParams.type)("actions",e.additionalFieldsDialogParams.actions)("confirmation_check_text",e.additionalFieldsDialogParams.confirmation_check_text)("show_confirmation_check",e.additionalFieldsDialogParams.show_confirmation_check)}}let Aw,Lw,jw,Fw=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a,r,c,l,d,u,h,p,m,g,b,f,v,_,w,y,C){super(),this.store=e,this.learningPlanActions=t,this.overviewActions=i,this.router=s,this.route=n,this.pageService=a,this.backendService=r,this.changeDetector=c,this.loader=l,this.fb=d,this.unenrollmentButtonService=u,this.deeplinkService=h,this.browserDetection=p,this.formatter=m,this.userInteractionService=g,this.dispatcher=b,this.coursePlayerCalendarService=f,this.docLayoutService=v,this.toggleService=_,this.embeddedService=w,this.storeActions$=y,this.lrnCachedCourseService=C,this.changeSessionParameters={sessions:[],available_enroll:[],idCourse:-1,useLocationTimezone:!0},this.changeSessionTitle=E.a.t("standard","Change Session"),this.selfUnenrollParameters={},this.selfUnenrollTitle=E.a.t("course","Unenrollment"),this.cancelLabel=E.a.t("standard","Cancel"),this.confirmLabel=E.a.t("standard","Confirm"),this.sessionInstance=o.a.getInstance(),this.playerStatus=te.b,this.courseStates=te.c,this.overviewStatuses=te.n,this.CourseType=te.e,this.ChapterType=te.a,this.iframeStatus$=new Pe.a({isInit:!1,url:"",name:""}),this.idCourse=null,this.showIframe=!1,this.iframeUrl="",this.chapterMustBeTracked=!0,this.videoCompleted=!1,this.curriculaRedirectToLearningPlan=!1,this.listenToRouteParamsChanges=!0,this.breadcrumbs=[],this.waitingList=!1,this.mode=te.o.FULL,this.modeNextState={full:te.o.COMPACT,compact:te.o.FLAT,flat:te.o.FULL},this.modeNextStateWithFolders={full:te.o.FLAT,flat:te.o.FULL},this.questionWidget={active:!1,type:"questions"},this.hasLearningPlan=!1,this.disposableSubscriptions=[],this.preserveLightbox=null,this.device=null,this.sessionDialogParams={width:500,height:240},this.inSoftDeadline=!1,this.autoPlayForcefullyDisabled=!1,this.showSlideUpPanel=!1,this.slideUpPanelConfig={learningPlanCourses:[],learningPlanID:0,learningPlanCompletePercent:0,learningPlanTitle:""},this._additionalFieldsDialogParams=new Pe.a(null),this.fabCoursePlayerCalendar="CoursePlayerCalendarBalloon",this.fabCoursePlayerDeeplink="CoursePlayerDeeplinkBalloon",this.listenForSessionIDChanges=!0,this.eSignatureSettings=x.b.getInstance().getPluginSettings("EsignatureApp"),this.isAuthenticatorAppEnabled=this.eSignatureSettings&&!!this.eSignatureSettings.auth_types.filter(e=>"authenticatorapp"===e.type&&e.enabled).length,this.isEmailAuthenticationEnabled=this.eSignatureSettings&&!!this.eSignatureSettings.auth_types.filter(e=>"email"===e.type&&e.enabled).length,this.isAuthenticatorAppConfigured=!!this.sessionInstance.authenticatorapp_pair_date,this.isEmailConfigured=!!this.sessionInstance.email,this.isCourseStarted=!1,this.showEnrollmentFieldsDialog=e=>{e.valid?this.loadCourse(String(this.currentCourseId)):this._additionalFieldsDialogParams.next(new Sl.a(e.fields,e=>{if(!e.dynamicComponents.enrollForm.valid)return void this.docLayoutService.toast.showToast({message:"invalid form enrollment additional fields",type:"error"});const t={enrollment_fields:e.dynamicComponents.enrollForm.value.enrollment_fields};this.backendService.request(`/learn/v1/enrollments/${this.course.id}/${o.a.getInstance().id}`,"PUT",t).pipe(Object(ee.a)(1)).subscribe(e=>{this.loadCourse(this.course.id),this.startPlaying()},t=>{console.error(t),e.close()},()=>{e.close()})},e=>{this.docLayoutService.toast.showToast({message:"Cannot access course if enrollment fields are incomplete",type:"error"}),e.close(),this.router.navigate(["/learn","mycourses"],mi.b)}))},this.enrollmentFields={fields:[],valid:!1}}get additionalFieldsDialogParams(){return this._additionalFieldsDialogParams.getValue()}ngOnInit(){this.store.dispatch(ga.a.destroy()),this.isOEM=this.embeddedService.isEmbedded(),this.routeMode=this.route.snapshot.data.mode,this.checkUrlFragment(),this.courseChangeSubscription=this.getCourseId().subscribe(e=>{this.checkPlayerMode(),te.i.folders=[];const t=this.validateDeeplink().subscribe(()=>{const t=()=>{this.userInteractionService.track(Al.a.COURSE_OPEN,Al.b.COURSE_PLAYER,{courseId:e}),!this.course.on_sale||this.course.enrolled.enrollment_fields_completed||"classroom"===this.course.type&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&o.a.getInstance().isInstructor()?this.loadCourse(this.course.id):this.loadEnrollmentAdditionalFields(Number(this.course.id)).subscribe(this.showEnrollmentFieldsDialog)};let{cachedCourse:i,cachedCourseResponse:s}=this.lrnCachedCourseService;void 0!==i&&i.id&&e==Number.parseInt(i.id.toString())&&null!=this.route.snapshot.paramMap.get("id_session")?(this.course=i,Object.keys(this.course).forEach(e=>{null==s.data[e]&&(s.data[e]=this.course[e])}),t(),this.store.dispatch(ga.a.loadCourseInfoSuccess(s)),setTimeout(()=>{this.lrnCachedCourseService.cachedCourse=void 0,this.lrnCachedCourseService.cachedCourseResponse=void 0},2e3)):(this.subscriptionForLoadCourseInfo=this.loadCourseInfo().subscribe(()=>{t()}),this.disposableSubscriptions.push(this.subscriptionForLoadCourseInfo))});this.disposableSubscriptions.push(t),this.courseWidgets=new ma(this.backendService,{user_id:o.a.getInstance().id,course_id:e})}),this.device=this.browserDetection.getDevice(),this.clearUpBreadcrumbItems(),this.iframeStatus$.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{e.isInit&&(this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([...this.breadcrumbs,{label:e.name,href:this.router.url}]),this.docLayoutService.actionButtons.clearActionButtons()),this.showIframe=e.isInit,this.iframeUrl=e.url,this.changeDetector.markForCheck(),this.changeDetector.detectChanges()}),this._additionalFieldsDialogParams.subscribe(e=>{e&&setTimeout(()=>this.additionalFieldsDialog.open())}),this.storeActions$.pipe(Object(f.f)(ga.b.VIDEO_COMPLETED),Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{this.videoCompleted=!0,this.redirectToLpPage&&this.redirectToLPPage()})}get showNavigationUnderChapterViewer(){return this.mode===te.o.FLAT||window.matchMedia("(max-width: 839px)").matches}get navigationMode(){return this.mode!==te.o.FLAT&&window.matchMedia("(max-width: 839px)").matches?te.o.FULL:this.mode}get isLightBoxChapter(){return this.chapterViewer&&this.chapterViewer.status&&this.chapterViewer.status===te.g.PLAYING&&this.chapterViewer.launch_params&&this.chapterViewer.launch_params.mode===gi.d.LIGHTBOX}get shouldConfigureAuthenticatorApp(){return!(!this.isAuthenticatorAppEnabled||this.isAuthenticatorAppConfigured||this.isEmailAuthenticationEnabled&&(!this.isEmailAuthenticationEnabled||this.isEmailConfigured))}get shouldConfigureEmailAuthentication(){return!(this.isAuthenticatorAppEnabled||!this.isEmailAuthenticationEnabled||this.isEmailConfigured)}get shouldConfigure2fa(){return this.shouldConfigureAuthenticatorApp||this.shouldConfigureEmailAuthentication}configure2faDialogParams(e){const t={actions:[{id:"cancel",type:"neutral",label:E.a.t("course","Leave course"),slot:"end"}]};switch(e){case"authenticatorapp":t.title=E.a.t("mobile","Configure your Authenticator App"),t.content=E.a.t("mobile","You cannot access Electronic Signature courses because your profile is not associated with the Authenticator App, Go to your \u201cMy Profile\u201d page to configure the association"),t.actions.push({id:"configure-auth-app",type:"positive",label:E.a.t("esignature","CONFIGURE AUTHENTICATOR APP"),slot:"end"});break;case"email":t.title=E.a.t("mobile","Associate an email address with your profile"),t.content=E.a.t("mobile","You cannot access Electronic Signature courses because your profile is not associated with an email address, Go to your \u201cMy Profile\u201d page to configure the association"),t.actions.push({id:"associate-email",type:"positive",label:E.a.t("esignature","ASSOCIATE YOUR EMAIL"),slot:"end"})}return t}checkPlayerMode(){this.idCourse!==jw?(jw=this.idCourse,Aw=te.o.FULL):Aw&&Aw!==te.o.FULL&&(this.mode=Aw)}checkUrlFragment(){this.route.params.subscribe(e=>{this.currentCourseId=+e.id;const t=e.lp;t&&(this.hasLearningPlan=!0,this.learningPlanId=t,this.store.dispatch(this.learningPlanActions.loadLearningPlanInfo(t)))})}getCourseId(){return new a.a(e=>{this.route.params.subscribe(t=>{if(void 0===t.id)return console.error("Called without course ID in route"),void e.error();const i=Number(t.id);this.idCourse!==i&&(this.hasLearningPlan&&this.hideLearningPlanPanel(),this.idCourse=i,e.next(i))})})}validateDeeplink(){return new a.a(e=>{let t=this.route.queryParams.subscribe(t=>{let i=void 0!==t.hash?t.hash:null,s=void 0!==t.generated_by?t.generated_by:null;if(i&&s&&null!==i&&null!=s){console.log("Detected deeplink related param changes in URL. Validating deeplink");let t=this.backendService.request("/learn/v1/courses/"+this.idCourse+"/deeplink","POST",{hash:i,generated_by:s}).subscribe(i=>{t&&t.unsubscribe(),console.log("Deeplink valid"),i.data.message&&""!=i.data.message&&this.docLayoutService.toast.showToast({message:i.data.message,type:i.data.success?"success":"error"}),i.data.success&&i.data.redirectUrl.indexOf("learn/course")>-1?(console.log("Validated a deeplink. Allowing access to the course"),e.next(!0)):(this.router.navigate([i.data.redirectUrl],mi.b),console.error("Deeplink not valid. Rejecting access"),e.error("Deeplink not valid. Rejecting access"))})}else e.next(!0)});this.disposableSubscriptions.push(t)})}courseCompletionObservable(){return this.store.select(ie.d).pipe(Object(Wt.a)(e=>!!e.course_status),fi(e=>e.course_status.status===te.d.COMPLETED),fi(e=>e.course_status.status!==te.d.COMPLETED),Object(ee.a)(1),Object(ri.a)(()=>{}))}attachCourseStoreSubscriber(e=!1,t){let i=null;return i=this.store.select(ie.d).subscribe(s=>{if(this.currentCourse=s,s.id&&parseInt(s.id,10)!=this.idCourse)console.log("Received cached information from the store. Ignoring...");else if(this.courseState=s.state,s.state==te.c.PLAYER||s.state==te.c.OVERVIEW||s.state==te.c.READY){this.course=s,this.lrnCachedCourseService.cachedCourse=s;const n=o.a.getInstance();let a,r,c,l;this.course.has_esignature_enabled&&n.is_impersonated&&e&&this.showImpersonateBlockDialog(),this.course.has_esignature_enabled&&this.course.course_status.status!==te.d.COMPLETED&&this.course.esignature_status!==te.h.SIGNED&&this.shouldConfigure2fa&&!n.is_impersonated&&0===this.docLayoutService.getDocLayoutConfig().page.commonDialogs.length&&this.docLayoutService.dialog.showCommonDialog(this.configure2faDialogParams(this.shouldConfigureAuthenticatorApp?"authenticatorapp":"email")).subscribe(e=>{switch(e.actionSuccess.next(!0),e.actionID){case"configure-auth-app":this.router.navigate(["/learn/my-profile",{authenticatorApp:!0}]);break;case"associate-email":this.router.navigate(["/learn/my-profile",{user_details:!0}]);break;case"cancel":this.router.navigate(["/learn/mycourses"])}}),this.setHierarchicalBreadcrumbs(),this.courseStatus=s.course_status;let d=0,h=0;if(this.course.sessions){const e=this.formatter.currentUtcDateTime().toString();a=this.course.sessions.filter(e=>!0===e.enrolled.is_enrolled&&!0===e.enrolled.waiting_list).length,r=this.course.sessions.filter(e=>!0===e.enrolled.is_enrolled).length,h=this.course.sessions.filter(t=>2!==this.formatter.compareDates(t.end_date,e)).length,d=this.course.sessions.length}if(c=this.toggleService.isOn(u.f.TOGGLE_VILT)&&this.course.type===qc.a.CLASSROOM?d>0&&this.courseStatus&&["waiting","subscription_to_confirm"].includes(this.courseStatus.status):(d>0||"elearning"===this.course.type)&&this.course.enrolled.waiting_list&&this.course.enrolled.is_enrolled,l=a===r&&r>0,this.waitingList=c||l,this.mode=Lw||(s.show_toc||s.state===te.c.OVERVIEW?te.o.FULL:te.o.FLAT),this.chapters=s.chapters,this.folders=s.folders,this._breadcrumbsActionButtons(this.courseState),this.course.can_enter||this.waitingList||this.router.navigate(["unauthorized"],mi.b),this.courseStatus){o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)||o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER)?o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER)&&this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course/manage")<0&&this.router.navigate(["unauthorized"],mi.b):(this.courseStatus.status&&"non_subscribed"===this.courseStatus.status&&this.router.navigate(["unauthorized"],mi.b),this.courseStatus.status&&"waiting"==this.courseStatus.status&&(this.waitingList=!0));let e=0;for(let t=0;t<this.chapters.length;t++)-1!==["completed","passed"].indexOf(this.chapters[t].status)&&e++;this.courseStatus.competed_lessons=e}s.payload&&!nt.a.isEqual(s.payload,this.currentPayload)&&(this.currentPayload=s.payload,this.store.dispatch(ga.b.loadCourseInfoSuccess(s.payload,s.isReloading,s.reloadSource))),t&&!t.closed&&t.next(!0),e&&i&&i.unsubscribe(),this.switchBreadcrumbs(this.courseState),this.checkCourseStarted()}else s.state===te.c.UNAUTHORIZED&&(console.log("Not authorized to see this course"),this.router.navigate(["unauthorized"],mi.b))}),i}loadCourseInfo(){return new a.a(e=>{this.disposableSubscriptions.push(this.attachCourseStoreSubscriber(!0,e)),this.store.dispatch(ga.a.loadCourseInfo(this.idCourse))})}switchToOverviewModeIfNeeded(){return new a.a(e=>{let t=!1,i=!1;if(this.route.params.forEach(e=>{e.id_lo&&(t=!0),e.id_session&&(i=e.id_session)}),this.course.hasOwnProperty("has_overview")&&this.course.has_overview&&!t&&"player"!=this.routeMode){let t=!1;const s=this.tabsParams.panels.length<=1,n=this.course.hasOwnProperty("has_esignature_enabled")&&!!this.course.has_esignature_enabled,a=this.course.chapters.length>0;if(s)if(n){const e=this.course.type===qc.a.CLASSROOM||this.course.type===qc.a.WEBINAR;t=a&&this.course.type===qc.a.ELEARNING||e}else t=a;if(t){let e=E.a.t("course","Content");n&&(e=this.course.chapters.filter(e=>e.type!==Gi.c.sign).length>0?E.a.t("course","Content & Authentication"):E.a.t("standard","Authentication")),this.tabsParams.panels.push({title:e,content:{params:{chapter:this.course.tree,course:this.course,current_chapter:this.currentChapter,learning_plan_id:this.learningPlanId},component:Cl}})}x.b.getInstance().isPluginActive("Share7020App")&&this.course.chapters.length>0&&this.questionWidget.active&&this.tabsParams.panels.push({title:E.a.t("standard","Questions & Answers"),content:{params:{overview:!0,widget:this.widget},component:"questions"===this.questionWidget.type?sn:fs}});let o=this.store.select(ie.m).subscribe(t=>{t.status===te.n.READY&&(console.log("Switched to overview mode"),e.next(!0),e.complete(),o&&(o.unsubscribe(),o=null))});this.disposableSubscriptions.push(o),this.store.dispatch("elearning"!=this.course.type?this.overviewActions.loadOverviewInfo(this.course.id,i):this.overviewActions.loadOvervewInfoSuccess({}))}else e.next(!0),e.complete(),"player"===this.routeMode&&this.store.dispatch(ga.a.switchMode(this.courseStates.OVERVIEW))})}handleSessionSelect(){this.route.params.subscribe(e=>{if(this.listenForSessionIDChanges){let t=e.id_session;const i=this.overview.available_sessions;if(!t&&i){const e=this.firstEnrolledSession(i);e[0]&&(t=e[0])}if(!t)return this.listenForSessionIDChanges=!1,!1;this.course.state===te.c.OVERVIEW&&i&&this.store.dispatch(this.overviewActions.changeSession(t))}})}firstEnrolledSession(e){const t=[];return e.forEach(e=>{e.is_enrolled&&t.push(e.id)}),t}handleChapterPlay(){return new a.a(e=>{let t;const i=this.route.queryParams.subscribe(e=>{e&&void 0!==e.autoplay&&(this.autoPlayForcefullyDisabled=0===Number(e.autoplay))});this.route.params.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(i=>{if(this.listenToRouteParamsChanges){let s=i.id_lo;if(i.type===te.a.SIGN.toString()&&(this.currentChapter=this.chapters[this.chapters.length-1],this.chapters.length&&this.currentChapter&&this.currentChapter.id&&(this.store.dispatch(ga.b.startPlayingSuccess(this.currentChapter.id,{chapters:this.chapters})),this.store.dispatch(ga.b.setCurrentChapter({id:this.currentChapter.id,chapters:this.chapters})))),this.autoPlayForcefullyDisabled=0===Number(i.autoplay),s=this.checkForLandingFromGlobalSearchOnSCORM(s),!s&&!this.autoPlayForcefullyDisabled){if(this.course.id.toString()===this.idCourse.toString()&&this.course.has_autoplay&&this.course.state===te.c.PLAYER){let t=null;if(this.course.chapters.forEach(e=>{null==t&&-1===["completed","passed"].indexOf(e.status)&&(t=e)}),null!==t){const i="/learn/course/"+this.idCourse+"/play/"+t.id+"/"+t.slug_name;return e.next(!0),void this.router.navigate(this.learningPlanId?[i,{lp:this.learningPlanId}]:[i],mi.b)}}e.next(!0),this.listenToRouteParamsChanges=!1}const n=s&&!t;(s!==t||n)&&(t=s,this.coursePlayerContainer&&this.coursePlayerContainer.nativeElement.querySelector(".chapter-viewer__wrapper")&&this.chapterLoaded(),this.startPlayingObserver(s).subscribe(()=>{e.next(!0),e.complete()}))}}),i&&i.unsubscribe()})}checkForLandingFromGlobalSearchOnSCORM(e){const t=e+":";for(let i=0;i<this.course.chapters.length;i++){const s=this.course.chapters[i],n=s.id.toString(),a="completed"!==s.status&&"passed"!==s.status&&"failed"!==s.status&&"attempted"!==s.status,o=!!n.match(`^${t}`);if(s.id==e)return s.id;if(null!=e&&a&&o)return this.router.navigate(["/learn/course/"+this.idCourse+"/play/"+s.id+"/"+s.slug_name],mi.b),s.id;if(o)return s.id;if(this.course.chapters.length-1===i)return e}}setHierarchicalBreadcrumbs(){const e=this.course?{label:this.course.name,href:this.router.url}:null,t=this.hasLearningPlan&&this.learningPlanModel&&this.learningPlanModel.name?{label:this.learningPlanModel.name,href:`/learn/lp/${this.learningPlanId}/${this.learningPlanModel.slug_name}`}:null,i={label:Si.a.myCoursesAndLearningPlans,href:"/learn/mycourses"},s=[];if(i&&s.push(i),t&&s.push(t),"classroom"==this.course.type&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&this.route.snapshot.data.mode==te.c.PLAYER){let e={label:this.course.name,href:`/learn/course/${this.course.id}`};null!=this.learningPlanId&&(e.href=`/learn/course/${this.course.id}/${this.course.name}`,e.routeParameters={lp:this.learningPlanId});const t=[e,{label:E.a.t("standard","Lessons"),href:this.router.url}];s.push(...t)}else e&&s.push(e);this.breadcrumbs=s,this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs(s)}redirectToLPPage(){this.router.navigate(["learn/lp/"+this.learningPlanId+"/"+this.learningPlanModel.slug_name],mi.b)}attachGenericReduxListeners(){let e;this.tabsParams={panels:[{title:E.a.t("app7020","Overview"),content:"Loading ..."}]};const t=this.store.select(ie.k).subscribe(t=>{var i,s;this.learningPlanModel=t,e!==t.state&&(e=t.state,e===te.m.VIEWING&&this.courseState!==te.c.INITIALIZING&&(this.hasLearningPlan&&this.learningPlanModel.courses&&this.learningPlanModel.courses.length>0&&!this.showSlideUpPanel&&(this.loadLearningPlanPanel(this.learningPlanModel),this.curriculaRedirectToLearningPlan=this.learningPlanModel.curricula_redirect_to_learning_plan),(null===(i=this.learningPlanModel)||void 0===i?void 0:i.complete_percent)&&(this.slideUpPanelConfig.learningPlanCompletePercent=null===(s=this.learningPlanModel)||void 0===s?void 0:s.complete_percent),this.switchBreadcrumbs(this.courseState)),this.setHierarchicalBreadcrumbs())}),i=this.store.select(ie.m).subscribe(e=>{e.status==te.n.REQUEST_REJECTED&&(console.log("Overview mode rejected"),this.router.navigate(["unauthorized"],mi.b)),this.overview=e,this.overview.current_session&&(this.unenrollmentButtonService.setCurrentSession(this.overview.current_session),this.selfUnenrollParameters.currentSession=this.overview.current_session,this.shouldAddSelfUnenrollButton()?this.unenrollmentButtonService.addSelfUnenrollmentButton():this.unenrollmentButtonService.removeSelfUnenrollmentButton()),e.status==te.n.READY&&(this.tabsParams.panels[0].content={params:{course:this.course,overview:this.overview,current_session:this.overview.current_session,available_sessions:this.overview.available_sessions,enrolled_sessions:this.overview.enrolled_sessions,courseWidgets:this.courseWidgets,iframeStatus$:this.iframeStatus$},component:Rc}),this.changeCourseDetails(e)}),s=this.courseCompletionObservable().subscribe(()=>{this.userInteractionService.track(Al.a.COURSE_COMPLETE,Al.b.COURSE_PLAYER,{courseId:this.idCourse})}),n=this.store.pipe(Object(v.p)(ie.e),Object(wi.a)(this.store.select(ie.k))).subscribe(([e,t])=>{var i,s,n;e&&(this.redirectToLpPage=this.hasLearningPlan&&this.learningPlanId&&t.curricula_redirect_to_learning_plan&&"completed"===e.status&&e.status_changed,this.redirectToLpPage&&"youtube"!==(null===(i=this.currentChapter)||void 0===i?void 0:i.type)&&"video"!==(null===(s=this.currentChapter)||void 0===s?void 0:s.type)?setTimeout(()=>{this.redirectToLPPage()},2e3):this.redirectToLpPage&&"video"===(null===(n=this.currentChapter)||void 0===n?void 0:n.type)&&this.videoCompleted&&this.redirectToLPPage())});this.store.pipe(Object(v.p)(ie.b),Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{this.chapters=e,this.checkNextPrevButtons(),this.changeDetector.markForCheck()}),this.disposableSubscriptions.push(s),this.disposableSubscriptions.push(i),this.disposableSubscriptions.push(this.attachCourseStoreSubscriber(!1,null)),this.disposableSubscriptions.push(t),this.disposableSubscriptions.push(n)}attachCoursePlayerSubscription(){const e=this.store.select(ie.c).subscribe(e=>{null!=e.status&&(nt.a.isEmpty(e.current_chapter)||void 0===e.current_chapter||(nt.a.isEmpty(this.currentChapter)||this.currentChapter.id===e.current_chapter.id||(clearInterval(this.chapterNavigationAvailabilityInterval),this.chapterNavigationAvailabilityInterval=null),this.currentChapter=e.current_chapter,e.hasOwnProperty("preserve_lightbox")&&(console.log("Chapter preserving lightbox: ",e.preserve_lightbox),this.preserveLightbox=e.preserve_lightbox),this.store.dispatch(ga.b.loadCourseChapters(this.currentCourseId)),"authoring"===this.currentChapter.type&&(this.preserveLightbox=!0)),e.last_played_chapter&&!nt.a.isEqual(this.lastPlayedChapter,e.last_played_chapter)&&(this.lastPlayedChapter=e.last_played_chapter),e.status==te.b.UNAUTHORIZED&&(console.error("Not authorized to play chapter "),this.router.navigate(["unauthorized"],mi.b)),this.status=e.status,this.chapterViewer=e.chapter_viewer,this.navigatingBack=e.navigating_back,this.checkNextPrevButtons(),e.status==te.b.PLAY_REJECTED&&1004!=this.chapterViewer.launch_params.code&&(this.docLayoutService.toast.showToast({message:E.a.t("standard","Something went wrong. Please, try again later!"),type:"error"}),this.router.navigate(["unauthorized"],mi.b)))});this.disposableSubscriptions.push(e)}checkNextPrevButtons(){if(this.nextChapter={},this.prevChapter={},!nt.a.isEmpty(this.currentChapter))for(let e=0;e<this.chapters.length;e++)if(this.chapters[e].id==this.currentChapter.id){this.prevChapter=nt.a.isEmpty(this.chapters[e-1])?{}:this.chapters[e-1],this.nextChapter=nt.a.isEmpty(this.chapters[e+1])?{}:this.chapters[e+1],this.navigatingBack&&this.preserveLightbox&&this.nextChapter.hasOwnProperty("locked")&&delete this.nextChapter.locked;break}}changeSession(e){void 0!==e&&this.store.dispatch(this.overviewActions.changeSession(e))}switchBreadcrumbs(e){let t=null,i=()=>{this.store.dispatch(ga.a.switchMode(e)),this.router.navigate(["learn/course/"+this.course.id+"/"+this.course.slug_name])},s="course_"+this.course.id;if(!this.course.has_overview)return t=E.a.t("standard","Back to My Courses"),i=()=>{this.router.navigate(["learn/mycourses"])},s="my_courses",this.hasLearningPlan&&this.learningPlanModel.name.length>0&&(t=E.a.t("standard","Back to {name}",{name:this.learningPlanModel.name}),i=()=>{this.router.navigate(["learn/lp/"+this.learningPlanId+"/"+this.learningPlanModel.slug_name])},s="lp_"+this.learningPlanId),!1;e===te.c.PLAYER?(t=E.a.t("standard","Back to course overview"),s="overview_"+this.course.id):e===te.c.OVERVIEW&&(this.hasLearningPlan&&this.learningPlanModel.name.length>0?(t=E.a.t("standard","Back to {name}",{name:this.learningPlanModel.name}),i=()=>{this.router.navigate(["learn/lp/"+this.learningPlanId+"/"+this.learningPlanModel.slug_name])},s="lp_"+this.learningPlanId):(t=E.a.t("standard","Back to My Courses"),i=()=>{this.router.navigate(["learn/mycourses"])},s="my_courses"))}rateChange(e){this.store.dispatch(ga.a.rateCourse(this.course.id,e))}loadEnrollmentAdditionalFields(e){const t=o.a.getInstance().id,i=this.backendService.request("/manage/v1/enrollment_fields","GET",{course_id:e,visible_to_user:!0}).pipe(Object(ri.a)(e=>e.data.items)),s=this.backendService.request(`/learn/v1/enrollments/${e}/${t}`,"GET").pipe(Object(ri.a)(e=>e.data.records.enrollment_fields));return Object(Di.a)(i,s).pipe(Object(yi.a)(([e,t])=>{const i=e.filter(e=>"1"===e.mandatory),s=0===i.map(e=>t.hasOwnProperty(e.id)&&""!==t[e.id]).filter(e=>!e).length;return Object(xi.a)({fields:e,valid:!(0===t.length&&i.length>0||!s)})}),Object(Ci.a)(e=>{this.enrollmentFields=e}))}startPlaying(e){if(!this.currentChapter||nt.a.isEmpty(this.currentChapter)){let e=nt.a.head(this.chapters);e&&(this.learningPlanId?this.router.navigate(["/learn/course/"+this.idCourse+"/play/"+e.id+"/"+e.slug_name,{lp:this.learningPlanId}],mi.b):(!this.toggleService.isOn(u.f.TOGGLE_VILT)&&"classroom"!==this.course.type||this.toggleService.isOn(u.f.TOGGLE_VILT))&&this.router.navigate(["/learn/course/"+this.idCourse+"/play/"+e.id+"/"+e.slug_name],mi.b))}else{let t=this.startPlayingObserver(e).subscribe();this.disposableSubscriptions.push(t)}}startPlayingObserver(e){return new a.a(t=>{this.subscriptionCurrentPlayingChapter&&this.subscriptionCurrentPlayingChapter.unsubscribe(),this.subscriptionCurrentPlayingChapter=this.store.select(ie.c).subscribe(i=>{!nt.a.isEmpty(e)&&i.current_chapter&&String(i.current_chapter.id)!==e||(i.status!=te.b.REQUEST_FOR_PLAY&&i.status!=te.b.READY||(this.currentChapter=i.current_chapter),i.current_chapter&&(i.status===te.b.READY||i.status===te.b.PLAYING)&&(console.log("Chapter information for chapter "+i.current_chapter.id+" loaded from API"),this.checkPlayerMode(),Object(Ti.i)(this.courseNavigationChildren).then(e=>{void 0!==this.courseNavigation&&this.updateScroll()}),t.next(!0)),e||(e=i.current_chapter&&i.current_chapter.hasOwnProperty("id")?i.current_chapter.id:nt.a.head(this.course.chapters).id))}),this.courseState==te.c.OVERVIEW&&(console.log("Switching to Player mode"),this.store.dispatch(ga.a.switchMode(te.c.OVERVIEW)));let i=this.currentChapter&&String(e)===String(this.currentChapter.id);if(this.course.hasOwnProperty("isReloading")&&!0===this.course.isReloading&&this.chapterViewer&&this.chapterViewer.status!==te.g.ACTIVITY_COMPLETED&&this.chapterViewer.status!==te.g.COURSE_COMPLETED&&i)this.course.isReloading=!1,this.store.dispatch(ga.b.startPlayingSuccess(e,this.chapters));else{const t={};this.hasLearningPlan&&this.learningPlanId&&(t.learning_plan_id=this.learningPlanId),this.device&&(t.device=this.device),this.store.dispatch(ga.b.startPlaying({id:e,params:t,chapters:this.chapters,preserve_lightbox:!1,course_id:this.course.id}))}this.docLayoutService.actionButtons.clearActionButtons(),this._breadcrumbsActionButtons(this.courseState),this.switchBreadcrumbs(this.courseState)})}chapterCompleted(e){this.store.dispatch(ga.a.reloadCoursePlayer(this.course.id,e)),this.learningPlanId&&this.store.dispatch(this.learningPlanActions.loadLearningPlanInfo(this.learningPlanId))}chapterLoaded(e){this.coursePlayerContainer&&this.coursePlayerContainer.nativeElement.querySelector(".chapter-viewer__wrapper")&&(this.coursePlayerContainer.nativeElement.querySelector(".chapter-viewer__wrapper").style.minHeight=e&&e.height?e.height:"",this.courseNavigation&&this.updateScroll())}updateScroll(){this.courseNavigation.calculateElementHeight(),this.courseNavigation.updateScroll()}shouldAddSelfUnenrollButton(){let e=!1;return(this.course.can_self_unenroll&&0===this.course.learningplans.length||this.overview&&this.overview.current_session&&this.overview.current_session.is_enrolled&&this.course.can_session_self_unenroll)&&(e=!0),e}loadCourse(e){this.backendService.request(`/learn/v1/courses/${e}/widgets`,"GET").pipe(Object(ri.a)(e=>e.data)).subscribe(e=>{for(let t=0;t<e.widgets.length;t++){const i=e.widgets[t];"questions"!==i.content_type&&"questions-new"!==i.content_type||(x.b.getInstance().isPluginActive("Share7020App")&&this.course.chapters.length>0&&this.tabsParams.panels.push({title:E.a.t("standard","Questions & Answers"),content:{params:{overview:!0,widget:i},component:"questions"===i.content_type?sn:fs}}),this.questionWidget.active=!0,this.questionWidget.type=i.content_type,this.widget=i)}}),this.courseWidgets=new ma(this.backendService,{user_id:o.a.getInstance().id,course_id:e}),this.unsubScribeDisposableSubscriptions(),this.disposableSubscriptions=[],this.attachCoursePlayerSubscription(),this.attachGenericReduxListeners(),this.switchToOverviewModeIfNeeded().subscribe(()=>{this.handleSessionSelect();const e=this.handleChapterPlay().subscribe(()=>{});this.loader.hideWiseLoader(),this.disposableSubscriptions.push(e)})}_breadcrumbsActionButtons(e){if(!this.course)return;const t="classroom"===this.course.type||"webinar"===this.course.type,i=this.folders&&this.folders.length>0?this.modeNextStateWithFolders:this.modeNextState;let s=[];const n=this.course.can_session_change;if(e===te.c.PLAYER&&this.chapters.length>0){const e=this;s.push({properties:{icons:["mode-"+i[this.mode]+" bg-accent bg-circle-button"],tooltipText:E.a.t("course","Table of Contents"),textClass:"mdl-cell--hide-tablet mdl-cell--hide-phone"},onClick:t=>{e.mode=i[this.mode],Aw=this.mode,Lw=this.mode,this.changeDetector.detectChanges(),t.properties.icons=["mode-"+i[this.mode]+" bg-accent bg-circle-button"],this.chapterLoaded()}})}const a=this.coursePlayerCalendarService.getCalendarButtonForCourse(this.course,this.fabCoursePlayerCalendar);a&&(a.onClick=e=>this.closeFabBalloons(e),s.push(a));const o=this.deeplinkService.getDeeplinkButtonForCourse(this.course,this.fabCoursePlayerDeeplink,this.currentChapter?{id:this.currentChapter.id,slug:this.currentChapter.slug_name}:null);if(o&&(o.onClick=e=>this.closeFabBalloons(e),s.push(o)),t&&n&&s.push({properties:{icons:["account","swap"],tooltipText:E.a.t("standard","Change Session")},onClick:()=>{this.changeSessionParameters={sessions:this.course.sessions,available_enroll:this.course.available_seats,idCourse:Number(this.course.id),useLocationTimezone:"classroom"===this.course.type},this.changeSessionDialog.show()}}),this.courseStatus.status&&"non_subscribed"!==this.courseStatus.status&&(this.course.can_session_self_unenroll||this.course.can_self_unenroll)&&(this.selfUnenrollForm=this.fb.group({enrollment_type:[""]}),this.unenrollmentButtonService.initDependencies(this.course,this.chapterMustBeTracked,this.selfUnenrollForm),this.selfUnenrollParameters=Object.assign(Object.assign({},this.selfUnenrollParameters),{course:this.course,chapterMustBeTracked:this.chapterMustBeTracked,selfUnenrollForm:this.selfUnenrollForm}),this.shouldAddSelfUnenrollButton())){let e;this.overview&&this.overview.current_session&&(this.unenrollmentButtonService.setCurrentSession(this.overview.current_session),this.selfUnenrollParameters.currentSession=this.overview.current_session),void 0!==this.selfUnenrollParameters.course&&(e={properties:{icons:["account","block-alt"],tooltipText:E.a.t("course","_SELF_UNSUBSCRIBE")},onClick:()=>{this.selfUnenrollDialog.show(),setTimeout(()=>{this.selfUnenrollDialogConfirmButton.disabled=!0})},key:"unenrollment"}),e&&(s.push(e),this.unenrollmentButtonService.buttonAdded=!0)}x.b.getInstance().isPluginActive("Share7020App")&&s.push({properties:{icons:["playlist-plus"],tooltipText:"Add to playlist"},onClick:()=>{const e=E.a.t("standard","Add course to playlist");this.pageService.rightPanel.setWidth(500).setTitle(e).setContent({params:{idContent:this.currentCourse.id,typeContent:we.a.COURSE,itemTitle:this.currentCourse.name,itemLanguage:this.currentCourse.lang_code,itemPreview:this.currentCourse.thumbnail,addingCourse:!0},component:Ii.a}).open()}}),this.getAdminActions().forEach(e=>{s.push(e)}),this.docLayoutService.actionButtons.setActionButtons(s),void 0!==typeof this.course.social_settings&&this.course.social_settings.networks&&this.docLayoutService.actionButtons.setSocialButtons(this.course.social_settings.networks)}onChangeSessionConfirm(){this.changeSessionRef.changeSessionRequest().then(()=>{this.changeSessionDialog.hide()})}onSelfUnenrollConfirm(){this.selfUnenrollDialogComponent.onSelfUnenrollConfirm(this.selfUnenrollDialog)}getAdminActions(){let e=[],t=o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),i=o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER),s="instructor"==this.courseStatus.level,n=this.course.on_sale,a=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course/view")>=0,r=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course/update")>=0,c=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course/manage")>=0,l=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("classroom-sessions/view")>=0,d=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("enrollment/view")>=0,h=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course-management/beta")>=0,p=!1,m=!1,g=!1,b=t||s||c,f=t||r,v=t&&n,_=!1;const w=h&&this.toggleService.isOn(u.f.TOGGLE_NEW_COURSE_ADVANCED_SETTINGS);if("elearning"==this.course.type?(p=t||s||r,m=t||s||i&&c&&d):(_=s||t||c,p=r&&(!i||l)||s,g=s||t||a),f&&w&&e.push(this.setAdminButtonProperties()),"elearning"==this.course.type)p&&e.push(this.setAdminButtonTrainingMaterials(h)),m&&e.push(this.setAdminButtonElearningEnrollment(h)),b&&e.push(this.setAdminButtonReports(h));else if("classroom"==this.course.type||"webinar"==this.course.type)if(this.toggleService.isOn(u.f.TOGGLE_VILT)&&"instructor"==this.courseStatus.level&&"classroom"==this.course.type){let s=!!this.course.sessions&&this.course.sessions.some(e=>e.is_session_instructor),n=!!this.course.sessions&&this.course.sessions.some(e=>e.is_event_instructor);if(_=_&&(s||n),p=p&&s,g=g&&s,b=b&&s,_){(t||i&&d)&&e.push(this.setAdminButtonIltEnrollment());const s={queryParams:{[Ll.b]:Ll.a.sessions}};e.push({tooltipText:E.a.t("standard","Sessions"),onClick:()=>{this.router.navigate(["learn","instructor","course",this.course.id],s)},icons:["calendar-note"]})}if(p){const t={queryParams:{[Ll.b]:Ll.a.trainingMaterial}};e.push({tooltipText:E.a.t("standard","Training materials"),onClick:()=>{this.router.navigate(["learn","instructor","course",this.course.id],t)},icons:["view-list-alt"]})}if(g){const t={queryParams:{[Ll.b]:Ll.a.statistic}};e.push({tooltipText:E.a.t("stats","Session statistics"),onClick:()=>{this.router.navigate(["learn","instructor","course",this.course.id],t)},icons:["chart-donut"]})}if(b){const t={queryParams:{[Ll.b]:Ll.a.reports}};e.push({tooltipText:E.a.t("standard","_REPORTS"),onClick:()=>{this.router.navigate(["learn","instructor","course",this.course.id],t)},icons:["chart"]})}}else(!this.toggleService.isOn(u.f.TOGGLE_VILT)&&_||_&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&"webinar"==this.course.type)&&e.push(this.setAdminButtonIltWebinarSessionEnrollment(h)),this.toggleService.isOn(u.f.TOGGLE_VILT)&&_&&"classroom"==this.course.type&&e.push(this.setAdminButtonIltEnrollment(),this.setAdminButtonIltSession()),p&&e.push(this.setAdminButtonTrainingMaterials(h)),g&&e.push(this.setAdminButtonSessionReports(h)),b&&e.push(this.setAdminButtonReports(h));f&&!w&&e.push(this.setAdminButtonAdvancedProperties(h)),v&&e.push(this.setAdminButtonManageSeats(h)),f&&!w&&(ki.a.getInstance().set("course_edit_redirect_to",this.router.url),e.push(this.setAdminButtonCourseProperties(h)));let y=[];return e.length>0&&(y=[{properties:{icons:["more"],tooltipText:E.a.t("standard","Related Sections")},subitems:e}]),y}loadLearningPlanPanel(e){e&&(this.showSlideUpPanel=!0,this.slideUpPanelConfig={learningPlanCourses:e.courses,learningPlanID:e.id,learningPlanCompletePercent:e.complete_percent,learningPlanTitle:e.name})}hideLearningPlanPanel(){this.showSlideUpPanel=!1,this.slideUpPanelConfig={learningPlanCourses:[],learningPlanID:0,learningPlanCompletePercent:0,learningPlanTitle:""}}unsubScribeDisposableSubscriptions(){for(const t of this.disposableSubscriptions)try{t.unsubscribe()}catch(e){}}changeCourseDetails(e){if(void 0===e.course_details_changed||!e.course_details_changed.course_id)return;const t=e.course_details_changed.course_id;this.store.dispatch(ga.a.loadCourseInfo(t)),this.store.dispatch(this.overviewActions.loadOverviewInfo(t))}clearUpBreadcrumbItems(){this.router.events.pipe(Object(bt.a)(this.ngUnsubscribe),Object(Wt.a)(e=>e instanceof s.e)).subscribe(e=>{const t=this.router.url.split("/").filter(e=>Boolean(e)),i=e.url.split("/").filter(e=>Boolean(e)),s=["learn","course",String(this.currentCourseId)];s.every((e,i)=>e===t[i])&&s.every((e,t)=>e===i[t])||this.docLayoutService.actionButtons.clearActionButtons()})}showImpersonateBlockDialog(){this.docLayoutService.dialog.showCommonDialog({title:E.a.t("standard","You Cannot Access E-Signature Courses"),content:E.a.t("standard","For security reasons, you cannot access E-Signature courses while impersonating another user"),actions:[{id:"cancel",type:"neutral",label:E.a.t("course","Leave course"),slot:"end"}]}).subscribe(e=>{e.actionSuccess.next(!0),this.router.navigate(["/learn/mycourses"])})}setAdminButtonElearningEnrollment(e){return{tooltipText:E.a.t("standard","Enrollments"),onClick:()=>{let t=[];t=this.isOEM?e?this.getAdminNewCourseManagementRoute("enrollments"):["/legacy/admin/index.php?r=courseManagement/enrollment&id="+this.course.id+"&course_id="+this.course.id]:this.getTabRoute(e,"enrollments"),this.router.navigate(t)},icons:["accounts"]}}setAdminButtonTrainingMaterials(e){return{tooltipText:E.a.t("standard","Training materials"),onClick:()=>{if(this.isOEM){const t=e?this.getAdminNewCourseManagementRoute("training_materials"):"elearning"==this.course.type?["/legacy/lms/index.php?r=player/training&course_id="+this.course.id+"&ref_src=admin"]:["/legacy/lms/index.php?r="+("classroom"==this.course.type?"ClassroomApp":"webinar")+"/session/manageLearningObjects&course_id="+this.course.id];this.router.navigate(t)}else if("elearning"===this.course.type){const t=this.getTabRoute(e,"training_materials");this.router.navigate(t)}else{const t=e?this.getAdminNewCourseManagementRoute("training_materials"):["/legacy/lms/index.php?r="+("classroom"==this.course.type?"ClassroomApp":"webinar")+"/session/manageLearningObjects&course_id="+this.course.id];this.router.navigate(t)}},icons:["view-list-alt"]}}setAdminButtonReports(e){return{tooltipText:E.a.t("standard","_REPORTS"),onClick:()=>{if(this.isOEM){const t=e?this.getAdminNewCourseManagementRoute("reports"):["/legacy/lms/index.php?r=player/report&course_id="+this.course.id];this.router.navigate(t)}else if("elearning"===this.course.type){const t=this.getTabRoute(e,"reports");this.router.navigate(t.length?t:["/legacy/lms/index.php?r=player/report&course_id="+this.course.id])}else{const t=e?this.getAdminNewCourseManagementRoute("reports"):["/legacy/lms/index.php?r=player/report&course_id="+this.course.id];this.router.navigate(t)}},icons:["chart"]}}setAdminButtonAdvancedProperties(e){return{tooltipText:E.a.t("standard","Settings"),onClick:()=>{const t=e?this.getAdminNewCourseManagementRoute("advanced_settings"):["/legacy/lms/index.php?r=player/coursesettings&course_id="+this.course.id];this.router.navigate(t)},icons:["settings"]}}setAdminButtonProperties(){return{tooltipText:E.a.t("standard","Properties"),onClick:()=>{const e=this.getAdminNewCourseManagementRoute("properties");this.router.navigate(e)},icons:["settings"]}}setAdminButtonManageSeats(e){return{tooltipText:E.a.t("course","Manage Seats"),onClick:()=>{const t=e?this.getAdminNewCourseManagementRoute("seats"):["/legacy/admin/index.php?r=courseManagement/manageSeats&id="+this.course.id];this.router.navigate(t)},icons:["seat"]}}setAdminButtonSessionReports(e){return{tooltipText:E.a.t("stats","Session statistics"),onClick:()=>{const t=e?this.getAdminNewCourseManagementRoute("session_statistics"):["/legacy/admin/index.php?r=reportManagement/"+("classroom"==this.course.type?"classroomCourseReport":"webinarCourseReport")+"&course_id="+this.course.id];this.router.navigate(t)},icons:["chart-donut"]}}setAdminButtonIltWebinarSessionEnrollment(e){return{tooltipText:E.a.t("classroom","Sessions and Enrollments"),onClick:()=>{const t=e?this.getAdminNewCourseManagementRoute("sessions"):["/legacy/lms/index.php?r=player/training/"+("classroom"==this.course.type?"session":"webinarSession")+"&course_id="+this.course.id];this.router.navigate(t)},icons:["accounts"]}}setAdminButtonIltSession(){return{tooltipText:E.a.t("standard","Sessions"),onClick:()=>{const e=this.getAdminNewCourseManagementRoute("sessions");this.router.navigate(e)},icons:["calendar-note"]}}setAdminButtonIltEnrollment(){return{tooltipText:E.a.t("standard","Enrollments"),onClick:()=>{const e=this.getAdminNewCourseManagementRoute("enrollments");this.router.navigate(e)},icons:["accounts"]}}setAdminButtonCourseProperties(e){return{tooltipText:E.a.t("course","Course properties"),onClick:()=>{const t=e?this.getAdminNewCourseManagementRoute("properties"):["legacy/admin/index.php?r=courseManagement/index&id="+this.course.id+"&open_modal=edit"];this.router.navigate(t)},icons:["edit"]}}getAdminNewCourseManagementRoute(e){return["/course/edit/"+this.course.id,{tab:e}]}getInstructorOverviewRoute(e){return["/learn/course/"+this.course.id+"/instructor-overview",{tab:e}]}getTabRoute(e,t){let i=o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),s=[];return"instructor"!=this.courseStatus.level||i?e&&(s=this.getAdminNewCourseManagementRoute(t)):s=this.getInstructorOverviewRoute(t),s}closeFabBalloons(e){const t=[this.fabCoursePlayerCalendar,this.fabCoursePlayerDeeplink];this.pageService.balloons.filter(e=>t.includes(e.cache_prefix)).map(t=>{t.instance.balloonCacheItem.prefix!==e.baloon.balloonCacheItem.prefix&&t.instance.onCloseBalloonClick.emit(!0)})}ngOnDestroy(){this.userInteractionService.track(Al.a.COURSE_CLOSE,Al.b.COURSE_PLAYER,{courseId:this.idCourse}),this.subscriberCourse&&this.subscriberCourse.unsubscribe(),this.courseChangeSubscription&&this.courseChangeSubscription.unsubscribe(),this.subscriptionCurrentPlayingChapter&&this.subscriptionCurrentPlayingChapter.unsubscribe(),this.unsubScribeDisposableSubscriptions(),this.store.dispatch(ga.a.destroy()),this.ngUnsubscribe.next(!0),this.ngUnsubscribe.complete(),this.hasLearningPlan&&this.hideLearningPlanPanel(),this.chapterNavigationAvailabilityInterval&&clearInterval(this.chapterNavigationAvailabilityInterval),super.ngOnDestroy()}checkCourseStarted(){if(this.course.course_date_start&&"0000-00-00 00:00:00"!==this.course.course_date_start){const e=new Kt.a(this.course.course_date_start).formatTimezoned("YYYY-MM-DD",Object(Zt.j)()),t=(new Kt.a).formatTimezoned("YYYY-MM-DD",Object(Zt.j)());this.isCourseStarted=e<=t}else this.isCourseStarted=!0}}return e.\u0275fac=function(t){return new(t||e)(c.dc(v.d),c.dc(ga.c),c.dc(ga.e),c.dc(s.h),c.dc(s.a),c.dc(O.a),c.dc(S.a),c.dc(c.i),c.dc(jl.a),c.dc(Ke.d),c.dc(Ml),c.dc(Fl.a),c.dc(ea.a),c.dc(ti.b),c.dc(Al.c),c.dc(v.a),c.dc(Rl.a),c.dc(M.a),c.dc(u.g),c.dc(Nl.a),c.dc(f.a),c.dc(Vc))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(c.md(K_,1),c.md(X_,1),c.md(J_,1),c.md(Z_,1),c.md(ew,1),c.md(tw,1),c.md(iw,1),c.md(sw,1),c.md(X_,1)),2&e){let e;c.Qc(e=c.sc())&&(t.additionalFieldsDialog=e.first),c.Qc(e=c.sc())&&(t.courseNavigation=e.first),c.Qc(e=c.sc())&&(t.coursePlayerContainer=e.first),c.Qc(e=c.sc())&&(t.changeSessionDialog=e.first),c.Qc(e=c.sc())&&(t.changeSessionRef=e.first),c.Qc(e=c.sc())&&(t.selfUnenrollDialog=e.first),c.Qc(e=c.sc())&&(t.selfUnenrollDialogComponent=e.first),c.Qc(e=c.sc())&&(t.selfUnenrollDialogConfirmButton=e.first),c.Qc(e=c.sc())&&(t.courseNavigationChildren=e)}},features:[c.Lb([Ml]),c.Jb],decls:4,vars:4,consts:[["class","player-wrapper",4,"ngIf"],["class","player-wrapper",3,"ngClass",4,"ngIf"],[3,"learningPlanID","learningPlanCourses","learningPlanTitle","learningPlanCompletePercent",4,"ngIf"],[3,"id","width","height","title","content","type","actions","confirmation_check_text","show_confirmation_check",4,"ngIf"],[1,"player-wrapper"],["id","iframe-container-com"],["title","community","allow","microphone *;camera *;fullscreen *",1,"course-player-iframe",3,"src"],[1,"player-wrapper",3,"ngClass"],["class","course course-waiting-list",4,"ngIf"],[4,"ngIf"],[1,"dialog-waiting-list"],["changeSessionDialog",""],[3,"size"],["selfUnenrollDialog",""],[1,"course","course-waiting-list"],[3,"course"],["class","course-player mdl-wrapper",4,"ngIf"],["class","course-overview",4,"ngIf"],[1,"course-player","mdl-wrapper"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],[1,"chapter-info__wrapper","bg-white"],[1,"chapter-info__body","bg-white","content-index","empty-course-dialog"],[1,"empty-course-icon"],[1,"no-chapters-message"],["class","mdl-grid",4,"ngIf"],[1,"mdl-grid","course-player-grid"],[1,"mdl-cell--12-col"],["class","mdl-grid course-player-elements__wrapper mdl-cell--12-col",4,"ngIf"],["class","partner-wrapper",4,"ngIf"],[3,"widgetsDataSource","style",4,"ngIf"],[1,"mdl-layout-spacer"],[1,"text-white","bg-warning","mdl-cell","mdl-cell--12-col","soft-deadline-container"],[1,"fa","fa-exclamation-triangle"],[1,"contact-administrator","text-grey-mid"],[1,"mdl-grid","course-player-elements__wrapper","mdl-cell--12-col"],["coursePlayerContainer",""],[1,"mdl-grid","course-player-elements__main","mdl-cell",3,"ngClass"],[1,"mdl-cell--12-col","course-player-elements__chapter-block"],[3,"current_chapter","course_status","course","chapter_viewer","next_chapter","prev_chapter","chapter_must_be_tracked","lastPlayedChapter","chapters","preserve_lightbox","device","learning_plan_id","isCourseStarted","rate","play","completed","loaded","closeLightbox"],["class","mdl-cell--12-col course-player-elements__small-block",4,"ngIf"],["class","mdl-cell course-player-elements__navigation mdl-cell--hide-tablet mdl-cell--hide-phone",3,"ngClass",4,"ngIf"],[1,"mdl-cell--12-col","course-player-elements__small-block"],[1,"course-navigation",3,"mode","current_chapter","next_chapter","prev_chapter","course_status","chapter_viewer","course","chapters","folders","courseState","learning_plan_id","isCourseStarted","rate","play"],[3,"course","current_chapter","course_status","isCourseStarted","rate","play",4,"ngIf"],[3,"course","current_chapter","course_status","isCourseStarted","rate","play"],[1,"mdl-cell","course-player-elements__navigation","mdl-cell--hide-tablet","mdl-cell--hide-phone",3,"ngClass"],["courseNavigation",""],[1,"partner-wrapper"],[3,"widgetsDataSource"],[1,"course-overview"],["class","mdl-wrapper",4,"ngIf"],[3,"course","course_status","current_session","enrolled_sessions","mode","current_chapter","next_chapter","prev_chapter","chapters","courseState","isCourseStarted","rate","play","changeSession"],["class","overview-tabs-wrapper bg-white",4,"ngIf"],[1,"mdl-wrapper"],[1,"overview-tabs-wrapper","bg-white"],[3,"panels","style","reInitTabsOnChange",4,"ngIf"],[3,"panels","reInitTabsOnChange"],[3,"course","overview","available_sessions"],[3,"sessions","available_enroll","idCourse","useLocationTimezone",4,"ngIf"],[3,"label","trigger"],[3,"sessions","available_enroll","idCourse","useLocationTimezone"],["changeSession",""],[3,"course","form_control","current_session","showCheckbox","confirmationToggle"],["selfUnenrollDialogComponent",""],[3,"type","label","trigger"],["selfUnenrollDialogConfirmButton",""],[3,"learningPlanID","learningPlanCourses","learningPlanTitle","learningPlanCompletePercent"],[3,"id","width","height","title","content","type","actions","confirmation_check_text","show_confirmation_check"],["additionalFieldsDialog",""]],template:function(e,t){1&e&&(c.dd(0,nw,3,1,"div",0),c.dd(1,Ew,10,7,"div",1),c.dd(2,Pw,1,4,"slideup-panel",2),c.dd(3,Mw,2,9,"dialog-component",3)),2&e&&(c.Dc("ngIf",t.showIframe),c.Mb(1),c.Dc("ngIf",!t.showIframe),c.Mb(1),c.Dc("ngIf",t.showSlideUpPanel),c.Mb(1),c.Dc("ngIf",t.additionalFieldsDialogParams))},directives:[Ae.p,Ae.n,Ul.a,sd,Gf,Nv,Hv,pi,Oi.a,S_,vn.a,Rc,T_.a,k_.a,I_.a,x_.a,D_.a,oi,Pl,Q_,Zm.a],pipes:[E.b,Ae.h],styles:["#iframe-container-com[_ngcontent-%COMP%]   .course-player-iframe[_ngcontent-%COMP%]{width:100%;height:86vh}"]}),e})();var Rw=i("9cLA"),Nw=i("3bdg"),Uw=i("DaW2"),qw=i("Nu4O"),zw=i("Up5I"),Vw=i("no3L");class Bw{constructor(e,t,i){this.backend=e,this.endPointUrl=t,this.vars=i,this.pageSize=24,this.from=0,this.endOfResults=!1,this.tileDirection=qw.d.VERTICAL_CARD,this.keepDataStructure=!1,this.catalogView=!1}fetchData(e={}){return e.criteria=this.vars.criteria,e.g=this.vars.g,e.adv=this.vars.adv,e.page_size=this.pageSize,e.from=this.from,this.backend.request(this.endPointUrl,"GET",e).pipe(Object(ri.a)(e=>{const{data:t}=e,i=this.vars.g;switch(this.total=t.grand_total,this.from=!1!==t.next_from?t.next_from:this.from,this.endOfResults=t.end_of_results,i){case zw.a.ALL_RESULTS:this.tileDirection=qw.d.HORIZONTAL_CARD_PLAIN;break;case zw.a.COURSES_CONTENT:this.tileDirection=qw.d.HORIZONTAL_CARD;break;case zw.a.COURSES_CATALOG:this.catalogView=!0;break;case zw.a.QUESTIONS_AND_ANSWERS:this.keepDataStructure=!0}return t.results.map(i===zw.a.ALL_RESULTS?e=>Object(Uw.b)(e):e=>function(e,t=qw.d.VERTICAL_CARD,i=!1,s){if(i)return e;const n={},a={};let o=[];null!=e.actions&&(o=[...e.actions]);const r={visual_style:t,id:e.id,type_id:e.type_id,type:e.type,uri:e.uri||"",image_url:e.image_url,title:e.title,duration:e.duration?Object(Vw.g)(e.duration):null,rating:e.rating,rating_mode:"five_stars",is_new:e.is_new,actions:o.map(e=>({text:E.a.t("standard",e.label),type:e.type,action:e.action}))};switch(e.type_id){case Uw.a.ASSET:case Uw.a.PLAYLIST:n.author=e.owner.full_name,n.author_link=`/share/personalChannel/${e.owner.uuid}`,e.inviter&&(a.inviter_avatar=e.inviter.avatar,a.inviter_initials=e.inviter.short_name),r.other_fields={[e.type_id]:Object.assign({},e.other_fields,n,a)},r.channels=e.channels||[];break;case Uw.a.COURSE:if(e.other_fields||(e.other_fields={}),e.other_fields.can_enter||1===e.waiting||(r.uri=""),r.show_waiting=1===e.waiting,r.is_user_enrolled=e.is_user_enrolled,r.is_user_subscribed=e.is_user_subscribed,r.other_fields={[e.type_id]:Object.assign({},e.other_fields)},s){const t={can_enter:e.other_fields.can_enter,can_enter_reason:e.other_fields.can_enter_reason,language:e.other_fields.language,language_label:e.other_fields.language_label,price:e.item_price};r.on_sale=e.is_selling,r.type_id="catalog-course",r.other_fields={[r.type_id]:Object.assign({},t)}}r.other_fields[r.type_id].type=e.course_type;break;case Uw.a.LEARNING_PLAN:if(e.other_fields||(e.other_fields={}),e.other_fields.can_enter||1===e.waiting||(r.uri=""),r.show_waiting=1===e.waiting,r.is_user_enrolled=e.is_user_enrolled,r.is_user_subscribed=e.is_user_subscribed,r.other_fields={[e.type_id]:Object.assign({},e.other_fields)},s){const t={price:e.item_price,courses_count:e.courses_count?e.courses_count:0};r.on_sale=e.is_selling,r.type_id="catalog-lp",r.other_fields={[r.type_id]:Object.assign({},t)}}r.other_fields[r.type_id].type=e.course_type;break;case Uw.a.LEARNING_OBJECT:r.other_fields={[e.type_id]:Object.assign({},e.other_fields)};break;case Uw.a.QUESTION:r.owner=e.owner||{},r.metadata=e.metadata||{},r.related=e.related||null,r.es_document=e.document||{},r.other_fields={[e.type_id]:Object.assign({},e.other_fields)};break;default:r.other_fields={[e.type_id]:Object.assign({},e.other_fields)}}return Object.assign({},r)}(e,this.tileDirection,this.keepDataStructure,this.catalogView))}))}getTotal(){return this.total}resetPagination(){this.from=0,this.endOfResults=!1}hideLazyLoading(){return this.endOfResults}}var Gw=i("fqXP"),$w=i("Fm60"),Hw=i("Gnvh"),Yw=i("RdQI"),Ww=i("49CU");function Qw(e,t){if(1&e&&c.ec(0,"tile",12),2&e){const e=c.vc().$implicit;c.Dc("data",e)("skipTileWrapperLink",!1)}}function Kw(e,t){if(1&e&&c.ec(0,"coachTile",13),2&e){const e=c.vc().$implicit;c.Dc("data",e)("open_mode",0)}}function Xw(e,t){if(1&e&&c.ec(0,"doc-layout-global-search-result",14),2&e){const e=c.vc().$implicit;c.Dc("status",e.status)("variant",e.variant)("subtype",e.subtype)("imageUrl",e.imageUrl)("owner",e.owner)("expirationDate",e.expirationDate)("title",e.title)("uri",e.uri)("matchingTags",e.matchingTags)("matchingDescription",e.matchingDescription)("matchingTranscript",e.matchingTranscript)("published",e.published)("watched",e.watched)("private",e.private)("canEnter",e.canEnter)("canEnterReason",e.canEnterReason)}}const Jw=function(e){return{last:e}};function Zw(e,t){if(1&e&&(c.jc(0,"div",8),c.dd(1,Qw,1,2,"tile",9),c.dd(2,Kw,1,2,"coachTile",10),c.dd(3,Xw,1,16,"doc-layout-global-search-result",11),c.ic()),2&e){const e=t.last,i=c.vc();c.Dc("ngClass",c.Ic(4,Jw,e)),c.Mb(1),c.Dc("ngIf",i.isTypeDataSourceTile()),c.Mb(1),c.Dc("ngIf",i.isTypeDataSourceCoach()),c.Mb(1),c.Dc("ngIf",i.isTypeDataSourceAllResults())}}function ey(e,t){if(1&e&&c.ec(0,"blankslate",15),2&e){const e=c.vc();c.Dc("isVisible",e.dataBlankslate.isVisible)("title",e.dataBlankslate.title)("tip",e.dataBlankslate.tip)("type",e.dataBlankslate.type)("headerButtons",e.dataBlankslate.headerButtons)}}function ty(e,t){if(1&e&&(c.jc(0,"div"),c.ec(1,"lazy-loader",16),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("handler",e.lazyLoad.handler)("placeholder",e.lazyLoad.placeholder)("loading_style",e.lazyLoad.loading_style)}}const iy=function(e,t){return{"src-type-coach":e,"src-type-tile":t}};let sy=(()=>{class e{constructor(e,t,i,s,n,a){this.backend=e,this.filtersApiService=t,this.queryStringManagerService=i,this.pageService=s,this.docLayoutService=n,this.router=a,this.queryUrlParams=null,this.asyncFilters=[],this.noItems=!1,this.dataBrowserSource={mode:null,viewOptionLabel:null,filters:new Pe.a(null),appliedFiltersNumber:new Pe.a(null),displayedItemsNumber:new Pe.a(null),viewOptions:new Pe.a(null),disableViewOptions:!1,preselectedViewOption:new Ke.e,elementLabels:{singular:E.a.t("standard","item"),plural:E.a.t("standard","items")}},this.lazyLoad={trigger:"show",placeholder:{component:Nw.a,params:{items:new Array(6)}},loading_style:"placeholder"},this.hideLazyLoader=!1,this.dataBlankslate={isVisible:!0,headerButtons:[],type:"no-results",title:E.a.t("standard","Our bots can't find what you are looking for."),tip:E.a.t("calendar","Changing some filters or search terms may help them")},this.activeSort={sort_attr:"_score",sort_dir:"desc"},this.defaultSort={sort_attr:"_score",sort_dir:"desc"},this.dataBrowserModes=Oe.a,this.typeDataSource=zw.b.TILE,this.queryParams={},this.activeFilters={},this.queryKeyMapper={type:"t",is_paid:"p",search:"se",duration:"du",language:"l",content_partners:"cp"},this.transformCatalogFilters=e=>{for(const t of Object.keys(e))t.indexOf("field_")>-1&&t.indexOf("_$")>-1&&"free_search_filter"===e[t].type&&(e.hasOwnProperty("search_text")||(e.search_text=Object.assign(Object.assign({},e[t]),{code:"search_text"})),delete e[t]);return e}}extendBreadcrumbs(e){this.docLayoutService.actionButtons.setActionButtons(e)}ngOnInit(){this.lazyLoad&&(this.lazyLoad.loading_style="placeholder",this.group!==zw.a.COURSES_CONTENT&&this.group!==zw.a.QUESTIONS_AND_ANSWERS&&this.group!==zw.a.ALL_RESULTS||(this.lazyLoad.loading_style="spinner"),this.lazyLoad.handler=this.loadMore.bind(this)),this.dataBrowserSource.mode=this.dataBrowserModes.push,this.dataBrowserSource.viewOptionLabel=E.a.t("social","Sort by"),this.view="_score desc",this.activeSort=this.defaultSort,this.queryParams=Object.assign(Object.assign({},this.queryParams),this.activeSort),this.model=new Bw(this.backend,this.url,{criteria:this.search,adv:1,g:this.group}),this.fromQueryStringToParamsRequest(),this.fetchCollectionData(!0)}initDataBrowserDataSource(){this.initTabFilters(),this.initTabSorting()}initTabFilters(){this.dataBrowserSource.filters.next(this.asyncFilters),this.dataBrowserSource.appliedFiltersNumber.next(this.countActiveFilters())}fromQueryStringToParamsRequest(){if(this.group===zw.a.COURSES_CATALOG){const e=this.transformCatalogFilters(Object.assign({},this.filters));if(this.asyncFilters=this.filtersApiService.transformObjectFiltersGS(e),this.queryKeyMapper=this.filtersApiService.updateQueryKeyMapper(this.queryKeyMapper,this.asyncFilters),this.activeFilters=this.filtersApiService.convertQueryObjectToActiveFilters(this.queryUrlParams.ctl,this.queryKeyMapper,this.asyncFilters),this.asyncFilters=this.filtersApiService.setPreselectedValueFiltersFromActiveFilters(this.asyncFilters,this.activeFilters),this.activeFilters=this.filtersApiService.prepareDataDataBrowser(this.activeFilters,this.asyncFilters),this.queryUrlParams.ctl.v){const e=this.queryUrlParams.ctl.v.values.split(" ");this.activeSort={sort_attr:e[0],sort_dir:e[1]}}this.queryParams=Object.assign(Object.assign(Object.assign({},this.queryParams),this.activeFilters),this.activeSort)}}fromFiltersToQueryString(e){if(this.group===zw.a.COURSES_CATALOG){this.activeFilters=e;let t=this.filtersApiService.convertFiltersToQueryObject(this.activeFilters,this.queryKeyMapper);t=this.encodeSortInQueryObjects(t),this.queryStringManagerService.updateQueryStringParams("ctl",t)}}encodeSortInQueryObjects(e){return delete e.sort_attr,delete e.sort_dir,this.activeSort.sort_dir===this.defaultSort.sort_dir&&this.activeSort.sort_attr===this.defaultSort.sort_attr||(e.v={values:`${this.activeSort.sort_attr} ${this.activeSort.sort_dir}`}),e}onFiltersUpdate(e){const t=this.filtersApiService.prepareDataDataBrowser(e,this.asyncFilters),i=this.filtersApiService.getActiveFilters(this.asyncFilters,t);return this.activeFilters=t,t.sort_attr=this.queryParams.sort_attr,t.sort_dir=this.queryParams.sort_dir,this.queryParams=Object.assign(Object.assign({},t),this.activeSort),this.dataBrowserSource.appliedFiltersNumber.next(i),this.model.resetPagination(),this.fromFiltersToQueryString(e),this.fetchCollectionData(!1)}onViewChange(e){this.view=e;const t=this.view.split(" ");return this.activeSort={sort_attr:t[0],sort_dir:t[1]},this.queryParams=Object.assign(Object.assign({},this.queryParams),this.activeSort),this.model.resetPagination(),this.fromFiltersToQueryString(this.activeFilters),this.fetchCollectionData(!1)}loadMore(){return this.updateCollectionData()}fetchCollectionData(e){if(this.group===zw.a.COURSES_CATALOG){const e={singleLink:document.location},t=x.b.getInstance();if(t.settings.share_this_view_button&&1==t.settings.share_this_view_button){let t=[Object(Rw.b)(this.pageService,this.backend,this.router,e)];this.extendBreadcrumbs(t)}}else this.extendBreadcrumbs([]);this.group===zw.a.QUESTIONS_AND_ANSWERS?(this.typeDataSource=zw.b.COACH,this.tileDataType=this.model.fetchData(this.queryParams)):this.group===zw.a.ALL_RESULTS?(this.typeDataSource=zw.b.ALL_RESULTS,this.tileDataType=this.model.fetchData(this.queryParams)):this.tileDataType=this.model.fetchData(this.queryParams),this.subscription=this.tileDataType.subscribe(t=>{this.tilesData=t,this.dataBrowserSource.displayedItemsNumber.next(this.model.getTotal()),this.hideLazyLoader=this.model.hideLazyLoading(),e&&this.initDataBrowserDataSource(),this.noItems=this.model.getTotal()<=0})}updateCollectionData(){let e;const t=new a.a(t=>{e=t});return this.tileDataType=this.model.fetchData(this.queryParams),this.subscription=this.tileDataType.subscribe(t=>{e.next(!0),this.tilesData=[...this.tilesData,...t],this.dataBrowserSource.displayedItemsNumber.next(this.model.getTotal()),this.hideLazyLoader=this.model.hideLazyLoading()}),t}isTypeDataSourceTile(){return this.typeDataSource===zw.b.TILE}isTypeDataSourceCoach(){return this.typeDataSource===zw.b.COACH}isTypeDataSourceAllResults(){return this.typeDataSource===zw.b.ALL_RESULTS}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}initTabSorting(){let e=[];e=this.group===zw.a.COURSES_CONTENT?[{label:E.a.t("standard","Best Match"),value:"_score desc"},{label:E.a.t("standard","A - Z"),value:"titlesort asc"},{label:E.a.t("standard","Z - A"),value:"titlesort desc"}]:this.group===zw.a.QUESTIONS_AND_ANSWERS?[{label:E.a.t("standard","Best Match"),value:"_score desc"},{label:E.a.t("standard","Newest To Oldest"),value:"created desc"},{label:E.a.t("standard","Oldest To Newest"),value:"created asc"}]:this.group===zw.a.COURSES_CATALOG?[{label:E.a.t("standard","Best Match"),value:"_score desc"},{label:E.a.t("standard","A - Z"),value:"titlesort asc"},{label:E.a.t("standard","Z - A"),value:"titlesort desc"},{label:E.a.t("standard","lowest first"),value:"price asc"},{label:E.a.t("standard","highest first"),value:"price desc"}]:[{label:E.a.t("standard","Best Match"),value:"_score desc"},{label:E.a.t("standard","A - Z"),value:"titlesort asc"},{label:E.a.t("standard","Z - A"),value:"titlesort desc"},{label:E.a.t("standard","Newest To Oldest"),value:"created desc"},{label:E.a.t("standard","Oldest To Newest"),value:"created asc"}],this.dataBrowserSource.viewOptions.next(e),this.dataBrowserSource.preselectedViewOption.setValue(`${this.activeSort.sort_attr} ${this.activeSort.sort_dir}`)}countActiveFilters(){let e=0;return this.activeFilters&&Object.keys(this.activeFilters).map(t=>{const i=this.activeFilters[t],s=this.filtersApiService.getFilterFromName(t,this.asyncFilters);i instanceof Array&&s.type!==Oe.d.duration_filter&&s.type!==Oe.d.timeframe?e+=i.length:i&&(e+=1)}),e}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(Gw.a),c.dc($w.a),c.dc(O.a),c.dc(M.a),c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],inputs:{url:"url",filters:"filters",search:"search",group:"group",queryUrlParams:"queryUrlParams"},decls:8,vars:8,consts:[[1,"mdl-wrapper","global-search-collection-browser","data-browser-top-offset"],[3,"dataBrowserSource","onFiltersUpdate","onViewChange"],["id","collection-container",3,"ngClass"],["id","collection-content"],[1,"tile-items"],["class","tile-item",3,"ngClass",4,"ngFor","ngForOf"],[3,"isVisible","title","tip","type","headerButtons",4,"ngIf"],[4,"ngIf"],[1,"tile-item",3,"ngClass"],[3,"data","skipTileWrapperLink",4,"ngIf"],[3,"data","open_mode",4,"ngIf"],[3,"status","variant","subtype","imageUrl","owner","expirationDate","title","uri","matchingTags","matchingDescription","matchingTranscript","published","watched","private","canEnter","canEnterReason",4,"ngIf"],[3,"data","skipTileWrapperLink"],[3,"data","open_mode"],[3,"status","variant","subtype","imageUrl","owner","expirationDate","title","uri","matchingTags","matchingDescription","matchingTranscript","published","watched","private","canEnter","canEnterReason"],[3,"isVisible","title","tip","type","headerButtons"],[3,"handler","placeholder","loading_style"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"data-browser",1),c.rc("onFiltersUpdate",function(e){return t.onFiltersUpdate(e)})("onViewChange",function(e){return t.onViewChange(e)}),c.jc(2,"div",2),c.jc(3,"div",3),c.jc(4,"div",4),c.dd(5,Zw,4,6,"div",5),c.ic(),c.dd(6,ey,1,5,"blankslate",6),c.ic(),c.ic(),c.dd(7,ty,2,3,"div",7),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("dataBrowserSource",t.dataBrowserSource),c.Mb(1),c.Dc("ngClass",c.Jc(5,iy,t.isTypeDataSourceCoach(),t.isTypeDataSourceTile())),c.Mb(3),c.Dc("ngForOf",t.tilesData),c.Mb(1),c.Dc("ngIf",t.noItems),c.Mb(1),c.Dc("ngIf",t.lazyLoad&&!t.hideLazyLoader))},directives:[Le.a,Ae.n,Ae.o,Ae.p,Hw.b,Cn.a,Yw.a,ld.a,Ww.a],encapsulation:2}),e})();var ny=function(e){return e.DATE_RANGE="date-range",e.DURATION="duration",e.SINGLE_SELECTION="single-selection",e.MULTIPLE_SELECTION="multiple-selection",e.RATING="rating",e}({});function ay(e){e.params&&e.params.radio_type&&"date"===e.params.radio_type&&(e.type="date");const t=function(e){let t=null;switch(e){case"Type.checkbox_filter":case"checkbox_filter":t=ny.MULTIPLE_SELECTION;break;case"radio_filter":case"Type.radio_filter":t=ny.SINGLE_SELECTION;break;case"Type.rating_filter":t=ny.RATING;break;case"duration_filter":t=ny.DURATION;break;case"date":t=ny.DATE_RANGE}return t}(e.type),i=e.params&&e.params.options&&(e.params.options.min||0===e.params.options.min)&&e.params.options.min!==e.params.options.max?{min:e.params.options.min,max:e.params.options.max}:null;return t&&(t!==ny.DURATION||i)?{title:e.title,code:e.code,type:t,options:e.params&&e.params.options&&!i?e.params.options.map(e=>({value:e.key,label:e.label})):[],durationRange:i,allOptionLabel:e.allOptionLabel||Je.a.t("standard","All")}:null}function oy(e){const t=[];if(e.filters&&Object.keys(e.filters).length)for(let i in e.filters){const s=ay(e.filters[i]);s&&t.push(s)}return t}function ry(e){const t=[];if(e.classroom_filters&&Object.keys(e.classroom_filters).length)for(let i in e.classroom_filters){const s=ay(e.classroom_filters[i]);s&&t.push(s)}return t}function cy(e){const t=[];if(e.webinar_filters&&Object.keys(e.webinar_filters).length)for(let i in e.webinar_filters){const s=ay(e.webinar_filters[i]);s&&t.push(s)}return t}var ly=function(e){return e.ALL_RESULTS="all-results",e.ASSETS="assets",e.COURSE_CATALOG="course-catalog",e.MY_COURSES_AND_LEARNING_PLANS="my-courses",e.QUESTIONS_AND_ANSWERS="questions-answers",e.TRAINING_MATERIAL="training-material",e}({});const dy={1:ly.MY_COURSES_AND_LEARNING_PLANS,2:ly.TRAINING_MATERIAL,3:ly.COURSE_CATALOG,4:ly.ASSETS,5:ly.QUESTIONS_AND_ANSWERS,6:ly.ALL_RESULTS};function uy(e){return+Object.keys(dy).find(t=>dy[+t]===e)}const hy={type:"t",is_paid:"p",duration:"du",language:"l",content_partners:"cp"},py={classroomFilters:Je.a.t("standard","Classroom Filters"),webinarFilters:Je.a.t("standard","Webinar Filters"),itemsCountSingular:Je.a.t("standard","{itemsCount} item"),itemsCountPlural:Je.a.t("standard","{itemsCount} items"),blankSlateTitle:Je.a.t("standard","Our bots can't find what you are looking for."),blankSlateDescription:Je.a.t("calendar","Changing some filters or search terms may help them"),filtersLabel:Je.a.t("standard","Filters"),clearFiltersLabel:Je.a.t("standard","Clear filters"),closeFiltersLabel:Je.a.t("standard","Close"),activeFiltersCountLabelSingular:Je.a.t("standard","Active Filter"),activeFiltersCountLabelPlural:Je.a.t("standard","Active Filters"),showMoreLabel:Je.a.t("widgets","See other options"),durationFilterTitle:Je.a.t("standard","Duration"),allDuration:Je.a.t("standard","All durations"),customDuration:Je.a.t("standard","Custom duration"),sortBestMatch:Je.a.t("standard","Best Match"),sortNameAsc:Je.a.t("player","Name A-Z"),sortNameDesc:Je.a.t("player","Name Z-A"),sortNewestToOldest:Je.a.t("standard","Newest To Oldest"),sortOldestToNewest:Je.a.t("standard","Oldest To Newest"),sortLowestPriceFirst:Je.a.t("standard","lowest first"),sortHighestPriceFirst:Je.a.t("standard","highest first"),resultsCount:Je.a.t("standard","{resultsCount} results"),lockedItem:Je.a.t("mobile","The Course Is Now Locked"),answered:Je.a.t("standard","answered"),asked:Je.a.t("standard","asked"),follow:Je.a.t("standard","Follow"),unfollow:Je.a.t("standard","Unfollow"),edit:Je.a.t("standard","Edit"),delete:Je.a.t("standard","Delete"),relatedTo:Je.a.t("standard","Related to"),saveChanges:Je.a.t("standard","Save Changes"),cancel:Je.a.t("standard","Cancel"),moreAnswers:Je.a.t("standard","{moreAnswersCount} more answers in the Q&A page"),messageActions:Je.a.t("standard","Actions"),changesSavedSuccessfully:Je.a.t("app7020","Your changes have been saved successfully"),questionDeleted:Je.a.t("standard","This question has been deleted successfully"),answerDeleted:Je.a.t("standard","This answer has been deleted successfully"),changesNotSaved:Je.a.t("standard","Something went wrong. Please, try again later!"),deleteQuestion:Je.a.t("test","Delete question"),deleteQuestionConfirmation:Je.a.t("standard","Are you sure you want to delete this question?"),confirm:Je.a.t("standard","Confirm"),following:Je.a.t("mobile","You are following this discussion"),followSuccessful:Je.a.t("standard","You are now following this discussion."),unfollowSuccessful:Je.a.t("standard","You are not following this discussion anymore."),userAsked:Je.a.t("standard","{user} asked {timeAgo}"),userAnswered:Je.a.t("standard","{user} answered {timeAgo}"),like:Je.a.t("app7020","like"),dislike:Je.a.t("app7020","dislike"),liked:Je.a.t("standard","You liked this answer"),disliked:Je.a.t("standard","You disliked this answer"),likesCount:Je.a.t("standard","{likesCount} likes"),dislikesCount:Je.a.t("standard","{dislikesCount} dislikes"),likesDislikesCount:Je.a.t("standard","{likesCount} likes and {dislikesCount} dislikes"),notAssignedChannel:{category:"standard",key:"Not assigned"}};var my=i("lsP1"),gy=i("MjwL"),by=i("3axs"),fy=i("2MH3"),vy=i("zLDF"),_y=function(e){return e.video="video",e.wistia="wistia",e.youtube="youtube",e.vimeo="vimeo",e.file="file",e.htmlpage="html",e.scormorg="scorm",e.test="quiz",e.poll="survey",e.item="file",e.tincan="tincan",e.authoring="slides",e.deliverable="assignment",e.aicc="aicc",e.elucidat="elucidat",e.lti="lti",e.googledrive="google-drive",e.sign="file",e.otj="observation-checklist",e}({}),wy=function(e){return e.COURSE_USER_WAITING_LIST="-2",e.COURSE_USER_CONFIRMED="-1",e.COURSE_USER_SUBSCRIBED="0",e.COURSE_USER_BEGIN="1",e.COURSE_USER_END="2",e.COURSE_USER_SUSPEND="3",e.COURSE_USER_OVERBOOKING="4",e}({});function yy(e,t){let i=ly.MY_COURSES_AND_LEARNING_PLANS;switch(e.type){case"EsAgentLo":i=ly.TRAINING_MATERIAL;break;case"EsAgentCourse":""!==e.is_user_enrolled&&t!==ly.COURSE_CATALOG||(i=ly.COURSE_CATALOG);break;case"EsAgentKnowledgeAsset":i=ly.ASSETS;break;case"EsAgentQandA":i=ly.QUESTIONS_AND_ANSWERS;break;case"EsAgentPlan":""!==e.is_user_enrolled&&t!==ly.COURSE_CATALOG||(i=ly.COURSE_CATALOG)}return i}function Cy(e,t,i,s){const n=[];return e&&!i&&n.push(t?{value:"unfollow",label:s.instant(py.unfollow.query,{category:py.unfollow.category})}:{value:"follow",label:s.instant(py.follow.query,{category:py.follow.category})}),i&&n.push({value:"edit",label:s.instant(py.edit.query,{category:py.edit.category})}),(i||k.c.getInstance().isCurrentUserA(k.c.LEVEL_SUPERADMIN))&&n.push({value:"delete",label:s.instant(py.delete.query,{category:py.delete.category})}),n}var Sy=i("k+4P");let Ty=(()=>{class e{constructor(e,t,i){this._backendService=e,this._translationService=t,this._discoverMentionConfigService=i}getGlobalSearchTabsSummary(e){return this._backendService.request("/manage/v1/globalsearch","GET",{criteria:e,g:[1,2,4,5],adv:1}).pipe(Object(ri.a)(e=>e.data.tabs.map(e=>function(e){const t=dy[e.group];return t?{id:t,title:e.title,group:e.group,resultsCount:e.count,filters:oy(e),classroomFilters:ry(e),webinarFilters:cy(e)}:null}(e)).filter(e=>!!e)))}getTabData(e,t,i,s){return this._backendService.request("/manage/v1/globalsearch/search","GET",function(e,t,i,s){var n;return(n=i.filters).duration&&Array.isArray(n.duration)&&(n.duration_from_seconds=n.duration[0],n.duration_to_seconds=n.duration[1],delete n.duration),Object.assign({adv:1,g:uy(t),sort_attr:i.sort.split(" ")[0],sort_dir:i.sort.split(" ")[1],criteria:e,page_size:24,from:s},i.filters)}(e,t,i,s)).pipe(Object(ri.a)(e=>({otherResultsAvailable:!e.data.end_of_results,itemsCount:e.data.grand_total,nextResultIndex:e.data.end_of_results?0:e.data.next_from,results:e.data.results.map(e=>function(e,t,i){var s,n,a,o,r,c,l,d,u,h,p,m,g,f,v,_;const w={resultType:yy(e,t)};switch(w.resultType){case ly.MY_COURSES_AND_LEARNING_PLANS:w.resultDetailsMyCoursesAndLearningPlans=Object(by.a)({id:e.id,type:e.course_type,name:e.title,slug:"",imageUrl:e.item_thumbnail,level:e.other_fields.level,status:e.other_fields.status_label?e.other_fields.status_label.toLowerCase():e.other_fields.status_id===wy.COURSE_USER_WAITING_LIST||e.other_fields.status_id===wy.COURSE_USER_CONFIRMED?"waiting":"",hidden:e.hidden,outdated:e.outdated&&e.outdated.total_users,canEnter:e.other_fields.can_enter,canEnterReason:e.other_fields.can_enter_reason,url:e.uri,languageCode:e.other_fields.language,rating:"disabled"!==e.rating_option?e.rating:null,actions:[],enrollBeginDate:"",enrollEndDate:e.other_fields.expiration_date,courseBeginDate:"",courseEndDate:"",softDeadline:!1,deeplinkingHash:"",deeplinkingGeneratedBy:0,duration:e.duration,itemsCount:e.other_fields.courses_count||e.number_of_courses,highlight:{title:(null===(s=e.highlight)||void 0===s?void 0:s.title)?e.highlight.title[0]:"",content:(null===(n=e.highlight)||void 0===n?void 0:n.description)?e.highlight.description[0]:"",tags:(null===(a=e.highlight)||void 0===a?void 0:a.tags)?e.highlight.tags:"",shortDescription:(null===(o=e.highlight)||void 0===o?void 0:o.short_description)?e.highlight.short_description[0]:""}},!1,i);break;case ly.COURSE_CATALOG:w.resultDetailsCatalog=Object(gy.a)({id:e.external_course_id||+e.item_id,price:e.is_selling&&e.item_price?e.item_price:"0",discountedPrice:e.is_affiliate&&e.item_price>0?e.affiliate_price:"",title:e.title||e.item_name,description:e.subtitle||e.item_description,canEnter:e.other_fields.can_enter,url:e.uri,language:e.other_fields.language_label,languageCode:e.other_fields.language_label?e.other_fields.language_label.substring(0,2):"",type:e.course_type||"elearning",rating:e.item_rating_option&&e.item_rating_option===nd.a.DISABLED?0:e.item_rating,totalDuration:e.total_duration,duration:e.duration,new:e.provider_id?"subscribed"===e.enrollment_status:!!+e.is_new,itemsCount:e.number_of_courses,imageUrl:e.thumbnail||e.item_thumbnail,moderated:1==+e.item_can_enroll&&!+e.item_price,enrolled:e.provider_id?"not enrolled"!==e.enrollment_status:!!+e.is_user_enrolled,subscribed:!!+e.is_user_subscribed,external:!!e.external_course_id,externalProviderID:0,slug:e.provider_id?e.slug_name:e.item_slug,highlight:{title:(null===(r=e.highlight)||void 0===r?void 0:r.title)?e.highlight.title[0]:"",content:(null===(c=e.highlight)||void 0===c?void 0:c.description)?e.highlight.description[0]:"",tags:(null===(l=e.highlight)||void 0===l?void 0:l.tags)?e.highlight.tags:"",shortDescription:(null===(d=e.highlight)||void 0===d?void 0:d.short_description)?e.highlight.short_description[0]:""}},i);break;case ly.TRAINING_MATERIAL:const t=new Gi.b(e.other_fields.lo_type,new Gi.a(e.uri,e.title));w.resultDetailsTrainingMaterial=(y={id:e.id,title:e.title,type:t.variant.title,url:e.uri,imageUrl:e.image_url,courseName:e.other_fields.course_title,courseUrl:e.other_fields.course_url,canEnter:e.other_fields.can_enter,highlight:{title:(null===(u=e.highlight)||void 0===u?void 0:u.title)?e.highlight.title[0]:"",content:(null===(h=e.highlight)||void 0===h?void 0:h.description)?e.highlight.description[0]:"",tags:(null===(p=e.highlight)||void 0===p?void 0:p.tags)?e.highlight.tags:"",shortDescription:(null===(m=e.highlight)||void 0===m?void 0:m.short_description)?e.highlight.short_description[0]:""},lo_type:_y[e.other_fields.lo_type]||_y.file},{stacked:!1,primaryStatusType:b.n.NEUTRAL,primaryStatusLabel:"",secondaryStatusType:b.n.NEUTRAL,secondaryStatusLabel:"",imageUrl:y.imageUrl,locked:!y.canEnter,selectable:!1,selected:!1,selectedLabel:"",selectionMode:!1,route:y.url,url:"",id:y.id,title:y.highlight&&y.highlight.title?y.highlight.title:y.title,itemTypeLabel:y.type,courseName:y.courseName,courseRoute:y.courseUrl,courseUrl:"",courseOptionName:Je.a.t("standard","From"),courseLabelExtended:Je.a.t("standard","This content is part of {course}",{course:y.courseName}),itemTypeLabelExtended:Je.a.t("standard","Content type"),highlight:Object(vy.b)(y.highlight),lo_type:y.lo_type});break;case ly.ASSETS:const C=new Kt.a(e.created),S=(new Kt.a).getDifference(C,"h"),T=e.is_error||e.is_loading&&S>=12;w.resultDetailsAsset=Object(fy.a)({id:e.id,title:e.title,type:e.other_fields.type,url:e.uri,imageUrl:e.image_url,author:e.owner?e.owner.full_name:"",publishDate:e.other_fields.publish_date,created:e.created?e.created:null,views:e.other_fields.views,rating:"disabled"!==e.rating_option?e.rating:null,hidden:e.hidden,outdated:e.outdated&&e.outdated.total_users,authorID:e.owner?e.owner.id:"",authorUUID:e.owner?e.owner.uuid||e.owner.id:"",authorInitials:e.owner?e.owner.short_name:"",authorAvatarUrl:e.owner?e.owner.avatar:"",new:e.is_new,loading:e.is_loading,loadingError:T,watched:e.other_fields.is_watched,status:e.other_fields.status,itemsCount:e.other_fields.assets_count,actions:[],duration:e.duration,highlight:{title:(null===(g=e.highlight)||void 0===g?void 0:g.title)?e.highlight.title[0]:"",content:(null===(f=e.highlight)||void 0===f?void 0:f.description)?e.highlight.description[0]:"",tags:(null===(v=e.highlight)||void 0===v?void 0:v.tags)?e.highlight.tags:"",shortDescription:(null===(_=e.highlight)||void 0===_?void 0:_.short_description)?e.highlight.short_description[0]:""}});break;case ly.QUESTIONS_AND_ANSWERS:w.resultDetailsQuestion={hasRelatedContent:e.metadata.is_related,totalAnswersCount:e.metadata.total_items,following:e.metadata.is_follow,relatedContent:{id:e.related?e.related.id:0,url:e.related?e.related.url:"",title:e.related?e.related.name||e.related.title:"",channelID:e.related?e.related.channel_id:0,type:e.metadata.related_kind},url:e.uri,question:{id:e.id,author:{id:e.owner.id,shortName:e.owner.short_name.slice(0,2),avatarURL:e.owner.avatar,isExpert:!1,fullName:e.owner.full_name},message:e.title,creationTimeRaw:e.metadata.created_at,creationTime:new my.a(new Kt.a(e.metadata.created_at).getDifference(new Kt.a)).toWordsPast(),actionButtonTooltip:Je.a.t("standard","Actions"),actionButtonOptions:Cy(!0,e.metadata.is_follow,e.owner.id===k.c.getInstance().id,i)}},e.metadata.have_best?w.resultDetailsQuestion.bestAnswer={id:e.best.id,author:{id:e.best.owner.id,shortName:e.best.owner.short_name.slice(0,2),avatarURL:e.best.owner.avatar,isExpert:!1,fullName:e.best.owner.full_name},message:e.best.title,reactions:{likes:e.best.rating.likes,dislikes:e.best.rating.dislikes,liked:!1,disliked:!1,likeEnabled:e.best.owner.id!==k.c.getInstance().id,dislikeEnabled:e.best.owner.id!==k.c.getInstance().id},creationTimeRaw:e.best.created_at,creationTime:new my.a(new Kt.a(e.best.created_at).getDifference(new Kt.a)).toWordsPast(),actionButtonTooltip:Je.a.t("standard","Actions"),actionButtonOptions:Cy(!1,!1,e.best.owner.id===k.c.getInstance().id,i)}:e.metadata.have_last&&(w.resultDetailsQuestion.lastAnswer={id:e.last.id,author:{id:e.last.owner.id,shortName:e.last.owner.short_name.slice(0,2),avatarURL:e.last.owner.avatar,isExpert:!1,fullName:e.last.owner.full_name},message:e.last.title,reactions:{likes:e.last.rating.likes,dislikes:e.last.rating.dislikes,liked:!1,disliked:!1,likeEnabled:e.last.owner.id!==k.c.getInstance().id,dislikeEnabled:e.last.owner.id!==k.c.getInstance().id},creationTimeRaw:e.last.created_at,creationTime:new my.a(new Kt.a(e.last.created_at).getDifference(new Kt.a)).toWordsPast(),actionButtonTooltip:Je.a.t("standard","Actions"),actionButtonOptions:Cy(!1,!1,e.last.owner.id===k.c.getInstance().id,i)})}var y;return w}(e,t,this._translationService))})))}toggleQuestionFollowingStatus(e){return new a.a(t=>{this._backendService.request(`/share/v1/questions/${e.question.id}/follow`,e.following?"DELETE":"POST").subscribe(()=>{e.following=!e.following,e.question.actionButtonOptions=Cy(!0,e.following,e.question.author.id===k.c.getInstance().id,this._translationService),t.next(!0),t.complete()},()=>{t.next(!1),t.complete()})})}likeAnswer(e){return new a.a(t=>{e.reactions&&!e.reactions.liked&&this._backendService.request(`/share/v1/answers/${e.id}/evaluate`,"PUT").subscribe(i=>{e.reactions&&(e.reactions.liked=!0,e.reactions.disliked=!1,e.reactions.likeEnabled=!1,e.reactions.dislikeEnabled=!0,i.data&&(e.reactions.likes=i.data.likes,e.reactions.dislikes=i.data.dislikes)),t.next(!0),t.complete()},()=>{e.reactions&&(e.reactions.liked=!0,e.reactions.disliked=!1,e.reactions.likeEnabled=!1,e.reactions.dislikeEnabled=!0),t.next(!1),t.complete()})})}dislikeAnswer(e){return new a.a(t=>{e.reactions&&!e.reactions.disliked&&this._backendService.request(`/share/v1/answers/${e.id}/evaluate`,"DELETE").subscribe(i=>{e.reactions&&(e.reactions.liked=!1,e.reactions.disliked=!0,e.reactions.likeEnabled=!0,e.reactions.dislikeEnabled=!1,i.data&&(e.reactions.likes=i.data.likes,e.reactions.dislikes=i.data.dislikes)),t.next(!0),t.complete()},()=>{e.reactions&&(e.reactions.liked=!1,e.reactions.disliked=!0,e.reactions.likeEnabled=!0,e.reactions.dislikeEnabled=!1),t.next(!1),t.complete()})})}editMessage(e,t,i){return new a.a(s=>{var n;const a=this._discoverMentionConfigService.convertMessageForSaving(i);this._backendService.request("question"===e?`/share/v1/questions/${t.id}`:`/share/v1/answers/${t.id}`,"PUT",Object.assign(Object.assign(Object.assign({},"question"===e&&{title:a.message}),"answer"===e&&{content:a.message}),(null===(n=a.payload)||void 0===n?void 0:n.length)&&{mentions:a.payload})).subscribe(()=>{t.message=a.message,s.next(!0),s.complete()},()=>{s.next(!1),s.complete()})})}deleteMessage(e,t){return new a.a(i=>{this._backendService.request("question"===e?`/share/v1/questions/${t}`:`/share/v1/answers/${t}`,"DELETE").subscribe(()=>{i.next(!0),i.complete()},()=>{i.next(!1),i.complete()})})}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a),c.nc(u.h),c.nc(Sy.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ky=i("dpW2"),Iy=i("juNq"),xy=i("WCat"),Dy=i("L24Q"),Oy=i("knll");function Ey(e,t){if(1&e){const e=c.kc();c.jc(0,"div",3),c.fd(1),c.wc(2,"t"),c.jc(3,"dcb-ui-button-link",4),c.rc("trigger",function(){c.Uc(e);const t=c.vc();return t.goToQuestionPage(t.question.relatedContent.url)}),c.fd(4),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,3,e.dictionary.relatedTo),": "),c.Mb(2),c.Dc("role","link"),c.Mb(1),c.gd(e.question.relatedContent.title)}}function Py(e,t){if(1&e&&(c.jc(0,"div",12),c.wc(1,"t"),c.wc(2,"t"),c.ec(3,"dcb-ui-icon",13),c.ic()),2&e){const e=c.vc(2);c.Dc("uiTooltip",c.xc(1,2,e.dictionary.following))("uiAriaLabel",c.xc(2,4,e.dictionary.following))}}function My(e,t){if(1&e&&(c.jc(0,"dcb-ui-button-dropdown-option",14),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.hd(" ",c.xc(2,2,e.label)," ")}}function Ay(e,t){if(1&e&&(c.jc(0,"dcb-ui-button-dropdown-option",14),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.hd(" ",c.xc(2,2,e.label)," ")}}const Ly=function(e,t){return{user:e,timeAgo:t}},jy=function(e,t){return{likesCount:e,dislikesCount:t}},Fy=function(e){return{likesCount:e}},Ry=function(e){return{dislikesCount:e}};function Ny(e,t){if(1&e){const e=c.kc();c.jc(0,"dcb-ui-thread-leaf"),c.jc(1,"dcb-ui-message",15),c.rc("like",function(){c.Uc(e);const t=c.vc(2);return t.onLikeAnswer(t.question.bestAnswer)})("dislike",function(){c.Uc(e);const t=c.vc(2);return t.onDislikeAnswer(t.question.bestAnswer)}),c.wc(2,"discoverMention"),c.wc(3,"t"),c.wc(4,"HDateTime"),c.wc(5,"t"),c.wc(6,"t"),c.wc(7,"t"),c.wc(8,"t"),c.wc(9,"t"),c.wc(10,"t"),c.wc(11,"t"),c.wc(12,"t"),c.jc(13,"dcb-ui-message-aside"),c.jc(14,"dcb-ui-button-dropdown",8),c.rc("selectOption",function(t){c.Uc(e);const i=c.vc(2);return i.onMessageAction(t,i.question.bestAnswer,!1)}),c.wc(15,"t"),c.dd(16,Ay,3,4,"dcb-ui-button-dropdown-option",9),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(1),c.Dc("message",c.yc(2,27,e.question.bestAnswer.message,e.question.question.mentions))("title",e.question.bestAnswer.author.fullName)("titleActionText",c.xc(3,30,e.dictionary.answered))("time",e.question.bestAnswer.creationTime)("date",c.xc(4,32,e.question.bestAnswer.creationTimeRaw))("showLikeButton",!0)("showDislikeButton",!0)("likes",e.question.bestAnswer.reactions.likes)("dislikes",e.question.bestAnswer.reactions.dislikes)("likeActive",e.question.bestAnswer.reactions.liked)("dislikeActive",e.question.bestAnswer.reactions.disliked)("likeEnabled",e.question.bestAnswer.reactions.likeEnabled)("dislikeEnabled",e.question.bestAnswer.reactions.dislikeEnabled)("avatarImageUrl",e.question.bestAnswer.author.avatarURL)("avatarText",e.question.bestAnswer.author.avatarURL?"":e.question.bestAnswer.author.shortName)("avatarIcon",e.question.bestAnswer.author.avatarURL||e.question.bestAnswer.author.shortName?"":"user")("ariaLabelHeaderMessage",c.yc(5,34,e.dictionary.userAnswered,c.Jc(56,Ly,e.question.bestAnswer.author.fullName,e.question.bestAnswer.creationTime)))("ariaLabelLikeNotActive",c.xc(6,37,e.dictionary.like))("ariaLabelLikeActive",c.xc(7,39,e.dictionary.liked))("ariaLabelDislikeNotActive",c.xc(8,41,e.dictionary.dislike))("ariaLabelDislikeActive",c.xc(9,43,e.dictionary.disliked))("ariaLabelNumberOfLikeAndDislikeActive",c.yc(10,45,e.dictionary.likesDislikesCount,c.Jc(59,jy,e.question.bestAnswer.reactions.likes,e.question.bestAnswer.reactions.dislikes)))("ariaLabelNumberOfLikes",c.yc(11,48,e.dictionary.likesCount,c.Ic(62,Fy,e.question.bestAnswer.reactions.likes)))("ariaLabelNumberOfDislikes",c.yc(12,51,e.dictionary.dislikesCount,c.Ic(64,Ry,e.question.bestAnswer.reactions.dislikes))),c.Mb(13),c.Dc("selectable",!1)("tooltipLabel",c.xc(15,54,e.dictionary.messageActions)),c.Mb(2),c.Dc("ngForOf",e.question.bestAnswer.actionButtonOptions)}}function Uy(e,t){if(1&e&&(c.jc(0,"dcb-ui-button-dropdown-option",14),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.hd(" ",c.xc(2,2,e.label)," ")}}function qy(e,t){if(1&e){const e=c.kc();c.jc(0,"dcb-ui-thread-leaf"),c.jc(1,"dcb-ui-message",15),c.rc("like",function(){c.Uc(e);const t=c.vc(2);return t.onLikeAnswer(t.question.lastAnswer)})("dislike",function(){c.Uc(e);const t=c.vc(2);return t.onDislikeAnswer(t.question.lastAnswer)}),c.wc(2,"discoverMention"),c.wc(3,"t"),c.wc(4,"HDateTime"),c.wc(5,"t"),c.wc(6,"t"),c.wc(7,"t"),c.wc(8,"t"),c.wc(9,"t"),c.wc(10,"t"),c.wc(11,"t"),c.wc(12,"t"),c.jc(13,"dcb-ui-message-aside"),c.jc(14,"dcb-ui-button-dropdown",8),c.rc("selectOption",function(t){c.Uc(e);const i=c.vc(2);return i.onMessageAction(t,i.question.lastAnswer,!1)}),c.wc(15,"t"),c.dd(16,Uy,3,4,"dcb-ui-button-dropdown-option",9),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(1),c.Dc("message",c.yc(2,27,e.question.lastAnswer.message,e.question.question.mentions))("title",e.question.lastAnswer.author.fullName)("titleActionText",c.xc(3,30,e.dictionary.answered))("time",e.question.lastAnswer.creationTime)("date",c.xc(4,32,e.question.lastAnswer.creationTimeRaw))("showLikeButton",!0)("showDislikeButton",!0)("likes",e.question.lastAnswer.reactions.likes)("dislikes",e.question.lastAnswer.reactions.dislikes)("likeActive",e.question.lastAnswer.reactions.liked)("dislikeActive",e.question.lastAnswer.reactions.disliked)("likeEnabled",e.question.lastAnswer.reactions.likeEnabled)("dislikeEnabled",e.question.lastAnswer.reactions.dislikeEnabled)("avatarImageUrl",e.question.lastAnswer.author.avatarURL)("avatarText",e.question.lastAnswer.author.avatarURL?"":e.question.lastAnswer.author.shortName)("avatarIcon",e.question.lastAnswer.author.avatarURL||e.question.lastAnswer.author.shortName?"":"user")("ariaLabelHeaderMessage",c.yc(5,34,e.dictionary.userAnswered,c.Jc(56,Ly,e.question.lastAnswer.author.fullName,e.question.lastAnswer.creationTime)))("ariaLabelLikeNotActive",c.xc(6,37,e.dictionary.like))("ariaLabelLikeActive",c.xc(7,39,e.dictionary.liked))("ariaLabelDislikeNotActive",c.xc(8,41,e.dictionary.dislike))("ariaLabelDislikeActive",c.xc(9,43,e.dictionary.disliked))("ariaLabelNumberOfLikeAndDislikeActive",c.yc(10,45,e.dictionary.likesDislikesCount,c.Jc(59,jy,e.question.lastAnswer.reactions.likes,e.question.lastAnswer.reactions.dislikes)))("ariaLabelNumberOfLikes",c.yc(11,48,e.dictionary.likesCount,c.Ic(62,Fy,e.question.lastAnswer.reactions.likes)))("ariaLabelNumberOfDislikes",c.yc(12,51,e.dictionary.dislikesCount,c.Ic(64,Ry,e.question.lastAnswer.reactions.dislikes))),c.Mb(13),c.Dc("selectable",!1)("tooltipLabel",c.xc(15,54,e.dictionary.messageActions)),c.Mb(2),c.Dc("ngForOf",e.question.lastAnswer.actionButtonOptions)}}const zy=function(e){return{moreAnswersCount:e}};function Vy(e,t){if(1&e){const e=c.kc();c.jc(0,"div",16),c.jc(1,"dcb-ui-button-text",17),c.rc("trigger",function(){c.Uc(e);const t=c.vc(2);return t.goToQuestionPage(t.question.url)}),c.wc(2,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(1),c.Dc("label",c.yc(2,2,e.dictionary.moreAnswers,c.Ic(5,zy,e.question.totalAnswersCount-1)))("role","link")}}function By(e,t){if(1&e){const e=c.kc();c.jc(0,"div",5),c.jc(1,"dcb-ui-thread"),c.jc(2,"dcb-ui-thread-root"),c.jc(3,"dcb-ui-message",6),c.wc(4,"discoverMention"),c.wc(5,"t"),c.wc(6,"t"),c.wc(7,"HDateTime"),c.jc(8,"dcb-ui-message-title"),c.dd(9,Py,4,6,"div",7),c.fd(10),c.ic(),c.jc(11,"dcb-ui-message-aside"),c.jc(12,"dcb-ui-button-dropdown",8),c.rc("selectOption",function(t){c.Uc(e);const i=c.vc();return i.onMessageAction(t,i.question.question,!0)}),c.wc(13,"t"),c.dd(14,My,3,4,"dcb-ui-button-dropdown-option",9),c.ic(),c.ic(),c.ic(),c.ic(),c.dd(15,Ny,17,66,"dcb-ui-thread-leaf",10),c.dd(16,qy,17,66,"dcb-ui-thread-leaf",10),c.ic(),c.dd(17,Vy,3,7,"div",11),c.ic()}if(2&e){const e=c.vc();c.Mb(3),c.Dc("message",c.yc(4,16,e.question.question.message,e.question.question.mentions))("avatarImageUrl",e.question.question.author.avatarURL)("avatarText",e.question.question.author.avatarURL?"":e.question.question.author.shortName)("avatarIcon",e.question.question.author.avatarURL||e.question.question.author.shortName?"":"user")("titleActionText",c.xc(5,19,e.dictionary.asked))("ariaLabelHeaderMessage",c.yc(6,21,e.dictionary.userAsked,c.Jc(28,Ly,e.question.question.author.fullName,e.question.question.creationTime)))("time",e.question.question.creationTime)("date",c.xc(7,24,e.question.question.creationTimeRaw)),c.Mb(6),c.Dc("ngIf",e.question.following),c.Mb(1),c.hd(" ",e.question.question.author.fullName," "),c.Mb(2),c.Dc("selectable",!1)("tooltipLabel",c.xc(13,26,e.dictionary.messageActions)),c.Mb(2),c.Dc("ngForOf",e.question.question.actionButtonOptions),c.Mb(1),c.Dc("ngIf",e.question.bestAnswer),c.Mb(1),c.Dc("ngIf",!e.question.bestAnswer&&e.question.lastAnswer),c.Mb(1),c.Dc("ngIf",e.question.totalAnswersCount>1)}}function Gy(e,t){if(1&e&&c.ec(0,"rich-textarea",26),2&e){const e=c.vc(2);c.Dc("preset",e.richTextareaPreset.BASE)("inputFormControl",e.richTextareaFormControl)("tributeCollection",null==e.discoverMentionConfigService||null==e.discoverMentionConfigService.config?null:e.discoverMentionConfigService.config.options)}}function $y(e,t){if(1&e){const e=c.kc();c.jc(0,"div",18),c.jc(1,"div",19),c.ec(2,"dcb-ui-avatar",20),c.jc(3,"span",21),c.fd(4),c.ic(),c.ic(),c.dd(5,Gy,1,3,"rich-textarea",22),c.jc(6,"div",23),c.jc(7,"dcb-ui-button-text",24),c.rc("trigger",function(){return c.Uc(e),c.vc().onSaveMessageChanges()}),c.wc(8,"t"),c.ic(),c.jc(9,"dcb-ui-button-text",25),c.rc("trigger",function(){return c.Uc(e),c.vc().onCancelEditMessage()}),c.wc(10,"t"),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.Dc("imageUrl",e.currentUser.avatarURL)("text",e.currentUser.avatarURL?"":e.currentUser.initials),c.Mb(2),c.hd(" ",e.currentUser.fullName," "),c.Mb(1),c.Dc("ngIf",null==e.discoverMentionConfigService?null:e.discoverMentionConfigService.isConfigured),c.Mb(2),c.Dc("label",c.xc(8,6,e.dictionary.saveChanges)),c.Mb(2),c.Dc("label",c.xc(10,8,e.dictionary.cancel))}}let Hy=(()=>{class e{constructor(e,t,i,s,n){this._router=e,this._changeDetectorRef=t,this._docLayoutService=i,this.discoverMentionConfigService=s,this._lrnGlobalSearchService=n,this.deleteQuestion=new c.q,this.dictionary=py,this.editMode=!1,this.editModeContentType="question",this.richTextareaPreset=Ui.c,this.richTextareaFormControl=new Ke.e("",[Ke.x.required]),this.currentUser={fullName:k.c.getInstance().getFullName(),initials:k.c.getInstance().user_initials,avatarURL:k.c.getInstance().avatar_url}}ngOnInit(){this.discoverMentionConfigService.setConfig(Object.assign(Object.assign(Object.assign({},!!this.question.relatedContent.id&&{asset_id:this.question.relatedContent.id}),"coach_share"===this.question.relatedContent.type&&{asset_id:this.question.relatedContent.id}),"channel"===this.question.relatedContent.type&&{channel_id:this.question.relatedContent.channelID}))}onMessageAction(e,t,i){switch(e){case"edit":this._editMessage(t,i);break;case"delete":this._deleteMessage(t,i);break;case"follow":case"unfollow":this._toggleFollowingStatus()}}onCancelEditMessage(){this.editMode=!1,this.editModeContent=null,this.richTextareaFormControl.setValue(""),this._changeDetectorRef.detectChanges()}onSaveMessageChanges(){this._lrnGlobalSearchService.editMessage(this.editModeContentType,this.editModeContent,this.richTextareaFormControl.value).subscribe(e=>{e?(this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.changesSavedSuccessfully}),this.onCancelEditMessage()):this._docLayoutService.toast.showToast({type:"error",message:this.dictionary.changesNotSaved})})}onLikeAnswer(e){this._lrnGlobalSearchService.likeAnswer(e).subscribe(()=>{this._changeDetectorRef.detectChanges()})}onDislikeAnswer(e){this._lrnGlobalSearchService.dislikeAnswer(e).subscribe(()=>{this._changeDetectorRef.detectChanges()})}goToQuestionPage(e){this._router.navigate([e])}_editMessage(e,t){this.richTextareaFormControl.setValue((new Oy.a).transform(e.message,e.mentions||[])),this.editMode=!0,this.editModeContentType=t?"question":"answer",this.editModeContent=e,this._changeDetectorRef.detectChanges()}_deleteMessage(e,t){this._docLayoutService.dialog.showCommonDialog({title:this.dictionary.deleteQuestion,content:this.dictionary.deleteQuestionConfirmation,actions:[{id:"cancel",slot:"end",label:this.dictionary.cancel,type:"neutral"},{id:"confirm",slot:"end",label:this.dictionary.confirm,type:"negative"}]}).subscribe(i=>{"cancel"===i.actionID?i.actionSuccess.next(!0):this._lrnGlobalSearchService.deleteMessage(t?"question":"answer",e.id).subscribe(s=>{var n,a;s?(t?(this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.questionDeleted}),this.deleteQuestion.emit(e.id)):(this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.answerDeleted}),e.id===(null===(n=this.question.lastAnswer)||void 0===n?void 0:n.id)&&delete this.question.lastAnswer,e.id===(null===(a=this.question.bestAnswer)||void 0===a?void 0:a.id)&&delete this.question.bestAnswer,this._changeDetectorRef.detectChanges()),i.actionSuccess.next(!0)):(this._docLayoutService.toast.showToast({type:"error",message:this.dictionary.changesNotSaved}),i.actionSuccess.next(!1))})})}_toggleFollowingStatus(){this._lrnGlobalSearchService.toggleQuestionFollowingStatus(this.question).subscribe(e=>{this._docLayoutService.toast.showToast(e?this.question.following?{type:"success",message:this.dictionary.followSuccessful}:{type:"success",message:this.dictionary.unfollowSuccessful}:{type:"error",message:this.dictionary.changesNotSaved}),this._changeDetectorRef.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(c.i),c.dc(M.a),c.dc(Sy.a),c.dc(Ty))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-global-search-question"]],inputs:{question:"question"},outputs:{deleteQuestion:"deleteQuestion"},decls:3,vars:3,consts:[["class","global-search-question-related ui-typography-subtitle ui-color-typography-secondary",4,"ngIf"],["class","global-search-question-view",4,"ngIf"],["class","global-search-question-edit",4,"ngIf"],[1,"global-search-question-related","ui-typography-subtitle","ui-color-typography-secondary"],[3,"role","trigger"],[1,"global-search-question-view"],[3,"message","avatarImageUrl","avatarText","avatarIcon","titleActionText","ariaLabelHeaderMessage","time","date"],["class","global-search-question-follow-icon","role","presentation",3,"uiTooltip","uiAriaLabel",4,"ngIf"],["triggerType","icon","iconName","more-horizontal","tooltipPosition","above","menuHorizontalAlignment","before","menuVerticalAlignment","below",3,"selectable","tooltipLabel","selectOption"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","global-search-question-actions",4,"ngIf"],["role","presentation",1,"global-search-question-follow-icon",3,"uiTooltip","uiAriaLabel"],["name","eye","size","xs"],[3,"value"],[3,"message","title","titleActionText","time","date","showLikeButton","showDislikeButton","likes","dislikes","likeActive","dislikeActive","likeEnabled","dislikeEnabled","avatarImageUrl","avatarText","avatarIcon","ariaLabelHeaderMessage","ariaLabelLikeNotActive","ariaLabelLikeActive","ariaLabelDislikeNotActive","ariaLabelDislikeActive","ariaLabelNumberOfLikeAndDislikeActive","ariaLabelNumberOfLikes","ariaLabelNumberOfDislikes","like","dislike"],[1,"global-search-question-actions"],["color","accent",3,"label","role","trigger"],[1,"global-search-question-edit"],[1,"question-edit-author"],["size","sm",3,"uiAriaHidden","imageUrl","text"],[1,"question-edit-author-name","ui-typography-heading-5"],[3,"preset","inputFormControl","tributeCollection",4,"ngIf"],[1,"global-search-question-actions","global-search-question-edit-actions"],["color","accent",3,"label","trigger"],["color","neutral",3,"label","trigger"],[3,"preset","inputFormControl","tributeCollection"]],template:function(e,t){1&e&&(c.dd(0,Ey,5,5,"div",0),c.dd(1,By,18,31,"div",1),c.dd(2,$y,11,10,"div",2)),2&e&&(c.Dc("ngIf",t.question.hasRelatedContent),c.Mb(1),c.Dc("ngIf",!t.editMode),c.Mb(1),c.Dc("ngIf",t.editMode))},directives:[Ae.p,b.z,b.Ad,b.Dd,b.uc,b.wc,b.Nd,b.s,Ae.o,b.Ed,b.c,b.Eb,b.v,b.Bd,b.G,b.e,b.b,ds.a],pipes:[E.b,Oy.a,Xt.a],styles:["lrn-global-search-question{display:block;padding:var(--ui-spacing-sm);box-sizing:border-box;background-color:var(--ui-color-layout-surface)}lrn-global-search-question .global-search-question-related{margin-bottom:var(--ui-spacing-sm)}lrn-global-search-question .global-search-question-follow-icon{-webkit-margin-end:var(--ui-spacing-tiny);margin-inline-end:var(--ui-spacing-tiny)}lrn-global-search-question .global-search-question-actions{margin-top:var(--ui-spacing-sm)}lrn-global-search-question .global-search-question-edit-actions{display:flex;flex-direction:row-reverse}lrn-global-search-question .question-edit-author{display:flex;flex-direction:row;align-items:center;margin-bottom:var(--ui-spacing-xs)}lrn-global-search-question .question-edit-author span{margin:0 var(--ui-spacing-xxs)}"],encapsulation:2,changeDetection:0}),e})();const Yy=["filtersPanel"],Wy=["globalSearchTab"];function Qy(e,t){if(1&e&&c.ec(0,"doc-data-browser-filter-datetime",20),2&e){const e=c.vc().$implicit,t=c.vc(3);c.Dc("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}function Ky(e,t){if(1&e&&c.ec(0,"ui-data-browser-filter-single-selection",21),2&e){const e=c.vc().$implicit,t=c.vc(3);c.Dc("options",e.options)("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}const Xy=function(){return{category:"widgets"}},Jy=function(){return[]};function Zy(e,t){if(1&e&&(c.ec(0,"ui-data-browser-filter-multiple-selection",22),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc().$implicit,t=c.vc(3);c.Dc("options",e.options)("label",e.title)("searchPlaceholder",c.yc(1,6,"Search for...",c.Hc(11,Xy)))("key",e.code)("value",t.defaultFiltersValues[e.code]||c.Hc(12,Jy))("showMoreLabel",c.xc(2,9,t.dictionary.showMoreLabel)+" ({optionsCount})")}}function eC(e,t){if(1&e&&(c.ec(0,"ui-data-browser-filter-duration",23),c.wc(1,"t"),c.wc(2,"t"),c.wc(3,"t")),2&e){const e=c.vc().$implicit,t=c.vc(3);c.Dc("key",e.code)("label",c.xc(1,10,t.dictionary.durationFilterTitle))("value",t.defaultFiltersValues[e.code]||"all")("allDurationsLabel",c.xc(2,12,t.dictionary.allDuration))("customDurationLabel",c.xc(3,14,t.dictionary.customDuration))("minDuration",null==e.durationRange?null:e.durationRange.min)("maxDuration",null==e.durationRange?null:e.durationRange.max)("minSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][0]:null)("maxSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][1]:null)("step",60)}}function tC(e,t){if(1&e&&(c.hc(0),c.dd(1,Qy,1,3,"doc-data-browser-filter-datetime",16),c.dd(2,Ky,1,4,"ui-data-browser-filter-single-selection",17),c.dd(3,Zy,3,13,"ui-data-browser-filter-multiple-selection",18),c.dd(4,eC,4,16,"ui-data-browser-filter-duration",19),c.gc()),2&e){const e=t.$implicit;c.Mb(1),c.Dc("ngIf","timeframe"===e.type),c.Mb(1),c.Dc("ngIf","single-selection"===e.type),c.Mb(1),c.Dc("ngIf","multiple-selection"===e.type),c.Mb(1),c.Dc("ngIf","duration"===e.type&&(null==e.durationRange?null:e.durationRange.max)>0)}}function iC(e,t){if(1&e&&c.ec(0,"doc-data-browser-filter-datetime",20),2&e){const e=c.vc().$implicit,t=c.vc(4);c.Dc("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}function sC(e,t){if(1&e&&c.ec(0,"ui-data-browser-filter-single-selection",21),2&e){const e=c.vc().$implicit,t=c.vc(4);c.Dc("options",e.options)("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}function nC(e,t){if(1&e&&(c.ec(0,"ui-data-browser-filter-multiple-selection",22),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc().$implicit,t=c.vc(4);c.Dc("options",e.options)("label",e.title)("searchPlaceholder",c.yc(1,6,"Search for...",c.Hc(11,Xy)))("key",e.code)("value",t.defaultFiltersValues[e.code]||c.Hc(12,Jy))("showMoreLabel",c.xc(2,9,t.dictionary.showMoreLabel)+" ({optionsCount})")}}function aC(e,t){if(1&e&&(c.ec(0,"ui-data-browser-filter-duration",23),c.wc(1,"t"),c.wc(2,"t"),c.wc(3,"t")),2&e){const e=c.vc().$implicit,t=c.vc(4);c.Dc("key",e.code)("label",c.xc(1,10,t.dictionary.durationFilterTitle))("value",t.defaultFiltersValues[e.code]||"all")("allDurationsLabel",c.xc(2,12,t.dictionary.allDuration))("customDurationLabel",c.xc(3,14,t.dictionary.customDuration))("minDuration",null==e.durationRange?null:e.durationRange.min)("maxDuration",null==e.durationRange?null:e.durationRange.max)("minSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][0]:null)("maxSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][1]:null)("step",60)}}function oC(e,t){if(1&e&&(c.hc(0),c.dd(1,iC,1,3,"doc-data-browser-filter-datetime",16),c.dd(2,sC,1,4,"ui-data-browser-filter-single-selection",17),c.dd(3,nC,3,13,"ui-data-browser-filter-multiple-selection",18),c.dd(4,aC,4,16,"ui-data-browser-filter-duration",19),c.gc()),2&e){const e=t.$implicit;c.Mb(1),c.Dc("ngIf","timeframe"===e.type),c.Mb(1),c.Dc("ngIf","single-selection"===e.type),c.Mb(1),c.Dc("ngIf","multiple-selection"===e.type),c.Mb(1),c.Dc("ngIf","duration"===e.type&&(null==e.durationRange?null:e.durationRange.max)>0)}}function rC(e,t){if(1&e&&(c.jc(0,"ui-data-browser-filters-group",24),c.wc(1,"t"),c.dd(2,oC,5,4,"ng-container",13),c.ic()),2&e){const e=c.vc(3);c.Dc("showHeader",!0)("title",c.xc(1,3,e.dictionary.classroomFilters)),c.Mb(2),c.Dc("ngForOf",e.tabSummary.classroomFilters)}}function cC(e,t){if(1&e&&c.ec(0,"doc-data-browser-filter-datetime",20),2&e){const e=c.vc().$implicit,t=c.vc(4);c.Dc("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}function lC(e,t){if(1&e&&c.ec(0,"ui-data-browser-filter-single-selection",21),2&e){const e=c.vc().$implicit,t=c.vc(4);c.Dc("options",e.options)("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}function dC(e,t){if(1&e&&(c.ec(0,"ui-data-browser-filter-multiple-selection",22),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc().$implicit,t=c.vc(4);c.Dc("options",e.options)("label",e.title)("searchPlaceholder",c.yc(1,6,"Search for...",c.Hc(11,Xy)))("key",e.code)("value",t.defaultFiltersValues[e.code]||c.Hc(12,Jy))("showMoreLabel",c.xc(2,9,t.dictionary.showMoreLabel)+" ({optionsCount})")}}function uC(e,t){if(1&e&&(c.ec(0,"ui-data-browser-filter-duration",23),c.wc(1,"t"),c.wc(2,"t"),c.wc(3,"t")),2&e){const e=c.vc().$implicit,t=c.vc(4);c.Dc("key",e.code)("label",c.xc(1,10,t.dictionary.durationFilterTitle))("value",t.defaultFiltersValues[e.code]||"all")("allDurationsLabel",c.xc(2,12,t.dictionary.allDuration))("customDurationLabel",c.xc(3,14,t.dictionary.customDuration))("minDuration",null==e.durationRange?null:e.durationRange.min)("maxDuration",null==e.durationRange?null:e.durationRange.max)("minSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][0]:null)("maxSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][1]:null)("step",60)}}function hC(e,t){if(1&e&&(c.hc(0),c.dd(1,cC,1,3,"doc-data-browser-filter-datetime",16),c.dd(2,lC,1,4,"ui-data-browser-filter-single-selection",17),c.dd(3,dC,3,13,"ui-data-browser-filter-multiple-selection",18),c.dd(4,uC,4,16,"ui-data-browser-filter-duration",19),c.gc()),2&e){const e=t.$implicit;c.Mb(1),c.Dc("ngIf","timeframe"===e.type),c.Mb(1),c.Dc("ngIf","single-selection"===e.type),c.Mb(1),c.Dc("ngIf","multiple-selection"===e.type),c.Mb(1),c.Dc("ngIf","duration"===e.type&&(null==e.durationRange?null:e.durationRange.max)>0)}}function pC(e,t){if(1&e&&(c.jc(0,"ui-data-browser-filters-group",25),c.wc(1,"t"),c.dd(2,hC,5,4,"ng-container",13),c.ic()),2&e){const e=c.vc(3);c.Dc("showHeader",!0)("title",c.xc(1,3,e.dictionary.webinarFilters)),c.Mb(2),c.Dc("ngForOf",e.tabSummary.webinarFilters)}}function mC(e,t){if(1&e){const e=c.kc();c.jc(0,"ui-data-browser-panel-filters",11,12),c.rc("filtersChange",function(){return c.Uc(e),c.vc(2).onFiltersChange()}),c.wc(2,"t"),c.wc(3,"t"),c.wc(4,"t"),c.wc(5,"t"),c.wc(6,"t"),c.dd(7,tC,5,4,"ng-container",13),c.dd(8,rC,3,5,"ui-data-browser-filters-group",14),c.dd(9,pC,3,5,"ui-data-browser-filters-group",15),c.ic()}if(2&e){const e=c.vc(2);c.Dc("filtersLabel",c.xc(2,8,e.dictionary.filtersLabel))("clearFiltersLabel",c.xc(3,10,e.dictionary.clearFiltersLabel))("closeFiltersLabel",c.xc(4,12,e.dictionary.closeFiltersLabel))("activeFiltersCountLabelSingular","{activeFiltersCount} "+c.xc(5,14,e.dictionary.activeFiltersCountLabelSingular))("activeFiltersCountLabelPlural","{activeFiltersCount} "+c.xc(6,16,e.dictionary.activeFiltersCountLabelPlural)),c.Mb(7),c.Dc("ngForOf",e.tabSummary.filters),c.Mb(1),c.Dc("ngIf",e.tabSummary.classroomFilters.length),c.Mb(1),c.Dc("ngIf",e.tabSummary.webinarFilters.length)}}const gC=function(e){return{activeSortingOption:e}};function bC(e,t){if(1&e){const e=c.kc();c.jc(0,"ui-data-browser-control-dropdown",26),c.rc("selectOption",function(t){return c.Uc(e),c.vc(2).onSelectSortingOption(t)}),c.wc(1,"t"),c.ic()}if(2&e){const e=c.vc(2);c.Dc("options",e.sortingOptions)("defaultValue",e.viewConfiguration.sort)("ariaLabel",c.yc(1,3,"Sort by: {activeSortingOption}",c.Ic(6,gC,e.currentSortingLabel)))}}function fC(e,t){if(1&e&&(c.ec(0,"ui-list-item-formal-content",35),c.wc(1,"t"),c.wc(2,"t"),c.wc(3,"t"),c.wc(4,"t"),c.wc(5,"t"),c.wc(6,"t"),c.wc(7,"t"),c.wc(8,"t"),c.wc(9,"t"),c.wc(10,"t"),c.wc(11,"t"),c.wc(12,"t"),c.wc(13,"t")),2&e){const e=c.vc().$implicit,t=c.vc(3);c.Dc("imageUrl",e.resultDetailsMyCoursesAndLearningPlans.imageUrl)("title",e.resultDetailsMyCoursesAndLearningPlans.title)("rating",e.resultDetailsMyCoursesAndLearningPlans.rating)("itemTypeLabel",c.xc(1,23,e.resultDetailsMyCoursesAndLearningPlans.itemTypeLabel))("statusDetails",c.xc(2,25,e.resultDetailsMyCoursesAndLearningPlans.statusDetails))("statusDetailsColor",e.resultDetailsMyCoursesAndLearningPlans.statusDetailsColor)("language",c.xc(3,27,e.resultDetailsMyCoursesAndLearningPlans.language))("duration",e.resultDetailsMyCoursesAndLearningPlans.duration)("primaryStatusType",e.resultDetailsMyCoursesAndLearningPlans.primaryStatusType)("primaryStatusLabel",c.xc(4,29,e.resultDetailsMyCoursesAndLearningPlans.primaryStatusLabel))("locked",e.resultDetailsMyCoursesAndLearningPlans.locked)("route",e.resultDetailsMyCoursesAndLearningPlans.route)("itemsCountLabel",c.xc(5,31,e.resultDetailsMyCoursesAndLearningPlans.itemsCountLabel))("highlight",null==e.resultDetailsMyCoursesAndLearningPlans.highlight?null:e.resultDetailsMyCoursesAndLearningPlans.highlight.highlight)("highlightType",null==e.resultDetailsMyCoursesAndLearningPlans.highlight?null:e.resultDetailsMyCoursesAndLearningPlans.highlight.highlightType)("highlightTypeLabel",c.xc(6,33,null==e.resultDetailsMyCoursesAndLearningPlans.highlight?null:e.resultDetailsMyCoursesAndLearningPlans.highlight.highlightTypeLabel)+":")("highlightExtended",c.xc(7,35,null==e.resultDetailsMyCoursesAndLearningPlans.highlight?null:e.resultDetailsMyCoursesAndLearningPlans.highlight.highlightExtended))("ratingExtended",c.xc(8,37,e.resultDetailsMyCoursesAndLearningPlans.ratingExtended))("languageExtended",c.xc(9,39,e.resultDetailsMyCoursesAndLearningPlans.languageExtended))("lockedLabelExtended",c.xc(10,41,t.dictionary.lockedItem))("itemTypeLabelExtended",c.xc(11,43,e.resultDetailsMyCoursesAndLearningPlans.itemTypeLabelExtended))("durationExtended",c.xc(12,45,e.resultDetailsMyCoursesAndLearningPlans.durationExtended))("itemsCountLabelExtended",c.xc(13,47,e.resultDetailsMyCoursesAndLearningPlans.itemsCountLabelExtended))}}function vC(e,t){if(1&e&&(c.ec(0,"ui-list-item-informal-content",36),c.wc(1,"t"),c.wc(2,"t"),c.wc(3,"t"),c.wc(4,"t"),c.wc(5,"t"),c.wc(6,"t"),c.wc(7,"t"),c.wc(8,"t"),c.wc(9,"t"),c.wc(10,"t")),2&e){const e=c.vc().$implicit,t=c.vc(3);c.Dc("rating",e.resultDetailsAsset.rating)("imageUrl",e.resultDetailsAsset.imageUrl)("title",e.resultDetailsAsset.title)("locked",e.resultDetailsAsset.loading)("route",e.resultDetailsAsset.route)("primaryStatusType",e.resultDetailsAsset.primaryStatusType)("primaryStatusLabel",c.xc(1,20,e.resultDetailsAsset.primaryStatusLabel))("author",e.resultDetailsAsset.author)("authorRoute",e.resultDetailsAsset.authorRoute)("itemTypeLabel",c.xc(2,22,e.resultDetailsAsset.itemTypeLabel))("itemsCountLabel",c.xc(3,24,e.resultDetailsAsset.itemsCountLabel))("highlight",null==e.resultDetailsAsset.highlight?null:e.resultDetailsAsset.highlight.highlight)("highlightType",null==e.resultDetailsAsset.highlight?null:e.resultDetailsAsset.highlight.highlightType)("highlightTypeLabel",c.xc(4,26,null==e.resultDetailsAsset.highlight?null:e.resultDetailsAsset.highlight.highlightTypeLabel)+":")("highlightExtended",c.xc(5,28,null==e.resultDetailsAsset.highlight?null:e.resultDetailsAsset.highlight.highlightExtended))("authorExtended",c.xc(6,30,e.resultDetailsAsset.authorExtended))("itemTypeLabelExtended",c.xc(7,32,e.resultDetailsAsset.itemTypeLabelExtended))("itemsCountLabelExtended",c.xc(8,34,e.resultDetailsAsset.itemsCountLabelExtended))("lockedLabelExtended",c.xc(9,36,t.dictionary.lockedItem))("ratingExtended",c.xc(10,38,e.resultDetailsAsset.ratingExtended))}}function _C(e,t){if(1&e&&(c.ec(0,"ui-list-item-catalog-content",37),c.wc(1,"t"),c.wc(2,"t"),c.wc(3,"t"),c.wc(4,"t"),c.wc(5,"t"),c.wc(6,"t"),c.wc(7,"t"),c.wc(8,"t"),c.wc(9,"t"),c.wc(10,"t"),c.wc(11,"t"),c.wc(12,"t"),c.wc(13,"t"),c.wc(14,"t"),c.wc(15,"t"),c.wc(16,"t"),c.wc(17,"t")),2&e){const e=c.vc().$implicit,t=c.vc(3);c.Dc("imageUrl",e.resultDetailsCatalog.imageUrl)("primaryStatusType",e.resultDetailsCatalog.primaryStatusType)("primaryStatusLabel",c.xc(1,28,e.resultDetailsCatalog.primaryStatusLabel))("locked",e.resultDetailsCatalog.locked)("route",e.resultDetailsCatalog.route)("title",e.resultDetailsCatalog.title)("statusDetails",c.xc(2,30,e.resultDetailsCatalog.statusDetails))("statusDetailsColor",e.resultDetailsCatalog.statusDetailsColor)("language",e.resultDetailsCatalog.language)("itemsCountLabel",c.xc(3,32,e.resultDetailsCatalog.itemsCountLabel))("duration",e.resultDetailsCatalog.duration)("enrollmentStatus",c.xc(4,34,e.resultDetailsCatalog.enrollmentStatus))("discountedPrice",c.xc(5,36,e.resultDetailsCatalog.discountedPrice))("price",c.xc(6,38,t.ecommerceAppIsActive?e.resultDetailsCatalog.price:""))("rating",e.resultDetailsCatalog.rating)("itemTypeLabel",c.xc(7,40,e.resultDetailsCatalog.itemTypeLabel))("enrollmentStatusExtended",c.xc(8,42,e.resultDetailsCatalog.enrollmentStatusExtended))("priceExtended",c.xc(9,44,e.resultDetailsCatalog.priceExtended))("languageExtended",c.xc(10,46,e.resultDetailsCatalog.languageExtended))("itemsCountLabelExtended",c.xc(11,48,e.resultDetailsCatalog.itemsCountLabelExtended))("durationExtended",c.xc(12,50,e.resultDetailsCatalog.durationExtended))("ratingExtended",c.xc(13,52,e.resultDetailsCatalog.ratingExtended))("itemTypeLabelExtended",c.xc(14,54,e.resultDetailsCatalog.itemTypeLabelExtended))("lockedLabelExtended",c.xc(15,56,t.dictionary.lockedItem))("highlight",null==e.resultDetailsCatalog.highlight?null:e.resultDetailsCatalog.highlight.highlight)("highlightType",null==e.resultDetailsCatalog.highlight?null:e.resultDetailsCatalog.highlight.highlightType)("highlightTypeLabel",c.xc(16,58,null==e.resultDetailsCatalog.highlight?null:e.resultDetailsCatalog.highlight.highlightTypeLabel)+":")("highlightExtended",c.xc(17,60,null==e.resultDetailsCatalog.highlight?null:e.resultDetailsCatalog.highlight.highlightExtended))}}function wC(e,t){if(1&e&&(c.ec(0,"dcb-ui-list-item-training-material-content",38),c.wc(1,"t"),c.wc(2,"t"),c.wc(3,"t"),c.wc(4,"t"),c.wc(5,"t"),c.wc(6,"t"),c.wc(7,"t")),2&e){const e=c.vc().$implicit,t=c.vc(3);c.Dc("imageUrl",e.resultDetailsTrainingMaterial.imageUrl)("locked",e.resultDetailsTrainingMaterial.locked)("route",e.resultDetailsTrainingMaterial.route)("title",e.resultDetailsTrainingMaterial.title)("itemTypeLabel",c.xc(1,16,e.resultDetailsTrainingMaterial.itemTypeLabel))("itemTypeLabelExtended",c.xc(2,18,e.resultDetailsTrainingMaterial.itemTypeLabelExtended))("courseName",e.resultDetailsTrainingMaterial.courseName)("courseRoute",e.resultDetailsTrainingMaterial.courseRoute)("courseOptionName",c.xc(3,20,e.resultDetailsTrainingMaterial.courseOptionName))("highlight",null==e.resultDetailsTrainingMaterial.highlight?null:e.resultDetailsTrainingMaterial.highlight.highlight)("highlightType",null==e.resultDetailsTrainingMaterial.highlight?null:e.resultDetailsTrainingMaterial.highlight.highlightType)("highlightTypeLabel",c.xc(4,22,null==e.resultDetailsTrainingMaterial.highlight?null:e.resultDetailsTrainingMaterial.highlight.highlightTypeLabel)+":")("highlightExtended",c.xc(5,24,null==e.resultDetailsTrainingMaterial.highlight?null:e.resultDetailsTrainingMaterial.highlight.highlightExtended))("courseExtended",c.xc(6,26,e.resultDetailsTrainingMaterial.courseLabelExtended))("lockedLabelExtended",c.xc(7,28,t.dictionary.lockedItem))("itemType",e.resultDetailsTrainingMaterial.lo_type)}}function yC(e,t){if(1&e){const e=c.kc();c.jc(0,"lrn-global-search-question",39),c.rc("deleteQuestion",function(t){return c.Uc(e),c.vc(4).onDeleteQuestion(t)}),c.ic()}if(2&e){const e=c.vc().$implicit;c.Dc("question",e.resultDetailsQuestion)}}function CC(e,t){if(1&e&&(c.jc(0,"div",29),c.dd(1,fC,14,49,"ui-list-item-formal-content",30),c.dd(2,vC,11,40,"ui-list-item-informal-content",31),c.dd(3,_C,18,62,"ui-list-item-catalog-content",32),c.dd(4,wC,8,30,"dcb-ui-list-item-training-material-content",33),c.dd(5,yC,1,1,"lrn-global-search-question",34),c.ic()),2&e){const e=t.$implicit,i=t.index,s=c.vc(3);c.Nb("aria-setsize",s.tabData.itemsCount)("aria-posinset",i+1),c.Mb(1),c.Dc("ngIf","my-courses"===e.resultType),c.Mb(1),c.Dc("ngIf","assets"===e.resultType),c.Mb(1),c.Dc("ngIf","course-catalog"===e.resultType),c.Mb(1),c.Dc("ngIf","training-material"===e.resultType),c.Mb(1),c.Dc("ngIf","questions-answers"===e.resultType)}}function SC(e,t){if(1&e&&(c.jc(0,"div",27),c.dd(1,CC,6,7,"div",28),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngForOf",e.tabData.results)}}function TC(e,t){1&e&&(c.jc(0,"div",40),c.ec(1,"ui-spinner",41),c.ic()),2&e&&(c.Mb(1),c.Dc("size","md"))}const kC=function(e){return{itemsCount:e}};function IC(e,t){if(1&e&&(c.jc(0,"ui-data-browser",4),c.dd(1,mC,10,18,"ui-data-browser-panel-filters",5),c.dd(2,bC,2,8,"ui-data-browser-control-dropdown",6),c.jc(3,"ui-data-browser-content"),c.jc(4,"div",7),c.jc(5,"div",8),c.fd(6),c.wc(7,"t"),c.ic(),c.dd(8,SC,2,1,"div",9),c.dd(9,TC,2,1,"div",10),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Dc("sticky",!1)("controlsShrinkBreakpoint","xs"),c.Mb(1),c.Dc("ngIf","all-results"!==e.tabSummary.id&&e.tabSummary.filters.length),c.Mb(1),c.Dc("ngIf","all-results"!==e.tabSummary.id),c.Mb(4),c.hd(" ",c.yc(7,7,1===e.tabData.itemsCount?e.dictionary.itemsCountSingular:e.dictionary.itemsCountPlural,c.Ic(10,kC,e.tabData.itemsCount))," "),c.Mb(2),c.Dc("ngIf",e.tabData.results.length),c.Mb(1),c.Dc("ngIf",e.loadingData)}}function xC(e,t){if(1&e&&(c.jc(0,"div",42),c.ec(1,"dcb-ui-blank-slate",43),c.wc(2,"t"),c.wc(3,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("title",c.xc(2,2,e.dictionary.blankSlateTitle))("description",c.xc(3,4,e.dictionary.blankSlateDescription))}}let DC=(()=>{class e{constructor(e,t,i,s){this._changeDetectorRef=e,this._translationService=t,this._viewportMonitorService=i,this._lrnGlobalSearchService=s,this.active=!1,this.viewConfigurationUpdate=new c.q,this.dictionary=py,this.loadingData=!0,this.sortingOptions=[],this.defaultFiltersValues={},this.activeFiltersCount=0,this._initTabData()}ngOnChanges(e){e.viewConfiguration&&e.viewConfiguration.firstChange&&this.viewConfiguration&&(this.defaultFiltersValues=this.viewConfiguration.filters),e.tabSummary&&this.tabSummary&&this._initSortingDropdown(),e.active&&this.active&&!this.tabData.results.length&&this.tabSummary.resultsCount&&this._getTabData()}ngAfterViewInit(){this.ecommerceAppIsActive=k.b.getInstance().isPluginActive("EcommerceApp"),this._viewportMonitorService.registerContainer("global-search-tab-"+this.tabSummary.id).subscribe(e=>{e.elementInfo.isInViewport.isBottomInViewport&&this._loadNextChunk()}),this._viewportMonitorService.addElements("global-search-tab-"+this.tabSummary.id,[this.globalSearchTab],{events:[Iy.b.ElementBottomEntersViewport]})}ngOnDestroy(){this._viewportMonitorService.unregisterContainer("global-search-tab-"+this.tabSummary.id),this._getTabDataSubscription&&this._getTabDataSubscription.unsubscribe()}onFiltersChange(){this.activeFiltersCount=this.filtersPanel.activeFiltersCount,this.viewConfiguration.filters=this.filtersPanel.getActiveFiltersValues(!0),this.viewConfigurationUpdate.emit(),this._initTabData(),this._getTabData()}onSelectSortingOption(e){this.viewConfiguration.sort=e,this.viewConfigurationUpdate.emit(),this._initTabData(),this._getTabData()}onDeleteQuestion(e){const t=this.tabData.results.findIndex(t=>{var i;return t.resultType===ly.QUESTIONS_AND_ANSWERS&&(null===(i=t.resultDetailsQuestion)||void 0===i?void 0:i.question.id)===e});-1!==t&&(this.tabData.results.splice(t,1),this.tabData.itemsCount--),this._changeDetectorRef.detectChanges()}_initSortingDropdown(){this.sortingOptions=function(e,t){let i=[];return e!==ly.ALL_RESULTS&&(i.push({label:t.instant(py.sortBestMatch.query,{category:py.sortBestMatch.category}),value:"_score desc"}),e!==ly.QUESTIONS_AND_ANSWERS&&i.push({label:t.instant(py.sortNameAsc.query,{category:py.sortNameAsc.category}),value:"titlesort asc"},{label:t.instant(py.sortNameDesc.query,{category:py.sortNameDesc.category}),value:"titlesort desc"}),e!==ly.TRAINING_MATERIAL&&e!==ly.COURSE_CATALOG&&i.push({label:t.instant(py.sortNewestToOldest.query,{category:py.sortNewestToOldest.category}),value:"created desc"},{label:t.instant(py.sortOldestToNewest.query,{category:py.sortOldestToNewest.category}),value:"created asc"}),e===ly.COURSE_CATALOG&&i.push({label:t.instant(py.sortLowestPriceFirst.query,{category:py.sortLowestPriceFirst.category}),value:"price asc"},{label:t.instant(py.sortHighestPriceFirst.query,{category:py.sortHighestPriceFirst.category}),value:"price desc"})),i}(this.tabSummary.id,this._translationService),this.currentSortingLabel=function(e,t){let i="";switch(e){case"_score desc":i=t.instant(py.sortBestMatch.query,{category:py.sortBestMatch.category});break;case"titlesort asc":i=t.instant(py.sortNameAsc.query,{category:py.sortNameAsc.category});break;case"titlesort desc":i=t.instant(py.sortNameDesc.query,{category:py.sortNameDesc.category});break;case"created desc":i=t.instant(py.sortNewestToOldest.query,{category:py.sortNewestToOldest.category});break;case"created asc":i=t.instant(py.sortOldestToNewest.query,{category:py.sortOldestToNewest.category});break;case"price asc":i=t.instant(py.sortLowestPriceFirst.query,{category:py.sortLowestPriceFirst.category});break;case"price desc":i=t.instant(py.sortHighestPriceFirst.query,{category:py.sortHighestPriceFirst.category})}return i}(this.viewConfiguration.sort,this._translationService)}_getTabData(){this._getTabDataSubscription&&this._getTabDataSubscription.unsubscribe(),this.loadingData=!0,this._changeDetectorRef.detectChanges(),this._getTabDataSubscription=this._lrnGlobalSearchService.getTabData(this.searchCriteria,this.tabSummary.id,this.viewConfiguration,this.tabData.nextResultIndex).subscribe(e=>{this.tabData.nextResultIndex=e.nextResultIndex,this.tabData.otherResultsAvailable=e.otherResultsAvailable,this.tabData.itemsCount=e.itemsCount,this.tabData.results.push(...e.results),this.loadingData=!1,this._changeDetectorRef.detectChanges();const t=this._viewportMonitorService.getElementsPositionInfo("global-search",[this.globalSearchTab])[0];t&&t.isInViewport.isBottomInViewport&&this._loadNextChunk()})}_loadNextChunk(){!this.loadingData&&this.tabData.otherResultsAvailable&&this.tabData.itemsCount!==this.tabData.nextResultIndex&&this._getTabData()}_initTabData(){this.tabData={itemsCount:0,otherResultsAvailable:!0,nextResultIndex:0,results:[]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i),c.dc(u.h),c.dc(xy.a),c.dc(Ty))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-global-search-tab"]],viewQuery:function(e,t){if(1&e&&(c.md(Yy,1),c.md(Wy,1)),2&e){let e;c.Qc(e=c.sc())&&(t.filtersPanel=e.first),c.Qc(e=c.sc())&&(t.globalSearchTab=e.first)}},inputs:{active:"active",searchCriteria:"searchCriteria",tabSummary:"tabSummary",viewConfiguration:"viewConfiguration"},outputs:{viewConfigurationUpdate:"viewConfigurationUpdate"},features:[c.Kb],decls:4,vars:2,consts:[[1,"global-search-tab-wrapper"],["globalSearchTab",""],[3,"sticky","controlsShrinkBreakpoint",4,"ngIf"],["class","global-search-tab-blank-slate",4,"ngIf"],[3,"sticky","controlsShrinkBreakpoint"],[3,"filtersLabel","clearFiltersLabel","closeFiltersLabel","activeFiltersCountLabelSingular","activeFiltersCountLabelPlural","filtersChange",4,"ngIf"],["position","end","triggerIcon","sort-top",3,"options","defaultValue","ariaLabel","selectOption",4,"ngIf"],[1,"global-search-tab-content-wrapper"],[1,"global-search-tab-items-count","ui-typography-subtitle"],["class","global-search-tab-list-items ui-shadow-md","role","list",4,"ngIf"],["class","global-search-tab-spinner",4,"ngIf"],[3,"filtersLabel","clearFiltersLabel","closeFiltersLabel","activeFiltersCountLabelSingular","activeFiltersCountLabelPlural","filtersChange"],["filtersPanel",""],[4,"ngFor","ngForOf"],["groupName","classroom","iconName","classroom",3,"showHeader","title",4,"ngIf"],["groupName","webinar","iconName","webinar",3,"showHeader","title",4,"ngIf"],[3,"label","key","value",4,"ngIf"],[3,"options","label","key","value",4,"ngIf"],[3,"options","label","searchPlaceholder","key","value","showMoreLabel",4,"ngIf"],["defaultValue","all",3,"key","label","value","allDurationsLabel","customDurationLabel","minDuration","maxDuration","minSelectedDuration","maxSelectedDuration","step",4,"ngIf"],[3,"label","key","value"],[3,"options","label","key","value"],[3,"options","label","searchPlaceholder","key","value","showMoreLabel"],["defaultValue","all",3,"key","label","value","allDurationsLabel","customDurationLabel","minDuration","maxDuration","minSelectedDuration","maxSelectedDuration","step"],["groupName","classroom","iconName","classroom",3,"showHeader","title"],["groupName","webinar","iconName","webinar",3,"showHeader","title"],["position","end","triggerIcon","sort-top",3,"options","defaultValue","ariaLabel","selectOption"],["role","list",1,"global-search-tab-list-items","ui-shadow-md"],["role","listitem",4,"ngFor","ngForOf"],["role","listitem"],[3,"imageUrl","title","rating","itemTypeLabel","statusDetails","statusDetailsColor","language","duration","primaryStatusType","primaryStatusLabel","locked","route","itemsCountLabel","highlight","highlightType","highlightTypeLabel","highlightExtended","ratingExtended","languageExtended","lockedLabelExtended","itemTypeLabelExtended","durationExtended","itemsCountLabelExtended",4,"ngIf"],[3,"rating","imageUrl","title","locked","route","primaryStatusType","primaryStatusLabel","author","authorRoute","itemTypeLabel","itemsCountLabel","highlight","highlightType","highlightTypeLabel","highlightExtended","authorExtended","itemTypeLabelExtended","itemsCountLabelExtended","lockedLabelExtended","ratingExtended",4,"ngIf"],[3,"imageUrl","primaryStatusType","primaryStatusLabel","locked","route","title","statusDetails","statusDetailsColor","language","itemsCountLabel","duration","enrollmentStatus","discountedPrice","price","rating","itemTypeLabel","enrollmentStatusExtended","priceExtended","languageExtended","itemsCountLabelExtended","durationExtended","ratingExtended","itemTypeLabelExtended","lockedLabelExtended","highlight","highlightType","highlightTypeLabel","highlightExtended",4,"ngIf"],[3,"imageUrl","locked","route","title","itemTypeLabel","itemTypeLabelExtended","courseName","courseRoute","courseOptionName","highlight","highlightType","highlightTypeLabel","highlightExtended","courseExtended","lockedLabelExtended","itemType",4,"ngIf"],[3,"question","deleteQuestion",4,"ngIf"],[3,"imageUrl","title","rating","itemTypeLabel","statusDetails","statusDetailsColor","language","duration","primaryStatusType","primaryStatusLabel","locked","route","itemsCountLabel","highlight","highlightType","highlightTypeLabel","highlightExtended","ratingExtended","languageExtended","lockedLabelExtended","itemTypeLabelExtended","durationExtended","itemsCountLabelExtended"],[3,"rating","imageUrl","title","locked","route","primaryStatusType","primaryStatusLabel","author","authorRoute","itemTypeLabel","itemsCountLabel","highlight","highlightType","highlightTypeLabel","highlightExtended","authorExtended","itemTypeLabelExtended","itemsCountLabelExtended","lockedLabelExtended","ratingExtended"],[3,"imageUrl","primaryStatusType","primaryStatusLabel","locked","route","title","statusDetails","statusDetailsColor","language","itemsCountLabel","duration","enrollmentStatus","discountedPrice","price","rating","itemTypeLabel","enrollmentStatusExtended","priceExtended","languageExtended","itemsCountLabelExtended","durationExtended","ratingExtended","itemTypeLabelExtended","lockedLabelExtended","highlight","highlightType","highlightTypeLabel","highlightExtended"],[3,"imageUrl","locked","route","title","itemTypeLabel","itemTypeLabelExtended","courseName","courseRoute","courseOptionName","highlight","highlightType","highlightTypeLabel","highlightExtended","courseExtended","lockedLabelExtended","itemType"],[3,"question","deleteQuestion"],[1,"global-search-tab-spinner"],[3,"size"],[1,"global-search-tab-blank-slate"],["illustrationName","no-result-found","illustrationSize","md",3,"title","description"]],template:function(e,t){1&e&&(c.jc(0,"div",0,1),c.dd(2,IC,10,12,"ui-data-browser",2),c.dd(3,xC,4,6,"div",3),c.ic()),2&e&&(c.Mb(2),c.Dc("ngIf",t.tabSummary.resultsCount),c.Mb(1),c.Dc("ngIf",0===t.tabSummary.resultsCount||!t.loadingData&&!t.tabData.results.length))},directives:[Ae.p,b.jb,b.kb,b.xb,Ae.o,Dy.a,b.sb,b.qb,b.pb,b.tb,b.mb,b.qc,b.rc,b.oc,b.tc,Hy,b.fd,b.o],pipes:[E.b],styles:["lrn-global-search-tab .global-search-tab-spinner{padding:var(--ui-spacing-md) 0;display:flex;justify-content:center;align-items:center}lrn-global-search-tab .global-search-tab-items-count{margin-bottom:var(--ui-spacing-sm)}lrn-global-search-tab .global-search-tab-list-items>*{display:block;border-bottom:solid var(--ui-size-border-xs) var(--ui-color-border-neutral)}lrn-global-search-tab .global-search-tab-list-items>:last-child{border-bottom:none}lrn-global-search-tab .ui-data-browser-controls-bar{margin-bottom:var(--ui-spacing-sm)}[lang=zh-Hant] lrn-global-search-tab b,[lang=zh] lrn-global-search-tab b{color:red}"],encapsulation:2,changeDetection:0}),e})();const OC=["tabs"],EC=function(e){return{resultsCount:e}};function PC(e,t){if(1&e){const e=c.kc();c.jc(0,"dcb-ui-tab-horizontal",3),c.wc(1,"t"),c.jc(2,"div",4),c.jc(3,"div",5),c.jc(4,"div",6),c.jc(5,"lrn-global-search-tab",7),c.rc("viewConfigurationUpdate",function(){return c.Uc(e),c.vc().onViewConfigurationUpdate()}),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=t.$implicit,i=c.vc();c.Dc("title",e.title+" ("+e.resultsCount+")")("ariaLabel",e.title+c.yc(1,7,i.dictionary.resultsCount,c.Ic(10,EC,e.resultsCount)))("tabName",e.id),c.Mb(5),c.Dc("active",i.viewConfiguration.tab===e.id)("searchCriteria",i.searchCriteria)("tabSummary",e)("viewConfiguration",i.viewConfiguration)}}let MC=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this._route=e,this._router=t,this._changeDetectorRef=i,this._docLayoutService=s,this._queryStringManagerService=n,this._lrnGlobalSearchService=a,this._docWidgetMyCoursesAndLearningPlansService=o,this._translationService=r,this.viewConfiguration={tab:ly.ALL_RESULTS,sort:"best-match",filters:{}},this.dictionary=py,this._ngUnsubscribe$=new gt.a}ngOnInit(){this._subscribeToQueryStringParamsChange(),this._subscribeToRouteParamsChange()}ngOnDestroy(){this._ngUnsubscribe$.next(),this._ngUnsubscribe$.complete(),this._queryStringManagerService.unregisterComponent("search"),this._queryStringManagerService.unregisterComponent("ctl")}onChangeTab(e){e.next(!0),this.viewConfiguration.tab!==this.tabs.activeTab&&(this.viewConfiguration.tab=this.tabs.activeTab,this.viewConfiguration.sort="best-match",this.viewConfiguration.filters={}),this._updateQueryParams(),this._changeDetectorRef.detectChanges()}onViewConfigurationUpdate(){this._updateQueryParams()}_setBreadcrumbs(){this._docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Je.a.t("standard",'Results for "{searchCriteria}"',{searchCriteria:this.searchCriteria}),href:this._router.url}])}_setPageTitle(){this._docLayoutService.header.showTitleBar({title:Je.a.t("standard",'Results for "{searchCriteria}"',{searchCriteria:this.searchCriteria}),fullWidth:!0,mode:"seamless"})}_setSearchCriteria(e){this.searchCriteria=e.search.replace(/<\/?[^>]+(>|$)/g,"")}_subscribeToQueryStringParamsChange(){this._queryStringManagerService.registerComponent("search").pipe(Object(bt.a)(this._ngUnsubscribe$)).subscribe(e=>{this.viewConfiguration=function(e){const t={tab:e.tab?e.tab.values:ly.ALL_RESULTS,sort:e.v?e.v.values:"best-match",filters:{}};return Object.keys(e).forEach(i=>{var s;"tab"!==i&&"v"!==i&&(t.filters[(s=i,Object.keys(hy).find(e=>hy[e]===s)||s)]=e[i].values)}),t}(e.queryStringObject)}),this._queryStringManagerService.registerComponent("ctl").pipe(Object(bt.a)(this._ngUnsubscribe$)).subscribe(e=>{if(Object.keys(e.queryStringObject).length){const i=((t=e.queryStringObject).tab={values:ly.COURSE_CATALOG},t);this._queryStringManagerService.updateQueryStringParams("ctl",{}).subscribe(()=>{this._queryStringManagerService.updateQueryStringParams("search",i),this._queryStringManagerService.unregisterComponent("ctl")})}var t})}_subscribeToRouteParamsChange(){this._route.params.subscribe(e=>{this._setSearchCriteria(e),this._setPageTitle(),this._setBreadcrumbs(),this.tabsSummary&&(this.viewConfiguration.tab=ly.ALL_RESULTS,this.viewConfiguration.sort="best-match",this.viewConfiguration.filters={},this.tabsSummary=[],this._changeDetectorRef.detectChanges()),this._lrnGlobalSearchService.getGlobalSearchTabsSummary(this.searchCriteria).subscribe(e=>{this.tabsSummary=e,this._changeDetectorRef.detectChanges(),this._docWidgetMyCoursesAndLearningPlansService.fetchAvailableChannels().then(e=>{const t=[{value:"0",label:this._translationService.instant(this.dictionary.notAssignedChannel.key,this.dictionary.notAssignedChannel.category)}];t.push(...e);const i=this.tabsSummary.findIndex(e=>"my-courses"===e.id),s=this.tabsSummary[i].filters.findIndex(e=>"ch"===e.code);i>-1&&s>-1&&(this.tabsSummary[i].filters[s].options=[...t]);const n=this.tabsSummary.findIndex(e=>"questions-answers"===e.id),a=this.tabsSummary[n].filters.findIndex(e=>"ch"===e.code);n>-1&&a>-1&&(this.tabsSummary[n].filters[a].options=[...t])})})})}_updateQueryParams(){this._queryStringManagerService.updateQueryStringParams("search",function(e){const t={};return e.tab!==ly.ALL_RESULTS&&(t.tab={values:e.tab},"best-match"!==e.sort&&(t.v={values:e.sort}),Object.keys(e.filters).forEach(i=>{var s;t[(s=i,hy[s]||s)]={values:e.filters[i]}})),t}(this.viewConfiguration)),setTimeout(()=>{this._setPageTitle()})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.a),c.dc(s.h),c.dc(c.i),c.dc(M.a),c.dc($w.a),c.dc(Ty),c.dc(ky.a),c.dc(u.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-global-search"]],viewQuery:function(e,t){if(1&e&&c.md(OC,1),2&e){let e;c.Qc(e=c.sc())&&(t.tabs=e.first)}},decls:3,vars:2,consts:[[3,"activeTab","changeTab"],["tabs",""],[3,"title","ariaLabel","tabName",4,"ngFor","ngForOf"],[3,"title","ariaLabel","tabName"],[1,"global-search-tab"],[1,"ui-row-narrow"],[1,"ui-col-24"],[3,"active","searchCriteria","tabSummary","viewConfiguration","viewConfigurationUpdate"]],template:function(e,t){1&e&&(c.jc(0,"dcb-ui-tabs-horizontal",0,1),c.rc("changeTab",function(e){return t.onChangeTab(e)}),c.dd(2,PC,6,12,"dcb-ui-tab-horizontal",2),c.ic()),2&e&&(c.Dc("activeTab",t.viewConfiguration.tab),c.Mb(2),c.Dc("ngForOf",t.tabsSummary))},directives:[b.vd,Ae.o,b.ld,DC],pipes:[E.b],styles:["lrn-global-search .global-search-tab{min-height:calc(100vh - 250px);box-sizing:border-box;padding:var(--ui-spacing-xl) 0 var(--ui-spacing-huge) 0}"],encapsulation:2,changeDetection:0}),e})();function AC(e,t){1&e&&c.ec(0,"lrn-global-search")}function LC(e,t){if(1&e&&c.ec(0,"tabs",4),2&e){const e=c.vc(2);c.ad(e.tabsParams.style),c.Dc("panels",e.tabsParams.panels)("reInitTabsOnChange",!1)("initialTab",e.tabsParams.initialTab)("initOnlyActiveTab",!0)("materialWrapper",!0)}}function jC(e,t){if(1&e&&(c.jc(0,"div",2),c.dd(1,LC,1,7,"tabs",3),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",e.showTabs)}}let FC=(()=>{class e{constructor(e,t,i,s,n,a,o,r){if(this.location=e,this.router=t,this.route=i,this.pageService=s,this.backend=n,this.docLayoutService=a,this.queryStringManagerService=o,this.toggleService=r,this.newGlobalSearchAvailable=this.toggleService.isOn(u.f.TOGGLE_NEW_GLOBAL_SEARCH),this.showTabs=!1,this.queryUrlParams={ctl:null},this.getTabTitle=e=>`${e.title}${void 0!==e.count?` (${e.count})`:""}`,!this.newGlobalSearchAvailable){this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Si.a.allResults,href:this.router.url}]);const e=this.queryStringManagerService.registerComponent("ctl");this.queryStringManagerSubscriber=e.subscribe(e=>{this.queryUrlParams.ctl=e.queryStringObject,Object.entries(this.queryUrlParams.ctl).length>0&&(this.tabActive=te.j.COURSES_CATALOG)}),this.route.params.subscribe(e=>{this.showTabs=!1,this.searchCriteria=e.search.replace(/<\/?[^>]+(>|$)/g,""),this.tabsParams={panels:[],style:""},this.docLayoutService.header.showTitleBar({title:E.a.t("standard","All Results"),subtitle:E.a.t("standard",'You searched for "{0}"',{0:this.searchCriteria})}),this.backend.request("/manage/v1/globalsearch","GET",{criteria:this.searchCriteria,adv:1,g:[1,2,4,5]}).subscribe(t=>{const i=t.data;for(let e=0;e<i.tabs.length;e++)this.tabsParams.panels[e]={title:this.getTabTitle(i.tabs[e]),content:{params:{url:"/manage/v1/globalsearch/search",filters:i.tabs[e].filters,search:this.searchCriteria,group:i.tabs[e].group,useFakeData:!0,queryUrlParams:this.queryUrlParams},component:sy}};this.setActiveTab(i,e),this.tabsParams.reInitTabsOnChange=!1,this.showTabs=!0},e=>{this.docLayoutService.toast.showToast({message:e.message,type:"error"})})})}}ngOnInit(){this.newGlobalSearchAvailable||this.docLayoutService.header.showTitleBar({title:E.a.t("standard","All Results"),subtitle:E.a.t("standard",'You searched for "{0}"',{0:this.searchCriteria})})}setActiveTab(e,t){this.tabActive&&(e.active=this.tabActive);let i=this.tabsParams.panels[e.active];const s=t.activeTab;if(s)if(e.tabs[s-1].count>0)i=this.tabsParams.panels[s-1];else{const e=this.router.createUrlTree([{}],{relativeTo:this.route}).toString();this.location.replaceState(e)}this.tabsParams.initialTab=i}ngOnDestroy(){this.queryStringManagerSubscriber&&this.queryStringManagerSubscriber.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ae.k),c.dc(s.h),c.dc(s.a),c.dc(O.a),c.dc(S.a),c.dc(M.a),c.dc($w.a),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","advanced-global-search-wrapper",4,"ngIf"],[1,"advanced-global-search-wrapper"],[3,"panels","reInitTabsOnChange","initialTab","initOnlyActiveTab","style","materialWrapper",4,"ngIf"],[3,"panels","reInitTabsOnChange","initialTab","initOnlyActiveTab","materialWrapper"]],template:function(e,t){1&e&&(c.dd(0,AC,1,0,"lrn-global-search",0),c.dd(1,jC,2,1,"div",1)),2&e&&(c.Dc("ngIf",t.newGlobalSearchAvailable),c.Mb(1),c.Dc("ngIf",!t.newGlobalSearchAvailable))},directives:[Ae.p,MC,vn.a],encapsulation:2}),e})(),RC=(()=>{class e{constructor(e){this.router=e;let t=ki.a.getInstance(),i=t.get("original_url",null);if(i&&"/learn/home"!=i)t.remove("original_url"),i.startsWith("http")?window.location.href=i:i.indexOf("?hash=")>-1?this.router.navigateByUrl(i):this.router.navigate([i]);else{let t=o.a.getInstance().home_route;const i=e.routerState.snapshot.url.split("/learn/home;msg=");e.navigate(i.length>1&&void 0!==t[0]&&void 0!==i[1]?[t[0],{msg:i[1]}]:t)}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var NC=i("AC4d");function UC(e,t){if(1&e&&c.ec(0,"img",12),2&e){const e=c.vc().$implicit;c.Ec("src",e.logo_url,c.Xc)}}function qC(e,t){1&e&&c.ec(0,"i",13)}const zC=function(e){return{"no-image":e}};function VC(e,t){if(1&e&&(c.jc(0,"a",5),c.wc(1,"sanitizeUrl"),c.jc(2,"div",6),c.dd(3,UC,1,1,"img",7),c.dd(4,qC,1,0,"i",8),c.ic(),c.jc(5,"div",9),c.jc(6,"ul"),c.jc(7,"li"),c.jc(8,"h4",10),c.fd(9),c.ic(),c.ic(),c.jc(10,"li"),c.jc(11,"span",11),c.fd(12),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e){const e=t.$implicit,i=c.vc();c.Dc("href",c.xc(1,7,i.multidomainUrl(e.domain_url)),c.Xc),c.Mb(2),c.Dc("ngClass",c.Ic(9,zC,!i.isStringValid(e.logo_url))),c.Mb(1),c.Dc("ngIf",i.isStringValid(e.logo_url)),c.Mb(1),c.Dc("ngIf",!i.isStringValid(e.logo_url)),c.Mb(5),c.id("",e.name," ",i.prettyBranch(e.branch_path),""),c.Mb(3),c.hd(" ",e.domain_url," ")}}const BC=function(e){return{category:"multidomain",domain:e}};let GC=(()=>{class e{constructor(e,t,i){this.backendService=e,this.docLayoutService=t,this.router=i,this.localStorage=ki.a.getInstance(),this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Si.a.selectMultidomain,href:this.router.url}])}ngOnInit(){this.init()}init(){this.sessionInstance=o.a.getInstance(),this.platformInstance=x.b.getInstance(),this.currentDomain=this.backendService.getBaseUrl(!1),this.defaultDomain={id:null,name:null,logo:null,domain:null,domain_type:null,org_chart:null,logo_url:this.platformInstance.branding_elements_root_domain.logo_url,domain_url:this.platformInstance.getPlatformBaseUrl(),branch_path:[]};const e=JSON.parse(localStorage.getItem("access_token"));this.accessToken=e?`/learn/home;type=oauth2_response;access_token=${e.access_token}`:"",this.backendService.getAvailableMultidomains({client_ids:this.sessionInstance.available_multidomains},this.sessionInstance.id).subscribe(e=>{var t,i;(null!==(i=null===(t=e.data.items)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>0?this.availableDomains=e.data.items:(e.data.logos&&(this.defaultDomain.logo_url=e.data.logos.logo_url),this.availableDomains=[this.defaultDomain])},()=>{this.availableDomains=[this.defaultDomain]})}isStringValid(e){return e&&e.length>0}prettyBranch(e){return 0===e.length?"":`(${e.join("/")})`}multidomainUrl(e){let t="";return e.startsWith("http")||(t=`${window.location.protocol}//`),t+(e=e.replace("/lms/",""))+this.accessToken}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(M.a),c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["multidomain-selector"]],decls:7,vars:7,consts:[[1,"multidomain-selector-wrapper"],[1,"multidomain-warning-message","bg-warning","text-white"],[1,"warning-sign","zmdi","zmdi-alert-triangle"],[1,"inner-text"],["target","_blank","class","mdl-grid bg-white border-grey domain-wrapper",3,"href",4,"ngFor","ngForOf"],["target","_blank",1,"mdl-grid","bg-white","border-grey","domain-wrapper",3,"href"],[1,"image-holder","mdl-cell","mdl-cell--2-col",3,"ngClass"],["style","max-width: 100%",3,"src",4,"ngIf"],["class","zmdi zmdi-image-alt text-white zmdi-hc-3x",4,"ngIf"],[1,"mdl-cell","mdl-cell--9-col"],[1,"bolded","text-blue","multidomain-title"],[1,"bolded","text-grey-mid","multidomain-url"],[2,"max-width","100%",3,"src"],[1,"zmdi","zmdi-image-alt","text-white","zmdi-hc-3x"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.ec(2,"i",2),c.jc(3,"span",3),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.dd(6,VC,13,11,"a",4),c.ic()),2&e&&(c.Mb(4),c.gd(c.yc(5,2,"You\u2019re NOT authorized to access {domain}. Please select a platform to which you can access from the following list.",c.Ic(5,BC,t.currentDomain))),c.Mb(2),c.Dc("ngForOf",t.availableDomains))},directives:[Ae.o,Ae.n,Ae.p],pipes:[E.b,NC.a],encapsulation:2}),e})();var $C=i("9ig3"),HC=i("EhJz"),YC=i("phiu"),WC=i("dndX"),QC=i("dLU1"),KC=i("IYaI"),XC=i("kJyz"),JC=i("aFRn");let ZC=(()=>{class e{constructor(e,t,i,s,n){this._store=e,this.myCalendarActions=t,this.pageService=i,this.docLayoutService=s,this.router=n,this.monthsDelta=3,this.refreshTimestamp=new Date,this.calendarData={events:new gt.a,colors:new gt.a,view:new gt.a,export:new gt.a,locale:new gt.a,dateTimeLocale:new gt.a,monthHasEvents:new gt.a},this.dataBrowserModes=Oe.a,this.dataBrowserSource={mode:null,viewOptionLabel:null,filters:new Pe.a(null),appliedFiltersNumber:new Pe.a(null),displayedItemsNumber:new Pe.a(null),viewOptions:new Pe.a(null),disableViewOptions:!1,elementLabels:{singular:E.a.t("standard","_EVENT"),plural:E.a.t("menu","_EVENTS")}},this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Si.a.myCalendar,href:this.router.url}]),this.docLayoutService.header.showTitleBar({title:E.a.t("calendar","My Calendar"),subtitle:E.a.t("calendar","All your scheduled events are visible here"),icon:"zmdi-calendar",fullWidth:!1}),this.view="month",this.viewDate=new Date,this.startDate=this.getPrevMonthsFromDate(this.viewDate,this.monthsDelta),this.endDate=this.getNextMonthsFromDate(this.viewDate,this.monthsDelta)}onCalendarUpdate(e){const{view:t,viewDate:i,startDate:s,endDate:n,filters:a,forceRefreshData:o}=e;e={view:void 0!==t?t:this.view,viewDate:i,startDate:void 0!==s?Object($C.a)(s):this.getPrevMonthsFromDate(i,this.monthsDelta),endDate:void 0!==n?Object($C.a)(n):this.getNextMonthsFromDate(i,this.monthsDelta),filters:void 0!==a?a:this.activeFilters},this.updateViewOptionIfSearch(e.view),o&&(delete e.filters.search,this.activeFilters=e.filters),this.switchView(e.view,!1),this.view!==this.lastView&&this.dataBrowserSource.preselectedViewOption.setValue(this.view),(o||Object(HC.a)(e.viewDate,Object(YC.a)(this.endDate,1))||Object(WC.a)(e.viewDate,Object(QC.a)(this.startDate,1))||Object(HC.a)(new Date,Object(KC.a)(this.refreshTimestamp,10))||!Object(XC.a)(e.viewDate,this.viewDate))&&(this.refreshTimestamp=new Date,this.viewDate=e.viewDate,this.startDate=e.startDate,this.endDate=e.endDate,this._store.dispatch(this.myCalendarActions.updateMyCalendar(e)))}onEventsDisplayedChange(e){this.dataBrowserSource.displayedItemsNumber.next(e)}onFiltersUpdate(e){this.activeFilters=e,this._store.dispatch(this.myCalendarActions.updateMyCalendar({view:this.view,viewDate:this.viewDate,startDate:this.startDate,endDate:this.endDate,filters:this.activeFilters}))}onViewChange(e){this.switchView(e,!1)}switchView(e,t=!1){t?(this.view=this.lastView,this.dataBrowserSource.disableViewOptions=!1):(this.lastView=this.view,this.view=e,this.updateViewOptionIfSearch(e))}updateViewOptionIfSearch(e){this.dataBrowserSource.disableViewOptions="search"===e}getNextMonthsFromDate(e,t){return Object(QC.a)(Object($C.a)(e),t)}getPrevMonthsFromDate(e,t){return Object(YC.a)(Object($C.a)(e),t)}myCalendarReduxListener(){this.myCalendarSubscriber=this._store.select(ie.l).subscribe(e=>{e&&(this.currentState=e,"EVENTS_LOADED"===this.currentState.status&&(this.calendarData.events.next(this.currentState.events),this.calendarData.export.next(this.currentState.export),this.dataBrowserSource.appliedFiltersNumber.next(this.currentState.appliedFilters),this.currentState.filters&&void 0!==this.currentState.filters.search?this.switchView("search",!1):"search"===this.view&&this.switchView(this.lastView,!0)),"EVENTS_IN_YEAR_LOADED"===this.currentState.status&&this.calendarData.monthHasEvents.next(this.currentState.monthHasEvents),"EMPTY_EVENTS"===this.currentState.status&&(this.calendarData.events.next([]),this.calendarData.export.next("")))})}initDataBrowserDataSource(){this.dataBrowserSource.preselectedViewOption=new Ke.e;const e=[{title:E.a.t("standard","Refine"),code:"search",type:Oe.d.free_search_filter,params:{placeholder:E.a.t("standard","Search within results...")}},{title:E.a.t("standard","Course type"),code:"type",type:Oe.d.checkbox_with_dot_filter,params:{options:[{key:"elearning",label:E.a.t("standard","_ELEARNING"),labelColor:"blue",extraLabelInfo:E.a.t("standard","deadline")},{key:"classroom",label:E.a.t("standard","_CLASSROOM"),labelColor:"purple"},{key:"webinar",label:E.a.t("standard","Webinar"),labelColor:"orange"}]},values:""}];this.dataBrowserSource.filters.next(e);const t=[{label:E.a.t("classroom","Monthly"),value:"month"},{label:E.a.t("classroom","Weekly"),value:"week"},{label:E.a.t("calendar","Agenda"),value:"agenda"}];this.dataBrowserSource.viewOptions.next(t)}ngOnInit(){this.myCalendarReduxListener(),this._store.dispatch(this.myCalendarActions.initMyCalendar({view:this.view,viewDate:this.viewDate,startDate:this.startDate,endDate:this.endDate,filters:this.activeFilters})),this.dataBrowserSource.mode=this.dataBrowserModes.over,this.dataBrowserSource.viewOptionLabel=E.a.t("standard","Display view")}ngAfterViewInit(){this.initDataBrowserDataSource(),this.calendarData.locale.next(o.a.getInstance().language),this.calendarData.dateTimeLocale.next(o.a.getInstance().datetime_format)}ngOnDestroy(){this.myCalendarSubscriber.unsubscribe(),this.docLayoutService.header.hideTitleBar()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(v.d),c.dc(ga.d),c.dc(O.a),c.dc(M.a),c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["my-calendar"]],hostAttrs:["id","doc-page-my-calendar"],decls:3,vars:4,consts:[[1,"mdl-wrapper","data-browser-top-offset","my-calendar"],[3,"dataBrowserSource","onFiltersUpdate","onViewChange"],[3,"view","viewDate","calendarData","calendarUpdate","eventsDisplayed"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"data-browser",1),c.rc("onFiltersUpdate",function(e){return t.onFiltersUpdate(e)})("onViewChange",function(e){return t.onViewChange(e)}),c.jc(2,"docebo-calendar",2),c.rc("calendarUpdate",function(e){return t.onCalendarUpdate(e)})("eventsDisplayed",function(e){return t.onEventsDisplayedChange(e)}),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("dataBrowserSource",t.dataBrowserSource),c.Mb(1),c.Dc("view",t.view)("viewDate",t.viewDate)("calendarData",t.calendarData))},directives:[Le.a,JC.a],styles:["dropdown .dropdown-body{width:auto!important}"],encapsulation:2}),e})();var eS=i("Wsbo"),tS=i("itXk"),iS=i("tJOn");function sS(e,t){if(1&e&&(c.ec(0,"div",2),c.wc(1,"t")),2&e){const e=c.vc();c.Dc("innerHTML",c.xc(1,1,e.description),c.Vc)}}let nS=(()=>{class e{ngOnInit(){e.dialogFormControl.setErrors({invalid:!0})}}return e.dialogFormControl=new Ke.e,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["generate-recovery-key-dialog"]],inputs:{description:"description",otpFormControl:"otpFormControl",otpFieldParams:"otpFieldParams"},decls:2,vars:8,consts:[[3,"innerHTML",4,"ngIf"],[3,"label","value","type","floating_label","show_counter","showRequiredFieldIndicator","inputFormControl"],[3,"innerHTML"]],template:function(e,t){1&e&&(c.dd(0,sS,2,3,"div",0),c.ec(1,"textfield",1)),2&e&&(c.Dc("ngIf",t.description),c.Mb(1),c.Dc("label",t.otpFieldParams.label)("value",t.otpFieldParams.value)("type",t.otpFieldParams.type)("floating_label",t.otpFieldParams.floating_label)("show_counter",t.otpFieldParams.show_counter)("showRequiredFieldIndicator",t.otpFieldParams.showRequiredFieldIndicator)("inputFormControl",t.otpFieldParams.inputFormControl))},directives:[Ae.p,_t.a],pipes:[E.b],encapsulation:2,changeDetection:0}),e})();var aS=i("jtHE");function oS(e,t){if(1&e&&(c.ec(0,"div",2),c.wc(1,"t")),2&e){const e=c.vc();c.Dc("innerHTML",c.xc(1,1,e.description),c.Vc)}}let rS=(()=>{class e extends Uc.a{constructor(e){super(),this.changeDetector=e,this.toggleDetectChanges=new aS.a}ngOnInit(){e.dialogFormControl.setErrors({invalid:!0}),this.toggleDetectChanges.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{this.changeDetector.markForCheck()})}ngOnDestroy(){super.ngOnDestroy()}}return e.dialogFormControl=new Ke.e,e.\u0275fac=function(t){return new(t||e)(c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["unpair-dialog"]],inputs:{description:"description",recoveryKeyFormControl:"recoveryKeyFormControl",recoveryKeyFieldParams:"recoveryKeyFieldParams"},features:[c.Jb],decls:2,vars:8,consts:[[3,"innerHTML",4,"ngIf"],[3,"label","value","type","floating_label","show_counter","showRequiredFieldIndicator","inputFormControl"],[3,"innerHTML"]],template:function(e,t){1&e&&(c.dd(0,oS,2,3,"div",0),c.ec(1,"textfield",1)),2&e&&(c.Dc("ngIf",t.description),c.Mb(1),c.Dc("label",t.recoveryKeyFieldParams.label)("value",t.recoveryKeyFieldParams.value)("type",t.recoveryKeyFieldParams.type)("floating_label",t.recoveryKeyFieldParams.floating_label)("show_counter",t.recoveryKeyFieldParams.show_counter)("showRequiredFieldIndicator",t.recoveryKeyFieldParams.showRequiredFieldIndicator)("inputFormControl",t.recoveryKeyFieldParams.inputFormControl))},directives:[Ae.p,_t.a],pipes:[E.b],encapsulation:2,changeDetection:0}),e})();var cS=i("ubRZ"),lS=i("QTf/");function dS(e,t){if(1&e&&(c.ec(0,"p",4),c.wc(1,"t")),2&e){const e=c.vc(2);c.Dc("innerHTML",c.xc(1,1,e.description),c.Vc)}}function uS(e,t){if(1&e&&(c.hc(0),c.dd(1,dS,2,3,"p",2),c.jc(2,"ol",3),c.ec(3,"li",4),c.wc(4,"t"),c.jc(5,"li"),c.fd(6),c.wc(7,"t"),c.ic(),c.jc(8,"li"),c.fd(9),c.wc(10,"t"),c.jc(11,"div",5),c.ec(12,"qrcode",6),c.ic(),c.fd(13),c.wc(14,"t"),c.jc(15,"div",7),c.fd(16),c.ic(),c.ic(),c.jc(17,"li"),c.fd(18),c.wc(19,"t"),c.ec(20,"textfield",8),c.ic(),c.ic(),c.gc()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",e.description),c.Mb(2),c.Dc("innerHTML",c.xc(4,17,e.stepsTranslations.downloadApp),c.Vc),c.Mb(3),c.gd(c.xc(7,19,e.stepsTranslations.openApp)),c.Mb(3),c.hd(" ",c.xc(10,21,e.stepsTranslations.scanBarcode)," "),c.Mb(3),c.Dc("qrdata",e.qrCodeUri)("size",140)("level","M"),c.Mb(1),c.hd(" ",c.xc(14,23,e.stepsTranslations.enterKey)," "),c.Mb(3),c.gd(e.secret),c.Mb(2),c.hd(" ",c.xc(19,25,e.stepsTranslations.insertOtp)," "),c.Mb(2),c.Dc("label",e.otpFieldParams.label)("value",e.otpFieldParams.value)("type",e.otpFieldParams.type)("floating_label",e.otpFieldParams.floating_label)("show_counter",e.otpFieldParams.show_counter)("showRequiredFieldIndicator",e.otpFieldParams.showRequiredFieldIndicator)("inputFormControl",e.otpFieldParams.inputFormControl)}}function hS(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",9),c.jc(2,"div",10),c.ec(3,"i",11),c.ic(),c.jc(4,"span",12),c.fd(5),c.wc(6,"t"),c.wc(7,"date"),c.ic(),c.ic(),c.jc(8,"div",13),c.ec(9,"rectangular-button",14),c.ec(10,"rectangular-button",14),c.ic(),c.gc()),2&e){const e=c.vc();c.Mb(5),c.id("",c.xc(6,6,e.pairDateMessage)," ",c.xc(7,8,e.pairDate),""),c.Mb(4),c.Dc("properties",e.unpairAppButton.properties)("click",e.unpairAppButton.onClick),c.Mb(1),c.Dc("properties",e.generateRecoveryKeyButton.properties)("click",e.generateRecoveryKeyButton.onClick)}}function pS(e,t){if(1&e){const e=c.kc();c.hc(0),c.jc(1,"div",15),c.jc(2,"basic-button",16),c.rc("click",function(){return c.Uc(e),c.vc().activateAuthButton.onClick()}),c.ic(),c.ic(),c.gc()}if(2&e){const e=c.vc();c.Mb(2),c.Dc("type","normal")("state",e.otpFormControl.value?"enabled":"disabled")("text",e.activateAuthButton.properties.text)}}function mS(e,t){1&e&&(c.hc(0),c.ec(1,"widget-spinner"),c.gc())}let gS=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a){super(),this._ref=e,this._backendService=t,this.docLayoutService=i,this._pageService=s,this._store=n,this._sessionActions=a,this.isLoading=!0,this.isPaired=!1,this.pairDate$=this._store.pipe(Object(v.p)(iS.k)),this.stepsTranslations={downloadApp:E.a.t("esignature","Download the Google Authenticator app from {playStoreLinkStart}Google Play Store{linkEnd} or {appStoreLinkStart}App Store{linkEnd}.",{playStoreLinkStart:'<a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2" target="_blank" class="bolded">',appStoreLinkStart:'<a href="https://itunes.apple.com/us/app/google-authenticator/id388497605" target="_blank" class="bolded">',linkEnd:"</a>"}),openApp:E.a.t("esignature","Open the app and tap the Add button"),scanBarcode:E.a.t("esignature","Select the Scan Barcode option"),enterKey:E.a.t("esignature","If you don't have a camera, you can manually enter the key:"),insertOtp:E.a.t("esignature","Insert here the 6-digit verification code (OTP) that you see in the app")},this.description=E.a.t("esignature","Pair your authenticator app. In this way, you'll be able to generate verification codes from your device."),this.pairDateMessage=E.a.t("esignature","An app appears to have been associated with your profile on"),this.activateAuthButton={properties:{text:E.a.t("esignature","Activate authenticator app"),colorScheme:"positive-green",typeStyle:"outline"},onClick:()=>{this.otpFormControl.value&&this._backendService.request("/manage/v1/2fa/apps/pairings","POST",{otp:this.otpFormControl.value}).subscribe(e=>{this._pageService.dialog.open(this.saveRecoveryKeyDialogParams(e.data.recovery_code))},e=>{const t=e.error.message.join(" ");1003===e.code?(this.otpFormControl.setErrors({remote:t}),this._ref.markForCheck()):this.docLayoutService.toast.showToast({message:t,type:"error"})})}},this.unpairAppButton={properties:{text:E.a.t("esignature","Unpair"),colorScheme:"positive-green",typeStyle:"outline"},onClick:()=>{this.recoveryKeyFormControl.reset(),this._pageService.dialog.open(this.unpairDialogParams)}},this.generateRecoveryKeyButton={properties:{text:E.a.t("esignature","Generate a New Recovery Key"),colorScheme:"positive-green",typeStyle:"outline"},onClick:()=>{this.otpFormControl.reset(),this._pageService.dialog.open(this.generateRecoveryKeyDialogParams)}},this.otpFormControl=new Ke.e(null,[Ke.x.required,Ke.x.minLength(6),Ke.x.maxLength(6)]),this.otpFieldParams={label:E.a.t("esignature","OTP"),value:"",type:Xe.a.NUMBER,floating_label:!0,show_counter:!1,showRequiredFieldIndicator:!0,inputFormControl:this.otpFormControl},this.recoveryKeyFormControl=new Ke.e(null,[Ke.x.required,ud.a.authenticatorappRecoveryKey(),Ke.x.minLength(16),Ke.x.maxLength(16)]),this.recoveryKeyFieldParams={label:E.a.t("esignature","Recovery Key"),value:"",type:Xe.a.TEXT,floating_label:!0,show_counter:!1,showRequiredFieldIndicator:!0,inputFormControl:this.recoveryKeyFormControl}}saveRecoveryKeyDialogParams(e){return{width:460,height:300,title:E.a.t("esignature","{boldStart}Save Emergency Recovery Key{boldEnd}",{boldStart:"",boldEnd:""}),content:{component:bd,params:{description:E.a.t("esignature","If you lose access to your phone, you won't be able to authenticate yourself without this key. Print, copy or write down this new recovery key without letting anyone see it."),recoveryKey:e}},type:"confirmation",show_confirmation_check:!0,confirmation_check_text:E.a.t("mobile","I saved the recovery key"),overlayClick:!1,top_padding_content:"0",actions:[{type:"normal",properties:{text:E.a.t("standard","Done")},handler:e=>{const t=E.a.t("esignature",this.isPaired?"Recovery key created successfully":"The authenticator app paired successfully. You can now authenticate yourself and complete courses that require an E-Signature.");this.docLayoutService.toast.showToast({message:t,type:"success"}),this.updateSession(),e.close()}}]}}get unpairDialogParams(){return{width:600,height:250,title:E.a.t("esignature","Unpair Authenticator App"),content:{component:rS,params:{recoveryKeyFormControl:this.recoveryKeyFormControl,recoveryKeyFieldParams:this.recoveryKeyFieldParams,description:E.a.t("esignature","To unpair your authenticator app, you need to enter your recovery key. If you need any help with the recovery key, contact your system administrator.")}},inputFormControl:rS.dialogFormControl,type:"confirmation",show_confirmation_check:!1,overlayClick:!0,top_padding_content:"0",actions:[{type:"cancel",properties:{text:E.a.t("standard","_CANCEL")},handler:e=>{e.close()}},{type:"submit",properties:{text:E.a.t("esignature","Unpair")},handler:e=>{rS.dialogFormControl.setErrors({invalid:!0}),this._backendService.request("/manage/v1/2fa/users/pairings","DELETE",{identifier:"authenticatorapp",recovery_code:this.recoveryKeyFormControl.value}).subscribe(t=>{this.docLayoutService.toast.showToast({message:E.a.t("esignature","Authenticator app unpaired successfully"),type:"success"}),this.updateSession(),e.close(),this.otpFormControl.reset(),rS.dialogFormControl.setErrors(null)},t=>{1005===t.code?(this.recoveryKeyFormControl.setErrors({remote:E.a.t("mobile","This recovery Key is not valid")}),this._ref.markForCheck()):(this.docLayoutService.toast.showToast({message:t.error.message.join(" "),type:"error"}),e.close())})}}]}}get generateRecoveryKeyDialogParams(){return{width:600,height:280,title:E.a.t("esignature","Generate a New Recovery Key"),content:{component:nS,params:{otpFormControl:this.otpFormControl,otpFieldParams:this.otpFieldParams,description:E.a.t("esignature","In order to generate a new recovery key, please insert here the 6-digit verification code (OTP) that you see in the app. {newLine} Are you sure you want to generate a new recovery key?",{newLine:"<br />"})}},inputFormControl:nS.dialogFormControl,type:"confirmation",show_confirmation_check:!1,overlayClick:!0,top_padding_content:"0",actions:[{type:"cancel",properties:{text:E.a.t("standard","_CANCEL")},handler:e=>{e.close()}},{type:"submit",properties:{text:E.a.t("app7020","Generate")},handler:e=>{this._backendService.request("/manage/v1/2fa/apps/recovery_codes","POST",{otp:this.otpFormControl.value}).subscribe(t=>{e.close(),this._pageService.dialog.open(this.saveRecoveryKeyDialogParams(t.data.recovery_code))},e=>{this.docLayoutService.toast.showToast({message:e.error.message.join(" "),type:"error"})})}}]}}ngOnInit(){this.updateSession(),this.pairDate$.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{void 0!==e&&(this.pairDate=e,this.isPaired=!!this.pairDate,this.isLoading=!1,this.isPaired||(this.isLoading=!0,this.getAndSetSecrets()),this._ref.detectChanges())}),this.otpFieldParams.inputFormControl.statusChanges.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{nS.dialogFormControl.setErrors("VALID"===e?null:{invalid:!0})}),this.recoveryKeyFieldParams.inputFormControl.statusChanges.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{rS.dialogFormControl.setErrors("VALID"===e?null:{invalid:!0})})}updateSession(){this.isLoading=!0,this._ref.detectChanges(),this._store.dispatch(this._sessionActions.loadSession())}getAndSetSecrets(){this._backendService.request("/manage/v1/2fa/apps/secrets","GET").subscribe(e=>{const{qr_code_uri:t,secret:i}=e.data;this.isLoading=!1,this.qrCodeUri=t,this.secret=i,this._ref.detectChanges()},e=>{this.isLoading=!1,this.docLayoutService.toast.showToast({message:e.error.message.join(" "),type:"error"})})}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i),c.dc(S.a),c.dc(M.a),c.dc(O.a),c.dc(v.d),c.dc(cS.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["authenticator-app"]],features:[c.Jb],decls:5,vars:4,consts:[[1,"authenticator-wrap"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"steps"],[3,"innerHTML"],[1,"qr-code"],[3,"qrdata","size","level"],[1,"title-regular"],[3,"label","value","type","floating_label","show_counter","showRequiredFieldIndicator","inputFormControl"],[1,"app-associated-info"],[1,"fab-container"],[1,"fab-icon","zmdi","zmdi-devices"],[1,"bolded"],[1,"buttons-wrap"],[3,"properties","click"],[1,"authenticator-app-footer"],[3,"type","state","text","click"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,uS,21,27,"ng-container",1),c.dd(2,hS,11,10,"ng-container",1),c.dd(3,pS,3,3,"ng-container",1),c.dd(4,mS,2,0,"ng-container",1),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",!t.isLoading&&!t.isPaired),c.Mb(1),c.Dc("ngIf",!t.isLoading&&t.isPaired),c.Mb(1),c.Dc("ngIf",!t.isLoading&&!t.isPaired&&t.otpFormControl.dirty),c.Mb(1),c.Dc("ngIf",t.isLoading))},directives:[Ae.p,y,_t.a,an.a,Fs.a,lS.a],pipes:[E.b,uc.a],encapsulation:2,changeDetection:0}),e})();var bS=i("DbCY"),fS=i("gUu9");const vS=["additionalFieldElements"];function _S(e,t){if(1&e){const e=c.kc();c.jc(0,"div",7),c.jc(1,"additional-field-renderer",12,13),c.rc("onChangeField",function(t){return c.Uc(e),c.vc(2).markFormAsDirty(t)})("onIframeOpen",function(){c.Uc(e);const i=t.$implicit,s=c.Rc(2);return c.vc(2).sendIframeMessageToParent(s.iframeWidget,i.iframeParams,i.id)}),c.ic(),c.ic()}if(2&e){const e=t.$implicit;c.Mb(1),c.Dc("id",e.id)("type",e.type)("labels",e.labels)("options",e.options)("value",e.value)("blankOption",e.blankOption)("visible_label",!0)("iframeParams",e.iframeParams)("inputFormControl",e.inputFormControl)("readOnly",!e.enabled)}}function wS(e,t){if(1&e&&(c.jc(0,"div",14),c.ec(1,"basic-button",15),c.ec(2,"basic-button",16),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("buttonType",e.buttonSave.buttonType)("type",e.buttonSave.type)("text",e.buttonSave.text),c.Mb(1),c.Dc("buttonType",e.buttonCancel.buttonType)("type",e.buttonCancel.type)("text",e.buttonCancel.text)("click",e.buttonCancel.onClick)}}function yS(e,t){if(1&e){const e=c.kc();c.jc(0,"form",5),c.rc("ngSubmit",function(){return c.Uc(e),c.vc().updateUserInformation()}),c.jc(1,"div",6),c.jc(2,"div",7),c.ec(3,"textfield",8),c.ic(),c.jc(4,"div",7),c.ec(5,"textfield",8),c.ic(),c.ic(),c.jc(6,"div",6),c.jc(7,"div",9),c.ec(8,"textfield",8),c.ic(),c.dd(9,_S,3,10,"div",10),c.ic(),c.dd(10,wS,3,7,"div",11),c.ic()}if(2&e){const e=c.vc();c.Dc("formGroup",e.myProfileInformation),c.Mb(3),c.Dc("id",e.firstNameField.id)("type",e.firstNameField.type)("label",e.firstNameField.label)("value",e.firstName)("floating_label",e.firstNameField.floating_label)("inputFormControl",e.myProfileInformation.controls.firstname),c.Mb(2),c.Dc("id",e.lastNameField.id)("type",e.lastNameField.type)("label",e.lastNameField.label)("value",e.lastName)("floating_label",e.lastNameField.floating_label)("inputFormControl",e.myProfileInformation.controls.lastname),c.Mb(2),c.ad(e.emailFieldBalloon.style),c.Dc("width",e.emailFieldBalloon.width)("position",e.emailFieldBalloon.position)("title",e.emailFieldBalloon.title)("text",e.emailFieldBalloon.text)("balloonGroup",e.emailFieldBalloon.balloonGroup),c.Mb(1),c.Dc("id",e.eMailField.id)("type",e.eMailField.type)("label",e.eMailField.label)("value",e.email)("floating_label",e.eMailField.floating_label)("inputFormControl",e.myProfileInformation.controls.email),c.Mb(1),c.Dc("ngForOf",e.additionalFields),c.Mb(1),c.Dc("ngIf",!e.myProfileInformation.pristine)}}function CS(e,t){if(1&e&&(c.jc(0,"div",17),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.formError)," ")}}function SS(e,t){1&e&&c.ec(0,"ui-spinner")}let TS=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.fb=e,this.backendService=t,this.activatedRoute=i,this.changeDetector=s,this.bootstrapService=n,this.pageService=a,this.docLayoutService=o,this._stripTags=r,this.additionalFields=[],this.fieldsLoaded=!1,this.iframeSubmitState="disabled",this.snackbarSuccess=E.a.t("standard","Your details are successfully updated."),this.iframe_data=[],this.emailFieldBalloon={style:"main",width:290,position:"top-left",title:E.a.t("standard","Email address"),text:E.a.t("standard","Associate a valid email address with your profile"),showOnClick:!0,balloonGroup:"my-profile"},this.hasUnfilledMandatoryFields=!1,this.fieldsToBeHtmlStripped=["firstname","lastname","email","additional_fields"];const c=E.a.t("standard","_SAVE"),l=E.a.t("standard","_CANCEL"),d=E.a.t("standard","Email"),u=E.a.t("standard","Last Name"),h=E.a.t("standard","First Name");E.a.t("standard","Your details are successfully updated."),this.firstNameField={type:"text",floating_label:!0,id:"first-name-field",label:h},this.lastNameField={type:"text",floating_label:!0,id:"last-name-field",label:u},this.eMailField={type:"text",floating_label:!0,id:"email-field",label:d},this.buttonSave={type:"normal",text:c,buttonType:"submit"},this.buttonCancel={type:"cancel",text:l,buttonType:"button",onClick:()=>{this.buttonCancelFunction()}},this.activatedRoute.params.forEach(e=>{this.isPanelOpenTriggeredByRoute=e.user_details})}sessionReady(){let e,t;this.sessionInstance=o.a.getInstance(),this.hasUnfilledMandatoryFields=x.b.getInstance().settings.request_mandatory_fields_completion&&this.sessionInstance.has_unfilled_fields,this.firstName=this.sessionInstance.firstname,this.lastName=this.sessionInstance.lastname,this.email=this.sessionInstance.email,x.b.getInstance().settings.registration_settings.options.lastfirst_mandatory&&(e=Ke.x.required),this.sessionInstance.isCurrentUserA(this.sessionInstance.LEVEL_SUPERADMIN)&&(t=Ke.x.required),this.myProfileInformation=this.fb.group({firstname:[this.firstName,e],lastname:[this.lastName,e],email:[this.email,t]}),this.isPanelOpenTriggeredByRoute&&this.myProfileInformation.markAsDirty()}ngOnDestroy(){this.userFieldsSubscription&&this.userFieldsSubscription.unsubscribe()}isValueSet({value:e,mandatory:t}){return!t||null===e||0===Number(e)||void 0===e}isDropDownField(e){return"dropdown"===e||"country"===e||"yesno"===e}ngOnInit(){this.sessionReady(),this.loadAdditionalFields(),this.changeDetector.detectChanges()}loadAdditionalFields(){let e={as_array:1};e.user_id=o.a.getInstance().id,e.skip_all=1,this.userFieldsSubscription=this.backendService.request("/manage/v1/user_fields","GET",e).subscribe(e=>{this.additionalFields=[];const t=[],i=e.data;for(let s of i)t.push(new Ke.h({[s.id]:new Ke.e(s.value)}));this.myProfileInformation.addControl("additional_fields",this.fb.array(t));for(let s=0;s<i.length;s++){const e=i[s];let t={};e.mandatory&&this.myProfileInformation.controls.additional_fields.controls[s].controls[e.id].setValidators([Ke.x.required]);let n={};if(n[o.a.getInstance().language]=e.title,t={id:e.id,labels:n,type:e.type,value:e.value,inputFormControl:this.myProfileInformation.controls.additional_fields.controls[s].controls[e.id],enabled:!!Object(st.isUndefined)(e.enabled)||e.enabled},this.isDropDownField(e.type)&&("yesno"!==e.type&&(t.options=e.options),t.blankOption={has_blank_option:this.isValueSet(e),blank_option_config:{label:E.a.t("standard","Select an option"),value:"yesno"!==e.type||e.mandatory?null:0}}),"iframe"===e.type&&e.settings){let i;console.log("ITEM",e.iframe_url),i=JSON.parse(e.settings);const s=[{properties:{text:E.a.t("standard","Cancel")},handler:e=>{this.iframe_data=[],this.loadAdditionalFields(),e.hide()}},{type:"positive",properties:{text:E.a.t("standard","Save and Close")},handler:e=>{this.saveIframeData(),e.hide()}}];t.iframeParams={width:"90%",height:i&&i.iframe_height?Number(i.iframe_height)+127:"90%",title:i?i.field_name:"Iframe name",content:{component:da.a,params:{widget:{params:{iframeHeight:i?i.iframe_height:"90%",iframeUrl:e.iframe_url}}}},type:"confirmation",show_confirmation_check:!1,actions:s}}this.additionalFields.push(t)}this.fieldsLoaded=!0})}saveIframeData(){if(void 0!==this.iframe_data[0]){const e={id:this.iframe_data[0].iframe_id,value:JSON.stringify(this.iframe_data[0].value)},t=[];t.push(e);const i=o.a.getInstance().id;this.backendService.request(`/manage/v1/user/${i}`,"PUT",{additional_fields:t}).subscribe(e=>{this.fieldsLoaded=!1,this.loadAdditionalFields()})}this.docLayoutService.toast.showToast({message:this.snackbarSuccess,type:"success"})}listenerParent(e,t){window,window,window.addEventListener("message",t=>{this.iframeSubmitState="normal",this.iframe_data=[],this.iframe_data.push({iframe_id:e,value:t.data})})}sendIframeMessageToParent(e,t,i){if(!e)return;const s=t.content.params.widget.params.iframeUrl,n=o.a.getInstance().id;this.listenerParent(i,s),e.onIframeLoad.pipe(Object(ee.a)(1)).subscribe(e=>{this.backendService.request(`/manage/v1/user/${n}`,"GET").subscribe(t=>{e.contentWindow.postMessage(t.data,s)})})}updateUserInformation(){const e=E.a.t("standard","The form data is not valid");if(this.stripHtmlContentFromFormControls(this.fieldsToBeHtmlStripped,this.myProfileInformation.controls),this.myProfileInformation.valid){const e=this.myProfileInformation.getRawValue(),t=[];for(let s of e.additional_fields)for(let e in s)s.hasOwnProperty(e)&&t.push({value:void 0!==s[e]?s[e]:null,id:e}),this.iframe_data&&this.iframe_data.filter(i=>{i.iframe_id===e&&t.push({id:e,value:JSON.stringify(i.value)})});const i=Object.assign({},e,{additional_fields:t});this.backendService.changeUserInformation(i,o.a.getInstance().id).subscribe(e=>{e.error||(this.docLayoutService.toast.showToast({message:this.snackbarSuccess,type:"success"}),this.formError=null,x.b.getInstance().settings.request_mandatory_fields_completion&&o.a.getInstance().has_unfilled_fields&&this.rebootAppIfNeeded(),this.sessionInstance.setUserInfo(i))},e=>{this.formError=Array.isArray(e.message)?e.message[0]:e.message.message,this.docLayoutService.toast.showToast({message:this.formError,type:"error"})})}else{for(let e in this.additionalFields)this.myProfileInformation.controls.additional_fields.controls[e].controls[this.additionalFields[e].id].markAsTouched();this.docLayoutService.toast.showToast({message:e,type:"error"})}}buttonCancelFunction(){r.a.singleton.publish({event_type:"toggle-accordion",sender_id:"my-profile",data:{index:"0",reload:!0}})}rebootAppIfNeeded(){this.docLayoutService.dialog.showCommonDialog({title:E.a.t("standard","Platform Reload"),content:E.a.t("standard",'Your settings are saved, but for the changes to be applied the page needs to reload. By clicking on "Confirm" the page will reload to apply the changes you\'ve made. Are you sure you want to proceed?'),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:E.a.t("standard","Yes I'm sure and I want to proceed"),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"positive",label:E.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{e.actionSuccess.next(!0),"confirm"===e.actionID&&this.bootstrapService.reboot()})}markFormAsDirty(e){for(let t in this.additionalFields)this.additionalFields[t].type===e.type&&this.additionalFields[t].value!==e.value&&this.myProfileInformation.markAsDirty()}stripHtmlContentFromFormControls(e,t){e.forEach(e=>{if(t[e]){if("additional_fields"===e)return void(t[e].controls&&Array.isArray(t[e].controls)&&t[e].controls.forEach((i,s)=>{t[e].controls[s].setValue(this.stripHtmlContentFromAdditionalFields(i.value))}));t[e].setValue(this._stripTags.transform(t[e].value)),"firstname"!==e&&"lastname"!==e||t[e].setValue(this.purifySSTI(t[e].value))}})}stripHtmlContentFromAdditionalFields(e){for(const t in e)e.hasOwnProperty(t)&&e[t]&&"string"==typeof e[t]&&(e[t]=this._stripTags.transform(e[t]));return e}purifySSTI(e){return e?e.replace(/\{\{((.|\s)*)\}\}/g,""):""}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(S.a),c.dc(s.a),c.dc(c.i),c.dc(ae.a),c.dc(O.a),c.dc(M.a),c.dc(Xc.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["my-profile-information"]],viewQuery:function(e,t){if(1&e&&c.md(vS,1),2&e){let e;c.Qc(e=c.sc())&&(t.additionalFieldElements=e.first)}},features:[c.Lb([Xc.a])],decls:5,vars:3,consts:[[1,"profile-wrap"],["class","myprofile-info",3,"formGroup","ngSubmit",4,"ngIf"],["class","text-error",4,"ngIf"],[1,"loader"],[4,"ngIf"],[1,"myprofile-info",3,"formGroup","ngSubmit"],[1,"form-row","mdl-grid"],[1,"mdl-cell","mdl-cell--6-col","mdl-cell--12-col-tablet","mdl-cell--12-col-phone"],[3,"id","type","label","value","floating_label","inputFormControl"],["balloon","",1,"mdl-cell","mdl-cell--6-col","mdl-cell--12-col-tablet","mdl-cell--12-col-phone",3,"width","position","title","text","balloonGroup"],["class","mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone",4,"ngFor","ngForOf"],["class","form-row form-profile-buttons border-grey",4,"ngIf"],[3,"id","type","labels","options","value","blankOption","visible_label","iframeParams","inputFormControl","readOnly","onChangeField","onIframeOpen"],["additionalFieldElements",""],[1,"form-row","form-profile-buttons","border-grey"],[3,"buttonType","type","text"],[3,"buttonType","type","text","click"],[1,"text-error"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,yS,11,28,"form",1),c.dd(2,CS,3,3,"div",2),c.jc(3,"div",3),c.dd(4,SS,1,0,"ui-spinner",4),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",t.fieldsLoaded),c.Mb(1),c.Dc("ngIf",t.myProfileInformation&&!t.myProfileInformation.valid),c.Mb(2),c.Dc("ngIf",!t.fieldsLoaded))},directives:[Ae.p,Ke.y,Ke.p,Ke.i,_t.a,bS.a,Ae.o,fS.a,Fs.a,b.fd],pipes:[E.b],encapsulation:2}),e})();var kS=i("96ns"),IS=i("A+3w"),xS=i("ked7"),DS=i("b+L+"),OS=i("U7Ls"),ES=i("f2BR");const PS=["singleSelector"],MS=["multiSelect"];function AS(e,t){if(1&e&&(c.jc(0,"div",8),c.ec(1,"basic-button",9),c.ec(2,"basic-button",9),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.cancelFormButtonParams.type)("text",e.cancelFormButtonParams.text)("click",e.cancelFormButtonParams.onClick),c.Mb(1),c.Dc("type",e.saveFormButtonParams.type)("text",e.saveFormButtonParams.text)("click",e.saveFormButtonParams.onClick)}}let LS=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a,r){super(),this.fb=e,this.improvementAreasProfilingService=t,this.pageService=i,this.docLayoutService=s,this.appStore=n,this.cdr=a,this.toggleService=r,this.singleSelectorSource=[],this.singleSelectorShowLoader=!1,this.multiSelectSource=[],this.multiSelectShowLoader=!1,this.saveFormButtonParams={type:"normal",text:E.a.t("standard","Save Changes"),onClick:()=>{this.myProfileAreasForm.valid&&this.selectedSkills.length>0&&this.selectedSkills.length<=10?this.saveFormChanges():Object(Vw.l)(this.myProfileAreasForm)}},this.cancelFormButtonParams={type:"cancel",text:E.a.t("standard","Cancel"),onClick:()=>{this.resetFormInitialValues()}},this.session=o.a.getInstance(),this.selectedSkills=[],this.multiSelectChangeSubject$=new gt.a,this.searchAvailableSkills=[],this.addedSkills=[],this.processDataFromSession(),this.subscribeToMultiSelectChanges()}ngOnInit(){this.initForm(),this.singleSelectorParams={floatingLabel:!0,label:E.a.t("standard","_ACTIVITY"),maxLength:50,showCounter:!0,showRequiredFieldIndicator:!0,inputFormControl:this.myProfileAreasForm.get("occupation")},this.multiSelectParams={label:E.a.t("standard","My Areas of Interest"),floatingLabel:!0,maxSelectableItems:10,mode:IS.a.AUTOCOMPLETE,showCounter:!0,multiSelector:"dropdown",placeholder:E.a.t("standard","Type here..."),inputFormControl:this.myProfileAreasForm.get("skills")}}ngAfterViewInit(){this.selectInitialMultiSelectItems(),this.multiSelect.autocompleteInput.nativeElement.blur(),this.cdr.detectChanges()}onSingleSelectorChanged(e){this.singleSelectorSource=[],this.selectedOccupation=void 0,e.length>=3&&this.fetchOccupations(e)}onSingleSelectorItemSelected(e){this.selectedOccupation=this.suggestedOccupations.find(t=>t.code===e.id)}onMultiSelectAddition(e){if(-1===this.selectedSkills.findIndex(t=>t.code===e.id)){const t=this.searchAvailableSkills.find(t=>t.code===e.id);t&&(this.selectedSkills.push(t),this.addedSkills.push(t),this.myProfileAreasForm.markAsDirty())}this.selectedSkills=[...this.selectedSkills]}onMultiSelectSubtraction(e){this.selectedSkills=this.selectedSkills.filter(t=>t.code!==e.id),this.addedSkills=this.addedSkills.filter(t=>t.code!==e.id),this.myProfileAreasForm.markAsDirty()}onMultiSelectChange(e){this.multiSelectChangeSubject$.next(e)}subscribeToMultiSelectChanges(){this.multiSelectChangeSubject$.pipe(Object(ft.a)(500),Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{var t;this.multiSelectSource=[],e.replace(/\s/g,"").length>=3&&(this.multiSelectShowLoader=!0,this.canonicalCode=this.selectedOccupation&&!this._isSkillsToggleOn&&null!==(t=this.selectedOccupation.canonicalCode)&&void 0!==t?t:null,this.improvementAreasProfilingService.getSkills(e,this.canonicalCode).pipe(Object(ee.a)(1)).subscribe(e=>{this.searchAvailableSkills=[];const t=[];e.forEach(e=>{t.push({id:e.code,name:e.name})}),this.searchAvailableSkills=e,this.multiSelectSource=[...t],this.multiSelectShowLoader=!1},()=>{this.improvementAreasProfilingService.showGenericSnackbarError(),this.multiSelectShowLoader=!1}))})}fetchOccupations(e){this.singleSelectorShowLoader=!0,this.improvementAreasProfilingService.getOccupations(e).pipe(Object(ee.a)(1)).subscribe(t=>{this.singleSelectorSource=[],this.suggestedOccupations=t,this.suggestedOccupations.forEach(e=>{this.singleSelectorSource.push({id:e.code,title:e.name})}),this.singleSelectorSource.find(t=>t.title.toLowerCase()===e.toLowerCase())||this.singleSelectorSource.unshift({id:"",title:e,prefix:E.a.t("standard","Use:")}),this.singleSelectorSource=[...this.singleSelectorSource],this.singleSelectorShowLoader=!1},()=>{this.improvementAreasProfilingService.showGenericSnackbarError(),this.singleSelectorShowLoader=!1})}processDataFromSession(){this.sessionObjectives=this.session.objectives,this.selectedOccupation=this.sessionObjectives&&this.sessionObjectives.occupation?this.sessionObjectives.occupation:void 0,this.sessionOccupationName=this.sessionObjectives&&this.sessionObjectives.occupation?this.sessionObjectives.occupation.name:"",this.sessionImprovementAreas=this.sessionObjectives&&this.sessionObjectives.areasOfImprovement?this.sessionObjectives.areasOfImprovement:[]}initForm(){this.myProfileAreasForm=this.fb.group({occupation:[this.sessionOccupationName,Ke.x.compose([Ke.x.required,Ke.x.maxLength(50)])],skills:[]})}selectInitialMultiSelectItems(){this.sessionImprovementAreas&&this.sessionImprovementAreas.forEach(e=>{this.selectedSkills.push(e),this.multiSelect.select({id:e.code,name:e.name})})}resetFormInitialValues(){const e=this.myProfileAreasForm.get("occupation"),t=this.myProfileAreasForm.get("skills");this.multiSelect.removeAllItems(),this.selectInitialMultiSelectItems(),this.selectedSkills=this.sessionImprovementAreas?[...this.sessionImprovementAreas]:[],this.clearAddedSkills(),e.setValue(this.sessionOccupationName,{emitEvent:!1}),t.setValue(this.sessionImprovementAreas,{emitEvent:!1}),this.myProfileAreasForm.markAsPristine(),this.myProfileAreasForm.markAsUntouched(),this.singleSelector.updateTextFieldCounter()}saveFormChanges(){if(this.selectedOccupation)this.checkForAddedSkills();else{const e=this.myProfileAreasForm.get("occupation");this.improvementAreasProfilingService.createOccupation(e.value).pipe(Object(ee.a)(1)).subscribe(e=>{this.selectedOccupation=e,this.checkForAddedSkills()},()=>{this.improvementAreasProfilingService.showGenericSnackbarError()})}}checkForAddedSkills(){this.addedSkills.length>0?this.openSkillsRatingDialog():this.saveProfiling()}clearAddedSkills(){this.addedSkills=[]}openSkillsRatingDialog(){const e={id:"improvement-areas-skills-rating",width:448,height:"auto",content:{params:{skills:this.addedSkills},component:kS.a},type:"confirmation",overlayClick:!1,scrollable:!0,contentMaxHeight:388,actions:[{type:"cancel",properties:{text:E.a.t("standard","Cancel")},handler:e=>{e.close()}},{type:"normal",properties:{text:E.a.t("standard","Save")},handler:e=>{this.saveProfiling(e)}}]};this.pageService.dialog.open(e)}saveProfiling(e){const t=this.selectedOccupation;e&&(e.showFullOverlayLoader=!0),this.improvementAreasProfilingService.saveProfiling(t,this.selectedSkills).pipe(Object(ee.a)(1)).subscribe(e=>{const t=e.occupation,i=e.areasOfImprovement;this.appStore.dispatch(xS.a.submitAreasOfImprovement()),this.session.objectives&&(this.session.objectives.areasOfImprovement=i,this.sessionImprovementAreas=i,this.session.objectives.occupation=t,this.sessionOccupationName=t.name),this.session.skills&&(this.session.skills.userIsProfiled=!0),this.pageService.dialog.isOpened&&this.pageService.dialog.close(),this.clearAddedSkills(),this.docLayoutService.toast.showToast({message:E.a.t("standard","Your details are successfully updated."),type:"success"}),this.multiSelect.innerControl.reset(""),this.myProfileAreasForm.markAsPristine()},()=>{this.improvementAreasProfilingService.showGenericSnackbarError(),e&&(e.showFullOverlayLoader=!1)})}get _isSkillsToggleOn(){return this.toggleService.isOn(u.f.TOGGLE_SKILLS_PHASE_1_1)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(DS.a),c.dc(O.a),c.dc(M.a),c.dc(v.d),c.dc(c.i),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["myprofile-improvement-areas"]],viewQuery:function(e,t){if(1&e&&(c.md(PS,1),c.md(MS,1)),2&e){let e;c.Qc(e=c.sc())&&(t.singleSelector=e.first),c.Qc(e=c.sc())&&(t.multiSelect=e.first)}},features:[c.Jb],decls:10,vars:23,consts:[[1,"myprofile-info",3,"formGroup"],[1,"form-row","mdl-grid"],[1,"mdl-cell","mdl-cell--12-col","mdl-cell--12-col-tablet","mdl-cell--12-col-phone"],[3,"label","source","floatingLabel","maxLength","showCounter","showRequiredFieldIndicator","inputFormControl","showLoader","itemSelected","inputChanged"],["singleSelector",""],["id","discover-profile-skill",3,"label","placeholder","floating_label","mode","showRequiredFieldIndicator","max_selectable_items","source","showCounter","inputFormControl","applyLoaderOffset","showLoader","applySourceRegex","suggestionsMaxHeight","onItemSelection","onItemDeletion","onChange"],["multiSelect",""],["class","form-row form-profile-buttons",4,"ngIf"],[1,"form-row","form-profile-buttons"],[3,"type","text","click"]],template:function(e,t){1&e&&(c.jc(0,"form",0),c.jc(1,"div",1),c.jc(2,"div",2),c.jc(3,"textfield-single-selector",3,4),c.rc("itemSelected",function(e){return t.onSingleSelectorItemSelected(e)})("inputChanged",function(e){return t.onSingleSelectorChanged(e)}),c.ic(),c.ic(),c.ic(),c.jc(5,"div",1),c.jc(6,"div",2),c.jc(7,"multi-select",5,6),c.rc("onItemSelection",function(e){return t.onMultiSelectAddition(e)})("onItemDeletion",function(e){return t.onMultiSelectSubtraction(e)})("onChange",function(e){return t.onMultiSelectChange(e)}),c.ic(),c.ic(),c.ic(),c.dd(9,AS,3,6,"div",7),c.ic()),2&e&&(c.Dc("formGroup",t.myProfileAreasForm),c.Mb(3),c.Dc("label",t.singleSelectorParams.label)("source",t.singleSelectorSource)("floatingLabel",t.singleSelectorParams.floatingLabel)("maxLength",t.singleSelectorParams.maxLength)("showCounter",t.singleSelectorParams.showCounter)("showRequiredFieldIndicator",t.singleSelectorParams.showRequiredFieldIndicator)("inputFormControl",t.singleSelectorParams.inputFormControl)("showLoader",t.singleSelectorShowLoader),c.Mb(4),c.Dc("label",t.multiSelectParams.label)("placeholder",t.multiSelectParams.placeholder)("floating_label",t.multiSelectParams.floatingLabel)("mode",t.multiSelectParams.mode)("showRequiredFieldIndicator",!0)("max_selectable_items",t.multiSelectParams.maxSelectableItems)("source",t.multiSelectSource)("showCounter",t.multiSelectParams.showCounter)("inputFormControl",t.multiSelectParams.inputFormControl)("applyLoaderOffset",!0)("showLoader",t.multiSelectShowLoader)("applySourceRegex",!1)("suggestionsMaxHeight",134),c.Mb(2),c.Dc("ngIf",t.myProfileAreasForm.dirty))},directives:[Ke.y,Ke.p,Ke.i,OS.a,ES.a,Ae.p,Fs.a],encapsulation:2}),e})();const jS=["affiliate"];let FS=(()=>{class e{constructor(e,t,i,s){this.fb=e,this.docLayoutService=t,this.backendService=i,this.formatterService=s}ngOnInit(){this.affiliateForm=this.fb.group({code:[""]}),this.affiliateCode={type:"text",id:"affiliate_code",floating_label:!0,label:E.a.t("standard","Add Affiliate Code")},this.buttonSave={type:"normal",text:E.a.t("standard","Add Code"),buttonType:"submit",onClick:()=>{this.addCode()}},this.tableParams={columns:this.getColumns(),source:new RS(1,[{column_id:"name",order:"asc"}],3,this.backendService),row_actions:this.getRowActions(),enable_massive_actions:!1,massive_actions:this.getMassiveActions()}}getColumns(){return[{id:"partner_name",name:E.a.t("standard","Partner Name"),is_sortable:!1,renderer:this.renderJSON},{id:"partner_discount",name:E.a.t("standard","Default Discount"),is_sortable:!1,renderer:this.renderDiscount},{id:"affiliate_since",name:E.a.t("standard","Affiliate Since"),is_sortable:!1,renderer:e=>Object(ci.a)(this.formatterService,e,"dateTime",{disableRelativeTime:!0})}]}getRowActions(){return[{id:"delete",title:E.a.t("standard","Delete"),icon_color:"red",icon:"delete",action:e=>{console.log(e),this.deleteAffiliateId=e.id,this.docLayoutService.dialog.showCommonDialog({title:E.a.t("standard","Delete content partner"),content:E.a.t("standard","Do you want to delete the affiliation?"),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:E.a.t("standard","Yes, I want to proceed"),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"positive",label:E.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.deletePartner().then(t=>{e.actionSuccess.next(t)})})}}]}getMassiveActions(){return[]}renderJSON(e){const t=JSON.parse(e),i=o.a.getInstance().language;return"single_value"===t.type?t.value:t.values[i]?t.values[i]:t.values.en}renderDiscount(e){return parseInt(e)+"%"}addCode(){let e=this.affiliateForm.getRawValue();""!==e.code?this.backendService.request("/manage/v1/contentpartners/affiliation","POST",e).subscribe(e=>{this.affiliate.refreshTable(),this.docLayoutService.toast.showToast({message:E.a.t("standard","Affiliate code successfuly added"),type:"success"}),this.affiliateForm.controls.code.setValue("")},e=>{this.docLayoutService.toast.showToast({message:e.error.message[0],type:"error"})}):this.docLayoutService.toast.showToast({message:E.a.t("standard","You need to enter affiliate code"),type:"error"})}deletePartner(){return new Promise(e=>{this.backendService.request("/manage/v1/contentpartners/affiliation","DELETE",{affiliation_ids:[this.deleteAffiliateId]}).subscribe(t=>{this.affiliate.refreshTable(),this.affiliate.getLoadDataObservable().pipe(Object(ee.a)(1)).subscribe(t=>{e(!0),this.docLayoutService.toast.showToast({type:"success",message:E.a.t("user_management","Affiliation has been successfully deleted")})})},t=>{e(!1),this.docLayoutService.toast.showToast({type:"error",message:this.errorMessages(t.error.message)})})})}errorMessages(e){let t="";for(let i=0;i<e.length;i++)t+=e[i];return t}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(M.a),c.dc(S.a),c.dc(ti.b))},e.\u0275cmp=c.Xb({type:e,selectors:[["partners-content"]],viewQuery:function(e,t){if(1&e&&c.md(jS,1),2&e){let e;c.Qc(e=c.sc())&&(t.affiliate=e.first)}},decls:7,vars:14,consts:[[1,"content-partners"],[3,"id","type","label","floating_label","inputFormControl"],[1,"text-right"],[3,"buttonType","type","text","click"],[1,"wrap-table","affiliates"],[3,"columns","row_actions","massive_actions","source","enable_massive_actions"],["affiliate",""]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.ec(1,"textfield",1),c.jc(2,"div",2),c.ec(3,"basic-button",3),c.ic(),c.jc(4,"div",4),c.ec(5,"core-table",5,6),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("id",t.affiliateCode.id)("type",t.affiliateCode.type)("label",t.affiliateCode.label)("floating_label",t.affiliateCode.floating_label)("inputFormControl",t.affiliateForm.controls.code),c.Mb(2),c.Dc("buttonType",t.buttonSave.buttonType)("type",t.buttonSave.type)("text",t.buttonSave.text)("click",t.buttonSave.onClick),c.Mb(2),c.Dc("columns",t.tableParams.columns)("row_actions",t.tableParams.row_actions)("massive_actions",t.tableParams.massive_actions)("source",t.tableParams.source)("enable_massive_actions",t.tableParams.enable_massive_actions))},directives:[_t.a,Fs.a,Hn.a],encapsulation:2}),e})();class RS extends ci.b{constructor(e=0,t,i,s,n){super(e,t,i,s,n),this.current_page=e,this.sort_by=t,this.page_size=i,this.serviceProvider=s,this.columns=n}fetchData(e){return this.serviceProvider.request("/manage/v1/contentpartners/affiliation","GET",e).pipe(Object(ri.a)(e=>e.data))}}function NS(e,t){if(1&e&&(c.jc(0,"div",7),c.ec(1,"basic-button",8),c.ec(2,"basic-button",9),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("buttonType",e.buttonSave.buttonType)("type",e.buttonSave.type)("text",e.buttonSave.text)("buttonType",e.buttonSave.buttonType),c.Mb(1),c.Dc("buttonType",e.buttonCancel.buttonType)("type",e.buttonCancel.type)("text",e.buttonCancel.text)("buttonType",e.buttonCancel.buttonType)("click",e.buttonCancel.onClick)}}let US=(()=>{class e{constructor(e,t,i,s,n){this.fb=e,this.el=t,this.backendService=i,this.bootstrapService=s,this.docLayoutService=n,this.myProfilePassword=e.group({currentPassword:["",Ke.x.required],newPassword:["",Ke.x.required],newReTypePassword:["",Ke.x.required]},{validator:ud.a.mismatchedPasswords("newPassword","newReTypePassword")});let a=E.a.t("standard","_SAVE"),o=E.a.t("standard","cancel"),r=E.a.t("standard","Your password is successfully updated."),c=E.a.t("standard","Your current password"),l=E.a.t("standard","Choose a password"),d=E.a.t("standard","Re-type the new password");this.currentPassword={type:"password",id:"password-current",floating_label:!0,label:c},this.newPassword={type:"password",id:"password-new",floating_label:!0,label:l},this.newReTypePassword={type:"password",id:"password-new-retype",floating_label:!0,label:d},this.buttonSave={type:"normal",text:a,buttonType:"submit"},this.buttonCancel={type:"cancel",text:o,buttonType:"button",onClick:()=>{this.buttonCancelFunction()}},this.snackbarSuccess={message:r,type:"success"}}buttonCancelFunction(){r.a.singleton.publish({event_type:"toggle-accordion",sender_id:"my-profile",data:{index:"1",reload:!0}})}sessionReady(){return this.sessionInstance=o.a.getInstance(),this.sessionInstance}setPassword(){this.formError=null;const e=E.a.t("standard","The password data is not vali");if(this.myProfilePassword.valid){let e=this.myProfilePassword.controls.currentPassword.value,t=this.myProfilePassword.controls.newReTypePassword.value,i=this.sessionReady().email;this.backendService.changePassword(i,e,t).subscribe(e=>{e.error||this.backendService.passwordRenewed().subscribe(e=>{this.docLayoutService.toast.showToast({message:this.snackbarSuccess.message,type:"success"}),x.b.getInstance().disable_simultaneous_access?this.backendService.handleApiErrors({error:{code:101},status:401}):o.a.getInstance().force_change&&this.rebootIfNeeded()})},e=>{this.formError=e.error.message[0],this.docLayoutService.toast.showToast({message:this.formError,type:"error"})})}else this.myProfilePassword.controls.currentPassword.markAsTouched(),this.myProfilePassword.controls.newReTypePassword.markAsTouched(),this.myProfilePassword.controls.newPassword.markAsTouched(),this.docLayoutService.toast.showToast({message:e,type:"error"})}rebootIfNeeded(){this.docLayoutService.dialog.showCommonDialog({title:E.a.t("standard","Platform Reload"),content:E.a.t("standard",'Your settings are saved, but for the changes to be applied the page needs to reload. By clicking on "Confirm" the page will reload to apply the changes you\'ve made. Are you sure you want to proceed?'),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:E.a.t("standard","Yes I'm sure and I want to proceed"),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"positive",label:E.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{if(e.actionSuccess.next(!0),"confirm"===e.actionID){const e=ki.a.getInstance();let t=e.get("original_url",null)||o.a.getInstance().home_route[0];e.remove("original_url"),t.startsWith("http")||(t=this.backendService.getBaseUrl()+t),this.bootstrapService.reboot(t)}})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(c.o),c.dc(S.a),c.dc(ae.a),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["my-profile-password"]],decls:14,vars:21,consts:[[1,"myprofile-info",3,"formGroup","ngSubmit"],[1,"form-row","mdl-grid"],[1,"mdl-cell","mdl-cell--6-col","mdl-cell--12-col-tablet","mdl-cell--12-col-phone"],[3,"id","type","label","floating_label","value","inputFormControl"],[3,"id","type","label","floating_label","inputFormControl"],[1,"text-error"],["class","form-row form-profile-buttons border-grey",4,"ngIf"],[1,"form-row","form-profile-buttons","border-grey"],[3,"buttonType","type","text"],[3,"buttonType","type","text","click"]],template:function(e,t){1&e&&(c.jc(0,"form",0),c.rc("ngSubmit",function(){return t.setPassword()}),c.jc(1,"div",1),c.jc(2,"div",2),c.ec(3,"textfield",3),c.ic(),c.jc(4,"div",2),c.ec(5,"textfield",4),c.ic(),c.ic(),c.jc(6,"div",1),c.ec(7,"div",2),c.jc(8,"div",2),c.ec(9,"textfield",4),c.ic(),c.ic(),c.jc(10,"div",5),c.fd(11),c.wc(12,"t"),c.ic(),c.dd(13,NS,3,9,"div",6),c.ic()),2&e&&(c.Dc("formGroup",t.myProfilePassword),c.Mb(3),c.Dc("id",t.currentPassword.id)("type",t.currentPassword.type)("label",t.currentPassword.label)("floating_label",t.currentPassword.floating_label)("value",t.currentPassword.value)("inputFormControl",t.myProfilePassword.controls.currentPassword),c.Mb(2),c.Dc("id",t.newPassword.id)("type",t.newPassword.type)("label",t.newPassword.label)("floating_label",t.newPassword.floating_label)("inputFormControl",t.myProfilePassword.controls.newPassword),c.Mb(4),c.Dc("id",t.newReTypePassword.id)("type",t.newReTypePassword.type)("label",t.newReTypePassword.label)("floating_label",t.newReTypePassword.floating_label)("inputFormControl",t.myProfilePassword.controls.newReTypePassword),c.Mb(2),c.gd(c.xc(12,19,t.formError)),c.Mb(2),c.Dc("ngIf",!t.myProfilePassword.pristine))},directives:[Ke.y,Ke.p,Ke.i,_t.a,Ae.p,Fs.a],pipes:[E.b],encapsulation:2}),e})();var qS=i("EY2u");function zS(e,t){if(1&e&&(c.hc(0),c.ec(1,"checkbox",14),c.gc()),2&e){const e=t.$implicit,i=t.index,s=c.vc(2);c.Mb(1),c.Dc("label",e.sub_policy_acceptance_message)("required",e.mandatory)("checked",e.answer)("inputFormControl",s.policyFormGroup.controls.sub_policies.controls[i])}}function VS(e,t){if(1&e&&(c.jc(0,"div",15),c.ec(1,"basic-button",16),c.ec(2,"basic-button",16),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("buttonType",e.buttonSave.buttonType)("type",e.buttonSave.type)("text",e.buttonSave.text)("buttonType",e.buttonSave.buttonType)("click",e.buttonSave.onClick),c.Mb(1),c.Dc("buttonType",e.buttonCancel.buttonType)("type",e.buttonCancel.type)("text",e.buttonCancel.text)("buttonType",e.buttonCancel.buttonType)("click",e.buttonCancel.onClick)}}const BS=function(e){return{lng:e}},GS=function(e){return["/learn/policy/view",e]};function $S(e,t){if(1&e&&(c.jc(0,"form",5),c.jc(1,"div",6),c.jc(2,"div",7),c.jc(3,"div",8),c.ec(4,"checkbox",9),c.jc(5,"a",10),c.fd(6),c.wc(7,"t"),c.ic(),c.ic(),c.jc(8,"div",11),c.dd(9,zS,2,4,"ng-container",12),c.ic(),c.dd(10,VS,3,10,"div",13),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Dc("formGroup",e.policyFormGroup),c.Mb(4),c.Dc("label",e.policy.label)("value",e.policy.value)("checked",e.policy.checked)("change",e.policy.change)("required",!0)("inputFormControl",e.policyFormGroup.controls.policy),c.Mb(1),c.Dc("routerLink",c.Ic(15,GS,c.Ic(13,BS,e.currentLanguge))),c.Mb(1),c.gd(c.xc(7,11,"View Privacy Policy")),c.Mb(3),c.Dc("ngForOf",e.subPolicies),c.Mb(1),c.Dc("ngIf",e.policyFormGroup.dirty)}}let HS=(()=>{class e{constructor(e,t,i,s,n){this.fb=e,this.backendService=t,this.translationService=i,this.docLayoutService=s,this.router=n,this.initialized=!1,this.areMandatoryFieldsAllSelected=!1,this._policyId=x.b.getInstance().policy_id,this._policyTrackId=null;const a=E.a.t("standard","_SAVE"),o=E.a.t("standard","cancel");this.currentLanguge=this.translationService.currentLang,this.buttonSave={type:"normal",text:a,buttonType:"submit",onClick:()=>{this.areMandatoryFieldsAllSelected?this.savePolicy():this.docLayoutService.dialog.showCommonDialog({title:E.a.t("standard","Are you sure you want to proceed?"),content:E.a.t("standard","By unchecking the mandatory Privacy Policy settings (marked with an asterisk), you will not be able to access and use your LMS again. The agreement to the mandatory Privacy Policy settings is required to complete your registration and use your platform."),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"positive",label:E.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{e.actionSuccess.next(!0),"confirm"===e.actionID&&this.savePolicy()})}},this.buttonCancel={type:"cancel",text:o,buttonType:"button",onClick:()=>{r.a.singleton.publish({event_type:"toggle-accordion",sender_id:"my-profile",data:{index:"0",reload:!0}})}}}ngOnInit(){this.loadData().subscribe(()=>{this.initialized=!0,this.policyFormGroup.valueChanges.subscribe(e=>{if(this.areMandatoryFieldsAllSelected=!0,!1!==e.policy){if(0!==this.policyFormGroup.value.sub_policies.length)for(const t in this.policyFormGroup.value.sub_policies)if(1===this.subPolicies[t].mandatory&&!1===e.sub_policies[t]){this.areMandatoryFieldsAllSelected=!1;break}}else this.areMandatoryFieldsAllSelected=!1})})}savePolicy(){(null===this._policyTrackId?this.createPolicyTracking():this.updatePolicyTracking()).subscribe(e=>{!0===e.data.logout?(window.localStorage.clear(),this.router.navigate(["/learn/signin"],mi.b)):this.docLayoutService.toast.showToast({message:E.a.t("standard","Your preferences are successfully updated."),type:"success"})},e=>{this.docLayoutService.toast.showToast({message:e.message[0].message.text,type:"error"})})}createPolicyTracking(){const e=nt.a.map(this.policyFormGroup.value.sub_policies,(e,t)=>({id:this.subPolicies[t].id,answer:Number(e)})),t={policy:{id:this._policyId,answer:Number(this.policyFormGroup.value.policy),sub_policies:e}};return this.backendService.request("/manage/v1/policy/track","POST",t)}updatePolicyTracking(){const e=nt.a.map(this.policyFormGroup.value.sub_policies,(e,t)=>({id:this.subPolicies[t].id,answer:Number(e)}));return this.backendService.request(`/manage/v1/policy/track/${this._policyTrackId}`,"PUT",{id_policy_version:this._policyVersion,track_answer:!0===this.policyFormGroup.value.policy?1:0,sub_policy:e})}loadData(){return Object(Gt.a)(this._loadPrivacyPolicyDefinition(),this.backendService.request("/manage/v1/policy/track","GET").pipe(Object(ri.a)(e=>e.data))).pipe(Object(ri.a)(([e,t])=>{const{policy:i,sub_policy:s}=e,{policy:n,sub_policy:a}=t,o=!nt.a.isNil(n);this._policyVersion=i.policy_version,o&&(this._policyTrackId=n.track_id,this._policyVersion=n.id_policy_version),this.policy={label:i.policy_acceptance_message[this.currentLanguge],value:o?n.answer:0,checked:!!o&&Boolean(n.answer),enabled:!0,required:!0},this.subPolicies=nt.a.map(s,e=>({id:e.id,sub_policy_acceptance_message:e.sub_policy_acceptance_message[this.currentLanguge],mandatory:e.mandatory,answer:o?nt.a.find(a,t=>t.id===e.id).answer:0}));const r=new Ke.c(nt.a.map(this.subPolicies,e=>{const t=e.mandatory?Ke.x.required:Ke.x.nullValidator;return new Ke.e(Boolean(e.answer),t)}));this.policyFormGroup=this.fb.group({policy:[this.policy.checked,Ke.x.required],sub_policies:r})}))}_loadPrivacyPolicyDefinition(){return void 0===this._policyId?qS.a:this.backendService.request(`/manage/v1/policy/${this._policyId}/versions/latest`,"GET").pipe(Object(ri.a)(e=>e.data))}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(S.a),c.dc(js.a),c.dc(M.a),c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["my-profile-policy"]],decls:8,vars:4,consts:[[1,"policy-wrapper"],[1,"policy-alert-banner","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle","table-big-icons"],[1,"mdl-wrapper","policy-form"],["class","policy-form",3,"formGroup",4,"ngIf"],[1,"policy-form",3,"formGroup"],[1,"mdl-grid"],[1,"mdl-cell","policy-view","bg-white","mdl-cell--12-col"],[1,"form-row","form-row-privacy"],[3,"label","value","checked","change","required","inputFormControl"],["target","_blank",3,"routerLink"],[1,"form-row","sub-policies"],[4,"ngFor","ngForOf"],["class","form-row policy-form-buttons border-grey",4,"ngIf"],[3,"label","required","checked","inputFormControl"],[1,"form-row","policy-form-buttons","border-grey"],[3,"buttonType","type","text","click"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.ec(2,"i",2),c.jc(3,"p"),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.jc(6,"div",3),c.dd(7,$S,11,17,"form",4),c.ic(),c.ic()),2&e&&(c.Mb(4),c.gd(c.xc(5,2,"By unchecking the mandatory Privacy Policy settings (marked with an asterisk), you will not be able to access and use your LMS again. The agreement to the mandatory Privacy Policy settings is required to complete your registration and use your platform.")),c.Mb(3),c.Dc("ngIf",t.initialized))},directives:[Ae.p,Ke.y,Ke.p,Ke.i,Fn.a,s.k,Ae.o,Fs.a],pipes:[E.b],encapsulation:2}),e})();function YS(e,t){if(1&e){const e=c.kc();c.jc(0,"dropdown",7),c.rc("onChange",function(){c.Uc(e);const t=c.vc();return t.onChange(t.myProfilePreferences.controls.language.value)}),c.ic()}if(2&e){const e=c.vc();c.Dc("label",e.preferredLanguage.label)("floating_label",e.preferredLanguage.floating_label)("display_search",e.preferredLanguage.display_search)("grouped",e.preferredLanguage.grouped)("options",e.preferredLanguage.options)("name",e.preferredLanguage.name)("enabled",e.preferredLanguage.enabled)("required",e.preferredLanguage.required)("value",e.preferredLanguage.value)("inputFormControl",e.myProfilePreferences.controls.language)}}function WS(e,t){if(1&e&&(c.jc(0,"div",2),c.ec(1,"dropdown",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("label",e.dateFormat.label)("floating_label",e.dateFormat.floating_label)("display_search",e.dateFormat.display_search)("grouped",e.dateFormat.grouped)("options",e.dateFormats)("grouped",!0)("name",e.dateFormat.name)("enabled",e.dateFormat.enabled)("required",e.dateFormat.required)("value",e.formatSelected)("inputFormControl",e.myProfilePreferences.controls.dateformat_locale)}}function QS(e,t){if(1&e&&(c.jc(0,"div",2),c.ec(1,"dropdown",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("label",e.preferredTimeZone.label)("floating_label",e.preferredTimeZone.floating_label)("display_search",e.preferredTimeZone.display_search)("grouped",e.preferredTimeZone.grouped)("options",e.preferredTimeZone.options)("name",e.preferredTimeZone.name)("enabled",e.preferredTimeZone.enabled)("required",e.preferredTimeZone.required)("value",e.preferredTimeZone.value)("inputFormControl",e.myProfilePreferences.controls.timezone)}}function KS(e,t){if(1&e&&(c.jc(0,"div",9),c.ec(1,"basic-button",10),c.ec(2,"basic-button",11),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("buttonType",e.buttonSave.buttonType)("type",e.buttonSave.type)("text",e.buttonSave.text)("buttonType",e.buttonSave.buttonType),c.Mb(1),c.Dc("buttonType",e.buttonCancel.buttonType)("type",e.buttonCancel.type)("text",e.buttonCancel.text)("buttonType",e.buttonCancel.buttonType)("click",e.buttonCancel.onClick)}}let XS=(()=>{class e{constructor(e,t,i,s,n,a){this.formatter=e,this.backendService=t,this.bootstrapService=i,this.docLayoutService=s,this.dateFormats=[],this.formatSelected="",this.myProfilePreferences=a.group({language:[o.a.getInstance().language],timezone:[o.a.getInstance().timezone],dateformat_locale:[o.a.getInstance().datetime_format]}),this.buttonSave={type:"normal",text:E.a.t("standard","_SAVE"),buttonType:"submit"},this.buttonCancel={type:"cancel",text:E.a.t("standard","cancel"),buttonType:"button",onClick:()=>{this.buttonCancelFunction()}}}buttonCancelFunction(){r.a.singleton.publish({event_type:"toggle-accordion",sender_id:"my-profile",data:{index:"2",reload:!0}})}savePreferences(){this.myProfilePreferences.valid&&this.docLayoutService.dialog.showCommonDialog({title:E.a.t("standard","Platform Reload"),content:E.a.t("standard",'By clicking on "Confirm" your changes will be saved and the page will reload to apply such changes. Are you sure you want to proceed?'),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:E.a.t("standard","Yes I'm sure and I want to proceed"),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"positive",label:E.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{if("cancel"===e.actionID)e.actionSuccess.next(!0);else{const t=this._session.id,i=JSON.stringify({settings:[{name:"ui.language",value:this.myProfilePreferences.controls.language.value},{name:"date_format",value:this.myProfilePreferences.controls.dateformat_locale.value},{name:"timezone",value:this.myProfilePreferences.controls.timezone.value}]});this.backendService.updateMyPreferences(i,t).subscribe(t=>{t.error?(e.actionSuccess.next(!1),this.docLayoutService.toast.showToast({message:E.a.t("standard","Error while saving your changes"),type:"error"})):(e.actionSuccess.next(!0),this.bootstrapService.reboot())},t=>{e.actionSuccess.next(!1),this.docLayoutService.toast.showToast({message:E.a.t("standard","Error while saving your changes"),type:"error"})})}})}platformReady(){this._platform=x.b.getInstance(),this.allowDateFormatOverwrite=this._platform.settings.allow_user_dateformat_override,this.timezoneOverwriteAllow=this._platform.settings.timezone_allow_user_override}sessionReady(){this._session=o.a.getInstance()}ngOnInit(){this.platformReady(),this.sessionReady();const e=this._platform.getLanguageOptions(),t=E.a.t("standard","_LANGUAGE"),i=E.a.t("configuration","Time zone"),s=E.a.t("standard","Format"),n=this._session.language;this.preferredLanguage={label:t,floating_label:!0,display_search:!1,grouped:!1,options:e,name:"languages-dropdown",enabled:!0,required:!1,value:n},this.preferredTimeZone={label:i,floating_label:!0,display_search:!0,grouped:!1,options:this.formatter.momentZones(),name:"timezone-dropdown",enabled:!0,required:!1,value:this._session.timezone},this.dateFormat={label:s,floating_label:!0,display_search:!1,grouped:!1,name:"format-dropdown",enabled:!0,required:!1},this.setupDatetimeFormat(n,!0)}onChange(e){this.setupDatetimeFormat(e)}setupDatetimeFormat(e,t=!1){if(!this.allowDateFormatOverwrite)return;const i=Object.keys(this._platform.active_languages),s=nt.a.chain(i).map(e=>this._platform.getLangByShortCode(e)).sortBy(t=>t.browser_code===e?0:1).map(e=>({group:e.label_translated,items:nt.a.map(e.date_formats,e=>({label:`${this.formatter.asDatetime("2005-03-15 23:30:00",e)} (${e})`,value:e}))})).value();let n=s[0].items[0].value;if(t){const e=this._session.datetime_format.replace(/-/g,"_");n=e,this.myProfilePreferences.controls.dateformat_locale.setValue(e,{emitEvent:!1})}this.dateFormats=s,this.formatSelected=n}}return e.\u0275fac=function(t){return new(t||e)(c.dc(ti.b),c.dc(S.a),c.dc(ae.a),c.dc(M.a),c.dc(c.o),c.dc(Ke.d))},e.\u0275cmp=c.Xb({type:e,selectors:[["my-profile-preferences"]],decls:9,vars:6,consts:[[1,"myprofile-info","my-preferences",3,"formGroup","ngSubmit"],[1,"form-row","mdl-grid"],[1,"mdl-cell","mdl-cell--6-col","mdl-cell--12-col-tablet","mdl-cell--12-col-phone"],[3,"label","floating_label","display_search","grouped","options","name","enabled","required","value","inputFormControl","onChange",4,"ngIf"],["class","mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone",4,"ngIf"],[1,"text-error"],["class","form-row form-profile-buttons border-grey",4,"ngIf"],[3,"label","floating_label","display_search","grouped","options","name","enabled","required","value","inputFormControl","onChange"],[3,"label","floating_label","display_search","grouped","options","name","enabled","required","value","inputFormControl"],[1,"form-row","form-profile-buttons","border-grey"],[3,"buttonType","type","text"],[3,"buttonType","type","text","click"]],template:function(e,t){1&e&&(c.jc(0,"form",0),c.rc("ngSubmit",function(){return t.savePreferences()}),c.jc(1,"div",1),c.jc(2,"div",2),c.dd(3,YS,1,10,"dropdown",3),c.ic(),c.dd(4,WS,2,11,"div",4),c.dd(5,QS,2,10,"div",4),c.ic(),c.jc(6,"div",5),c.fd(7),c.ic(),c.dd(8,KS,3,9,"div",6),c.ic()),2&e&&(c.Dc("formGroup",t.myProfilePreferences),c.Mb(3),c.Dc("ngIf",t.preferredLanguage.options.length>0),c.Mb(1),c.Dc("ngIf",t.allowDateFormatOverwrite),c.Mb(1),c.Dc("ngIf",t.timezoneOverwriteAllow),c.Mb(2),c.gd(t.formError),c.Mb(1),c.Dc("ngIf",t.myProfilePreferences.dirty))},directives:[Ke.y,Ke.p,Ke.i,Ae.p,ii.a,Fs.a],encapsulation:2}),e})();const JS=function(e){return{lng:e}},ZS=function(e){return["/learn/terms-conditions/view",e]};function eT(e,t){if(1&e&&(c.jc(0,"div",9),c.ec(1,"checkbox",10),c.jc(2,"a",11),c.fd(3),c.wc(4,"t"),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("label",e.termsConditionsFields.fieldsParams.label)("value",e.termsConditionsFields.fieldsParams.value)("checked",e.termsConditionsFields.fieldsParams.checked)("change",e.termsConditionsFields.fieldsParams.change)("required",!0)("inputFormControl",e.termsConditionsFormGroup.controls.termsConditions),c.Mb(1),c.Dc("routerLink",c.Ic(12,ZS,c.Ic(10,JS,e.currentLanguge))),c.Mb(1),c.hd(" ",c.xc(4,8,"View Terms & Conditions"),"")}}function tT(e,t){if(1&e&&(c.jc(0,"div",12),c.ec(1,"basic-button",13),c.ec(2,"basic-button",13),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("buttonType",e.buttonSave.buttonType)("type",e.buttonSave.type)("text",e.buttonSave.text)("buttonType",e.buttonSave.buttonType)("click",e.buttonSave.onClick),c.Mb(1),c.Dc("buttonType",e.buttonCancel.buttonType)("type",e.buttonCancel.type)("text",e.buttonCancel.text)("buttonType",e.buttonCancel.buttonType)("click",e.buttonCancel.onClick)}}let iT=(()=>{class e{constructor(e,t,i,s,n,a){this.fb=e,this.backendService=t,this.translationService=i,this.pageService=s,this.docLayoutService=n,this.router=a,this.termsConditionsFields={fieldsParams:null},this.mandatoryFieldChanged=!1;const o=E.a.t("standard","_SAVE"),c=E.a.t("standard","cancel");this.currentLanguge=this.translationService.currentLang,this.termsConditionsFormGroup=this.fb.group({termsConditions:[!0,Ke.x.required]}),this.buttonSave={type:"normal",text:o,buttonType:"submit",onClick:()=>{this.mandatoryFieldChanged&&this.docLayoutService.dialog.showCommonDialog({title:E.a.t("standard","Are you sure you want to proceed?"),content:E.a.t("standard","By unchecking the mandatory Terms & Conditions settings (marked with an asterisk), you will not be able to access and use your LMS again. The agreement to the mandatory Terms & Conditions settings is required to complete your registration and use your platform."),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:E.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.updateTermsConditions().then(t=>{e.actionSuccess.next(t)})})}},this.buttonCancel={type:"cancel",text:c,buttonType:"button",onClick:()=>{r.a.singleton.publish({event_type:"toggle-accordion",sender_id:"my-profile",data:{index:"0",reload:!0}})}}}ngOnInit(){this.loadTermsConditions(),this.termsConditionsFormGroup.valueChanges.subscribe(e=>{this.mandatoryFieldChanged=!1===e.termsConditions})}updateTermsConditions(){return new Promise(e=>{this.backendService.request(`/manage/v1/termsandconditions/track/${this.mainTermsConditionsData.track_id}`,"PUT",{id_tc_version:this.mainTermsConditionsData.id_tc_version,track_answer:!0===this.termsConditionsFormGroup.value.termsConditions?1:0}).subscribe(t=>{e(!0),!0===t.data.logout?(window.localStorage.clear(),this.router.navigate(["/learn/signin"],mi.b)):this.docLayoutService.toast.showToast({message:E.a.t("standard","Your preferences are successfully updated."),type:"success"})},t=>{e(!1),this.docLayoutService.toast.showToast({message:t.message[0].message.text,type:"error"})})})}loadTermsConditions(){this.backendService.request("/manage/v1/termsandconditions/track","GET").subscribe(e=>{this.mainTermsConditionsData=e.data.tc,this.termsConditionsFields.fieldsParams={label:this.mainTermsConditionsData.tc_acceptance_message[`${this.currentLanguge}`],value:1,checked:!0,enabled:!0,required:!0,change:e=>{}}})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(Ke.d),c.dc(S.a),c.dc(js.a),c.dc(O.a),c.dc(M.a),c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["my-profile-terms-conditions"]],decls:12,vars:6,consts:[[1,"terms-conditions-wrapper"],[1,"terms-conditions-alert-banner","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle","table-big-icons"],[1,"mdl-wrapper","terms-conditions-form"],[1,"policy-form",3,"formGroup"],[1,"mdl-grid"],[1,"mdl-cell","terms-conditions-view","bg-white","mdl-cell--12-col"],["class","form-row form-row-terms-conditions",4,"ngIf"],["class","form-row terms-conditions-form-buttons border-grey",4,"ngIf"],[1,"form-row","form-row-terms-conditions"],[3,"label","value","checked","change","required","inputFormControl"],["target","_blank",3,"routerLink"],[1,"form-row","terms-conditions-form-buttons","border-grey"],[3,"buttonType","type","text","click"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.ec(2,"i",2),c.jc(3,"p"),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.jc(6,"div",3),c.jc(7,"form",4),c.jc(8,"div",5),c.jc(9,"div",6),c.dd(10,eT,5,14,"div",7),c.dd(11,tT,3,10,"div",8),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(4),c.gd(c.xc(5,4,"By unchecking the mandatory Terms & Conditions settings (marked with an asterisk), you will not be able to access and use your LMS again. The agreement to the mandatory Terms & Conditions settings is required to complete your registration and use your platform.")),c.Mb(3),c.Dc("formGroup",t.termsConditionsFormGroup),c.Mb(3),c.Dc("ngIf",t.termsConditionsFields.fieldsParams),c.Mb(1),c.Dc("ngIf",t.termsConditionsFormGroup.dirty))},directives:[Ke.y,Ke.p,Ke.i,Ae.p,Fn.a,s.k,Fs.a],pipes:[E.b],encapsulation:2}),e})();var sT=i("9j9i"),nT=i("SxV6"),aT=i("zP0r");const oT={authenticatorApp:{title:Je.a.t("esignature","Authenticator App"),description:Je.a.t("esignature","Use the Authenticator app to get free verification codes, even if your phone is offline. Available for Android and iOS."),contentText:Je.a.t("esignature","Pair your authenticator app. In this way, you'll be able to generate verification codes from your device."),scanQrCode:Je.a.t("standard","Scan me to pair your authentication app"),bulletPoints:{first:Je.a.t("standard","Download the Google Authenticator App from Google Play Store or App Store."),second:Je.a.t("esignature","Open the app and tap the Add button"),third:Je.a.t("esignature","Select the Scan Barcode option"),fourth:Je.a.t("esignature","Insert here the 6-digit verification code (OTP) that you see in the app")},noCamera:Je.a.t("esignature","If you don't have a camera, you can manually enter the key:"),oneTimePassword:Je.a.t("two_factor_auth","One Time Password"),activate:Je.a.t("standard","_ACTIVATE"),errors:{missingOtp:Je.a.t("standard","Something is missing, please type your One Time Password"),wrongLengthOtp:Je.a.t("mobile","The required length is 6 characters"),wrongOtpCode:Je.a.t("two_factor_auth","Invalid OTP")},notificationError:{title:Je.a.t("standard","1 Error - Activation not possible"),subtitle:Je.a.t("standard","Please fill in the required fields correctly to proceed")},notificationErrorGenerateKey:{title:Je.a.t("standard","1 Error - Recovery key generation not possible"),subtitle:Je.a.t("standard","Please fill in the required fields correctly to proceed")},successPairing:Je.a.t("esignature","Authenticator app paired successfully"),successGenerateRecoveryKey:Je.a.t("esignature","Recovery key created successfully"),pairedTextTitle:Je.a.t("esignature","Authenticator App Paired"),pairedTextSubtitle:Je.a.t("esignature","An app appears to have been associated with your profile on"),btnNewRecoveryKey:Je.a.t("standard","New Recovery Key"),unpair:Je.a.t("esignature","Unpair"),dialogs:{generateOtpTitle:Je.a.t("esignature","Generate a New Recovery Key"),generateOtpSubTitle:Je.a.t("esignature","In order to generate a new recovery key, please insert here the 6-digit verification code (OTP) that you see in the app. {newLine} Are you sure you want to generate a new recovery key?"),recoveryOtpTitle:Je.a.t("esignature","Generate a New Recovery Key"),recoveryOtpSubtitle:Je.a.t("esignature","If you lose access to your phone, you won't be able to complete the authentication process. Print, copy or write down this key without letting anyone see it."),savedKey:Je.a.t("mobile","I saved the recovery key"),btnDone:Je.a.t("standard","Done"),savedRecoveryKey:Je.a.t("mobile","I saved the recovery key"),requiredKey:Je.a.t("standard","(Required)"),btnCancel:Je.a.t("standard","Cancel"),btnGenerate:Je.a.t("app7020","Generate"),tooltipClose:Je.a.t("app7020","Close"),tooltipAria:Je.a.t("standard","Close dialog"),checkedSaveKey:Je.a.t("standard","Something went wrong."),flagCheckBox:Je.a.t("error","Please confirm you want to proceed by flagging the checkbox."),unpairTitle:Je.a.t("esignature","Unpair Authenticator App"),unpairSubTitle:Je.a.t("esignature","To unpair your authenticator app, you need to enter your recovery key. If you need any help with the recovery key, contact your system administrator."),unpairSuccess:Je.a.t("esignature","Authenticator app unpaired successfully"),errorUnpairNotification:Je.a.t("standard","1 Error - Unpairing not possible"),recoveryKey:Je.a.t("esignature","Recovery Key"),missingRecoveryKey:Je.a.t("standard","Something is missing, please type your recovery key"),wrongUnpairLengthOtp:Je.a.t("standard","The required length is {count} characters"),wrongOtpUnpair:Je.a.t("mobile","This recovery Key is not valid")}}};var rT=i("Qb5X"),cT=i("7fTW"),lT=i("KwVG"),dT=i("jesm");let uT=(()=>{class e{constructor(e,t,i){this._backendService=e,this._docLayoutService=t,this._improvementAreasProfilingService=i,this.assignedSkillsOccupation$=new Pe.a(null),this.assignedSkills$=new Pe.a([]),this.suggestedSkills$=new Pe.a([]),this.userIsProfiled$=new Pe.a(!1),this.loadingSuggestedSkills$=new Pe.a(!1),this.enoughPlatformAvailableSkills$=new Pe.a(!1),this.isSkillsToggleOn$=new Pe.a(!1)}hasPlatformAvailableSkills(){return this._backendService.request(lT.a.workForceSkills,"GET",void 0,{size:26}).pipe(Object(Ci.a)(e=>{var t;this.isSkillsToggleOn$.value&&this.enoughPlatformAvailableSkills$.next((null!==(t=e.data.items)&&void 0!==t?t:[]).length>25)}),Object(ri.a)(e=>{var t;return(null!==(t=e.data.items)&&void 0!==t?t:[]).length>0}))}getSuggestedSkills(e){var t,i;if(!this.isSkillsToggleOn$.value&&!this.assignedSkillsOccupation$.value&&!e)return;const s=null!=e?e:this.assignedSkillsOccupation$.value;this.loadingSuggestedSkills$.next(!0),this.isSkillsToggleOn$.value?this._backendService.request(lT.a.workForceSkills,"GET",void 0,Object.assign({size:10},s&&this.enoughPlatformAvailableSkills$.value&&{occupation_code:null!==(t=s.canonicalCode)&&void 0!==t?t:""})).pipe(Object(ee.a)(1),Object(ri.a)(e=>e.data.items)).subscribe(e=>{this.suggestedSkills$.next(e),this.filterSuggestedSkills(),this.loadingSuggestedSkills$.next(!1)}):this._improvementAreasProfilingService.getSuggestedSkills(null!==(i=null==s?void 0:s.canonicalCode)&&void 0!==i?i:"").pipe(Object(ee.a)(1)).subscribe(e=>{this.suggestedSkills$.next(e),this.filterSuggestedSkills(),this.loadingSuggestedSkills$.next(!1)})}getAutocompleteSkills(e,t){var i,s;const n=this.assignedSkillsOccupation$.value;return this.isSkillsToggleOn$.value?this._backendService.request(lT.a.workForceSkills,"GET",void 0,{search:e,size:10}).pipe(Object(ri.a)(e=>this.filterAutoCompleteSkills(e.data.items))):this._improvementAreasProfilingService.getSkills(e,null!==(s=null!==(i=null==n?void 0:n.canonicalCode)&&void 0!==i?i:null==t?void 0:t.canonicalCode)&&void 0!==s?s:null).pipe(Object(ri.a)(e=>this.filterAutoCompleteSkills(e)))}getOccupations(e){return this._improvementAreasProfilingService.getOccupations(e)}createOccupation(e){return this._improvementAreasProfilingService.createOccupation(e)}saveProfiling(e,t){return this.userIsProfiled$.next(Boolean(null==t?void 0:t.length)),this._improvementAreasProfilingService.saveProfiling(e,t)}filterSuggestedSkills(){const e=this.suggestedSkills$.value.filter(e=>-1===this.assignedSkills$.value.findIndex(t=>t.code===e.code));this.suggestedSkills$.next(e)}filterAutoCompleteSkills(e){return e.filter(e=>-1===this.assignedSkills$.value.findIndex(t=>t.code===e.code))}showGenericSnackbarError(){this._docLayoutService.toast.showToast({message:rT.a.skills.internalError,type:"error"})}resetServiceSkillsState(){this.assignedSkillsOccupation$.next(null),this.assignedSkills$.next([]),this.suggestedSkills$.next([]),this.loadingSuggestedSkills$.next(!1),this.enoughPlatformAvailableSkills$.next(!1),this.isSkillsToggleOn$.next(!1)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a),c.nc(M.a),c.nc(DS.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var hT=i("S7qi"),pT=i("GIHc");const mT=["uploadFile"];function gT(e,t){if(1&e&&(c.jc(0,"span",17),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.avatarWithDefaultIcon)," ")}}function bT(e,t){if(1&e&&(c.jc(0,"span",17),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.avatarWithLetters)," ")}}function fT(e,t){if(1&e&&(c.jc(0,"span",17),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.avatarWithImage)," ")}}function vT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.error.errorImgSize)," ")}}function _T(e,t){if(1&e&&(c.jc(0,"div",29),c.ec(1,"ui-notification-inline",30),c.wc(2,"t"),c.wc(3,"t"),c.wc(4,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("title",e.totalErrorsForm>1?c.xc(2,2,e.multipleErrorsSaveFormTitle):c.xc(3,4,e.singleErrorSaveFormTitle))("message",c.xc(4,6,e.dictionary.personalInfo.error.errorsSaveFormSubTitle))}}function wT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.error.fieldRequired)," ")}}function yT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.error.fieldRequired)," ")}}function CT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.error.missingEmail)," ")}}function ST(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.error.emailNotValid)," ")}}function TT(e,t){1&e&&c.ec(0,"div",37)}function kT(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",23),c.ec(2,"doc-shared-user-additional-field",35),c.ic(),c.dd(3,TT,1,0,"div",36),c.gc()),2&e){const e=t.$implicit,i=t.index,s=c.vc(3);c.Mb(2),c.Dc("id",e.id)("label",e.label)("type",e.type)("control",e.formControl)("options",e.options)("iframeHeight",e.iframeHeight)("iframeUrl",e.iframeUrl)("userData",s.responseIframe),c.Mb(1),c.Dc("ngIf",0!==i&&(i+1)%2==0)}}function IT(e,t){if(1&e&&(c.jc(0,"section",31),c.jc(1,"div",2),c.jc(2,"div",32),c.jc(3,"div",33),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.ic(),c.dd(6,kT,4,9,"ng-container",34),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.hd(" ",c.xc(5,2,e.dictionary.personalInfo.additionalFields)," "),c.Mb(2),c.Dc("ngForOf",e.additionalFields)}}function xT(e,t){if(1&e){const e=c.kc();c.jc(0,"form",18),c.rc("ngSubmit",function(){return c.Uc(e),c.vc().submitForm()}),c.jc(1,"section",19),c.jc(2,"div",1),c.jc(3,"div",2),c.jc(4,"div",20),c.jc(5,"div",21),c.fd(6),c.wc(7,"t"),c.ic(),c.dd(8,_T,5,8,"div",22),c.ic(),c.ic(),c.jc(9,"div",23),c.ec(10,"ui-input-text",24),c.wc(11,"t"),c.wc(12,"t"),c.ic(),c.jc(13,"div",23),c.ec(14,"ui-input-text",24),c.wc(15,"t"),c.wc(16,"t"),c.ic(),c.jc(17,"div",23),c.jc(18,"ui-input-text",25),c.wc(19,"t"),c.wc(20,"t"),c.dd(21,wT,3,3,"ui-input-error",12),c.ic(),c.ic(),c.jc(22,"div",23),c.jc(23,"ui-input-text",25),c.wc(24,"t"),c.wc(25,"t"),c.dd(26,yT,3,3,"ui-input-error",12),c.ic(),c.ic(),c.ic(),c.jc(27,"div",1),c.jc(28,"div",23),c.jc(29,"ui-input-text",25),c.wc(30,"t"),c.wc(31,"t"),c.dd(32,CT,3,3,"ui-input-error",12),c.dd(33,ST,3,3,"ui-input-error",12),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(34,"div",1),c.dd(35,IT,7,4,"section",26),c.jc(36,"div",2),c.jc(37,"div",27),c.ec(38,"ui-button-raised-primary",28),c.wc(39,"t"),c.wc(40,"t"),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Dc("formGroup",e.personalInfoGroup),c.Mb(6),c.hd(" ",c.xc(7,26,e.dictionary.personalInfo.details)," "),c.Mb(2),c.Dc("ngIf",e.totalErrorsForm>0),c.Mb(2),c.Dc("formControl",e.personalInfoBlocked.controls.username)("disabledMarker",c.xc(11,28,e.dictionary.personalInfo.disabledMarker))("label",c.xc(12,30,e.dictionary.personalInfo.username)),c.Mb(4),c.Dc("formControl",e.personalInfoBlocked.controls.user_level)("disabledMarker",c.xc(15,32,e.dictionary.personalInfo.disabledMarker))("label",c.xc(16,34,e.dictionary.personalInfo.userLevel)),c.Mb(4),c.Dc("formControl",e.personalInfoGroup.controls.firstname)("requiredMarker",c.xc(19,36,e.dictionary.personalInfo.requiredMarker))("label",c.xc(20,38,e.dictionary.personalInfo.firstName)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.firstname.errors?null:e.personalInfoGroup.controls.firstname.errors.required)&&e.personalInfoGroup.controls.firstname.dirty),c.Mb(2),c.Dc("formControl",e.personalInfoGroup.controls.lastname)("requiredMarker",c.xc(24,40,e.dictionary.personalInfo.requiredMarker))("label",c.xc(25,42,e.dictionary.personalInfo.lastName)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.lastname.errors?null:e.personalInfoGroup.controls.lastname.errors.required)&&e.personalInfoGroup.controls.lastname.dirty),c.Mb(3),c.Dc("formControl",e.personalInfoGroup.controls.email)("requiredMarker",c.xc(30,44,e.dictionary.personalInfo.requiredMarker))("label",c.xc(31,46,e.dictionary.personalInfo.email)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.email.errors?null:e.personalInfoGroup.controls.email.errors.required)&&e.personalInfoGroup.controls.email.dirty),c.Mb(1),c.Dc("ngIf",!1===(null==e.personalInfoGroup.controls.email.errors||null==e.personalInfoGroup.controls.email.errors.emailValidator?null:e.personalInfoGroup.controls.email.errors.emailValidator.valid)&&e.personalInfoGroup.controls.email.dirty),c.Mb(2),c.Dc("ngIf",e.additionalFields.length>0),c.Mb(3),c.Dc("label",c.xc(39,48,e.dictionary.personalInfo.btnSave))("loading",e.savingPersonalInfo)("ariaLabel",c.xc(40,50,e.dictionary.personalInfo.savePersonalInfoA11y))}}let DT=(()=>{class e{constructor(e,t,i,s,n,a){this._myProfileService=e,this._uploadService=t,this._docLayoutService=i,this._translationService=s,this._changeDetectorRef=n,this._toggleService=a,this.dictionary=rT.a,this.sizeAvatar=b.g.XXL,this.imageUrl="",this.errorSizeImg=!0,this.color=b.r.ACCENT,this.showPersonalInfo=!k.b.getInstance().settings.allow_only_password_change,this.isSuperAdmin=k.c.getInstance().isCurrentUserA(k.c.LEVEL_SUPERADMIN),this.additionalFields=[],this.savingPersonalInfo=!1,this.personalInfoBlocked=new Ke.h({username:new Ke.e(""),user_level:new Ke.e("")}),this._session=k.c.getInstance(),this._platform=k.b.getInstance(),this._useEmalAsUsername="on"===this._platform.user_settings.use_email_as_username,this._requireName=k.b.getInstance().settings.registration_settings.options.lastfirst_mandatory,this._imgMaxSize=cT.b,this._imgMimeTypes=["image/gif","image/png","image/jpeg"],this._myProfileService.sessionAvatarUrl$.subscribe(e=>{this.imageUrl=e}),this._myProfileService.sessionAvatarUrl$.next(this._session.avatar_url),this._toggleService.isOn(u.f.TOGGLE_HIDE_MY_PROFILE_PREFERENCES_AND_TIMEZONE_MODAL)&&(this.showPersonalInfo=!k.b.getInstance().settings.hide_personal_info)}ngOnInit(){this._setPersonalInfoGroup(),this._getUserLevel(),this.setFormValue(),this._getIframeData(),this.getAdditionalFields(),this._setTextImage()}setFormValue(){var e,t,i,s,n,a,o,r;null===(e=this.personalInfoBlocked.get("username"))||void 0===e||e.setValue(this._session.username),null===(t=this.personalInfoBlocked.get("username"))||void 0===t||t.disable(),null===(i=this.personalInfoBlocked.get("user_level"))||void 0===i||i.setValue(this.userLevel),null===(s=this.personalInfoBlocked.get("user_level"))||void 0===s||s.disable(),null===(n=this.personalInfoGroup.get("firstname"))||void 0===n||n.setValue(this._session.firstname),null===(a=this.personalInfoGroup.get("lastname"))||void 0===a||a.setValue(this._session.lastname),null===(o=this.personalInfoGroup.get("email"))||void 0===o||o.setValue(this._session.email),null===(r=this.personalInfoGroup.get("formControl"))||void 0===r||r.setValue(this.additionalFields),this.markFormAsPristine()}getAdditionalFields(){this._myProfileService.getAdditionalFields().subscribe(e=>{this.additionalFields=e,this.markFormAsPristine()})}deleteAvatar(){this.uploadFile.nativeElement.value="",this._myProfileService.fetchImage(this._session.id,{avatar:""}).subscribe(()=>{k.c.getInstance().setUserInfo({avatar:""}),this._myProfileService.sessionAvatarUrl$.next(""),this._changeDetectorRef.markForCheck(),this._uploadService.remove(this.imageUrl.split("/").reverse()[0],"avatar").subscribe(()=>{this._setTextImage()}),this._docLayoutService.toast.showToast({message:rT.a.personalInfo.deleteAvatarImage,type:"success"})})}fileUpload(e){const t=e.target.files,i=URL.createObjectURL(t[0]),s=new Image;s.onload=()=>{this._imgSize=Number(s.sizes),this._validate(t)&&(this.isLoading=!0,this._toggleService.isOn(u.f.TOGGLE_EXIF_STRIP_AVATAR_UPLOAD)?this._uploadAvatar(t):this._uploadImg(t))},s.src=i}submitForm(){const e=new Pe.a(!1);if(this.errorSizeImg=!0,this._validateDetails()){this.savingPersonalInfo=!0;const t=this._myProfileService.getAdditionalFieldsRawValue(this.additionalFields);this._myProfileService.updatePersonalInfo(this.personalInfoGroup.controls.firstname.value,this.personalInfoGroup.controls.lastname.value,this.personalInfoGroup.controls.email.value,t,"myProfile").subscribe(t=>{t.data.success&&(k.c.getInstance().setUserInfo({avatar:this._myProfileService.sessionAvatarUrl$.value,firstname:this.personalInfoGroup.controls.firstname.value,lastname:this.personalInfoGroup.controls.lastname.value,email:this.personalInfoGroup.controls.email.value}),this._docLayoutService.toast.showToast({message:rT.a.personalInfo.success,type:"success"}),this._setTextImage(),this.markFormAsPristine()),this.savingPersonalInfo=!1,e.next(t.data.success)},()=>{this.savingPersonalInfo=!1,e.next(!1)})}else setTimeout(()=>{e.next(!1)});return e}markFormAsPristine(){for(let e in this.personalInfoGroup.controls)this.personalInfoGroup.controls[e].markAsPristine();this.personalInfoGroup.markAsPristine(),this.additionalFields.forEach(e=>{e.formControl.markAsPristine()})}_getUserLevel(){this.userLevel="super_admin"===this._session.user_level?this._translationService.instant(this.dictionary.personalInfo.userIs.admin.key,this.dictionary.personalInfo.userIs.admin.category):"power_user"===this._session.user_level?this._translationService.instant(this.dictionary.personalInfo.userIs.powerUser.key,this.dictionary.personalInfo.userIs.powerUser.category):this._translationService.instant(this.dictionary.personalInfo.userIs.user.key,this.dictionary.personalInfo.userIs.user.category)}_getIframeData(){this._myProfileService.getUserData(this._session.id).subscribe(e=>{this.responseIframe=e.data})}_setPersonalInfoGroup(){this.personalInfoGroup=new Ke.h({firstname:new Ke.e("",this._requireName?Ke.x.required:null),lastname:new Ke.e("",this._requireName?Ke.x.required:null),email:new Ke.e("",[ud.a.validEmail(),this.isSuperAdmin||this._useEmalAsUsername?Ke.x.required:Ke.x.nullValidator]),formControl:new Ke.e("")})}_setTextImage(){this.userInitials=k.c.getInstance().user_initials,this.hasName=!0,""===this._session.avatar_url&&""===this.personalInfoGroup.controls.firstname.value&&""===this.personalInfoGroup.controls.lastname.value&&(this.hasName=!1)}_validate(e){let t=!0,i=e[0];return this._validateSize(i)||(t=!1,this.uploadFile.nativeElement.value="",this._docLayoutService.toast.showToast({message:rT.a.personalInfo.errorUploadImage,type:"error"})),this._validateType(i)||(t=!1,this.uploadFile.nativeElement.value="",this._docLayoutService.toast.showToast({message:rT.a.personalInfo.errorUploadFileType,type:"error"})),t}_validateDetails(){let e=!0;this._userProfileErrorsCount=0,this._additionalFieldsErrorsCount=0,this.totalErrorsForm=0,this._myProfileService.stripTagsFromPersonalInfoFields(this.personalInfoGroup),this._myProfileService.stripTagsFromAdditionalFields(this.additionalFields),this.personalInfoGroup.markAllAsTouched();for(const t in this.personalInfoGroup.controls)this.personalInfoGroup.controls[t].valid||(this.personalInfoGroup.controls[t].markAsDirty(),this._userProfileErrorsCount++,e=!1);for(const t in this.additionalFields)this.additionalFields[t].formControl.markAsTouched(),this.additionalFields[t].formControl.valid||this.additionalFields[t].formControl.disabled||(this.additionalFields[t].formControl.setErrors({required:!0}),this.additionalFields[t].formControl.markAsDirty(),this._additionalFieldsErrorsCount++,e=!1);return this.userAdditionalField.forEach(e=>{"freetext"===e.type&&e.checkInputChanges()}),this.totalErrorsForm=this._userProfileErrorsCount+this._additionalFieldsErrorsCount,this.multipleErrorsSaveFormTitle=Je.a.t("standard","{count_error} Errors - Saving changes not possible",{count_error:this.totalErrorsForm}),this.singleErrorSaveFormTitle=Je.a.t("standard","{count_error} Error - Saving changes not possible",{count_error:this.totalErrorsForm}),e}_validateSize(e){let t=!0;return this.errorSizeImg=!0,this._uploadService.toMegabytes(e.size)>this._imgMaxSize.size&&(t=!1,this.errorSizeImg=!1),t}_validateType(e){let t=!0,i=e.type.toString();return this._imgMimeTypes.includes(i)||(t=!1),t}_uploadImg(e){this.isLoading=!0;let t=e[0];this._uploadService.getSignedUrl(t,"avatar","",!0,"write").subscribe(e=>{let i={avatar:e.data.filename_hashed};this._uploadService.uploadToS3(t,e.data.url).subscribe(s=>{s.type===od.e.Response&&this._myProfileService.fetchImage(this._session.id,i).subscribe(i=>{i.data.success&&(this.isLoading=!1,this._myProfileService.getFetchedImage({filename:e.data.filename_hashed,keep_original_filename:!0,mime:t.type,collection:"avatar",operation:"read"}).subscribe(e=>{const t=e.data.url;this._session.avatar_url=t,this._myProfileService.sessionAvatarUrl$.next(t),this.uploadFile.nativeElement.value="",k.c.getInstance().setUserInfo({avatar:this._myProfileService.sessionAvatarUrl$.value})})),this._docLayoutService.toast.showToast({message:rT.a.personalInfo.successUploadImage,type:"success"})})})})}_uploadAvatar(e){const t=ki.a.getInstance().get("access_token").access_token;let i=new od.f;t&&(i=i.append("Authorization",`Bearer ${t}`));let s=e[0];this.isLoading=!0,this._uploadService.uploadToS3(s,"/manage/v1/upload/avatar",i).subscribe(e=>{if(e.type===od.e.Response){const t=e.body.data.filename;this._myProfileService.fetchImage(this._session.id,{avatar:t}).subscribe(e=>{e.data.success&&(this.isLoading=!1,this._myProfileService.getFetchedImage({filename:t,keep_original_filename:!0,mime:s.type,collection:"avatar",operation:"read"}).subscribe(e=>{const t=e.data.url;this._session.avatar_url=t,this._myProfileService.sessionAvatarUrl$.next(t),k.c.getInstance().setUserInfo({avatar:this._myProfileService.sessionAvatarUrl$.value}),this.uploadFile.nativeElement.value=""})),this._docLayoutService.toast.showToast({message:rT.a.personalInfo.successUploadImage,type:"success"})})}})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(dT.a),c.dc(pT.a),c.dc(M.a),c.dc(u.h),c.dc(c.i),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-personal-info"]],viewQuery:function(e,t){if(1&e&&(c.md(mT,1),c.md(hT.a,1)),2&e){let e;c.Qc(e=c.sc())&&(t.uploadFile=e.first),c.Qc(e=c.sc())&&(t.userAdditionalField=e)}},hostAttrs:[1,"lrn-my-profile-personal-info"],decls:30,vars:32,consts:[[1,"border"],[1,"ui-row"],[1,"ui-col-24"],[1,"avatar-section","font-custom"],["aria-labelledby","my-personal-info-avatar-section"],[1,"container"],[3,"size","imageUrl","text","iconName","showDeleteButton","deleteButtonTooltip","deleteButtonAriaLabel","uiAriaHidden","delete"],[1,"direction"],["id","my-personal-info-avatar-section","role","heading","aria-level","3",1,"title-text"],[1,"avatar-description"],["class","ui-visually-hidden",4,"ngIf"],[1,"error-img-load"],[4,"ngIf"],["type","file","accept","image/gif, image/png, image/jpg, image/jpeg",3,"hidden","change"],["uploadFile",""],[3,"label","color","loading","trigger"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"ui-visually-hidden"],[3,"formGroup","ngSubmit"],["aria-labelledby","my-personal-info-details-group"],[1,"details-section","font-custom"],["id","my-personal-info-details-group","role","heading","aria-level","3",1,"title-text"],["class","error-space",4,"ngIf"],[1,"ui-col-24","ui-col-sm-12","field-spacing"],[3,"formControl","disabledMarker","label"],["ngDefaultControl","",3,"formControl","requiredMarker","label"],["aria-labelledby","my-personal-info-additional-fields-group",4,"ngIf"],[1,"tab-footer"],["type","submit",3,"label","loading","ariaLabel"],[1,"error-space"],[3,"title","message"],["aria-labelledby","my-personal-info-additional-fields-group"],[1,"additional-fields-section","font-custom"],["id","my-personal-info-additional-fields-group","role","heading","aria-level","3",1,"title-text"],[4,"ngFor","ngForOf"],["ngDefaultControl","",3,"id","label","type","control","options","iframeHeight","iframeUrl","userData"],["class","clearfix",4,"ngIf"],[1,"clearfix"]],template:function(e,t){if(1&e){const e=c.kc();c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.jc(3,"div",3),c.jc(4,"section",4),c.jc(5,"div",5),c.jc(6,"ui-avatar",6),c.rc("delete",function(){return t.deleteAvatar()}),c.wc(7,"t"),c.wc(8,"t"),c.ic(),c.jc(9,"div",7),c.jc(10,"div",8),c.fd(11),c.wc(12,"t"),c.ic(),c.jc(13,"div",9),c.jc(14,"div"),c.fd(15),c.wc(16,"t"),c.ic(),c.jc(17,"div"),c.fd(18),c.wc(19,"t"),c.ic(),c.ic(),c.dd(20,gT,3,3,"span",10),c.dd(21,bT,3,3,"span",10),c.dd(22,fT,3,3,"span",10),c.jc(23,"div",11),c.dd(24,vT,3,3,"ui-input-error",12),c.ic(),c.jc(25,"input",13,14),c.rc("change",function(e){return t.fileUpload(e)}),c.ic(),c.jc(27,"ui-button-outlined",15),c.rc("trigger",function(){return c.Uc(e),c.Rc(26).click()}),c.wc(28,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.dd(29,xT,41,52,"form",16)}2&e&&(c.Mb(6),c.Dc("size",t.sizeAvatar)("imageUrl",t.imageUrl)("text",t.userInitials)("iconName",t.hasName?"":"user")("showDeleteButton",!!t.imageUrl)("deleteButtonTooltip",c.xc(7,20,t.dictionary.delete))("deleteButtonAriaLabel",c.xc(8,22,t.dictionary.deleteAvatar))("uiAriaHidden",""===t.imageUrl),c.Mb(5),c.hd(" ",c.xc(12,24,t.dictionary.personalInfo.avatar)," "),c.Mb(4),c.hd(" ",c.xc(16,26,t.dictionary.personalInfo.minDimensionImage)," "),c.Mb(3),c.hd(" ",c.xc(19,28,t.dictionary.personalInfo.maxFileSize)," "),c.Mb(2),c.Dc("ngIf",""===t.imageUrl&&!t.hasName),c.Mb(1),c.Dc("ngIf",""===t.imageUrl&&t.hasName),c.Mb(1),c.Dc("ngIf",""!==t.imageUrl),c.Mb(2),c.Dc("ngIf",!t.errorSizeImg),c.Mb(1),c.Dc("hidden",!0),c.Mb(2),c.Dc("label",c.xc(28,30,t.dictionary.personalInfo.btnImage))("color",t.color)("loading",t.isLoading),c.Mb(2),c.Dc("ngIf",t.showPersonalInfo))},directives:[b.e,b.b,Ae.p,b.B,b.Rb,Ke.y,Ke.p,Ke.i,b.gc,Ke.o,Ke.f,Ke.b,b.F,b.Ec,Ae.o,hT.a],pipes:[E.b],styles:["lrn-my-profile-personal-info .avatar-section{padding:1.5rem 0 2rem;padding:var(--ui-spacing-md) 0 var(--ui-spacing-lg)}lrn-my-profile-personal-info .avatar-section ui-avatar{display:inline-table;margin-right:1.5rem;margin-right:var(--ui-spacing-md)}[dir=rtl] lrn-my-profile-personal-info .avatar-section ui-avatar{margin-right:0;margin-left:1.5rem;margin-left:var(--ui-spacing-md)}lrn-my-profile-personal-info .avatar-description{font-size:.75rem;font-size:var(--ui-typography-size-xs);margin-top:.5rem;margin-top:var(--ui-spacing-xxs);line-height:1.25rem;line-height:var(--ui-typography-lineheight-sm);color:#707070;color:var(--ui-color-typography-secondary)}lrn-my-profile-personal-info .details-section{padding:1.5rem 0;padding:var(--ui-spacing-md) 0}lrn-my-profile-personal-info .error-space{maring-top:1rem;margin-top:var(--ui-spacing-sm)}lrn-my-profile-personal-info .error-img-load{margin:1rem 0;margin:var(--ui-spacing-sm) 0}lrn-my-profile-personal-info .additional-fields-section{padding:1.5rem 0;padding:var(--ui-spacing-md) 0}lrn-my-profile-personal-info .field-spacing{margin:0 0 var(--ui-spacing-md);display:block}"],encapsulation:2}),e})();var OT=i("bD2U");function ET(e){const t=k.b.getInstance().settings;return e.value?t.pass_min_char&&e.value.length<+t.pass_min_char||t.pass_not_username&&e.value===k.c.getInstance().username?{pattern:!0}:t.pass_alfanumeric&&!e.value.match(/^(?=.*[a-zA-Z])(?=.*[0-9])/)?{alphanumeric:!0}:/(.)\1{2,}/gi.test(e.value)?{duplicateCharacter:!0}:null:null}var PT=i("+uCo");function MT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.changePassword.error.emptyCurrentPassword)," ")}}function AT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,null==e.currentPasswordFormControl.errors?null:e.currentPasswordFormControl.errors.backendError)," ")}}function LT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.changePassword.error.emptyNewPassword)," ")}}function jT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.changePassword.error.passwordPolicy)," ")}}function FT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.changePassword.error.passwordAlphaNumeric)," ")}}function RT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.changePassword.error.repeatingCharacters)," ")}}function NT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,null==e.newPasswordFormControl.errors?null:e.newPasswordFormControl.errors.backendError)," ")}}function UT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.changePassword.error.emptyRetypedPassword)," ")}}function qT(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.changePassword.error.notEqualPassword)," ")}}let zT=(()=>{class e{constructor(){this.dictionary=rT.a,this.userID=k.c.getInstance().username,this.currentPasswordFormControl=new Ke.e("",[Ke.x.required]),this.newPasswordFormControl=new Ke.e("",[Ke.x.required,ET]),this.retypePasswordFormControl=new Ke.e("",[Ke.x.required,ud.a.matchPassword(this.newPasswordFormControl)]),this.passwordChangeFormGroup=new Ke.h({currentPassword:this.currentPasswordFormControl,newPassword:this.newPasswordFormControl,retypePassword:this.retypePasswordFormControl})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-change-password-form"]],hostAttrs:[1,"lrn-my-profile-change-password-form"],decls:35,vars:71,consts:[[3,"formControl","requiredMarker","label","tooltipLabelShow","tooltipLabelHide","buttonIconAriaLabelShow","buttonIconAriaLabelHide"],[4,"ngIf"],[1,"new-password-wrapper",3,"uiFocusWithin"],[3,"formControl","requiredMarker","label","ariaDescribedBy","tooltipLabelShow","tooltipLabelHide","buttonIconAriaLabelShow","buttonIconAriaLabelHide"],[3,"userID","passwordValue","allowAutoGenerate"]],template:function(e,t){1&e&&(c.jc(0,"form"),c.jc(1,"div"),c.jc(2,"ui-input-password",0),c.wc(3,"t"),c.wc(4,"t"),c.wc(5,"t"),c.wc(6,"t"),c.wc(7,"t"),c.wc(8,"t"),c.dd(9,MT,3,3,"ui-input-error",1),c.dd(10,AT,3,3,"ui-input-error",1),c.ic(),c.ic(),c.jc(11,"div",2),c.jc(12,"ui-input-password",3),c.wc(13,"t"),c.wc(14,"t"),c.wc(15,"t"),c.wc(16,"t"),c.wc(17,"t"),c.wc(18,"t"),c.dd(19,LT,3,3,"ui-input-error",1),c.dd(20,jT,3,3,"ui-input-error",1),c.dd(21,FT,3,3,"ui-input-error",1),c.dd(22,RT,3,3,"ui-input-error",1),c.dd(23,NT,3,3,"ui-input-error",1),c.ic(),c.ec(24,"doc-layout-password-helper",4),c.ic(),c.jc(25,"div"),c.jc(26,"ui-input-password",0),c.wc(27,"t"),c.wc(28,"t"),c.wc(29,"t"),c.wc(30,"t"),c.wc(31,"t"),c.wc(32,"t"),c.dd(33,UT,3,3,"ui-input-error",1),c.dd(34,qT,3,3,"ui-input-error",1),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(2),c.Dc("formControl",t.currentPasswordFormControl)("requiredMarker",c.xc(3,35,t.dictionary.personalInfo.requiredMarker))("label",c.xc(4,37,t.dictionary.changePassword.currentPassword))("tooltipLabelShow",c.xc(5,39,t.dictionary.changePassword.showPassword))("tooltipLabelHide",c.xc(6,41,t.dictionary.changePassword.hidePassword))("buttonIconAriaLabelShow",c.xc(7,43,t.dictionary.changePassword.showPassword))("buttonIconAriaLabelHide",c.xc(8,45,t.dictionary.changePassword.hidePassword)),c.Mb(7),c.Dc("ngIf",t.currentPasswordFormControl.dirty&&(null==t.currentPasswordFormControl.errors?null:t.currentPasswordFormControl.errors.required)),c.Mb(1),c.Dc("ngIf",t.currentPasswordFormControl.dirty&&(null==t.currentPasswordFormControl.errors?null:t.currentPasswordFormControl.errors.backendError)),c.Mb(1),c.Dc("uiFocusWithin","new-password-wrapper-focus-within"),c.Mb(1),c.Dc("formControl",t.newPasswordFormControl)("requiredMarker",c.xc(13,47,t.dictionary.personalInfo.requiredMarker))("label",c.xc(14,49,t.dictionary.changePassword.newPassword))("ariaDescribedBy","password-helper")("tooltipLabelShow",c.xc(15,51,t.dictionary.changePassword.showPassword))("tooltipLabelHide",c.xc(16,53,t.dictionary.changePassword.hidePassword))("buttonIconAriaLabelShow",c.xc(17,55,t.dictionary.changePassword.showPassword))("buttonIconAriaLabelHide",c.xc(18,57,t.dictionary.changePassword.hidePassword)),c.Mb(7),c.Dc("ngIf",t.newPasswordFormControl.dirty&&(null==t.newPasswordFormControl.errors?null:t.newPasswordFormControl.errors.required)),c.Mb(1),c.Dc("ngIf",t.newPasswordFormControl.dirty&&(null==t.newPasswordFormControl.errors?null:t.newPasswordFormControl.errors.pattern)),c.Mb(1),c.Dc("ngIf",t.newPasswordFormControl.dirty&&(null==t.newPasswordFormControl.errors?null:t.newPasswordFormControl.errors.alphanumeric)),c.Mb(1),c.Dc("ngIf",t.newPasswordFormControl.dirty&&(null==t.newPasswordFormControl.errors?null:t.newPasswordFormControl.errors.duplicateCharacter)),c.Mb(1),c.Dc("ngIf",t.newPasswordFormControl.dirty&&(null==t.newPasswordFormControl.errors?null:t.newPasswordFormControl.errors.backendError)),c.Mb(1),c.Dc("userID",t.userID)("passwordValue",t.newPasswordFormControl.value)("allowAutoGenerate",!1),c.Mb(2),c.Dc("formControl",t.retypePasswordFormControl)("requiredMarker",c.xc(27,59,t.dictionary.personalInfo.requiredMarker))("label",c.xc(28,61,t.dictionary.changePassword.confirmNewPassword))("tooltipLabelShow",c.xc(29,63,t.dictionary.changePassword.showPassword))("tooltipLabelHide",c.xc(30,65,t.dictionary.changePassword.hidePassword))("buttonIconAriaLabelShow",c.xc(31,67,t.dictionary.changePassword.showPassword))("buttonIconAriaLabelHide",c.xc(32,69,t.dictionary.changePassword.hidePassword)),c.Mb(7),c.Dc("ngIf",t.retypePasswordFormControl.dirty&&(null==t.retypePasswordFormControl.errors?null:t.retypePasswordFormControl.errors.required)),c.Mb(1),c.Dc("ngIf",t.retypePasswordFormControl.dirty&&(null==t.retypePasswordFormControl.errors?null:t.retypePasswordFormControl.errors.notEquivalent)))},directives:[Ke.y,Ke.p,Ke.q,b.Ub,Ke.o,Ke.f,Ae.p,b.Cb,PT.a,b.Rb],pipes:[E.b],styles:["lrn-my-profile-change-password-form .new-password-wrapper{position:relative}lrn-my-profile-change-password-form .new-password-wrapper doc-layout-password-helper{display:block;position:absolute;top:calc(var(--ui-spacing-lg) + var(--ui-typography-lineheight-md));left:0;width:100%;z-index:var(--ui-zindex-modal);opacity:0;transform:translateY(calc(var(--ui-spacing-lg) * -1));pointer-events:none;transition:opacity var(--ui-motion-duration-short) var(--ui-motion-easing-default),transform var(--ui-motion-duration-short) var(--ui-motion-easing-leaving)}[dir=rtl] lrn-my-profile-change-password-form .new-password-wrapper doc-layout-password-helper{left:0;right:var(--ui-spacing-tiny)}lrn-my-profile-change-password-form .new-password-wrapper.new-password-wrapper-focus-within doc-layout-password-helper{opacity:1;transform:translateY(0);pointer-events:auto;transition:opacity var(--uimotion-duration-short) var(--ui-motion-easing-default),transform var(--ui-motion-duration-short) var(--ui-motion-easing-entering)}"],encapsulation:2}),e})();const VT=["formComponent"],BT=function(e){return{count_error:e}};function GT(e,t){if(1&e&&(c.ec(0,"ui-notification-inline",9),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc();c.Dc("title",c.yc(1,2,1===e.passwordChangeErrorsCount?e.dictionary.savingChangesNotPossibleSingular:e.dictionary.savingChangesNotPossiblePlural,c.Ic(7,BT,e.passwordChangeErrorsCount)))("message",c.xc(2,5,e.dictionary.personalInfo.error.errorsSaveFormSubTitle))}}let $T=(()=>{class e{constructor(e,t,i){this._myProfileService=e,this._docLayoutService=t,this._secureLogoutService=i,this.dictionary=rT.a,this.passwordChangeErrorsCount=0,this.savingNewPassword=!1}updatePassword(){const e=new Pe.a(!1),t=this.formComponent.passwordChangeFormGroup;for(let i in t.controls)t.controls[i].markAsDirty();return t.markAllAsTouched(),t.updateValueAndValidity(),this.passwordChangeErrorsCount=0,t.valid?this._myProfileService.updatePassword(t).subscribe(i=>{i.error||(this._docLayoutService.toast.showToast({message:this.dictionary.changePassword.successChangePassword,type:"success"}),t.reset(),k.b.getInstance().disable_simultaneous_access&&this._myProfileService.redirectToSecureLogout()),this.markFormAsPristine(),e.next(!i.error)},()=>{this.passwordChangeErrorsCount=Object.keys(t.controls).filter(e=>!t.controls[e].valid).length,e.next(!1)}):(this.passwordChangeErrorsCount=Object.keys(t.controls).filter(e=>!t.controls[e].valid).length,setTimeout(()=>{e.next(!1)})),e}markFormAsPristine(){for(let e in this.formComponent.passwordChangeFormGroup.controls)this.formComponent.passwordChangeFormGroup.controls[e].markAsPristine()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(dT.a),c.dc(M.a),c.dc(OT.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-change-password"]],viewQuery:function(e,t){if(1&e&&c.md(VT,1),2&e){let e;c.Qc(e=c.sc())&&(t.formComponent=e.first)}},hostAttrs:[1,"lrn-my-profile-change-password"],decls:18,vars:8,consts:[[1,"password-tab-content"],[1,"ui-row"],[1,"ui-col-24"],["class","password-inline-error",3,"title","message",4,"ngIf"],[1,"password-content-info"],[1,"ui-col-24","ui-col-sm-12"],["formComponent",""],[1,"tab-footer"],["color","accent",3,"label","loading","trigger"],[1,"password-inline-error",3,"title","message"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"div",2),c.dd(3,GT,3,9,"ui-notification-inline",3),c.ic(),c.ic(),c.jc(4,"div",1),c.jc(5,"div",2),c.jc(6,"div",4),c.fd(7),c.wc(8,"t"),c.ic(),c.ic(),c.ic(),c.jc(9,"div",1),c.jc(10,"div",5),c.ec(11,"lrn-my-profile-change-password-form",null,6),c.ic(),c.ic(),c.jc(13,"div",1),c.jc(14,"div",2),c.jc(15,"div",7),c.jc(16,"ui-button-raised-primary",8),c.rc("trigger",function(){return t.updatePassword()}),c.wc(17,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(3),c.Dc("ngIf",t.passwordChangeErrorsCount>0),c.Mb(4),c.hd(" ",c.xc(8,4,t.dictionary.changePassword.contentInfo)," "),c.Mb(9),c.Dc("label",c.xc(17,6,t.dictionary.changePassword.btnChangePassword))("loading",t.savingNewPassword))},directives:[Ae.p,zT,b.F,b.Ec],pipes:[E.b],styles:["lrn-my-profile-change-password .password-tab-content{margin-top:var(--ui-spacing-md)}lrn-my-profile-change-password .password-content-info,lrn-my-profile-change-password .password-inline-error{margin-bottom:var(--ui-spacing-md);display:block}"],encapsulation:2}),e})();var HT=i("q6CC");const YT={language:Je.a.t("standard","Language"),dateFormat:Je.a.t("standard","Date format"),timezone:Je.a.t("standard","Timezone"),dialog:{title:Je.a.t("standard","Save Changes with Platform Reload"),subtitle:Je.a.t("standard","Click on Confirm to save your changes. The platform will reload to apply them. Are you sure you want to proceed?"),btnCancel:Je.a.t("salesforce","CANCEL"),btnConfirm:Je.a.t("webapp","CONFIRM")}};var WT=i("0La2"),QT=i("xAMO");const KT=["dialogConfirmChange"];function XT(e,t){if(1&e){const e=c.kc();c.jc(0,"ui-input-select-option",13),c.rc("trigger",function(){c.Uc(e);const i=t.$implicit;return c.vc().changeLanguage(i.value)}),c.fd(1),c.ic()}if(2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.hd(" ",e.label," ")}}function JT(e,t){if(1&e&&(c.jc(0,"ui-input-select-option",15),c.fd(1),c.ic()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.hd("",e.label," ")}}function ZT(e,t){if(1&e&&(c.jc(0,"div",4),c.jc(1,"ui-input-select",5),c.wc(2,"t"),c.dd(3,JT,2,2,"ui-input-select-option",14),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("label",c.xc(2,3,e.dictionary.dateFormat))("formControl",e.preferencesForm.controls.dateFormat),c.Mb(2),c.Dc("ngForOf",e.dateFormats)}}function ek(e,t){if(1&e&&(c.jc(0,"ui-input-select-option",15),c.fd(1),c.ic()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.hd("",e.label," ")}}function tk(e,t){if(1&e&&(c.jc(0,"div",4),c.jc(1,"ui-input-select",5),c.wc(2,"t"),c.dd(3,ek,2,2,"ui-input-select-option",14),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("label",c.xc(2,3,e.dictionary.timezone))("formControl",e.preferencesForm.controls.timezone),c.Mb(2),c.Dc("ngForOf",e.timezones)}}function ik(e,t){if(1&e&&c.ec(0,"country-selector",16),2&e){const e=c.vc();c.Dc("feature",e.countrySelectorFeature)}}function sk(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title"),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"doc-shared-dialog-content"),c.jc(5,"div",17),c.fd(6),c.wc(7,"t"),c.ic(),c.ic(),c.ic(),c.jc(8,"doc-shared-dialog-actions"),c.jc(9,"doc-shared-dialog-action",18),c.rc("trigger",function(){return c.Uc(e),c.vc().dialogConfirmHide()}),c.wc(10,"t"),c.ic(),c.jc(11,"doc-shared-dialog-action",19),c.rc("trigger",function(t){return c.Uc(e),c.vc().confirmPreferences(t)}),c.wc(12,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,5,e.dictionary.dialog.title)," "),c.Mb(4),c.hd(" ",c.xc(7,7,e.dictionary.dialog.subtitle)," "),c.Mb(3),c.Dc("label",c.xc(10,9,e.dictionary.dialog.btnCancel)),c.Mb(2),c.Dc("label",c.xc(12,11,e.dictionary.dialog.btnConfirm))("type","positive")}}let nk=(()=>{class e{constructor(e,t,i,s,n,a,o){this._formatter=e,this._docLayoutService=t,this._myProfileService=i,this._bootstrapService=s,this._changeDetector=n,this._countryService=a,this._toggleService=o,this.sizeDialog=b.Bb.SM,this.dictionary=YT,this.dictionaryMyProfile=rT.a,this.languages=k.b.getInstance().getLanguageOptions(),this.dates="",this.isLoading=!1,this.isChecked=!0,this.preferencesForm=new Ke.h({language:new Ke.e(""),dateFormat:new Ke.e(""),timezone:new Ke.e("")}),this._session=k.c.getInstance(),this._formatSelected="",this._ngUnsubscribe$=new gt.a,void 0===this.timezones&&this.populateTimezonesField()}ngOnInit(){this._toggleService.isOn(u.f.TOGGLE_MY_PROFILE_DATE_FORMAT_SELECTION)?this.setupDateFormat():this.changeLanguage(this._session.language,!0),this.setInputValue(),this.canChangeTimezone=k.b.getInstance().settings.timezone_allow_user_override,this.canChangeDateFormat=k.b.getInstance().settings.allow_user_dateformat_override,this.appendCountrySelector()}appendCountrySelector(){this.countrySelectorFeature=new HT.a(this._countryService.getCountries(),this.preferencesForm),this.countrySelectorFeature.enabled&&(this.preferencesForm=this.countrySelectorFeature.patchForm())}ngOnDestroy(){this._ngUnsubscribe$.next(),this._ngUnsubscribe$.complete()}savePreferences(){const e=new Pe.a(!1);return this.isLoading=!0,setTimeout(()=>{e.next(!0),this.isLoading=!1,this._changeDetector.detectChanges()},600),this.dialogConfirmChange.show(),e}changeLanguage(e,t=!1){var i;if(this._toggleService.isOn(u.f.TOGGLE_MY_PROFILE_DATE_FORMAT_SELECTION))return;const s=k.b.getInstance(),n=void 0!==s.active_languages[e]?s.active_languages[e]:null;if(null===n)return;const a=[];let o;for(const r in n.date_formats)n.date_formats.hasOwnProperty(r)&&(o=this._formatter.asDatetime("2005-03-15 23:30:00 ",n.date_formats[r]),a.push({label:o,value:n.date_formats[r]}),n.date_formats[r]===k.c.getInstance().datetime_format&&(this._formatSelected=n.date_formats[r]));this.dateFormats=a,a.length>0&&(this._formatSelected=a[0].value),null===(i=this.preferencesForm.get("dateFormat"))||void 0===i||i.setValue(this._formatSelected),t&&this.markFormAsPristine()}setupDateFormat(){const e=k.b.getInstance(),t=Object.keys(e.active_languages);this.dateFormats=[],t.forEach(t=>{e.getLangByShortCode(t).date_formats.forEach(e=>{const t=this._formatter.asDatetime("2005-03-15 23:30:00",e);this.dateFormats.push({label:`${t} (${e})`,value:e})})}),this.markFormAsPristine()}isFormDirty(){let e=!1;for(let t in this.preferencesForm.controls)if(e=this.preferencesForm.controls[t].dirty,e)break;return e}markFormAsPristine(){for(let e in this.preferencesForm.controls)this.preferencesForm.controls[e].markAsPristine()}confirmPreferences(e){const t=JSON.stringify({settings:[{name:"ui.language",value:this.preferencesForm.controls.language.value},{name:"date_format",value:this.preferencesForm.controls.dateFormat.value},{name:"timezone",value:this.preferencesForm.controls.timezone.value},this.countrySelectorFeature.getPayload(this.preferencesForm).asNameValue]});this._myProfileService.savePreferencesData(t,this._session.id.toString()).pipe(Object(ee.a)(1)).subscribe(()=>{e.next(),this.isLoading=!1,this.markFormAsPristine()},()=>{e.next(),this.isLoading=!1}),this.dialogConfirmChange.hide(),this._bootstrapService.reboot(),this._docLayoutService.toast.showToast({message:rT.a.personalInfo.success,type:"success"})}setInputValue(){var e,t,i;null===(e=this.preferencesForm.get("language"))||void 0===e||e.setValue(this._session.language),null===(t=this.preferencesForm.get("timezone"))||void 0===t||t.setValue(this._session.timezone),null===(i=this.preferencesForm.get("dateFormat"))||void 0===i||i.setValue(this._session.datetime_format),this.markFormAsPristine()}dialogConfirmHide(){this.isChecked=!0,this.dialogConfirmChange.hide()}populateTimezonesField(){this.timezones=this._formatter.momentZones()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(ti.b),c.dc(M.a),c.dc(dT.a),c.dc(ae.a),c.dc(c.i),c.dc(WT.a),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-preferences"]],viewQuery:function(e,t){if(1&e&&c.md(KT,1),2&e){let e;c.Qc(e=c.sc())&&(t.dialogConfirmChange=e.first)}},hostAttrs:[1,"lrn-my-profile-preferences"],decls:18,vars:15,consts:[[1,"ui-row"],[1,"ui-col-24","ui-col-sm-12"],[3,"formGroup","ngSubmit"],[1,"preferences-wrapper"],[1,"field-spacing"],["ngDefaultControl","",3,"label","formControl"],[3,"value","trigger",4,"ngFor","ngForOf"],["class","field-spacing",4,"ngIf"],["class","field-spacing",3,"feature",4,"ngIf"],[1,"btn-save-preferences"],["type","submit",3,"label","loading"],[3,"canClose","size"],["dialogConfirmChange",""],[3,"value","trigger"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"field-spacing",3,"feature"],[1,"lrn-preferences-wrapper"],["type","neutral",3,"label","trigger"],[3,"label","type","trigger"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.jc(2,"form",2),c.rc("ngSubmit",function(){return t.savePreferences()}),c.jc(3,"div",3),c.jc(4,"div",4),c.jc(5,"ui-input-select",5),c.wc(6,"t"),c.dd(7,XT,2,2,"ui-input-select-option",6),c.ic(),c.ic(),c.dd(8,ZT,4,5,"div",7),c.dd(9,tk,4,5,"div",7),c.dd(10,ik,1,1,"country-selector",8),c.ic(),c.jc(11,"div",9),c.ec(12,"ui-button-raised-primary",10),c.wc(13,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(14,"doc-shared-dialog"),c.jc(15,"doc-shared-dialog",11,12),c.dd(17,sk,13,13,"ng-template"),c.ic(),c.ic()),2&e&&(c.Mb(2),c.Dc("formGroup",t.preferencesForm),c.Mb(3),c.Dc("label",c.xc(6,11,t.dictionary.language))("formControl",t.preferencesForm.controls.language),c.Mb(2),c.Dc("ngForOf",t.languages),c.Mb(1),c.Dc("ngIf",t.canChangeDateFormat),c.Mb(1),c.Dc("ngIf",t.canChangeTimezone),c.Mb(1),c.Dc("ngIf",t.countrySelectorFeature.enabled),c.Mb(2),c.Dc("label",c.xc(13,13,t.dictionaryMyProfile.personalInfo.btnSave))("loading",t.isLoading),c.Mb(3),c.Dc("canClose",!0)("size",t.sizeDialog))},directives:[Ke.y,Ke.p,Ke.i,b.cc,Ke.b,Ke.o,Ke.f,Ae.o,Ae.p,b.F,Ul.a,b.ec,QT.a,T_.a,k_.a,I_.a,x_.a,D_.a],pipes:[E.b],styles:["lrn-my-profile-preferences .preferences-wrapper{padding:var(--ui-spacing-md) 0}lrn-my-profile-preferences .preferences-wrapper .field-spacing{margin:0 0 var(--ui-spacing-md);display:block}lrn-my-profile-preferences .btn-save-preferences{padding-bottom:var(--ui-spacing-md)}.lrn-preferences-wrapper{margin-bottom:var(--ui-spacing-sm)}.lrn-preferences-not-checked{color:var(--ui-color-typography-error)}"],encapsulation:2,changeDetection:0}),e})();var ak=i("BpKD");const ok=["generateRecoveryKey"],rk=["saveRecoveryKey"],ck=["unpairDialog"];function lk(e,t){if(1&e&&(c.jc(0,"div",26),c.ec(1,"ui-notification-inline",27),c.wc(2,"t"),c.wc(3,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("title",c.xc(2,2,e.dictionary.authenticatorApp.notificationError.title))("message",c.xc(3,4,e.dictionary.authenticatorApp.notificationError.subtitle))}}function dk(e,t){if(1&e&&(c.jc(0,"div",28),c.wc(1,"t"),c.ec(2,"qrcode",29),c.ic()),2&e){const e=c.vc(2);c.Dc("uiAriaLabel",c.xc(1,4,e.dictionary.authenticatorApp.scanQrCode)),c.Mb(2),c.Dc("qrdata",e.qrCodeUri)("size",140)("level","M")}}function uk(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.authenticatorApp.errors.missingOtp)," ")}}function hk(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.authenticatorApp.errors.wrongLengthOtp)," ")}}function pk(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.authenticatorApp.errors.wrongOtpCode)," ")}}function mk(e,t){if(1&e){const e=c.kc();c.jc(0,"div"),c.jc(1,"div",8),c.dd(2,lk,4,6,"div",9),c.ic(),c.jc(3,"form",10),c.rc("ngSubmit",function(){return c.Uc(e),c.vc().pairApp()}),c.jc(4,"div",8),c.jc(5,"div",11),c.fd(6),c.wc(7,"t"),c.ic(),c.jc(8,"div",12),c.ec(9,"ui-avatar",13),c.jc(10,"div",14),c.fd(11),c.wc(12,"t"),c.ic(),c.ic(),c.ic(),c.jc(13,"div",8),c.jc(14,"div",12),c.ec(15,"ui-avatar",15),c.jc(16,"div",14),c.fd(17),c.wc(18,"t"),c.ic(),c.ic(),c.ic(),c.jc(19,"div",8),c.jc(20,"div",16),c.ec(21,"ui-avatar",17),c.jc(22,"div",14),c.fd(23),c.wc(24,"t"),c.ic(),c.ic(),c.dd(25,dk,3,6,"div",18),c.jc(26,"div",19),c.jc(27,"div"),c.fd(28),c.wc(29,"t"),c.ic(),c.jc(30,"div",20),c.fd(31),c.ic(),c.ic(),c.ic(),c.jc(32,"div",8),c.jc(33,"div",12),c.ec(34,"ui-avatar",21),c.jc(35,"div",14),c.fd(36),c.wc(37,"t"),c.ic(),c.ic(),c.jc(38,"ui-input-text",22),c.wc(39,"t"),c.wc(40,"t"),c.dd(41,uk,3,3,"ui-input-error",23),c.dd(42,hk,3,3,"ui-input-error",23),c.dd(43,pk,3,3,"ui-input-error",23),c.ic(),c.ic(),c.jc(44,"div",8),c.jc(45,"div",24),c.ec(46,"ui-button-raised-primary",25),c.wc(47,"t"),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.Dc("ngIf",!e.controlOtp||!e.isOtpValid),c.Mb(1),c.Dc("formGroup",e.authenticatorAppForm),c.Mb(3),c.hd(" ",c.xc(7,22,e.dictionary.authenticatorApp.contentText)," "),c.Mb(3),c.Dc("size",e.sizeBulletPoint),c.Mb(2),c.hd(" ",c.xc(12,24,e.dictionary.authenticatorApp.bulletPoints.first)," "),c.Mb(4),c.Dc("size",e.sizeBulletPoint),c.Mb(2),c.hd(" ",c.xc(18,26,e.dictionary.authenticatorApp.bulletPoints.second)," "),c.Mb(4),c.Dc("size",e.sizeBulletPoint),c.Mb(2),c.hd(" ",c.xc(24,28,e.dictionary.authenticatorApp.bulletPoints.third)," "),c.Mb(2),c.Dc("ngIf",e.qrCodeUri),c.Mb(3),c.hd(" ",c.xc(29,30,e.dictionary.authenticatorApp.noCamera)," "),c.Mb(3),c.hd(" ",e.secretKey," "),c.Mb(3),c.Dc("size",e.sizeBulletPoint),c.Mb(2),c.hd(" ",c.xc(37,32,e.dictionary.authenticatorApp.bulletPoints.fourth)," "),c.Mb(2),c.Dc("formControl",e.authenticatorAppForm.controls.oneTimePassword)("requiredMarker",c.xc(39,34,e.dictionaryMyProfile.personalInfo.requiredMarker))("label",c.xc(40,36,e.dictionary.authenticatorApp.oneTimePassword)),c.Mb(3),c.Dc("ngIf",(null==e.authenticatorAppForm.controls.oneTimePassword.errors?null:e.authenticatorAppForm.controls.oneTimePassword.errors.required)&&e.authenticatorAppForm.controls.oneTimePassword.dirty),c.Mb(1),c.Dc("ngIf",(null==e.authenticatorAppForm.controls.oneTimePassword.errors?null:e.authenticatorAppForm.controls.oneTimePassword.errors.lengthError)&&e.authenticatorAppForm.controls.oneTimePassword.dirty),c.Mb(1),c.Dc("ngIf",(null==e.authenticatorAppForm.controls.oneTimePassword.errors?null:e.authenticatorAppForm.controls.oneTimePassword.errors.otpNotValid)&&e.authenticatorAppForm.controls.oneTimePassword.dirty),c.Mb(3),c.Dc("label",c.xc(47,38,e.dictionary.authenticatorApp.activate))("loading",e.spinnerLoading)}}function gk(e,t){if(1&e){const e=c.kc();c.jc(0,"div",8),c.jc(1,"div",30),c.ec(2,"ui-icon",31),c.jc(3,"div",32),c.jc(4,"div",33),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"div"),c.fd(8),c.wc(9,"t"),c.wc(10,"HDate"),c.ic(),c.jc(11,"div",34),c.jc(12,"ui-button-raised-primary",35),c.rc("trigger",function(){return c.Uc(e),c.vc().showDialog()}),c.wc(13,"t"),c.ic(),c.jc(14,"ui-button-text",36),c.rc("trigger",function(){return c.Uc(e),c.vc().showDialogUnpair()}),c.wc(15,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.Dc("name",e.iconCheckName)("size",e.sizeIconCheckCircle)("color","success"),c.Mb(3),c.hd(" ",c.xc(6,9,e.dictionary.authenticatorApp.pairedTextTitle)," "),c.Mb(3),c.id(" ",c.xc(9,11,e.dictionary.authenticatorApp.pairedTextSubtitle)," ",c.xc(10,13,e.isAuthenticatorPaired)," "),c.Mb(4),c.Dc("label",c.xc(13,15,e.dictionary.authenticatorApp.btnNewRecoveryKey)),c.Mb(2),c.Dc("label",c.xc(15,17,e.dictionary.authenticatorApp.unpair))("color",e.btnUnpairColor)}}function bk(e,t){if(1&e&&(c.jc(0,"div",43),c.ec(1,"ui-notification-inline",27),c.wc(2,"t"),c.wc(3,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("title",c.xc(2,2,e.dictionary.authenticatorApp.notificationErrorGenerateKey.title))("message",c.xc(3,4,e.dictionary.authenticatorApp.notificationErrorGenerateKey.subtitle))}}function fk(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.authenticatorApp.errors.missingOtp)," ")}}function vk(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.authenticatorApp.errors.wrongLengthOtp)," ")}}function _k(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.authenticatorApp.errors.wrongOtpCode)," ")}}function wk(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title"),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"doc-shared-dialog-content"),c.dd(5,bk,4,6,"div",37),c.jc(6,"div",38),c.fd(7),c.wc(8,"t"),c.ic(),c.jc(9,"form",39),c.jc(10,"ui-input-text",40),c.wc(11,"t"),c.wc(12,"t"),c.dd(13,fk,3,3,"ui-input-error",23),c.dd(14,vk,3,3,"ui-input-error",23),c.dd(15,_k,3,3,"ui-input-error",23),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(16,"doc-shared-dialog-actions"),c.jc(17,"doc-shared-dialog-action",41),c.rc("trigger",function(){return c.Uc(e),c.vc(),c.Rc(5).hide()}),c.wc(18,"t"),c.ic(),c.jc(19,"doc-shared-dialog-action",42),c.rc("trigger",function(t){return c.Uc(e),c.vc().generateOtp(t)}),c.wc(20,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,12,e.dictionary.authenticatorApp.dialogs.generateOtpTitle)," "),c.Mb(3),c.Dc("ngIf",!e.controlOtp||!e.isOtpValid),c.Mb(2),c.hd(" ",c.xc(8,14,e.dictionary.authenticatorApp.dialogs.generateOtpSubTitle)," "),c.Mb(2),c.Dc("formGroup",e.recoverKeyForm),c.Mb(1),c.Dc("formControl",e.recoverKeyForm.controls.recoveryOtp)("requiredMarker",c.xc(11,16,e.dictionaryMyProfile.personalInfo.requiredMarker))("label",c.xc(12,18,e.dictionary.authenticatorApp.oneTimePassword)),c.Mb(3),c.Dc("ngIf",(null==e.recoverKeyForm.controls.recoveryOtp.errors?null:e.recoverKeyForm.controls.recoveryOtp.errors.required)&&e.recoverKeyForm.controls.recoveryOtp.dirty),c.Mb(1),c.Dc("ngIf",(null==e.recoverKeyForm.controls.recoveryOtp.errors?null:e.recoverKeyForm.controls.recoveryOtp.errors.pattern)&&e.recoverKeyForm.controls.recoveryOtp.dirty),c.Mb(1),c.Dc("ngIf",(null==e.recoverKeyForm.controls.recoveryOtp.errors?null:e.recoverKeyForm.controls.recoveryOtp.errors.otpNotValid)&&e.recoverKeyForm.controls.recoveryOtp.dirty),c.Mb(2),c.Dc("label",c.xc(18,20,e.dictionary.authenticatorApp.dialogs.btnCancel)),c.Mb(2),c.Dc("label",c.xc(20,22,e.dictionary.authenticatorApp.dialogs.btnGenerate))}}function yk(e,t){if(1&e&&(c.jc(0,"div",43),c.ec(1,"ui-notification-inline",27),c.wc(2,"t"),c.wc(3,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("title",c.xc(2,2,e.dictionary.authenticatorApp.dialogs.checkedSaveKey))("message",c.xc(3,4,e.dictionary.authenticatorApp.dialogs.flagCheckBox))}}const Ck=function(e){return{"not-checked":e}};function Sk(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title"),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"doc-shared-dialog-content"),c.dd(5,yk,4,6,"div",37),c.jc(6,"div",43),c.fd(7),c.wc(8,"t"),c.ic(),c.jc(9,"div",44),c.fd(10),c.ic(),c.jc(11,"form",39),c.jc(12,"ui-input-checkbox",45),c.jc(13,"ui-input-label",46),c.fd(14),c.wc(15,"t"),c.wc(16,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(17,"doc-shared-dialog-actions"),c.jc(18,"doc-shared-dialog-action",42),c.rc("trigger",function(t){return c.Uc(e),c.vc().done(t)}),c.wc(19,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,10,e.dictionary.authenticatorApp.dialogs.recoveryOtpTitle)," "),c.Mb(3),c.Dc("ngIf",!e.isChecked),c.Mb(2),c.hd(" ",c.xc(8,12,e.dictionary.authenticatorApp.dialogs.recoveryOtpSubtitle)," "),c.Mb(3),c.hd(" ",e.recoveryKey," "),c.Mb(1),c.Dc("formGroup",e.saveKeyForm),c.Mb(1),c.Dc("formControl",e.saveKeyForm.controls.checkboxControl),c.Mb(1),c.Dc("ngClass",c.Ic(20,Ck,!1===e.isChecked)),c.Mb(1),c.id(" ",c.xc(15,14,e.dictionary.authenticatorApp.dialogs.savedRecoveryKey)," ",c.xc(16,16,e.dictionary.authenticatorApp.dialogs.requiredKey)," "),c.Mb(4),c.Dc("label",c.xc(19,18,e.dictionary.authenticatorApp.dialogs.btnDone))}}function Tk(e,t){if(1&e&&(c.jc(0,"div",43),c.ec(1,"ui-notification-inline",27),c.wc(2,"t"),c.wc(3,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("title",c.xc(2,2,e.dictionary.authenticatorApp.dialogs.errorUnpairNotification))("message",c.xc(3,4,e.dictionary.authenticatorApp.notificationError.subtitle))}}function kk(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.authenticatorApp.dialogs.missingRecoveryKey)," ")}}const Ik=function(){return{count:16}};function xk(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.yc(2,1,e.dictionary.authenticatorApp.dialogs.wrongUnpairLengthOtp,c.Hc(4,Ik))," ")}}function Dk(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.authenticatorApp.dialogs.wrongOtpUnpair)," ")}}function Ok(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title"),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"doc-shared-dialog-content"),c.dd(5,Tk,4,6,"div",37),c.jc(6,"div",47),c.fd(7),c.wc(8,"t"),c.ic(),c.jc(9,"form",39),c.jc(10,"ui-input-text",48),c.wc(11,"t"),c.wc(12,"t"),c.dd(13,kk,3,3,"ui-input-error",23),c.dd(14,xk,3,5,"ui-input-error",23),c.dd(15,Dk,3,3,"ui-input-error",23),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(16,"doc-shared-dialog-actions"),c.jc(17,"doc-shared-dialog-action",41),c.rc("trigger",function(){return c.Uc(e),c.vc(),c.Rc(15).hide()}),c.wc(18,"t"),c.ic(),c.jc(19,"doc-shared-dialog-action",49),c.rc("trigger",function(t){return c.Uc(e),c.vc().unpairApp(t)}),c.wc(20,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,12,e.dictionary.authenticatorApp.dialogs.unpairTitle)," "),c.Mb(3),c.Dc("ngIf",!e.controlOtp),c.Mb(2),c.hd(" ",c.xc(8,14,e.dictionary.authenticatorApp.dialogs.unpairSubTitle)," "),c.Mb(2),c.Dc("formGroup",e.unpairForm),c.Mb(1),c.Dc("formControl",e.unpairForm.controls.otpUnpair)("requiredMarker",c.xc(11,16,e.dictionaryMyProfile.personalInfo.requiredMarker))("label",c.xc(12,18,e.dictionary.authenticatorApp.dialogs.recoveryKey)),c.Mb(3),c.Dc("ngIf",(null==e.unpairForm.controls.otpUnpair.errors?null:e.unpairForm.controls.otpUnpair.errors.required)&&e.unpairForm.controls.otpUnpair.dirty),c.Mb(1),c.Dc("ngIf",(null==e.unpairForm.controls.otpUnpair.errors?null:e.unpairForm.controls.otpUnpair.errors.pattern)&&e.unpairForm.controls.otpUnpair.dirty),c.Mb(1),c.Dc("ngIf",(null==e.unpairForm.controls.otpUnpair.errors?null:e.unpairForm.controls.otpUnpair.errors.otpNotValid)&&e.unpairForm.controls.otpUnpair.dirty),c.Mb(2),c.Dc("label",c.xc(18,20,e.dictionary.authenticatorApp.dialogs.btnCancel)),c.Mb(2),c.Dc("label",c.xc(20,22,e.dictionary.authenticatorApp.unpair))}}let Ek=(()=>{class e{constructor(e,t,i,s){this._translationService=e,this._myProfileService=t,this._docLayoutService=i,this._sessionService=s,this.dictionaryMyProfile=rT.a,this.dictionary=oT,this.sizeIcon=b.g.MD,this.sizeIconCheckCircle=b.Gb.LG,this.btnUnpairColor=b.r.ERROR,this.sizeDialog=b.Bb.SM,this.sizeBulletPoint=b.g.XS,this.iconCheckName="check-circle",this.isChecked=!0,this.isAppPaired=!1,this.controlOtp=!0,this.isOtpValid=!0,this.isBtnGenerateOtpClicked=!1,this.spinnerLoading=!1,this.isEmpty=!1,this.authenticatorAppForm=new Ke.h({oneTimePassword:new Ke.e("",Ke.x.required)}),this.recoverKeyForm=new Ke.h({recoveryOtp:new Ke.e("",Ke.x.required)}),this.saveKeyForm=new Ke.h({checkboxControl:new Ke.e("",Ke.x.required)}),this.unpairForm=new Ke.h({otpUnpair:new Ke.e("",Ke.x.required)}),this._ngUnsubscribe$=new gt.a}ngOnInit(){this.isPaired()}ngOnDestroy(){this._ngUnsubscribe$.next(),this._ngUnsubscribe$.complete()}isPaired(e){this.isAuthenticatorPaired=e||k.c.getInstance().authenticatorapp_pair_date,this.isAppPaired=!!this.isAuthenticatorPaired,this.isAuthenticatorPaired||this._myProfileService.getQRCodeAndSecretKey().subscribe(e=>{let{qr_code_uri:t,secret:i}=e.data;this.qrCodeUri=t,this.secretKey=i})}generateOtp(e){this.isBtnGenerateOtpClicked=!0,this.controlOtp=!0;let t=this.recoverKeyForm.controls.recoveryOtp.value;this.recoverKeyForm.markAllAsTouched(),t||(this.recoverKeyForm.controls.recoveryOtp.markAsDirty(),this.recoverKeyForm.controls.recoveryOtp.setErrors({required:!0})),t&&6!=t.length&&(this.recoverKeyForm.controls.recoveryOtp.markAsDirty(),this.recoverKeyForm.controls.recoveryOtp.setErrors({pattern:!0}),this.controlOtp=!1),this.recoverKeyForm.valid||(this.recoverKeyForm.controls.recoveryOtp.markAsDirty(),this.controlOtp=!1),this.controlOtp?this._myProfileService.recoveryOtp(this.recoverKeyForm.controls.recoveryOtp.value).pipe(Object(bt.a)(this._ngUnsubscribe$)).subscribe(t=>{e.next(),this.recoveryKey=t.data.recovery_code,this.generateRecoveryKey.hide(),this.saveRecoveryKey.show()},()=>{e.next(),this.isOtpValid=!1,this.recoverKeyForm.controls.recoveryOtp.markAsDirty(),this.recoverKeyForm.controls.recoveryOtp.setErrors({otpNotValid:!0})}):e.next()}pairApp(){const e=new Pe.a(!1);return this.isOtpValid=!0,this.controlOtp=!0,this.spinnerLoading=!0,this._validOtpCode()?this._myProfileService.pairingOtp(this.authenticatorAppForm.controls.oneTimePassword.value).pipe(Object(bt.a)(this._ngUnsubscribe$)).subscribe(t=>{this.authenticatorAppForm.reset(),this.spinnerLoading=!1,e.next(!0),this._sessionService.loadUserSession(!0).pipe(Object(ee.a)(1)).subscribe(e=>{this.isPaired(e.data.authenticatorapp_pair_date),this.recoveryKey=t.data.recovery_code,this.saveRecoveryKey.show(),this._docLayoutService.toast.showToast({message:this.dictionary.authenticatorApp.successPairing,type:"success"})})},()=>{this.isOtpValid=!1,this.spinnerLoading=!1,this.authenticatorAppForm.controls.oneTimePassword.markAsDirty(),this.authenticatorAppForm.controls.oneTimePassword.setErrors({otpNotValid:!0}),e.next(!1)}):(this.spinnerLoading=!1,setTimeout(()=>{e.next(!1)})),e}unpairApp(e){this.controlOtp=!0,this.isEmpty=!1;let t=this.unpairForm.controls.otpUnpair.value;this.recoverKeyForm.markAllAsTouched(),t||(this.isEmpty=!0,this.unpairForm.controls.otpUnpair.markAsDirty(),this.unpairForm.controls.otpUnpair.setErrors({required:!0})),t&&16!==t.length&&(this.unpairForm.controls.otpUnpair.markAsDirty(),this.unpairForm.controls.otpUnpair.setErrors({pattern:!0}),this.controlOtp=!1),this.unpairForm.valid||(this.unpairForm.controls.otpUnpair.markAsDirty(),this.controlOtp=!1),this.controlOtp?this._myProfileService.unpairApp(this.unpairForm.controls.otpUnpair.value).pipe(Object(bt.a)(this._ngUnsubscribe$)).subscribe(t=>{e.next(),this._sessionService.loadUserSession(!0).pipe(Object(ee.a)(1)).subscribe(e=>{this.isPaired(e.data.authenticatorapp_pair_date),this.recoveryKey=t.data.recovery_code,this._docLayoutService.toast.showToast({message:this.dictionary.authenticatorApp.dialogs.unpairSuccess,type:"success"}),this.unpairDialog.hide()})},()=>{e.next(),this.controlOtp=!1,this.unpairForm.controls.otpUnpair.markAsDirty(),this.unpairForm.controls.otpUnpair.setErrors({otpNotValid:!0})}):e.next()}isFormDirty(){let e=!1;for(let t in this.authenticatorAppForm.controls)if(e=this.authenticatorAppForm.controls[t].dirty,e)break;return e}done(e){this.isChecked=!0,!0!==this.saveKeyForm.controls.checkboxControl.value?(this.isChecked=!1,e.next()):(e.next(),this.saveKeyForm.reset(),this.saveRecoveryKey.hide(),this.isBtnGenerateOtpClicked&&this._docLayoutService.toast.showToast({message:this.dictionary.authenticatorApp.successGenerateRecoveryKey,type:"success"}),this.isBtnGenerateOtpClicked=!1)}showDialog(){this.recoverKeyForm.reset(),this.controlOtp=!0,this.generateRecoveryKey.show()}showDialogUnpair(){this.unpairForm.reset(),this.isEmpty=!1,this.controlOtp=!0,this.unpairDialog.show()}_validOtpCode(){this.controlOtp=!0;let e=this.authenticatorAppForm.controls.oneTimePassword.value;return this.authenticatorAppForm.markAllAsTouched(),e&&6!==e.length&&""!==e&&(this.authenticatorAppForm.controls.oneTimePassword.markAsDirty(),this.authenticatorAppForm.controls.oneTimePassword.setErrors({lengthError:!0}),this.controlOtp=!1),e||(this.authenticatorAppForm.controls.oneTimePassword.markAsDirty(),this.authenticatorAppForm.controls.oneTimePassword.setErrors({required:!0}),this.controlOtp=!1),this.controlOtp}}return e.\u0275fac=function(t){return new(t||e)(c.dc(u.h),c.dc(dT.a),c.dc(M.a),c.dc(ak.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-authenticator-app"]],viewQuery:function(e,t){if(1&e&&(c.md(ok,1),c.md(rk,1),c.md(ck,1)),2&e){let e;c.Qc(e=c.sc())&&(t.generateRecoveryKey=e.first),c.Qc(e=c.sc())&&(t.saveRecoveryKey=e.first),c.Qc(e=c.sc())&&(t.unpairDialog=e.first)}},hostAttrs:[1,"lrn-my-profile-authenticator-app"],decls:19,vars:20,consts:[[1,"ui-row"],[4,"ngIf","ngIfElse"],["appPaired",""],[3,"canClose","closeTooltipLabel","closeAriaLabel","size"],["generateRecoveryKey",""],[3,"canClose","size"],["saveRecoveryKey",""],["unpairDialog",""],[1,"ui-col-24"],["class","notification-app-wrapper",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"content-text-unpaired-app"],[1,"container","bullet-section"],["text","1",3,"size"],[1,"content-margin"],["text","2",3,"size"],[1,"container","bullet-section-qr"],["text","3",3,"size"],["class","qr-code","role","img",3,"uiAriaLabel",4,"ngIf"],[1,"qr-camera"],[1,"ui-typography-heading-5","title-regular"],["text","4",3,"size"],[1,"ui-col-sm-12","margin-one-time-password",3,"formControl","requiredMarker","label"],[4,"ngIf"],[1,"btn-activate-authenticator"],["type","submit",3,"label","loading"],[1,"notification-app-wrapper"],[3,"title","message"],["role","img",1,"qr-code",3,"uiAriaLabel"],[3,"qrdata","size","level"],[1,"container","app-paired-wrapper"],[1,"icon-check",3,"name","size","color"],[1,"content-margin","direction"],[1,"font-custom","title-text"],[1,"wrapper-btn"],[1,"margin-right-recovery-btn",3,"label","trigger"],[3,"label","color","trigger"],["class","my-profile-authenticator-inline-notification-wrapper",4,"ngIf"],[1,"my-profile-authenticator-dialog-subtitle"],[3,"formGroup"],[1,"margin-one-time-password",3,"formControl","requiredMarker","label"],[3,"label","trigger"],["type","positive",3,"label","trigger"],[1,"my-profile-authenticator-inline-notification-wrapper"],[1,"recovery-wrapper"],[3,"formControl"],[3,"ngClass"],[1,"subtitle-wrapper"],[1,"my-profile-authenticator-unpair-wrapper",3,"formControl","requiredMarker","label"],["type","negative",3,"label","trigger"]],template:function(e,t){if(1&e&&(c.jc(0,"div",0),c.dd(1,mk,48,40,"div",1),c.dd(2,gk,16,19,"ng-template",null,2,c.ed),c.jc(4,"doc-shared-dialog",3,4),c.wc(6,"t"),c.wc(7,"t"),c.dd(8,wk,21,24,"ng-template"),c.ic(),c.jc(9,"doc-shared-dialog"),c.jc(10,"doc-shared-dialog",5,6),c.dd(12,Sk,20,22,"ng-template"),c.ic(),c.ic(),c.jc(13,"doc-shared-dialog"),c.jc(14,"doc-shared-dialog",3,7),c.wc(16,"t"),c.wc(17,"t"),c.dd(18,Ok,21,24,"ng-template"),c.ic(),c.ic(),c.ic()),2&e){const e=c.Rc(3);c.Mb(1),c.Dc("ngIf",!t.isAppPaired)("ngIfElse",e),c.Mb(3),c.Dc("canClose",!0)("closeTooltipLabel",c.xc(6,12,t.dictionary.authenticatorApp.dialogs.tooltipClose))("closeAriaLabel",c.xc(7,14,t.dictionary.authenticatorApp.dialogs.tooltipAria))("size",t.sizeDialog),c.Mb(6),c.Dc("canClose",!1)("size",t.sizeDialog),c.Mb(4),c.Dc("canClose",!0)("closeTooltipLabel",c.xc(16,16,t.dictionary.authenticatorApp.dialogs.tooltipClose))("closeAriaLabel",c.xc(17,18,t.dictionary.authenticatorApp.dialogs.tooltipAria))("size",t.sizeDialog)}},directives:[Ae.p,Ul.a,Ke.y,Ke.p,Ke.i,b.e,b.gc,Ke.o,Ke.f,b.F,b.Ec,b.c,y,b.Rb,b.Eb,b.G,T_.a,k_.a,I_.a,x_.a,D_.a,b.Kb,b.Tb,Ae.n],pipes:[E.b,ze.a],styles:["lrn-my-profile-authenticator-app .notification-app-wrapper{margin-top:1.5rem;margin-top:var(--ui-spacing-md)}lrn-my-profile-authenticator-app .app-paired-wrapper{margin:2rem 0;margin:var(--ui-spacing-lg) 0}lrn-my-profile-authenticator-app qrcode canvas{width:140px!important;height:140px!important}lrn-my-profile-authenticator-app .content-text-unpaired-app{padding:1.5rem 0 .75rem;padding:var(--ui-spacing-md) 0 var(--ui-spacing-xs)}lrn-my-profile-authenticator-app .content-margin{margin-block:auto}lrn-my-profile-authenticator-app ui-icon{margin-right:1rem;margin-right:var(--ui-spacing-sm)}[dir=rtl] lrn-my-profile-authenticator-app ui-icon{margin-right:0;margin-left:1rem;margin-left:var(--ui-spacing-sm)}lrn-my-profile-authenticator-app .wrapper-btn{margin-top:1.5rem;margin-top:var(--ui-spacing-md)}lrn-my-profile-authenticator-app .margin-right-recovery-btn{margin-right:1rem;margin-right:var(--ui-spacing-sm)}lrn-my-profile-authenticator-app .bullet-section-qr{margin:.75rem 0;margin:var(--ui-spacing-xs) 0}lrn-my-profile-authenticator-app .bullet-section-qr .content-margin{margin-block:auto}lrn-my-profile-authenticator-app .bullet-section-qr ui-avatar{margin-right:.5rem;margin-right:var(--ui-spacing-xxs)}[dir=rtl] lrn-my-profile-authenticator-app .bullet-section-qr ui-avatar{margin-right:0;margin-left:.5rem;margin-left:var(--ui-spacing-xxs)}lrn-my-profile-authenticator-app .bullet-section{margin:.75rem 0;margin:var(--ui-spacing-xs) 0}lrn-my-profile-authenticator-app .bullet-section .content-margin{margin-block:auto}lrn-my-profile-authenticator-app .bullet-section ui-avatar{margin-right:.5rem;margin-right:var(--ui-spacing-xxs)}[dir=rtl] lrn-my-profile-authenticator-app .bullet-section ui-avatar{margin-right:0;margin-left:.5rem;margin-left:var(--ui-spacing-xxs)}lrn-my-profile-authenticator-app .qr-code{margin-left:1.5rem;margin-left:var(--ui-spacing-md)}[dir=rtl] lrn-my-profile-authenticator-app .qr-code{margin-left:0;margin-right:1.5rem;margin-right:var(--ui-spacing-md)}lrn-my-profile-authenticator-app .title-regular{margin:.5rem 0 .75rem;margin:var(--ui-spacing-xxs) 0 var(--ui-spacing-xs)}lrn-my-profile-authenticator-app .qr-camera{margin-top:.75rem;margin-top:var(--ui-spacing-xs);margin-left:2rem;margin-left:var(--ui-spacing-lg)}[dir=rtl] lrn-my-profile-authenticator-app .qr-camera{margin-left:0;margin-right:2rem;margin-right:var(--ui-spacing-lg)}lrn-my-profile-authenticator-app .margin-one-time-password{padding:.75rem 0 .75rem 2rem;padding:var(--ui-spacing-xs) 0 var(--ui-spacing-xs) var(--ui-spacing-lg)}[dir=rtl] lrn-my-profile-authenticator-app .margin-one-time-password{padding:.75rem 2rem 1rem 0;padding:var(--ui-spacing-xs) var(--ui-spacing-lg) var(--ui-spacing-xs) 0}lrn-my-profile-authenticator-app .btn-activate-authenticator{margin:0 0 1.5rem 2rem;margin:0 0 var(--ui-spacing-md) var(--ui-spacing-lg)}[dir=rtl] lrn-my-profile-authenticator-app .btn-activate-authenticator{margin:0 2rem .5rem 0;margin:0 var(--ui-spacing-lg) var(--ui-spacing-md) 0}lrn-my-profile-authenticator-app .bullet-section ui-avatar{display:inline-table}lrn-my-profile-authenticator-app .margin-icon-check{margin-right:1rem;margin-right:var(--ui-spacing-sm)}[dir=rtl] lrn-my-profile-authenticator-app .margin-icon-check{margin-right:0;margin-left:1rem;margin-left:var(--ui-spacing-sm)}lrn-my-profile-authenticator-app .btn-recovery-key lrn-authenticator-app .app-paired-wrapper{margin:2rem 0;margin:var(--ui-spacing-lg) 0}lrn-my-profile-authenticator-app .btn-recovery-key lrn-authenticator-app .app-paired-wrapper ui-icon{margin-right:1rem;margin-right:var(--ui-spacing-sm)}[dir=rtl] lrn-my-profile-authenticator-app .btn-recovery-key lrn-authenticator-app .app-paired-wrapper ui-icon{margin-right:0;margin-left:1rem;margin-left:var(--ui-spacing-sm)}lrn-my-profile-authenticator-app .btn-recovery-key lrn-authenticator-app .app-paired-wrapper .btn-recovery-key{margin-right:1rem;margin-right:var(--ui-spacing-sm)}.my-profile-authenticator-unpair-wrapper{margin-top:1rem;margin-top:var(--ui-spacing-sm)}.my-profile-authenticator-inline-notification-wrapper,doc-shared-dialog-body .my-profile-authenticator-dialog-subtitle{margin-bottom:1rem;margin-bottom:var(--ui-spacing-sm)}doc-shared-dialog-body .app-paired-wrapper{margin:2rem 0;margin:var(--ui-spacing-lg) 0}doc-shared-dialog-body .recovery-wrapper{font-weight:600;font-weight:var(--ui-typography-weight-semibold);font-size:1.13rem;font-size:var(--ui-typography-size-lg);margin-bottom:1.5rem;margin-bottom:var(--ui-spacing-md)}"],encapsulation:2}),e})();var Pk=i("6AVF");const Mk=["addAffiliateCodeDialog"];function Ak(e,t){if(1&e){const e=c.kc();c.jc(0,"div",5),c.ec(1,"ui-blank-slate",6),c.wc(2,"t"),c.wc(3,"t"),c.jc(4,"ui-button-raised-primary",7),c.rc("trigger",function(){return c.Uc(e),c.vc(),c.Rc(4).show()}),c.wc(5,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("title",c.xc(2,4,e.dictionary.contentPartnersApp.noAffiliations))("description",c.xc(3,6,e.dictionary.contentPartnersApp.useAddCodeButton))("illustrationSize",e.illustrationSize),c.Mb(3),c.Dc("label",c.xc(5,8,e.dictionary.contentPartnersApp.addCode))}}function Lk(e,t){1&e&&(c.jc(0,"div",8),c.ec(1,"ui-spinner"),c.ic())}function jk(e,t){if(1&e&&(c.jc(0,"hyd-table",9),c.ec(1,"hyd-table-column-text",10),c.wc(2,"t"),c.ec(3,"hyd-table-column-text",11),c.wc(4,"t"),c.ec(5,"hyd-table-column-date",12),c.wc(6,"t"),c.ec(7,"hyd-table-column-ellipsis",13),c.ic()),2&e){const e=c.vc();c.Dc("data",e.contentPartnerAffiliations),c.Mb(1),c.Dc("headerLabel",c.xc(2,7,e.dictionary.contentPartnersApp.partnerName))("showEllipsedTooltip",!0),c.Mb(2),c.Dc("headerLabel",c.xc(4,9,e.dictionary.contentPartnersApp.defaultDiscount))("showEllipsedTooltip",!0),c.Mb(2),c.Dc("headerLabel",c.xc(6,11,e.dictionary.contentPartnersApp.affiliateSince)),c.Mb(2),c.Dc("actions",e.contentPartnerAffiliationActions)}}const Fk=function(){return{count_error:1}};function Rk(e,t){if(1&e&&(c.ec(0,"ui-notification-inline",19),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc(2);c.Dc("title",c.yc(1,2,e.dictionary.contentPartnersApp.addingNotPossible,c.Hc(7,Fk)))("message",c.xc(2,5,e.dictionary.personalInfo.error.errorsSaveFormSubTitle))}}function Nk(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.gd(c.xc(2,1,e.dictionary.contentPartnersApp.fillAffiliateCode))}}function Uk(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.gd(c.xc(2,1,e.affiliateCodeNotValidLabel))}}function qk(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title",14),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"doc-shared-dialog-content"),c.dd(5,Rk,3,8,"ui-notification-inline",15),c.jc(6,"ui-input-text",16),c.wc(7,"t"),c.wc(8,"t"),c.dd(9,Nk,3,3,"ui-input-error",17),c.dd(10,Uk,3,3,"ui-input-error",17),c.ic(),c.ic(),c.ic(),c.jc(11,"doc-shared-dialog-actions"),c.jc(12,"doc-shared-dialog-action",7),c.rc("trigger",function(){return c.Uc(e),c.vc().hideAddContentPartnerAffiliationDialog()}),c.wc(13,"t"),c.ic(),c.jc(14,"doc-shared-dialog-action",18),c.rc("trigger",function(t){return c.Uc(e),c.vc().addContentPartnerAffiliation(t)}),c.wc(15,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,9,e.dictionary.contentPartnersApp.addAffiliateCode)," "),c.Mb(3),c.Dc("ngIf",e.showAffiliateCodeInlineError),c.Mb(1),c.Dc("label",c.xc(7,11,e.dictionary.contentPartnersApp.affiliateCode))("formControl",e.addAffiliateCodeFormControl)("requiredMarker",c.xc(8,13,e.dictionary.personalInfo.requiredMarker)),c.Mb(3),c.Dc("ngIf",(null==e.addAffiliateCodeFormControl.errors?null:e.addAffiliateCodeFormControl.errors.required)&&e.addAffiliateCodeFormControl.dirty),c.Mb(1),c.Dc("ngIf",(null==e.addAffiliateCodeFormControl.errors?null:e.addAffiliateCodeFormControl.errors.affiliateCodeNotValid)&&e.addAffiliateCodeFormControl.dirty),c.Mb(2),c.Dc("label",c.xc(13,15,e.dictionary.contentPartnersApp.cancel)),c.Mb(2),c.Dc("label",c.xc(15,17,e.dictionary.contentPartnersApp.confirm))}}let zk=(()=>{class e{constructor(e,t,i){this._changeDetectorRef=e,this._docLayoutService=t,this._myProfileService=i,this.illustrationSize=b.Ib.MD,this.dictionary=rT.a,this.contentPartnerAffiliations=[],this.contentPartnerAffiliationActions=[{id:"delete",title:this.dictionary.delete,type:De.a.DELETE,action:e=>{this._deleteContentPartnerAffiliation(e.id)},active:!1}],this.loadingContentPartnerAffiliations=!1,this.showAffiliateCodeInlineError=!1,this.affiliateCodeNotValidLabel="",this.addAffiliateCodeFormControl=new Ke.e("",[Ke.x.required]),this._getContentPartnerAffiliations(),this._contentPartnerAffiliationAddition=this._myProfileService.contentPartnerAffiliationAddition$.subscribe(()=>{this._getContentPartnerAffiliations()})}ngOnDestroy(){this._contentPartnerAffiliationAddition.unsubscribe()}addContentPartnerAffiliation(e){this.showAffiliateCodeInlineError=!1,this.addAffiliateCodeFormControl.markAsDirty(),this.addAffiliateCodeFormControl.updateValueAndValidity(),this.addAffiliateCodeFormControl.valid?this._myProfileService.addContentPartnerAffiliation(this.addAffiliateCodeFormControl.value).subscribe(()=>{e.next(),this.addAffiliateCodeFormControl.markAsPristine(),this.addAffiliateCodeFormControl.setValue(""),this.addAffiliateCodeDialog.hide(),this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.contentPartnersApp.affiliateCodeAdded}),this._getContentPartnerAffiliations()},t=>{1002===t.error.code?(this.addAffiliateCodeFormControl.setErrors({affiliateCodeNotValid:!0}),this.showAffiliateCodeInlineError=!0,this.affiliateCodeNotValidLabel=t.error.message[0]):(this._docLayoutService.toast.showToast({message:t.error.message?t.error.message[0]:this.dictionary.somethingWentWrong,type:"error"}),400!==t.error.status&&(this.addAffiliateCodeFormControl.markAsPristine(),this.addAffiliateCodeFormControl.setValue(""),this.addAffiliateCodeDialog.hide())),e.next(),this._changeDetectorRef.markForCheck()}):(this.showAffiliateCodeInlineError=!0,e.next(),this._changeDetectorRef.markForCheck())}hideAddContentPartnerAffiliationDialog(){this.addAffiliateCodeDialog.hide(),this.addAffiliateCodeFormControl.markAsPristine(),this.addAffiliateCodeFormControl.setValue(""),this.showAffiliateCodeInlineError=!1,this._changeDetectorRef.markForCheck()}_deleteContentPartnerAffiliation(e){this._docLayoutService.dialog.showCommonDialog({title:this.dictionary.contentPartnersApp.deleteContentPartner,content:this.dictionary.contentPartnersApp.deleteAffiliationConfirm,closable:!0,actions:[{id:"cancel",label:this.dictionary.contentPartnersApp.cancel,slot:"end",type:"neutral"},{id:"confirm",label:this.dictionary.contentPartnersApp.confirm,slot:"end",type:"negative"}]}).subscribe(t=>{"cancel"===t.actionID?t.actionSuccess.next(!0):this._myProfileService.deleteContentPartnerAffiliation(e).subscribe(()=>{t.actionSuccess.next(!0),this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.contentPartnersApp.affiliateCodeDeleted}),this._getContentPartnerAffiliations()},e=>{t.actionSuccess.next(!1),this._docLayoutService.toast.showToast({message:e.error.message[0],type:"error"})})})}_getContentPartnerAffiliations(){this.loadingContentPartnerAffiliations=!0,this.contentPartnerAffiliations=[],this._changeDetectorRef.markForCheck(),this._myProfileService.getContentPartnerAffiliations().subscribe(e=>{this.contentPartnerAffiliations=e,this.loadingContentPartnerAffiliations=!1,this._changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i),c.dc(M.a),c.dc(dT.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-content-partners"]],viewQuery:function(e,t){if(1&e&&c.md(Mk,1),2&e){let e;c.Qc(e=c.sc())&&(t.addAffiliateCodeDialog=e.first)}},hostAttrs:[1,"lrn-my-profile-content-partners"],decls:8,vars:10,consts:[["class","my-profile-affiliations-blank-slate",4,"ngIf"],["class","my-profile-affiliations-loading",4,"ngIf"],[3,"data",4,"ngIf"],["size","sm","aria-labelledby","my-profile-shared-dialog-aria-label-title",3,"canClose","closeTooltipLabel","closeAriaLabel"],["addAffiliateCodeDialog",""],[1,"my-profile-affiliations-blank-slate"],["illustrationName","different-content-files",3,"title","description","illustrationSize"],[3,"label","trigger"],[1,"my-profile-affiliations-loading"],[3,"data"],["fieldName","partnerName",3,"headerLabel","showEllipsedTooltip"],["fieldName","defaultDiscount",3,"headerLabel","showEllipsedTooltip"],["fieldName","affiliateSince","type","dateTime",3,"headerLabel"],[3,"actions"],["id","my-profile-shared-dialog-aria-label-title"],["class","my-profile-add-affiliate-code-error-notification","type","error",3,"title","message",4,"ngIf"],[3,"label","formControl","requiredMarker"],[4,"ngIf"],["type","positive",3,"label","trigger"],["type","error",1,"my-profile-add-affiliate-code-error-notification",3,"title","message"]],template:function(e,t){1&e&&(c.dd(0,Ak,6,10,"div",0),c.dd(1,Lk,2,0,"div",1),c.dd(2,jk,8,13,"hyd-table",2),c.jc(3,"doc-shared-dialog",3,4),c.wc(5,"t"),c.wc(6,"t"),c.dd(7,qk,16,19,"ng-template"),c.ic()),2&e&&(c.Dc("ngIf",!t.contentPartnerAffiliations.length&&!t.loadingContentPartnerAffiliations),c.Mb(1),c.Dc("ngIf",t.loadingContentPartnerAffiliations),c.Mb(1),c.Dc("ngIf",t.contentPartnerAffiliations.length),c.Mb(1),c.Dc("canClose",!0)("closeTooltipLabel",c.xc(5,6,t.dictionary.skills.close))("closeAriaLabel",c.xc(6,8,t.dictionary.skills.closeDialog)))},directives:[Ae.p,Ul.a,b.o,b.F,b.fd,Fe.a,Re.a,Pk.a,Ue.a,T_.a,k_.a,I_.a,b.gc,Ke.o,Ke.f,x_.a,D_.a,b.Ec,b.Rb],pipes:[E.b],styles:["lrn-my-profile-content-partners .my-profile-add-affiliate-code-error-notification{display:block;margin-bottom:var(--ui-spacing-md)}lrn-my-profile-content-partners .my-profile-affiliations-blank-slate{display:flex;flex-direction:column;align-items:center;padding:var(--ui-spacing-md) var(--ui-spacing-md) var(--ui-spacing-xl) var(--ui-spacing-md)}lrn-my-profile-content-partners .my-profile-affiliations-blank-slate ui-button-raised-primary{margin-top:var(--ui-spacing-md)}lrn-my-profile-content-partners .my-profile-affiliations-loading{display:flex;align-items:center;justify-content:center;padding:var(--ui-spacing-md) var(--ui-spacing-md) var(--ui-spacing-xl) var(--ui-spacing-md)}"],encapsulation:2,changeDetection:0}),e})();const Vk={privacyPolicy:{title:Je.a.t("standard","Privacy Policy"),subtitle:Je.a.t("standard","By unchecking the mandatory Privacy Policy settings, you will not be able to access and use your LMS again. The agreement to the mandatory Privacy Policy settings is required to complete your registration and use your platform."),savePrivacyPolicyA11y:Je.a.t("standard","Save changes to Privacy Policy")},termsAndConditions:{title:Je.a.t("standard","Terms & Conditions"),subtitle:Je.a.t("standard","By unchecking the mandatory Terms & Conditions settings, you will not be able to access and use your LMS again. The agreement to the mandatory Terms & Conditions settings is required to complete your registration and use your platform."),saveTermsAndConditionA11y:Je.a.t("standard","Save Changes to Terms & Conditions")},save:Je.a.t("standard","Save Changes"),toastSuccessMsg:Je.a.t("app7020","Your changes have been saved successfully"),toastErrorMsg:Je.a.t("app7020","Something went wrong!"),areYouSureDialog:{title:Je.a.t("mobile","You will be logged out"),content:Je.a.t("standard","Since you declined a mandatory condition of use, you will be logged out. Are you sure you want to proceed?"),cancel:Je.a.t("standard","Cancel"),logout:Je.a.t("standard","_LOGOUT")}};let Bk=(()=>{class e{constructor(e,t,i,s,n,a){this._backendService=e,this._docLayoutService=t,this._router=i,this._bootstrapService=s,this._externalPluginService=n,this._auth0Service=a}loadSubPolicies(){return new a.a(e=>this._backendService.request("/manage/v1/policy/track","GET").pipe(Object(ee.a)(1)).subscribe(t=>{var i;return e.next(null===(i=t.data)||void 0===i?void 0:i.sub_policy)}))}savePrivacyPolicy(e){return this._backendService.request(`/manage/v1/policy/track/${this._ppTrackId}`,"PUT",e)}saveTermsAndConditions(e){return this._backendService.request(`/manage/v1/termsandconditions/track/${this._tocTrackId}`,"PUT",e)}_showToastNotification(e){"success"===e?this._showToastSuccessNotification():this._showToastErrorNotification()}openAreYouSureDialog(e){this._docLayoutService.dialog.showDialog(e)}logout(){k.b.getInstance().isPluginActive("OpenIDConnectApp")?this._backendService.openidConnectLogout().pipe(Object(ee.a)(1)).subscribe(e=>{e&&e.data&&e.data.idp_logout_url&&(window.location.href=e.data.idp_logout_url)},()=>this._lmsLogout(),()=>this._lmsLogout()):this._lmsLogout()}loadPrivacyPolicyTrackId(){this._backendService.request("manage/v1/policy/track","GET").pipe(Object(ee.a)(1)).subscribe(e=>{var t,i;return this._ppTrackId=null===(i=null===(t=e.data)||void 0===t?void 0:t.policy)||void 0===i?void 0:i.track_id})}loadTermsAndConditionsTrackId(){this._backendService.request("manage/v1/termsandconditions/track","GET").pipe(Object(ee.a)(1)).subscribe(e=>{var t,i;return this._tocTrackId=null===(i=null===(t=e.data)||void 0===t?void 0:t.tc)||void 0===i?void 0:i.track_id})}_showToastSuccessNotification(){this._docLayoutService.toast.showToast({message:Vk.toastSuccessMsg,type:"success"})}_showToastErrorNotification(){this._docLayoutService.toast.showToast({message:Vk.toastErrorMsg,type:"error"})}_lmsLogout(){localStorage.setItem("skip_reenter_cc","no"),localStorage.getItem("access_token")?this._backendService.logout().pipe(Object(ee.a)(1)).subscribe(e=>{k.b.getInstance().isPluginActive("ZendeskApp")&&(k.b.getInstance().getPluginSettings("ZendeskApp").show_to_non_authenticated||this._externalPluginService.zendeskWidgetOptions("hide")),this._auth0Service.isLoggedIn()?this._auth0Service.logout():(null!==e&&this._router.navigate(["/learn"]),this._bootstrapService.removeCustomStyles("multidomain_styles"))},()=>{this._router.navigate(["/learn"]),this._bootstrapService.removeCustomStyles("multidomain_styles")}):(this._router.navigate(["/learn"]),this._bootstrapService.removeCustomStyles("multidomain_styles")),this._docLayoutService.breadcrumbs.clearNavigationHistory()}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a),c.nc(M.a),c.nc(s.h),c.nc(ae.a),c.nc(ne.a),c.nc(Ht.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var Gk=i("cvde");const $k=["policies"],Hk=["termsAndConditions"];function Yk(e,t){if(1&e){const e=c.kc();c.jc(0,"section",2),c.jc(1,"div",3),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",4),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"doc-layout-policies-acceptance",5,6),c.rc("privacyPolicyLoad",function(){return c.Uc(e),c.vc().privacyPolicyLoad()}),c.ic(),c.jc(9,"div",7),c.jc(10,"ui-button-raised-primary",8),c.rc("trigger",function(){return c.Uc(e),c.vc().savePolicy("privacy-policy")}),c.wc(11,"t"),c.wc(12,"t"),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,6,e.dictionary.privacyPolicy.title)," "),c.Mb(3),c.hd(" ",c.xc(6,8,e.dictionary.privacyPolicy.subtitle)," "),c.Mb(2),c.Dc("showPrivacyPolicyCheckboxes",!0),c.Mb(3),c.Dc("label",c.xc(11,10,e.dictionary.save))("loading",e.privacyPolicyLoading)("ariaLabel",c.xc(12,12,e.dictionary.privacyPolicy.savePrivacyPolicyA11y))}}function Wk(e,t){if(1&e){const e=c.kc();c.jc(0,"section",9),c.jc(1,"div",10),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",4),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"doc-layout-policies-acceptance",11,12),c.rc("termsAndConditionsLoad",function(){return c.Uc(e),c.vc().termsAndConditionsLoad()}),c.ic(),c.jc(9,"div",7),c.jc(10,"ui-button-raised-primary",8),c.rc("trigger",function(){return c.Uc(e),c.vc().savePolicy("terms-and-conditions")}),c.wc(11,"t"),c.wc(12,"t"),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,6,e.dictionary.termsAndConditions.title)," "),c.Mb(3),c.hd(" ",c.xc(6,8,e.dictionary.termsAndConditions.subtitle)," "),c.Mb(2),c.Dc("showTermsAndConditionsCheckboxes",!0),c.Mb(3),c.Dc("label",c.xc(11,10,e.dictionary.save))("loading",e.termsAndConditionsLoading)("ariaLabel",c.xc(12,12,e.dictionary.termsAndConditions.saveTermsAndConditionA11y))}}let Qk=(()=>{class e{constructor(e,t,i){this._docLayoutService=e,this._myProfileConditionsOfUseService=t,this._sessionService=i,this.privacyPolicyMustAccepted=!1,this.termsAndConditionsMustAccepted=!1,this.dictionary=Vk,this.privacyPolicyLoading=!1,this.termsAndConditionsLoading=!1,this.subPolicies$=new Pe.a([])}ngOnInit(){this.checkUserSession(),this.privacyPolicyMustAccepted&&(this._myProfileConditionsOfUseService.loadSubPolicies().pipe(Object(ee.a)(1)).subscribe(e=>this.subPolicies$.next(e)),this._myProfileConditionsOfUseService.loadPrivacyPolicyTrackId()),this.termsAndConditionsMustAccepted&&this._myProfileConditionsOfUseService.loadTermsAndConditionsTrackId()}checkUserSession(){this._sessionService.loadUserSession(!0).subscribe(e=>{e.data.need_policy_accept&&window.location.reload()})}privacyPolicyLoad(){this.policies.privacyPolicyFormControl.setValue(!0),this.subPolicies$.pipe(Object(nT.a)(e=>e.length>0)).subscribe(e=>{this.policies.subPolicies.forEach(t=>{const i=null==e?void 0:e.find(e=>e.id===t.id);i&&t.formControl.setValue(1===i.answer)})})}termsAndConditionsLoad(){this.termsAndConditions.termsAndConditionsFormControl.setValue(!0)}savePolicy(e){switch(e){case"privacy-policy":this.policies.isValid()?(this.privacyPolicyLoading=!0,this._savePrivacyPolicy().subscribe(()=>{this.privacyPolicyLoading=!1,this._myProfileConditionsOfUseService._showToastNotification("success"),this.policies.privacyPolicyFormControl.markAsPristine(),this.policies.subPolicies.forEach(e=>e.formControl.markAsPristine())},()=>{this.privacyPolicyLoading=!1,this._myProfileConditionsOfUseService._showToastNotification("error")})):this._askForLogoutConfirmation().subscribe(e=>{"logout"===e.actionID?this._savePrivacyPolicy().subscribe(()=>{var t;e.actionSuccess.next(!0),this.policies.privacyPolicyFormControl.markAsPristine(),this.policies.subPolicies.forEach(e=>e.formControl.markAsPristine()),null===(t=this.termsAndConditions)||void 0===t||t.termsAndConditionsFormControl.markAsPristine(),this._myProfileConditionsOfUseService.logout()},()=>{e.actionSuccess.next(!1),this._myProfileConditionsOfUseService._showToastNotification("error")}):e.actionSuccess.next(!0)});break;case"terms-and-conditions":this.termsAndConditions.isValid()?(this.termsAndConditionsLoading=!0,this._saveTermsAndConditions().subscribe(()=>{this.termsAndConditionsLoading=!1,this._myProfileConditionsOfUseService._showToastNotification("success"),this.termsAndConditions.termsAndConditionsFormControl.markAsPristine()},()=>{this.termsAndConditionsLoading=!1,this._myProfileConditionsOfUseService._showToastNotification("error")})):this._askForLogoutConfirmation().subscribe(e=>{"logout"===e.actionID?this._saveTermsAndConditions().subscribe(()=>{var t,i,s;e.actionSuccess.next(!0),this.termsAndConditions.termsAndConditionsFormControl.markAsPristine(),null===(t=this.policies)||void 0===t||t.privacyPolicyFormControl.markAsPristine(),null===(s=null===(i=this.policies)||void 0===i?void 0:i.subPolicies)||void 0===s||s.forEach(e=>e.formControl.markAsPristine()),this._myProfileConditionsOfUseService.logout()},()=>{e.actionSuccess.next(!1),this._myProfileConditionsOfUseService._showToastNotification("error")}):e.actionSuccess.next(!0)})}}saveChanges(){const e=new Pe.a(!1);return this.privacyPolicyMustAccepted&&!this.policies.isValid()||this.termsAndConditionsMustAccepted&&!this.termsAndConditions.isValid()?this._askForLogoutConfirmation().subscribe(t=>{if("logout"===t.actionID){const i=[];let s=!1;this.privacyPolicyMustAccepted&&i.push(this._savePrivacyPolicy()),this.termsAndConditionsMustAccepted&&i.push(this._saveTermsAndConditions()),Object(Gt.a)(i).pipe(Object(Vi.a)(()=>(s=!0,Object(xi.a)(void 0)))).subscribe(()=>{},()=>{},()=>{s?this._myProfileConditionsOfUseService._showToastNotification("error"):(this._myProfileConditionsOfUseService._showToastNotification("success"),this.markFormAsPristine(),this._myProfileConditionsOfUseService.logout()),t.actionSuccess.next(!s),e.next(!s)})}else t.actionSuccess.next(!0),e.next(!1)}):(this.policies&&this._isPolicyFormDirty()&&this.savePolicy("privacy-policy"),this.termsAndConditions&&this._isTermsAndConditionsFomDirty()&&this.savePolicy("terms-and-conditions"),setTimeout(()=>{e.next(!0)})),e}isFormDirty(){let e=!1;return this.privacyPolicyMustAccepted&&(e=this._isPolicyFormDirty()),!e&&this.termsAndConditionsMustAccepted&&(e=this._isTermsAndConditionsFomDirty()),e}markFormAsPristine(){this.privacyPolicyMustAccepted&&(this.policies.privacyPolicyFormControl.setValue(!0),this.policies.privacyPolicyFormControl.markAsPristine(),this.policies.subPolicies.forEach(e=>e.formControl.markAsPristine()),this._myProfileConditionsOfUseService.loadSubPolicies().pipe(Object(ee.a)(1)).subscribe(e=>this.subPolicies$.next(e))),this.termsAndConditionsMustAccepted&&(this.termsAndConditions.termsAndConditionsFormControl.setValue(!0),this.termsAndConditions.termsAndConditionsFormControl.markAsPristine())}_isPolicyFormDirty(){if(this.policies.privacyPolicyFormControl.dirty)return!0;let e=!1;for(let t=0;t<this.policies.subPolicies.length;t++)if(this.policies.subPolicies[t].formControl.dirty){e=!0;break}return e}_isTermsAndConditionsFomDirty(){return this.termsAndConditions.termsAndConditionsFormControl.dirty}_savePrivacyPolicy(){const e={id_policy_version:this.policies.privacyPolicyResponse.data.policy.policy_version_id,sub_policy:this.policies.subPolicies.map(e=>({id:e.id,answer:e.formControl.value?1:0})),track_answer:this.policies.privacyPolicyFormControl.value?1:0};return this._myProfileConditionsOfUseService.savePrivacyPolicy(e)}_saveTermsAndConditions(){return this._myProfileConditionsOfUseService.saveTermsAndConditions({id_tc_version:this.termsAndConditions.termsAndConditionsResponse.data.tc.tc_version,track_answer:this.termsAndConditions.termsAndConditionsFormControl.value?1:0})}_askForLogoutConfirmation(){return this._docLayoutService.dialog.showCommonDialog({title:this.dictionary.areYouSureDialog.title,content:this.dictionary.areYouSureDialog.content,actions:[{slot:"end",id:"cancel",label:this.dictionary.areYouSureDialog.cancel,type:"neutral"},{slot:"end",id:"logout",label:this.dictionary.areYouSureDialog.logout,type:"negative"}]})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(M.a),c.dc(Bk),c.dc(ak.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-conditions-of-use"]],viewQuery:function(e,t){if(1&e&&(c.md($k,1),c.md(Hk,1)),2&e){let e;c.Qc(e=c.sc())&&(t.policies=e.first),c.Qc(e=c.sc())&&(t.termsAndConditions=e.first)}},hostAttrs:[1,"lrn-my-profile-conditions-of-use"],inputs:{privacyPolicyMustAccepted:"privacyPolicyMustAccepted",termsAndConditionsMustAccepted:"termsAndConditionsMustAccepted"},decls:2,vars:2,consts:[["aria-labelledby","my-personal-info-privacy-policy-group",4,"ngIf"],["aria-labelledby","my-personal-info-terms-condition-group",4,"ngIf"],["aria-labelledby","my-personal-info-privacy-policy-group"],["id","my-personal-info-privacy-policy-group","role","heading","aria-level","3",1,"my-profile-conditions-of-use-title","ui-typography-heading-4"],[1,"my-profile-conditions-of-use-subtitle"],[3,"showPrivacyPolicyCheckboxes","privacyPolicyLoad"],["policies",""],[1,"my-profile-conditions-of-use-save-button"],[3,"label","loading","ariaLabel","trigger"],["aria-labelledby","my-personal-info-terms-condition-group"],["id","my-personal-info-terms-condition-group","role","heading","aria-level","3",1,"my-profile-conditions-of-use-title","ui-typography-heading-4"],[3,"showTermsAndConditionsCheckboxes","termsAndConditionsLoad"],["termsAndConditions",""]],template:function(e,t){1&e&&(c.dd(0,Yk,13,14,"section",0),c.dd(1,Wk,13,14,"section",1)),2&e&&(c.Dc("ngIf",t.privacyPolicyMustAccepted),c.Mb(1),c.Dc("ngIf",t.termsAndConditionsMustAccepted))},directives:[Ae.p,Gk.a,b.F],pipes:[E.b],styles:["lrn-my-profile-conditions-of-use{display:flex;flex-direction:column}lrn-my-profile-conditions-of-use section{padding:var(--ui-spacing-md) 0}lrn-my-profile-conditions-of-use section div[class^=my-profile-conditions-of-use-]{padding-right:var(--ui-spacing-md);padding-left:var(--ui-spacing-md)}lrn-my-profile-conditions-of-use section doc-layout-policies-acceptance{padding-top:var(--ui-spacing-md)}lrn-my-profile-conditions-of-use section:not(:first-child){border-top:var(--ui-size-border-xs) solid var(--ui-color-border-neutral)}lrn-my-profile-conditions-of-use section .my-profile-conditions-of-use-title{padding-bottom:var(--ui-spacing-xxs)}.my-profile-conditions-of-use-dialog{padding:var(--ui-spacing-md)}.my-profile-conditions-of-use-dialog .my-profile-conditions-of-use-dialog-title{margin-bottom:var(--ui-spacing-sm)}"],encapsulation:2}),e})();var Kk=function(e){return e.COMPLETE="complete",e.PARTIAL="partial",e}({}),Xk=function(e){return e.ADD="add",e.MODIFY="modify",e}({});let Jk=(()=>{class e{constructor(e){this._myProfileSkillsService=e,this.inputFormControl=new Ke.e(""),this.selectedOccupation=new c.q,this.inputTextChange=new c.q,this.dictionary=rT.a,this.singleSelectorSource=[],this.singleSelectorShowLoader$=new Pe.a(!1)}onSingleSelectorChanged(e){this.singleSelectorSource=[],this.inputTextChange.emit(),e.replace(/\s/g,"").length>=3&&this._fetchOccupation(e)}onSingleSelectorItemSelected(e){const t=this._suggestedOccupations.find(t=>t.code===e.id);this.selectedOccupation.emit(t)}_fetchOccupation(e){this.singleSelectorShowLoader$.next(!0),this._myProfileSkillsService.getOccupations(e).pipe(Object(ee.a)(1)).subscribe(t=>{this.singleSelectorSource=[],this._suggestedOccupations=t,this._suggestedOccupations.forEach(e=>{this.singleSelectorSource.push({id:e.code,title:e.name})}),this.singleSelectorSource.find(t=>t.title.toLowerCase()===e.toLowerCase())||this.singleSelectorSource.unshift({id:"",title:e,prefix:Je.a.t("standard","Use:")}),this.singleSelectorSource=[...this.singleSelectorSource],this.singleSelectorShowLoader$.next(!1)},()=>{this.singleSelectorShowLoader$.next(!1),this._myProfileSkillsService.showGenericSnackbarError()})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(uT))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-skills-occupation-selector"]],hostAttrs:[1,"lrn-my-profile-skills-occupation-selector"],inputs:{inputFormControl:"inputFormControl"},outputs:{selectedOccupation:"selectedOccupation",inputTextChange:"inputTextChange"},decls:3,vars:11,consts:[["ngDefaultControl","",1,"my-profile-skills-edit-occupation-selector-input",3,"label","inputFormControl","source","maxLength","showCounter","showRequiredFieldIndicator","showLoader","itemSelected","inputChanged"]],template:function(e,t){1&e&&(c.jc(0,"textfield-single-selector",0),c.rc("itemSelected",function(e){return t.onSingleSelectorItemSelected(e)})("inputChanged",function(e){return t.onSingleSelectorChanged(e)}),c.wc(1,"t"),c.wc(2,"async"),c.ic()),2&e&&c.Dc("label",c.xc(1,7,t.dictionary.skills.occupation))("inputFormControl",t.inputFormControl)("source",t.singleSelectorSource)("maxLength",50)("showCounter",!0)("showRequiredFieldIndicator",!0)("showLoader",c.xc(2,9,t.singleSelectorShowLoader$))},directives:[OS.a,Ke.b],pipes:[E.b,Ae.b],styles:["lrn-my-profile-skills-occupation-selector .my-profile-skills-edit-occupation-selector-input{display:block;margin:1.5rem 0;margin:var(--ui-spacing-md) 0}"],encapsulation:2,changeDetection:0}),e})();const Zk=["dialog"],eI=function(){return{count_error:1}};function tI(e,t){if(1&e&&(c.ec(0,"ui-notification-inline",7),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc(2);c.Dc("title",c.yc(1,2,e.dictionary.skills.savingChangesErrorNotificationTitle,c.Hc(7,eI)))("message",c.xc(2,5,e.dictionary.skills.editJobErrorNotificationSubtitle))}}function iI(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title"),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"doc-shared-dialog-content"),c.jc(5,"div",2),c.dd(6,tI,3,8,"ui-notification-inline",3),c.wc(7,"async"),c.jc(8,"lrn-my-profile-skills-occupation-selector",4),c.rc("selectedOccupation",function(t){return c.Uc(e),c.vc().onSelectedOccupation(t)})("inputTextChange",function(){return c.Uc(e),c.vc().showErrorNotification$.next(!1)}),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(9,"doc-shared-dialog-actions"),c.jc(10,"doc-shared-dialog-action",5),c.rc("trigger",function(){return c.Uc(e),c.vc().hideDialog()}),c.wc(11,"t"),c.ic(),c.jc(12,"doc-shared-dialog-action",6),c.rc("trigger",function(t){return c.Uc(e),c.vc().onDialogSubmit(t)}),c.wc(13,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,5,e.dictionary.skills.editOccupation)," "),c.Mb(4),c.Dc("ngIf",c.xc(7,7,e.showErrorNotification$)),c.Mb(2),c.Dc("inputFormControl",e.inputTextFormControl),c.Mb(2),c.Dc("label",c.xc(11,9,e.dictionary.skills.cancel)),c.Mb(2),c.Dc("label",c.xc(13,11,e.dictionary.skills.saveChanges))}}let sI=(()=>{class e{constructor(e,t,i,s){this._docLayoutService=e,this._myProfileSkillsService=t,this._translationService=i,this._cdr=s,this.dictionary=rT.a,this.inputTextFormControl=new Ke.e("",Ke.x.required),this.showErrorNotification$=new Pe.a(!1)}showDialog(){this.showErrorNotification$.next(!1),this.inputTextFormControl=new Ke.e("",Ke.x.required),this.dialog.show()}hideDialog(){this.dialog.hide(),this._resetComponentState()}onSelectedOccupation(e){this._selectedOccupation=e}onDialogClose(){this._resetComponentState()}onDialogSubmit(e){if(!this.inputTextFormControl.valid)return this.showErrorNotification$.next(!0),void e.next();this._selectedOccupation?this._saveProfiling(e):this._createOccupation(e)}_saveProfiling(e){this._myProfileSkillsService.saveProfiling(this._selectedOccupation,this._myProfileSkillsService.assignedSkills$.value).pipe(Object(ee.a)(1)).subscribe(e=>{const t=e.occupation,i=k.c.getInstance().objectives;this._myProfileSkillsService.assignedSkillsOccupation$.next(t),this._myProfileSkillsService.getSuggestedSkills(),i.occupation=t,this.hideDialog(),this._docLayoutService.toast.showToast({message:this.dictionary.skills.changesSavedSuccessfully,type:"success"})},()=>{this._myProfileSkillsService.showGenericSnackbarError(),e.next(),this._cdr.markForCheck()})}_createOccupation(e){this._myProfileSkillsService.createOccupation(this.inputTextFormControl.value).pipe(Object(ee.a)(1)).subscribe(t=>{this._selectedOccupation=t,this._saveProfiling(e)},()=>{this._myProfileSkillsService.showGenericSnackbarError(),e.next(),this._cdr.markForCheck()})}_resetComponentState(){this.showErrorNotification$.next(!1)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(M.a),c.dc(uT),c.dc(u.h),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-skills-edit-occupation-dialog"]],viewQuery:function(e,t){if(1&e&&c.md(Zk,1),2&e){let e;c.Qc(e=c.sc())&&(t.dialog=e.first)}},decls:5,vars:7,consts:[["size","sm",3,"canClose","closeTooltipLabel","closeAriaLabel","close"],["dialog",""],[1,"my-profile-skills-edit-occupation-dialog"],["class","my-profile-skills-edit-occupation-dialog-notification",3,"title","message",4,"ngIf"],[3,"inputFormControl","selectedOccupation","inputTextChange"],["type","neutral",3,"label","trigger"],["type","positive",3,"label","trigger"],[1,"my-profile-skills-edit-occupation-dialog-notification",3,"title","message"]],template:function(e,t){1&e&&(c.jc(0,"doc-shared-dialog",0,1),c.rc("close",function(){return t.onDialogClose()}),c.wc(2,"t"),c.wc(3,"t"),c.dd(4,iI,14,13,"ng-template"),c.ic()),2&e&&c.Dc("canClose",!0)("closeTooltipLabel",c.xc(2,3,t.dictionary.skills.close))("closeAriaLabel",c.xc(3,5,t.dictionary.skills.closeDialog))},directives:[Ul.a,T_.a,k_.a,I_.a,Ae.p,Jk,x_.a,D_.a,b.Ec],pipes:[E.b,Ae.b],styles:[".my-profile-skills-edit-occupation-dialog .my-profile-skills-edit-occupation-selector-notification{display:block;margin:1.5rem 0;margin:var(--ui-spacing-md) 0}"],encapsulation:2,changeDetection:0}),e})();const nI=["multiSelect"];function aI(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",5),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"p",6),c.fd(5),c.wc(6,"t"),c.ic(),c.gc()),2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,2,e.dictionary.skills.noSuggestionsTitle)," "),c.Mb(3),c.hd(" ",c.xc(6,4,e.dictionary.skills.noSuggestionsMessage)," ")}}function oI(e,t){1&e&&(c.jc(0,"div",9),c.ec(1,"ui-spinner",10),c.ic()),2&e&&(c.Mb(1),c.Dc("size","lg"))}function rI(e,t){1&e&&c.ec(0,"ui-icon",16),2&e&&c.Dc("name","check")("size","sm")}function cI(e,t){if(1&e){const e=c.kc();c.jc(0,"li",13),c.rc("click",function(){c.Uc(e);const i=t.$implicit;return c.vc(3).onSuggestionClick(i)}),c.dd(1,rI,1,2,"ui-icon",14),c.jc(2,"span",15),c.fd(3),c.ic(),c.ic()}if(2&e){const e=t.$implicit;c.Mb(1),c.Dc("ngIf",e.active),c.Mb(2),c.gd(e.name)}}function lI(e,t){if(1&e&&(c.jc(0,"div"),c.jc(1,"ul",11),c.dd(2,cI,4,2,"li",12),c.wc(3,"async"),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(2),c.Dc("ngForOf",c.xc(3,1,e.showingSuggestions$))}}function dI(e,t){if(1&e&&(c.dd(0,oI,2,1,"div",7),c.wc(1,"async"),c.jc(2,"div",5),c.fd(3),c.wc(4,"t"),c.ic(),c.dd(5,lI,4,3,"div",8),c.wc(6,"async")),2&e){const e=c.vc();let t=null;c.Dc("ngIf",c.xc(1,3,e.suggestionLoading$)),c.Mb(3),c.hd(" ",c.xc(4,5,e.dictionary.skills.suggestionsTitle)," "),c.Mb(2),c.Dc("ngIf",!(null==(t=c.xc(6,7,e.showingSuggestions$))||!t.length))}}let uI=(()=>{class e{constructor(e){this._myProfileSkillsService=e,this.skillsSelected=new c.q,this.showMultiSelectLoader$=new Pe.a(!1),this.suggestionLoading$=this._myProfileSkillsService.loadingSuggestedSkills$,this.suggestions$=new Pe.a([]),this.showingSuggestions$=this.suggestions$.pipe(Object(ri.a)(e=>e.map(e=>{const t=Boolean(this.selectedSkills.find(t=>t.code===e.code));return Object.assign(Object.assign({},e),{active:t})}))),this.dictionary=rT.a,this.multiSelectModeEnum=IS.a,this.skillsInputFormControl=new Ke.e(""),this.multiSelectSource=[],this.selectedSkills=[],this._multiSelectChangeSubject$=new gt.a,this._searchAvailableSkills=[],this._ngUnsubscribe$=new gt.a}ngOnInit(){var e;this.skillsInputFormControl=new Ke.e(""),this._subscribeToMultiSelectChanges(),this._myProfileSkillsService.suggestedSkills$.subscribe(this.suggestions$),null===(e=this.reset$)||void 0===e||e.subscribe(()=>this.resetComponent())}ngOnChanges(e){var t,i,s;if(Boolean(null===(t=null==e?void 0:e.selectedOccupation)||void 0===t?void 0:t.currentValue)){const t=null!==(i=this._myProfileSkillsService.assignedSkillsOccupation$.value)&&void 0!==i?i:null===(s=null==e?void 0:e.selectedOccupation)||void 0===s?void 0:s.currentValue;this._myProfileSkillsService.getSuggestedSkills(t)}}resetComponent(){this._ngUnsubscribe$.next(),this._ngUnsubscribe$.complete(),this.showMultiSelectLoader$.next(!1),this.multiSelectSource=[],this.selectedSkills=[]}onMultiSelectAddition(e){if(-1===this.selectedSkills.findIndex(t=>t.code===e.id)){let t=this._searchAvailableSkills.find(t=>t.code===e.id);t=null!=t?t:{code:e.id,name:e.name},this.selectedSkills.push(t),this.skillsSelected.emit(this.selectedSkills),this.suggestions$.next(this.suggestions$.value)}this.multiSelectSource=[]}onMultiSelectSubtraction(e){this.selectedSkills=this.selectedSkills.filter(t=>t.code!==e.id),this.skillsSelected.emit(this.selectedSkills),this.suggestions$.next(this.suggestions$.value)}onMultiSelectChange(e){this._multiSelectChangeSubject$.next(e)}onSuggestionClick(e){this.skillsMultiselect.select({id:e.code,name:e.name},!0)}_subscribeToMultiSelectChanges(){this._multiSelectChangeSubject$.pipe(Object(ft.a)(500),Object(bt.a)(this._ngUnsubscribe$)).subscribe(e=>{const t=e.replace(/\s/g,"");this.showErrorNotification$.next(!1),this.multiSelectSource=[],t.length>=3&&(this.showMultiSelectLoader$.next(!0),this._myProfileSkillsService.getAutocompleteSkills(e,this.selectedOccupation).pipe(Object(ee.a)(1)).subscribe(e=>{const t=[];this._searchAvailableSkills=[],e.forEach(e=>{t.push({id:e.code,name:e.name})}),this._searchAvailableSkills=e,this.multiSelectSource=[...t],this.showMultiSelectLoader$.next(!1)},()=>{this._myProfileSkillsService.showGenericSnackbarError(),this.showMultiSelectLoader$.next(!1)}))})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(uT))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-skills-skill-selector"]],viewQuery:function(e,t){if(1&e&&c.md(nI,1),2&e){let e;c.Qc(e=c.sc())&&(t.skillsMultiselect=e.first)}},hostAttrs:[1,"lrn-my-profile-skills-skill-selector"],inputs:{maxAssignableSkills:"maxAssignableSkills",showErrorNotification$:"showErrorNotification$",selectedOccupation:"selectedOccupation",reset$:"reset$"},outputs:{skillsSelected:"skillsSelected"},features:[c.Kb],decls:11,vars:24,consts:[["ngDefaultControl","",3,"label","placeholder","floating_label","mode","showRequiredFieldIndicator","max_selectable_items","source","showCounter","inputFormControl","applyLoaderOffset","showLoader","applySourceRegex","onItemSelection","onItemDeletion","onChange"],["multiSelect",""],[1,"skill-suggestions-section"],[4,"ngIf","ngIfElse"],["suggestions",""],[1,"skill-suggestions-section-title"],[1,"bolded","text-grey-mid","skill-suggestions-section-message"],["class","skill-suggestions-section-spinner",4,"ngIf"],[4,"ngIf"],[1,"skill-suggestions-section-spinner"],[3,"size"],[1,"skill-suggestions-section-list"],["class","skill-suggestions-section-chip bg-grey-light",3,"click",4,"ngFor","ngForOf"],[1,"skill-suggestions-section-chip","bg-grey-light",3,"click"],[3,"name","size",4,"ngIf"],[1,"skill-suggestions-section-chip-label"],[3,"name","size"]],template:function(e,t){if(1&e&&(c.jc(0,"multi-select",0,1),c.rc("onItemSelection",function(e){return t.onMultiSelectAddition(e)})("onItemDeletion",function(e){return t.onMultiSelectSubtraction(e)})("onChange",function(e){return t.onMultiSelectChange(e)}),c.wc(2,"t"),c.wc(3,"t"),c.wc(4,"async"),c.ic(),c.jc(5,"div",2),c.dd(6,aI,7,6,"ng-container",3),c.wc(7,"async"),c.wc(8,"async"),c.dd(9,dI,7,9,"ng-template",null,4,c.ed),c.ic()),2&e){const e=c.Rc(10);let i=null;c.Dc("label",c.xc(2,14,t.dictionary.skills.skills))("placeholder",c.xc(3,16,t.dictionary.skills.typeHere))("floating_label",!0)("mode",t.multiSelectModeEnum.AUTOCOMPLETE)("showRequiredFieldIndicator",!0)("max_selectable_items",t.maxAssignableSkills)("source",t.multiSelectSource)("showCounter",!0)("inputFormControl",t.skillsInputFormControl)("applyLoaderOffset",!0)("showLoader",c.xc(4,18,t.showMultiSelectLoader$))("applySourceRegex",!1),c.Mb(6),c.Dc("ngIf",!1===c.xc(7,20,t.suggestionLoading$)&&!(null!=(i=c.xc(8,22,t.showingSuggestions$))&&i.length))("ngIfElse",e)}},directives:[ES.a,Ke.b,Ae.p,b.fd,Ae.o,b.Eb],pipes:[E.b,Ae.b],styles:[".lrn-my-profile-skills-skill-selector .skill-suggestions-section-title{font-weight:600;font-size:var(--hyd-typography-size-sm);line-height:18px;letter-spacing:.1px}.lrn-my-profile-skills-skill-selector .skill-suggestions-section-message{margin-top:var(--ui-spacing-xs)}.lrn-my-profile-skills-skill-selector .skill-suggestions-section-list{display:flex;flex-wrap:wrap;margin-top:14px}.lrn-my-profile-skills-skill-selector .skill-suggestions-section-chip{position:relative;display:inline-flex;padding:5px 12px 6px;margin:0 8px 8px 0;font-size:var(--ui-typography-size-sm);line-height:20px;border-radius:2px;cursor:pointer}[dir=rtl] .lrn-my-profile-skills-skill-selector .skill-suggestions-section-chip{margin:0 0 8px 8px}.lrn-my-profile-skills-skill-selector .skill-suggestions-section-spinner{margin:15px auto 30px;text-align:center}"],encapsulation:2,changeDetection:0}),e})();var hI=i("9hrs"),pI=i("KCNW"),mI=i("FqIC");let gI=(()=>{class e{constructor(){this.change=new c.q}ngOnInit(){this._setSliderSteps()}onSliderSelectedStep(e){const t=Object.assign({},this.skill);t.expertise=e.value,this.change.emit(t)}_setSliderSteps(){this.sliderSteps=[{label:Je.a.t("standard","Beginner"),value:pI.a.BEGINNER,preselected:this.skill.expertise===pI.a.BEGINNER},{label:Je.a.t("standard","Intermediate"),value:pI.a.INTERMEDIATE,preselected:this.skill.expertise===pI.a.INTERMEDIATE},{label:Je.a.t("standard","_ADVANCED"),value:pI.a.ADVANCED,preselected:this.skill.expertise===pI.a.ADVANCED},{label:Je.a.t("standard","Expert"),value:pI.a.EXPERT,preselected:this.skill.expertise===pI.a.EXPERT}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-skills-slider-labels"]],hostAttrs:[1,"lrn-my-profile-skills-slider-labels"],inputs:{skill:"skill"},outputs:{change:"change"},decls:4,vars:2,consts:[[1,"my-profile-skills-slider-labels-wrapper"],[1,"my-profile-skills-slider-labels-name","ui-typography-heading-5"],[1,"my-profile-skills-slider-labels",3,"steps","selectedStep$"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.fd(2),c.ic(),c.jc(3,"slider-labels",2),c.rc("selectedStep$",function(e){return t.onSliderSelectedStep(e)}),c.ic(),c.ic()),2&e&&(c.Mb(2),c.hd(" ",t.skill.name," "),c.Mb(1),c.Dc("steps",t.sliderSteps))},directives:[mI.a],styles:["lrn-my-profile-skills-slider-labels .my-profile-skills-slider-labels-name{margin-bottom:2rem;margin-bottom:var(--ui-spacing-lg)}"],encapsulation:2,changeDetection:0}),e})();const bI=["dialog"];function fI(e,t){if(1&e&&(c.hc(0),c.fd(1),c.wc(2,"t"),c.gc()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.skills.configureYourSkills)," ")}}function vI(e,t){if(1&e&&(c.fd(0),c.wc(1,"t")),2&e){const e=c.vc(2);c.hd(" ",c.xc(1,1,e.dictionary.skills.addSkills)," ")}}function _I(e,t){if(1&e&&(c.jc(0,"doc-shared-dialog-subtitle"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.skills.addSkillsSubtitle)," ")}}const wI=function(){return{errorCount:1}};function yI(e,t){if(1&e&&(c.ec(0,"ui-notification-inline",23),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc(3);c.Dc("title",c.yc(1,2,e.dictionary.skills.chooseOccupationRequiredErrorNotificationTitle,c.Hc(7,wI)))("message",c.xc(2,5,e.dictionary.skills.editJobErrorNotificationSubtitle))}}function CI(e,t){if(1&e){const e=c.kc();c.jc(0,"ui-step",18),c.wc(1,"t"),c.jc(2,"div",19),c.jc(3,"div",20),c.fd(4),c.wc(5,"t"),c.ic(),c.dd(6,yI,3,8,"ui-notification-inline",21),c.wc(7,"async"),c.jc(8,"lrn-my-profile-skills-occupation-selector",22),c.rc("selectedOccupation",function(t){return c.Uc(e),c.vc(2).onSelectedOccupation(t)})("inputTextChange",function(){return c.Uc(e),c.vc(2).onOccupationInputTextChange()}),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Dc("title",c.xc(1,5,e.dictionary.skills.chooseYourOccupation))("completed",e.occupationInputFormControl.valid),c.Mb(4),c.hd(" ",c.xc(5,7,e.dictionary.skills.chooseOccupationTitle)," "),c.Mb(2),c.Dc("ngIf",c.xc(7,9,e.showErrorNotification$)),c.Mb(2),c.Dc("inputFormControl",e.occupationInputFormControl)}}function SI(e,t){if(1&e&&(c.ec(0,"ui-notification-inline",24),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc(2);c.Dc("title",c.yc(1,2,e.errorNotificationTitle,c.Hc(7,wI)))("message",c.xc(2,5,e.errorNotificationMessage))}}function TI(e,t){if(1&e){const e=c.kc();c.jc(0,"lrn-my-profile-skills-slider-labels",27),c.rc("change",function(t){return c.Uc(e),c.vc(3).onSliderLabelsChange(t)}),c.ic()}2&e&&c.Dc("skill",t.$implicit)}const kI=function(e){return{"single-slider":e}};function II(e,t){if(1&e&&(c.jc(0,"doc-shared-dialog-content"),c.jc(1,"div",25),c.dd(2,TI,1,1,"lrn-my-profile-skills-slider-labels",26),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.Dc("ngClass",c.Ic(2,kI,1===e.selectedSkills.length)),c.Mb(1),c.Dc("ngForOf",e.selectedSkills)}}function xI(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-action",28),c.rc("trigger",function(t){c.Uc(e),c.vc();const i=c.Rc(8);return c.vc().onStepPrevious(t,i)}),c.wc(1,"t"),c.ic()}if(2&e){const e=c.vc(2);c.Dc("label",c.xc(1,1,e.dictionary.skills.previous))}}function DI(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-action",29),c.rc("trigger",function(t){c.Uc(e),c.vc();const i=c.Rc(8);return c.vc().onStepNext(t,i)}),c.wc(1,"t"),c.ic()}if(2&e){const e=c.vc(2);c.Dc("label",c.xc(1,1,e.dictionary.skills.next))}}function OI(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-action",29),c.rc("trigger",function(t){return c.Uc(e),c.vc(2).onDialogSubmit(t)}),c.wc(1,"t"),c.wc(2,"t"),c.ic()}if(2&e){const e=c.vc(2);c.Dc("label",e.dialogMode===e.modeEnum.COMPLETE?c.xc(1,1,e.dictionary.skills.save):c.xc(2,3,e.dictionary.skills.addSkills))}}function EI(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title"),c.dd(2,fI,3,3,"ng-container",2),c.dd(3,vI,2,3,"ng-template",null,3,c.ed),c.ic(),c.dd(5,_I,3,3,"doc-shared-dialog-subtitle",4),c.jc(6,"div",5),c.jc(7,"ui-stepper",6,7),c.rc("chooseStep",function(t){return c.Uc(e),c.vc().onChooseStep(t)}),c.dd(9,CI,9,11,"ui-step",8),c.jc(10,"ui-step",9),c.wc(11,"t"),c.jc(12,"doc-shared-dialog-content"),c.jc(13,"div",10),c.jc(14,"div",11),c.fd(15),c.wc(16,"t"),c.ic(),c.dd(17,SI,3,8,"ui-notification-inline",12),c.wc(18,"async"),c.jc(19,"lrn-my-profile-skills-skill-selector",13),c.rc("skillsSelected",function(t){return c.Uc(e),c.vc().onSkillsSelected(t)}),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(20,"ui-step",14),c.wc(21,"t"),c.dd(22,II,3,4,"doc-shared-dialog-content",4),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(23,"doc-shared-dialog-actions"),c.dd(24,xI,2,3,"doc-shared-dialog-action",15),c.jc(25,"doc-shared-dialog-action",16),c.rc("trigger",function(){return c.Uc(e),c.vc().onDialogCancel()}),c.wc(26,"t"),c.ic(),c.dd(27,DI,2,3,"doc-shared-dialog-action",17),c.dd(28,OI,3,5,"doc-shared-dialog-action",17),c.ic()}if(2&e){const e=c.Rc(4),t=c.vc();c.Mb(2),c.Dc("ngIf",t.dialogMode===t.modeEnum.COMPLETE)("ngIfElse",e),c.Mb(3),c.Dc("ngIf",t.dialogMode===t.modeEnum.PARTIAL),c.Mb(2),c.Dc("keepStepperHeaderAlwaysVisible",!0),c.Mb(2),c.Dc("ngIf",t.dialogMode===t.modeEnum.COMPLETE),c.Mb(1),c.Dc("title",c.xc(11,20,t.dictionary.skills.selectSkills))("completed",t.selectedSkills.length>0)("disabled",t.dialogMode===t.modeEnum.COMPLETE&&!t.occupationInputFormControl.valid),c.Mb(5),c.hd(" ",c.xc(16,22,t.dictionary.skills.typeSkills)," "),c.Mb(2),c.Dc("ngIf",c.xc(18,24,t.showErrorNotification$)),c.Mb(2),c.Dc("maxAssignableSkills",t.maxAssignableSkills)("selectedOccupation",t.selectedOccupation)("showErrorNotification$",t.showErrorNotification$),c.Mb(1),c.Dc("title",c.xc(21,26,t.dictionary.skills.rateSkills))("disabled",0===t.selectedSkills.length),c.Mb(2),c.Dc("ngIf",t.dialogMode===t.modeEnum.COMPLETE?2===t.currentStep:1===t.currentStep),c.Mb(2),c.Dc("ngIf",t.dialogMode===t.modeEnum.COMPLETE?1===t.currentStep||2===t.currentStep:1===t.currentStep),c.Mb(1),c.Dc("label",c.xc(26,28,t.dictionary.skills.cancel)),c.Mb(2),c.Dc("ngIf",t.dialogMode===t.modeEnum.COMPLETE?0===t.currentStep||1===t.currentStep:0===t.currentStep),c.Mb(1),c.Dc("ngIf",t.dialogMode===t.modeEnum.COMPLETE?2===t.currentStep:1===t.currentStep)}}let PI=(()=>{class e{constructor(e,t,i,s){this._docLayoutService=e,this._myProfileSkillsService=t,this._translationService=i,this._cdr=s,this.maxAssignableSkills=lT.b,this.dictionary=rT.a,this.currentStep=0,this.occupationInputFormControl=new Ke.e("",Ke.x.required),this.isSkillsToggleOn$=this._myProfileSkillsService.isSkillsToggleOn$,this.showErrorNotification$=new Pe.a(!1),this.selectedSkills=[],this.dialogMode=Kk.PARTIAL,this.modeEnum=Kk,this.resetComponents$=new aS.a(1),this._ngUnsubscribe$=new gt.a}ngOnDestroy(){this._ngUnsubscribe$.next(),this._ngUnsubscribe$.complete()}showDialog(e){this.occupationInputFormControl=new Ke.e("",Ke.x.required),e&&(this.dialogMode=e),this.dialog.show()}hideDialog(){this.dialog.hide(),this._resetComponentState()}onSelectedOccupation(e){this.selectedOccupation=e}onOccupationInputTextChange(){this.showErrorNotification$.next(!1),this.selectedOccupation=void 0}onDialogClose(){this._resetComponentState()}onSliderLabelsChange(e){const t=this.selectedSkills.findIndex(t=>t.code===e.code);this.selectedSkills[t].expertise=e.expertise}onChooseStep(e){this.currentStep=e}onStepPrevious(e,t){this.showErrorNotification$.next(!1),t.activateStep(this.currentStep-1),e.next()}onStepNext(e,t){if(this.dialogMode===Kk.COMPLETE){if(0===this.currentStep&&!this.occupationInputFormControl.valid)return this.showErrorNotification$.next(!0),void e.next();if(1===this.currentStep&&0===this.selectedSkills.length)return void this._showRequiredSkillsError(e);if(1===this.currentStep&&this.selectedSkills.length>this.maxAssignableSkills)return void this._showMaxCountSkillsError(e)}else{if(0===this.selectedSkills.length)return void this._showRequiredSkillsError(e);if(this.selectedSkills.length>this.maxAssignableSkills)return void this._showMaxCountSkillsError(e)}this.showErrorNotification$.next(!1),this.isSkillsToggleOn$.value||this.dialogMode!==Kk.COMPLETE||0!==this.currentStep||void 0!==this.selectedOccupation?(e.next(),t.activateStep(this.currentStep+1)):this._createOccupation(e,t)}onDialogCancel(){this.hideDialog()}onDialogSubmit(e){this.dialogMode===Kk.COMPLETE?this.selectedOccupation?this._saveProfiling(e):this._createOccupation(e):this._saveProfiling(e)}onSkillsSelected(e){this.selectedSkills=e}_saveProfiling(e){var t;const i=[...this._myProfileSkillsService.assignedSkills$.value,...this.selectedSkills];this._myProfileSkillsService.saveProfiling(null!==(t=this.selectedOccupation)&&void 0!==t?t:this._myProfileSkillsService.assignedSkillsOccupation$.value,i).pipe(Object(ee.a)(1)).subscribe(e=>{const t=e.occupation,i=e.areasOfImprovement,s=k.c.getInstance().objectives;k.c.getInstance().skills&&(k.c.getInstance().skills.userIsProfiled=!0),s.occupation=t,s.areasOfImprovement=i,this._myProfileSkillsService.assignedSkillsOccupation$.next(t),this._myProfileSkillsService.assignedSkills$.next(i),this._myProfileSkillsService.getSuggestedSkills(),this.hideDialog(),this._docLayoutService.toast.showToast(this.dialogMode===Kk.COMPLETE?{message:this.dictionary.skills.detailsSuccessfullyUpdated,type:"success"}:{message:this.dictionary.skills.addSkillsToast,type:"success"})},()=>{this._myProfileSkillsService.showGenericSnackbarError(),e.next(),this._cdr.markForCheck()})}_createOccupation(e,t){this._myProfileSkillsService.createOccupation(this.occupationInputFormControl.value).pipe(Object(ee.a)(1)).subscribe(i=>{this.selectedOccupation=i,this.isSkillsToggleOn$.value&&this.dialogMode===Kk.COMPLETE?this._saveProfiling(e):(null==t||t.activateStep(this.currentStep+1),e.next(),this._cdr.markForCheck())},()=>{this._myProfileSkillsService.showGenericSnackbarError(),e.next(),this._cdr.markForCheck()})}_showRequiredSkillsError(e){this.errorNotificationTitle=this.dictionary.skills.addSkillErrorNotificationTitle,this.errorNotificationMessage=this.dictionary.skills.addSkillRequiredErrorNotificationSubtitle,e.next(),this.showErrorNotification$.next(!0),this._cdr.markForCheck()}_showMaxCountSkillsError(e){this.errorNotificationTitle=this.dictionary.skills.addSkillErrorNotificationTitle,this.errorNotificationMessage=this.dictionary.skills.addSkillMaxCountErrorNotificationSubtitle,e.next(),this.showErrorNotification$.next(!0),this._cdr.markForCheck()}_resetComponentState(){this.currentStep=0,this.dialogMode=Kk.PARTIAL,this.showErrorNotification$.next(!1),this.selectedSkills=[],this.resetComponents$.next()}}return e.\u0275fac=function(t){return new(t||e)(c.dc(M.a),c.dc(uT),c.dc(u.h),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-skills-add-skill-dialog"]],viewQuery:function(e,t){if(1&e&&c.md(bI,1),2&e){let e;c.Qc(e=c.sc())&&(t.dialog=e.first)}},inputs:{maxAssignableSkills:"maxAssignableSkills"},decls:5,vars:7,consts:[["size","lg",3,"canClose","closeTooltipLabel","closeAriaLabel","close"],["dialog",""],[4,"ngIf","ngIfElse"],["partialDialogTitle",""],[4,"ngIf"],[1,"my-profile-skills-add-skill-dialog"],[3,"keepStepperHeaderAlwaysVisible","chooseStep"],["stepper",""],[3,"title","completed",4,"ngIf"],[3,"title","completed","disabled"],[1,"my-profile-skills-add-skill-dialog-select-skills"],[1,"my-profile-skills-add-skill-dialog-select-skills-title","ui-typography-heading-5"],["class","my-profile-skills-add-skill-dialog-select-skills-notification",3,"title","message",4,"ngIf"],[3,"maxAssignableSkills","selectedOccupation","showErrorNotification$","skillsSelected"],[3,"title","disabled"],["type","neutral","slot","start",3,"label","trigger",4,"ngIf"],["type","neutral","slot","end",3,"label","trigger"],["type","positive","slot","end",3,"label","trigger",4,"ngIf"],[3,"title","completed"],[1,"my-profile-skills-add-skill-dialog-occupation"],[1,"my-profile-skills-add-skill-dialog-occupation-title","ui-typography-heading-5"],["class","my-profile-skills-add-skill-dialog-occupation-notification",3,"title","message",4,"ngIf"],[1,"my-profile-skills-add-skill-dialog-occupation-selector",3,"inputFormControl","selectedOccupation","inputTextChange"],[1,"my-profile-skills-add-skill-dialog-occupation-notification",3,"title","message"],[1,"my-profile-skills-add-skill-dialog-select-skills-notification",3,"title","message"],[1,"my-profile-skills-add-skill-dialog-rate-skills",3,"ngClass"],["class","my-profile-skills-add-skill-dialog-rate-skills-slider",3,"skill","change",4,"ngFor","ngForOf"],[1,"my-profile-skills-add-skill-dialog-rate-skills-slider",3,"skill","change"],["type","neutral","slot","start",3,"label","trigger"],["type","positive","slot","end",3,"label","trigger"]],template:function(e,t){1&e&&(c.jc(0,"doc-shared-dialog",0,1),c.rc("close",function(){return t.onDialogClose()}),c.wc(2,"t"),c.wc(3,"t"),c.dd(4,EI,29,30,"ng-template"),c.ic()),2&e&&c.Dc("canClose",!0)("closeTooltipLabel",c.xc(2,3,t.dictionary.skills.close))("closeAriaLabel",c.xc(3,5,t.dictionary.skills.closeDialog))},directives:[Ul.a,T_.a,k_.a,Ae.p,b.id,b.hd,I_.a,uI,x_.a,D_.a,hI.a,Jk,b.Ec,Ae.n,Ae.o,gI],pipes:[E.b,Ae.b],styles:[".my-profile-skills-add-skill-dialog{margin-top:1.5rem;margin-top:var(--ui-spacing-md);border-top:.06rem solid #e4e6e5;border-top:solid var(--ui-size-border-xs) var(--ui-color-border-neutral)}.my-profile-skills-add-skill-dialog .my-profile-skills-add-skill-dialog-occupation{padding:0 1.5rem;padding:0 var(--ui-spacing-md)}.my-profile-skills-add-skill-dialog .my-profile-skills-add-skill-dialog-occupation-title{margin-top:1.5rem;margin-top:var(--ui-spacing-md)}.my-profile-skills-add-skill-dialog .my-profile-skills-add-skill-dialog-occupation-notification{display:block;margin-top:1.5rem;margin-top:var(--ui-spacing-md)}.my-profile-skills-add-skill-dialog .my-profile-skills-add-skill-dialog-select-skills-title{margin:1.5rem 0;margin:var(--ui-spacing-md) 0}.my-profile-skills-add-skill-dialog .my-profile-skills-add-skill-dialog-select-skills-notification{display:block;margin:1.5rem 0;margin:var(--ui-spacing-md) 0}.my-profile-skills-add-skill-dialog .my-profile-skills-add-skill-dialog-rate-skills{display:flex;flex-wrap:wrap;justify-content:space-between}.my-profile-skills-add-skill-dialog .my-profile-skills-add-skill-dialog-rate-skills.single-slider .my-profile-skills-add-skill-dialog-rate-skills-slider{width:100%}.my-profile-skills-add-skill-dialog .my-profile-skills-add-skill-dialog-rate-skills .my-profile-skills-add-skill-dialog-rate-skills-slider{flex-shrink:0;width:49%;margin-top:1.5rem;margin-top:var(--ui-spacing-md)}"],encapsulation:2,changeDetection:0}),e})();const MI=["dialog"];function AI(e,t){if(1&e){const e=c.kc();c.jc(0,"lrn-my-profile-skills-slider-labels",6),c.rc("change",function(t){return c.Uc(e),c.vc(2).onSliderLabelsChange(t)}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("skill",e.skill)}}function LI(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title"),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"doc-shared-dialog-content"),c.jc(5,"div",2),c.dd(6,AI,1,1,"lrn-my-profile-skills-slider-labels",3),c.ic(),c.ic(),c.ic(),c.jc(7,"doc-shared-dialog-actions"),c.jc(8,"doc-shared-dialog-action",4),c.rc("trigger",function(){return c.Uc(e),c.vc().onDialogCancel()}),c.wc(9,"t"),c.ic(),c.jc(10,"doc-shared-dialog-action",5),c.rc("trigger",function(t){return c.Uc(e),c.vc().onDialogSubmit(t)}),c.wc(11,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,4,e.dictionary.skills.rateYourself)," "),c.Mb(4),c.Dc("ngIf",e.skill),c.Mb(2),c.Dc("label",c.xc(9,6,e.dictionary.skills.cancel)),c.Mb(2),c.Dc("label",c.xc(11,8,e.dictionary.skills.saveChanges))}}let jI=(()=>{class e{constructor(e,t,i,s){this._docLayoutService=e,this._translationService=t,this._myProfileSkillsService=i,this._cdr=s,this.dictionary=rT.a,this.updatedSkill=null,this._dialogMode=Xk.MODIFY}showDialog(e,t){this.skill=e,this._dialogMode=t,this.dialog.show()}hideDialog(){this.dialog.hide(),this._resetComponentState()}onDialogClose(){this._resetComponentState()}onDialogCancel(){this.hideDialog()}onSliderLabelsChange(e){this.updatedSkill=e}onDialogSubmit(e){const t=this._myProfileSkillsService.assignedSkills$.value;if(this._dialogMode===Xk.ADD)t.push(this.updatedSkill);else{const e=t.findIndex(e=>{var t;return e.code===(null===(t=this.updatedSkill)||void 0===t?void 0:t.code)});t[e]=this.updatedSkill}this._saveProfiling(t,e)}_saveProfiling(e,t){this._myProfileSkillsService.saveProfiling(this._myProfileSkillsService.assignedSkillsOccupation$.value,e).pipe(Object(ee.a)(1)).subscribe(e=>{const t=e.areasOfImprovement;k.c.getInstance().objectives.areasOfImprovement=t,this._myProfileSkillsService.assignedSkills$.next(t),this._dialogMode===Xk.ADD&&this._myProfileSkillsService.filterSuggestedSkills(),this.hideDialog(),this._docLayoutService.toast.showToast({message:this.dictionary.skills.detailsSuccessfullyUpdated,type:"success"})},()=>{this._myProfileSkillsService.showGenericSnackbarError(),t.next(),this._cdr.markForCheck()})}_resetComponentState(){this.updatedSkill=null}}return e.\u0275fac=function(t){return new(t||e)(c.dc(M.a),c.dc(u.h),c.dc(uT),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-skills-rate-skill-dialog"]],viewQuery:function(e,t){if(1&e&&c.md(MI,1),2&e){let e;c.Qc(e=c.sc())&&(t.dialog=e.first)}},decls:5,vars:7,consts:[["size","sm",3,"canClose","closeTooltipLabel","closeAriaLabel","close"],["dialog",""],[1,"my-profile-skills-rate-skill-dialog"],[3,"skill","change",4,"ngIf"],["type","neutral",3,"label","trigger"],["type","positive",3,"label","trigger"],[3,"skill","change"]],template:function(e,t){1&e&&(c.jc(0,"doc-shared-dialog",0,1),c.rc("close",function(){return t.onDialogClose()}),c.wc(2,"t"),c.wc(3,"t"),c.dd(4,LI,12,10,"ng-template"),c.ic()),2&e&&c.Dc("canClose",!0)("closeTooltipLabel",c.xc(2,3,t.dictionary.skills.close))("closeAriaLabel",c.xc(3,5,t.dictionary.skills.closeDialog))},directives:[Ul.a,T_.a,k_.a,I_.a,Ae.p,x_.a,D_.a,gI],pipes:[E.b],styles:[".my-profile-skills-rate-skill-dialog{margin-bottom:1.5rem;margin-bottom:var(--ui-spacing-md)}"],encapsulation:2,changeDetection:0}),e})();const FI=["dialog"];function RI(e,t){if(1&e){const e=c.kc();c.jc(0,"doc-shared-dialog-body"),c.jc(1,"doc-shared-dialog-title"),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"doc-shared-dialog-content"),c.jc(5,"div",2),c.fd(6),c.wc(7,"t"),c.ec(8,"br"),c.fd(9),c.wc(10,"t"),c.ic(),c.ic(),c.ic(),c.jc(11,"doc-shared-dialog-actions"),c.jc(12,"doc-shared-dialog-action",3),c.rc("trigger",function(){return c.Uc(e),c.vc(),c.Rc(1).hide()}),c.wc(13,"t"),c.ic(),c.jc(14,"doc-shared-dialog-action",4),c.rc("trigger",function(t){return c.Uc(e),c.vc().onDialogSubmit(t)}),c.wc(15,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(2),c.hd(" ",c.xc(3,5,e.dictionary.skills.deleteSkill)," "),c.Mb(4),c.hd(" ",c.xc(7,7,e.dictionary.skills.deleteSkillDescription)," "),c.Mb(3),c.hd(" ",c.xc(10,9,e.dictionary.skills.doYouWantToProceed)," "),c.Mb(3),c.Dc("label",c.xc(13,11,e.dictionary.skills.cancel)),c.Mb(2),c.Dc("label",c.xc(15,13,e.dictionary.skills.delete))}}let NI=(()=>{class e{constructor(e,t,i){this._docLayoutService=e,this._myProfileSkillsService=t,this._cdr=i,this.dictionary=rT.a}showDialog(e){this.skill=e,this.dialog.show()}onDialogSubmit(e){let t=this._myProfileSkillsService.assignedSkills$.value;t=t.filter(e=>e.code!==this.skill.code),this._myProfileSkillsService.saveProfiling(this._myProfileSkillsService.assignedSkillsOccupation$.value,t).pipe(Object(ee.a)(1)).subscribe(e=>{const t=e.areasOfImprovement;k.c.getInstance().objectives.areasOfImprovement=t,this._myProfileSkillsService.assignedSkills$.next(t),this._myProfileSkillsService.getSuggestedSkills(),this.dialog.hide(),this._docLayoutService.toast.showToast({message:this.dictionary.skills.deleteSkillToast,type:"success"})},()=>{this._myProfileSkillsService.showGenericSnackbarError(),e.next(),this._cdr.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(M.a),c.dc(uT),c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-skills-delete-skill-dialog"]],viewQuery:function(e,t){if(1&e&&c.md(FI,1),2&e){let e;c.Qc(e=c.sc())&&(t.dialog=e.first)}},decls:5,vars:7,consts:[["size","sm",3,"canClose","closeTooltipLabel","closeAriaLabel"],["dialog",""],[1,"my-profile-skills-delete-skill-dialog"],["type","neutral",3,"label","trigger"],["type","negative",3,"label","trigger"]],template:function(e,t){1&e&&(c.jc(0,"doc-shared-dialog",0,1),c.wc(2,"t"),c.wc(3,"t"),c.dd(4,RI,16,15,"ng-template"),c.ic()),2&e&&c.Dc("canClose",!0)("closeTooltipLabel",c.xc(2,3,t.dictionary.skills.close))("closeAriaLabel",c.xc(3,5,t.dictionary.skills.closeDialog))},directives:[Ul.a,T_.a,k_.a,I_.a,x_.a,D_.a],pipes:[E.b],encapsulation:2,changeDetection:0}),e})(),UI=(()=>{class e{constructor(e){this._translationService=e}transform(e){let t="";switch(e){case 1:t="Beginner";break;case 2:t="Intermediate";break;case 3:t="_ADVANCED";break;case 4:t="Expert"}return t?this._translationService.instant(t,{category:"standard"}):""}}return e.\u0275fac=function(t){return new(t||e)(c.dc(u.h))},e.\u0275pipe=c.cc({name:"myProfileSkillsExpertise",type:e,pure:!0}),e})();const qI=["editOccupationDialog"],zI=["addSkillDialog"],VI=["rateSkillDialog"],BI=["deleteSkillDialog"];function GI(e,t){if(1&e){const e=c.kc();c.jc(0,"div",10),c.jc(1,"div",11),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",12),c.fd(5),c.wc(6,"async"),c.ic(),c.jc(7,"ui-button-outlined",13),c.rc("trigger",function(){return c.Uc(e),c.vc(2),c.Rc(6).showDialog()}),c.wc(8,"t"),c.wc(9,"t"),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Mb(2),c.hd(" ",c.xc(3,5,e.dictionary.skills.yourOccupation)," "),c.Mb(3),c.hd(" ",c.xc(6,7,e.assignedSkillsOccupation$).name," "),c.Mb(2),c.Dc("label",c.xc(8,9,e.dictionary.skills.changeOccupation))("ariaLabel",c.xc(9,11,e.dictionary.skills.changeOccupation))("ariaHasPopup",!0)}}function $I(e,t){1&e&&c.ec(0,"ui-spinner",27)}const HI=function(e){return{"my-profile-skills-item-disable":e}};function YI(e,t){if(1&e){const e=c.kc();c.jc(0,"ui-chip",30),c.rc("click",function(){c.Uc(e);const i=t.$implicit;return c.vc(6).addSelectedSkill(i)}),c.wc(1,"async"),c.fd(2),c.ic()}if(2&e){const e=t.$implicit,i=c.vc(6);c.Dc("ngClass",c.Ic(4,HI,c.xc(1,2,i.assignedSkills$).length==i.maxAssignableSkills)),c.Mb(2),c.hd(" ",e.name," ")}}function WI(e,t){if(1&e&&(c.hc(0),c.dd(1,YI,3,6,"ui-chip",29),c.wc(2,"async"),c.gc()),2&e){const e=c.vc(5);c.Mb(1),c.Dc("ngForOf",c.xc(2,1,e.suggestedSkills$))}}function QI(e,t){if(1&e&&(c.fd(0),c.wc(1,"t")),2&e){const e=c.vc(5);c.hd(" ",c.xc(1,1,e.dictionary.skills.noSuggestions)," ")}}function KI(e,t){if(1&e&&(c.dd(0,WI,3,3,"ng-container",1),c.wc(1,"async"),c.dd(2,QI,2,3,"ng-template",null,28,c.ed)),2&e){const e=c.Rc(3),t=c.vc(4);c.Dc("ngIf",c.xc(1,2,t.suggestedSkills$).length>0)("ngIfElse",e)}}function XI(e,t){if(1&e&&(c.jc(0,"div",22),c.jc(1,"div",23),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",24),c.dd(5,$I,1,0,"ui-spinner",25),c.wc(6,"async"),c.dd(7,KI,4,4,"ng-template",null,26,c.ed),c.ic(),c.ic()),2&e){const e=c.Rc(8),t=c.vc(3);c.Mb(2),c.hd(" ",c.xc(3,3,t.dictionary.skills.topSuggestions)," "),c.Mb(3),c.Dc("ngIf",c.xc(6,5,t.loadingSuggestedSkills$))("ngIfElse",e)}}function JI(e,t){if(1&e&&(c.jc(0,"div",31),c.ec(1,"ui-notification-inline",32),c.wc(2,"t"),c.wc(3,"t"),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.Dc("title",c.xc(2,2,e.dictionary.skills.maxSkillsNumberReachedTitle))("message",c.xc(3,4,e.dictionary.skills.addSkillMaxCountErrorNotificationSubtitle))}}function ZI(e,t){if(1&e&&(c.jc(0,"div",33),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(3);c.Mb(1),c.hd(" ",c.xc(2,1,e.numberOfSkillsAssigned)," ")}}function ex(e,t){if(1&e){const e=c.kc();c.jc(0,"li",34),c.jc(1,"div",35),c.jc(2,"div",36),c.fd(3),c.ic(),c.jc(4,"div",37),c.fd(5),c.wc(6,"myProfileSkillsExpertise"),c.ic(),c.ic(),c.jc(7,"div",38),c.jc(8,"ui-button-dropdown",39),c.rc("selectOption",function(i){c.Uc(e);const s=t.$implicit;return c.vc(3).onSkillSelectOption(i,s)}),c.wc(9,"t"),c.jc(10,"ui-button-dropdown-option",40),c.fd(11),c.wc(12,"t"),c.ic(),c.jc(13,"ui-button-dropdown-option",41),c.fd(14),c.wc(15,"t"),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=t.$implicit,i=c.vc(3);c.Mb(3),c.hd(" ",e.name," "),c.Mb(2),c.hd(" ",c.xc(6,8,e.expertise)," "),c.Mb(3),c.Dc("selectable",!1)("tooltipLabel",c.xc(9,10,i.dictionary.skills.actions)),c.Mb(2),c.Dc("value",i.skillsActionsEnum.UPDATE),c.Mb(1),c.hd(" ",c.xc(12,12,i.dictionary.skills.updateRating)," "),c.Mb(2),c.Dc("value",i.skillsActionsEnum.DELETE),c.Mb(1),c.hd(" ",c.xc(15,14,i.dictionary.skills.delete)," ")}}const tx=function(e){return{"max-skills-assigned":e}};function ix(e,t){if(1&e){const e=c.kc();c.jc(0,"div",14),c.wc(1,"async"),c.jc(2,"div",15),c.fd(3),c.wc(4,"t"),c.ic(),c.jc(5,"ui-button-text",16),c.rc("trigger",function(){return c.Uc(e),c.vc(2),c.Rc(8).showDialog()}),c.wc(6,"async"),c.wc(7,"async"),c.wc(8,"t"),c.wc(9,"t"),c.ic(),c.dd(10,XI,9,7,"div",17),c.dd(11,JI,4,6,"div",18),c.wc(12,"async"),c.dd(13,ZI,3,3,"div",19),c.wc(14,"async"),c.jc(15,"ul",20),c.dd(16,ex,16,16,"li",21),c.wc(17,"async"),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Dc("ngClass",c.Ic(29,tx,c.xc(1,11,e.assignedSkills$).length===e.maxAssignableSkills)),c.Mb(3),c.hd(" ",c.xc(4,13,e.dictionary.skills.yourSkills)," "),c.Mb(2),c.Dc("disabled",c.xc(6,15,e.assignedSkills$).length>=e.maxAssignableSkills||e.editMode!==e.editModeEnum.COMPLETE)("ngClass",c.Ic(31,HI,c.xc(7,17,e.assignedSkills$).length==e.maxAssignableSkills))("label",c.xc(8,19,e.dictionary.skills.addSkills))("ariaLabel",c.xc(9,21,e.dictionary.skills.addSkills))("ariaHasPopup",!0),c.Mb(5),c.Dc("ngIf",e.editMode===e.editModeEnum.COMPLETE),c.Mb(1),c.Dc("ngIf",c.xc(12,23,e.assignedSkills$).length==e.maxAssignableSkills),c.Mb(2),c.Dc("ngIf",c.xc(14,25,e.assignedSkills$).length>0),c.Mb(3),c.Dc("ngForOf",c.xc(17,27,e.assignedSkills$))}}function sx(e,t){if(1&e&&(c.hc(0),c.dd(1,GI,10,13,"div",8),c.wc(2,"async"),c.dd(3,ix,18,33,"div",9),c.wc(4,"async"),c.gc()),2&e){const e=c.vc();c.Mb(1),c.Dc("ngIf",c.xc(2,2,e.assignedSkillsOccupation$)),c.Mb(2),c.Dc("ngIf",c.xc(4,4,e.assignedSkills$).length>0)}}function nx(e,t){if(1&e){const e=c.kc();c.jc(0,"div",42),c.ec(1,"ui-blank-slate",43),c.wc(2,"t"),c.wc(3,"t"),c.jc(4,"div",44),c.jc(5,"ui-button-raised-primary",45),c.rc("trigger",function(){c.Uc(e);const t=c.vc();return c.Rc(8).showDialog(t.addSkillsDialogModeEnum.COMPLETE)}),c.wc(6,"t"),c.wc(7,"t"),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("title",c.xc(2,5,e.dictionary.skills.improveYourSkillsTitle))("description",c.xc(3,7,e.dictionary.skills.improveYourSkillsSubtitle)),c.Mb(4),c.Dc("label",c.xc(6,9,e.dictionary.skills.getStarted))("ariaLabel",c.xc(7,11,e.dictionary.skills.getStarted))("ariaHasPopup",!0)}}let ax=(()=>{class e{constructor(e,t,i){this._translationService=e,this._myProfileSkillsService=t,this._toggleService=i,this.editMode=lT.d.COMPLETE,this.dictionary=rT.a,this.maxAssignableSkills=lT.b,this.assignedSkillsOccupation$=this._myProfileSkillsService.assignedSkillsOccupation$,this.assignedSkills$=this._myProfileSkillsService.assignedSkills$,this.suggestedSkills$=this._myProfileSkillsService.suggestedSkills$,this.loadingSuggestedSkills$=this._myProfileSkillsService.loadingSuggestedSkills$,this.remainingAssignableSkills$=this.assignedSkills$.pipe(Object(ri.a)(e=>{var t;return lT.b-(null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0)})),this.skillsActionsEnum=lT.c,this.rateSkillDialogModeEnum=Xk,this.addSkillsDialogModeEnum=Kk,this.userIsProfiled$=this._myProfileSkillsService.userIsProfiled$,this.editModeEnum=lT.d,this._setInitialSessionData(),this._myProfileSkillsService.getSuggestedSkills(),this.unscribeSkills&&this.unscribeSkills.unsubscribe(),this.unscribeSkills=this.assignedSkills$.subscribe(()=>{this.numberOfSkillsAssigned=Je.a.t("skills","{numberOfSkills} out of {maxNumberOfSkills} skills",{numberOfSkills:this.assignedSkills$.value.length,maxNumberOfSkills:this.maxAssignableSkills})})}ngOnDestroy(){this.unscribeSkills&&this.unscribeSkills.unsubscribe()}onSkillSelectOption(e,t){switch(e){case lT.c.UPDATE:this.rateSkillDialog.showDialog(t,this.rateSkillDialogModeEnum.MODIFY);break;case lT.c.DELETE:this.deleteSkillDialog.showDialog(t)}}_setInitialSessionData(){var e,t,i,s;const n=null===(e=k.c.getInstance().objectives)||void 0===e?void 0:e.occupation,a=null===(t=k.c.getInstance().objectives)||void 0===t?void 0:t.areasOfImprovement,o=this._toggleService.isOn(u.f.TOGGLE_SKILLS_PHASE_1_1)?null===(i=k.c.getInstance().skills)||void 0===i?void 0:i.userIsProfiled:Boolean(null===(s=k.c.getInstance().objectives)||void 0===s?void 0:s.occupation);n&&this._myProfileSkillsService.assignedSkillsOccupation$.next(n),a&&this._myProfileSkillsService.assignedSkills$.next(a),o&&this._myProfileSkillsService.userIsProfiled$.next(Boolean(null==a?void 0:a.length))}addSelectedSkill(e){this.assignedSkills$.value.length<10&&this.rateSkillDialog.showDialog(e,this.rateSkillDialogModeEnum.ADD)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(u.h),c.dc(uT),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-skills"]],viewQuery:function(e,t){if(1&e&&(c.md(qI,1),c.md(zI,1),c.md(VI,1),c.md(BI,1)),2&e){let e;c.Qc(e=c.sc())&&(t.editOccupationDialog=e.first),c.Qc(e=c.sc())&&(t.addSkillDialog=e.first),c.Qc(e=c.sc())&&(t.rateSkillDialog=e.first),c.Qc(e=c.sc())&&(t.deleteSkillDialog=e.first)}},hostAttrs:[1,"lrn-my-profile-skills"],inputs:{editMode:"editMode"},decls:14,vars:7,consts:[[1,"my-profile-skills-wrapper"],[4,"ngIf","ngIfElse"],["blankSlate",""],["editOccupationDialog",""],[3,"maxAssignableSkills"],["addSkillDialog",""],["rateSkillDialog",""],["deleteSkillDialog",""],["class","my-profile-skills-occupation",4,"ngIf"],["class","my-profile-skills-assigned",3,"ngClass",4,"ngIf"],[1,"my-profile-skills-occupation"],[1,"my-profile-skills-occupation-subtitle","ui-typography-subtitle","ui-color-typography-secondary"],[1,"my-profile-skills-occupation-title","ui-typography-heading-4"],["color","accent",1,"my-profile-skills-occupation-edit",3,"label","ariaLabel","ariaHasPopup","trigger"],[1,"my-profile-skills-assigned",3,"ngClass"],[1,"my-profile-skills-assigned-title","ui-typography-heading-4"],["color","accent","iconName","add-element",1,"my-profile-skills-assigned-add-skills",3,"disabled","ngClass","label","ariaLabel","ariaHasPopup","trigger"],["class","my-profile-skills-suggestions",4,"ngIf"],["class","my-profile-skills-notification-inline-wrapper",4,"ngIf"],["class","ui-typography-subtitle ui-color-typography-secondary my-profile-skills-reached-wrapper",4,"ngIf"],[1,"my-profile-skills-assigned-list"],["class","my-profile-skills-assigned-list-item",4,"ngFor","ngForOf"],[1,"my-profile-skills-suggestions"],[1,"my-profile-skills-suggestions-subtitle","ui-typography-subtitle","ui-color-typography-secondary"],[1,"my-profile-skills-suggestions-list"],["class","my-profile-skills-suggestions-list-spinner",4,"ngIf","ngIfElse"],["suggestionsList",""],[1,"my-profile-skills-suggestions-list-spinner"],["noSuggestionsMessage",""],["class","my-profile-skills-suggestions-list-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"my-profile-skills-suggestions-list-item",3,"ngClass","click"],[1,"my-profile-skills-notification-inline-wrapper"],["type","alert",3,"title","message"],[1,"ui-typography-subtitle","ui-color-typography-secondary","my-profile-skills-reached-wrapper"],[1,"my-profile-skills-assigned-list-item"],[1,"my-profile-skills-assigned-list-item-texts"],[1,"my-profile-skills-assigned-list-item-title","ui-typography-heading-5"],[1,"my-profile-skills-assigned-list-item-subtitle","ui-typography-subtitle","ui-color-typography-secondary"],[1,"my-profile-skills-assigned-list-item-actions"],["menuHorizontalAlignment","before","iconName","more-vertical","triggerType","icon","tooltipPosition","above",3,"selectable","tooltipLabel","selectOption"],[3,"value"],[1,"ui-color-typography-error",3,"value"],[1,"my-profile-skills-blank-slate-wrapper"],["illustrationName","on-the-way","illustrationSize","md",1,"my-profile-skills-blank-slate",3,"title","description"],[1,"my-profile-skills-blank-slate-button-wrapper"],[1,"my-profile-skills-blank-slate-button",3,"label","ariaLabel","ariaHasPopup","trigger"]],template:function(e,t){if(1&e&&(c.jc(0,"div",0),c.dd(1,sx,5,6,"ng-container",1),c.wc(2,"async"),c.dd(3,nx,8,13,"ng-template",null,2,c.ed),c.ec(5,"lrn-my-profile-skills-edit-occupation-dialog",null,3),c.ec(7,"lrn-my-profile-skills-add-skill-dialog",4,5),c.wc(9,"async"),c.ec(10,"lrn-my-profile-skills-rate-skill-dialog",null,6),c.ec(12,"lrn-my-profile-skills-delete-skill-dialog",null,7),c.ic()),2&e){const e=c.Rc(4);c.Mb(1),c.Dc("ngIf",c.xc(2,3,t.userIsProfiled$))("ngIfElse",e),c.Mb(6),c.Dc("maxAssignableSkills",c.xc(9,5,t.remainingAssignableSkills$))}},directives:[Ae.p,sI,PI,jI,NI,b.B,Ae.n,b.G,Ae.o,b.fd,b.db,b.Ec,b.s,b.v,b.o,b.F],pipes:[Ae.b,E.b,UI],styles:["lrn-my-profile-skills .my-profile-skills-occupation{padding:1.5rem;padding:var(--ui-spacing-md);border-bottom:.06rem solid #e4e6e5;border-bottom:solid var(--ui-size-border-xs) var(--ui-color-border-neutral)}lrn-my-profile-skills .my-profile-skills-occupation-title{margin-top:.25rem;margin-top:var(--ui-spacing-tiny)}lrn-my-profile-skills .my-profile-skills-occupation-edit{margin-top:.75rem;margin-top:var(--ui-spacing-xs)}lrn-my-profile-skills .my-profile-skills-suggestions{padding:1rem 0;padding:var(--ui-spacing-sm) 0}lrn-my-profile-skills .my-profile-skills-suggestions-title{display:flex;align-items:center}lrn-my-profile-skills .my-profile-skills-suggestions-title .my-profile-skills-suggestions-title-icon{padding-left:.25rem;padding-left:var(--ui-spacing-tiny)}[dir=rtl] lrn-my-profile-skills .my-profile-skills-suggestions-title .my-profile-skills-suggestions-title-icon{padding-left:0;padding-right:.25rem;padding-right:var(--ui-spacing-tiny)}lrn-my-profile-skills .my-profile-skills-suggestions-subtitle{padding-bottom:.5rem;padding-bottom:var(--ui-spacing-xxs)}lrn-my-profile-skills .my-profile-skills-suggestions-list-spinner{width:100%;height:37px;display:flex;justify-content:center;align-items:center}lrn-my-profile-skills .my-profile-skills-suggestions-list-item{display:inline-block;margin:.5rem .5rem 0 0;margin:var(--ui-spacing-xxs) var(--ui-spacing-xxs) 0 0;cursor:pointer}[dir=rtl] lrn-my-profile-skills .my-profile-skills-suggestions-list-item{margin:.5rem 0 0 .5rem;margin:var(--ui-spacing-xxs) 0 0 var(--ui-spacing-xxs)}lrn-my-profile-skills .my-profile-skills-suggestions-list-item-disable{display:inline-block;margin:.5rem .5rem 0 0;margin:var(--ui-spacing-xxs) var(--ui-spacing-xxs) 0 0;cursor:not-allowed}[dir=rtl] lrn-my-profile-skills .my-profile-skills-suggestions-list-item-disable{margin:.5rem 0 0 .5rem;margin:var(--ui-spacing-xxs) 0 0 var(--ui-spacing-xxs)}lrn-my-profile-skills .my-profile-skills-notification-inline-wrapper{padding:.5rem 0 1.5rem;padding:var(--ui-spacing-xxs) 0 var(--ui-spacing-md) 0}lrn-my-profile-skills .my-profile-skills-reached-wrapper{margin-bottom:.5rem;margin-bottom:var(--ui-spacing-xxs)}lrn-my-profile-skills .my-profile-skills-assigned{position:relative;padding:1.5rem 1.5rem 0;padding:var(--ui-spacing-md) var(--ui-spacing-md) 0 var(--ui-spacing-md)}lrn-my-profile-skills .my-profile-skills-assigned.max-skills-assigned .my-profile-skills-assigned-title{padding-bottom:.75rem;padding-bottom:var(--ui-spacing-xs)}lrn-my-profile-skills .my-profile-skills-assigned-add-skills{position:absolute;top:1.5rem;top:var(--ui-spacing-md);right:1.5rem;right:var(--ui-spacing-md)}[dir=rtl] lrn-my-profile-skills .my-profile-skills-assigned-add-skills{right:auto;left:1.5rem;left:var(--ui-spacing-md)}lrn-my-profile-skills .my-profile-skills-item-disable{cursor:default;opacity:var(--ui-opacity-middle)}lrn-my-profile-skills .my-profile-skills-assigned-list-item{display:flex;align-items:center;padding:.75rem 0;padding:var(--ui-spacing-xs) 0}lrn-my-profile-skills .my-profile-skills-assigned-list-item-subtitle{margin-top:.13rem;margin-top:var(--ui-spacing-micro)}lrn-my-profile-skills .my-profile-skills-assigned-list-item-actions{margin-left:auto}[dir=rtl] lrn-my-profile-skills .my-profile-skills-assigned-list-item-actions{margin-left:unset;margin-right:auto}lrn-my-profile-skills .my-profile-skills-blank-slate-wrapper{display:block;padding:2rem 0;padding:var(--ui-spacing-lg) 0}lrn-my-profile-skills .my-profile-skills-blank-slate-button-wrapper{text-align:center;margin-top:1.5rem;margin-top:var(--ui-spacing-md)}"],encapsulation:2,changeDetection:0}),e})();const ox={orderHistoryTitle:Je.a.t("ecommerce","Order History"),orderHistorySubtitle:Je.a.t("ecommerce","Click on the link to manage your orders"),orderHistoryLinkText:Je.a.t("ecommerce","Go to Order History Page"),subscriptionsTitle:Je.a.t("standard","Subscriptions"),subscriptionsSubtitle:Je.a.t("ecommerce","Click on the link to manage your subscriptions"),subscriptionsLinkText:Je.a.t("ecommerce","Go to Subscription Page")};var rx=i("QYwl");let cx=(()=>{class e{constructor(){this.dictionary=ox}ngOnInit(){this.externalUrls$=this.getExternalUrls()}getExternalUrls(){return Object(xi.a)({history:k.c.getInstance().order_history_page,subscriptions:k.c.getInstance().subscription_page})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile-external-ecommerce"]],decls:26,vars:30,consts:[["role","heading","aria-level","4",1,"ui-typography-heading-4"],[1,"ui-typography-subtitle","ui-color-typography-secondary"],[1,"section-content"],["targetBlank","",3,"targetBlankLinkTitle","href"]],template:function(e,t){if(1&e&&(c.jc(0,"section"),c.jc(1,"div",0),c.fd(2),c.wc(3,"t"),c.ic(),c.jc(4,"div",1),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"p",2),c.jc(8,"a",3),c.wc(9,"t"),c.wc(10,"async"),c.fd(11),c.wc(12,"t"),c.ic(),c.ic(),c.ic(),c.jc(13,"section"),c.jc(14,"div",0),c.fd(15),c.wc(16,"t"),c.ic(),c.jc(17,"div",1),c.fd(18),c.wc(19,"t"),c.ic(),c.jc(20,"p",2),c.jc(21,"a",3),c.wc(22,"t"),c.wc(23,"async"),c.fd(24),c.wc(25,"t"),c.ic(),c.ic(),c.ic()),2&e){let e=null,i=null;c.Mb(2),c.hd(" ",c.xc(3,10,t.dictionary.orderHistoryTitle)," "),c.Mb(3),c.hd(" ",c.xc(6,12,t.dictionary.orderHistorySubtitle)," "),c.Mb(3),c.Dc("targetBlankLinkTitle",c.xc(9,14,t.dictionary.orderHistoryLinkText))("href",null==(e=c.xc(10,16,t.externalUrls$))?null:e.history,c.Xc),c.Mb(3),c.hd(" ",c.xc(12,18,t.dictionary.orderHistoryLinkText)," "),c.Mb(4),c.hd(" ",c.xc(16,20,t.dictionary.subscriptionsTitle)," "),c.Mb(3),c.hd(" ",c.xc(19,22,t.dictionary.subscriptionsSubtitle)," "),c.Mb(3),c.Dc("targetBlankLinkTitle",c.xc(22,24,t.dictionary.subscriptionsLinkText))("href",null==(i=c.xc(23,26,t.externalUrls$))?null:i.subscriptions,c.Xc),c.Mb(3),c.hd(" ",c.xc(25,28,t.dictionary.subscriptionsLinkText)," ")}},directives:[rx.a],pipes:[E.b,Ae.b],styles:["lrn-my-profile-external-ecommerce section{padding:var(--ui-spacing-md)}lrn-my-profile-external-ecommerce section:not(:first-child){border-top:var(--ui-size-border-xs) solid var(--ui-color-border-neutral)}lrn-my-profile-external-ecommerce .section-content{padding-top:var(--ui-spacing-sm)}"],encapsulation:2,changeDetection:0}),e})();const lx=["uiTabsVerticalComponent"],dx=["personalInfoComponent"],ux=["conditionsOfUseComponent"],hx=["preferencesComponent"],px=["changePasswordComponent"],mx=["contentPartnersComponent"],gx=["skillsComponent"],bx=["authenticatorComponent"],fx=["externalEcommerceComponent"];function vx(e,t){1&e&&c.ec(0,"lrn-my-profile-personal-info",null,7)}function _x(e,t){1&e&&c.ec(0,"lrn-my-profile-change-password",null,8)}function wx(e,t){if(1&e&&(c.jc(0,"ui-tab-vertical",4),c.wc(1,"t"),c.jc(2,"ui-tab-vertical-header"),c.jc(3,"ui-tab-vertical-title"),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"ui-tab-vertical-description"),c.fd(7),c.wc(8,"t"),c.ic(),c.ic(),c.jc(9,"ui-tab-vertical-content"),c.dd(10,_x,2,0,"lrn-my-profile-change-password",5),c.ic(),c.ic()),2&e){c.vc();const e=c.Rc(2),t=c.vc();c.Dc("error",t.tabs.changePassword.showErrors)("tabName",t.tabs.changePassword.id)("title",c.xc(1,6,t.dictionary.changePassword.title)),c.Mb(4),c.hd(" ",c.xc(5,8,t.dictionary.changePassword.title)," "),c.Mb(3),c.hd(" ",c.xc(8,10,t.dictionary.changePassword.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.changePassword.id)}}function yx(e,t){1&e&&c.ec(0,"lrn-my-profile-preferences",null,9)}function Cx(e,t){if(1&e&&(c.jc(0,"ui-tab-vertical",4),c.wc(1,"t"),c.jc(2,"ui-tab-vertical-header"),c.jc(3,"ui-tab-vertical-title"),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"ui-tab-vertical-description"),c.fd(7),c.wc(8,"t"),c.ic(),c.ic(),c.jc(9,"ui-tab-vertical-content"),c.dd(10,yx,2,0,"lrn-my-profile-preferences",5),c.ic(),c.ic()),2&e){c.vc();const e=c.Rc(2),t=c.vc();c.Dc("error",t.tabs.preferences.showErrors)("tabName",t.tabs.preferences.id)("title",c.xc(1,6,t.dictionary.preferences.title)),c.Mb(4),c.hd(" ",c.xc(5,8,t.dictionary.preferences.title)," "),c.Mb(3),c.hd(" ",c.xc(8,10,t.dictionary.preferences.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.preferences.id)}}function Sx(e,t){1&e&&c.ec(0,"lrn-my-profile-authenticator-app",null,10)}function Tx(e,t){if(1&e&&(c.jc(0,"ui-tab-vertical",4),c.wc(1,"t"),c.jc(2,"ui-tab-vertical-header"),c.jc(3,"ui-tab-vertical-title"),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"ui-tab-vertical-description"),c.fd(7),c.wc(8,"t"),c.ic(),c.ic(),c.jc(9,"ui-tab-vertical-content"),c.dd(10,Sx,2,0,"lrn-my-profile-authenticator-app",5),c.ic(),c.ic()),2&e){c.vc();const e=c.Rc(2),t=c.vc();c.Dc("error",t.tabs.authenticatorApp.showErrors)("tabName",t.tabs.authenticatorApp.id)("title",c.xc(1,6,t.dictionaryAuthenticatorApp.authenticatorApp.title)),c.Mb(4),c.hd(" ",c.xc(5,8,t.dictionaryAuthenticatorApp.authenticatorApp.title)," "),c.Mb(3),c.hd(" ",c.xc(8,10,t.dictionaryAuthenticatorApp.authenticatorApp.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.authenticatorApp.id)}}function kx(e,t){1&e&&c.ec(0,"lrn-my-profile-content-partners",null,12)}function Ix(e,t){if(1&e){const e=c.kc();c.jc(0,"ui-tab-vertical",4),c.wc(1,"t"),c.jc(2,"ui-tab-vertical-header"),c.jc(3,"ui-tab-vertical-title"),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"ui-tab-vertical-description"),c.fd(7),c.wc(8,"t"),c.ic(),c.jc(9,"ui-tab-vertical-action"),c.jc(10,"ui-button-text",11),c.rc("trigger",function(){return c.Uc(e),c.vc(2).contentPartnersComponent.addAffiliateCodeDialog.show()}),c.wc(11,"t"),c.ic(),c.ic(),c.ic(),c.jc(12,"ui-tab-vertical-content"),c.dd(13,kx,2,0,"lrn-my-profile-content-partners",5),c.ic(),c.ic()}if(2&e){c.vc();const e=c.Rc(2),t=c.vc();c.Dc("error",t.tabs.contentPartnersApp.showErrors)("tabName",t.tabs.contentPartnersApp.id)("title",c.xc(1,7,t.dictionary.contentPartnersApp.title)),c.Mb(4),c.hd(" ",c.xc(5,9,t.dictionary.contentPartnersApp.title)," "),c.Mb(3),c.hd(" ",c.xc(8,11,t.dictionary.contentPartnersApp.description)," "),c.Mb(3),c.Dc("label",c.xc(11,13,t.dictionary.contentPartnersApp.addCode)),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.contentPartnersApp.id)}}function xx(e,t){if(1&e&&c.ec(0,"lrn-my-profile-conditions-of-use",14,15),2&e){const e=c.vc(3);c.Dc("privacyPolicyMustAccepted",e.privacyPolicyMustAccepted)("termsAndConditionsMustAccepted",e.termsAndConditionsMustAccepted)}}function Dx(e,t){if(1&e&&(c.jc(0,"ui-tab-vertical",4),c.wc(1,"t"),c.jc(2,"ui-tab-vertical-header"),c.jc(3,"ui-tab-vertical-title"),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"ui-tab-vertical-description"),c.fd(7),c.wc(8,"t"),c.ic(),c.ic(),c.jc(9,"ui-tab-vertical-content"),c.dd(10,xx,2,2,"lrn-my-profile-conditions-of-use",13),c.ic(),c.ic()),2&e){c.vc();const e=c.Rc(2),t=c.vc();c.Dc("error",t.tabs.conditionsOfUse.showErrors)("tabName",t.tabs.conditionsOfUse.id)("title",c.xc(1,6,t.dictionary.conditionsOfUse.title)),c.Mb(4),c.hd(" ",c.xc(5,8,t.dictionary.conditionsOfUse.title)," "),c.Mb(3),c.hd(" ",c.xc(8,10,t.dictionary.conditionsOfUse.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.conditionsOfUse.id)}}function Ox(e,t){if(1&e&&(c.ec(0,"lrn-my-profile-skills",17,18),c.wc(2,"async")),2&e){const e=c.vc(3);c.Dc("editMode",c.xc(2,1,e.skillsEditMode$))}}function Ex(e,t){if(1&e&&(c.jc(0,"ui-tab-vertical",4),c.wc(1,"t"),c.jc(2,"ui-tab-vertical-header"),c.jc(3,"ui-tab-vertical-title"),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"ui-tab-vertical-description"),c.fd(7),c.wc(8,"t"),c.ic(),c.ic(),c.jc(9,"ui-tab-vertical-content"),c.dd(10,Ox,3,3,"lrn-my-profile-skills",16),c.ic(),c.ic()),2&e){c.vc();const e=c.Rc(2),t=c.vc();c.Dc("error",t.tabs.skills.showErrors)("tabName",t.tabs.skills.id)("title",c.xc(1,6,t.dictionary.skills.title)),c.Mb(4),c.hd(" ",c.xc(5,8,t.dictionary.skills.title)," "),c.Mb(3),c.hd(" ",c.xc(8,10,t.dictionary.skills.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.skills.id)}}function Px(e,t){1&e&&c.ec(0,"lrn-my-profile-external-ecommerce",null,19)}function Mx(e,t){if(1&e&&(c.jc(0,"ui-tab-vertical",4),c.wc(1,"t"),c.jc(2,"ui-tab-vertical-header"),c.jc(3,"ui-tab-vertical-title"),c.fd(4),c.wc(5,"t"),c.ic(),c.jc(6,"ui-tab-vertical-description"),c.fd(7),c.wc(8,"t"),c.ic(),c.ic(),c.jc(9,"ui-tab-vertical-content"),c.dd(10,Px,2,0,"lrn-my-profile-external-ecommerce",5),c.ic(),c.ic()),2&e){c.vc();const e=c.Rc(2),t=c.vc();c.Dc("error",t.tabs.externalEcommerce.showErrors)("tabName",t.tabs.externalEcommerce.id)("title",c.xc(1,6,t.dictionary.externalEcommerce.title)),c.Mb(4),c.hd(" ",c.xc(5,8,t.dictionary.externalEcommerce.title)," "),c.Mb(3),c.hd(" ",c.xc(8,10,t.dictionary.externalEcommerce.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.externalEcommerce.id)}}function Ax(e,t){if(1&e){const e=c.kc();c.jc(0,"div",1),c.jc(1,"ui-tabs-vertical",2,3),c.rc("changeTab",function(t){return c.Uc(e),c.vc().onChangeTab(t)}),c.wc(3,"async"),c.wc(4,"t"),c.wc(5,"t"),c.jc(6,"ui-tab-vertical",4),c.wc(7,"t"),c.jc(8,"ui-tab-vertical-header"),c.jc(9,"ui-tab-vertical-title"),c.fd(10),c.wc(11,"t"),c.ic(),c.jc(12,"ui-tab-vertical-description"),c.fd(13),c.wc(14,"t"),c.ic(),c.ic(),c.jc(15,"ui-tab-vertical-content"),c.dd(16,vx,2,0,"lrn-my-profile-personal-info",5),c.ic(),c.ic(),c.dd(17,wx,11,12,"ui-tab-vertical",6),c.dd(18,Cx,11,12,"ui-tab-vertical",6),c.dd(19,Tx,11,12,"ui-tab-vertical",6),c.dd(20,Ix,14,15,"ui-tab-vertical",6),c.dd(21,Dx,11,12,"ui-tab-vertical",6),c.dd(22,Ex,11,12,"ui-tab-vertical",6),c.wc(23,"async"),c.dd(24,Mx,11,12,"ui-tab-vertical",6),c.ic(),c.ic()}if(2&e){const e=c.Rc(2),t=c.vc();c.Vb("error-notification-visible",t.errorNotification.show),c.Mb(1),c.Dc("renderOnlyActiveContent",!0)("activeTab",c.xc(3,19,t.activeTab$))("menuLabel",c.xc(4,21,t.dictionary.menu))("navigationAriaLabel",c.xc(5,23,t.dictionary.myProfileMenu)),c.Mb(5),c.Dc("error",t.tabs.personalInfo.showErrors)("tabName",t.tabs.personalInfo.id)("title",c.xc(7,25,t.dictionary.personalInfo.title)),c.Mb(4),c.hd(" ",c.xc(11,27,t.dictionary.personalInfo.title)," "),c.Mb(3),c.hd(" ",c.xc(14,29,t.dictionary.personalInfo.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.personalInfo.id),c.Mb(1),c.Dc("ngIf",t.showChangePasswordTab),c.Mb(1),c.Dc("ngIf",t.showPreferencesTab),c.Mb(1),c.Dc("ngIf",t.showTabAuthenticator),c.Mb(1),c.Dc("ngIf",t.showContentPartnersTab),c.Mb(1),c.Dc("ngIf",t.privacyPolicyMustAccepted||t.termsAndConditionsMustAccepted),c.Mb(1),c.Dc("ngIf",c.xc(23,31,t.showSkillsTab$)),c.Mb(2),c.Dc("ngIf",t.showExternalEcommerceTab)}}let Lx=(()=>{class e{constructor(e,t,i,s,n,a,o,r,c){this._docLayoutService=e,this._pageService=t,this._myProfileService=i,this._toggleService=s,this._activatedRoute=n,this._myProfileSkillsService=a,this._translationService=o,this._location=r,this._router=c,this.activeTab$=new Pe.a(""),this.dictionary=rT.a,this.dictionaryAuthenticatorApp=oT,this.tabs=cT.c,this.platformSettings=k.b.getInstance().settings,this.privacyPolicyMustAccepted=!1,this.termsAndConditionsMustAccepted=!1,this.errorNotification={title:null,message:null,show:!1},this.showContentPartnersTab=k.b.getInstance().isPluginActive("ContentPartnersApp"),this.showChangePasswordTab=this._myProfileService.isChangePasswordAllowed(),this.showPreferencesTab=!0,this.showExternalEcommerceTab=!1,this.showSkillsTab$=new Pe.a(!1),this.skillsEditMode$=new Pe.a(lT.d.COMPLETE),this.translationServiceReady=!1,this._session=k.c.getInstance(),this._hasSkillsRouteParam=!1,this._personalInfoDirty=!1,this._passwordFormDirty=!1,this._preferencesFormDirty=!1,this._conditionsOfUseComponentDirty=!1,this._authenticatorFormDirty=!1,this._ngUnsubscribe$=new gt.a,this._isSkillsToggleOn$=this._myProfileSkillsService.isSkillsToggleOn$,this._myProfileSkillsService.isSkillsToggleOn$.next(this._toggleService.isOn(u.f.TOGGLE_SKILLS_PHASE_1_1)),this._activatedRoute.params.pipe(Object(ee.a)(1)).subscribe(e=>{this._hasSkillsRouteParam=!!e.improvementAreas,e.password&&this.activeTab$.next(this.tabs.changePassword.id)}),this._translationService.whenReady().pipe(Object(nT.a)(e=>e)).subscribe(()=>{this.translationServiceReady=!0})}ngOnInit(){this._pageService.ready().pipe(Object(ee.a)(1)).subscribe(()=>{this._setHeaderTitle()}),this._checkPreferencesTabVisibility(),this.showTabAuthenticator=this._isAuthenticatorEnabled(),this.privacyPolicyMustAccepted=this.platformSettings.registration_settings.options.privacy_policy,this.termsAndConditionsMustAccepted=this.platformSettings.registration_settings.options.terms_and_conditions,this._checkSkillsTabVisibility(),this.showExternalEcommerceTab=this._isExternalEcommerceTabVisible()}ngAfterViewInit(){this._isPreferencesFragmentSet()}ngOnDestroy(){this._ngUnsubscribe$.next(),this._ngUnsubscribe$.complete(),this._myProfileSkillsService.resetServiceSkillsState()}onChangeTab(e){this.isFormDirty()?this._showLeavingDialog(e):e.next(!0)}saveChanges(){switch(this.uiTabsVerticalComponent.activeTab){case this.tabs.personalInfo.id:return this.personalInfoComponent.submitForm();case this.tabs.changePassword.id:return this.changePasswordComponent.updatePassword();case this.tabs.preferences.id:return this.preferencesComponent.savePreferences();case this.tabs.authenticatorApp.id:return this.authenticatorComponent.pairApp();case this.tabs.conditionsOfUse.id:return this.conditionsOfUseComponent.saveChanges()}}isFormDirty(){switch(this.uiTabsVerticalComponent.activeTab){case this.tabs.personalInfo.id:return this._personalInfoDirty=this._isPersonalInfoFormDirty(),this._personalInfoDirty;case this.tabs.changePassword.id:return this._passwordFormDirty=this._isPasswordFormDirty(),this._passwordFormDirty;case this.tabs.preferences.id:return this._preferencesFormDirty=this.preferencesComponent.isFormDirty(),this._preferencesFormDirty;case this.tabs.authenticatorApp.id:return this._authenticatorFormDirty=this.authenticatorComponent.isFormDirty(),this._authenticatorFormDirty;case this.tabs.conditionsOfUse.id:return this._conditionsOfUseComponentDirty=this.conditionsOfUseComponent.isFormDirty(),this._conditionsOfUseComponentDirty}return!1}_discardChanges(){switch(this.uiTabsVerticalComponent.activeTab){case this.tabs.personalInfo.id:this.personalInfoComponent.totalErrorsForm=0,this.personalInfoComponent.setFormValue(),this.personalInfoComponent.getAdditionalFields();break;case this.tabs.changePassword.id:this.changePasswordComponent.passwordChangeErrorsCount=0,this.changePasswordComponent.formComponent.passwordChangeFormGroup.reset();break;case this.tabs.preferences.id:this._toggleService.isOn(u.f.TOGGLE_MY_PROFILE_DATE_FORMAT_SELECTION)||this.preferencesComponent.changeLanguage(k.c.getInstance().language),this.preferencesComponent.setInputValue();break;case this.tabs.authenticatorApp.id:this.authenticatorComponent.controlOtp=!0,this.authenticatorComponent.authenticatorAppForm.reset();break;case this.tabs.conditionsOfUse.id:this.conditionsOfUseComponent.ngOnInit(),void 0!==this.conditionsOfUseComponent.policies&&this.conditionsOfUseComponent.policies.ngOnInit(),void 0!==this.conditionsOfUseComponent.termsAndConditions&&this.conditionsOfUseComponent.termsAndConditions.ngOnInit()}}_markFormsAsPristine(){switch(this.uiTabsVerticalComponent.activeTab){case this.tabs.personalInfo.id:this.personalInfoComponent.markFormAsPristine();break;case this.tabs.changePassword.id:this.changePasswordComponent.markFormAsPristine();break;case this.tabs.preferences.id:this.preferencesComponent.markFormAsPristine();break;case this.tabs.conditionsOfUse.id:this.conditionsOfUseComponent.markFormAsPristine()}}_isAuthenticatorEnabled(){const e=k.b.getInstance().getPluginSettings("EsignatureApp");return e&&e.enabled&&e.auth_types.filter(e=>"authenticatorapp"===e.type&&e.enabled).length}_checkPreferencesTabVisibility(){(this._toggleService.isOn(u.f.TOGGLE_HIDE_MY_PROFILE_PREFERENCES_AND_TIMEZONE_MODAL)?this.platformSettings.hide_preferences_tab:this.platformSettings.allow_only_password_change)&&!this._session.isCurrentUserA(k.c.LEVEL_SUPERADMIN)&&(this.showPreferencesTab=!1)}_setHeaderTitle(){this._docLayoutService.header.showTitleBar({title:this.dictionary.titleBar,fullWidth:!0})}_checkSkillsTabVisibility(){var e;Object(Gt.a)([this._isSkillsToggleOn$.value?Object(xi.a)(null===(e=k.c.getInstance().skills)||void 0===e?void 0:e.atLeastOneAIChannelIsVisible):Object(xi.a)(void 0!==k.c.getInstance().objectives),this._isSkillsToggleOn$.value?this._myProfileSkillsService.hasPlatformAvailableSkills():Object(xi.a)(!0),Object(xi.a)(k.b.getInstance().settings.skills_third_party_enabled)]).pipe(Object(ee.a)(1)).subscribe(([e,t,i])=>{var s,n,a;e&&!i&&(t||Boolean(null===(s=k.c.getInstance().skills)||void 0===s?void 0:s.userIsProfiled)||Boolean(null===(a=null===(n=k.c.getInstance().objectives)||void 0===n?void 0:n.areasOfImprovement)||void 0===a?void 0:a.length))&&(this.showSkillsTab$.next(!0),setTimeout(()=>{this._hasSkillsRouteParam&&this.activeTab$.next(this.tabs.skills.id)})),this.skillsEditMode$.next(t?lT.d.COMPLETE:lT.d.DELETE_ONLY)})}_isExternalEcommerceTabVisible(){return this._toggleService.isOn(u.f.TOGGLE_EXTERNAL_ECOMMERCE)&&k.c.getInstance().has_external_cart}_showLeavingDialog(e){this._docLayoutService.dialog.showCommonDialog({title:this.dictionary.leavingDialog.title,content:this.dictionary.leavingDialog.content,actions:[{id:"cancel",type:"neutral",label:this.dictionary.leavingDialog.actions.cancel,slot:"start"},{id:"discard-changes",type:"neutral",label:this.dictionary.leavingDialog.actions.discard,slot:"end"},{id:"save-changes",type:"positive",label:this.dictionary.leavingDialog.actions.save,slot:"end"}]}).subscribe(t=>{switch(t.actionID){case"cancel":e.next(!1),t.actionSuccess.next(!0);break;case"discard-changes":this._markFormsAsPristine(),this._discardChanges(),e.next(!0),t.actionSuccess.next(!0);break;case"save-changes":this.saveChanges().pipe(Object(aT.a)(1),Object(bt.a)(this._ngUnsubscribe$)).subscribe(i=>{e.next(i),t.actionSuccess.next(!0)},()=>{e.next(!1),t.actionSuccess.next(!0)})}})}_isPersonalInfoFormDirty(){return Object.keys(this.personalInfoComponent.personalInfoGroup.controls).some(e=>this.personalInfoComponent.personalInfoGroup.controls[e].dirty)||this.personalInfoComponent.additionalFields.some(e=>e.formControl.dirty)}_isPasswordFormDirty(){return Object.keys(this.changePasswordComponent.formComponent.passwordChangeFormGroup.controls).some(e=>this.changePasswordComponent.formComponent.passwordChangeFormGroup.controls[e].dirty)}_isPreferencesFragmentSet(){if(this._toggleService.isOn(u.f.TOGGLE_HIDE_MY_PROFILE_PREFERENCES_AND_TIMEZONE_MODAL)&&this.tabs.preferences.id===this._activatedRoute.snapshot.fragment){this.activeTab$.next(this.tabs.preferences.id);const e=this._router.createUrlTree([{}],{relativeTo:this._activatedRoute}).toString();this._location.replaceState(e)}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(M.a),c.dc(u.c),c.dc(dT.a),c.dc(u.g),c.dc(s.a),c.dc(uT),c.dc(u.h),c.dc(Ae.k),c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-my-profile"]],viewQuery:function(e,t){if(1&e&&(c.md(lx,1),c.md(dx,1),c.md(ux,1),c.md(hx,1),c.md(px,1),c.md(mx,1),c.md(gx,1),c.md(bx,1),c.md(fx,1)),2&e){let e;c.Qc(e=c.sc())&&(t.uiTabsVerticalComponent=e.first),c.Qc(e=c.sc())&&(t.personalInfoComponent=e.first),c.Qc(e=c.sc())&&(t.conditionsOfUseComponent=e.first),c.Qc(e=c.sc())&&(t.preferencesComponent=e.first),c.Qc(e=c.sc())&&(t.changePasswordComponent=e.first),c.Qc(e=c.sc())&&(t.contentPartnersComponent=e.first),c.Qc(e=c.sc())&&(t.skillsComponent=e.first),c.Qc(e=c.sc())&&(t.authenticatorComponent=e.first),c.Qc(e=c.sc())&&(t.ecommerceComponent=e.first)}},hostAttrs:[1,"lrn-my-profile"],decls:1,vars:1,consts:[["class","launcher-details-tabs",3,"error-notification-visible",4,"ngIf"],[1,"launcher-details-tabs"],[3,"renderOnlyActiveContent","activeTab","menuLabel","navigationAriaLabel","changeTab"],["uiTabsVerticalComponent",""],[3,"error","tabName","title"],[4,"ngIf"],[3,"error","tabName","title",4,"ngIf"],["personalInfoComponent",""],["changePasswordComponent",""],["preferencesComponent",""],["authenticatorComponent",""],["color","accent","iconName","add-element",1,"add-affiliate-code-button",3,"label","trigger"],["contentPartnersComponent",""],[3,"privacyPolicyMustAccepted","termsAndConditionsMustAccepted",4,"ngIf"],[3,"privacyPolicyMustAccepted","termsAndConditionsMustAccepted"],["conditionsOfUseComponent",""],[3,"editMode",4,"ngIf"],[3,"editMode"],["skillsComponent",""],["externalEcommerceComponent",""]],template:function(e,t){1&e&&c.dd(0,Ax,25,33,"div",0),2&e&&c.Dc("ngIf",t.translationServiceReady)},directives:[Ae.p,b.yd,b.nd,b.qd,b.rd,b.pd,b.od,DT,$T,nk,Ek,b.md,b.G,zk,Qk,ax,cx],pipes:[Ae.b,E.b],styles:["lrn-my-profile .launcher-details-tabs{margin:0 0 90px}lrn-my-profile .launcher-details-tabs.error-notification-visible{margin-top:0}lrn-my-profile .font-custom{font-weight:600;font-weight:var(--ui-typography-weight-semibold)}lrn-my-profile .title-text{font-size:1rem;font-size:var(--ui-typography-size-md)}lrn-my-profile .border{border-bottom:solid var(--ui-size-border-xs) var(--ui-color-border-neutral)}lrn-my-profile .container{display:flex}lrn-my-profile .direction{flex-direction:column}lrn-my-profile .detail-description{font-size:.75rem;font-size:var(--ui-typography-size-xs);line-height:1.25rem;line-height:var(--ui-typography-lineheight-sm)}lrn-my-profile .spinner-loading{padding:var(--ui-spacing-md) 0;display:flex;justify-content:center;align-items:center}lrn-my-profile .btn-select-img{padding-top:1rem;padding-top:var(--ui-spacing-sm)}lrn-my-profile .tab-footer{padding:var(--ui-spacing-md) 0}lrn-my-profile .details{margin:.75rem 0;margin:var(--ui-spacing-xs) 0}lrn-my-profile .add-affiliate-code-button{margin:0 var(--ui-spacing-xs)}@media (min-width:600px){lrn-my-profile .launcher-details-tabs{margin-top:2.5rem;margin-top:var(--ui-spacing-xl)}}doc-shared-dialog-body .space-notification-dialog{margin-botom:24px}doc-shared-dialog-body .not-checked{color:#cf000f;color:var(--ui-color-typography-error)}"],encapsulation:2}),e})();const jx=["newMyProfileComponent"],Fx=function(){return["png","jpg","jpeg","gif"]},Rx=function(e,t){return{size:"70",bg_color_class:"bg-blue",text_color_class:"text-white",icon_class:"zmdi zmdi-account",initials:e,uploadSuccess:t}},Nx=function(){return{category:"standard"}};function Ux(e,t){if(1&e){const e=c.kc();c.jc(0,"div",2),c.jc(1,"div",3),c.jc(2,"div",4),c.jc(3,"single-upload",5),c.rc("uploaded",function(t){return c.Uc(e),c.vc().onUploaded(t)})("reset",function(t){return c.Uc(e),c.vc().onReset(t)})("failed",function(t){return c.Uc(e),c.vc().onFailedUpload(t)}),c.ic(),c.jc(4,"span",6),c.jc(5,"span",7),c.fd(6),c.ic(),c.jc(7,"span",8),c.jc(8,"div",9),c.jc(9,"span",10),c.fd(10),c.wc(11,"t"),c.ic(),c.fd(12),c.wc(13,"t"),c.ic(),c.jc(14,"div",11),c.jc(15,"span",10),c.fd(16),c.wc(17,"t"),c.ic(),c.fd(18),c.ic(),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(19,"div",12),c.ec(20,"accordion",13),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(3),c.ad("avatar"),c.Dc("allowed_extensions",c.Hc(22,Fx))("max_file_size",40)("collection","avatar")("avatarOptions",c.Jc(23,Rx,e.initials,e.uploadSuccessCallback))("inputFormControl",e.myProfileAvatar.controls.avatar),c.Mb(3),c.gd(e.fullName),c.Mb(4),c.hd("",c.yc(11,15,"_LEVEL",c.Hc(26,Nx)),":"),c.Mb(2),c.hd(" ",c.xc(13,18,e.showLevel()),""),c.Mb(4),c.hd("",c.xc(17,20,"_EMAIL"),":"),c.Mb(2),c.hd(" ",e.eMail,""),c.Mb(2),c.Dc("type",e.accordionParams.type)("title",e.accordionParams.title)("panels",e.accordionParams.panels)}}function qx(e,t){1&e&&c.ec(0,"lrn-my-profile",null,14)}let zx=(()=>{class e{constructor(e,t,i,s,n,a){this.activatedRoute=e,this.backendService=t,this.router=i,this.docLayoutService=s,this.skillsUserService=n,this.toggleService=a,this.panels=[],this.uploadSuccessCallback=new gt.a,this.eSignatureSettings=x.b.getInstance().getPluginSettings("EsignatureApp"),this.isESignatureAppEnabled=this.eSignatureSettings&&this.eSignatureSettings.enabled,this.isAuthenticatorAppEnabled=!1,this.authenticatorAppPanel=!1,this.subscriptions=new Jt.a,this.activatedRoute.params.forEach(e=>{this.user_details=e.user_details,this.password=e.password,this.preferences=e.preferences,this.improvementAreasParam=e.improvementAreas,this.authenticatorAppPanel=e.authenticatorApp}),this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Si.a.myProfile,href:this.router.url}]),this.myProfileAvatar=new Ke.h({avatar:new Ke.e("")}),this.isAuthenticatorAppEnabled=this.isESignatureAppEnabled&&this.eSignatureSettings.auth_types.filter(e=>"authenticatorapp"===e.type&&e.enabled).length}init(){let e=!1,t=!1,i=!1,s=x.b.getInstance().settings.request_mandatory_fields_completion&&o.a.getInstance().has_unfilled_fields;void 0!==this.preferences&&(i=!0),(void 0!==this.user_details||s)&&(e=!0),void 0!==this.password&&(t=!0),this.PlatformInstance=x.b.getInstance(),this.myProfilePanel={title:E.a.t("menu_course","_PROFILE"),description:E.a.t("userprofile","Change your profile information, email, and other personal details"),content:{params:{},component:TS},active:e,opened:e},this.myPolicyPanel={title:E.a.t("standard","Privacy Policy"),description:E.a.t("userprofile","Manage your Privacy Policy preferences"),content:{params:{},component:HS},active:!1,opened:!1},this.myTermsConditionsPanel={title:E.a.t("standard","Terms & Conditions"),description:E.a.t("userprofile","Manage your Terms & Conditions preferences"),content:{params:{},component:iT},active:!1,opened:!1},this.myPasswordPanel={title:E.a.t("profile","_CHANGEPASSWORD"),description:E.a.t("userprofile","Change your password to access the LMS"),content:{params:{},component:US},active:t,opened:t},this.myAuthenticatorApp={title:E.a.t("esignature","Authenticator App"),description:E.a.t("esignature","Use the Authenticator app to get free verification codes, even if your phone is offline. Available for Android and iOS."),content:{params:{},component:gS},balloonParams:{style:eS.a.MAIN,width:290,position:"np-top-left",title:E.a.t("esignature","Authenticator App"),text:E.a.t("esignature","Configure an authenticator app to verify your identity in order to complete Eletronic Signature courses")},active:this.authenticatorAppPanel,opened:this.authenticatorAppPanel},this.preferencesPanel={title:E.a.t("userprofile","Preferences"),description:E.a.t("userprofile","Set your language and timezone preferences"),content:{params:{},component:XS},active:i,opened:i},this.partnersPanel={title:E.a.t("standard","Content Partners Affiliation"),description:E.a.t("standard","Affiliate codes will grant you a discount when buying courses from partners"),content:{params:{},component:FS},active:i,opened:i},this.improvementAreas={title:E.a.t("standard","My Areas of Interest"),description:E.a.t("standard","Select at least one area of interest, and self evaluate yourself on it"),content:{params:{},component:LS},balloonParams:{style:eS.a.MAIN,width:296,position:"np-top-left",title:E.a.t("standard","My Areas of Interest"),text:E.a.t("standard","Use this section to identify your activities in the company and to define the areas where you would like improve your knowledge with fresh content coming from the web, prepared for you every day.")},active:Boolean(this.improvementAreasParam),opened:Boolean(this.improvementAreasParam)};this.PlatformInstance.settings.allow_only_password_change&&!s||this.panels.push(this.myProfilePanel),s&&!o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)||o.a.getInstance().is_erp_admin||this.panels.push(this.myPasswordPanel),this.isAuthenticatorAppEnabled&&this.panels.push(this.myAuthenticatorApp),(!this.PlatformInstance.settings.allow_only_password_change&&!s||o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN))&&this.panels.push(this.preferencesPanel),this.PlatformInstance.isPluginActive("ContentPartnersApp")&&this.panels.push(this.partnersPanel),0!=this.PlatformInstance.policy_id&&void 0!==this.PlatformInstance.policy_id&&this.panels.push(this.myPolicyPanel);const n=this.toggleService.isOn(u.f.TOGGLE_SKILLS_PHASE_1_1)?this.skillsUserService.userHasAvailableSkills():Object(xi.a)(!0),a=Object(tS.a)([Object(xi.a)(typeof o.a.getInstance().objectives),n,Object(xi.a)(x.b.getInstance().settings.skills_third_party_enabled)]).subscribe(([e,t,i])=>{"undefined"!==e&&t&&!i&&this.panels.push(this.improvementAreas)});this.subscriptions.add(a),this.backendService.request("/manage/v1/termsandconditions/track","GET").subscribe(e=>{e.data.hasOwnProperty("tc")&&0!==this.PlatformInstance.tc_id&&void 0!==this.PlatformInstance.tc_id&&this.panels.push(this.myTermsConditionsPanel)}),this.accordionParams={type:"split",title:"",panels:this.panels}}setUserData(){this.sessionInstance=o.a.getInstance(),this.firstName=this.sessionInstance.firstname,this.lastName=this.sessionInstance.lastname,this.fullName=this.sessionInstance.getFullName(),this.eMail=this.sessionInstance.email,this.userLevel=this.sessionInstance.user_level.replace("_"," "),this.avatarUrl=this.sessionInstance.avatar_url,this.myProfileAvatar.controls.avatar.setValue(this.avatarUrl),this.initials=this.sessionInstance.user_initials}showLevel(){switch(this.sessionInstance.user_level){case"user":return E.a.t("standard","_USER");case"power_user":return E.a.t("standard","_PUBLIC_ADMIN_USER");case"super_admin":return E.a.t("standard","Super-admin users");default:return null}}ngOnInit(){this.activeToggleMyProfile=this.toggleService.isOn(u.f.TOGGLE_NEW_MY_PROFILE),this.activeToggleMyProfile||(this.init(),this.setUserData(),this.subscription=r.a.singleton.subscribe("UserSessionChange",e=>{let t=o.a.getInstance();this.fullName=t.getFullName(),this.initials=t.user_initials}))}onUploaded(e){this.backendService.changeUserInformation(this.myProfileAvatar.value,this.sessionInstance.id).subscribe(t=>{t.error||this.sessionInstance.setUserInfo({avatar:e.public_url})}),this.uploadSuccessCallback.next(!0)}onReset(e){this.backendService.changeUserInformation({avatar:""},this.sessionInstance.id).subscribe(e=>{e.error||this.sessionInstance.setUserInfo({avatar:""})})}onFailedUpload(e){this.uploadSuccessCallback.next(!1)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.subscriptions&&this.subscriptions.unsubscribe()}isFormDirty(){return!!this.activeToggleMyProfile&&this.newMyProfileComponent.isFormDirty()}saveChanges(){return this.activeToggleMyProfile?this.newMyProfileComponent.saveChanges():new Pe.a(!0)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.a),c.dc(S.a),c.dc(s.h),c.dc(M.a),c.dc(sT.a),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["my-profile"]],viewQuery:function(e,t){if(1&e&&c.md(jx,1),2&e){let e;c.Qc(e=c.sc())&&(t.newMyProfileComponent=e.first)}},decls:3,vars:2,consts:[["class","my-profile_wrapper",4,"ngIf","ngIfElse"],["newProfile",""],[1,"my-profile_wrapper"],[1,"my-profile__head","mdl-list","bg-white"],[1,"mdl-list__item","mdl-list__item--three-line"],[3,"allowed_extensions","max_file_size","collection","avatarOptions","inputFormControl","uploaded","reset","failed"],[1,"mdl-list__item-primary-content","myprofile-info"],[1,"name-field"],[1,"mdl-list__item-text-body","text-grey-light","form-labels"],[1,"user-role"],[1,"text-black"],[1,"user-email"],[1,"my-profile__body","mdl-list"],[3,"type","title","panels"],["newMyProfileComponent",""]],template:function(e,t){if(1&e&&(c.dd(0,Ux,21,27,"div",0),c.dd(1,qx,2,0,"ng-template",null,1,c.ed)),2&e){const e=c.Rc(2);c.Dc("ngIf",!t.activeToggleMyProfile)("ngIfElse",e)}},directives:[Ae.p,Pn.a,Ja.a,Lx],pipes:[E.b],styles:[".router-outlet:not(.direction-rtl):not(.heracles-root)   [_nghost-%COMP%]     single-upload{margin-right:30px}.router-outlet.direction-rtl:not(.heracles-root)   [_nghost-%COMP%]     single-upload{margin-left:30px}[_nghost-%COMP%]     single-upload .avatar{padding:0}[_nghost-%COMP%]     single-upload .avatar-clip{margin:0!important}"]}),e})(),Vx=(()=>{class e{constructor(e){this._router=e,this.labels={title:E.a.t("simplesaml","Your logout was successful"),subtitle:E.a.t("simplesaml","You can now re-enter inside the LMS or close this window"),button:E.a.t("simplesaml","Re-login")},this.buttonProperties={text:this.labels.button,colorScheme:"positive-green",typeStyle:"filled"}}ngOnInit(){this.background=x.b.getInstance().branding_elements.background?x.b.getInstance().branding_elements.background:{color:!1,image:"/public/images/core/def_login_bg.jpg",video:{url:!1,fallback_img:!1}},this.backgroundImage=this.background.video.url&&this.background.video.fallback_img?this.background.video.fallback_img:this.background.image&&!this.background.color?this.background.image:this.background.image||this.background.color?"":"/public/images/core/def_login_bg.jpg"}goToLoginPage(){this._router.navigate(["/"])}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["app-sso-logout"]],decls:14,vars:12,consts:[["internal-header","",1,"mdl-layout__header","mdl-layout__header--scroll","is-loaded"],["header",""],[1,"mdl-layout__content","minimal-login"],[1,"background"],[1,"logout-message","bg-grey-superlight"],[1,"text-bigger-icons"],[1,"text-small"],[3,"properties","click"],[1,"footer-guest","bg-white"]],template:function(e,t){1&e&&(c.ec(0,"header",0,1),c.jc(2,"main",2),c.jc(3,"div",3),c.jc(4,"div",4),c.jc(5,"div",5),c.fd(6),c.wc(7,"t"),c.ic(),c.jc(8,"div",6),c.fd(9),c.wc(10,"t"),c.ic(),c.jc(11,"div"),c.ec(12,"rectangular-button",7),c.ic(),c.ic(),c.ic(),c.ic(),c.ec(13,"doc-layout-footer",8)),2&e&&(c.Mb(3),c.cd("background-color",t.background.color)("background-image","url("+t.backgroundImage+")"),c.Mb(3),c.gd(c.xc(7,8,t.labels.title)),c.Mb(3),c.gd(c.xc(10,10,t.labels.subtitle)),c.Mb(3),c.Dc("properties",t.buttonProperties)("click",t.goToLoginPage.bind(t)))},directives:[an.a],pipes:[E.b],styles:[""]}),e})();var Bx=i("0JTz");function Gx(e,t){if(1&e&&(c.hc(0),c.fd(1),c.wc(2,"t"),c.gc()),2&e){const e=c.vc();c.Mb(1),c.hd(" ",c.xc(2,1,e.blankSlateParams.subtitle)," ")}}let $x=(()=>{class e{constructor(e,t){switch(this.backendService=e,this.secureLogoutService=t,this.logoUrl="/public/images/core/docebo_logo.png",this.blankSlateParams={isVisible:!0,type:Zd.a.SAD001,title:E.a.t("standard","You have been logged out"),subtitle:E.a.t("standard","You have been logged out because you accessed the platform from a more recent session")},this.rectangularButtonParams={properties:{text:E.a.t("standard","Go to Sign In Page"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>{this.backendService.logoutRedirection()}},this.platform=x.b.getInstance(),this.srReadMessage=!1,this.secureLogoutReason=this.secureLogoutService.getCurrentSecureLogoutReason(),this.secureLogoutReason){case Bx.a.ResetPassword:this.blankSlateParams.subtitle=E.a.t("standard","Since you have completed your password reset, you have been logged out for security reasons");break;case Bx.a.ImpersonateUserDeactivated:this.blankSlateParams.subtitle=E.a.t("standard","You have been logged out because, during the impersonation session, your user or the user you were impersonating has been deactivated.");break;case Bx.a.ImpersonateUserDeleted:this.blankSlateParams.subtitle=E.a.t("standard","You have been logged out because, during the impersonation session, your user or the user you were impersonating has been deleted.");break;case Bx.a.ImpersonateUserLevelChanged:this.blankSlateParams.subtitle=E.a.t("standard","You have been logged out because, during the impersonation session, your user\u2019s level or the level of the user you were impersonating has been changed.");break;case Bx.a.ImpersonateToggleDeactivated:case Bx.a.AuditTrailAppDeactivated:case Bx.a.NotificationAppDeactivated:case Bx.a.ImpersonateRequirementDeactivated:this.blankSlateParams.subtitle=E.a.t("standard","You have been logged out because, during the impersonation session, one or more requirements have been removed.")}this.secureLogoutService.cleanSecureLogoutReason()}ngOnInit(){this.platform.branding_elements.logo_url&&this.platform.branding_elements.logo_url.length>0&&(this.logoUrl=this.platform.branding_elements.logo_url),setTimeout(()=>this.srReadMessage=!0,this.secureLogoutReason===Bx.a.ResetPassword?6e3:1e3)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(S.a),c.dc(OT.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["user-secure-logout"]],decls:7,vars:8,consts:[["role","alert","aria-live","polite","aria-atomic","true",1,"ui-visually-hidden"],[4,"ngIf"],["id","user-secure-logout",1,"bg-grey-superlight"],[1,"content-wrapper","bg-white"],["alt","logo",1,"secure-logout-logo",3,"src"],[1,"secure-logout-blankslate",3,"isVisible","type","title","subtitle"],[1,"secure-logout-button",3,"properties","click"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.dd(1,Gx,3,3,"ng-container",1),c.ic(),c.jc(2,"section",2),c.jc(3,"div",3),c.ec(4,"img",4),c.ec(5,"blankslate",5),c.ec(6,"rectangular-button",6),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",t.srReadMessage),c.Mb(3),c.Ec("src",t.logoUrl,c.Xc),c.Mb(1),c.Dc("isVisible",t.blankSlateParams.isVisible)("type",t.blankSlateParams.type)("title",t.blankSlateParams.title)("subtitle",t.blankSlateParams.subtitle),c.Mb(1),c.Dc("properties",t.rectangularButtonParams.properties)("click",t.rectangularButtonParams.onClick))},directives:[Ae.p,ld.a,an.a],pipes:[E.b],styles:["user-secure-logout #user-secure-logout{position:absolute;top:0;left:0;width:100%;height:100%}user-secure-logout #user-secure-logout .content-wrapper{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:448px;padding:50px;box-sizing:border-box;text-align:center;box-shadow:0 1px 4px 0 rgba(0,0,0,.15)}user-secure-logout #user-secure-logout .secure-logout-logo{max-width:190px;max-height:35px;padding-bottom:24px}user-secure-logout #user-secure-logout .secure-logout-blankslate{padding:24px 0}user-secure-logout #user-secure-logout .button-rectangular{width:100%;margin:0}"],encapsulation:2}),e})();var Hx=i("ZKH7"),Yx=i("xLs9"),Wx=i("AurG"),Qx=i("He4l");let Kx=(()=>{class e{constructor(e,t,i,s,n){this.store=e,this.actions=t,this.backendService=i,this.router=s,this.docLayoutService=n}ngOnInit(){this.reduxListener(),Object(Hx.c)("/learn/mycourses")||this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Si.a.myCoursesAndLearningPlans,href:this.router.url}]),this.getPageHeader().then(e=>{const t=Object.assign(Object.assign({},Yx.a),{title:e.titles,description:e.descriptions});this.store.dispatch(this.actions.loadPageData(t))},()=>{this.store.dispatch(this.actions.loadPageData(Yx.a))})}ngOnDestroy(){this.reduxSubscriber&&this.reduxSubscriber.unsubscribe()}reduxListener(){}getPageHeader(){return this.backendService.request("/pages/v1/pages?search_text=my_courses","GET").toPromise().then(e=>{if(!e.data||!e.data.items)throw new Error("Cannot retrieve My Courses and Learning Plans page data");return e.data.items}).then(e=>{const t=e.find(e=>"my_courses"===e.code);if(!t)throw new Error("Cannot retrieve My Courses and Learning Plans page data");return{titles:t.names,descriptions:t.descriptions}})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(v.d),c.dc(Wx.a),c.dc(S.a),c.dc(s.h),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["mycourses-page"]],hostAttrs:["id","doc-page-my-courses"],decls:1,vars:0,template:function(e,t){1&e&&c.ec(0,"dynamic-widget-page")},directives:[Qx.a],styles:[""],changeDetection:0}),e})();var Xx=i("e0zn"),Jx=i("HsFC");let Zx=(()=>{class e{constructor(e,t){this._backendService=e,this.router=t}resolve(e,t){const i=Object.assign({page_size:1,get_total_count:1,show_item_list:2,all_catalogs:1,virtual_catalogs:1},o.a.getInstance().isValid()&&{my_catalogs:1});return Object(Jx.a)(this._backendService,i,e.params.catalogId).pipe(Object(Vi.a)(e=>(this.router.navigate(["/unauthorized"],mi.b),Object(xi.a)({}))))}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a),c.nc(s.h))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var eD=i("QmWI"),tD=i("paWX");function iD(e,t){if(1&e&&(c.jc(0,"div",1),c.jc(1,"div",2),c.jc(2,"div",3),c.jc(3,"div",4),c.jc(4,"div",5),c.ec(5,"h2",6),c.ec(6,"p",7),c.ic(),c.ec(7,"div",8),c.ic(),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(5),c.Dc("innerHTML",e.cookieTitle,c.Vc),c.Mb(1),c.Dc("innerHTML",e.cookieSubtitle,c.Vc),c.Mb(1),c.Dc("innerHTML",e.cookieContent,c.Vc)}}let sD=(()=>{class e{constructor(e,t,i){this.content=e,this.docLayoutService=t,this.router=i,this.isLoaded=!1,this.localizationPipe=new eD.a,this.cookiePolicyTextBuilder=()=>new Promise((e,t)=>{this.content.getInformation(1).pipe(Object(ee.a)(1)).subscribe(t=>{this._cookieContent=t[tD.a.BODY],this._cookieTitle=t[tD.a.TITLE],this._cookieDescription=t[tD.a.SUBTITLE],e()},e=>{t()})}),this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Si.a.cookiePolicy,href:this.router.url}])}ngOnInit(){this.cookiePolicyTextBuilder().then(e=>{this.isLoaded=!0})}get cookieContent(){return this.localizationPipe.transform(this._cookieContent)}get cookieTitle(){return this.localizationPipe.transform(this._cookieTitle)}get cookieSubtitle(){return this.localizationPipe.transform(this._cookieDescription)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(tD.b),c.dc(M.a),c.dc(s.h))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[["class","mdl-wrapper",4,"ngIf"],[1,"mdl-wrapper"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],[1,"cookie-policy","bg-white","wrapper-shadow","default-headings-styles","default-list-style"],[1,"cookie-policy_title"],[1,"title-section","bolded",3,"innerHTML"],[1,"text-grey-mid","bolded",3,"innerHTML"],[1,"cookie-policy_content",3,"innerHTML"]],template:function(e,t){1&e&&c.dd(0,iD,8,3,"div",0),2&e&&c.Dc("ngIf",t.isLoaded)},directives:[Ae.p],styles:[".cookie-policy[_ngcontent-%COMP%]{box-sizing:border-box;max-width:1153px;margin:40px auto;padding:50px;border-radius:2px;box-shadow:0 2px 8px 0 rgba(0,0,0,.15)}.cookie-policy_title[_ngcontent-%COMP%]{padding-bottom:30px}.cookie-policy_title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:32px}.cookie-policy_content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(:last-child){margin-bottom:15px}"]}),e})();var nD=i("e3q5");let aD=(()=>{class e{constructor(e,t){this.router=e,this.toggleService=t,this.sessionExists=new Promise(e=>{r.a.singleton.subscribe("UserSessionReady",()=>{e(!0)})})}ngOnInit(){if(!this.toggleService.isOn(nD.a.TOGGLE_COOKIE_POLICY)||!this.toggleService.isOn(nD.a.TOGGLE_COOKIE_POLICY_LEARNER)||this.toggleService.isOn(nD.a.TOGGLE_COOKIE_POLICY_RESTRICTIONS))return void this.router.navigate(["/not-found"],mi.b);const e=o.a.getInstance();e.isValid()&&e.username?this.router.navigate(["/learn/cookie-policy-private"],{skipLocationChange:!0}):e.isValid()?this.sessionExists.then(()=>{this.router.navigate(["/learn/cookie-policy-private"],{skipLocationChange:!0})}):this.router.navigate(["/learn/cookie-policy-public"],{skipLocationChange:!0})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(rd.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();function oD(e){return`docebo_zoomus_pairing_${e}`}const rD=E.a.t("standard","None"),cD=E.a.t("webinar","Paired"),lD=(e,t,i)=>{window.open(`https://zoom.us/oauth/authorize?response_type=code&client_id=${i}&redirect_uri=${e}?id=${t}`,"_blank")};let dD=(()=>{class e{constructor(e,t){this.route=e,this.backendService=t}ngOnInit(){this.code=this.route.snapshot.queryParamMap.get("code"),this.id=this.route.snapshot.queryParamMap.get("id")||"",this.backendService.request(`/learn/v1/webinar/accounts/${this.id}/pair`,"POST",{code:this.code}).pipe(Object(ee.a)(1)).subscribe(()=>{window.close(),window.localStorage.setItem(oD(this.id),"success")},()=>{window.close(),window.localStorage.setItem(oD(this.id),"fail")})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.a),c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["zoomus-pairing"]],decls:1,vars:0,template:function(e,t){1&e&&c.ec(0,"widget-spinner")},directives:[lS.a],styles:["zoomus-pairing widget-spinner{position:absolute;top:250px;left:50%}"],encapsulation:2,changeDetection:0}),e})(),uD=(()=>{class e{constructor(e){this.router=e,this.platform=x.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("ZoomV2App")||(this.router.navigate(["/unauthorized"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var hD=function(e){return e.AccountSuccessfullyCreated="[Zoomus] Account Successfully Created",e.AccountSuccessfullyEdited="[Zoomus] Account Successfully Edited",e.AccountSuccessfullyPaired="[Zoomus] Account Successfully Paired",e.AccountSuccessfullyDeleted="[Zoomus] Account Successfully Deleted",e.PairingAccountRequested="[Zoomus] Pairing Account Requested",e.PairingAccountAcquired="[Zoomus] Pairing Account Acquired",e.PairingAccountCompleted="[Zoomus] Pairing Account Completed",e.PairingAccountAborted="[Zoomus] Pairing Account Aborted",e}({});class pD{constructor(e){this.payload=e,this.type=hD.AccountSuccessfullyCreated}}class mD{constructor(e){this.payload=e,this.type=hD.AccountSuccessfullyEdited}}class gD{constructor(e){this.payload=e,this.type=hD.PairingAccountRequested}}class bD{constructor(e){this.payload=e,this.type=hD.PairingAccountAcquired}}class fD{constructor(){this.type=hD.PairingAccountCompleted}}class vD{constructor(){this.type=hD.PairingAccountAborted}}class _D{constructor(e){this.payload=e,this.type=hD.AccountSuccessfullyDeleted}}let wD=(()=>{class e{constructor(e){this.backendService=e}createAccount(e){const t=this.buildPayload(e);return this.backendService.request("/learn/v1/webinar/accounts","POST",t)}editAccount(e){const t=this.buildPayload(e);return this.backendService.request(`/learn/v1/webinar/accounts/${e.get("id").value}`,"PUT",t)}fetchAccounts(e){const t=Object.assign(Object.assign({},e),{providers:["zoomv2meeting","zoomv2webinar"]});return this.backendService.request("/learn/v1/webinar/accounts","GET",t)}unpairAccount(e){return this.backendService.request(`/learn/v1/webinar/accounts/${e}/pair`,"DELETE")}deleteAccount(e){return this.backendService.request(`/learn/v1/webinar/accounts/${e}`,"DELETE")}buildPayload(e){const t="meeting"===e.get("sessionType").value?"zoomv2meeting":"zoomv2webinar";return{name:e.get("accountName").value,tool:t,additional_info:e.get("accountDescription").value,app_key:e.get("clientId").value,app_secret:e.get("clientSecret").value,session_type:t,max_sessions:0|e.get("sessionLimitAccount").value,max_sessions_per_course:0|e.get("sessionLimitCourses").value,max_concurrent_sessions:0|e.get("sessionLimitConcurrentRooms").value}}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();function yD(e,t){if(1&e&&(c.jc(0,"div",17),c.ec(1,"textfield",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitCoursesTextField.type)("id",e.sessionLimitCoursesTextField.id)("floating_label",e.sessionLimitCoursesTextField.floating_label)("label",e.sessionLimitCoursesTextField.label)("max_length",e.sessionLimitCoursesTextField.max_length)("inputFormControl",e.sessionLimitCoursesTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function CD(e,t){if(1&e&&(c.jc(0,"div",17),c.ec(1,"textfield",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitAccountTextField.type)("id",e.sessionLimitAccountTextField.id)("floating_label",e.sessionLimitAccountTextField.floating_label)("label",e.sessionLimitAccountTextField.label)("max_length",e.sessionLimitAccountTextField.max_length)("inputFormControl",e.sessionLimitAccountTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function SD(e,t){if(1&e&&(c.jc(0,"div",17),c.ec(1,"textfield",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRoomsTextField.type)("id",e.sessionLimitConcurrentRoomsTextField.id)("floating_label",e.sessionLimitConcurrentRoomsTextField.floating_label)("label",e.sessionLimitConcurrentRoomsTextField.label)("max_length",e.sessionLimitConcurrentRoomsTextField.max_length)("inputFormControl",e.sessionLimitConcurrentRoomsTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}const TD=function(){return{category:"standard"}},kD=function(){return{category:"webinar"}},ID=function(){return{category:"admin"}};let xD=(()=>{class e{constructor(e){this.cdr=e,this.isEditMode=!1}ngOnInit(){this.setFormFieldsParams()}ngAfterViewInit(){this.formGroup.valueChanges.subscribe(()=>{this.cdr.detectChanges()})}checkForChanges(){this.cdr.markForCheck()}setFormFieldsParams(){this.accountName={type:Xe.a.TEXT,id:"account-name",floating_label:!0,label:E.a.t("webinar","Account Name"),max_length:50,show_counter:!0,inputFormControl:this.formGroup.controls.accountName},this.accountDescription={type:Xe.a.TEXT,id:"account-description",floating_label:!0,label:E.a.t("app7020","Description"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.accountDescription},this.clientId={type:Xe.a.TEXT,id:"client-id",floating_label:!0,label:E.a.t("slack","Client ID"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientId},this.clientSecret={type:Xe.a.TEXT,id:"client-secret",floating_label:!0,label:E.a.t("app","Client Secret"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientSecret},this.sessionType={id:"session-type",label:E.a.t("webinar","Session type"),inputFormControl:this.formGroup.get("sessionType"),name:"session-type"},this.sessionType.webinar={id:"session-type-webinar",floating_label:!0,label:E.a.t("webinar","Webinar")},this.sessionType.meeting={id:"session-type-meeting",floating_label:!0,label:E.a.t("conference","Meeting")},this.sessionLimitCoursesTextField={type:Xe.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:E.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitCourses")},this.sessionLimitAccountTextField={type:Xe.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:E.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitAccount")},this.sessionLimitConcurrentRoomsTextField={type:Xe.a.NUMBER,id:"session-limit-concurrents",floating_label:!0,label:E.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitConcurrentRooms")};const e=!!this.formGroup.get("sessionLimitCourses").value;this.sessionLimitCoursesCheckbox={label:E.a.t("webinar","Set session limits for courses"),inputFormControl:new Ke.e(e),checked:e},this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitCoursesCheckbox").setValue(e)});const t=!!this.formGroup.get("sessionLimitAccount").value;this.sessionLimitAccountCheckbox={label:E.a.t("webinar","Set session limits per accounts"),inputFormControl:new Ke.e(t),checked:t},this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitAccountCheckbox").setValue(e)});const i=!!this.formGroup.get("sessionLimitConcurrentRooms").value;this.sessionLimitConcurrentRoomsCheckbox={label:E.a.t("webinar","Set session for concurrent rooms"),inputFormControl:new Ke.e(i),checked:i},this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitConcurrentRoomsCheckbox").setValue(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["zoomus-account-panel-ui"]],inputs:{formGroup:"formGroup",isEditMode:"isEditMode",oauthRedirectUri:"oauthRedirectUri",oauthRedirectUriTranslatable:"oauthRedirectUriTranslatable"},decls:53,vars:76,consts:[[1,"zoomus-create-account"],[1,"zoomus-account-redirect-info"],[1,"zmdi","zmdi-info","zmdi-hc-2x","text-main"],[1,"border-top-wrapper",3,"formGroup"],[1,"zoomus-account-info-container"],[1,"details-container"],[1,"bold-subtitle"],[1,"zoomus-account-text-field-margin"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator"],[1,"zoomus-account-text-field-margin-no-bottom"],[1,"border-top-wrapper","zoomus-account-info-container"],[1,"bold-subtitle","options-subtitle"],[3,"label","value","name","enabled","inputFormControl"],[1,"text-grey-mid","hint","options-label"],[1,"options-container"],[3,"inputFormControl","checked","label"],["class","zoomus-account-margin-huge",4,"ngIf"],[1,"zoomus-account-margin-huge"]],template:function(e,t){1&e&&(c.jc(0,"section",0),c.jc(1,"div"),c.jc(2,"div",1),c.ec(3,"i",2),c.jc(4,"span"),c.fd(5),c.wc(6,"t"),c.ec(7,"br"),c.fd(8),c.ic(),c.ic(),c.ic(),c.jc(9,"form",3),c.jc(10,"div",4),c.jc(11,"div",5),c.jc(12,"div",6),c.fd(13),c.wc(14,"t"),c.ic(),c.jc(15,"div",7),c.ec(16,"textfield",8),c.ic(),c.jc(17,"div",7),c.ec(18,"textfield",8),c.ic(),c.jc(19,"div",7),c.ec(20,"textfield",8),c.ic(),c.jc(21,"div",9),c.ec(22,"textfield",8),c.ic(),c.ic(),c.ic(),c.jc(23,"div",10),c.jc(24,"div",5),c.jc(25,"div",11),c.fd(26),c.wc(27,"t"),c.ic(),c.jc(28,"div"),c.ec(29,"radio",12),c.ic(),c.jc(30,"div"),c.ec(31,"radio",12),c.ec(32,"div",13),c.ic(),c.ic(),c.ic(),c.jc(33,"div",10),c.jc(34,"div",5),c.jc(35,"div",11),c.fd(36),c.wc(37,"t"),c.ic(),c.jc(38,"div",14),c.jc(39,"div"),c.ec(40,"checkbox",15),c.ic(),c.dd(41,yD,2,7,"div",16),c.wc(42,"async"),c.ic(),c.jc(43,"div",14),c.jc(44,"div"),c.ec(45,"checkbox",15),c.ic(),c.dd(46,CD,2,7,"div",16),c.wc(47,"async"),c.ic(),c.jc(48,"div",14),c.jc(49,"div"),c.ec(50,"checkbox",15),c.ic(),c.dd(51,SD,2,7,"div",16),c.wc(52,"async"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(5),c.hd(" ",c.xc(6,56,t.oauthRedirectUriTranslatable),""),c.Mb(3),c.hd(" ",t.oauthRedirectUri," "),c.Mb(1),c.Dc("formGroup",t.formGroup),c.Mb(4),c.hd(" ",c.yc(14,58,"General Information",c.Hc(73,TD))," "),c.Mb(3),c.Dc("type",t.accountName.type)("id",t.accountName.id)("floating_label",t.accountName.floating_label)("label",t.accountName.label)("max_length",t.accountName.max_length)("inputFormControl",t.accountName.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.accountDescription.type)("id",t.accountDescription.id)("floating_label",t.accountDescription.floating_label)("label",t.accountDescription.label)("max_length",t.accountDescription.max_length)("inputFormControl",t.accountDescription.inputFormControl)("showRequiredFieldIndicator",!1),c.Mb(2),c.Dc("type",t.clientId.type)("id",t.clientId.id)("floating_label",t.clientId.floating_label)("label",t.clientId.label)("max_length",t.clientId.max_length)("inputFormControl",t.clientId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.clientSecret.type)("id",t.clientSecret.id)("floating_label",t.clientSecret.floating_label)("label",t.clientSecret.label)("max_length",t.clientSecret.max_length)("inputFormControl",t.clientSecret.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(4),c.hd(" ",c.yc(27,61,"Session type",c.Hc(74,kD))," "),c.Mb(3),c.Dc("label",t.sessionType.meeting.label)("value","meeting")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(2),c.Dc("label",t.sessionType.webinar.label)("value","webinar")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(5),c.hd(" ",c.yc(37,64,"Options",c.Hc(75,ID))," "),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitCoursesCheckbox.inputFormControl)("checked",t.sessionLimitCoursesCheckbox.checked)("label",t.sessionLimitCoursesCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(42,67,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCoursesTextField.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitAccountCheckbox.inputFormControl)("checked",t.sessionLimitAccountCheckbox.checked)("label",t.sessionLimitAccountCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(47,69,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccountTextField.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl)("checked",t.sessionLimitConcurrentRoomsCheckbox.checked)("label",t.sessionLimitConcurrentRoomsCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(52,71,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRoomsTextField.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value||!1))},directives:[Ke.y,Ke.p,Ke.i,_t.a,jn.a,Fn.a,Ae.p],pipes:[E.b,Ae.b],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}zoomus-account-panel-ui .bold-subtitle{padding-bottom:6px;font-weight:600;font-size:14px;line-height:18px}zoomus-account-panel-ui .border-top-wrapper{border-top:1px solid var(--ui-color-badge-background-light)}zoomus-account-panel-ui .details-container{padding:24px 0}zoomus-account-panel-ui .options-subtitle{margin-bottom:16px}zoomus-account-panel-ui .options-label{padding-left:24px}zoomus-account-panel-ui .docebo-radio{margin-bottom:0}zoomus-account-panel-ui .zoomus-account-limit-list{padding:24px}zoomus-account-panel-ui .zoomus-account-redirect-info{display:flex;align-items:center;padding:1rem 1.5rem;padding:var(--hyd-spacing-sm) var(--hyd-spacing-md)}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-redirect-info span{margin-left:29px}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-redirect-info span{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-redirect-info span{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-redirect-info span{margin-right:29px}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin{margin-left:12px}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin{margin-right:12px}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin-huge{margin-left:26px}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin-huge{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin-huge{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin-huge{margin-right:26px}zoomus-account-panel-ui .zoomus-account-info-container{padding:0 1.5rem;padding:0 var(--hyd-spacing-md);box-sizing:border-box}zoomus-account-panel-ui .zoomus-account-text-field-margin{margin:16px 0 24px}zoomus-account-panel-ui .zoomus-account-text-field-margin-no-bottom{margin:16px 0 0}"],encapsulation:2,changeDetection:0}),e})();const DD=["uiComponent"];let OD=(()=>{class e extends Uc.a{constructor(t,i,s,n){super(),this.pageService=t,this.zoomService=i,this.zoomusStore=s,this.translationService=n,this.isEditMode=!1,this.notMoreThan=(e,t)=>i=>i.value>e?{notMoreThan:this.translationService.instant("Max limit is {max} {things}",{category:"standard",max:e,things:t})}:null,this.baseRedirectUri=e.createBaseRedirectUri(),this.oauthRedirectUriTranslatable=E.a.t("webinar","Zoom Oauth redirect URL:")}static createBaseRedirectUri(){return`${x.b.getInstance().getFullLmsCustomUrl()}/learn/zoomus`}ngOnInit(){this.rightPanel=this.pageService.rightPanel,this.setFormGroup()}ngAfterViewInit(){this.setPanelActions()}ngOnDestroy(){super.ngOnDestroy(),this.rightPanel.buttonsEnabled()}setPanelActions(){const e=[],t=E.a.t("standard",this.isEditMode?"Confirm":"Create");e.push({type:"normal",properties:{text:t},customClasses:"float-ltr-right-clear-none",handler:()=>{this.checkCustomFormValidations(),this.form.get("clientId").errors||this.form.get("clientId").setErrors(null),this.form.valid?(this.cleanFormValues(this.form),this.isEditMode?this.editAccount():this.createAccount()):(Object(Vw.l)(this.form),this.form.setValue(this.form.value))}}),e.push({type:"cancel",properties:{text:E.a.t("standard","Cancel")},customClasses:"float-ltr-right-clear-none",handler:e=>{e.close()}}),this.rightPanel.setActions(e)}createAccount(){this.rightPanel.buttonsDisabled(),this.zoomService.createAccount(this.form).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{this.accountName=e.data.name,this.accountId=e.data.id;const t={id:e.data.id,name:this.accountName,description:e.data.additional_info,createdAt:Qv()().toDate(),clientId:e.data.app_key,clientSecret:e.data.app_secret,sessionType:e.session_type,accessTokenStatus:rD,sessionLimitCourses:0|this.form.get("sessionLimitCourses").value,sessionLimitAccount:0|this.form.get("sessionLimitAccount").value,sessionLimitConcurrentRooms:0|this.form.get("sessionLimitConcurrentRooms").value};this.zoomusStore.dispatch(new pD(t)),this.rightPanel.close(),lD(this.baseRedirectUri,e.data.id,this.form.get("clientId").value)},this.accountUpsertErrorCallback())}editAccount(){this.rightPanel.buttonsDisabled(),this.zoomService.editAccount(this.form).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{var t=this.accountName;this.accountName=e.data.name;const i={id:e.data.id,name:t,description:e.data.additional_info,createdAt:Qv()().toDate(),clientId:e.data.app_key,clientSecret:e.data.app_secret,accessTokenStatus:rD};this.zoomService.unpairAccount(e.data.id).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{lD(this.baseRedirectUri,e.data.id,this.form.get("clientId").value),this.zoomusStore.dispatch(new mD(i)),this.rightPanel.close()})},this.accountUpsertErrorCallback())}accountUpsertErrorCallback(){return e=>{1002===e.code&&(Object(Vw.l)(this.form),this.form.get("clientId").setErrors({notUnique:E.a.t("webinar","Multiple accounts cannot use the same Client ID")}),Object(Vw.l)(this.form),this.uiComponent.checkForChanges(),this.rightPanel.buttonsEnabled())}}cleanFormValues(e){e.get("sessionLimitCoursesCheckbox").value||e.get("sessionLimitCourses").setValue(0),e.get("sessionLimitAccountCheckbox").value||e.get("sessionLimitAccount").setValue(0),e.get("sessionLimitConcurrentRoomsCheckbox").value||e.get("sessionLimitConcurrentRooms").setValue(0)}setFormGroup(){this.form=new Ke.h({id:new Ke.e(this.accountId),accountName:new Ke.e(this.accountName),accountDescription:new Ke.e(this.accountDescription),clientId:new Ke.e(this.clientId),clientSecret:new Ke.e(this.clientSecret),sessionType:new Ke.e(this.sessionType),sessionLimitCourses:new Ke.e(this.sessionLimitCourses),sessionLimitCoursesCheckbox:new Ke.e(!!this.sessionLimitCourses),sessionLimitAccount:new Ke.e(this.sessionLimitAccount),sessionLimitAccountCheckbox:new Ke.e(!!this.sessionLimitAccount),sessionLimitConcurrentRooms:new Ke.e(this.sessionLimitConcurrentRooms),sessionLimitConcurrentRoomsCheckbox:new Ke.e(!!this.sessionLimitConcurrentRooms)}),this.checkCustomFormValidations()}checkCustomFormValidations(){this.form.get("accountName").setValidators([Ke.x.required,e=>"string"==typeof e.value&&e.value.match("^\\s+$")?{notHaveOnlyBlankCharacters:"This field cannot contains only empty spaces"}:null,Ke.x.maxLength(255)]),this.form.get("accountDescription").setValidators([Ke.x.maxLength(255)]),this.form.get("clientId").setValidators([Ke.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ke.x.maxLength(255)]),this.form.get("clientSecret").setValidators([Ke.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ke.x.maxLength(255)]),this.form.get("sessionType").setValidators([Ke.x.required]),this.form.get("sessionLimitCourses").setValidators([this.notMoreThan(999,"sessions")]),this.form.get("sessionLimitAccount").setValidators([this.notMoreThan(999,"sessions")]),this.form.get("sessionLimitConcurrentRooms").setValidators([this.notMoreThan(999,"rooms")]),this.form.get("accountName").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("clientId").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("clientSecret").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(O.a),c.dc(wD),c.dc(v.d),c.dc(js.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["zoomus-account-panel-container"]],viewQuery:function(e,t){if(1&e&&c.md(DD,1),2&e){let e;c.Qc(e=c.sc())&&(t.uiComponent=e.first)}},inputs:{isEditMode:"isEditMode",accountId:"accountId",accountName:"accountName",accountDescription:"accountDescription",clientId:"clientId",clientSecret:"clientSecret",sessionType:"sessionType",sessionLimitCourses:"sessionLimitCourses",sessionLimitAccount:"sessionLimitAccount",sessionLimitConcurrentRooms:"sessionLimitConcurrentRooms"},features:[c.Lb([wD]),c.Jb],decls:2,vars:3,consts:[[3,"formGroup","oauthRedirectUri","oauthRedirectUriTranslatable"],["uiComponent",""]],template:function(e,t){1&e&&c.ec(0,"zoomus-account-panel-ui",0,1),2&e&&c.Dc("formGroup",t.form)("oauthRedirectUri",t.baseRedirectUri)("oauthRedirectUriTranslatable",t.oauthRedirectUriTranslatable)},directives:[xD,Ke.p,Ke.i],styles:["zoomus-account-panel-ui{height:100%;overflow-y:auto;overflow-x:hidden;display:block}"],encapsulation:2,changeDetection:0}),e})();const ED={isVisible:!0,type:Zd.a.BLANK001,title:E.a.t("webinar","No Zoom Accounts Found"),subtitle:E.a.t("webinar","Click the Add button in the top right corner to add a new Zoom account!")},PD={isVisible:!0,type:Zd.a.EMPTY001,title:E.a.t("standard","Whoops, No results found!"),subtitle:E.a.t("myteam","Please try again using different search/filters criteria.")},MD={mode:Oe.a.push,viewOptionLabel:E.a.t("standard","SORT BY"),filters:new Pe.a([{title:E.a.t("standard","Search"),code:"search",type:Oe.d.free_search_filter,params:{placeholder:E.a.t("standard","Search...")}}]),appliedFiltersNumber:new Pe.a(null),displayedItemsNumber:new Pe.a(null),viewOptions:new Pe.a(null),disableViewOptions:!1,elementLabels:{singular:E.a.t("standard","items"),plural:E.a.t("standard","items")}},AD={columnName:"createdAt",dir:Ni.a.DESC},LD={name:{headerLabel:E.a.t("webinar","Account Name"),fieldName:"name",columnName:"name",sortable:!0},description:{headerLabel:E.a.t("app7020","Description"),fieldName:"description",columnName:"description",sortable:!1},createdAt:{headerLabel:E.a.t("standard","Creation Date"),fieldName:"createdAt",columnName:"createdAt",sortable:!0,type:"date",format:"MM/DD/YYYY"},accessTokenStatus:{headerLabel:E.a.t("webinar","Access token"),fieldName:"accessTokenStatus",columnName:"accessTokenStatus",sortable:!1},ellipsis:{}};function jD(e,t){if(1&e&&(c.fd(0),c.wc(1,"t")),2&e){const e=c.vc(3);c.gd(c.xc(1,1,e.tableColumns.createdAt.headerLabel))}}function FD(e,t){1&e&&(c.fd(0),c.wc(1,"HDateTime")),2&e&&c.hd(" ",c.zc(1,1,t.item.createdAt,null,"lll")," ")}function RD(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-table",6),c.rc("sort",function(t){return c.Uc(e),c.vc(2).onTableSort(t)}),c.ec(1,"hyd-table-column-text",7),c.ec(2,"hyd-table-column-text",7),c.jc(3,"hyd-table-column",8),c.jc(4,"hyd-table-column-header"),c.dd(5,jD,2,3,"ng-template"),c.ic(),c.jc(6,"hyd-table-column-cell"),c.dd(7,FD,2,5,"ng-template"),c.ic(),c.ic(),c.ec(8,"hyd-table-column-text",7),c.ec(9,"hyd-table-column-ellipsis",9),c.ic()}if(2&e){const e=c.vc(2);c.Dc("data",e.tableData)("sorting",e.tableDefaultSorting),c.Mb(1),c.Dc("headerLabel",e.tableColumns.name.headerLabel)("fieldName",e.tableColumns.name.fieldName)("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.description.headerLabel)("fieldName",e.tableColumns.description.fieldName)("columnName",e.tableColumns.description.columnName)("sortable",e.tableColumns.description.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.createdAt.columnName)("sortable",e.tableColumns.createdAt.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.accessTokenStatus.headerLabel)("fieldName",e.tableColumns.accessTokenStatus.fieldName)("columnName",e.tableColumns.accessTokenStatus.columnName)("sortable",e.tableColumns.accessTokenStatus.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.ellipsis.columnName)("actions",e.tableColumns.ellipsis.actions)("orientation",e.tableColumns.ellipsis.orientation)}}function ND(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-paginator",10),c.rc("pageChange",function(t){return c.Uc(e),c.vc(2).onTablePageChange(t)}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("pageIndex",e.tablePaginator.pageIndex)("pageSize",e.tablePaginator.pageSize)("length",e.tablePaginator.length)("pageSizeAutoAllowed",e.tablePaginator.pageSizeAutoAllowed)}}function UD(e,t){if(1&e&&c.ec(0,"blankslate",11),2&e){const e=c.vc(2);c.Dc("ngClass","blankslate-container")("isVisible",e.blankslateWithFilters.isVisible)("type",e.blankslateWithFilters.type)("title",e.blankslateWithFilters.title)("subtitle",e.blankslateWithFilters.subtitle)}}function qD(e,t){if(1&e){const e=c.kc();c.jc(0,"data-browser",2),c.rc("onFiltersUpdate",function(t){return c.Uc(e),c.vc().onDataBrowserFiltersUpdate(t)}),c.dd(1,RD,10,19,"hyd-table",3),c.dd(2,ND,1,4,"hyd-paginator",4),c.dd(3,UD,1,5,"blankslate",5),c.ic()}if(2&e){const e=c.vc();c.Dc("dataBrowserSource",e.dataBrowserSource),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showBlankslateWithFilters())}}function zD(e,t){if(1&e&&(c.jc(0,"blankslate",12),c.fd(1," >\n"),c.ic()),2&e){const e=c.vc();c.Dc("isVisible",e.blankslateWithoutFilters.isVisible)("type",e.blankslateWithoutFilters.type)("title",e.blankslateWithoutFilters.title)("subtitle",e.blankslateWithoutFilters.subtitle)}}let VD=(()=>{class e{constructor(e){this.cdr=e,this.filtersUpdate=new c.q,this.tableSort=new c.q,this.tablePageChange=new c.q,this.openDeleteDialog=new c.q,this.beginPairing=new c.q,this.editAccount=new c.q,this.blankslateWithoutFilters=ED,this.blankslateWithFilters=PD,this.dataBrowserSource=MD,this.tableDefaultSorting=AD,this.tableColumns=LD,this.setTableEllipsisColumn()}showBlankslateWithoutFilters(){return!this.showLoader&&0===this.tableData.length&&""===this.searchFilterValue}showBlankslateWithFilters(){return!this.showLoader&&0===this.tableData.length&&""!==this.searchFilterValue}showDataBrowser(){return this.tableData.length>0||""!==this.searchFilterValue}showTable(){return!this.showLoader&&this.tableData.length>0}onDataBrowserFiltersUpdate(e){this.filtersUpdate.emit(e)}onTableSort(e){this.tableSort.emit(e)}onTablePageChange(e){this.tablePageChange.emit(e)}checkForChanges(){this.cdr.markForCheck()}setTableEllipsisColumn(){this.tableColumns.ellipsis={columnName:"ellipsis",columnWidth:"100px",alignment:Ee.a.CENTER,ellipsed:!1,orientation:"bottom-right",actions:[{id:"pair",title:E.a.t("standard","Pair"),params:null,active:!1,action:e=>{this.beginPairing.emit(e)}},{id:"edit",title:E.a.t("app7020","Edit"),params:null,active:!1,action:e=>{this.editAccount.emit(e)}},{id:"delete",title:E.a.t("standard","Delete"),params:null,active:!1,action:e=>{this.openDeleteDialog.emit(e)}}]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["zoomus-account-list"]],inputs:{tableData:"tableData",searchFilterValue:"searchFilterValue",showLoader:"showLoader",tablePaginator:"tablePaginator"},outputs:{filtersUpdate:"filtersUpdate",tableSort:"tableSort",tablePageChange:"tablePageChange",openDeleteDialog:"openDeleteDialog",beginPairing:"beginPairing",editAccount:"editAccount"},decls:2,vars:2,consts:[["class","data-browser-zoomus",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","blankslate-container",3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"data-browser-zoomus",3,"dataBrowserSource","onFiltersUpdate"],["class","hyd-table",3,"data","sorting","sort",4,"ngIf"],["class","hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange",4,"ngIf"],[3,"ngClass","isVisible","type","title","subtitle",4,"ngIf"],[1,"hyd-table",3,"data","sorting","sort"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnName","sortable"],[3,"columnName","actions","orientation"],[1,"hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange"],[3,"ngClass","isVisible","type","title","subtitle"],[1,"blankslate-container",3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(c.dd(0,qD,4,4,"data-browser",0),c.dd(1,zD,2,4,"blankslate",1)),2&e&&(c.Dc("ngIf",t.showDataBrowser()),c.Mb(1),c.Dc("ngIf",t.showBlankslateWithoutFilters()))},directives:[Ae.p,Le.a,Fe.a,Re.a,Ne.c,Ne.d,Ne.b,Ue.a,je.b,ld.a,Ae.n],pipes:[E.b,Xt.a],styles:["zoomus-account-list .blankslate-container{margin-top:91px}zoomus-account-list .hyd-paginator{position:fixed;bottom:0;left:0;width:100%}zoomus-account-list .data-browser-zoomus .grid-content-container.mdl-grid{margin:0}zoomus-account-list .data-browser-zoomus .grid-content-container.mdl-grid>.mdl-cell.mdl-cell--12-col{margin:0;width:100%}zoomus-account-list .data-browser-zoomus .full-width-header-container>.section-wrapper>.mdl-grid{margin:0}zoomus-account-list .data-browser-zoomus .hyd-table-body{padding-bottom:45px}"],encapsulation:2,changeDetection:0}),e})();var BD=i("0ayN");const GD=Object(v.k)("learn-zoomus"),$D=Object(v.m)(GD,e=>e);var HD=function(e){return e.NAME="name",e.CREATION="created_at",e}({}),YD=function(e){return e.ASC="asc",e.DESC="desc",e}({}),WD=i("Tz1W");const QD=["uiComponent"];let KD=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a,o,r,c){super(),this.translationService=e,this.pageService=t,this.router=i,this.zoomusStore=s,this.permissionManagerService=n,this.appStore=a,this.windowService=o,this.zoomusService=r,this.docLayoutService=c,this.showLoader=!0,this.searchFilterValue="",this.tablePaginator={pageIndex:0,pageSize:15,length:0,pageSizeAutoAllowed:!0},this.tableActiveSorting=HD.CREATION,this.tableActiveSortingDir=YD.DESC,this.tableData=[],this.zoomusAccountSelector$=this.zoomusStore.pipe(Object(v.p)($D)),this.pageInitialized=!1,this.snackbarIntervals=[],this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Zoom V2",href:this.router.url}]),this.hasUserViewPermission$=n.can(BD.a.USER_VIEW),this.zoomusAccountSelector$.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{if("PairingAccountCompleted"===e.status&&this.windowSubscription)return this.windowSubscription.unsubscribe(),void this.fetchAccounts();if(["AccountCreated","AccountEdited","PairingAccountRequested"].includes(e.status))switch(e.status){case"AccountCreated":this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastCreatedAccount,"create");break;case"AccountEdited":this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastEditedAccount,"edit");break;case"PairingAccountRequested":this.watchPairing(e.lastRequestedPairedAccount,"pair")}"PairingAccountAcquired"===e.status&&e.pairing&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.windowSubscription=this.windowService.focus().pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(t=>{if(t&&"PairingAccountAcquired"===e.status&&e.pairing){const{account:t,action:i,item:s}=e.pairing;this.createSnackbar(s,t,i),this.zoomusStore.dispatch(new fD)}})),"AccountDeleted"===e.status&&e.lastDeletedAccountPartial&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.handleAccountDeleted(e.lastDeletedAccountPartial))})}ngOnInit(){this.pageService.ready().pipe(Object(ee.a)(1)).subscribe(()=>{this.pageDialog=this.pageService.dialog,this.rightPanel=this.pageService.rightPanel,this.setPageTitle(),this.setActionButtons(),this.pageInitialized=!0})}ngAfterViewInit(){this.fetchAccounts()}ngOnDestroy(){this.docLayoutService.actionButtons.clearActionButtons(),super.ngOnDestroy()}onFiltersUpdate(e){this.searchFilterValue=e.search?e.search:"",this.fetchAccounts()}onTableSort(e){switch(this.tableActiveSortingDir=e.dir,e.columnName){case"createdAt":this.tableActiveSorting=HD.CREATION;break;case"name":this.tableActiveSorting=HD.NAME}this.fetchAccounts()}onTablePageChange(e){const{pageIndex:t}=e;let{pageSize:i}=e;i<1&&(i=this.getAutoPageSize()),this.tablePaginator.pageSize=i,this.tablePaginator.pageIndex=t,this.fetchAccounts()}onOpenDeleteDialog(e){const t=e.id,i=e.name;this.docLayoutService.dialog.showCommonDialog(this.setDeleteDialogParams()).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.zoomusService.deleteAccount(t).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{e.actionSuccess.next(!0),this.zoomusStore.dispatch(new _D({id:t,name:i}))})})}onPairingRequested(e){this.zoomusService.unpairAccount(e.id).subscribe(()=>{lD(`${x.b.getInstance().getFullLmsCustomUrl()}/learn/zoomus`,e.id,e.clientId),this.zoomusStore.dispatch(new gD({id:e.id,name:e.name,description:e.description,clientId:e.clientId,clientSecret:"",createdAt:e.createdAt,accessTokenStatus:cD,sessionType:e.sessionType,sessionLimitCourses:e.sessionLimitCourses,sessionLimitAccount:e.sessionLimitAccount,sessionLimitConcurrentRooms:e.sessionLimitConcurrentRooms}))})}onEditAccountRequested(e){this.openAccountRightPanel(e)}getAutoPageSize(){const e=document.querySelector("zoomus-account-list");return Math.floor((window.innerHeight-e.offsetTop-90-80-39)/38)}createAccountCreationSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully created!",{accountName:e.name})}createAccountEditSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully edited!",{accountName:e.name})}createAccountDeleteSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully deleted!",{accountName:e.name})}showSuccessSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"success"})}createAccountPairingSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully paired!",{accountName:e.name})}showFailureSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"error"})}createAccountPairingFailureSnackbarLabel(){return E.a.t("webinar","Pairing failed, please try again or check your configuration")}setPageTitle(){this.docLayoutService.header.showTitleBar({title:E.a.t("app","Zoom"),subtitle:E.a.t("webinar","Manage your Zoom accounts. For more info read our Knowledge Base"),fullWidth:!0})}setActionButtons(){const e=[{properties:{BgClass:"bg-positive-green",textClass:"text-white",icons:["plus"],tooltipText:E.a.t("webinar","New Account"),tooltipPosition:"bottom"},onClick:()=>{this.openAccountRightPanel()}}];this.docLayoutService.actionButtons.setActionButtons(e)}openAccountRightPanel(e){let t,i;e?(t=E.a.t("webinar","Edit Account"),i=E.a.t("webinar","Edit the details of your account to update it")):(t=E.a.t("webinar","New Account"),i=E.a.t("webinar","Fill in all the mandatory details in order to create a new account"));const s={isEditMode:!!e,accountId:e?e.id:null,accountName:e?e.name:null,accountDescription:e?e.description:null,clientId:e?e.clientId:null,clientSecret:e?e.clientSecret:null,sessionType:e?(n=e.sessionType,{zoomv2meeting:"meeting",zoomv2webinar:"webinar"}[n]):"meeting",sessionLimitCourses:e&&e.sessionLimitCourses>0?e.sessionLimitCourses:null,sessionLimitAccount:e&&e.sessionLimitAccount>0?e.sessionLimitAccount:null,sessionLimitConcurrentRooms:e&&e.sessionLimitConcurrentRooms>0?e.sessionLimitConcurrentRooms:null};var n;this.pageService.rightPanel.setWidth(500).setTitle(t).setDescription(i).setContent({component:OD,params:s}).open()}fetchAccounts(){this.showLoader=!0,this.uiComponent.checkForChanges(),this.zoomusService.fetchAccounts({term:this.searchFilterValue,page:this.tablePaginator.pageIndex+1,page_size:this.tablePaginator.pageSize,sort:`${this.tableActiveSorting}.${this.tableActiveSortingDir}`}).subscribe(e=>{const t=[];for(const s of e.data.items)t.push({id:s.id,clientId:s.app_key,clientSecret:s.app_secret,name:s.name,description:s.description,createdAt:Qv.a.unix(s.created_at).toDate(),accessTokenStatus:s.paired?cD:rD,sessionType:s.session_type,sessionLimitCourses:s.max_sessions_per_course,sessionLimitAccount:s.max_sessions,sessionLimitConcurrentRooms:s.max_concurrent_sessions});const{total_count:i}=e.data;this.tablePaginator.length=i,this.mapTableData(t),this.showLoader=!1,this.uiComponent.checkForChanges()})}mapTableData(e){this.tableData=[],e.forEach(e=>{this.tableData.push(e)})}handleAccountCreated(e,t){if("success"===e){const e=this.createAccountCreationSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountPaired(e,t){if("success"===e){const e=this.createAccountPairingSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountEdited(e,t){if("success"===e){const e=this.createAccountEditSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountDeleted(e){const t=this.createAccountDeleteSuccessSnackbarLabel(e);this.showSuccessSnackbar(t)}watchPairing(e,t){const i=Math.random();this.snackbarIntervals[i]=setInterval(()=>{const s=window.localStorage.getItem(oD(e.id));s&&(window.localStorage.removeItem(oD(e.id)),clearInterval(this.snackbarIntervals[i]),delete this.snackbarIntervals[i],this.zoomusStore.dispatch(new bD({item:s,account:e,action:t})))},200),setTimeout(()=>{this.snackbarIntervals[i]&&(clearInterval(this.snackbarIntervals[i]),window.localStorage.removeItem(oD(e.id)),this.zoomusStore.dispatch(new vD))},4e4)}createSnackbar(e,t,i){switch(i){case"create":this.handleAccountCreated(e,t);break;case"edit":this.handleAccountEdited(e,t);break;case"pair":this.handleAccountPaired(e,t);break;case"delete":this.handleAccountDeleted(t)}}setDeleteDialogParams(){return{id:"delete-checklist-dialog",width:460,height:210,title:E.a.t("standard","Delete Account"),content:E.a.t("standard","Are you sure you want to delete the selected account?<br>If you delete it, it will be definitely removed from the system and you will need to reassign all of the events created with this account to a different account. If you don't reassign the events, both learners and instructors will no longer be able to access them."),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:E.a.t("standard","Delete"),slot:"end"}]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(js.a),c.dc(O.a),c.dc(s.h),c.dc(v.d),c.dc(WD.a),c.dc(v.d),c.dc(cd.a),c.dc(wD),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["zoomus-account-container"]],viewQuery:function(e,t){if(1&e&&c.md(QD,1),2&e){let e;c.Qc(e=c.sc())&&(t.uiComponent=e.first)}},features:[c.Jb],decls:2,vars:4,consts:[[3,"showLoader","tableData","tablePaginator","searchFilterValue","filtersUpdate","tableSort","tablePageChange","openDeleteDialog","beginPairing","editAccount"],["uiComponent",""]],template:function(e,t){1&e&&(c.jc(0,"zoomus-account-list",0,1),c.rc("filtersUpdate",function(e){return t.onFiltersUpdate(e)})("tableSort",function(e){return t.onTableSort(e)})("tablePageChange",function(e){return t.onTablePageChange(e)})("openDeleteDialog",function(e){return t.onOpenDeleteDialog(e)})("beginPairing",function(e){return t.onPairingRequested(e)})("editAccount",function(e){return t.onEditAccountRequested(e)}),c.ic()),2&e&&c.Dc("showLoader",t.showLoader)("tableData",t.tableData)("tablePaginator",t.tablePaginator)("searchFilterValue",t.searchFilterValue)},directives:[VD],encapsulation:2,changeDetection:0}),e})(),XD=(()=>{class e{constructor(e){this.router=e,this.platform=x.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("WebexV2App")||(this.router.navigate(["/unauthorized"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();var JD=function(e){return e.AccountSuccessfullyCreated="[Webex] Account Successfully Created",e.AccountSuccessfullyEdited="[Webex] Account Successfully Edited",e.AccountSuccessfullyDeleted="[Webex] Account Successfully Deleted",e.AccountSuccessfullyReset="[Webex] Account Successfully Reset",e}({});class ZD{constructor(e){this.payload=e,this.type=JD.AccountSuccessfullyCreated}}class eO{constructor(e){this.payload=e,this.type=JD.AccountSuccessfullyEdited}}class tO{constructor(e){this.payload=e,this.type=JD.AccountSuccessfullyDeleted}}class iO{constructor(){this.type=JD.AccountSuccessfullyReset}}let sO=(()=>{class e{constructor(e){this.backendService=e}createAccount(e){const t=this.buildPayload(e);return this.backendService.request("/learn/v1/webinar/webex/accounts","POST",t)}editAccount(e){const t=this.buildPayload(e);return this.backendService.request(`/learn/v1/webinar/webex/accounts/${e.get("id").value}`,"PUT",t)}fetchAccounts(e){const t=Object.assign(Object.assign({},e),{providers:["webexv2meeting","webexv2event","webexv2training"]});return this.backendService.request("/learn/v1/webinar/webex/accounts","GET",t)}deleteAccount(e){return this.backendService.request(`/learn/v1/webinar/webex/accounts/${e}`,"DELETE")}buildPayload(e){const t="meeting"===e.get("sessionType").value?"webexv2meeting":"event"==e.get("sessionType").value?"webexv2event":"webexv2training";return{name:e.get("accountName").value,tool:t,description:e.get("accountDescription").value,webex_id:e.get("webexId").value,password:e.get("password").value,site_name:e.get("siteName").value,site_id:e.get("siteId").value,partner_id:e.get("partnerId").value,template:e.get("sessionTemplate").value,host_listed:e.get("siteAdminOption").value,max_sessions:0|e.get("sessionLimitAccount").value,max_sessions_per_course:0|e.get("sessionLimitCourses").value,max_concurrent_sessions:0|e.get("sessionLimitConcurrentRooms").value}}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();const nO=()=>e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:Je.a.t("zoom","This field cannot contains empty spaces")};function aO(e){return{webexv2meeting:"Meeting",webexv2event:"Event",webexv2training:"Training"}[e]}function oO(e,t){if(1&e&&(c.jc(0,"div",15),c.ec(1,"textfield",6),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitCoursesTextField.type)("id",e.sessionLimitCoursesTextField.id)("floating_label",e.sessionLimitCoursesTextField.floating_label)("label",e.sessionLimitCoursesTextField.label)("max_length",e.sessionLimitCoursesTextField.max_length)("inputFormControl",e.sessionLimitCoursesTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function rO(e,t){if(1&e&&(c.jc(0,"div",15),c.ec(1,"textfield",6),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitAccountTextField.type)("id",e.sessionLimitAccountTextField.id)("floating_label",e.sessionLimitAccountTextField.floating_label)("label",e.sessionLimitAccountTextField.label)("max_length",e.sessionLimitAccountTextField.max_length)("inputFormControl",e.sessionLimitAccountTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function cO(e,t){if(1&e&&(c.jc(0,"div",15),c.ec(1,"textfield",6),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRoomsTextField.type)("id",e.sessionLimitConcurrentRoomsTextField.id)("floating_label",e.sessionLimitConcurrentRoomsTextField.floating_label)("label",e.sessionLimitConcurrentRoomsTextField.label)("max_length",e.sessionLimitConcurrentRoomsTextField.max_length)("inputFormControl",e.sessionLimitConcurrentRoomsTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}const lO=function(){return{category:"standard"}},dO=function(){return{category:"webinar"}},uO=function(){return{category:"admin"}};let hO=(()=>{class e{constructor(e){this.cdr=e,this.isEditMode=!1}ngOnInit(){this.setFormFieldsParams(),this.formGroup.valueChanges.subscribe(()=>{this.cdr.detectChanges()})}checkForChanges(){this.cdr.markForCheck()}setFormFieldsParams(){this.accountName={type:Xe.a.TEXT,id:"account-name",floating_label:!0,label:E.a.t("webinar","Account Name"),max_length:50,show_counter:!0,inputFormControl:this.formGroup.controls.accountName},this.accountDescription={type:Xe.a.TEXT,id:"account-description",floating_label:!0,label:E.a.t("app7020","Description"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.accountDescription},this.webexId={type:Xe.a.TEXT,id:"webex-id",floating_label:!0,label:E.a.t("webinar","Webex id"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.webexId},this.password={type:Xe.a.PASSWORD,id:"password",floating_label:!0,label:E.a.t("webinar","Webex password"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.password},this.siteName={type:Xe.a.TEXT,id:"client-site",floating_label:!0,label:E.a.t("webinar","Site name"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.siteName},this.siteId={type:Xe.a.TEXT,id:"client-site-id",floating_label:!0,label:E.a.t("webinar","Site id"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.siteId},this.partnerId={type:Xe.a.TEXT,id:"partner-id",floating_label:!0,label:E.a.t("webinar","Partner id"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.partnerId},this.sessionTemplate={type:Xe.a.TEXT,id:"session-template",floating_label:!0,label:E.a.t("preferences","_TEMPLATE"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.sessionTemplate},this.sessionType={id:"session-type",label:E.a.t("webinar","Session type"),inputFormControl:this.formGroup.get("sessionType"),name:"session-type"},this.sessionType.training={id:"session-type-training",floating_label:!0,label:E.a.t("setup","training")},this.sessionType.event={id:"session-type-event",floating_label:!0,label:E.a.t("conference","Event")},this.sessionType.meeting={id:"session-type-meeting",floating_label:!0,label:E.a.t("conference","Meeting")},this.siteAdminOption={id:"site-admin-option",label:E.a.t("webinar","Site admin option"),inputFormControl:this.formGroup.get("siteAdminOption"),name:"site-admin-option"},this.siteAdminOption.listed={id:"site-admin-option-listed",floating_label:!0,label:E.a.t("webinar","Listed")},this.siteAdminOption.unlisted={id:"site-admin-option-unlisted",floating_label:!0,label:E.a.t("webinar","Unlisted")},this.sessionLimitCoursesTextField={type:Xe.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:E.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitCourses")},this.sessionLimitAccountTextField={type:Xe.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:E.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitAccount")},this.sessionLimitConcurrentRoomsTextField={type:Xe.a.NUMBER,id:"session-limit-concurrents",floating_label:!0,label:E.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitConcurrentRooms")};const e=!!this.formGroup.get("sessionLimitCourses").value;this.sessionLimitCoursesCheckbox={label:E.a.t("webinar","Set session limits for courses"),inputFormControl:new Ke.e(e),checked:e},this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitCoursesCheckbox").setValue(e)});const t=!!this.formGroup.get("sessionLimitAccount").value;this.sessionLimitAccountCheckbox={label:E.a.t("webinar","Set session limits per accounts"),inputFormControl:new Ke.e(t),checked:t},this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitAccountCheckbox").setValue(e)});const i=!!this.formGroup.get("sessionLimitConcurrentRooms").value;this.sessionLimitConcurrentRoomsCheckbox={label:E.a.t("webinar","Set session for concurrent rooms"),inputFormControl:new Ke.e(i),checked:i},this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitConcurrentRoomsCheckbox").setValue(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["webex-account-panel-ui"]],inputs:{formGroup:"formGroup",isEditMode:"isEditMode"},decls:66,vars:120,consts:[[1,"webex-create-account"],[1,"border-top-wrapper",3,"formGroup"],[1,"webex-account-info-container"],[1,"details-container"],[1,"bold-subtitle"],[1,"webex-account-text-field-margin"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator"],[1,"webex-account-text-field-margin-no-bottom"],[1,"border-top-wrapper","webex-account-info-container"],[1,"bold-subtitle","options-subtitle"],[3,"label","value","name","enabled","inputFormControl"],[1,"text-grey-mid","hint","options-label"],[1,"options-container"],[3,"inputFormControl","checked","label"],["class","webex-account-margin-huge",4,"ngIf"],[1,"webex-account-margin-huge"]],template:function(e,t){1&e&&(c.jc(0,"section",0),c.jc(1,"form",1),c.jc(2,"div",2),c.jc(3,"div",3),c.jc(4,"div",4),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"div",5),c.ec(8,"textfield",6),c.ic(),c.jc(9,"div",5),c.ec(10,"textfield",6),c.ic(),c.jc(11,"div",5),c.ec(12,"textfield",6),c.ic(),c.jc(13,"div",5),c.ec(14,"textfield",6),c.ic(),c.jc(15,"div",5),c.ec(16,"textfield",6),c.ic(),c.jc(17,"div",5),c.ec(18,"textfield",6),c.ic(),c.jc(19,"div",5),c.ec(20,"textfield",6),c.ic(),c.jc(21,"div",7),c.ec(22,"textfield",6),c.ic(),c.ic(),c.ic(),c.jc(23,"div",8),c.jc(24,"div",3),c.jc(25,"div",9),c.fd(26),c.wc(27,"t"),c.ic(),c.jc(28,"div"),c.ec(29,"radio",10),c.ic(),c.jc(30,"div"),c.ec(31,"radio",10),c.ec(32,"div",11),c.ic(),c.jc(33,"div"),c.ec(34,"radio",10),c.ec(35,"div",11),c.ic(),c.ic(),c.ic(),c.jc(36,"div",8),c.jc(37,"div",3),c.jc(38,"div",9),c.fd(39),c.wc(40,"t"),c.ic(),c.jc(41,"div"),c.ec(42,"radio",10),c.ic(),c.jc(43,"div"),c.ec(44,"radio",10),c.ec(45,"div",11),c.ic(),c.ic(),c.ic(),c.jc(46,"div",8),c.jc(47,"div",3),c.jc(48,"div",9),c.fd(49),c.wc(50,"t"),c.ic(),c.jc(51,"div",12),c.jc(52,"div"),c.ec(53,"checkbox",13),c.ic(),c.dd(54,oO,2,7,"div",14),c.wc(55,"async"),c.ic(),c.jc(56,"div",12),c.jc(57,"div"),c.ec(58,"checkbox",13),c.ic(),c.dd(59,rO,2,7,"div",14),c.wc(60,"async"),c.ic(),c.jc(61,"div",12),c.jc(62,"div"),c.ec(63,"checkbox",13),c.ic(),c.dd(64,cO,2,7,"div",14),c.wc(65,"async"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("formGroup",t.formGroup),c.Mb(4),c.hd(" ",c.yc(6,98,"General Information",c.Hc(116,lO))," "),c.Mb(3),c.Dc("type",t.accountName.type)("id",t.accountName.id)("floating_label",t.accountName.floating_label)("label",t.accountName.label)("max_length",t.accountName.max_length)("inputFormControl",t.accountName.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.accountDescription.type)("id",t.accountDescription.id)("floating_label",t.accountDescription.floating_label)("label",t.accountDescription.label)("max_length",t.accountDescription.max_length)("inputFormControl",t.accountDescription.inputFormControl)("showRequiredFieldIndicator",!1),c.Mb(2),c.Dc("type",t.webexId.type)("id",t.webexId.id)("floating_label",t.webexId.floating_label)("label",t.webexId.label)("max_length",t.webexId.max_length)("inputFormControl",t.webexId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.password.type)("id",t.password.id)("floating_label",t.password.floating_label)("label",t.password.label)("max_length",t.password.max_length)("inputFormControl",t.password.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.siteName.type)("id",t.siteName.id)("floating_label",t.siteName.floating_label)("label",t.siteName.label)("max_length",t.siteName.max_length)("inputFormControl",t.siteName.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.siteId.type)("id",t.siteId.id)("floating_label",t.siteId.floating_label)("label",t.siteId.label)("max_length",t.siteId.max_length)("inputFormControl",t.siteId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.partnerId.type)("id",t.partnerId.id)("floating_label",t.partnerId.floating_label)("label",t.partnerId.label)("max_length",t.partnerId.max_length)("inputFormControl",t.partnerId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.sessionTemplate.type)("id",t.sessionTemplate.id)("floating_label",t.sessionTemplate.floating_label)("label",t.sessionTemplate.label)("max_length",t.sessionTemplate.max_length)("inputFormControl",t.sessionTemplate.inputFormControl)("showRequiredFieldIndicator",!1),c.Mb(4),c.hd(" ",c.yc(27,101,"Session type",c.Hc(117,dO))," "),c.Mb(3),c.Dc("label",t.sessionType.meeting.label)("value","meeting")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(2),c.Dc("label",t.sessionType.training.label)("value","training")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(3),c.Dc("label",t.sessionType.event.label)("value","event")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(5),c.hd(" ",c.yc(40,104,"Site admin option",c.Hc(118,dO))," "),c.Mb(3),c.Dc("label",t.siteAdminOption.listed.label)("value",!0)("name",t.siteAdminOption.name)("enabled",!t.siteAdminOption.inputFormControl.readonly)("inputFormControl",t.siteAdminOption.inputFormControl),c.Mb(2),c.Dc("label",t.siteAdminOption.unlisted.label)("value",!1)("name",t.siteAdminOption.name)("enabled",!t.siteAdminOption.inputFormControl.readonly)("inputFormControl",t.siteAdminOption.inputFormControl),c.Mb(5),c.hd(" ",c.yc(50,107,"Options",c.Hc(119,uO))," "),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitCoursesCheckbox.inputFormControl)("checked",t.sessionLimitCoursesCheckbox.checked)("label",t.sessionLimitCoursesCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(55,110,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCoursesTextField.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitAccountCheckbox.inputFormControl)("checked",t.sessionLimitAccountCheckbox.checked)("label",t.sessionLimitAccountCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(60,112,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccountTextField.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl)("checked",t.sessionLimitConcurrentRoomsCheckbox.checked)("label",t.sessionLimitConcurrentRoomsCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(65,114,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRoomsTextField.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value||!1))},directives:[Ke.y,Ke.p,Ke.i,_t.a,jn.a,Fn.a,Ae.p],pipes:[E.b,Ae.b],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}webex-account-panel-ui .bold-subtitle{padding-bottom:6px;font-weight:600;font-size:14px;line-height:18px}webex-account-panel-ui .border-top-wrapper{border-top:1px solid var(--ui-color-badge-background-light)}webex-account-panel-ui .details-container{padding:24px 0}webex-account-panel-ui .options-subtitle{margin-bottom:16px}webex-account-panel-ui .options-label{padding-left:24px}webex-account-panel-ui .docebo-radio{margin-bottom:0}webex-account-panel-ui .webex-account-limit-list{padding:24px}webex-account-panel-ui .webex-account-redirect-info{display:flex;align-items:center;padding:1rem 1.5rem;padding:var(--hyd-spacing-sm) var(--hyd-spacing-md)}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-redirect-info span{margin-left:29px}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-redirect-info span{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-redirect-info span{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-redirect-info span{margin-right:29px}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-margin{margin-left:12px}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-margin{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-margin{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-margin{margin-right:12px}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-margin-huge{margin-left:26px}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-margin-huge{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-margin-huge{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-margin-huge{margin-right:26px}webex-account-panel-ui .webex-account-info-container{padding:0 1.5rem;padding:0 var(--hyd-spacing-md);box-sizing:border-box}webex-account-panel-ui .webex-account-text-field-margin{margin:16px 0 24px}webex-account-panel-ui .webex-account-text-field-margin-no-bottom{margin:16px 0 0}"],encapsulation:2,changeDetection:0}),e})();const pO=["uiComponent"];let mO=(()=>{class e extends Uc.a{constructor(t,i,s,n){super(),this.pageService=t,this.webexService=i,this.webexStore=s,this.translationService=n,this.isEditMode=!1,this.notMoreThan=(e,t)=>i=>i.value>e?{notMoreThan:this.translationService.instant("Max limit is {max} {things}",{category:"standard",max:e,things:t})}:null,this.baseRedirectUri=e.createBaseRedirectUri(),this.oauthRedirectUriTranslatable=E.a.t("webinar","Webex Oauth redirect URL:")}static createBaseRedirectUri(){return`${x.b.getInstance().getFullLmsCustomUrl()}/learn/webex`}ngOnInit(){this.rightPanel=this.pageService.rightPanel,this.setFormGroup()}ngAfterViewInit(){this.setPanelActions()}ngOnDestroy(){super.ngOnDestroy(),this.rightPanel.buttonsEnabled()}setPanelActions(){const e=[],t=E.a.t("standard",this.isEditMode?"Confirm":"Create");e.push({type:"normal",properties:{text:t},customClasses:"float-ltr-right-clear-none",handler:()=>{this.checkCustomFormValidations(),this.form.get("webexId").errors||this.form.get("webexId").setErrors(null),this.form.valid?(this.cleanFormValues(this.form),this.isEditMode?this.editAccount():this.createAccount()):(Object(Vw.l)(this.form),this.form.setValue(this.form.value))}}),e.push({type:"cancel",properties:{text:E.a.t("standard","Cancel")},customClasses:"float-ltr-right-clear-none",handler:e=>{e.close()}}),this.rightPanel.setActions(e)}createAccount(){this.rightPanel.buttonsDisabled(),this.webexService.createAccount(this.form).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{this.accountName=e.data.name,this.accountId=e.data.id,this.sessionType=aO(e.data.tool);const t={id:e.data.id,name:e.data.name,description:e.data.description,createdAt:Qv()().toDate(),webexId:e.data.webex_id,password:e.data.password,siteName:e.data.site_name,siteId:e.data.site_id,partnerId:e.data.partner_id,sessionType:this.sessionType,sessionTemplate:e.data.template,siteAdminOption:e.data.host_listed,sessionLimitCourses:0|this.form.get("sessionLimitCourses").value,sessionLimitAccount:0|this.form.get("sessionLimitAccount").value,sessionLimitConcurrentRooms:0|this.form.get("sessionLimitConcurrentRooms").value};this.webexStore.dispatch(new ZD(t)),this.rightPanel.close()},this.accountUpsertErrorCallback())}editAccount(){this.rightPanel.buttonsDisabled(),this.webexService.editAccount(this.form).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{var t=this.accountName;this.accountName=e.data.name,this.sessionType=aO(e.data.tool);const i={id:e.data.id,name:t,description:e.data.description,createdAt:Qv()().toDate(),webexId:e.data.webex_id,password:e.data.password,siteName:e.data.site_name,siteId:e.data.site_id,partnerId:e.data.partner_id,sessionTemplate:e.data.template,siteAdminOption:e.data.host_listed,sessionLimitCourses:e.data.max_sessions_per_course,sessionLimitAccount:e.data.max_sessions,sessionLimitConcurrentRooms:e.data.max_concurent_sessions};this.webexStore.dispatch(new eO(i)),this.rightPanel.close()},this.accountUpsertErrorCallback())}accountUpsertErrorCallback(){return e=>{1002===e.code&&(Object(Vw.l)(this.form),this.form.get("webexId").setErrors({notUnique:E.a.t("webinar","Multiple accounts cannot use the same Client ID")}),Object(Vw.l)(this.form),this.uiComponent.checkForChanges(),this.rightPanel.buttonsEnabled())}}cleanFormValues(e){e.get("sessionLimitCoursesCheckbox").value||e.get("sessionLimitCourses").setValue(0),e.get("sessionLimitAccountCheckbox").value||e.get("sessionLimitAccount").setValue(0),e.get("sessionLimitConcurrentRoomsCheckbox").value||e.get("sessionLimitConcurrentRooms").setValue(0)}setFormGroup(){this.form=new Ke.h({id:new Ke.e(this.accountId),accountName:new Ke.e(this.accountName),accountDescription:new Ke.e(this.accountDescription),webexId:new Ke.e(this.webexId),password:new Ke.e(this.password),siteName:new Ke.e(this.siteName),siteId:new Ke.e(this.siteId),partnerId:new Ke.e(this.partnerId),sessionTemplate:new Ke.e(this.sessionTemplate),sessionType:new Ke.e(this.sessionType),siteAdminOption:new Ke.e(this.siteAdminOption),sessionLimitCourses:new Ke.e(this.sessionLimitCourses),sessionLimitCoursesCheckbox:new Ke.e(!!this.sessionLimitCourses),sessionLimitAccount:new Ke.e(this.sessionLimitAccount),sessionLimitAccountCheckbox:new Ke.e(!!this.sessionLimitAccount),sessionLimitConcurrentRooms:new Ke.e(this.sessionLimitConcurrentRooms),sessionLimitConcurrentRoomsCheckbox:new Ke.e(!!this.sessionLimitConcurrentRooms)}),this.checkCustomFormValidations()}checkCustomFormValidations(){this.form.get("accountName").setValidators([Ke.x.required,e=>"string"==typeof e.value&&e.value.match("^\\s+$")?{notHaveOnlyBlankCharacters:Je.a.t("zoom","This field cannot contains empty spaces")}:null,Ke.x.maxLength(255)]),this.form.get("accountDescription").setValidators([Ke.x.maxLength(255)]),this.form.get("webexId").setValidators([Ke.x.required,Ke.x.maxLength(255)]),this.form.get("password").setValidators([Ke.x.required,nO(),Ke.x.maxLength(255)]),this.form.get("siteName").setValidators([Ke.x.required,nO(),Ke.x.maxLength(255)]),this.form.get("siteId").setValidators([Ke.x.required,nO(),Ke.x.maxLength(255)]),this.form.get("partnerId").setValidators([Ke.x.required,nO(),Ke.x.maxLength(255)]),this.form.get("sessionTemplate").setValidators([Ke.x.maxLength(255)]),this.form.get("sessionType").setValidators([Ke.x.required]),this.form.get("siteAdminOption").setValidators([Ke.x.required]),this.form.get("sessionLimitCourses").setValidators([this.notMoreThan(999,"sessions")]),this.form.get("sessionLimitAccount").setValidators([this.notMoreThan(999,"sessions")]),this.form.get("sessionLimitConcurrentRooms").setValidators([this.notMoreThan(999,"rooms")]),this.form.get("accountName").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("webexId").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("password").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("siteName").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(O.a),c.dc(sO),c.dc(v.d),c.dc(js.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["webex-account-panel-container"]],viewQuery:function(e,t){if(1&e&&c.md(pO,1),2&e){let e;c.Qc(e=c.sc())&&(t.uiComponent=e.first)}},inputs:{isEditMode:"isEditMode",accountId:"accountId",accountName:"accountName",accountDescription:"accountDescription",webexId:"webexId",password:"password",siteName:"siteName",siteId:"siteId",partnerId:"partnerId",sessionTemplate:"sessionTemplate",sessionType:"sessionType",siteAdminOption:"siteAdminOption",sessionLimitCourses:"sessionLimitCourses",sessionLimitAccount:"sessionLimitAccount",sessionLimitConcurrentRooms:"sessionLimitConcurrentRooms"},features:[c.Lb([sO]),c.Jb],decls:2,vars:1,consts:[[3,"formGroup","oauthRedirectUri","oauthRedirectUriTranslatable"],["uiComponent",""]],template:function(e,t){1&e&&c.ec(0,"webex-account-panel-ui",0,1),2&e&&c.Dc("formGroup",t.form)},directives:[hO,Ke.p,Ke.i],styles:["webex-account-panel-ui{height:100%;overflow-y:auto;overflow-x:hidden;display:block}"],encapsulation:2,changeDetection:0}),e})();const gO={isVisible:!0,type:Zd.a.BLANK001,title:E.a.t("webinar","No Webex Accounts Found"),subtitle:E.a.t("webinar","Click the Add button in the top right corner to add a new Webex account!")},bO={isVisible:!0,type:Zd.a.EMPTY001,title:E.a.t("standard","Whoops, No results found!"),subtitle:E.a.t("myteam","Please try again using different search/filters criteria.")},fO={mode:Oe.a.push,viewOptionLabel:E.a.t("standard","SORT BY"),filters:new Pe.a([{title:E.a.t("standard","Search"),code:"search",type:Oe.d.free_search_filter,params:{placeholder:E.a.t("standard","Search...")}}]),appliedFiltersNumber:new Pe.a(null),displayedItemsNumber:new Pe.a(null),viewOptions:new Pe.a(null),disableViewOptions:!1,elementLabels:{singular:E.a.t("standard","items"),plural:E.a.t("standard","items")}},vO={columnName:"createdAt",dir:Ni.a.DESC},_O={name:{headerLabel:E.a.t("webinar","Account Name"),fieldName:"name",columnName:"name",sortable:!0},description:{headerLabel:E.a.t("app7020","Description"),fieldName:"description",columnName:"description",sortable:!1},createdAt:{headerLabel:E.a.t("standard","Creation Date"),fieldName:"createdAt",columnName:"createdAt",sortable:!0,type:"date",format:"MM/DD/YYYY"},sessionType:{headerLabel:E.a.t("webinar","Session type"),fieldName:"sessionType",columnName:"sessionType",sortable:!1},ellipsis:{}};function wO(e,t){if(1&e&&(c.fd(0),c.wc(1,"t")),2&e){const e=c.vc(3);c.gd(c.xc(1,1,e.tableColumns.createdAt.headerLabel))}}function yO(e,t){1&e&&(c.fd(0),c.wc(1,"HDateTime")),2&e&&c.hd(" ",c.zc(1,1,t.item.createdAt,null,"lll")," ")}function CO(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-table",7),c.rc("sort",function(t){return c.Uc(e),c.vc(2).onTableSort(t)}),c.ec(1,"hyd-table-column-text",8),c.ec(2,"hyd-table-column-text",8),c.jc(3,"hyd-table-column",9),c.jc(4,"hyd-table-column-header"),c.dd(5,wO,2,3,"ng-template"),c.ic(),c.jc(6,"hyd-table-column-cell"),c.dd(7,yO,2,5,"ng-template"),c.ic(),c.ic(),c.ec(8,"hyd-table-column-text",8),c.ec(9,"hyd-table-column-ellipsis",10),c.ic()}if(2&e){const e=c.vc(2);c.Dc("data",e.tableData)("sorting",e.tableDefaultSorting),c.Mb(1),c.Dc("headerLabel",e.tableColumns.name.headerLabel)("fieldName",e.tableColumns.name.fieldName)("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.description.headerLabel)("fieldName",e.tableColumns.description.fieldName)("columnName",e.tableColumns.description.columnName)("sortable",e.tableColumns.description.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.createdAt.columnName)("sortable",e.tableColumns.createdAt.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.sessionType.headerLabel)("fieldName",e.tableColumns.sessionType.fieldName)("columnName",e.tableColumns.sessionType.columnName)("sortable",e.tableColumns.sessionType.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.ellipsis.columnName)("actions",e.tableColumns.ellipsis.actions)("orientation",e.tableColumns.ellipsis.orientation)}}function SO(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-paginator",11),c.rc("pageChange",function(t){return c.Uc(e),c.vc(2).onTablePageChange(t)}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("pageIndex",e.tablePaginator.pageIndex)("pageSize",e.tablePaginator.pageSize)("length",e.tablePaginator.length)("pageSizeAutoAllowed",e.tablePaginator.pageSizeAutoAllowed)}}function TO(e,t){if(1&e&&c.ec(0,"blankslate",12),2&e){const e=c.vc(2);c.Dc("ngClass","blankslate-container")("isVisible",e.blankslateWithFilters.isVisible)("type",e.blankslateWithFilters.type)("title",e.blankslateWithFilters.title)("subtitle",e.blankslateWithFilters.subtitle)}}function kO(e,t){if(1&e){const e=c.kc();c.jc(0,"data-browser",3),c.rc("onFiltersUpdate",function(t){return c.Uc(e),c.vc().onDataBrowserFiltersUpdate(t)}),c.dd(1,CO,10,19,"hyd-table",4),c.dd(2,SO,1,4,"hyd-paginator",5),c.dd(3,TO,1,5,"blankslate",6),c.ic()}if(2&e){const e=c.vc();c.Dc("dataBrowserSource",e.dataBrowserSource),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showBlankslateWithFilters())}}function IO(e,t){if(1&e&&(c.jc(0,"blankslate",13),c.fd(1," > "),c.ic()),2&e){const e=c.vc();c.Dc("isVisible",e.blankslateWithoutFilters.isVisible)("type",e.blankslateWithoutFilters.type)("title",e.blankslateWithoutFilters.title)("subtitle",e.blankslateWithoutFilters.subtitle)}}let xO=(()=>{class e{constructor(e){this.cdr=e,this.filtersUpdate=new c.q,this.tableSort=new c.q,this.tablePageChange=new c.q,this.openDeleteDialog=new c.q,this.editAccount=new c.q,this.blankslateWithoutFilters=gO,this.blankslateWithFilters=bO,this.dataBrowserSource=fO,this.tableDefaultSorting=vO,this.tableColumns=_O,this.setTableEllipsisColumn()}showBlankslateWithoutFilters(){return!this.showLoader&&0===this.tableData.length&&""===this.searchFilterValue}showBlankslateWithFilters(){return!this.showLoader&&0===this.tableData.length&&""!==this.searchFilterValue}showDataBrowser(){return this.tableData.length>0||""!==this.searchFilterValue}showTable(){return!this.showLoader&&this.tableData.length>0}onDataBrowserFiltersUpdate(e){this.filtersUpdate.emit(e)}onTableSort(e){this.tableSort.emit(e)}onTablePageChange(e){this.tablePageChange.emit(e)}checkForChanges(){this.cdr.markForCheck()}setTableEllipsisColumn(){this.tableColumns.ellipsis={columnName:"ellipsis",columnWidth:"100px",alignment:Ee.a.CENTER,ellipsed:!1,orientation:"top-right",actions:[{id:"edit",title:E.a.t("app7020","Edit"),params:null,active:!1,action:e=>{this.editAccount.emit(e)}},{id:"delete",title:E.a.t("standard","Delete"),params:null,active:!1,action:e=>{this.openDeleteDialog.emit(e)}}]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["webex-account-list"]],inputs:{tableData:"tableData",searchFilterValue:"searchFilterValue",showLoader:"showLoader",tablePaginator:"tablePaginator"},outputs:{filtersUpdate:"filtersUpdate",tableSort:"tableSort",tablePageChange:"tablePageChange",openDeleteDialog:"openDeleteDialog",editAccount:"editAccount"},decls:3,vars:2,consts:[[1,"webex-manage"],["class","data-browser",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","blankslate-container",3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"data-browser",3,"dataBrowserSource","onFiltersUpdate"],["class","hyd-table",3,"data","sorting","sort",4,"ngIf"],["class","hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange",4,"ngIf"],[3,"ngClass","isVisible","type","title","subtitle",4,"ngIf"],[1,"hyd-table",3,"data","sorting","sort"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnName","sortable"],[3,"columnName","actions","orientation"],[1,"hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange"],[3,"ngClass","isVisible","type","title","subtitle"],[1,"blankslate-container",3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(c.jc(0,"section",0),c.dd(1,kO,4,4,"data-browser",1),c.dd(2,IO,2,4,"blankslate",2),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",t.showDataBrowser()),c.Mb(1),c.Dc("ngIf",t.showBlankslateWithoutFilters()))},directives:[Ae.p,Le.a,Fe.a,Re.a,Ne.c,Ne.d,Ne.b,Ue.a,je.b,ld.a,Ae.n],pipes:[E.b,Xt.a],styles:["webex-account-list .blankslate-container{margin-top:91px}webex-account-list .hyd-paginator{position:fixed;bottom:0;left:0;width:100%}webex-account-list .webex-manage{overflow:hidden}webex-account-list .webex-manage .mdl-cell.mdl-cell--12-col{margin-top:0;margin-bottom:0}"],encapsulation:2,changeDetection:0}),e})();const DO=Object(v.k)("learn-webex"),OO=Object(v.m)(DO,e=>e);var EO=function(e){return e.NAME="name",e.CREATION="created_at",e}({}),PO=function(e){return e.ASC="asc",e.DESC="desc",e}({});const MO=["uiComponent"];let AO=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a,o,r,c){super(),this.translationService=e,this.pageService=t,this.docLayoutService=i,this.router=s,this.webexStore=n,this.permissionManagerService=a,this.appStore=o,this.windowService=r,this.webexService=c,this.showLoader=!0,this.searchFilterValue="",this.tablePaginator={pageIndex:0,pageSize:15,length:0,pageSizeAutoAllowed:!0},this.tableActiveSorting=EO.CREATION,this.tableActiveSortingDir=PO.DESC,this.tableData=[],this.webexAccountSelector$=this.webexStore.pipe(Object(v.p)(OO)),this.pageInitialized=!1,this.snackbarIntervals=[],this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Webex V2",href:this.router.url}]),this.hasUserViewPermission$=a.can(BD.a.USER_VIEW),this.webexAccountSelector$.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{if(["AccountCreated","AccountEdited"].includes(e.status))switch(e.status){case"AccountCreated":this.fetchAccounts(),this.handleAccountCreated("success",e.lastCreatedAccount);break;case"AccountEdited":this.fetchAccounts(),this.handleAccountEdited("success",e.lastEditedAccount)}"AccountDeleted"===e.status&&e.lastDeletedAccountPartial&&(this.fetchAccounts(),this.handleAccountDeleted(e.lastDeletedAccountPartial))})}ngOnInit(){this.pageService.ready().pipe(Object(ee.a)(1)).subscribe(()=>{this.pageDialog=this.pageService.dialog,this.rightPanel=this.pageService.rightPanel,this.setPageTitle(),this.setActionButtons(),this.pageInitialized=!0})}ngAfterViewInit(){this.fetchAccounts()}ngOnDestroy(){this.docLayoutService.actionButtons.clearActionButtons(),super.ngOnDestroy(),this.webexStore.dispatch(new iO)}onFiltersUpdate(e){this.searchFilterValue=e.search?e.search:"",this.fetchAccounts()}onTableSort(e){switch(this.tableActiveSortingDir=e.dir,e.columnName){case"createdAt":this.tableActiveSorting=EO.CREATION;break;case"name":this.tableActiveSorting=EO.NAME}this.fetchAccounts()}onTablePageChange(e){const{pageIndex:t}=e;let{pageSize:i}=e;i<1&&(i=this.getAutoPageSize()),this.tablePaginator.pageSize=i,this.tablePaginator.pageIndex=t,this.fetchAccounts()}onOpenDeleteDialog(e){const t=e.id,i=e.name;this.docLayoutService.dialog.showCommonDialog(this.setDeleteDialogParams()).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.webexService.deleteAccount(t).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{e.actionSuccess.next(!0),this.webexStore.dispatch(new tO({id:t,name:i}))})})}onEditAccountRequested(e){this.openAccountRightPanel(e)}getAutoPageSize(){const e=document.querySelector("webex-account-list");return Math.floor((window.innerHeight-e.offsetTop-90-80-39)/38)}createAccountCreationSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully created!",{accountName:e?e.name:""})}createAccountFaliureSnackbarLabel(e){return E.a.t("webinar","There were error creating <b>{accountName}</b>!",{accountName:e?e.name:""})}createAccountEditSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully edited!",{accountName:e?e.name:""})}editAccountFaliureSnackbarLabel(e){return E.a.t("webinar","There were error updating <b>{accountName}</b>!",{accountName:e?e.name:""})}createAccountDeleteSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully deleted!",{accountName:e.name})}deleteAccountFaliureSnackbarLabel(e){return E.a.t("webinar","There were error deleting <b>{accountName}</b>!",{accountName:e.name})}showFailureSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"error"})}showSuccessSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"success"})}setPageTitle(){this.docLayoutService.header.showTitleBar({title:E.a.t("app","Webex V2"),subtitle:E.a.t("webinar","Manage your Webex accounts. For more info read our Knowledge Base"),fullWidth:!0,mode:"bordered"})}setActionButtons(){const e=[{properties:{BgClass:"bg-positive-green",textClass:"text-white",icons:["plus"],tooltipText:E.a.t("webinar","New Account"),tooltipPosition:"bottom"},onClick:()=>{this.openAccountRightPanel()}}];this.docLayoutService.actionButtons.setActionButtons(e)}openAccountRightPanel(e){let t,i;e?(t=E.a.t("webinar","Edit Account"),i=E.a.t("webinar","Edit the details of your account to update it")):(t=E.a.t("webinar","New Account"),i=E.a.t("webinar","Fill in all the mandatory details in order to create a new account"));const s={isEditMode:!!e,accountId:e?e.id:null,accountName:e?e.name:null,accountDescription:e?e.description:null,webexId:e?e.webexId:null,password:e?e.password:null,siteName:e?e.siteName:null,siteId:e?e.siteId:null,partnerId:e?e.partnerId:null,sessionTemplate:e?e.sessionTemplate:"",siteAdminOption:!e||e.siteAdminOption,sessionType:e?e.sessionType.toLowerCase():"meeting",sessionLimitCourses:e&&e.sessionLimitCourses>0?e.sessionLimitCourses:null,sessionLimitAccount:e&&e.sessionLimitAccount>0?e.sessionLimitAccount:null,sessionLimitConcurrentRooms:e&&e.sessionLimitConcurrentRooms>0?e.sessionLimitConcurrentRooms:null};this.pageService.rightPanel.setWidth(500).setTitle(t).setDescription(i).setContent({component:mO,params:s}).open()}fetchAccounts(){this.showLoader=!0,this.webexService.fetchAccounts({term:this.searchFilterValue,page:this.tablePaginator.pageIndex+1,page_size:this.tablePaginator.pageSize,sort:`${this.tableActiveSorting}.${this.tableActiveSortingDir}`}).subscribe(e=>{const t=[];for(const s of e.data.items)t.push({id:s.id,webexId:s.webex_id,password:s.password,siteName:s.site_name,siteId:s.site_id,partnerId:s.partner_id,sessionTemplate:s.template,name:s.name,description:s.description,createdAt:Qv.a.unix(s.created_at).toDate(),siteAdminOption:s.host_listed,sessionType:aO(s.tool),sessionLimitCourses:s.max_sessions_per_course,sessionLimitAccount:s.max_sessions,sessionLimitConcurrentRooms:s.max_concurrent_sessions});const{total_count:i}=e.data;this.tablePaginator.length=i,this.mapTableData(t),this.showLoader=!1,this.uiComponent.checkForChanges()})}mapTableData(e){this.tableData=[],e.forEach(e=>{this.tableData.push(e)})}handleAccountCreated(e,t){if("success"===e){const e=this.createAccountCreationSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountFaliureSnackbarLabel(t);this.showFailureSnackbar(e)}}handleAccountEdited(e,t){if("success"===e){const e=this.createAccountEditSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.deleteAccountFaliureSnackbarLabel(t);this.showFailureSnackbar(e)}}handleAccountDeleted(e){const t=this.createAccountDeleteSuccessSnackbarLabel(e);this.showSuccessSnackbar(t)}setDeleteDialogParams(){return{id:"delete-checklist-dialog",width:460,height:210,title:E.a.t("standard","Delete Account"),content:E.a.t("standard","Are you sure you want to delete the selected account?<br>If you delete it, it will be definitely removed from the system and you will need to reassign all of the events created with this account to a different account. If you don't reassign the events, both learners and instructors will no longer be able to access them."),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:E.a.t("standard","Delete"),slot:"end"}]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(js.a),c.dc(O.a),c.dc(M.a),c.dc(s.h),c.dc(v.d),c.dc(WD.a),c.dc(v.d),c.dc(cd.a),c.dc(sO))},e.\u0275cmp=c.Xb({type:e,selectors:[["webex-account-container"]],viewQuery:function(e,t){if(1&e&&c.md(MO,1),2&e){let e;c.Qc(e=c.sc())&&(t.uiComponent=e.first)}},features:[c.Jb],decls:2,vars:4,consts:[[3,"showLoader","tableData","tablePaginator","searchFilterValue","filtersUpdate","tableSort","tablePageChange","openDeleteDialog","editAccount"],["uiComponent",""]],template:function(e,t){1&e&&(c.jc(0,"webex-account-list",0,1),c.rc("filtersUpdate",function(e){return t.onFiltersUpdate(e)})("tableSort",function(e){return t.onTableSort(e)})("tablePageChange",function(e){return t.onTablePageChange(e)})("openDeleteDialog",function(e){return t.onOpenDeleteDialog(e)})("editAccount",function(e){return t.onEditAccountRequested(e)}),c.ic()),2&e&&c.Dc("showLoader",t.showLoader)("tableData",t.tableData)("tablePaginator",t.tablePaginator)("searchFilterValue",t.searchFilterValue)},directives:[xO],encapsulation:2,changeDetection:0}),e})();function LO(e,t){if(1&e&&(c.jc(0,"ui-input-select-option",23),c.fd(1),c.ic()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.hd(" ",e.label," ")}}const jO=function(){return{category:"error"}};function FO(e,t){1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e&&(c.Mb(1),c.hd(" ",c.yc(2,1,"Something is missing, please select a Docebo Field",c.Hc(4,jO))," "))}function RO(e,t){if(1&e&&(c.jc(0,"ui-input-select",20),c.wc(1,"t"),c.wc(2,"t"),c.dd(3,LO,2,2,"ui-input-select-option",21),c.dd(4,FO,3,5,"ui-input-error",22),c.ic()),2&e){const e=c.vc(2);c.Dc("label",c.xc(1,6,e.doceboFieldDropdown.label))("formControl",e.doceboFieldDropdown.inputFormControl)("requiredMarker",c.xc(2,8,e.doceboFieldDropdown.requiredMarker))("required",e.doceboFieldDropdown.required),c.Mb(3),c.Dc("ngForOf",e.doceboFieldDropdown.options),c.Mb(1),c.Dc("ngIf",(null==e.doceboFieldDropdown.inputFormControl.errors?null:e.doceboFieldDropdown.inputFormControl.errors.required)&&e.doceboFieldDropdown.inputFormControl.dirty)}}function NO(e,t){if(1&e&&(c.jc(0,"div",11),c.jc(1,"div",3),c.jc(2,"div",12),c.fd(3),c.wc(4,"t"),c.jc(5,"div",17),c.fd(6),c.wc(7,"t"),c.ic(),c.ic(),c.jc(8,"ui-input-checkbox",18),c.jc(9,"ui-input-label"),c.fd(10),c.wc(11,"t"),c.ic(),c.jc(12,"ui-input-description"),c.fd(13),c.wc(14,"t"),c.ic(),c.ic(),c.dd(15,RO,5,10,"ui-input-select",19),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(3),c.hd(" ",c.xc(4,6,e.dictionary.attendanceTrackingTitle)," "),c.Mb(3),c.hd(" ",c.xc(7,8,e.dictionary.attendanceTrackingSubtitle)," "),c.Mb(2),c.Dc("formControl",e.attendanceTrackingCheckbox.inputFormControl),c.Mb(2),c.hd(" ",c.xc(11,10,e.dictionary.attendanceTrackingCheckboxTitle)," "),c.Mb(3),c.hd(" ",c.xc(14,12,e.dictionary.attendanceTrackingCheckboxDesc)," "),c.Mb(2),c.Dc("ngIf",e.attendanceTrackingCheckbox.inputFormControl.value)}}function UO(e,t){if(1&e&&(c.jc(0,"div",24),c.ec(1,"textfield",25),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitCoursesTextField.type)("id",e.sessionLimitCoursesTextField.id)("floating_label",e.sessionLimitCoursesTextField.floating_label)("label",e.sessionLimitCoursesTextField.label)("max_length",e.sessionLimitCoursesTextField.max_length)("inputFormControl",e.sessionLimitCoursesTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function qO(e,t){if(1&e&&(c.jc(0,"div",24),c.ec(1,"textfield",25),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitAccountTextField.type)("id",e.sessionLimitAccountTextField.id)("floating_label",e.sessionLimitAccountTextField.floating_label)("label",e.sessionLimitAccountTextField.label)("max_length",e.sessionLimitAccountTextField.max_length)("inputFormControl",e.sessionLimitAccountTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function zO(e,t){if(1&e&&(c.jc(0,"div",24),c.ec(1,"textfield",25),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRoomsTextField.type)("id",e.sessionLimitConcurrentRoomsTextField.id)("floating_label",e.sessionLimitConcurrentRoomsTextField.floating_label)("label",e.sessionLimitConcurrentRoomsTextField.label)("max_length",e.sessionLimitConcurrentRoomsTextField.max_length)("inputFormControl",e.sessionLimitConcurrentRoomsTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}const VO=function(){return{category:"standard"}},BO=function(){return{category:"webinar"}},GO=function(){return{category:"admin"}};let $O=(()=>{class e{constructor(e,t,i){this.cdr=e,this.toggleService=t,this.dictionary=i,this.isEditMode=!1,this.requiredMarker=E.a.t("standard","(Required)")}ngOnInit(){this.setFormFieldsParams(),this.formGroup.valueChanges.subscribe(()=>{this.cdr.detectChanges()})}checkForChanges(){this.cdr.markForCheck()}setFormFieldsParams(){this.name={type:Xe.a.TEXT,id:"account-name",floating_label:!0,label:E.a.t("webinar","Account Name"),max_length:50,show_counter:!0,inputFormControl:this.formGroup.controls.name},this.description={type:Xe.a.TEXT,id:"account-description",floating_label:!0,label:E.a.t("app7020","Description"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.description},this.username={type:Xe.a.TEXT,id:"username",floating_label:!0,label:E.a.t("standard","Username"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.username},this.password={type:Xe.a.PASSWORD,id:"password",floating_label:!0,label:E.a.t("shopify","Password"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.password,tooltipLabelShow:E.a.t("login","Show password"),tooltipLabelHide:E.a.t("login","Hide password")},this.serverUrl={type:Xe.a.TEXT,id:"server-url",floating_label:!0,label:E.a.t("custom_domain","_DOMAIN_NAME_"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.serverUrl},this.sessionType={id:"session-type",value:"meeting",name:"sessionType",inputFormControl:this.formGroup.get("sessionType")},this.sessionLimitCoursesTextField={type:Xe.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:E.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitCourses")},this.sessionLimitAccountTextField={type:Xe.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:E.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitAccount")},this.sessionLimitConcurrentRoomsTextField={type:Xe.a.NUMBER,id:"session-limit-concurrents",floating_label:!0,label:E.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitConcurrentRooms")},this.attendanceTrackingCheckbox={inputFormControl:this.formGroup.controls.attendanceTrackingCheckbox},this.doceboFieldDropdown={label:E.a.t("salesforce","Docebo Field"),inputFormControl:this.formGroup.controls.doceboField,options:this.doceboFieldList,required:!0,requiredMarker:this.dictionary.requiredMarkerLabel};const e=!!this.formGroup.get("sessionLimitCourses").value;this.sessionLimitCoursesCheckbox={label:E.a.t("webinar","Set session limits for courses"),inputFormControl:new Ke.e(e),checked:e},this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitCoursesCheckbox").setValue(e)});const t=!!this.formGroup.get("sessionLimitAccount").value;this.sessionLimitAccountCheckbox={label:E.a.t("webinar","Set session limits per accounts"),inputFormControl:new Ke.e(t),checked:t},this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitAccountCheckbox").setValue(e)});const i=!!this.formGroup.get("sessionLimitConcurrentRooms").value;this.sessionLimitConcurrentRoomsCheckbox={label:E.a.t("webinar","Set session for concurrent rooms"),inputFormControl:new Ke.e(i),checked:i},this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitConcurrentRoomsCheckbox").setValue(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i),c.dc(u.g),c.dc(P))},e.\u0275cmp=c.Xb({type:e,selectors:[["adobeconnect-account-panel-ui"]],inputs:{formGroup:"formGroup",isEditMode:"isEditMode",doceboFieldList:"doceboFieldList",canShowAttendanceTrackingOption:"canShowAttendanceTrackingOption"},decls:61,vars:98,consts:[[1,"adobeconnect-create-account"],[1,"border-top-wrapper",3,"formGroup"],[1,"adobeconnect-account-info-container"],[1,"details-container"],[1,"bold-subtitle"],[1,"adobeconnect-account-text-field-margin"],[3,"label","id","requiredMarker","formControl","autocomplete","maxLength"],[3,"label","id","formControl","autocomplete"],[3,"label","id","requiredMarker","formControl","autocomplete"],[3,"label","id","requiredMarker","formControl","tooltipLabelShow","tooltipLabelHide","autocomplete"],["class","border-top-wrapper adobeconnect-account-info-container",4,"ngIf"],[1,"border-top-wrapper","adobeconnect-account-info-container"],[1,"bold-subtitle","options-subtitle"],[1,"options-container"],[3,"id","label","name","value","inputFormControl"],[3,"inputFormControl","checked","label"],["class","adobeconnect-account-margin-huge",4,"ngIf"],[1,"ui-typography-subtitle","ui-color-typography-secondary"],[3,"formControl"],["ngDefaultControl","",3,"label","formControl","requiredMarker","required",4,"ngIf"],["ngDefaultControl","",3,"label","formControl","requiredMarker","required"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"adobeconnect-account-margin-huge"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator"]],template:function(e,t){1&e&&(c.jc(0,"section",0),c.jc(1,"form",1),c.jc(2,"div",2),c.jc(3,"div",3),c.jc(4,"div",4),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"div",5),c.ec(8,"ui-input-text",6),c.wc(9,"t"),c.wc(10,"t"),c.ic(),c.jc(11,"div",5),c.ec(12,"ui-input-text",7),c.wc(13,"t"),c.ic(),c.jc(14,"div",5),c.ec(15,"ui-input-text",8),c.wc(16,"t"),c.wc(17,"t"),c.ic(),c.jc(18,"div",5),c.ec(19,"ui-input-text",8),c.wc(20,"t"),c.wc(21,"t"),c.ic(),c.jc(22,"div",5),c.ec(23,"ui-input-password",9),c.wc(24,"t"),c.wc(25,"t"),c.wc(26,"t"),c.wc(27,"t"),c.ic(),c.ic(),c.ic(),c.dd(28,NO,16,14,"div",10),c.jc(29,"div",11),c.jc(30,"div",3),c.jc(31,"div",12),c.fd(32),c.wc(33,"t"),c.ic(),c.jc(34,"div",13),c.jc(35,"div"),c.ec(36,"radio",14),c.wc(37,"t"),c.ic(),c.jc(38,"div"),c.ec(39,"radio",14),c.wc(40,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(41,"div",11),c.jc(42,"div",3),c.jc(43,"div",12),c.fd(44),c.wc(45,"t"),c.ic(),c.jc(46,"div",13),c.jc(47,"div"),c.ec(48,"checkbox",15),c.ic(),c.dd(49,UO,2,7,"div",16),c.wc(50,"async"),c.ic(),c.jc(51,"div",13),c.jc(52,"div"),c.ec(53,"checkbox",15),c.ic(),c.dd(54,qO,2,7,"div",16),c.wc(55,"async"),c.ic(),c.jc(56,"div",13),c.jc(57,"div"),c.ec(58,"checkbox",15),c.ic(),c.dd(59,zO,2,7,"div",16),c.wc(60,"async"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(1),c.Dc("formGroup",t.formGroup),c.Mb(4),c.hd(" ",c.yc(6,54,"General Information",c.Hc(95,VO))," "),c.Mb(3),c.Dc("label",c.xc(9,57,t.name.label))("id",t.name.id)("requiredMarker",c.xc(10,59,t.requiredMarker))("formControl",t.name.inputFormControl)("autocomplete","off")("maxLength",t.name.max_length),c.Mb(4),c.Dc("label",c.xc(13,61,t.description.label))("id",t.description.id)("formControl",t.description.inputFormControl)("autocomplete","off"),c.Mb(3),c.Dc("label",c.xc(16,63,t.serverUrl.label))("id",t.serverUrl.id)("requiredMarker",c.xc(17,65,t.requiredMarker))("formControl",t.serverUrl.inputFormControl)("autocomplete","off"),c.Mb(4),c.Dc("label",c.xc(20,67,t.username.label))("id",t.username.id)("requiredMarker",c.xc(21,69,t.requiredMarker))("formControl",t.username.inputFormControl)("autocomplete","off"),c.Mb(4),c.Dc("label",c.xc(24,71,t.password.label))("id",t.password.id)("requiredMarker",c.xc(25,73,t.requiredMarker))("formControl",t.password.inputFormControl)("tooltipLabelShow",c.xc(26,75,t.password.tooltipLabelShow))("tooltipLabelHide",c.xc(27,77,t.password.tooltipLabelHide))("autocomplete","off"),c.Mb(5),c.Dc("ngIf",t.canShowAttendanceTrackingOption),c.Mb(4),c.hd(" ",c.yc(33,79,"Session type",c.Hc(96,BO))," "),c.Mb(4),c.Dc("id",t.sessionType.id)("label",c.xc(37,82,"Meeting"))("name",t.sessionType.name)("value","meeting")("inputFormControl",t.sessionType.inputFormControl),c.Mb(3),c.Dc("id",t.sessionType.id)("label",c.xc(40,84,"Seminar"))("name",t.sessionType.name)("value","seminar")("inputFormControl",t.sessionType.inputFormControl),c.Mb(5),c.hd(" ",c.yc(45,86,"Options",c.Hc(97,GO))," "),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitCoursesCheckbox.inputFormControl)("checked",t.sessionLimitCoursesCheckbox.checked)("label",t.sessionLimitCoursesCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(50,89,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCoursesTextField.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitAccountCheckbox.inputFormControl)("checked",t.sessionLimitAccountCheckbox.checked)("label",t.sessionLimitAccountCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(55,91,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccountTextField.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl)("checked",t.sessionLimitConcurrentRoomsCheckbox.checked)("label",t.sessionLimitConcurrentRoomsCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(60,93,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRoomsTextField.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value||!1))},directives:[Ke.y,Ke.p,Ke.i,b.gc,Ke.o,Ke.f,b.Ub,Ae.p,jn.a,Fn.a,b.Kb,b.Tb,b.Qb,b.cc,Ke.b,Ke.v,Ae.o,b.ec,b.Rb,_t.a],pipes:[E.b,Ae.b],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}adobeconnect-account-panel-ui .bold-subtitle{padding-bottom:6px;font-weight:600;font-size:14px;line-height:18px}adobeconnect-account-panel-ui .border-top-wrapper{border-top:1px solid var(--ui-color-badge-background-light)}adobeconnect-account-panel-ui .details-container{padding:24px 0}adobeconnect-account-panel-ui .options-subtitle{margin-bottom:16px}adobeconnect-account-panel-ui .options-label{padding-left:24px}adobeconnect-account-panel-ui .docebo-radio{margin-bottom:0}adobeconnect-account-panel-ui .adobeconnect-account-limit-list{padding:24px}adobeconnect-account-panel-ui .adobeconnect-account-redirect-info{display:flex;align-items:center;padding:var(--hyd-spacing-sm) var(--hyd-spacing-md)}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-redirect-info span{margin-left:29px}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-redirect-info span{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-redirect-info span{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-redirect-info span{margin-right:29px}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin{margin-left:12px}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin{margin-right:12px}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin-huge{margin-left:26px}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin-huge{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin-huge{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin-huge{margin-right:26px}adobeconnect-account-panel-ui .adobeconnect-account-info-container{padding:0 var(--hyd-spacing-md);box-sizing:border-box}adobeconnect-account-panel-ui .adobeconnect-account-text-field-margin{margin:16px 0 24px}adobeconnect-account-panel-ui .adobeconnect-account-text-field-margin-no-bottom{margin:16px 0 0}adobeconnect-account-panel-ui ui-input-select{width:95%;margin:var(--hyd-spacing-xxs) var(--hyd-spacing-lg)}"],encapsulation:2,changeDetection:0}),e})();const HO=["uiComponent"];let YO=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a){super(),this.router=e,this.toggleService=t,this.pageService=i,this.adobeConnectService=s,this.adobeConnectStore=n,this.translationService=a,this.isEditMode=!1,this.attendanceTrackingCheckbox=!1,this.toggleAdobeConnectIsOn=!1,this.toggleAdobeConnectAttendanceTrackingIsOn=!1}static createBaseRedirectUri(){return`${x.b.getInstance().getFullLmsCustomUrl()}/learn/adobeconnect`}get canShowAttendanceTrackingOption(){return this.toggleAdobeConnectAttendanceTrackingIsOn&&this.toggleAdobeConnectIsOn}ngOnInit(){this.toggleAdobeConnectIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_SESSION_COMPLETION_VILT),this.toggleAdobeConnectAttendanceTrackingIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_ATTENDANCE_TRACKING),this.rightPanel=this.pageService.rightPanel,this.setFormGroup(),this.rightPanel.buttonsDisabled(),this.attendanceTrackingCheckboxControlValueChanges(),this.sessionLimitCheckboxesValueChanges(["Courses","Account","ConcurrentRooms"]),this.form.valueChanges.pipe(Object(ft.a)(250),Object(vt.a)(),Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{this.form.valid?this.rightPanel.buttonsEnabled():this.rightPanel.buttonsDisabled()})}ngAfterViewInit(){this.setPanelActions()}ngOnDestroy(){super.ngOnDestroy(),this.rightPanel.buttonsEnabled()}setPanelActions(){const e=[],t=E.a.t("standard",this.isEditMode?"Confirm":"Create & Edit");e.push({type:"normal",properties:{text:t},customClasses:"float-ltr-right-clear-none",handler:()=>{this.checkCustomFormValidations(),this.form.valid?(this.cleanFormValues(this.form),this.createAccount()):(this.markFormGroupAsTouchedAndDirty(this.form,!0),this.form.setValue(this.form.value))}}),e.push({type:"cancel",properties:{text:E.a.t("standard","Cancel")},customClasses:"float-ltr-right-clear-none",handler:e=>{e.close()}}),this.rightPanel.setActions(e)}createAccount(){this.rightPanel.buttonsDisabled(),this.adobeConnectService.createAccount(this.form).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{this.name=e.data.name,this.accountId=e.data.id;const t={id:e.data.id,name:this.name,description:e.data.additional_info,createdAt:Qv()().toDate(),username:e.data.admin_username,password:e.data.admin_password,serverUrl:e.data.server_url,sessionType:e.data.session_type,sessionLimitCourses:0|this.form.get("sessionLimitCourses").value,sessionLimitAccount:0|this.form.get("sessionLimitAccount").value,sessionLimitConcurrentRooms:0|this.form.get("sessionLimitConcurrentRooms").value,assignedTemplates:null,assignedFolders:null,assignedRooms:null,doceboField:e.data.tool_mapping_field_lms};this.adobeConnectStore.dispatch(new F(t)),this.rightPanel.close(),this.navigateTo("/learn/adobeconnect/edit/"+this.accountId)},this.accountUpsertErrorCallback())}navigateTo(e){this.router.navigate([e])}accountUpsertErrorCallback(){return e=>{1002===e.code&&(Object(Vw.l)(this.form),Object(Vw.l)(this.form),this.uiComponent.checkForChanges(),this.rightPanel.buttonsEnabled())}}cleanFormValues(e){e.get("sessionLimitCoursesCheckbox").value||e.get("sessionLimitCourses").setValue(0),e.get("sessionLimitAccountCheckbox").value||e.get("sessionLimitAccount").setValue(0),e.get("sessionLimitConcurrentRoomsCheckbox").value||e.get("sessionLimitConcurrentRooms").setValue(0)}setFormGroup(){this.form=new Ke.h({id:new Ke.e(this.accountId),name:new Ke.e(this.name),description:new Ke.e(this.description),username:new Ke.e(this.username),password:new Ke.e(this.password),serverUrl:new Ke.e(this.serverUrl),sessionType:new Ke.e("meeting"),sessionLimitCourses:new Ke.e(this.sessionLimitCourses),sessionLimitCoursesCheckbox:new Ke.e(!!this.sessionLimitCourses),sessionLimitAccount:new Ke.e(this.sessionLimitAccount),sessionLimitAccountCheckbox:new Ke.e(!!this.sessionLimitAccount),sessionLimitConcurrentRooms:new Ke.e(this.sessionLimitConcurrentRooms),sessionLimitConcurrentRoomsCheckbox:new Ke.e(!!this.sessionLimitConcurrentRooms),attendanceTrackingCheckbox:new Ke.e(this.attendanceTrackingCheckbox),doceboField:new Ke.e(this.doceboField)}),this.checkCustomFormValidations()}checkCustomFormValidations(){this.form.get("name").setValidators([Ke.x.required,e=>"string"==typeof e.value&&e.value.match("^\\s+$")?{notHaveOnlyBlankCharacters:"This field cannot contains only empty spaces"}:null,Ke.x.maxLength(50)]),this.form.get("description").setValidators([Ke.x.maxLength(255)]),this.form.get("username").setValidators([Ke.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ke.x.maxLength(255)]),this.form.get("password").setValidators([Ke.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ke.x.maxLength(255)]),this.form.get("serverUrl").setValidators([Ke.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ke.x.maxLength(255)]),this.form.get("sessionLimitCourses").setValidators([et(999,"sessions",this.translationService),Ze("sessionLimitCoursesCheckbox")]),this.form.get("sessionLimitAccount").setValidators([et(999,"sessions",this.translationService),Ze("sessionLimitAccountCheckbox")]),this.form.get("sessionLimitConcurrentRooms").setValidators([et(999,"rooms",this.translationService),Ze("sessionLimitConcurrentRoomsCheckbox")]),this.form.get("doceboField").setValidators([Ze("attendanceTrackingCheckbox")]),this.form.get("name").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("username").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("password").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("serverUrl").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("sessionType").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}sessionLimitCourcesValidator(e){return e.parent?e.parent.get("sessionLimitCoursesCheckbox").value?Ke.x.required(e):void 0:null}markFormGroupAsTouchedAndDirty(e,t=!1){Object.keys(e.controls).forEach(i=>{e.controls[i].markAsTouched(),t&&e.controls[i].markAsDirty()})}attendanceTrackingCheckboxControlValueChanges(){return this.form.controls.attendanceTrackingCheckbox.valueChanges.pipe(Object(ft.a)(400),Object(vt.a)()).subscribe(e=>{e?this.form.controls.doceboField.setValidators([Ke.x.required]):(this.form.controls.doceboField.clearValidators(),this.form.controls.doceboField.setErrors(null)),this.form.controls.doceboField.updateValueAndValidity()})}sessionLimitCheckboxesValueChanges(e){e.forEach(e=>{this.form.controls[`sessionLimit${e}Checkbox`].valueChanges.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(t=>{t?this.form.controls[`sessionLimit${e}`].setValidators([Ke.x.required,et(999,"ConcurrentRooms"===e?"rooms":"sessions",this.translationService)]):(this.form.controls[`sessionLimit${e}`].clearValidators(),this.form.controls[`sessionLimit${e}`].setValue(0)),this.form.controls[`sessionLimit${e}`].updateValueAndValidity(),this.form.controls[`sessionLimit${e}`].markAsTouched(),this.form.controls[`sessionLimit${e}`].markAsDirty()})})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(u.g),c.dc(O.a),c.dc(T),c.dc(v.d),c.dc(js.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["adobeconnect-account-panel-container"]],viewQuery:function(e,t){if(1&e&&c.md(HO,1),2&e){let e;c.Qc(e=c.sc())&&(t.uiComponent=e.first)}},inputs:{isEditMode:"isEditMode",accountId:"accountId",name:"name",description:"description",username:"username",password:"password",serverUrl:"serverUrl",sessionType:"sessionType",sessionLimitCourses:"sessionLimitCourses",sessionLimitAccount:"sessionLimitAccount",sessionLimitConcurrentRooms:"sessionLimitConcurrentRooms",attendanceTrackingCheckbox:"attendanceTrackingCheckbox",doceboField:"doceboField",doceboFieldList:"doceboFieldList"},features:[c.Lb([T]),c.Jb],decls:2,vars:3,consts:[[3,"formGroup","doceboFieldList","canShowAttendanceTrackingOption"],["uiComponent",""]],template:function(e,t){1&e&&c.ec(0,"adobeconnect-account-panel-ui",0,1),2&e&&c.Dc("formGroup",t.form)("doceboFieldList",t.doceboFieldList)("canShowAttendanceTrackingOption",t.canShowAttendanceTrackingOption)},directives:[$O,Ke.p,Ke.i],styles:["adobeconnect-account-panel-ui{height:100%;overflow-y:auto;overflow-x:hidden;display:block}"],encapsulation:2,changeDetection:0}),e})();const WO={isVisible:!0,type:Zd.a.BLANK001,title:E.a.t("webinar","No Adobe Connect Accounts Found"),subtitle:E.a.t("webinar","Click the Add button in the top right corner to add a new Adobe Connect account!")},QO={isVisible:!0,type:Zd.a.EMPTY001,title:E.a.t("standard","Whoops, No results found!"),subtitle:E.a.t("myteam","Please try again using different search/filters criteria.")},KO={mode:Oe.a.push,viewOptionLabel:E.a.t("standard","SORT BY"),filters:new Pe.a([{title:E.a.t("standard","Search"),code:"search",type:Oe.d.free_search_filter,params:{placeholder:E.a.t("standard","Search...")}}]),appliedFiltersNumber:new Pe.a(null),displayedItemsNumber:new Pe.a(null),viewOptions:new Pe.a(null),disableViewOptions:!1,elementLabels:{singular:E.a.t("standard","items"),plural:E.a.t("standard","items")}},XO={columnName:"createdAt",dir:Ni.a.DESC},JO={name:{headerLabel:E.a.t("webinar","Account Name"),fieldName:"name",columnName:"name",sortable:!0},description:{headerLabel:E.a.t("app7020","Description"),fieldName:"description",columnName:"description",sortable:!1},createdAt:{headerLabel:E.a.t("standard","Creation Date"),fieldName:"createdAt",columnName:"createdAt",sortable:!0,type:"date",format:"MM/DD/YYYY"},sessionType:{headerLabel:E.a.t("standard","Type"),fieldName:"sessionType",columnName:"sessionType",sortable:!1},serverUrl:{headerLabel:E.a.t("custom_domain","_DOMAIN_NAME_"),fieldName:"serverUrl",columnName:"serverUrl",sortable:!1},ellipsis:{}},ZO=["hydTable"];function eE(e,t){if(1&e&&(c.fd(0),c.wc(1,"t")),2&e){const e=c.vc(3);c.gd(c.xc(1,1,e.tableColumns.name.headerLabel))}}function tE(e,t){if(1&e&&(c.jc(0,"a",12),c.fd(1),c.wc(2,"stripTags"),c.ic()),2&e){const e=t.item;c.Dc("routerLink","/learn/adobeconnect/edit/"+e.id),c.Mb(1),c.hd(" ",c.xc(2,2,e.name)," ")}}function iE(e,t){if(1&e&&(c.fd(0),c.wc(1,"t")),2&e){const e=c.vc(3);c.gd(c.xc(1,1,e.tableColumns.createdAt.headerLabel))}}function sE(e,t){1&e&&(c.fd(0),c.wc(1,"HDateTime")),2&e&&c.hd(" ",c.zc(1,1,t.item.createdAt,null,"lll")," ")}function nE(e,t){}function aE(e,t){if(1&e&&c.ec(0,"btn-ellipsis",14),2&e){const e=c.vc().item,t=c.vc(3);c.cd("width","100%")("text-align",t.tableColumns.ellipsis.alignment),c.Dc("params",e)("orientation",t.tableColumns.ellipsis.orientation)("actions",t.tableColumns.ellipsis.actions)("treeBody",t.hydTableTemlpElem.nativeElement)}}function oE(e,t){if(1&e&&c.dd(0,aE,1,8,"btn-ellipsis",13),2&e){const e=c.vc(3);c.Dc("ngIf",e.hydTableTemlpElem)}}function rE(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-table",7,8),c.rc("sort",function(t){return c.Uc(e),c.vc(2).onTableSort(t)}),c.jc(2,"hyd-table-column",9),c.jc(3,"hyd-table-column-header"),c.dd(4,eE,2,3,"ng-template"),c.ic(),c.jc(5,"hyd-table-column-cell"),c.dd(6,tE,3,4,"ng-template"),c.ic(),c.ic(),c.ec(7,"hyd-table-column-text",10),c.jc(8,"hyd-table-column",9),c.jc(9,"hyd-table-column-header"),c.dd(10,iE,2,3,"ng-template"),c.ic(),c.jc(11,"hyd-table-column-cell"),c.dd(12,sE,2,5,"ng-template"),c.ic(),c.ic(),c.ec(13,"hyd-table-column-text",10),c.ec(14,"hyd-table-column-text",10),c.jc(15,"hyd-table-column",11),c.jc(16,"hyd-table-column-header"),c.dd(17,nE,0,0,"ng-template"),c.ic(),c.jc(18,"hyd-table-column-cell"),c.dd(19,oE,1,1,"ng-template"),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc(2);c.Dc("data",e.tableData)("sorting",e.tableDefaultSorting),c.Mb(2),c.Dc("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.description.headerLabel)("fieldName",e.tableColumns.description.fieldName)("columnName",e.tableColumns.description.columnName)("sortable",e.tableColumns.description.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.createdAt.columnName)("sortable",e.tableColumns.createdAt.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.sessionType.headerLabel)("fieldName",e.tableColumns.sessionType.fieldName)("columnName",e.tableColumns.sessionType.columnName)("sortable",e.tableColumns.sessionType.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.serverUrl.headerLabel)("fieldName",e.tableColumns.serverUrl.fieldName)("columnName",e.tableColumns.serverUrl.columnName)("sortable",e.tableColumns.serverUrl.sortable),c.Mb(1),c.Dc("columnWidth",e.tableColumns.ellipsis.columnWidth)("ellipsed",e.tableColumns.ellipsis.ellipsed)("columnName",e.tableColumns.ellipsis.columnName)}}function cE(e,t){if(1&e&&c.ec(0,"blankslate",15),2&e){const e=c.vc(2);c.Dc("ngClass","blankslate-container")("isVisible",e.blankslateWithFilters.isVisible)("type",e.blankslateWithFilters.type)("title",e.blankslateWithFilters.title)("subtitle",e.blankslateWithFilters.subtitle)}}function lE(e,t){if(1&e){const e=c.kc();c.jc(0,"data-browser",3),c.rc("onFiltersUpdate",function(t){return c.Uc(e),c.vc().onDataBrowserFiltersUpdate(t)}),c.dd(1,rE,20,21,"hyd-table",4),c.jc(2,"hyd-paginator",5),c.rc("pageChange",function(t){return c.Uc(e),c.vc().onTablePageChange(t)}),c.ic(),c.dd(3,cE,1,5,"blankslate",6),c.ic()}if(2&e){const e=c.vc();c.Dc("dataBrowserSource",e.dataBrowserSource),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("pageIndex",e.tablePaginator.pageIndex)("pageSize",e.tablePaginator.pageSize)("length",e.tablePaginator.length)("pageSizeAutoAllowed",e.tablePaginator.pageSizeAutoAllowed),c.Mb(1),c.Dc("ngIf",e.showBlankslateWithFilters())}}function dE(e,t){if(1&e&&(c.jc(0,"blankslate",16),c.fd(1," > "),c.ic()),2&e){const e=c.vc();c.Dc("isVisible",e.blankslateWithoutFilters.isVisible)("type",e.blankslateWithoutFilters.type)("title",e.blankslateWithoutFilters.title)("subtitle",e.blankslateWithoutFilters.subtitle)}}let uE=(()=>{class e{constructor(e,t){this.cdr=e,this.toggleService=t,this.filtersUpdate=new c.q,this.tableSort=new c.q,this.tablePageChange=new c.q,this.openDeleteDialog=new c.q,this.editAccount=new c.q,this.blankslateWithoutFilters=WO,this.blankslateWithFilters=QO,this.dataBrowserSource=KO,this.tableDefaultSorting=XO,this.tableColumns=JO,this.setTableEllipsisColumn()}showBlankslateWithoutFilters(){return!this.showLoader&&0===this.tableData.length&&""===this.searchFilterValue}showBlankslateWithFilters(){return!this.showLoader&&0===this.tableData.length&&""!==this.searchFilterValue}showDataBrowser(){return this.tableData.length>0||""!==this.searchFilterValue}showTable(){return!this.showLoader&&this.tableData.length>0}onDataBrowserFiltersUpdate(e){this.filtersUpdate.emit(e)}onTableSort(e){this.tableSort.emit(e)}onTablePageChange(e){this.tablePageChange.emit(e)}checkForChanges(){this.cdr.markForCheck()}setTableEllipsisColumn(){this.tableColumns.ellipsis={columnName:"ellipsis",columnWidth:"30px",alignment:Ee.a.RIGHT,ellipsed:!1,orientation:"bottom-right",actions:[{id:"edit",title:E.a.t("app7020","Edit"),params:null,active:!1,action:e=>{this.editAccount.emit(e)}},{id:"delete",title:E.a.t("standard","Delete"),params:null,active:!1,action:e=>{this.openDeleteDialog.emit(e)}}]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["adobeconnect-account-list"]],viewQuery:function(e,t){if(1&e&&c.md(ZO,1,c.o),2&e){let e;c.Qc(e=c.sc())&&(t.hydTableTemlpElem=e.first)}},inputs:{tableData:"tableData",searchFilterValue:"searchFilterValue",showLoader:"showLoader",tablePaginator:"tablePaginator"},outputs:{filtersUpdate:"filtersUpdate",tableSort:"tableSort",tablePageChange:"tablePageChange",openDeleteDialog:"openDeleteDialog",editAccount:"editAccount"},decls:3,vars:2,consts:[[1,"adobeconnect-manage"],["class","data-browser",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","blankslate-container",3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"data-browser",3,"dataBrowserSource","onFiltersUpdate"],["class","hyd-table",3,"data","sorting","sort",4,"ngIf"],[1,"hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange"],[3,"ngClass","isVisible","type","title","subtitle",4,"ngIf"],[1,"hyd-table",3,"data","sorting","sort"],["hydTable",""],[3,"columnName","sortable"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnWidth","ellipsed","columnName"],[3,"routerLink"],[3,"params","orientation","actions","width","treeBody","text-align",4,"ngIf"],[3,"params","orientation","actions","treeBody"],[3,"ngClass","isVisible","type","title","subtitle"],[1,"blankslate-container",3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(c.jc(0,"section",0),c.dd(1,lE,4,7,"data-browser",1),c.dd(2,dE,2,4,"blankslate",2),c.ic()),2&e&&(c.Mb(1),c.Dc("ngIf",t.showDataBrowser()),c.Mb(1),c.Dc("ngIf",t.showBlankslateWithoutFilters()))},directives:[Ae.p,Le.a,je.b,Fe.a,Ne.c,Ne.d,Ne.b,Re.a,s.k,ta.a,ld.a,Ae.n],pipes:[E.b,Xc.a,Xt.a],styles:["adobeconnect-account-list .blankslate-container{margin-top:91px}adobeconnect-account-list .hyd-paginator{position:fixed;bottom:0;left:0;width:100%}adobeconnect-account-list .adobeconnect-manage{overflow:hidden}adobeconnect-account-list .adobeconnect-manage .mdl-cell.mdl-cell--12-col{margin-top:0;margin-bottom:0}adobeconnect-account-list .hyd-table{height:calc(100vh - 260px)}adobeconnect-account-list div.data-browser-content{overflow:auto}"],encapsulation:2,changeDetection:0}),e})();const hE=Object(v.k)("learn-adobeconnect"),pE=Object(v.m)(hE,e=>e);var mE=function(e){return e.NAME="name",e.CREATION="created_at",e}({}),gE=function(e){return e.ASC="asc",e.DESC="desc",e}({});const bE=["uiComponent"];let fE=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a,o,r,c,l){super(),this.translationService=e,this.pageService=t,this.docLayoutService=i,this.router=s,this.adobeConnectStore=n,this.permissionManagerService=a,this.appStore=o,this.windowService=r,this.adobeConnectService=c,this.toggleService=l,this.showLoader=!0,this.searchFilterValue="",this.tablePaginator={pageIndex:0,pageSize:15,length:0,pageSizeAutoAllowed:!0},this.tableActiveSorting=mE.CREATION,this.tableActiveSortingDir=gE.DESC,this.tableData=[],this.adobeConnectAccountSelector$=this.adobeConnectStore.pipe(Object(v.p)(pE)),this.pageInitialized=!1,this.snackbarIntervals=[],this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Adobe Connect V2",href:this.router.url}]),this.hasUserViewPermission$=a.can(BD.a.USER_VIEW),this.adobeConnectAccountSelector$.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{if(["AccountCreated","AccountEdited"].includes(e.status))switch(e.status){case"AccountCreated":this.fetchAccounts(),void 0!==this.uiComponent&&(this.uiComponent.checkForChanges(),this.handleAccountCreated("success",e.lastCreatedAccount));break;case"AccountEdited":this.fetchAccounts(),this.uiComponent.checkForChanges(),this.handleAccountEdited("success",e.lastEditedAccount)}"AccountDeleted"===e.status&&e.lastDeletedAccountPartial&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.handleAccountDeleted(e.lastDeletedAccountPartial))})}ngOnInit(){this.pageService.ready().pipe(Object(ee.a)(1)).subscribe(()=>{this.pageDialog=this.pageService.dialog,this.rightPanel=this.pageService.rightPanel,this.setPageTitle(),this.setActionButtons(),this.pageInitialized=!0})}ngAfterViewInit(){this.tablePaginator.pageSizeAutoAllowed&&(this.tablePaginator.pageSize=this.getAutoPageSize()),this.fetchAccounts()}ngOnDestroy(){this.docLayoutService.actionButtons.clearActionButtons(),super.ngOnDestroy()}onFiltersUpdate(e){this.searchFilterValue=e.search?e.search:"",this.fetchAccounts()}onTableSort(e){switch(this.tableActiveSortingDir=e.dir,e.columnName){case"createdAt":this.tableActiveSorting=mE.CREATION;break;case"name":this.tableActiveSorting=mE.NAME}this.fetchAccounts()}onTablePageChange(e){const{pageIndex:t,pageSize:i}=e;this.tablePaginator.pageSize=i<1?this.getAutoPageSize():i,this.tablePaginator.pageIndex=t,this.fetchAccounts()}onOpenDeleteDialog(e){const t=e.id,i=e.name;this.docLayoutService.dialog.showCommonDialog(this.setDeleteDialogParams()).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.adobeConnectService.deleteAccount(t).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{e.actionSuccess.next(!0),this.adobeConnectStore.dispatch(new R({id:t,name:i}))})})}onEditAccountRequested(e){this.navigateTo("/learn/adobeconnect/edit/"+e.id)}navigateTo(e){this.router.navigate([e])}getAutoPageSize(){const e=document.querySelector("adobeconnect-account-list");return Math.floor((window.innerHeight-e.offsetTop-90-80-39)/38)}createAccountCreationSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully created!",{accountName:e?e.name:""})}createAccountFaliureSnackbarLabel(e){return E.a.t("webinar","There were error creating <b>{accountName}</b>!",{accountName:e?e.name:""})}createAccountEditSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully edited!",{accountName:e?e.name:""})}editAccountFaliureSnackbarLabel(e){return E.a.t("webinar","There were error updating <b>{accountName}</b>!",{accountName:e?e.name:""})}createAccountDeleteSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully deleted!",{accountName:e.name})}deleteAccountFaliureSnackbarLabel(e){return E.a.t("webinar","There were error deleting <b>{accountName}</b>!",{accountName:e.name})}showFailureSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"error"})}showSuccessSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"success"})}setPageTitle(){this.docLayoutService.header.showTitleBar({title:"Adobe Connect V2",subtitle:E.a.t("webinar","Manage your Adobe Connect accounts"),fullWidth:!0,mode:"bordered"})}setActionButtons(){const e=[{properties:{BgClass:"bg-positive-green",textClass:"text-white",icons:["plus"],tooltipText:E.a.t("webinar","New Account"),tooltipPosition:"bottom"},onClick:()=>{this.openAccountRightPanel()}}];this.docLayoutService.actionButtons.setActionButtons(e)}openAccountRightPanel(e){let t,i;e?(t=E.a.t("webinar","Edit Account"),i=E.a.t("webinar","Edit the details of your account to update it")):(t=E.a.t("webinar","New Account"),i=E.a.t("webinar","Fill in the form below to add a new account"));const s={isEditMode:!!e,accountId:e?e.id:null,name:e?e.name:null,description:e?e.description:null,username:e?e.username:null,password:e?e.password:null,serverUrl:e?e.serverUrl:null,sessionType:e?e.sessionType:null,sessionLimitCourses:e&&e.sessionLimitCourses>0?e.sessionLimitCourses:null,sessionLimitAccount:e&&e.sessionLimitAccount>0?e.sessionLimitAccount:null,sessionLimitConcurrentRooms:e&&e.sessionLimitConcurrentRooms>0?e.sessionLimitConcurrentRooms:null,doceboFieldList:this.doceboFieldList,doceboField:this.doceboFieldList[0].value};this.pageService.rightPanel.setWidth(500).setTitle(t).setDescription(i).setContent({component:YO,params:s}).open()}fetchAccounts(){this.showLoader=!0,void 0!==this.uiComponent&&this.uiComponent.checkForChanges(),this.adobeConnectService.fetchAccounts({term:this.searchFilterValue,page:this.tablePaginator.pageIndex+1,page_size:this.tablePaginator.pageSize,sort:`${this.tableActiveSorting}.${this.tableActiveSortingDir}`}).subscribe(e=>{const t=[];this.doceboFieldList=this.mapDoceboFields(e.data.docebo_fields);for(const s of e.data.items)t.push({id:s.id,username:s.admin_username,password:s.admin_password,serverUrl:s.server_url,sessionType:mt.toCapitalLetter(s.session_type),name:s.name,description:s.additional_info,createdAt:Qv.a.unix(s.created_at).toDate(),sessionLimitCourses:s.max_sessions_per_course,sessionLimitAccount:s.max_sessions,sessionLimitConcurrentRooms:s.max_concurrent_sessions,assignedTemplates:s.assigned_templates,assignedFolders:s.assigned_folders,assignedRooms:s.assigned_rooms,doceboField:s.tool_mapping_field_lms});const{total_count:i}=e.data;this.tablePaginator.length=i,this.mapTableData(t),this.showLoader=!1,this.uiComponent.checkForChanges()})}mapDoceboFields(e){return Object.entries(e).map(([e,t])=>({value:e,label:t}))}mapTableData(e){this.tableData=[],e.forEach(e=>{this.tableData.push(e)})}handleAccountCreated(e,t){if("success"===e){const e=this.createAccountCreationSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountFaliureSnackbarLabel(t);this.showFailureSnackbar(e)}}handleAccountEdited(e,t){if("success"===e){const e=this.createAccountEditSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.deleteAccountFaliureSnackbarLabel(t);this.showFailureSnackbar(e)}}handleAccountDeleted(e){const t=this.createAccountDeleteSuccessSnackbarLabel(e);this.showSuccessSnackbar(t)}setDeleteDialogParams(){return{id:"delete-checklist-dialog",width:460,height:210,title:E.a.t("standard","Delete Account"),content:E.a.t("standard","Are you sure you want to delete the selected account?<br>If you delete it, it will be definitely removed from the system and you will need to reassign all of the events created with this account to a different account. If you don't reassign the events, both learners and instructors will no longer be able to access them."),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:E.a.t("standard","Delete"),slot:"end"}]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(js.a),c.dc(O.a),c.dc(M.a),c.dc(s.h),c.dc(v.d),c.dc(WD.a),c.dc(v.d),c.dc(cd.a),c.dc(T),c.dc(u.g))},e.\u0275cmp=c.Xb({type:e,selectors:[["adobeconnect-account-container"]],viewQuery:function(e,t){if(1&e&&c.md(bE,1),2&e){let e;c.Qc(e=c.sc())&&(t.uiComponent=e.first)}},features:[c.Jb],decls:2,vars:4,consts:[[3,"showLoader","tableData","tablePaginator","searchFilterValue","filtersUpdate","tableSort","tablePageChange","openDeleteDialog","editAccount"],["uiComponent",""]],template:function(e,t){1&e&&(c.jc(0,"adobeconnect-account-list",0,1),c.rc("filtersUpdate",function(e){return t.onFiltersUpdate(e)})("tableSort",function(e){return t.onTableSort(e)})("tablePageChange",function(e){return t.onTablePageChange(e)})("openDeleteDialog",function(e){return t.onOpenDeleteDialog(e)})("editAccount",function(e){return t.onEditAccountRequested(e)}),c.ic()),2&e&&c.Dc("showLoader",t.showLoader)("tableData",t.tableData)("tablePaginator",t.tablePaginator)("searchFilterValue",t.searchFilterValue)},directives:[uE],encapsulation:2,changeDetection:0}),e})();function vE(e){return`docebo_gotomeeting_pairing_${e}`}const _E=E.a.t("standard","None"),wE=E.a.t("webinar","Paired"),yE=(e,t,i)=>{const s=`https://api.getgo.com/oauth/v2/authorize?response_type=code&client_id=${i}&redirect_uri=${e}`;window.localStorage.setItem("gtm_account_id",t.toString()),window.open(s,"_blank")};let CE=(()=>{class e{constructor(e,t){this.route=e,this.backendService=t}ngOnInit(){this.code=this.route.snapshot.queryParamMap.get("code"),this.id=window.localStorage.getItem("gtm_account_id")||0,this.backendService.request("/learn/v1/webinar/gotomeeting/accounts/pair","POST",{code:this.code,account_id:this.id}).pipe(Object(ee.a)(1)).subscribe(()=>{window.localStorage.setItem("gtm_account_id",""),window.close(),window.localStorage.setItem(vE(this.id),"success")},()=>{window.localStorage.setItem("gtm_account_id",""),window.close(),window.localStorage.setItem(vE(this.id),"fail")})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.a),c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["gotomeeting-pairing"]],decls:1,vars:0,template:function(e,t){1&e&&c.ec(0,"widget-spinner")},directives:[lS.a],styles:["gotomeeting-pairing widget-spinner{position:absolute;top:250px;left:50%}"],encapsulation:2,changeDetection:0}),e})();const SE=e=>t=>("string"==typeof t.value&&""==t.value||null==t.value)&&t.parent&&t.parent.controls[e].value?{thisIsRequiredField:"This is mandatory field"}:null;function TE(e,t){if(1&e&&(c.jc(0,"div",17),c.ec(1,"textfield",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitCoursesTextField.type)("id",e.sessionLimitCoursesTextField.id)("floating_label",e.sessionLimitCoursesTextField.floating_label)("label",e.sessionLimitCoursesTextField.label)("max_length",e.sessionLimitCoursesTextField.max_length)("inputFormControl",e.sessionLimitCoursesTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function kE(e,t){if(1&e&&(c.jc(0,"div",17),c.ec(1,"textfield",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitAccountTextField.type)("id",e.sessionLimitAccountTextField.id)("floating_label",e.sessionLimitAccountTextField.floating_label)("label",e.sessionLimitAccountTextField.label)("max_length",e.sessionLimitAccountTextField.max_length)("inputFormControl",e.sessionLimitAccountTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function IE(e,t){if(1&e&&(c.jc(0,"div",17),c.ec(1,"textfield",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRoomsTextField.type)("id",e.sessionLimitConcurrentRoomsTextField.id)("floating_label",e.sessionLimitConcurrentRoomsTextField.floating_label)("label",e.sessionLimitConcurrentRoomsTextField.label)("max_length",e.sessionLimitConcurrentRoomsTextField.max_length)("inputFormControl",e.sessionLimitConcurrentRoomsTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}const xE=function(){return{category:"standard"}},DE=function(){return{category:"webinar"}},OE=function(){return{category:"admin"}};let EE=(()=>{class e{constructor(e){this.cdr=e,this.isEditMode=!1}ngOnInit(){this.setFormFieldsParams()}ngAfterViewInit(){this.formGroup.valueChanges.subscribe(()=>{this.cdr.detectChanges()})}checkForChanges(){this.cdr.markForCheck()}setFormFieldsParams(){this.accountName={type:Xe.a.TEXT,id:"account-name",floating_label:!0,label:E.a.t("webinar","Account Name"),max_length:50,show_counter:!0,inputFormControl:this.formGroup.controls.accountName},this.accountDescription={type:Xe.a.TEXT,id:"account-description",floating_label:!0,label:E.a.t("app7020","Description"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.accountDescription},this.clientId={type:Xe.a.TEXT,id:"client-id",floating_label:!0,label:E.a.t("slack","Client ID"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientId},this.clientSecret={type:Xe.a.TEXT,id:"client-secret",floating_label:!0,label:E.a.t("app","Client Secret"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientSecret},this.sessionType={id:"session-type",label:E.a.t("webinar","Session type"),inputFormControl:this.formGroup.get("sessionType"),name:"session-type"},this.sessionType.webinar={id:"session-type-webinar",floating_label:!0,label:E.a.t("webinar","Webinar")},this.sessionType.meeting={id:"session-type-meeting",floating_label:!0,label:E.a.t("conference","Meeting")},this.sessionType.training={id:"session-type-meeting",floating_label:!0,label:E.a.t("setup","Training")},this.sessionLimitCoursesTextField={type:Xe.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:E.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitCourses")},this.sessionLimitAccountTextField={type:Xe.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:E.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitAccount")},this.sessionLimitConcurrentRoomsTextField={type:Xe.a.NUMBER,id:"session-limit-concurrents",floating_label:!0,label:E.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.controls.sessionLimitConcurrentRooms};const e=!!this.formGroup.controls.sessionLimitCourses.value;this.sessionLimitCoursesCheckbox={label:E.a.t("webinar","Set session limits for courses"),inputFormControl:new Ke.e(e),checked:e},this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitCoursesCheckbox.setValue(e)});const t=!!this.formGroup.controls.sessionLimitAccount.value;this.sessionLimitAccountCheckbox={label:E.a.t("webinar","Set session limits per accounts"),inputFormControl:new Ke.e(t),checked:t},this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitAccountCheckbox.setValue(e)});const i=!!this.formGroup.controls.sessionLimitConcurrentRooms.value;this.sessionLimitConcurrentRoomsCheckbox={label:E.a.t("webinar","Set session for concurrent rooms"),inputFormControl:new Ke.e(i),checked:i},this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitConcurrentRoomsCheckbox.setValue(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["gotomeeting-account-panel-ui"]],inputs:{formGroup:"formGroup",isEditMode:"isEditMode",oauthRedirectUri:"oauthRedirectUri",oauthRedirectUriTranslatable:"oauthRedirectUriTranslatable"},decls:56,vars:81,consts:[[1,"gotomeeting-create-account"],[1,"gotomeeting-account-redirect-info"],[1,"zmdi","zmdi-info","zmdi-hc-2x","text-main"],[1,"border-top-wrapper",3,"formGroup"],[1,"gotomeeting-account-info-container"],[1,"details-container"],[1,"bold-subtitle"],[1,"gotomeeting-account-text-field-margin"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator"],[1,"gotomeeting-account-text-field-margin-no-bottom"],[1,"border-top-wrapper","gotomeeting-account-info-container"],[1,"bold-subtitle","options-subtitle"],[3,"label","value","name","enabled","inputFormControl"],[1,"text-grey-mid","hint","options-label"],[1,"options-container"],[3,"inputFormControl","checked","label"],["class","gotomeeting-account-margin-huge",4,"ngIf"],[1,"gotomeeting-account-margin-huge"]],template:function(e,t){1&e&&(c.jc(0,"section",0),c.jc(1,"div"),c.jc(2,"div",1),c.ec(3,"i",2),c.jc(4,"span"),c.fd(5),c.wc(6,"t"),c.ec(7,"br"),c.fd(8),c.ic(),c.ic(),c.ic(),c.jc(9,"form",3),c.jc(10,"div",4),c.jc(11,"div",5),c.jc(12,"div",6),c.fd(13),c.wc(14,"t"),c.ic(),c.jc(15,"div",7),c.ec(16,"textfield",8),c.ic(),c.jc(17,"div",7),c.ec(18,"textfield",8),c.ic(),c.jc(19,"div",7),c.ec(20,"textfield",8),c.ic(),c.jc(21,"div",9),c.ec(22,"textfield",8),c.ic(),c.ic(),c.ic(),c.jc(23,"div",10),c.jc(24,"div",5),c.jc(25,"div",11),c.fd(26),c.wc(27,"t"),c.ic(),c.jc(28,"div"),c.ec(29,"radio",12),c.ic(),c.jc(30,"div"),c.ec(31,"radio",12),c.ec(32,"div",13),c.ic(),c.jc(33,"div"),c.ec(34,"radio",12),c.ec(35,"div",13),c.ic(),c.ic(),c.ic(),c.jc(36,"div",10),c.jc(37,"div",5),c.jc(38,"div",11),c.fd(39),c.wc(40,"t"),c.ic(),c.jc(41,"div",14),c.jc(42,"div"),c.ec(43,"checkbox",15),c.ic(),c.dd(44,TE,2,7,"div",16),c.wc(45,"async"),c.ic(),c.jc(46,"div",14),c.jc(47,"div"),c.ec(48,"checkbox",15),c.ic(),c.dd(49,kE,2,7,"div",16),c.wc(50,"async"),c.ic(),c.jc(51,"div",14),c.jc(52,"div"),c.ec(53,"checkbox",15),c.ic(),c.dd(54,IE,2,7,"div",16),c.wc(55,"async"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(5),c.hd(" ",c.xc(6,61,t.oauthRedirectUriTranslatable),""),c.Mb(3),c.hd(" ",t.oauthRedirectUri," "),c.Mb(1),c.Dc("formGroup",t.formGroup),c.Mb(4),c.hd(" ",c.yc(14,63,"General Information",c.Hc(78,xE))," "),c.Mb(3),c.Dc("type",t.accountName.type)("id",t.accountName.id)("floating_label",t.accountName.floating_label)("label",t.accountName.label)("max_length",t.accountName.max_length)("inputFormControl",t.accountName.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.accountDescription.type)("id",t.accountDescription.id)("floating_label",t.accountDescription.floating_label)("label",t.accountDescription.label)("max_length",t.accountDescription.max_length)("inputFormControl",t.accountDescription.inputFormControl)("showRequiredFieldIndicator",!1),c.Mb(2),c.Dc("type",t.clientId.type)("id",t.clientId.id)("floating_label",t.clientId.floating_label)("label",t.clientId.label)("max_length",t.clientId.max_length)("inputFormControl",t.clientId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.clientSecret.type)("id",t.clientSecret.id)("floating_label",t.clientSecret.floating_label)("label",t.clientSecret.label)("max_length",t.clientSecret.max_length)("inputFormControl",t.clientSecret.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(4),c.hd(" ",c.yc(27,66,"Session type",c.Hc(79,DE))," "),c.Mb(3),c.Dc("label",t.sessionType.meeting.label)("value","meeting")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(2),c.Dc("label",t.sessionType.webinar.label)("value","webinar")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(3),c.Dc("label",t.sessionType.training.label)("value","training")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(5),c.hd(" ",c.yc(40,69,"Options",c.Hc(80,OE))," "),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitCoursesCheckbox.inputFormControl)("checked",t.sessionLimitCoursesCheckbox.checked)("label",t.sessionLimitCoursesCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(45,72,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCoursesTextField.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitAccountCheckbox.inputFormControl)("checked",t.sessionLimitAccountCheckbox.checked)("label",t.sessionLimitAccountCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(50,74,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccountTextField.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl)("checked",t.sessionLimitConcurrentRoomsCheckbox.checked)("label",t.sessionLimitConcurrentRoomsCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(55,76,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRoomsTextField.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value||!1))},directives:[Ke.y,Ke.p,Ke.i,_t.a,jn.a,Fn.a,Ae.p],pipes:[E.b,Ae.b],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}gotomeeting-account-panel-ui .bold-subtitle{padding-bottom:6px;font-weight:600;font-size:14px;line-height:18px}gotomeeting-account-panel-ui .border-top-wrapper{border-top:1px solid var(--ui-color-badge-background-light)}gotomeeting-account-panel-ui .details-container{padding:24px 0}gotomeeting-account-panel-ui .options-subtitle{margin-bottom:16px}gotomeeting-account-panel-ui .options-label{padding-left:24px}gotomeeting-account-panel-ui .docebo-radio{margin-bottom:0}gotomeeting-account-panel-ui .gotomeeting-account-limit-list{padding:24px}gotomeeting-account-panel-ui .gotomeeting-account-redirect-info{display:flex;align-items:center;padding:var(--hyd-spacing-sm) var(--hyd-spacing-md)}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-redirect-info span{margin-left:29px}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-redirect-info span{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-redirect-info span{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-redirect-info span{margin-right:29px}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin{margin-left:12px}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin{margin-right:12px}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin-huge{margin-left:26px}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin-huge{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin-huge{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin-huge{margin-right:26px}gotomeeting-account-panel-ui .gotomeeting-account-info-container{padding:0 var(--hyd-spacing-md);box-sizing:border-box}gotomeeting-account-panel-ui .gotomeeting-account-text-field-margin{margin:16px 0 24px}gotomeeting-account-panel-ui .gotomeeting-account-text-field-margin-no-bottom{margin:16px 0 0}"],encapsulation:2,changeDetection:0}),e})();const PE=["uiComponent"];let ME=(()=>{class e extends Uc.a{constructor(t,i,s,n,a){super(),this.pageService=t,this.goToMeetingService=i,this.goToMeetingStore=s,this.translationService=n,this.fb=a,this.isEditMode=!1,this.notMoreThan=(e,t)=>i=>i.value>e?{notMoreThan:this.translationService.instant("Max limit is {max} {things}",{category:"standard",max:e,things:t})}:null,this.baseRedirectUri=e.createBaseRedirectUri(),this.oauthRedirectUriTranslatable=E.a.t("webinar","GoTo Oauth redirect URL:")}static createBaseRedirectUri(){return`${x.b.getInstance().getFullLmsCustomUrl()}/learn/gotomeeting`}ngOnInit(){this.rightPanel=this.pageService.rightPanel,this.form=this.fb.group({id:[this.accountId],accountName:[this.accountName,[Ke.x.required,e=>"string"==typeof e.value&&e.value.match("^\\s+$")?{notHaveOnlyBlankCharacters:"This field cannot contains only empty spaces"}:null,Ke.x.maxLength(255)]],accountDescription:[this.accountDescription,[Ke.x.maxLength(255)]],clientId:[this.clientId,[Ke.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ke.x.maxLength(255)]],clientSecret:[this.clientSecret,[Ke.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ke.x.maxLength(255)]],sessionType:[this.sessionType,[Ke.x.required]],sessionLimitCourses:[this.sessionLimitCourses,[this.notMoreThan(999,"sessions"),SE("sessionLimitCoursesCheckbox")]],sessionLimitCoursesCheckbox:[!!this.sessionLimitCourses],sessionLimitAccount:[this.sessionLimitAccount,[this.notMoreThan(999,"sessions"),SE("sessionLimitAccountCheckbox")]],sessionLimitAccountCheckbox:[!!this.sessionLimitAccount],sessionLimitConcurrentRooms:[this.sessionLimitConcurrentRooms,[this.notMoreThan(999,"rooms"),SE("sessionLimitConcurrentRoomsCheckbox")]],sessionLimitConcurrentRoomsCheckbox:[!!this.sessionLimitConcurrentRooms]})}ngAfterViewInit(){this.setPanelActions()}ngOnDestroy(){super.ngOnDestroy(),this.rightPanel.buttonsEnabled()}setPanelActions(){const e=[],t=E.a.t("standard",this.isEditMode?"Confirm":"Create");e.push({type:"normal",properties:{text:t},customClasses:"float-ltr-right-clear-none",handler:()=>{this.form.controls.clientId.errors||this.form.controls.clientId.setErrors(null),this.form.valid?(this.cleanFormValues(this.form),this.isEditMode?this.editAccount():this.createAccount()):(Object(Vw.l)(this.form),this.form.setValue(this.form.value))}}),e.push({type:"cancel",properties:{text:E.a.t("standard","Cancel")},customClasses:"float-ltr-right-clear-none",handler:e=>{e.close()}}),this.rightPanel.setActions(e)}createAccount(){this.rightPanel.buttonsDisabled(),this.goToMeetingService.createAccount(this.form).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{this.accountName=e.data.name,this.accountId=e.data.id;const t={id:e.data.id,name:this.accountName,description:e.data.additional_info,createdAt:Qv()().toDate(),clientId:e.data.app_key,clientSecret:e.data.app_secret,sessionType:e.session_type,accessTokenStatus:_E,sessionLimitCourses:0|this.form.controls.sessionLimitCourses.value,sessionLimitAccount:0|this.form.controls.sessionLimitAccount.value,sessionLimitConcurrentRooms:0|this.form.controls.sessionLimitConcurrentRooms.value};this.goToMeetingStore.dispatch(new B(t)),this.rightPanel.close(),yE(this.baseRedirectUri,e.data.id,this.form.controls.clientId.value)},this.accountUpsertErrorCallback())}editAccount(){this.rightPanel.buttonsDisabled(),this.goToMeetingService.editAccount(this.form).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{var t=this.accountName;this.accountName=e.data.name;const i={id:e.data.id,name:t,description:e.data.additional_info,createdAt:Qv()().toDate(),clientId:e.data.app_key,clientSecret:e.data.app_secret,accessTokenStatus:_E};this.goToMeetingService.unpairAccount(e.data.id).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{yE(this.baseRedirectUri,e.data.id,this.form.controls.clientId.value),this.goToMeetingStore.dispatch(new G(i)),this.rightPanel.close()})},this.accountUpsertErrorCallback())}accountUpsertErrorCallback(){return e=>{1002===e.code&&(Object(Vw.l)(this.form),this.form.controls.clientId.setErrors({notUnique:E.a.t("webinar","Multiple accounts cannot use the same Client ID")}),Object(Vw.l)(this.form),this.uiComponent.checkForChanges(),this.rightPanel.buttonsEnabled())}}cleanFormValues(e){e.controls.sessionLimitCoursesCheckbox.value||e.controls.sessionLimitCourses.setValue(0),e.controls.sessionLimitAccountCheckbox.value||e.controls.sessionLimitAccount.setValue(0),e.controls.sessionLimitConcurrentRoomsCheckbox.value||e.controls.sessionLimitConcurrentRooms.setValue(0)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(O.a),c.dc(q),c.dc(v.d),c.dc(js.a),c.dc(Ke.d))},e.\u0275cmp=c.Xb({type:e,selectors:[["gotomeeting-account-panel-container"]],viewQuery:function(e,t){if(1&e&&c.md(PE,1),2&e){let e;c.Qc(e=c.sc())&&(t.uiComponent=e.first)}},inputs:{isEditMode:"isEditMode",accountId:"accountId",accountName:"accountName",accountDescription:"accountDescription",clientId:"clientId",clientSecret:"clientSecret",sessionType:"sessionType",sessionLimitCourses:"sessionLimitCourses",sessionLimitAccount:"sessionLimitAccount",sessionLimitConcurrentRooms:"sessionLimitConcurrentRooms"},features:[c.Lb([q]),c.Jb],decls:2,vars:3,consts:[[3,"formGroup","oauthRedirectUri","oauthRedirectUriTranslatable"],["uiComponent",""]],template:function(e,t){1&e&&c.ec(0,"gotomeeting-account-panel-ui",0,1),2&e&&c.Dc("formGroup",t.form)("oauthRedirectUri",t.baseRedirectUri)("oauthRedirectUriTranslatable",t.oauthRedirectUriTranslatable)},directives:[EE,Ke.p,Ke.i],styles:["gotomeeting-account-panel-ui{height:100%;overflow-y:auto;overflow-x:hidden;display:block}"],encapsulation:2,changeDetection:0}),e})();const AE={isVisible:!0,type:Zd.a.BLANK001,title:E.a.t("webinar","No GTM Accounts Found"),subtitle:E.a.t("webinar","Click the Add button in the top right corner to add a new GTM account!")},LE={isVisible:!0,type:Zd.a.EMPTY001,title:E.a.t("standard","Whoops, No results found!"),subtitle:E.a.t("myteam","Please try again using different search/filters criteria.")},jE={mode:Oe.a.push,viewOptionLabel:E.a.t("standard","SORT BY"),filters:new Pe.a([{title:E.a.t("standard","Search"),code:"search",type:Oe.d.free_search_filter,params:{placeholder:E.a.t("standard","Search...")}}]),appliedFiltersNumber:new Pe.a(null),displayedItemsNumber:new Pe.a(null),viewOptions:new Pe.a(null),disableViewOptions:!1,elementLabels:{singular:E.a.t("standard","items"),plural:E.a.t("standard","items")}},FE={columnName:"createdAt",dir:Ni.a.DESC},RE={name:{headerLabel:E.a.t("webinar","Account Name"),fieldName:"name",columnName:"name",sortable:!0},description:{headerLabel:E.a.t("app7020","Description"),fieldName:"description",columnName:"description",sortable:!1},createdAt:{headerLabel:E.a.t("standard","Creation Date"),fieldName:"createdAt",columnName:"createdAt",sortable:!0,type:"date",format:"MM/DD/YYYY"},accessTokenStatus:{headerLabel:E.a.t("webinar","Access token"),fieldName:"accessTokenStatus",columnName:"accessTokenStatus",sortable:!1},ellipsis:{orientation:"",columnName:"",actions:[]}};function NE(e,t){if(1&e&&(c.fd(0),c.wc(1,"t")),2&e){const e=c.vc(3);c.gd(c.xc(1,1,e.tableColumns.createdAt.headerLabel))}}function UE(e,t){1&e&&(c.fd(0),c.wc(1,"HDateTime")),2&e&&c.hd(" ",c.zc(1,1,t.item.createdAt,null,"lll")," ")}function qE(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-table",6),c.rc("sort",function(t){return c.Uc(e),c.vc(2).onTableSort(t)}),c.ec(1,"hyd-table-column-text",7),c.ec(2,"hyd-table-column-text",7),c.jc(3,"hyd-table-column",8),c.jc(4,"hyd-table-column-header"),c.dd(5,NE,2,3,"ng-template"),c.ic(),c.jc(6,"hyd-table-column-cell"),c.dd(7,UE,2,5,"ng-template"),c.ic(),c.ic(),c.ec(8,"hyd-table-column-text",7),c.ec(9,"hyd-table-column-ellipsis",9),c.ic()}if(2&e){const e=c.vc(2);c.Dc("data",e.tableData)("sorting",e.tableDefaultSorting),c.Mb(1),c.Dc("headerLabel",e.tableColumns.name.headerLabel)("fieldName",e.tableColumns.name.fieldName)("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.description.headerLabel)("fieldName",e.tableColumns.description.fieldName)("columnName",e.tableColumns.description.columnName)("sortable",e.tableColumns.description.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.createdAt.columnName)("sortable",e.tableColumns.createdAt.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.accessTokenStatus.headerLabel)("fieldName",e.tableColumns.accessTokenStatus.fieldName)("columnName",e.tableColumns.accessTokenStatus.columnName)("sortable",e.tableColumns.accessTokenStatus.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.ellipsis.columnName)("actions",e.tableColumns.ellipsis.actions)("orientation",e.tableColumns.ellipsis.orientation)}}function zE(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-paginator",10),c.rc("pageChange",function(t){return c.Uc(e),c.vc(2).onTablePageChange(t)}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("pageIndex",e.tablePaginator.pageIndex)("pageSize",e.tablePaginator.pageSize)("length",e.tablePaginator.length)("pageSizeAutoAllowed",e.tablePaginator.pageSizeAutoAllowed)}}function VE(e,t){if(1&e&&c.ec(0,"blankslate",11),2&e){const e=c.vc(2);c.Dc("ngClass","blankslate-container")("isVisible",e.blankslateWithFilters.isVisible)("type",e.blankslateWithFilters.type)("title",e.blankslateWithFilters.title)("subtitle",e.blankslateWithFilters.subtitle)}}function BE(e,t){if(1&e){const e=c.kc();c.jc(0,"data-browser",2),c.rc("onFiltersUpdate",function(t){return c.Uc(e),c.vc().onDataBrowserFiltersUpdate(t)}),c.dd(1,qE,10,19,"hyd-table",3),c.dd(2,zE,1,4,"hyd-paginator",4),c.dd(3,VE,1,5,"blankslate",5),c.ic()}if(2&e){const e=c.vc();c.Dc("dataBrowserSource",e.dataBrowserSource),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showBlankslateWithFilters())}}function GE(e,t){if(1&e&&(c.jc(0,"blankslate",12),c.fd(1," >\n"),c.ic()),2&e){const e=c.vc();c.Dc("isVisible",e.blankslateWithoutFilters.isVisible)("type",e.blankslateWithoutFilters.type)("title",e.blankslateWithoutFilters.title)("subtitle",e.blankslateWithoutFilters.subtitle)}}let $E=(()=>{class e{constructor(e){this.cdr=e,this.filtersUpdate=new c.q,this.tableSort=new c.q,this.tablePageChange=new c.q,this.openDeleteDialog=new c.q,this.beginPairing=new c.q,this.editAccount=new c.q,this.blankslateWithoutFilters=AE,this.blankslateWithFilters=LE,this.dataBrowserSource=jE,this.tableDefaultSorting=FE,this.tableColumns=RE,this.setTableEllipsisColumn()}showBlankslateWithoutFilters(){return!this.showLoader&&0===this.tableData.length&&""===this.searchFilterValue}showBlankslateWithFilters(){return!this.showLoader&&0===this.tableData.length&&""!==this.searchFilterValue}showDataBrowser(){return this.tableData.length>0||""!==this.searchFilterValue}showTable(){return!this.showLoader&&this.tableData.length>0}onDataBrowserFiltersUpdate(e){this.filtersUpdate.emit(e)}onTableSort(e){this.tableSort.emit(e)}onTablePageChange(e){this.tablePageChange.emit(e)}checkForChanges(){this.cdr.markForCheck()}setTableEllipsisColumn(){this.tableColumns.ellipsis={columnName:"ellipsis",columnWidth:"100px",alignment:Ee.a.CENTER,ellipsed:!1,orientation:"bottom-right",actions:[{id:"pair",title:E.a.t("standard","Pair"),params:null,active:!1,action:e=>{this.beginPairing.emit(e)}},{id:"edit",title:E.a.t("app7020","Edit"),params:null,active:!1,action:e=>{this.editAccount.emit(e)}},{id:"delete",title:E.a.t("standard","Delete"),params:null,active:!1,action:e=>{this.openDeleteDialog.emit(e)}}]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["gotomeeting-account-list"]],inputs:{tableData:"tableData",searchFilterValue:"searchFilterValue",showLoader:"showLoader",tablePaginator:"tablePaginator"},outputs:{filtersUpdate:"filtersUpdate",tableSort:"tableSort",tablePageChange:"tablePageChange",openDeleteDialog:"openDeleteDialog",beginPairing:"beginPairing",editAccount:"editAccount"},decls:2,vars:2,consts:[["class","data-browser-gotomeeting",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","blankslate-container",3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"data-browser-gotomeeting",3,"dataBrowserSource","onFiltersUpdate"],["class","hyd-table",3,"data","sorting","sort",4,"ngIf"],["class","hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange",4,"ngIf"],[3,"ngClass","isVisible","type","title","subtitle",4,"ngIf"],[1,"hyd-table",3,"data","sorting","sort"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnName","sortable"],[3,"columnName","actions","orientation"],[1,"hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange"],[3,"ngClass","isVisible","type","title","subtitle"],[1,"blankslate-container",3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(c.dd(0,BE,4,4,"data-browser",0),c.dd(1,GE,2,4,"blankslate",1)),2&e&&(c.Dc("ngIf",t.showDataBrowser()),c.Mb(1),c.Dc("ngIf",t.showBlankslateWithoutFilters()))},directives:[Ae.p,Le.a,Fe.a,Re.a,Ne.c,Ne.d,Ne.b,Ue.a,je.b,ld.a,Ae.n],pipes:[E.b,Xt.a],styles:["gotomeeting-account-list .blankslate-container{margin-top:91px}gotomeeting-account-list .hyd-paginator{position:fixed;bottom:0;left:0;width:100%}gotomeeting-account-list .data-browser-gotomeeting .grid-content-container.mdl-grid{margin:0}gotomeeting-account-list .data-browser-gotomeeting .grid-content-container.mdl-grid>.mdl-cell.mdl-cell--12-col{margin:0;width:100%}gotomeeting-account-list .data-browser-gotomeeting .full-width-header-container>.section-wrapper>.mdl-grid{margin:0}gotomeeting-account-list .data-browser-gotomeeting .hyd-table-body{padding-bottom:45px}"],encapsulation:2,changeDetection:0}),e})();const HE=Object(v.k)("learn-gotomeeting"),YE=Object(v.m)(HE,e=>e);var WE=function(e){return e.NAME="name",e.CREATION="created_at",e}({}),QE=function(e){return e.ASC="asc",e.DESC="desc",e}({});const KE=["uiComponent"];let XE=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a,o,r,c){super(),this.translationService=e,this.pageService=t,this.router=i,this.goToMeetingStore=s,this.permissionManagerService=n,this.appStore=a,this.windowService=o,this.goToMeetingService=r,this.docLayoutService=c,this.showLoader=!0,this.searchFilterValue="",this.tablePaginator={pageIndex:0,pageSize:15,length:0,pageSizeAutoAllowed:!0},this.tableActiveSorting=WE.CREATION,this.tableActiveSortingDir=QE.DESC,this.tableData=[],this.goToMeetingAccountSelector$=this.goToMeetingStore.pipe(Object(v.p)(YE)),this.pageInitialized=!1,this.snackbarIntervals=[],this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Gotomeeting V2",href:this.router.url}]),this.hasUserViewPermission$=n.can(BD.a.USER_VIEW),this.goToMeetingAccountSelector$.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{({GoToMeetingInitialState:()=>{},PairingAccountCompleted:()=>{if(this.windowSubscription)return this.windowSubscription.unsubscribe(),void this.fetchAccounts()},AccountCreated:()=>{this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastCreatedAccount,"create")},AccountEdited:()=>{this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastEditedAccount,"edit")},AccountDeleted:()=>{e.lastDeletedAccountPartial&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.handleAccountDeleted(e.lastDeletedAccountPartial))},PairingAccountRequested:()=>{this.watchPairing(e.lastRequestedPairedAccount,"pair")},PairingAccountAcquired:()=>{e.pairing&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.windowSubscription=this.windowService.focus().pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(t=>{if(t&&"PairingAccountAcquired"===e.status&&e.pairing){const{account:t,action:i,item:s}=e.pairing;this.createSnackbar(s,t,i),this.goToMeetingStore.dispatch(new W)}}))},PairingAccountAborted:()=>{}})[e.status]()})}ngOnInit(){this.pageService.ready().pipe(Object(ee.a)(1)).subscribe(()=>{this.pageDialog=this.pageService.dialog,this.rightPanel=this.pageService.rightPanel,this.setPageTitle(),this.setActionButtons(),this.pageInitialized=!0})}ngAfterViewInit(){this.fetchAccounts()}ngOnDestroy(){this.docLayoutService.actionButtons.clearActionButtons(),super.ngOnDestroy()}onFiltersUpdate(e){this.searchFilterValue=e.search?e.search:"",this.fetchAccounts()}onTableSort(e){const t={createdAt:WE.CREATION,name:WE.NAME};this.tableActiveSortingDir=e.dir,this.tableActiveSorting=t[e.columnName],this.fetchAccounts()}onTablePageChange(e){const{pageIndex:t,pageSize:i}=e;this.tablePaginator.pageSize=i<1?this.getAutoPageSize():i,this.tablePaginator.pageIndex=t,this.fetchAccounts()}onOpenDeleteDialog(e){const t=e.id,i=e.name;this.docLayoutService.dialog.showCommonDialog(this.setDeleteDialogParams()).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.goToMeetingService.deleteAccount(t).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{e.actionSuccess.next(!0),this.goToMeetingStore.dispatch(new K({id:t,name:i}))})})}onPairingRequested(e){this.goToMeetingService.unpairAccount(e.id).subscribe(()=>{yE(`${x.b.getInstance().getFullLmsCustomUrl()}/learn/gotomeeting`,e.id,e.clientId),this.goToMeetingStore.dispatch(new H({id:e.id,name:e.name,description:e.description,clientId:e.clientId,clientSecret:"",createdAt:e.createdAt,accessTokenStatus:wE,sessionType:e.sessionType,sessionLimitCourses:e.sessionLimitCourses,sessionLimitAccount:e.sessionLimitAccount,sessionLimitConcurrentRooms:e.sessionLimitConcurrentRooms}))})}onEditAccountRequested(e){this.openAccountRightPanel(e)}getAutoPageSize(){const e=document.querySelector("gotomeeting-account-list");return Math.floor((window.innerHeight-e.offsetTop-90-80-39)/38)}createAccountCreationSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully created!",{accountName:e.name})}createAccountEditSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully edited!",{accountName:e.name})}createAccountDeleteSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully deleted!",{accountName:e.name})}createAccountPairingSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully paired!",{accountName:e.name})}showSuccessSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"success"})}showFailureSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"error"})}createAccountPairingFailureSnackbarLabel(){return E.a.t("webinar","Pairing failed, please try again or check your configuration")}setPageTitle(){this.docLayoutService.header.showTitleBar({title:"GoToMeeting",subtitle:E.a.t("webinar","Manage your GoToMeeting accounts. For more info read our Knowledge Base"),fullWidth:!0})}setActionButtons(){const e=[{properties:{BgClass:"bg-positive-green",textClass:"text-white",icons:["plus"],tooltipText:E.a.t("webinar","New Account"),tooltipPosition:"bottom"},onClick:()=>{this.openAccountRightPanel()}}];this.docLayoutService.actionButtons.setActionButtons(e)}openAccountRightPanel(e){let t,i;e?(t=E.a.t("webinar","Edit Account"),i=E.a.t("webinar","Edit the details of your account to update it")):(t=E.a.t("webinar","New Account"),i=E.a.t("webinar","Fill in all the mandatory details in order to create a new account"));const s={isEditMode:!!e,accountId:e?e.id:null,accountName:e?e.name:null,accountDescription:e?e.description:null,clientId:e?e.clientId:null,clientSecret:e?e.clientSecret:null,sessionType:e?(n=e.sessionType,{gotomeetingv2meeting:"meeting",gotomeetingv2webinar:"webinar",gotomeetingv2training:"training"}[n]):"meeting",sessionLimitCourses:e&&e.sessionLimitCourses>0?e.sessionLimitCourses:null,sessionLimitAccount:e&&e.sessionLimitAccount>0?e.sessionLimitAccount:null,sessionLimitConcurrentRooms:e&&e.sessionLimitConcurrentRooms>0?e.sessionLimitConcurrentRooms:null};var n;this.pageService.rightPanel.setWidth(500).setTitle(t).setDescription(i).setContent({component:ME,params:s}).open()}fetchAccounts(){this.showLoader=!0,this.uiComponent.checkForChanges(),this.goToMeetingService.fetchAccounts({term:this.searchFilterValue,page:this.tablePaginator.pageIndex+1,page_size:this.tablePaginator.pageSize,sort:`${this.tableActiveSorting}.${this.tableActiveSortingDir}`}).subscribe(e=>{const{items:t}=e.data,i=t.map(e=>({id:e.id,clientId:e.app_key,clientSecret:e.app_secret,name:e.name,description:e.description,createdAt:Qv.a.unix(e.created_at).toDate(),accessTokenStatus:e.paired?wE:_E,sessionType:e.session_type,sessionLimitCourses:e.max_sessions_per_course,sessionLimitAccount:e.max_sessions,sessionLimitConcurrentRooms:e.max_concurrent_sessions})),{total_count:s}=e.data;this.tablePaginator.length=s,this.tableData=[...i],this.showLoader=!1,this.uiComponent.checkForChanges()})}handleAccountCreated(e,t){({success:()=>this.showSuccessSnackbar(this.createAccountCreationSuccessSnackbarLabel(t)),fail:()=>this.showFailureSnackbar(this.createAccountPairingFailureSnackbarLabel())})[e]()}handleAccountPaired(e,t){({success:()=>this.showSuccessSnackbar(this.createAccountPairingSuccessSnackbarLabel(t)),fail:()=>this.showFailureSnackbar(this.createAccountPairingFailureSnackbarLabel())})[e]()}handleAccountEdited(e,t){({success:()=>this.showSuccessSnackbar(this.createAccountEditSuccessSnackbarLabel(t)),fail:()=>this.showFailureSnackbar(this.createAccountPairingFailureSnackbarLabel())})[e]()}handleAccountDeleted(e){this.showSuccessSnackbar(this.createAccountDeleteSuccessSnackbarLabel(e))}watchPairing(e,t){const i=Math.random();this.snackbarIntervals[i]=setInterval(()=>{const s=window.localStorage.getItem(vE(e.id));s&&(window.localStorage.removeItem(vE(e.id)),clearInterval(this.snackbarIntervals[i]),delete this.snackbarIntervals[i],this.goToMeetingStore.dispatch(new Y({item:s,account:e,action:t})))},200),setTimeout(()=>{this.snackbarIntervals[i]&&(clearInterval(this.snackbarIntervals[i]),window.localStorage.removeItem(vE("")),this.goToMeetingStore.dispatch(new Q))},4e4)}createSnackbar(e,t,i){({create:()=>this.handleAccountCreated(e,t),edit:()=>this.handleAccountEdited(e,t),pair:()=>this.handleAccountPaired(e,t),delete:()=>this.handleAccountDeleted(t)})[i]()}setDeleteDialogParams(){return{id:"delete-checklist-dialog",width:460,height:210,title:E.a.t("standard","Delete Account"),content:E.a.t("standard","Are you sure you want to delete the selected account?<br>If you delete it, it will be definitely removed from the system and you will need to reassign all of the events created with this account to a different account. If you don't reassign the events, both learners and instructors will no longer be able to access them."),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:E.a.t("standard","Delete"),slot:"end"}]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(js.a),c.dc(O.a),c.dc(s.h),c.dc(v.d),c.dc(WD.a),c.dc(v.d),c.dc(cd.a),c.dc(q),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["gotomeeting-account-container"]],viewQuery:function(e,t){if(1&e&&c.md(KE,1),2&e){let e;c.Qc(e=c.sc())&&(t.uiComponent=e.first)}},features:[c.Jb],decls:2,vars:4,consts:[["S","",3,"showLoader","tableData","tablePaginator","searchFilterValue","filtersUpdate","tableSort","tablePageChange","openDeleteDialog","beginPairing","editAccount"],["uiComponent",""]],template:function(e,t){1&e&&(c.jc(0,"gotomeeting-account-list",0,1),c.rc("filtersUpdate",function(e){return t.onFiltersUpdate(e)})("tableSort",function(e){return t.onTableSort(e)})("tablePageChange",function(e){return t.onTablePageChange(e)})("openDeleteDialog",function(e){return t.onOpenDeleteDialog(e)})("beginPairing",function(e){return t.onPairingRequested(e)})("editAccount",function(e){return t.onEditAccountRequested(e)}),c.ic()),2&e&&c.Dc("showLoader",t.showLoader)("tableData",t.tableData)("tablePaginator",t.tablePaginator)("searchFilterValue",t.searchFilterValue)},directives:[$E],encapsulation:2,changeDetection:0}),e})(),JE=(()=>{class e{constructor(e){this.router=e,this.platform=x.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("MsTeamsApp")||(this.router.navigate(["/unauthorized"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();function ZE(e){return`docebo_msteams_pairing_${e}`}const eP=E.a.t("standard","None"),tP=E.a.t("webinar","Paired"),iP=(e,t,i,s,n,a)=>{const o=`${e.replace("http://","https://")}`;window.localStorage.setItem("msteams_account_id",t.toString());let r={grant_type:"authorization_code",response_type:"code",scope:a,client_secret:n,client_id:i,redirect_uri:o};const c=document.createElement("form");for(var l in c.target="_blank",c.method="POST",c.action=`https://login.microsoftonline.com/${s}/oauth2/v2.0/authorize`,r){let e=document.createElement("input");e.type="hidden",e.name=l,e.setAttribute("value",r[l]),c.appendChild(e)}document.body.appendChild(c),c.submit(),c.remove()};let sP=(()=>{class e{constructor(e,t){this.route=e,this.backendService=t}ngOnInit(){this.code=this.route.snapshot.queryParamMap.get("code"),this.id=window.localStorage.getItem("msteams_account_id")||0,this.backendService.request("/learn/v1/webinar/msteams/accounts/pair","POST",{code:this.code,account_id:this.id}).pipe(Object(ee.a)(1)).subscribe(()=>{window.localStorage.setItem("msteams_account_id",""),window.close(),window.localStorage.setItem(ZE(this.id),"success")},()=>{window.localStorage.setItem("msteams_account_id",""),window.close(),window.localStorage.setItem(ZE(this.id),"fail")})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.a),c.dc(S.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["msteams-pairing"]],decls:1,vars:0,template:function(e,t){1&e&&c.ec(0,"widget-spinner")},directives:[lS.a],styles:["msteams-pairing widget-spinner{position:absolute;top:250px;left:50%}"],encapsulation:2,changeDetection:0}),e})();var nP=function(e){return e.AccountSuccessfullyCreated="[MsTeams] Account Successfully Created",e.AccountSuccessfullyEdited="[MsTeams] Account Successfully Edited",e.AccountSuccessfullyPaired="[MsTeams] Account Successfully Paired",e.AccountSuccessfullyDeleted="[MsTeams] Account Successfully Deleted",e.PairingAccountRequested="[MsTeams] Pairing Account Requested",e.PairingAccountAcquired="[MsTeams] Pairing Account Acquired",e.PairingAccountCompleted="[MsTeams] Pairing Account Completed",e.PairingAccountAborted="[MsTeams] Pairing Account Aborted",e}({});class aP{constructor(e){this.payload=e,this.type=nP.AccountSuccessfullyCreated}}class oP{constructor(e){this.payload=e,this.type=nP.AccountSuccessfullyEdited}}class rP{constructor(e){this.payload=e,this.type=nP.PairingAccountRequested}}class cP{constructor(e){this.payload=e,this.type=nP.PairingAccountAcquired}}class lP{constructor(){this.type=nP.PairingAccountCompleted}}class dP{constructor(){this.type=nP.PairingAccountAborted}}class uP{constructor(e){this.payload=e,this.type=nP.AccountSuccessfullyDeleted}}const hP=Object(v.k)("learn-msteams"),pP=Object(v.m)(hP,e=>e);let mP=(()=>{class e{constructor(e){this.backendService=e,this.getScope().pipe().subscribe(e=>{this.currentPairScope=e.data.scope,console.log("Current MS Teams scope is "+this.currentPairScope)})}getScope(){return this.backendService.request("/learn/v1/webinar/msteams/accounts/scope","GET")}createAccount(e){const t=this.buildPayload(e);return this.backendService.request("/learn/v1/webinar/msteams/accounts","POST",t)}editAccount(e){const t=this.buildPayload(e);return this.backendService.request(`/learn/v1/webinar/msteams/accounts/${e.controls.id.value}`,"PUT",t)}fetchAccounts(e){const t=Object.assign(Object.assign({},e),{providers:["msteamsv2meeting","msteamsv2event"]});return this.backendService.request("/learn/v1/webinar/msteams/accounts","GET",t)}unpairAccount(e){return this.backendService.request(`/learn/v1/webinar/msteams/accounts/${e}/pair`,"DELETE")}deleteAccount(e){return this.backendService.request(`/learn/v1/webinar/msteams/accounts/${e}`,"DELETE")}buildPayload(e){var t;const i="meeting"===(null===(t=e.get("sessionType"))||void 0===t?void 0:t.value)?"msteamsv2meeting":"msteamsv2event";return{name:e.controls.accountName.value,tool:i,additional_info:e.controls.accountDescription.value,client_id:e.controls.clientId.value,client_secret:e.controls.clientSecret.value,session_type:i,is_calendarmeeting:e.controls.isCalendarMeeting.value,max_sessions:0|e.controls.sessionLimitAccount.value,max_sessions_per_course:0|e.controls.sessionLimitCourses.value,max_concurrent_sessions:0|e.controls.sessionLimitConcurrentRooms.value,tenant_id:e.controls.tenantId.value}}}return e.\u0275fac=function(t){return new(t||e)(c.nc(S.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();const gP=e=>t=>("string"==typeof t.value&&""==t.value||null==t.value)&&t.parent&&t.parent.controls[e].value?{thisIsRequiredField:"This is mandatory field"}:null,bP=function(){return{category:"webinar"}};function fP(e,t){if(1&e&&(c.jc(0,"div",10),c.jc(1,"div",5),c.jc(2,"div",11),c.fd(3),c.wc(4,"t"),c.ic(),c.jc(5,"div",15),c.jc(6,"div"),c.ec(7,"checkbox",16),c.ic(),c.ic(),c.ic(),c.ic()),2&e){const e=c.vc();c.Mb(3),c.hd(" ",c.yc(4,4,"Session type",c.Hc(7,bP))," "),c.Mb(4),c.Dc("inputFormControl",e.isCalendarMeeting.inputFormControl)("checked",e.isCalendarMeeting.checked)("label",e.isCalendarMeeting.label)}}function vP(e,t){if(1&e&&(c.jc(0,"div",18),c.ec(1,"textfield",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitCoursesTextField.type)("id",e.sessionLimitCoursesTextField.id)("floating_label",e.sessionLimitCoursesTextField.floating_label)("label",e.sessionLimitCoursesTextField.label)("max_length",e.sessionLimitCoursesTextField.max_length)("inputFormControl",e.sessionLimitCoursesTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function _P(e,t){if(1&e&&(c.jc(0,"div",18),c.ec(1,"textfield",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitAccountTextField.type)("id",e.sessionLimitAccountTextField.id)("floating_label",e.sessionLimitAccountTextField.floating_label)("label",e.sessionLimitAccountTextField.label)("max_length",e.sessionLimitAccountTextField.max_length)("inputFormControl",e.sessionLimitAccountTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function wP(e,t){if(1&e&&(c.jc(0,"div",18),c.ec(1,"textfield",8),c.ic()),2&e){const e=c.vc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRoomsTextField.type)("id",e.sessionLimitConcurrentRoomsTextField.id)("floating_label",e.sessionLimitConcurrentRoomsTextField.floating_label)("label",e.sessionLimitConcurrentRoomsTextField.label)("max_length",e.sessionLimitConcurrentRoomsTextField.max_length)("inputFormControl",e.sessionLimitConcurrentRoomsTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}const yP=function(){return{category:"standard"}},CP=function(){return{category:"admin"}};let SP=(()=>{class e{constructor(e){this.cdr=e,this.isEditMode=!1}ngOnInit(){this.setFormFieldsParams()}ngAfterViewInit(){this.formGroup.valueChanges.subscribe(()=>{this.cdr.detectChanges()})}checkForChanges(){this.cdr.markForCheck()}setFormFieldsParams(){this.accountName={type:Xe.a.TEXT,id:"account-name",floating_label:!0,label:E.a.t("webinar","Account Name"),max_length:50,show_counter:!0,inputFormControl:this.formGroup.controls.accountName},this.accountDescription={type:Xe.a.TEXT,id:"account-description",floating_label:!0,label:E.a.t("app7020","Description"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.accountDescription},this.clientId={type:Xe.a.TEXT,id:"client-id",floating_label:!0,label:E.a.t("slack","Client ID"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientId},this.tenantId={type:Xe.a.TEXT,id:"tenant-id",floating_label:!0,label:E.a.t("opensesame","Tenant ID"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.tenantId},this.clientSecret={type:Xe.a.TEXT,id:"client-secret",floating_label:!0,label:E.a.t("app","Client Secret"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientSecret},this.sessionType={id:"session-type",label:E.a.t("webinar","Session type"),inputFormControl:this.formGroup.get("sessionType"),name:"session-type"},this.sessionType.event={id:"session-type-event",floating_label:!0,label:E.a.t("conference","Event")},this.sessionType.meeting={id:"session-type-meeting",floating_label:!0,label:E.a.t("conference","Meeting")},this.sessionLimitCoursesTextField={type:Xe.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:E.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitCourses")},this.sessionLimitAccountTextField={type:Xe.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:E.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitAccount")},this.sessionLimitConcurrentRoomsTextField={type:Xe.a.NUMBER,id:"session-limit-concurrents",floating_label:!0,label:E.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.controls.sessionLimitConcurrentRooms};const e=!!this.formGroup.controls.isCalendarMeeting.value;this.isCalendarMeeting={label:E.a.t("webinar","Show Meeting/Event instructor calendar"),inputFormControl:new Ke.e(e),checked:e},this.isCalendarMeeting.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.isCalendarMeeting.setValue(e)});const t=!!this.formGroup.controls.sessionLimitCourses.value;this.sessionLimitCoursesCheckbox={label:E.a.t("webinar","Set session limits for courses"),inputFormControl:new Ke.e(t),checked:t},this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitCoursesCheckbox.setValue(e)});const i=!!this.formGroup.controls.sessionLimitAccount.value;this.sessionLimitAccountCheckbox={label:E.a.t("webinar","Set session limits per accounts"),inputFormControl:new Ke.e(i),checked:i},this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitAccountCheckbox.setValue(e)});const s=!!this.formGroup.controls.sessionLimitConcurrentRooms.value;this.sessionLimitConcurrentRoomsCheckbox={label:E.a.t("webinar","Set session for concurrent rooms"),inputFormControl:new Ke.e(s),checked:s},this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitConcurrentRoomsCheckbox.setValue(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["msteams-account-panel-ui"]],inputs:{formGroup:"formGroup",isEditMode:"isEditMode",oauthRedirectUri:"oauthRedirectUri",oauthRedirectUriTranslatable:"oauthRedirectUriTranslatable"},decls:56,vars:84,consts:[[1,"msteams-create-account"],[1,"msteams-account-redirect-info"],[1,"zmdi","zmdi-info","zmdi-hc-2x","text-main"],[1,"border-top-wrapper",3,"formGroup"],[1,"msteams-account-info-container"],[1,"details-container"],[1,"bold-subtitle"],[1,"msteams-account-text-field-margin"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator"],[1,"msteams-account-text-field-margin-no-bottom"],[1,"border-top-wrapper","msteams-account-info-container"],[1,"bold-subtitle","options-subtitle"],[3,"label","value","name","enabled","inputFormControl"],[1,"text-grey-mid","hint","options-label"],["class","border-top-wrapper msteams-account-info-container",4,"ngIf"],[1,"options-container"],[3,"inputFormControl","checked","label"],["class","msteams-account-margin-huge",4,"ngIf"],[1,"msteams-account-margin-huge"]],template:function(e,t){1&e&&(c.jc(0,"section",0),c.jc(1,"div"),c.jc(2,"div",1),c.ec(3,"i",2),c.jc(4,"span"),c.fd(5),c.wc(6,"t"),c.ec(7,"br"),c.fd(8),c.ic(),c.ic(),c.ic(),c.jc(9,"form",3),c.jc(10,"div",4),c.jc(11,"div",5),c.jc(12,"div",6),c.fd(13),c.wc(14,"t"),c.ic(),c.jc(15,"div",7),c.ec(16,"textfield",8),c.ic(),c.jc(17,"div",7),c.ec(18,"textfield",8),c.ic(),c.jc(19,"div",7),c.ec(20,"textfield",8),c.ic(),c.jc(21,"div",7),c.ec(22,"textfield",8),c.ic(),c.jc(23,"div",9),c.ec(24,"textfield",8),c.ic(),c.ic(),c.ic(),c.jc(25,"div",10),c.jc(26,"div",5),c.jc(27,"div",11),c.fd(28),c.wc(29,"t"),c.ic(),c.jc(30,"div"),c.ec(31,"radio",12),c.ic(),c.jc(32,"div"),c.ec(33,"radio",12),c.ec(34,"div",13),c.ic(),c.ic(),c.ic(),c.dd(35,fP,8,8,"div",14),c.jc(36,"div",10),c.jc(37,"div",5),c.jc(38,"div",11),c.fd(39),c.wc(40,"t"),c.ic(),c.jc(41,"div",15),c.jc(42,"div"),c.ec(43,"checkbox",16),c.ic(),c.dd(44,vP,2,7,"div",17),c.wc(45,"async"),c.ic(),c.jc(46,"div",15),c.jc(47,"div"),c.ec(48,"checkbox",16),c.ic(),c.dd(49,_P,2,7,"div",17),c.wc(50,"async"),c.ic(),c.jc(51,"div",15),c.jc(52,"div"),c.ec(53,"checkbox",16),c.ic(),c.dd(54,wP,2,7,"div",17),c.wc(55,"async"),c.ic(),c.ic(),c.ic(),c.ic(),c.ic()),2&e&&(c.Mb(5),c.hd(" ",c.xc(6,64,t.oauthRedirectUriTranslatable),""),c.Mb(3),c.hd(" ",t.oauthRedirectUri," "),c.Mb(1),c.Dc("formGroup",t.formGroup),c.Mb(4),c.hd(" ",c.yc(14,66,"General Information",c.Hc(81,yP))," "),c.Mb(3),c.Dc("type",t.accountName.type)("id",t.accountName.id)("floating_label",t.accountName.floating_label)("label",t.accountName.label)("max_length",t.accountName.max_length)("inputFormControl",t.accountName.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.accountDescription.type)("id",t.accountDescription.id)("floating_label",t.accountDescription.floating_label)("label",t.accountDescription.label)("max_length",t.accountDescription.max_length)("inputFormControl",t.accountDescription.inputFormControl)("showRequiredFieldIndicator",!1),c.Mb(2),c.Dc("type",t.clientId.type)("id",t.clientId.id)("floating_label",t.clientId.floating_label)("label",t.clientId.label)("max_length",t.clientId.max_length)("inputFormControl",t.clientId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.tenantId.type)("id",t.tenantId.id)("floating_label",t.tenantId.floating_label)("label",t.tenantId.label)("max_length",t.tenantId.max_length)("inputFormControl",t.tenantId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.clientSecret.type)("id",t.clientSecret.id)("floating_label",t.clientSecret.floating_label)("label",t.clientSecret.label)("max_length",t.clientSecret.max_length)("inputFormControl",t.clientSecret.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(4),c.hd(" ",c.yc(29,69,"Session type",c.Hc(82,bP))," "),c.Mb(3),c.Dc("label",t.sessionType.meeting.label)("value","meeting")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(2),c.Dc("label",t.sessionType.event.label)("value","event")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(2),c.Dc("ngIf","meeting"===t.sessionType.inputFormControl.value),c.Mb(4),c.hd(" ",c.yc(40,72,"Options",c.Hc(83,CP))," "),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitCoursesCheckbox.inputFormControl)("checked",t.sessionLimitCoursesCheckbox.checked)("label",t.sessionLimitCoursesCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(45,75,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCoursesTextField.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitAccountCheckbox.inputFormControl)("checked",t.sessionLimitAccountCheckbox.checked)("label",t.sessionLimitAccountCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(50,77,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccountTextField.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl)("checked",t.sessionLimitConcurrentRoomsCheckbox.checked)("label",t.sessionLimitConcurrentRoomsCheckbox.label),c.Mb(1),c.Dc("ngIf",c.xc(55,79,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRoomsTextField.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value||!1))},directives:[Ke.y,Ke.p,Ke.i,_t.a,jn.a,Ae.p,Fn.a],pipes:[E.b,Ae.b],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}msteams-account-panel-ui .bold-subtitle{padding-bottom:6px;font-weight:600;font-size:14px;line-height:18px}msteams-account-panel-ui .border-top-wrapper{border-top:1px solid var(--ui-color-badge-background-light)}msteams-account-panel-ui .details-container{padding:24px 0}msteams-account-panel-ui .options-subtitle{margin-bottom:16px}msteams-account-panel-ui .options-label{padding-left:24px}msteams-account-panel-ui .docebo-radio{margin-bottom:0}msteams-account-panel-ui .msteams-account-limit-list{padding:24px}msteams-account-panel-ui .msteams-account-redirect-info{display:flex;align-items:center;padding:1rem 1.5rem;padding:var(--hyd-spacing-sm) var(--hyd-spacing-md)}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-redirect-info span{margin-left:29px}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-redirect-info span{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-redirect-info span{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-redirect-info span{margin-right:29px}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-margin{margin-left:12px}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-margin{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-margin{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-margin{margin-right:12px}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-margin-huge{margin-left:26px}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-margin-huge{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-margin-huge{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-margin-huge{margin-right:26px}msteams-account-panel-ui .msteams-account-info-container{padding:0 1.5rem;padding:0 var(--hyd-spacing-md);box-sizing:border-box}msteams-account-panel-ui .msteams-account-text-field-margin{margin:16px 0 24px}msteams-account-panel-ui .msteams-account-text-field-margin-no-bottom{margin:16px 0 0}"],encapsulation:2,changeDetection:0}),e})();const TP=["uiComponent"];let kP=(()=>{class e extends Uc.a{constructor(t,i,s,n){super(),this.pageService=t,this.msTeamsService=i,this.msTeamsStore=s,this.translationService=n,this.isEditMode=!1,this.notMoreThan=(e,t)=>i=>i.value>e?{notMoreThan:this.translationService.instant("Max limit is {max} {things}",{category:"standard",max:e,things:t})}:null,this.baseRedirectUri=e.createBaseRedirectUri(),this.oauthRedirectUriTranslatable=E.a.t("webinar","Microsoft Teams Oauth redirect URL:")}static createBaseRedirectUri(){return`${x.b.getInstance().getPlatformActualUrl()}/learn/msteams`}ngOnInit(){this.rightPanel=this.pageService.rightPanel,this.setFormGroup()}ngAfterViewInit(){this.setPanelActions()}ngOnDestroy(){super.ngOnDestroy(),this.rightPanel.buttonsEnabled()}setPanelActions(){const e=[],t=E.a.t("standard",this.isEditMode?"Confirm":"Create");e.push({type:"normal",properties:{text:t},customClasses:"float-ltr-right-clear-none",handler:()=>{this.checkCustomFormValidations(),this.form.controls.clientId.errors||this.form.controls.clientId.setErrors(null),this.form.valid?(this.cleanFormValues(this.form),this.isEditMode?this.editAccount():this.createAccount()):(Object(Vw.l)(this.form),this.form.setValue(this.form.value))}}),e.push({type:"cancel",properties:{text:E.a.t("standard","Cancel")},customClasses:"float-ltr-right-clear-none",handler:e=>{e.close()}}),this.rightPanel.setActions(e)}createAccount(){this.rightPanel.buttonsDisabled(),this.msTeamsService.createAccount(this.form).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{this.accountName=e.data.name,this.accountId=e.data.id;const t={id:e.data.id,name:this.accountName,description:e.data.additional_info,createdAt:Qv()().toDate(),clientId:e.data.client_id,clientSecret:e.data.client_secret,accessTokenStatus:eP,sessionType:e.session_type,isCalendarMeeting:e.is_calendarmeeting,sessionLimitCourses:0|this.form.controls.sessionLimitCourses.value,sessionLimitAccount:0|this.form.controls.sessionLimitAccount.value,sessionLimitConcurrentRooms:0|this.form.controls.sessionLimitConcurrentRooms.value,tenantId:e.data.tenantId};this.msTeamsStore.dispatch(new aP(t)),this.rightPanel.close(),iP(this.baseRedirectUri,e.data.id,this.form.controls.clientId.value,e.data.tenant_id,e.data.client_secret,this.msTeamsService.currentPairScope)},this.accountUpsertErrorCallback())}editAccount(){this.rightPanel.buttonsDisabled(),this.msTeamsService.editAccount(this.form).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{var t=this.accountName;this.accountName=e.data.name;const i={id:e.data.id,name:t,description:e.data.additional_info,createdAt:Qv()().toDate(),clientId:e.data.client_id,tenantId:e.data.tenant_id,clientSecret:e.data.client_secret,sessionType:e.data.session_type,accessTokenStatus:eP};this.msTeamsService.unpairAccount(e.data.id).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{iP(this.baseRedirectUri,e.data.id,this.form.controls.clientId.value,e.data.tenant_id,e.data.client_secret,this.msTeamsService.currentPairScope),this.msTeamsStore.dispatch(new oP(i)),this.rightPanel.close()})},this.accountUpsertErrorCallback())}accountUpsertErrorCallback(){return e=>{1002===e.code&&(Object(Vw.l)(this.form),this.form.controls.clientId.setErrors({notUnique:E.a.t("webinar","Multiple accounts cannot use the same Client ID")}),Object(Vw.l)(this.form),this.uiComponent.checkForChanges(),this.rightPanel.buttonsEnabled())}}cleanFormValues(e){e.controls.sessionLimitCoursesCheckbox.value||e.controls.sessionLimitCourses.setValue(0),e.controls.sessionLimitAccountCheckbox.value||e.controls.sessionLimitAccount.setValue(0),e.controls.sessionLimitConcurrentRoomsCheckbox.value||e.controls.sessionLimitConcurrentRooms.setValue(0)}setFormGroup(){this.form=new Ke.h({id:new Ke.e(this.accountId),accountName:new Ke.e(this.accountName),accountDescription:new Ke.e(this.accountDescription),clientId:new Ke.e(this.clientId),tenantId:new Ke.e(this.tenantId),clientSecret:new Ke.e(this.clientSecret),sessionType:new Ke.e(this.sessionType),isCalendarMeeting:new Ke.e(this.isCalendarMeeting),sessionLimitCourses:new Ke.e(this.sessionLimitCourses),sessionLimitCoursesCheckbox:new Ke.e(!!this.sessionLimitCourses),sessionLimitAccount:new Ke.e(this.sessionLimitAccount),sessionLimitAccountCheckbox:new Ke.e(!!this.sessionLimitAccount),sessionLimitConcurrentRooms:new Ke.e(this.sessionLimitConcurrentRooms),sessionLimitConcurrentRoomsCheckbox:new Ke.e(!!this.sessionLimitConcurrentRooms)}),this.checkCustomFormValidations()}checkCustomFormValidations(){this.form.controls.accountName.setValidators([Ke.x.required,e=>"string"==typeof e.value&&e.value.match("^\\s+$")?{notHaveOnlyBlankCharacters:"This field cannot contains only empty spaces"}:null,Ke.x.maxLength(255)]),this.form.controls.accountDescription.setValidators([Ke.x.maxLength(255)]),this.form.controls.clientId.setValidators([Ke.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ke.x.maxLength(255)]),this.form.controls.clientSecret.setValidators([Ke.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ke.x.maxLength(255)]),this.form.controls.tenantId.setValidators([Ke.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ke.x.maxLength(255)]),this.form.controls.sessionType.setValidators([Ke.x.required]),this.form.controls.sessionLimitCourses.setValidators([gP("sessionLimitCoursesCheckbox"),this.notMoreThan(999,"sessions")]),this.form.controls.sessionLimitAccount.setValidators([gP("sessionLimitAccountCheckbox"),this.notMoreThan(999,"sessions")]),this.form.controls.sessionLimitConcurrentRooms.setValidators([gP("sessionLimitConcurrentRoomsCheckbox"),this.notMoreThan(999,"rooms")]),this.form.controls.accountName.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.controls.clientId.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.controls.tenantId.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.controls.clientSecret.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(O.a),c.dc(mP),c.dc(v.d),c.dc(js.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["msteams-account-panel-container"]],viewQuery:function(e,t){if(1&e&&c.md(TP,1),2&e){let e;c.Qc(e=c.sc())&&(t.uiComponent=e.first)}},inputs:{isEditMode:"isEditMode",accountId:"accountId",accountName:"accountName",accountDescription:"accountDescription",clientId:"clientId",tenantId:"tenantId",clientSecret:"clientSecret",sessionType:"sessionType",isCalendarMeeting:"isCalendarMeeting",sessionLimitCourses:"sessionLimitCourses",sessionLimitAccount:"sessionLimitAccount",sessionLimitConcurrentRooms:"sessionLimitConcurrentRooms"},features:[c.Lb([mP]),c.Jb],decls:2,vars:3,consts:[[3,"formGroup","oauthRedirectUri","oauthRedirectUriTranslatable"],["uiComponent",""]],template:function(e,t){1&e&&c.ec(0,"msteams-account-panel-ui",0,1),2&e&&c.Dc("formGroup",t.form)("oauthRedirectUri",t.baseRedirectUri)("oauthRedirectUriTranslatable",t.oauthRedirectUriTranslatable)},directives:[SP,Ke.p,Ke.i],styles:["\n        msteams-account-panel-ui {\n            height: 100%;\n            overflow-y: auto;\n            overflow-x: hidden;\n            display: block;\n        }\n    "],encapsulation:2,changeDetection:0}),e})();var IP=function(e){return e.NAME="name",e.CREATION="created_at",e}({}),xP=function(e){return e.ASC="asc",e.DESC="desc",e}({});const DP={isVisible:!0,type:Zd.a.BLANK001,title:E.a.t("webinar","No Microsoft Teams Accounts Found"),subtitle:E.a.t("webinar","Click the Add button in the top right corner to add a new Microsoft Teams account!")},OP={isVisible:!0,type:Zd.a.EMPTY001,title:E.a.t("standard","Whoops, No results found!"),subtitle:E.a.t("myteam","Please try again using different search/filters criteria.")},EP={mode:Oe.a.push,viewOptionLabel:E.a.t("standard","SORT BY"),filters:new Pe.a([{title:E.a.t("standard","Search"),code:"search",type:Oe.d.free_search_filter,params:{placeholder:E.a.t("standard","Search...")}}]),appliedFiltersNumber:new Pe.a(null),displayedItemsNumber:new Pe.a(null),viewOptions:new Pe.a(null),disableViewOptions:!1,elementLabels:{singular:E.a.t("standard","items"),plural:E.a.t("standard","items")}},PP={columnName:"createdAt",dir:Ni.a.DESC},MP={name:{headerLabel:E.a.t("webinar","Account Name"),fieldName:"name",columnName:"name",sortable:!0},description:{headerLabel:E.a.t("app7020","Description"),fieldName:"description",columnName:"description",sortable:!1},sessionType:{headerLabel:E.a.t("webinar","Session type"),fieldName:"sessionType",columnName:"sessionType",sortable:!1},createdAt:{headerLabel:E.a.t("standard","Creation Date"),fieldName:"createdAt",columnName:"createdAt",sortable:!0,type:"date",format:"MM/DD/YYYY"},accessTokenStatus:{headerLabel:E.a.t("webinar","Access token"),fieldName:"accessTokenStatus",columnName:"accessTokenStatus",sortable:!1},ellipsis:{}};function AP(e,t){if(1&e&&(c.fd(0),c.wc(1,"t")),2&e){const e=c.vc(3);c.gd(c.xc(1,1,e.tableColumns.createdAt.headerLabel))}}function LP(e,t){1&e&&(c.fd(0),c.wc(1,"HDateTime")),2&e&&c.hd(" ",c.zc(1,1,t.item.createdAt,null,"lll")," ")}function jP(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-table",6),c.rc("sort",function(t){return c.Uc(e),c.vc(2).onTableSort(t)}),c.ec(1,"hyd-table-column-text",7),c.ec(2,"hyd-table-column-text",7),c.jc(3,"hyd-table-column",8),c.jc(4,"hyd-table-column-header"),c.dd(5,AP,2,3,"ng-template"),c.ic(),c.jc(6,"hyd-table-column-cell"),c.dd(7,LP,2,5,"ng-template"),c.ic(),c.ic(),c.ec(8,"hyd-table-column-text",7),c.ec(9,"hyd-table-column-text",7),c.ec(10,"hyd-table-column-ellipsis",9),c.ic()}if(2&e){const e=c.vc(2);c.Dc("data",e.tableData)("sorting",e.tableDefaultSorting),c.Mb(1),c.Dc("headerLabel",e.tableColumns.name.headerLabel)("fieldName",e.tableColumns.name.fieldName)("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.description.headerLabel)("fieldName",e.tableColumns.description.fieldName)("columnName",e.tableColumns.description.columnName)("sortable",e.tableColumns.description.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.createdAt.columnName)("sortable",e.tableColumns.createdAt.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.sessionType.headerLabel)("fieldName",e.tableColumns.sessionType.fieldName)("columnName",e.tableColumns.sessionType.columnName)("sortable",e.tableColumns.sessionType.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.accessTokenStatus.headerLabel)("fieldName",e.tableColumns.accessTokenStatus.fieldName)("columnName",e.tableColumns.accessTokenStatus.columnName)("sortable",e.tableColumns.accessTokenStatus.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.ellipsis.columnName)("actions",e.tableColumns.ellipsis.actions)("orientation",e.tableColumns.ellipsis.orientation)}}function FP(e,t){if(1&e){const e=c.kc();c.jc(0,"hyd-paginator",10),c.rc("pageChange",function(t){return c.Uc(e),c.vc(2).onTablePageChange(t)}),c.ic()}if(2&e){const e=c.vc(2);c.Dc("pageIndex",e.tablePaginator.pageIndex)("pageSize",e.tablePaginator.pageSize)("length",e.tablePaginator.length)("pageSizeAutoAllowed",e.tablePaginator.pageSizeAutoAllowed)}}function RP(e,t){if(1&e&&c.ec(0,"blankslate",11),2&e){const e=c.vc(2);c.Dc("ngClass","blankslate-container")("isVisible",e.blankslateWithFilters.isVisible)("type",e.blankslateWithFilters.type)("title",e.blankslateWithFilters.title)("subtitle",e.blankslateWithFilters.subtitle)}}function NP(e,t){if(1&e){const e=c.kc();c.jc(0,"data-browser",2),c.rc("onFiltersUpdate",function(t){return c.Uc(e),c.vc().onDataBrowserFiltersUpdate(t)}),c.dd(1,jP,11,23,"hyd-table",3),c.dd(2,FP,1,4,"hyd-paginator",4),c.dd(3,RP,1,5,"blankslate",5),c.ic()}if(2&e){const e=c.vc();c.Dc("dataBrowserSource",e.dataBrowserSource),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showBlankslateWithFilters())}}function UP(e,t){if(1&e&&(c.jc(0,"blankslate",12),c.fd(1," >\n"),c.ic()),2&e){const e=c.vc();c.Dc("isVisible",e.blankslateWithoutFilters.isVisible)("type",e.blankslateWithoutFilters.type)("title",e.blankslateWithoutFilters.title)("subtitle",e.blankslateWithoutFilters.subtitle)}}let qP=(()=>{class e{constructor(e){this.cdr=e,this.filtersUpdate=new c.q,this.tableSort=new c.q,this.tablePageChange=new c.q,this.openDeleteDialog=new c.q,this.beginPairing=new c.q,this.editAccount=new c.q,this.blankslateWithoutFilters=DP,this.blankslateWithFilters=OP,this.dataBrowserSource=EP,this.tableDefaultSorting=PP,this.tableColumns=MP,this.setTableEllipsisColumn()}showBlankslateWithoutFilters(){return!this.showLoader&&0===this.tableData.length&&""===this.searchFilterValue}showBlankslateWithFilters(){return!this.showLoader&&0===this.tableData.length&&""!==this.searchFilterValue}showDataBrowser(){return this.tableData.length>0||""!==this.searchFilterValue}showTable(){return!this.showLoader&&this.tableData.length>0}onDataBrowserFiltersUpdate(e){this.filtersUpdate.emit(e)}onTableSort(e){this.tableSort.emit(e)}onTablePageChange(e){this.tablePageChange.emit(e)}checkForChanges(){this.cdr.markForCheck()}setTableEllipsisColumn(){this.tableColumns.ellipsis={columnName:"ellipsis",columnWidth:"100px",alignment:Ee.a.CENTER,ellipsed:!1,orientation:"bottom-right",actions:[{id:"pair",title:E.a.t("standard","Pair"),params:null,active:!1,action:e=>{this.beginPairing.emit(e)}},{id:"edit",title:E.a.t("app7020","Edit"),params:null,active:!1,action:e=>{this.editAccount.emit(e)}},{id:"delete",title:E.a.t("standard","Delete"),params:null,active:!1,action:e=>{this.openDeleteDialog.emit(e)}}]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(c.i))},e.\u0275cmp=c.Xb({type:e,selectors:[["msteams-account-list"]],inputs:{tableData:"tableData",searchFilterValue:"searchFilterValue",showLoader:"showLoader",tablePaginator:"tablePaginator"},outputs:{filtersUpdate:"filtersUpdate",tableSort:"tableSort",tablePageChange:"tablePageChange",openDeleteDialog:"openDeleteDialog",beginPairing:"beginPairing",editAccount:"editAccount"},decls:2,vars:2,consts:[["class","data-browser-msTeams",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","blankslate-container",3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"data-browser-msTeams",3,"dataBrowserSource","onFiltersUpdate"],["class","hyd-table",3,"data","sorting","sort",4,"ngIf"],["class","hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange",4,"ngIf"],[3,"ngClass","isVisible","type","title","subtitle",4,"ngIf"],[1,"hyd-table",3,"data","sorting","sort"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnName","sortable"],[3,"columnName","actions","orientation"],[1,"hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange"],[3,"ngClass","isVisible","type","title","subtitle"],[1,"blankslate-container",3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(c.dd(0,NP,4,4,"data-browser",0),c.dd(1,UP,2,4,"blankslate",1)),2&e&&(c.Dc("ngIf",t.showDataBrowser()),c.Mb(1),c.Dc("ngIf",t.showBlankslateWithoutFilters()))},directives:[Ae.p,Le.a,Fe.a,Re.a,Ne.c,Ne.d,Ne.b,Ue.a,je.b,ld.a,Ae.n],pipes:[E.b,Xt.a],styles:["msteams-account-list .blankslate-container{margin-top:91px}msteams-account-list .hyd-paginator{position:fixed;bottom:0;left:0;width:100%;border:1px solid var(--hyd-color-border-neutral)}msteams-account-list .data-browser-msTeams .grid-content-container.mdl-grid{margin:0}msteams-account-list .data-browser-msTeams .grid-content-container.mdl-grid>.mdl-cell.mdl-cell--12-col{margin:0;width:100%}msteams-account-list .data-browser-msTeams .full-width-header-container>.section-wrapper{border-top:1px solid var(--hyd-color-border-neutral)}msteams-account-list .data-browser-msTeams .full-width-header-container>.section-wrapper>.mdl-grid{margin:0}msteams-account-list .data-browser-msTeams .hyd-table-body{padding-bottom:45px}msteams-account-list .data-browser-msTeams .docebo-data-browser #sidebar-filters .sidebar-wrapper{height:100%;box-sizing:border-box;border-top:var(--hyd-color-border-neutral)}msteams-account-list .data-browser-msTeams .hyd-table{border-color:var(--hyd-color-border-neutral)}msteams-account-list .data-browser-msTeams .hyd-table .hyd-table-head{border-color:var(--hyd-color-border-neutral)!important}msteams-account-list .data-browser-msTeams .hyd-table .hyd-table-body,msteams-account-list .data-browser-msTeams .hyd-table .hyd-table-body .hyd-table-row{border-color:var(--hyd-color-border-neutral)}"],encapsulation:2,changeDetection:0}),e})();const zP=["uiComponent"];let VP=(()=>{class e extends Uc.a{constructor(e,t,i,s,n,a,o,r,c){super(),this.translationService=e,this.pageService=t,this.router=i,this.msTeamsStore=s,this.permissionManagerService=n,this.appStore=a,this.windowService=o,this.msTeamsService=r,this.docLayoutService=c,this.showLoader=!0,this.searchFilterValue="",this.tablePaginator={pageIndex:0,pageSize:15,length:0,pageSizeAutoAllowed:!0},this.tableActiveSorting=IP.CREATION,this.tableActiveSortingDir=xP.DESC,this.tableData=[],this.msTeamsAccountSelector$=this.msTeamsStore.pipe(Object(v.p)(pP)),this.pageInitialized=!1,this.snackbarIntervals=[],this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Microsoft Teams",href:this.router.url}]),this.hasUserViewPermission$=n.can(BD.a.USER_VIEW),this.msTeamsAccountSelector$.pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(e=>{if("PairingAccountCompleted"===e.status&&this.windowSubscription)return this.windowSubscription.unsubscribe(),void this.fetchAccounts();if(["AccountCreated","AccountEdited","PairingAccountRequested"].includes(e.status))switch(e.status){case"AccountCreated":this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastCreatedAccount,"create");break;case"AccountEdited":this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastEditedAccount,"edit");break;case"PairingAccountRequested":this.watchPairing(e.lastRequestedPairedAccount,"pair")}"PairingAccountAcquired"===e.status&&e.pairing&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.windowSubscription=this.windowService.focus().pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(t=>{if(t&&"PairingAccountAcquired"===e.status&&e.pairing){const{account:t,action:i,item:s}=e.pairing;this.createSnackbar(s,t,i),this.msTeamsStore.dispatch(new lP)}})),"AccountDeleted"===e.status&&e.lastDeletedAccountPartial&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.handleAccountDeleted(e.lastDeletedAccountPartial))})}ngOnInit(){this.pageService.ready().pipe(Object(ee.a)(1)).subscribe(()=>{this.pageDialog=this.pageService.dialog,this.rightPanel=this.pageService.rightPanel,this.setPageTitle(),this.setActionButtons(),this.pageInitialized=!0})}ngAfterViewInit(){this.fetchAccounts()}ngOnDestroy(){this.docLayoutService.actionButtons.clearActionButtons(),super.ngOnDestroy()}onFiltersUpdate(e){this.searchFilterValue=e.search?e.search:"",this.fetchAccounts()}onTableSort(e){switch(this.tableActiveSortingDir=e.dir,e.columnName){case"createdAt":this.tableActiveSorting=IP.CREATION;break;case"name":this.tableActiveSorting=IP.NAME}this.fetchAccounts()}onTablePageChange(e){const{pageIndex:t}=e;let{pageSize:i}=e;i<1&&(i=this.getAutoPageSize()),this.tablePaginator.pageSize=i,this.tablePaginator.pageIndex=t,this.fetchAccounts()}onOpenDeleteDialog(e){const t=e.id,i=e.name;this.docLayoutService.dialog.showCommonDialog(this.setDeleteDialogParams()).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.msTeamsService.deleteAccount(t).pipe(Object(bt.a)(this.ngUnsubscribe)).subscribe(()=>{e.actionSuccess.next(!0),this.msTeamsStore.dispatch(new uP({id:t,name:i}))})})}onPairingRequested(e){this.msTeamsService.unpairAccount(e.id).subscribe(()=>{iP(`${x.b.getInstance().getPlatformActualUrl()}/learn/msteams`,e.id,e.clientId,e.tenantId,e.clientSecret,this.msTeamsService.currentPairScope),this.msTeamsStore.dispatch(new rP({id:e.id,name:e.name,description:e.description,clientId:e.clientId,tenantId:e.tenantId,clientSecret:"",createdAt:e.createdAt,accessTokenStatus:tP,sessionType:e.sessionType,sessionLimitCourses:e.sessionLimitCourses,sessionLimitAccount:e.sessionLimitAccount,sessionLimitConcurrentRooms:e.sessionLimitConcurrentRooms}))})}onEditAccountRequested(e){this.openAccountRightPanel(e)}getAutoPageSize(){const e=document.querySelector("msteams-account-list");return Math.floor((window.innerHeight-e.offsetTop-90-80-39)/38)}createAccountCreationSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully created!",{accountName:null==e?void 0:e.name})}createAccountEditSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully edited!",{accountName:null==e?void 0:e.name})}createAccountDeleteSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully deleted!",{accountName:e.name})}showSuccessSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"success"})}createAccountPairingSuccessSnackbarLabel(e){return E.a.t("webinar","<b>{accountName}</b> has been successfully paired!",{accountName:null==e?void 0:e.name})}showFailureSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"error"})}createAccountPairingFailureSnackbarLabel(){return E.a.t("webinar","Pairing failed, please try again or check your configuration")}setPageTitle(){this.docLayoutService.header.showTitleBar({title:"Microsoft Teams",subtitle:E.a.t("webinar","Manage your Microsoft Teams accounts."),fullWidth:!0})}setActionButtons(){const e=[{properties:{BgClass:"bg-positive-green",textClass:"text-white",icons:["plus"],tooltipText:E.a.t("webinar","New Account"),tooltipPosition:"bottom"},onClick:()=>{this.openAccountRightPanel()}}];this.docLayoutService.actionButtons.setActionButtons(e)}openAccountRightPanel(e){let t,i;e?(t=E.a.t("webinar","Edit Account"),i=E.a.t("webinar","Edit the details of your account to update it")):(t=E.a.t("webinar","New Account"),i=E.a.t("webinar","Fill in all the mandatory details in order to create a new account"));const s={isEditMode:!!e,accountId:e?e.id:null,accountName:e?e.name:null,accountDescription:e?e.description:null,clientId:e?e.clientId:null,tenantId:e?e.tenantId:null,clientSecret:e?e.clientSecret:null,sessionType:e?e.sessionType:"meeting",isCalendarMeeting:!!e&&e.isCalendarMeeting,sessionLimitCourses:e&&e.sessionLimitCourses>0?e.sessionLimitCourses:null,sessionLimitAccount:e&&e.sessionLimitAccount>0?e.sessionLimitAccount:null,sessionLimitConcurrentRooms:e&&e.sessionLimitConcurrentRooms>0?e.sessionLimitConcurrentRooms:null};this.pageService.rightPanel.setWidth(500).setTitle(t).setDescription(i).setContent({component:kP,params:s}).open()}fetchAccounts(){this.showLoader=!0,this.uiComponent.checkForChanges(),this.msTeamsService.fetchAccounts({term:this.searchFilterValue,page:this.tablePaginator.pageIndex+1,page_size:this.tablePaginator.pageSize,sort:`${this.tableActiveSorting}.${this.tableActiveSortingDir}`}).subscribe(e=>{const t=[];for(const n of e.data.items)t.push({id:n.id,clientId:n.client_id,clientSecret:n.client_secret,tenantId:n.tenant_id,name:n.name,description:n.description,createdAt:Qv.a.unix(n.created_at).toDate(),accessTokenStatus:n.paired?tP:eP,sessionType:(i=n.session_type,{msteamsv2meeting:"meeting",msteamsv2event:"event"}[i]),isCalendarMeeting:n.is_calendarmeeting,sessionLimitCourses:n.max_sessions_per_course,sessionLimitAccount:n.max_sessions,sessionLimitConcurrentRooms:n.max_concurrent_sessions});var i;const{total_count:s}=e.data;this.tablePaginator.length=s,this.mapTableData(t),this.showLoader=!1,this.uiComponent.checkForChanges()})}mapTableData(e){this.tableData=[],e.forEach(e=>{this.tableData.push(e)})}handleAccountCreated(e,t){if("success"===e){const e=this.createAccountCreationSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountPaired(e,t){if("success"===e){const e=this.createAccountPairingSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountEdited(e,t){if("success"===e){const e=this.createAccountEditSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountDeleted(e){const t=this.createAccountDeleteSuccessSnackbarLabel(e);this.showSuccessSnackbar(t)}watchPairing(e,t){if(null===e)return;const i=Math.random();this.snackbarIntervals[i]=setInterval(()=>{const s=window.localStorage.getItem(ZE(e.id));s&&(window.localStorage.removeItem(ZE(e.id)),clearInterval(this.snackbarIntervals[i]),delete this.snackbarIntervals[i],this.msTeamsStore.dispatch(new cP({item:s,account:e,action:t})))},200),setTimeout(()=>{this.snackbarIntervals[i]&&(clearInterval(this.snackbarIntervals[i]),window.localStorage.removeItem(ZE("")),this.msTeamsStore.dispatch(new dP))},4e4)}createSnackbar(e,t,i){switch(i){case"create":this.handleAccountCreated(e,t);break;case"edit":this.handleAccountEdited(e,t);break;case"pair":this.handleAccountPaired(e,t);break;case"delete":this.handleAccountDeleted(t)}}setDeleteDialogParams(){return{id:"delete-checklist-dialog",width:460,height:210,title:E.a.t("standard","Delete Account"),content:E.a.t("standard","Are you sure you want to delete the selected account?<br>If you delete it, it will be definitely removed from the system and you will need to reassign all of the events created with this account to a different account. If you don't reassign the events, both learners and instructors will no longer be able to access them."),actions:[{id:"cancel",type:"neutral",label:E.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:E.a.t("standard","Delete"),slot:"end"}]}}}return e.\u0275fac=function(t){return new(t||e)(c.dc(js.a),c.dc(O.a),c.dc(s.h),c.dc(v.d),c.dc(WD.a),c.dc(v.d),c.dc(cd.a),c.dc(mP),c.dc(M.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["msteams-account-container"]],viewQuery:function(e,t){if(1&e&&c.md(zP,1),2&e){let e;c.Qc(e=c.sc())&&(t.uiComponent=e.first)}},features:[c.Jb],decls:2,vars:4,consts:[[3,"showLoader","tableData","tablePaginator","searchFilterValue","filtersUpdate","tableSort","tablePageChange","openDeleteDialog","beginPairing","editAccount"],["uiComponent",""]],template:function(e,t){1&e&&(c.jc(0,"msteams-account-list",0,1),c.rc("filtersUpdate",function(e){return t.onFiltersUpdate(e)})("tableSort",function(e){return t.onTableSort(e)})("tablePageChange",function(e){return t.onTablePageChange(e)})("openDeleteDialog",function(e){return t.onOpenDeleteDialog(e)})("beginPairing",function(e){return t.onPairingRequested(e)})("editAccount",function(e){return t.onEditAccountRequested(e)}),c.ic()),2&e&&c.Dc("showLoader",t.showLoader)("tableData",t.tableData)("tablePaginator",t.tablePaginator)("searchFilterValue",t.searchFilterValue)},directives:[qP],encapsulation:2,changeDetection:0}),e})(),BP=(()=>{class e{constructor(e,t){this.pageService=e,this.docLayoutService=t}canDeactivate(e){return new Promise(t=>{if(!e.showIframe)return t(!0);this.pageService.dialog.open({id:1,width:465,height:200,title:Je.a.t("widgets","Leaving session"),content:Je.a.t("widgets","Leaving this page will log you out from the session. Are you sure you want to do that?"),actions:[{type:"cancel",properties:{text:Je.a.t("standard","Cancel")},handler:e=>{e.close(),t(!1)}},{type:"normal",properties:{text:Je.a.t("standard","Confirm")},handler:e=>{t(!0),e.close()}}]})})}}return e.\u0275fac=function(t){return new(t||e)(c.nc(O.a),c.nc(M.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const GP=["privacyPolicy"],$P=["termsAndConditions"];function HP(e,t){if(1&e){const e=c.kc();c.jc(0,"div",6),c.jc(1,"doc-layout-policies-acceptance",7,8),c.jc(3,"div",9),c.jc(4,"ui-button-text",10),c.rc("trigger",function(){return c.Uc(e),c.vc().askForLogoutConfirmation()}),c.wc(5,"t"),c.wc(6,"t"),c.ic(),c.jc(7,"ui-button-text",11),c.rc("trigger",function(){return c.Uc(e),c.vc().onPrivacyPolicyAccept()}),c.wc(8,"t"),c.wc(9,"t"),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("insideConfirmDetails",!0)("showPrivacyPolicyName",!0)("showPrivacyPolicySubtitle",!0)("showPrivacyPolicyHeaderMessage",!0)("showPrivacyPolicyContent",!0)("showPrivacyPolicyCheckboxes",!0)("update",e.isPrivacyPolicyUpdated)("showInlineError",!0),c.Mb(3),c.Dc("label",c.xc(5,15,e.dictionary.dontAgree))("ariaLabel",c.xc(6,17,e.dictionary.dontAgree))("loading",e.loggingOut),c.Mb(3),c.Dc("label",c.xc(8,19,e.dictionary.agree))("ariaLabel",c.xc(9,21,e.dictionary.agree))("color","accent")("loading",e.savingPrivacyPolicy)}}function YP(e,t){if(1&e){const e=c.kc();c.jc(0,"div",12),c.jc(1,"doc-layout-policies-acceptance",13,14),c.jc(3,"div",15),c.jc(4,"ui-button-text",10),c.rc("trigger",function(){return c.Uc(e),c.vc().askForLogoutConfirmation()}),c.wc(5,"t"),c.wc(6,"t"),c.ic(),c.jc(7,"ui-button-text",11),c.rc("trigger",function(){return c.Uc(e),c.vc().onTermsConditionsAccept()}),c.wc(8,"t"),c.wc(9,"t"),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(1),c.Dc("insideConfirmDetails",!0)("showTermsAndConditionsName",!0)("showTermsAndConditionsSubtitle",!0)("showTermsAndConditionsContent",!0)("showTermsAndConditionsCheckboxes",!0)("update",e.isTermsAndConditionsUpdated)("showInlineError",!0),c.Mb(3),c.Dc("label",c.xc(5,14,e.dictionary.dontAgree))("ariaLabel",c.xc(6,16,e.dictionary.dontAgree))("loading",e.loggingOut),c.Mb(3),c.Dc("label",c.xc(8,18,e.dictionary.agree))("ariaLabel",c.xc(9,20,e.dictionary.agree))("color","accent")("loading",e.savingTermsAndConditions)}}function WP(e,t){if(1&e&&(c.ec(0,"ui-notification-inline",31),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc(2);c.Dc("title",c.xc(1,2,e.personalInfoErrorsTitle))("message",c.xc(2,4,e.dictionary.personalInfo.error.errorsSaveFormSubTitle))}}function QP(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.error.fieldRequired)," ")}}function KP(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.error.fieldRequired)," ")}}function XP(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.error.missingEmail)," ")}}function JP(e,t){if(1&e&&(c.jc(0,"ui-input-error"),c.fd(1),c.wc(2,"t"),c.ic()),2&e){const e=c.vc(2);c.Mb(1),c.hd(" ",c.xc(2,1,e.dictionary.personalInfo.error.emailNotValid)," ")}}function ZP(e,t){1&e&&c.ec(0,"div",37)}function eM(e,t){if(1&e&&(c.hc(0),c.jc(1,"div",25),c.ec(2,"doc-shared-user-additional-field",35),c.ic(),c.dd(3,ZP,1,0,"div",36),c.gc()),2&e){const e=t.$implicit,i=t.index,s=c.vc(3);c.Mb(2),c.Dc("id",e.id)("label",e.label)("type",e.type)("control",e.formControl)("options",e.options)("iframeHeight",e.iframeHeight)("iframeUrl",e.iframeUrl)("userData",s.userData),c.Mb(1),c.Dc("ngIf",0!==i&&(i+1)%2==0)}}function tM(e,t){if(1&e&&(c.jc(0,"section",32),c.jc(1,"div",17),c.jc(2,"div",18),c.jc(3,"div",33),c.fd(4),c.wc(5,"t"),c.ic(),c.ic(),c.dd(6,eM,4,9,"ng-container",34),c.ic(),c.ic()),2&e){const e=c.vc(2);c.Mb(4),c.hd(" ",c.xc(5,2,e.dictionary.personalInfo.additionalFields)," "),c.Mb(2),c.Dc("ngForOf",e.additionalFields)}}function iM(e,t){if(1&e){const e=c.kc();c.jc(0,"div",16),c.jc(1,"div",17),c.jc(2,"div",18),c.jc(3,"div",19),c.jc(4,"div",20),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"div",21),c.fd(8),c.wc(9,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(10,"div",17),c.jc(11,"div",18),c.dd(12,WP,3,6,"ui-notification-inline",22),c.ic(),c.ic(),c.jc(13,"section",23),c.jc(14,"div",17),c.jc(15,"div",18),c.jc(16,"div",24),c.fd(17),c.wc(18,"t"),c.ic(),c.ic(),c.jc(19,"div",25),c.jc(20,"ui-input-text",26),c.wc(21,"t"),c.wc(22,"t"),c.dd(23,QP,3,3,"ui-input-error",27),c.ic(),c.ic(),c.jc(24,"div",25),c.jc(25,"ui-input-text",26),c.wc(26,"t"),c.wc(27,"t"),c.dd(28,KP,3,3,"ui-input-error",27),c.ic(),c.ic(),c.jc(29,"div",25),c.jc(30,"ui-input-text",26),c.wc(31,"t"),c.wc(32,"t"),c.dd(33,XP,3,3,"ui-input-error",27),c.dd(34,JP,3,3,"ui-input-error",27),c.ic(),c.ic(),c.ic(),c.ic(),c.dd(35,tM,7,4,"section",28),c.jc(36,"ui-panel-footer"),c.jc(37,"ui-panel-footer-slot-end"),c.jc(38,"ui-button-text",29),c.rc("trigger",function(){return c.Uc(e),c.vc().logout()}),c.wc(39,"t"),c.ic(),c.jc(40,"ui-button-text",30),c.rc("trigger",function(){return c.Uc(e),c.vc().savePersonalInfo()}),c.wc(41,"t"),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(5),c.hd(" ",c.xc(6,22,e.dictionary.personalInfo.additionalFieldsUpdate)," "),c.Mb(3),c.hd(" ",c.xc(9,24,e.dictionary.personalInfo.additionalFieldsSubtitle)," "),c.Mb(4),c.Dc("ngIf",e.personalInfoErrorsCount>0),c.Mb(5),c.hd(" ",c.xc(18,26,e.dictionary.personalInfo.details)," "),c.Mb(3),c.Dc("formControl",e.personalInfoGroup.controls.firstname)("requiredMarker",c.xc(21,28,e.dictionary.personalInfo.requiredMarker))("label",c.xc(22,30,e.dictionary.personalInfo.firstName)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.firstname.errors?null:e.personalInfoGroup.controls.firstname.errors.required)&&e.personalInfoGroup.controls.firstname.dirty),c.Mb(2),c.Dc("formControl",e.personalInfoGroup.controls.lastname)("requiredMarker",c.xc(26,32,e.dictionary.personalInfo.requiredMarker))("label",c.xc(27,34,e.dictionary.personalInfo.lastName)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.lastname.errors?null:e.personalInfoGroup.controls.lastname.errors.required)&&e.personalInfoGroup.controls.lastname.dirty),c.Mb(2),c.Dc("formControl",e.personalInfoGroup.controls.email)("requiredMarker",c.xc(31,36,e.dictionary.personalInfo.requiredMarker))("label",c.xc(32,38,e.dictionary.personalInfo.email)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.email.errors?null:e.personalInfoGroup.controls.email.errors.required)&&e.personalInfoGroup.controls.email.dirty),c.Mb(1),c.Dc("ngIf",!1===(null==e.personalInfoGroup.controls.email.errors||null==e.personalInfoGroup.controls.email.errors.emailValidator?null:e.personalInfoGroup.controls.email.errors.emailValidator.valid)&&e.personalInfoGroup.controls.email.dirty),c.Mb(1),c.Dc("ngIf",e.additionalFields.length>0),c.Mb(3),c.Dc("loading",e.loggingOut)("label",c.xc(39,40,e.dictionary.signout)),c.Mb(2),c.Dc("label",c.xc(41,42,e.dictionary.update))("loading",e.savingPersonalInfo)}}const sM=function(e){return{count_error:e}};function nM(e,t){if(1&e&&(c.ec(0,"ui-notification-inline",31),c.wc(1,"t"),c.wc(2,"t")),2&e){const e=c.vc(2);c.Dc("title",c.yc(1,2,1===e.passwordChangeErrorsCount?e.dictionary.savingChangesNotPossibleSingular:e.dictionary.savingChangesNotPossiblePlural,c.Ic(7,sM,e.passwordChangeErrorsCount)))("message",c.xc(2,5,e.dictionary.personalInfo.error.errorsSaveFormSubTitle))}}function aM(e,t){if(1&e){const e=c.kc();c.jc(0,"div",38),c.jc(1,"div",17),c.jc(2,"div",18),c.jc(3,"div",19),c.jc(4,"div",20),c.fd(5),c.wc(6,"t"),c.ic(),c.jc(7,"div",21),c.fd(8),c.wc(9,"t"),c.ic(),c.ic(),c.ic(),c.ic(),c.jc(10,"div",17),c.jc(11,"div",18),c.dd(12,nM,3,9,"ui-notification-inline",22),c.ic(),c.ic(),c.jc(13,"div",17),c.jc(14,"div",18),c.ec(15,"lrn-my-profile-change-password-form",null,39),c.ic(),c.ic(),c.jc(17,"ui-panel-footer"),c.jc(18,"ui-panel-footer-slot-end"),c.jc(19,"ui-button-text",29),c.rc("trigger",function(){return c.Uc(e),c.vc().logout()}),c.wc(20,"t"),c.ic(),c.jc(21,"ui-button-text",30),c.rc("trigger",function(){c.Uc(e);const t=c.Rc(16);return c.vc().updatePassword(t.passwordChangeFormGroup)}),c.wc(22,"t"),c.ic(),c.ic(),c.ic(),c.ic()}if(2&e){const e=c.vc();c.Mb(5),c.hd(" ",c.xc(6,7,e.dictionary.changePassword.title)," "),c.Mb(3),c.hd(" ",c.xc(9,9,e.dictionary.changePassword.changePasswordRequired)," "),c.Mb(4),c.Dc("ngIf",e.passwordChangeErrorsCount>0),c.Mb(7),c.Dc("loading",e.loggingOut)("label",c.xc(20,11,e.dictionary.signout)),c.Mb(2),c.Dc("label",c.xc(22,13,e.dictionary.changePassword.btnChangePassword))("loading",e.savingNewPassword)}}let oM=(()=>{class e{constructor(e,t,i,s,n){var a,o,r,c;this._router=e,this._backendService=t,this._docLayoutService=i,this._sessionService=s,this._myProfileService=n,this.isPrivacyPolicyUpdated=null===(o=null===(a=k.c.getInstance().need_policy_accept)||void 0===a?void 0:a.policy)||void 0===o?void 0:o.is_update,this.isTermsAndConditionsUpdated=null===(c=null===(r=k.c.getInstance().need_tc_accept)||void 0===r?void 0:r.tc)||void 0===c?void 0:c.is_update,this.dialogs=[],this.currentDialogIndex=0,this.dictionary=rT.a,this.conditionsOfUseDictionary=Vk,this.savingPrivacyPolicy=!1,this.savingTermsAndConditions=!1,this.additionalFields=[],this.isSuperAdmin=k.c.getInstance().isCurrentUserA(k.c.LEVEL_SUPERADMIN),this.savingPersonalInfo=!1,this.savingNewPassword=!1,this.loggingOut=!1,this.passwordChangeErrorsCount=0,this.personalInfoErrorsCount=0,this._session=k.c.getInstance(),this._platform=k.b.getInstance(),this._useEmalAsUsername="on"===this._platform.user_settings.use_email_as_username,this._requireName=k.b.getInstance().settings.registration_settings.options.lastfirst_mandatory,this._docLayoutService.page.activateLimboMode(),this.initConfirmDetailsDialogs()}initConfirmDetailsDialogs(){const e=this._session.isCurrentUserA(k.c.LEVEL_SUPERADMIN),t=this._session.isCurrentUserA(k.c.LEVEL_ERP_ADMIN);this._session.need_policy_accept&&this.dialogs.push("privacy-policy"),this._session.need_tc_accept&&this.dialogs.push("terms-and-conditions"),!t&&this._session.force_change&&this.dialogs.push("password"),!e&&k.b.getInstance().settings.request_mandatory_fields_completion&&this._session.has_unfilled_fields&&(this._setPersonalInfoGroup(),this.dialogs.push("user-fields"),this._getAdditionalFields(),this._getUserData()),this.dialogs.length||this.goToHomepage()}showNextDialog(){this.currentDialogIndex++,this.currentDialogIndex>=this.dialogs.length&&this.goToHomepage()}goToHomepage(){this._router.navigate(["/learn/home"]),this._docLayoutService.breadcrumbs.clearNavigationHistory()}askForLogoutConfirmation(){this._docLayoutService.dialog.showCommonDialog({title:this.conditionsOfUseDictionary.areYouSureDialog.title,content:this.conditionsOfUseDictionary.areYouSureDialog.content,actions:[{id:"cancel",type:"neutral",label:this.conditionsOfUseDictionary.areYouSureDialog.cancel,slot:"end"},{id:"logout",type:"negative",label:this.conditionsOfUseDictionary.areYouSureDialog.logout,slot:"end"}]}).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.logout().subscribe(()=>{e.actionSuccess.next(!0)},()=>{e.actionSuccess.next(!0)})})}logout(){this.loggingOut=!0;const e=this._backendService.logout().pipe(Object(Ci.a)(()=>{this._session.redirect_on_logout?top.window.location.href=`${this._backendService.getBaseUrl()}/lms/index.php?r=site/logout&keep_oauth=1`:(this.loggingOut=!1,this._router.navigate(["/learn/signin"]))}));return e.subscribe(()=>{}),e}onPrivacyPolicyAccept(){this.redirectPowerUserImpersonator()||(this.privacyPolicy.ppInlineError=!1,this.privacyPolicy.isValid()?(this.savingPrivacyPolicy=!0,this.privacyPolicy.acceptNewPrivacyPolicy().pipe(Object(ee.a)(1)).subscribe(()=>{this._reloadSessionAndGoToNextDialog()},()=>{this.logout()})):this.privacyPolicy.ppInlineError=!0)}onTermsConditionsAccept(){this.redirectPowerUserImpersonator()||(this.termsAndConditions.tcInlineError=!1,this.termsAndConditions.isValid()?(this.savingTermsAndConditions=!0,this.termsAndConditions.acceptNewTerms().pipe(Object(ee.a)(1)).subscribe(()=>{this._reloadSessionAndGoToNextDialog()},()=>{this.logout()})):this.termsAndConditions.tcInlineError=!0)}savePersonalInfo(){if(!this.redirectPowerUserImpersonator()&&this._isPersonalInfoValid()){this.savingPersonalInfo=!0;const e=this._myProfileService.getAdditionalFieldsRawValue(this.additionalFields);this._myProfileService.updatePersonalInfo(this.personalInfoGroup.controls.firstname.value,this.personalInfoGroup.controls.lastname.value,this.personalInfoGroup.controls.email.value,e,"myProfile").subscribe(e=>{e.data.success&&(this._session.setUserInfo({firstname:this.personalInfoGroup.controls.firstname.value,lastname:this.personalInfoGroup.controls.lastname.value,email:this.personalInfoGroup.controls.email.value}),this._docLayoutService.toast.showToast({message:rT.a.personalInfo.success,type:"success"}),this._reloadSessionAndGoToNextDialog()),this.savingPersonalInfo=!1},()=>{this.savingPersonalInfo=!1})}}updatePassword(e){if(!this.redirectPowerUserImpersonator()){for(let t in e.controls)e.controls[t].markAsDirty();e.markAllAsTouched(),e.updateValueAndValidity(),this.passwordChangeErrorsCount=0,e.valid?(this.savingNewPassword=!0,this._myProfileService.updatePassword(e).subscribe(e=>{e.error||(this._docLayoutService.toast.showToast({message:this.dictionary.changePassword.successChangePassword,type:"success"}),this.savingNewPassword=!1,this._reloadSessionAndGoToNextDialog())},()=>{this.savingNewPassword=!1,this.passwordChangeErrorsCount=Object.keys(e.controls).filter(t=>!e.controls[t].valid).length})):this.passwordChangeErrorsCount=Object.keys(e.controls).filter(t=>!e.controls[t].valid).length}}_getAdditionalFields(){this._myProfileService.getAdditionalFields().subscribe(e=>{this.additionalFields=e})}_getUserData(){this._myProfileService.getUserData(this._session.id).subscribe(e=>{this.userData=e.data})}_reloadSessionAndGoToNextDialog(){this._sessionService.loadUserSession(!0).subscribe(()=>{this.savingNewPassword=!1,this.showNextDialog()},()=>{this.logout()})}_setPersonalInfoGroup(){this.personalInfoGroup=new Ke.h({firstname:new Ke.e(this._session.firstname,this._requireName?Ke.x.required:null),lastname:new Ke.e(this._session.lastname,this._requireName?Ke.x.required:null),email:new Ke.e(this._session.email,[ud.a.validEmail(),this.isSuperAdmin||this._useEmalAsUsername?Ke.x.required:Ke.x.nullValidator])})}_isPersonalInfoValid(){let e=!0;this._userProfileErrorsCount=0,this._additionalFieldsErrorsCount=0,this.personalInfoErrorsCount=0,this._myProfileService.stripTagsFromPersonalInfoFields(this.personalInfoGroup),this._myProfileService.stripTagsFromAdditionalFields(this.additionalFields),this.personalInfoGroup.markAllAsTouched();for(const t in this.personalInfoGroup.controls)this.personalInfoGroup.controls[t].valid||(this.personalInfoGroup.controls[t].markAsDirty(),this._userProfileErrorsCount++,e=!1);for(const t in this.additionalFields)this.additionalFields[t].formControl.markAsTouched(),this.additionalFields[t].formControl.valid||this.additionalFields[t].formControl.disabled||(this.additionalFields[t].formControl.setErrors({required:!0}),this.additionalFields[t].formControl.markAsDirty(),this._additionalFieldsErrorsCount++,e=!1);return this.userAdditionalField.forEach(e=>{"freetext"===e.type&&e.checkInputChanges()}),this.personalInfoErrorsCount=this._userProfileErrorsCount+this._additionalFieldsErrorsCount,this.personalInfoErrorsTitle=Je.a.t("standard","{count_error} Errors - Saving changes not possible",{count_error:this.personalInfoErrorsCount}),e}redirectPowerUserImpersonator(){return!!this._session.is_impersonated_by_pu&&(this._router.navigate(["/impersonating-pu/unauthorized"],{state:{docLayoutMode:"limbo"}}),!0)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(s.h),c.dc(S.a),c.dc(M.a),c.dc(ak.a),c.dc(dT.a))},e.\u0275cmp=c.Xb({type:e,selectors:[["lrn-confirm-details"]],viewQuery:function(e,t){if(1&e&&(c.md(GP,1),c.md($P,1),c.md(hT.a,1)),2&e){let e;c.Qc(e=c.sc())&&(t.privacyPolicy=e.first),c.Qc(e=c.sc())&&(t.termsAndConditions=e.first),c.Qc(e=c.sc())&&(t.userAdditionalField=e)}},decls:6,vars:4,consts:[[1,"confirm-details-wrapper"],[1,"confirm-details-content"],["class","confirm-details-privacy-policy ui-shadow-md",4,"ngIf"],["class","confirm-details-terms-and-conditions ui-shadow-md",4,"ngIf"],["class","confirm-details-user-fields ui-shadow-md",4,"ngIf"],["class","confirm-details-password ui-shadow-md",4,"ngIf"],[1,"confirm-details-privacy-policy","ui-shadow-md"],[3,"insideConfirmDetails","showPrivacyPolicyName","showPrivacyPolicySubtitle","showPrivacyPolicyHeaderMessage","showPrivacyPolicyContent","showPrivacyPolicyCheckboxes","update","showInlineError"],["privacyPolicy",""],[1,"policies-acceptance-footer-buttons","privacy"],[3,"label","ariaLabel","loading","trigger"],[3,"label","ariaLabel","color","loading","trigger"],[1,"confirm-details-terms-and-conditions","ui-shadow-md"],[3,"insideConfirmDetails","showTermsAndConditionsName","showTermsAndConditionsSubtitle","showTermsAndConditionsContent","showTermsAndConditionsCheckboxes","update","showInlineError"],["termsAndConditions",""],[1,"policies-acceptance-footer-buttons","terms-and-condition"],[1,"confirm-details-user-fields","ui-shadow-md"],[1,"ui-row"],[1,"ui-col-24"],[1,"confirm-details-panel-header"],["role","heading","aria-level","1",1,"ui-typography-heading-3"],[1,"ui-typography-subtitle","ui-color-typography-secondary"],[3,"title","message",4,"ngIf"],["aria-labelledby","confirm-details-title"],["role","heading","aria-level","3","id","confirm-details-title",1,"confirm-details-user-fields-title","ui-typography-heading-4"],[1,"ui-col-24","ui-col-sm-12"],["ngDefaultControl","",3,"formControl","requiredMarker","label"],[4,"ngIf"],["aria-labelledby","confirm-additional-fields-title",4,"ngIf"],["color","neutral",3,"loading","label","trigger"],["color","accent",3,"label","loading","trigger"],[3,"title","message"],["aria-labelledby","confirm-additional-fields-title"],["role","heading","aria-level","3","id","confirm-additional-fields-title",1,"confirm-details-user-fields-title","ui-typography-heading-4"],[4,"ngFor","ngForOf"],["ngDefaultControl","",3,"id","label","type","control","options","iframeHeight","iframeUrl","userData"],["class","clearfix",4,"ngIf"],[1,"clearfix"],[1,"confirm-details-password","ui-shadow-md"],["changePasswordForm",""]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"div",1),c.dd(2,HP,10,23,"div",2),c.dd(3,YP,10,22,"div",3),c.dd(4,iM,42,44,"div",4),c.dd(5,aM,23,15,"div",5),c.ic(),c.ic()),2&e&&(c.Mb(2),c.Dc("ngIf","privacy-policy"===t.dialogs[t.currentDialogIndex]),c.Mb(1),c.Dc("ngIf","terms-and-conditions"===t.dialogs[t.currentDialogIndex]),c.Mb(1),c.Dc("ngIf","user-fields"===t.dialogs[t.currentDialogIndex]),c.Mb(1),c.Dc("ngIf","password"===t.dialogs[t.currentDialogIndex]))},directives:[Ae.p,Gk.a,b.G,b.gc,Ke.b,Ke.o,Ke.f,b.Oc,b.Pc,b.Ec,b.Rb,Ae.o,hT.a,zT],pipes:[E.b],styles:["lrn-confirm-details,lrn-confirm-details .confirm-details-wrapper{height:100%;display:flex;flex:1;flex-direction:column}lrn-confirm-details .confirm-details-wrapper{background-color:var(--ui-color-layout-background);justify-content:center}lrn-confirm-details .confirm-details-content{display:flex;flex-shrink:0;justify-content:center;position:relative}lrn-confirm-details .confirm-details-password,lrn-confirm-details .confirm-details-privacy-policy,lrn-confirm-details .confirm-details-terms-and-conditions,lrn-confirm-details .confirm-details-user-fields{margin:0 auto;width:100%;max-width:var(--ui-size-modal-lg);background-color:var(--ui-color-layout-surface)}lrn-confirm-details .confirm-details-password,lrn-confirm-details .confirm-details-privacy-policy,lrn-confirm-details .confirm-details-terms-and-conditions{margin:0 auto}lrn-confirm-details .confirm-details-user-fields{margin:var(--ui-spacing-md) auto}lrn-confirm-details .confirm-details-user-fields .confirm-details-panel-header{padding-bottom:0}lrn-confirm-details .confirm-details-user-fields ui-notification-inline{margin-top:var(--ui-spacing-md)}lrn-confirm-details .confirm-details-password{max-width:var(--ui-size-modal-sm)}lrn-confirm-details .confirm-details-panel-header{padding:var(--ui-spacing-md) 0}lrn-confirm-details .confirm-details-password ui-panel-footer,lrn-confirm-details .confirm-details-user-fields ui-panel-footer{margin-top:var(--ui-spacing-md)}lrn-confirm-details .confirm-details-password ui-notification-inline,lrn-confirm-details .confirm-details-user-fields ui-notification-inline{margin-bottom:var(--ui-spacing-sm);display:block}lrn-confirm-details .confirm-details-user-fields-title{padding:var(--ui-spacing-md) 0}lrn-confirm-details doc-layout-policies-acceptance ui-spinner{margin:unset}"],encapsulation:2}),e})();var rM=i("rQlO"),cM=i("bOdf");const lM=[{path:"cookie-policy",component:aD},{path:"cookie-policy-public",children:[{path:"",component:sD}]},{path:"cookie-policy-private",children:[{path:"",component:sD}]},{path:"",canActivateChild:[ce.a],children:[{path:"",component:pe.a,pathMatch:"full",data:{view:"none"}},{path:"external-simple",component:me.a},{path:"external-ecommerce",component:he.a,data:{external:!0}},{path:"signin",component:pe.a,data:{view:"signin"}},{path:"register",component:pe.a,canActivate:[ue.a],data:{view:"register"}},{path:"forgot-password",component:pe.a,data:{view:"forgot-password"}},{path:"registration-submitted",component:pe.a,data:{view:"registration-submitted"}},{path:"forgot-password-submitted",component:pe.a,data:{view:"forgot-password-submitted"}},{path:"reset-password-submitted",component:be.a},{path:"policy",component:ve.a},{path:"terms-conditions",component:_e.a},{path:"public",children:[{path:""},{path:"learning_plan",canActivateChild:[$t,n.a],canDeactivate:[n.a],loadChildren:()=>Promise.resolve().then(i.bind(null,"A0KR")).then(e=>e.LearningPlanModule)},{path:"catalog",children:[{path:"",component:Xx.a,resolve:{catalog:Zx},data:{gstab:4}},{path:"view/:catalogId",component:Xx.a,resolve:{catalog:Zx},data:{external:!0}}]},{path:"course",pathMatch:"prefix",redirectTo:"/learn/course"},{path:"subscriptions",children:[{path:"index",component:Se.a,data:{gstab:4}},{path:"payment-billing/:plan_id",canActivate:[de.a,l],component:Ce.a}]}]}]},{path:"course",canActivateChild:[$t,n.a],canDeactivate:[n.a],loadChildren:()=>i.e(46).then(i.bind(null,"wKsZ")).then(e=>e.CatalogCourseWrapperModule)},{path:"courses",canLoad:[Vt],loadChildren:()=>i.e(47).then(i.bind(null,"CQo/")).then(e=>e.LrnCoursesModule)},{path:"learning-plans",canLoad:[Vt],loadChildren:()=>i.e(50).then(i.bind(null,"puOJ")).then(e=>e.LrnLearningPlansModule)},{path:"openidconnect/logout",canActivate:[oe]},{path:"auth0/login",canActivateChild:[le.a],children:[{component:Yt,path:"",pathMatch:"full"}]},{path:"auth0/callback",canActivateChild:[le.a],children:[{component:Qt,path:"",pathMatch:"full"}]},{path:"sso/logout",canActivateChild:[ce.a],component:Vx},{path:"user/confirm-registration/:token",component:ge.a,canActivate:[ue.a]},{path:"user/reset-password/:token",canActivateChild:[ce.a],component:fe.a},{path:"user/secure-logout",component:$x},{path:"",canActivateChild:[de.a],children:[{path:"",component:RC},{path:"home",component:RC},{path:"my-profile",component:zx,canDeactivate:[ke.a]},{path:"policy/view",component:ve.a},{path:"terms-conditions/view",component:_e.a},{path:"confirm-details",component:oM},{path:"mycourses",children:[{path:"",component:Kx,pathMatch:"full"}]},{path:"my-calendar",component:ZC},{path:"course/:id/instructor-overview",loadChildren:()=>i.e(49).then(i.bind(null,"zjC3")).then(e=>e.InstructorOverviewModule)},{path:"course/:id/play",component:Fw,canActivate:[$t],data:{mode:"player",playlistItem:{type:we.a.COURSE}}},{path:"course/:id/:slug",component:Fw,canActivate:[$t],data:{mode:"overview",playlistItem:{type:we.a.COURSE}}},{path:"course/:id/:slug/:type",component:Fw,canActivate:[$t],data:{mode:"player"}},{path:"course/:id/play/:id_lo/:slug",component:Fw,canActivate:[$t,se],data:{mode:"player",playlistItem:{type:we.a.COURSE}}},{path:"course/:id/session/:id_session/:slug",component:Fw,canActivate:[(()=>{class e{constructor(e,t,i,s){this.router=e,this.toggleService=t,this.backendService=i,this.store=s}canActivate(e){if(this.toggleService.isOn(u.f.TOGGLE_VILT)&&this.toggleService.isOn(u.f.TOGGLE_WEBINARS_MIGRATION)){const t=e.params.id_session,i=this.backendService.request(`/course/v1/courses/webinarmigration/mapping/${e.params.id}`,"GET",{session_id:t}).pipe(Object(ee.a)(1),Object(ri.a)(e=>e.data.items));this.store.pipe(Object(v.p)(ie.d),Object(ee.a)(1),Object(cM.a)(e=>void 0===e.id?i:Object(xi.a)([]))).subscribe(e=>0===e.length?Object(xi.a)(!0):this.router.navigateByUrl(this.router.url.replace(t,String(e[0].new_session_id))))}return Object(xi.a)(!0)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(s.h),c.nc(u.g),c.nc(S.a),c.nc(v.d))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),$t],canDeactivate:[BP],data:{playlistItem:{type:we.a.COURSE}}},{path:"course/:id",component:Fw,canActivate:[$t],data:{mode:"overview",playlistItem:{type:we.a.COURSE}}},{path:"multidomain/selector",component:GC},{path:"lp/:id",component:z_,canActivate:[$t]},{path:"lp/:id/:slug",component:z_,canActivate:[$t]},{path:"catalog",children:[{path:"",component:Xx.a,resolve:{catalog:Zx},data:{gstab:4}},{path:"licensed",children:[{path:"",component:Te.a,resolve:{catalog:Zx},data:{gstab:4}},{path:"view/:catalogId",component:Te.a,resolve:{catalog:Zx},data:{licensed:!0,external:!1}}]},{path:"view/:catalogId",component:Xx.a,resolve:{catalog:Zx},data:{external:!1}}]},{path:"learning_plan",canActivate:[Z],canActivateChild:[$t],loadChildren:()=>Promise.resolve().then(i.bind(null,"A0KR")).then(e=>e.LearningPlanModule)},{path:"subscriptions",children:[{path:"index",component:Se.a,data:{gstab:4}},{path:"payment-billing/:plan_id",canActivate:[de.a,l],component:Ce.a}]},{path:"global-search/:search",component:FC,data:{mode:"single"}},{path:"dashboard",loadChildren:()=>i.e(52).then(i.bind(null,"l7fg")).then(e=>e.ChannelsModule)},{path:"admin",loadChildren:()=>i.e(44).then(i.bind(null,"VEIG")).then(e=>e.AdminModule),canLoad:[re.a]},{path:"zoomus/manage",data:{showFooter:!1},component:KD,canActivate:[uD]},{path:"zoomus",component:dD,canActivate:[uD]},{path:"webex/manage",component:AO,canActivate:[XD],data:{showFooter:!1}},{path:"adobeconnect",children:[{path:"manage",canActivate:[D],component:fE,data:{showFooter:!1}},{path:"edit/:account_id",canActivate:[I],canDeactivate:[A],component:zt,data:{showFooter:!1}}]},{path:"gotomeeting/manage",data:{showFooter:!1},component:XE,canActivate:[z]},{path:"gotomeeting",component:CE,canActivate:[z]},{path:"msteams/manage",data:{showFooter:!1},component:VP,canActivate:[JE]},{path:"msteams",component:sP,canActivate:[JE]},{path:"instructor",loadChildren:()=>i.e(48).then(i.bind(null,"IaS7")).then(e=>e.IltInstructorModule)},{path:"lens",loadChildren:()=>i.e(51).then(i.bind(null,"9KRv")).then(e=>e.LensModule)},{path:"bluejeans",canActivate:[rM.a],loadChildren:()=>i.e(45).then(i.bind(null,"jpO/")).then(e=>e.BlueJeansModule),data:{app:"BluejeansV2App",showFooter:!1}}]}];let dM=(()=>{class e{constructor(e){this.actions=e}}return e.\u0275fac=function(t){return new(t||e)(c.nc(f.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();const uM={accounts:[],lastCreatedAccount:null,lastRequestedPairedAccount:null,lastEditedAccount:null,status:"MsTeamsInitialState",pairing:null,lastDeletedAccountPartial:null,windowHasFocus:!1};function hM(e=uM,t){switch(t.type){case nP.AccountSuccessfullyCreated:return Object.assign(Object.assign({},e),{status:"AccountCreated",lastCreatedAccount:t.payload,pairing:null});case nP.AccountSuccessfullyPaired:return Object.assign(Object.assign({},e),{status:"AccountSuccessfullyPaired",lastRequestedPairedAccount:t.payload,pairing:null});case nP.AccountSuccessfullyEdited:return Object.assign(Object.assign({},e),{status:"AccountEdited",lastEditedAccount:t.payload,pairing:null});case nP.AccountSuccessfullyDeleted:return Object.assign(Object.assign({},e),{status:"AccountDeleted",lastDeletedAccountPartial:t.payload,pairing:null});case nP.PairingAccountRequested:return Object.assign(Object.assign({},e),{status:"PairingAccountRequested",lastRequestedPairedAccount:t.payload,lastEditedAccount:null,pairing:null});case nP.PairingAccountAcquired:return Object.assign(Object.assign({},e),{status:"PairingAccountAcquired",lastRequestedPairedAccount:null,pairing:Object.assign({},t.payload)});case nP.PairingAccountCompleted:return Object.assign(Object.assign({},uM),{status:"PairingAccountCompleted"});case nP.PairingAccountAborted:return Object.assign(Object.assign({},uM),{status:"PairingAccountAborted"});default:return e}}var pM=i("QKG3"),mM=i("mrSG");const gM=[401,403,404,500];let bM=(()=>{class e{constructor(e,t,i,n,a,o,r,c,l,d){this.update=e,this.store$=t,this.overviewActions=i,this.learningPlanActions=n,this.surveyPlayerActions=a,this.quizPlayerActions=o,this.svc=r,this.lpService=c,this.router=l,this.docLayoutService=d,this.pageNavigation$=new Pe.a(!0),this.loadCourseInfo$=this.update.pipe(Object(f.f)(ga.a.LOAD_COURSE_INFO),Object(yi.a)(e=>this.svc.getCourseInfo(e).pipe(Object(ri.a)(e=>ga.a.loadCourseInfoSuccess(e)),Object(Vi.a)(t=>{if(-1!==gM.indexOf(t.status))return Object(xi.a)({type:"",payload:{}});Object(xi.a)(ga.a.loadCourseInfoRejected(e.payload))})))),this.loadCourseChapters$=this.update.pipe(Object(f.f)(ga.b.LOAD_COURSE_CHAPTERS),Object(yi.a)(e=>this.svc.getCourseInfo(e).pipe(Object(ri.a)(e=>ga.b.loadCourseChaptersSuccess(e)),Object(Vi.a)(t=>{if(-1!==gM.indexOf(t.status))return Object(xi.a)({type:"",payload:{}});Object(xi.a)(ga.a.loadCourseInfoRejected(e.payload))})))),this.reloadCoursePlayer$=this.update.pipe(Object(f.f)(ga.a.RELOAD_COURSE_PLAYER),Object(yi.a)(e=>this.svc.getCourseInfo(e).pipe(Object(ri.a)(t=>ga.a.loadCourseInfoSuccess(t,!0,e.payload.source)))),Object(Vi.a)(e=>-1!==gM.indexOf(e.status)?Object(xi.a)({type:"",payload:{}}):Object(xi.a)(ga.b.loadCourseInfoRejected(e)))),this.rateCourse$=this.update.pipe(Object(f.f)(ga.a.RATE_COURSE),Object(yi.a)(e=>this.svc.rateCourse(e).pipe(Object(ri.a)(t=>ga.a.reloadRating(e.payload))))),this.reloadRating$=this.update.pipe(Object(f.f)(ga.a.RELOAD_RATING),Object(yi.a)(e=>this.svc.getCourseRating(e).pipe(Object(ri.a)(e=>ga.a.updateCourseRating(e))))),this.loadOverviewInfo$=this.update.pipe(Object(f.f)(ga.e.LOAD_OVERVIEW_INFO),Object(yi.a)(e=>this.svc.getOverviewInfo(e).pipe(Object(ri.a)(t=>Object.assign(Object.assign({},e.payload),t)))),Object(ri.a)(e=>this.overviewActions.loadOvervewInfoSuccess(e)),Object(Vi.a)(e=>-1!==gM.indexOf(e.status)?Object(xi.a)({type:"",payload:{}}):Object(xi.a)(this.overviewActions.loadOverviewInfoRejected(e)))),this.requestSessionChange$=this.update.pipe(Object(f.f)(ga.e.REQUEST_CHANGE),Object(ri.a)(e=>this.overviewActions.changeSession(e))),this.enrollUserToSession$=this.update.pipe(Object(f.f)(ga.e.ENROLL_USER_TO_SESSION),Object(yi.a)(e=>this.svc.enrollUser(e).pipe(Object(Vi.a)(e=>{if(-1!==gM.indexOf(e.status))return Object(xi.a)({type:"",payload:{}});let t=e.code&&1003===e.code?E.a.t("classroom","Limit of max enrollable users reached"):e.message[0];return this.docLayoutService.toast.showToast({message:t,type:"error"}),qS.a}))),Object(ri.a)(e=>this.overviewActions.enrollUserToSessionSuccess(e.payload.courseId,e.payload.sessionId))),this.changeEnrollmentSessionError$=this.update.pipe(Object(f.f)(ga.e.CHANGE_SESSION_ENROLLMENT_ERROR),Object(ri.a)(e=>e.payload),Object(yi.a)(e=>{const t=e,i=t.hasOwnProperty("code")&&2002===t.code?E.a.t("standard","Your are not allowed to change session"):t.message[0];return this.docLayoutService.toast.showToast({message:i,type:"error"}),qS.a})),this.changeEnrollmentSession$=this.update.pipe(Object(f.f)(ga.e.CHANGE_SESSION_ENROLLMENT),Object(yi.a)(e=>this.svc.changeEnrollmentSession(e.payload).pipe(Object(yi.a)(t=>{const i=k.b.getInstance().getPlatformActualUrl();return window.location.href=`${i}/learn/course/${e.payload.course_id}/session/${e.payload.new_session.id}/redirect`,qS.a}),Object(Vi.a)(e=>Object(xi.a)(this.overviewActions.changeEnrollmentSessionError(e.error?e.error:e)))))),this.startInitialPlaying$=this.update.pipe(Object(f.f)(ga.b.START_PLAYING),Object(ri.a)(e=>e.payload),Object(yi.a)(e=>{const t=e.id,i=e.params,s=e.chapters,n=e.course_id,a=s.filter(e=>e.id===t)[0];let o=!1;return e.hasOwnProperty("preserve_lightbox")&&(o=e.preserve_lightbox),this.svc.getLoInfo(t,i,e=>Object(xi.a)(e)).pipe(Object(ri.a)(e=>{if(e instanceof od.d)return 1005===e.error.code?void this.store$.dispatch(ga.b.startPlayingRejectForMissingUserField(e.error)):"otj"===a.type&&403===e.error.code?void this.store$.dispatch(ga.b.showOtjErrorState()):void this.store$.dispatch(ga.b.startPlayingRejected(e.error));const i=e.data.launch_params;if(a.type===vr.SCORM){const e=k.b.getInstance().getLangByShortCode(k.c.getInstance().language).is_rtl;i.url=`${i.url}&rtl=${e}`}"otj"===a.type&&i&&i.lo_completion_type===tu.UPON_CONCLUSION&&a.status===su.NOT_STARTED&&this.store$.dispatch(ga.b.trackAndReloadCoursePlayer({chapter_id:a.id,course_id:n})),this.store$.dispatch(ga.b.startPlayingSuccess(t,{id:t,launch_params:i,chapters:s,preserve_lightbox:o}))}))})),this.trackAndReload$=this.update.pipe(Object(f.f)(ga.b.TRACK_AND_RELOAD),Object(ri.a)(e=>e.payload),Object(yi.a)(e=>this.svc.trackLo(e.chapter_id).pipe(Object(ri.a)(()=>ga.a.reloadCoursePlayer(e.course_id,e.chapter_id))))),this.track$=this.update.pipe(Object(f.f)(ga.g.BEGIN_SURVEY,ga.g.GOTO_PAGE,ga.g.SURVEY_SUBMITTED),Object(ri.a)(e=>e.payload),Object(yi.a)(e=>this.svc.trackSurveyData(e).pipe(Object(ri.a)(e=>this.surveyPlayerActions.trackCompleted(e))))),this.gotoPage$=this.update.pipe(Object(f.f)(ga.f.START_PLAYING,ga.f.RETAKE_THE_TEST,ga.f.CONTINUE_PLAYING,ga.f.GO_TO_PREV_PAGE,ga.f.GO_TO_NEXT_PAGE),Object(ri.a)(e=>e.payload),Object(yi.a)(e=>this.svc.trackQuizData(e).pipe(Object(ri.a)(t=>this.quizPlayerActions.goToPageSuccess(nt.a.assign({},t,e))),Object(Vi.a)(e=>Object(xi.a)(this.quizPlayerActions.quizActionRejected(e)))))),this.submitQuizPartial$=this.update.pipe(Object(f.f)(ga.f.SUBMIT_QUIZ_PARTIAL),Object(ri.a)(e=>e.payload),Object(yi.a)(e=>this.svc.trackQuizData(e).pipe(Object(ri.a)(e=>this.quizPlayerActions.submitQuizPartialSuccess(e)),Object(Vi.a)(e=>Object(xi.a)(this.quizPlayerActions.quizActionRejected(e)))))),this.leaveQuiz$=this.update.pipe(Object(f.f)(ga.f.LEAVE_PLAY_MODE),Object(Ci.a)(e=>{this.svc.getCourseInfo({payload:{id:e.payload.courseId}}).subscribe(t=>{this.store$.dispatch(ga.b.setCoursePlayerChapterLoading(!1)),this.store$.dispatch(ga.a.loadCourseInfoSuccess(t,!0,e.payload.source))},e=>{this.store$.dispatch(ga.b.setCoursePlayerChapterLoading(!1)),this.store$.dispatch(ga.b.loadCourseInfoRejected(e))})})),this.timeEnabledForceExit$=this.update.pipe(Object(f.f)(ga.f.TIME_ENABLED_FORCE_EXIT),Object(ri.a)(e=>e.payload),Object(yi.a)(e=>this.svc.trackQuizData(e).pipe(Object(ri.a)(e=>this.quizPlayerActions.setInitialState()),Object(Vi.a)(e=>Object(xi.a)(this.quizPlayerActions.quizActionRejected(e)))))),this.submitQuiz$=this.update.pipe(Object(f.f)(ga.f.SUBMIT_QUIZ,ga.f.TIME_ELAPSED_SUBMIT),Object(ri.a)(e=>e.payload),Object(yi.a)(e=>this.svc.trackQuizData(e).pipe(Object(ri.a)(e=>this.quizPlayerActions.submitQuizSuccess(e)),Object(Vi.a)(e=>Object(xi.a)(this.quizPlayerActions.quizActionRejected(e)))))),this.quizShowReview$=this.update.pipe(Object(f.f)(ga.f.SHOW_REVIEW),Object(ri.a)(e=>e.payload),Object(yi.a)(e=>this.svc.trackQuizData(e).pipe(Object(ri.a)(e=>this.quizPlayerActions.showReviewSuccess(e)),Object(Vi.a)(e=>Object(xi.a)(this.quizPlayerActions.quizActionRejected(e)))))),this.loadLearningPlanInfo$=this.update.pipe(Object(f.f)(ga.c.LOAD_LEARNING_PLAN_INFO),Object(yi.a)(e=>this.lpService.getLearningPlanInfo(e).pipe(Object(ri.a)(e=>this.learningPlanActions.loadLearningPlanInfoSuccess(e)),Object(Vi.a)(e=>Object(xi.a)(this.learningPlanActions.loadLearningPlanInfoRejected(e)))))),this.onLightboxWindowClose=this.update.pipe(Object(f.f)(ga.b.ON_LIGHTBOX_WINDOW_CLOSE),Object(Ci.a)(()=>this.pageNavigation$.next(!0)),Object(md.a)(()=>this.pageNavigation$.value),Object(wi.a)(this.store$.pipe(Object(v.p)(ie.o))),Object(yi.a)(([e,t])=>{const i=e.payload;return i.executionCount>5?Object(xi.a)(ga.b.loadCourseChapters(i.courseId)):this.svc.getLosTree(i.courseId).pipe(Object($i.a)(500),Object(md.a)(()=>this.pageNavigation$.value),Object(ri.a)(e=>{const s=Object(zc.c)(e.data);t===s?this.store$.dispatch(ga.b.onLightboxWindowClose(i.courseId,i.chapterId,i.redirectUrl,i.executionCount+1)):(this.store$.dispatch(ga.b.setScormChaptersHash(s)),this.store$.dispatch(ga.b.loadCourseChapters(i.courseId)),this.store$.dispatch(ga.a.reloadCoursePlayer(i.courseId,i.chapterId)))}),Object(Vi.a)(e=>(this.router.navigate(i.redirectUrl).then(),this.docLayoutService.toast.showToast({message:e.message.join(" "),type:"error"}),qS.a)))})),this.router.events.subscribe(e=>{e instanceof s.e&&this.pageNavigation$.next(!1)})}}return e.\u0275fac=function(t){return new(t||e)(c.nc(f.a),c.nc(v.d),c.nc(ga.e),c.nc(ga.c),c.nc(ga.g),c.nc(ga.f),c.nc(Bc),c.nc(Gc),c.nc(s.h),c.nc(M.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),Object(mM.b)([Object(f.b)()],e.prototype,"loadCourseInfo$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"loadCourseChapters$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"reloadCoursePlayer$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"rateCourse$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"reloadRating$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"loadOverviewInfo$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"requestSessionChange$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"enrollUserToSession$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"changeEnrollmentSessionError$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"changeEnrollmentSession$",void 0),Object(mM.b)([Object(f.b)({dispatch:!1})],e.prototype,"startInitialPlaying$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"trackAndReload$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"track$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"gotoPage$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"submitQuizPartial$",void 0),Object(mM.b)([Object(f.b)({dispatch:!1})],e.prototype,"leaveQuiz$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"timeEnabledForceExit$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"submitQuiz$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"quizShowReview$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"loadLearningPlanInfo$",void 0),Object(mM.b)([Object(f.b)({dispatch:!1})],e.prototype,"onLightboxWindowClose",void 0),e})();var fM=i("z6cu");let vM=(()=>{class e{constructor(e,t,i){this._update$=e,this._myCalendarActions=t,this._myCalendarService=i,this.LoadEvents$=this._update$.pipe(Object(f.f)(ga.d.INIT,ga.d.UPDATE),Object(yi.a)(e=>this._myCalendarService.getEventsData(e).pipe(Object(ri.a)(t=>{const i=window.location.origin+"/"+t.extra_data.download_url,s=this._myCalendarService.formatEvents(t.data.items),n=this._myCalendarService.filterEvents(s,e.payload.filters),a=this._myCalendarService.getAppliedFilters(e.payload.filters);return this._myCalendarActions.loadEventsSucces(n,e.payload,i,a)}),Object(Vi.a)(e=>Object(xi.a)(this._myCalendarActions.loadEventsReject(e)))))),this.requestMonthHasEvents$=this._update$.pipe(Object(f.f)(ga.d.LOAD_EVENTS_SUCCESS),Object(ri.a)(e=>this._myCalendarActions.initEventsInYear(e.payload))),this.LoadMonthHasEvents$=this._update$.pipe(Object(f.f)(ga.d.LOAD_EVENTS_IN_YEAR),Object(yi.a)(e=>this._myCalendarService.getMonthHasEventsData(e).pipe(Object(ri.a)(t=>{const i=this._myCalendarService.filterMonthHasEvents(t.data.items,e.payload.updateParams.filters);return this._myCalendarActions.loadEventsInYearSucces(i)}),Object(Vi.a)(e=>Object(fM.a)(this._myCalendarActions.loadEventsInYearReject(e))))))}}return e.\u0275fac=function(t){return new(t||e)(c.nc(f.a),c.nc(ga.d),c.nc(Qc))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),Object(mM.b)([Object(f.b)()],e.prototype,"LoadEvents$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"requestMonthHasEvents$",void 0),Object(mM.b)([Object(f.b)()],e.prototype,"LoadMonthHasEvents$",void 0),e})(),_M=(()=>{class e{constructor(e){this.actions=e}}return e.\u0275fac=function(t){return new(t||e)(c.nc(f.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();const wM={accounts:[],lastCreatedAccount:null,lastEditedAccount:null,status:"WebexInitialState",paring:null,lastDeletedAccountPartial:null,windowHasFocus:!1};function yM(e=wM,t){switch(t.type){case JD.AccountSuccessfullyCreated:return Object.assign(Object.assign({},e),{status:"AccountCreated",lastCreatedAccount:t.payload});case JD.AccountSuccessfullyEdited:return Object.assign(Object.assign({},e),{status:"AccountEdited",lastEditedAccount:t.payload});case JD.AccountSuccessfullyDeleted:return Object.assign(Object.assign({},e),{status:"AccountDeleted",lastDeletedAccountPartial:t.payload});case JD.AccountSuccessfullyReset:return Object.assign(Object.assign({},e),{lastCreatedAccount:null,lastEditedAccount:null,lastDeletedAccountPartial:null,paring:null,status:"WebexInitialState"});default:return e}}var CM=i("bUIS"),SM=i("8lF4"),TM=i("g+Nt"),kM=i.t(TM,2);let IM=(()=>{let e=class extends CM.a{};return e.\u0275fac=function(t){return xM(t||e)},e.\u0275cmp=c.Xb({type:e,selectors:[["ng-component"]],features:[c.Jb],decls:3,vars:3,consts:[[1,"widget-sample-color-root"]],template:function(e,t){1&e&&(c.jc(0,"div",0),c.jc(1,"p"),c.fd(2),c.ic(),c.ic()),2&e&&(c.cd("background-color",t.data.settings.color),c.Mb(2),c.hd(" ",t.data.settings.color," "))},styles:[".widget-sample-color-root[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:300px;color:#fff}"]}),e=Object(mM.b)([Object(SM.a)({name:"learn-sample-widget",module:"learn",demoData:kM})],e),e})();const xM=c.lc(IM),DM=[IM];let OM=(()=>{class e{constructor(e,t){this.store=e,this.widgetRenderActions=t}init(){return new Promise((e,t)=>{this.store.dispatch(this.widgetRenderActions.registerWidgets(DM,"learn")),e()})}setActiveModuleInCoreStore(){this.store.dispatch(this.widgetRenderActions.setActiveModule("learn"))}}return e.\u0275fac=function(t){return new(t||e)(c.nc(v.d),c.nc(Wx.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();const EM=[],PM=[...EM],MM={};let AM=(()=>{class e{constructor(e){this.actions=e}}return e.\u0275fac=function(t){return new(t||e)(c.nc(f.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})();const LM={accounts:[],lastCreatedAccount:null,lastRequestedPairedAccount:null,lastEditedAccount:null,status:"ZoomusInitialState",pairing:null,lastDeletedAccountPartial:null,windowHasFocus:!1};function jM(e=LM,t){switch(t.type){case hD.AccountSuccessfullyCreated:return Object.assign(Object.assign({},e),{status:"AccountCreated",lastCreatedAccount:t.payload,pairing:null});case hD.AccountSuccessfullyPaired:return Object.assign(Object.assign({},e),{status:"AccountSuccessfullyPaired",lastRequestedPairedAccount:t.payload,pairing:null});case hD.AccountSuccessfullyEdited:return Object.assign(Object.assign({},e),{status:"AccountEdited",lastEditedAccount:t.payload,pairing:null});case hD.AccountSuccessfullyDeleted:return Object.assign(Object.assign({},e),{status:"AccountDeleted",lastDeletedAccountPartial:t.payload,pairing:null});case hD.PairingAccountRequested:return Object.assign(Object.assign({},e),{status:"PairingAccountRequested",lastRequestedPairedAccount:t.payload,lastEditedAccount:null,pairing:null});case hD.PairingAccountAcquired:return Object.assign(Object.assign({},e),{status:"PairingAccountAcquired",lastRequestedPairedAccount:null,pairing:Object.assign({},t.payload)});case hD.PairingAccountCompleted:return Object.assign(Object.assign({},LM),{status:"PairingAccountCompleted"});case hD.PairingAccountAborted:return Object.assign(Object.assign({},LM),{status:"PairingAccountAborted"});default:return e}}i("0vgW"),i("+s/G"),i("jx+i");var FM=i("mJ9n"),RM=i("IfWP");let NM=(()=>{class e{constructor(t){this.initLearnWidgetsService=t,e.widgetsRegistered||(this.initLearnWidgetsService.init(),e.widgetsRegistered=!0),this.initLearnWidgetsService.setActiveModuleInCoreStore()}}return e.storeInitialized=!1,e.widgetsRegistered=!1,e.\u0275fac=function(t){return new(t||e)(c.nc(OM))},e.\u0275mod=c.bc({type:e}),e.\u0275inj=c.ac({providers:[Z,se,oe,n.a,Bc,Gc,u.a,ga.b,ga.g,ga.f,ga.a,ga.e,ga.c,bM,vM,ga.d,Qc,OM,Zx,wD,uD,sO,XD,T,D,I,A,l,q,z,mP,JE,BP,...PM,Bk,h.a],imports:[[d.a,b.xc,pM.CourseModule,C,p.a.forChildren(),s.l.forChild(lM),v.f.forFeature("learn",ie.j),v.f.forFeature("learn-widgets",MM),v.f.forFeature("learn-zoomus",jM),v.f.forFeature("learn-webex",yM),v.f.forFeature("learn-adobeconnect",U),v.f.forFeature("learn-gotomeeting",J),v.f.forFeature("learn-msteams",hM),f.d.forFeature([bM,vM,...EM,AM,_M,L,dM]),g.a,m.a]]}),e})();c.Yc(ye.a,[P_.a],[E.b]),c.Yc(zt,[Ae.p,FM.a,RM.a,Mt,Qe],[E.b])},aZ40:function(e,t,i){var s,n,a=i("Wogr");a.alloc?(s=a.alloc(512),n=a.alloc(256)):(s=new a(512),n=new a(256)),function(){for(var e=1,t=0;t<255;t++)s[t]=e,n[e]=t,256&(e<<=1)&&(e^=285);for(t=255;t<512;t++)s[t]=s[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return n[e]},t.exp=function(e){return s[e]},t.mul=function(e,t){return 0===e||0===t?0:s[n[e]+n[t]]}},bDTG:function(e,t,i){"use strict";i.d(t,"c",function(){return o}),i.d(t,"b",function(){return r}),i.d(t,"d",function(){return c}),i.d(t,"e",function(){return l}),i.d(t,"a",function(){return d});var s=i("LvDl"),n=i.n(s),a=i("galx");function o(e){const t=e?Math.floor(e/60):0,i=e?e%60:0;return{hh:t,mm:i,label:t+"h "+i+"m"}}function r(e,t){return Math.floor(60*e+Number(t))}function c(e){n.a.delay(()=>{e.actions.forEach(e=>{e.disabled=!1,e.loading=!1})},250)}function l(e){return e.status&&e.status===a.b.QUEUED?{success:!0,backgroundJob:!0}:e.status&&e.status===a.b.COMPLETED?{success:!0}:{success:!1}}const d="lt_evaluation"},"e/Dd":function(e,t){var i,s=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return s[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');i=e},t.isKanjiModeEnabled=function(){return void 0!==i},t.toSJIS=function(e){return i(e)}},e6BP:function(e,t){function i(){this.buffer=[],this.length=0}i.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var i=0;i<t;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=i},eQOe:function(e,t){function i(e,i,s){switch(e){case t.Patterns.PATTERN000:return(i+s)%2==0;case t.Patterns.PATTERN001:return i%2==0;case t.Patterns.PATTERN010:return s%3==0;case t.Patterns.PATTERN011:return(i+s)%3==0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2==0;case t.Patterns.PATTERN101:return i*s%2+i*s%3==0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2==0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,i=0,s=0,n=0,a=null,o=null,r=0;r<t;r++){s=n=0,a=o=null;for(var c=0;c<t;c++){var l=e.get(r,c);l===a?s++:(s>=5&&(i+=s-5+3),a=l,s=1),(l=e.get(c,r))===o?n++:(n>=5&&(i+=n-5+3),o=l,n=1)}s>=5&&(i+=s-5+3),n>=5&&(i+=n-5+3)}return i},t.getPenaltyN2=function(e){for(var t=e.size,i=0,s=0;s<t-1;s++)for(var n=0;n<t-1;n++){var a=e.get(s,n)+e.get(s,n+1)+e.get(s+1,n)+e.get(s+1,n+1);4!==a&&0!==a||i++}return 3*i},t.getPenaltyN3=function(e){for(var t=e.size,i=0,s=0,n=0,a=0;a<t;a++){s=n=0;for(var o=0;o<t;o++)s=s<<1&2047|e.get(a,o),o>=10&&(1488===s||93===s)&&i++,n=n<<1&2047|e.get(o,a),o>=10&&(1488===n||93===n)&&i++}return 40*i},t.getPenaltyN4=function(e){for(var t=0,i=e.data.length,s=0;s<i;s++)t+=e.data[s];return 10*Math.abs(Math.ceil(100*t/i/5)-10)},t.applyMask=function(e,t){for(var s=t.size,n=0;n<s;n++)for(var a=0;a<s;a++)t.isReserved(a,n)||t.xor(a,n,i(e,a,n))},t.getBestMask=function(e,i){for(var s=Object.keys(t.Patterns).length,n=0,a=1/0,o=0;o<s;o++){i(o),t.applyMask(o,e);var r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),r<a&&(a=r,n=o)}return n}},ekOh:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(s){return i}}},"g+Nt":function(e){e.exports=JSON.parse('{"data":{"icon":null,"code":"AAAA","names":{"en":"Widget","fa":"Widget","fi":"Widget","it":"Widget"},"published":1,"descriptions":{"en":"A sample page with widgets","fa":"A sample page with widgets","fi":"A sample page with widgets","it":"A sample page with widgets"},"widgets":[{"id":"1111","widget":"row","type":"parent","name":{"en":"Row","fa":"Row","fi":"Row","it":"Row"},"settings":{"mode":"boxed"},"contains":[{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":12},"contains":[{"id":"0","type":"child","widget":"learn-sample-widget","settings":{"color":"red"}}]}]}]}}')},hQwR:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=function(e){return e[e.DELETE="delete"]="DELETE",e[e.CONFIRM="confirm"]="CONFIRM",e}({})},jSPq:function(e,t,i){var s=i("Wogr"),n=i("JzKC");function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=new s(this.degree);t.fill(0);var i=s.concat([e,t],e.length+this.degree),a=n.mod(i,this.genPoly),o=this.degree-a.length;if(o>0){var r=new s(this.degree);return r.fill(0),a.copy(r,o),r}return a},e.exports=a},"kk9/":function(e,t,i){var s=i("e/Dd").getSymbolSize;t.getPositions=function(e){var t=s(e);return[[0,0],[t-7,0],[0,t-7]]}},kyyD:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{static loadCourseInfo(t){return{type:e.LOAD_COURSE_INFO,payload:t}}static reloadCoursePlayer(t,i){return{type:e.RELOAD_COURSE_PLAYER,payload:{id:t,source:i}}}static reloadRating(t){return{type:e.RELOAD_RATING,payload:t}}static updateCourseRating(t){return{type:e.UPDATE_COURSE_RATING,payload:t}}static loadCourseInfoSuccess(t,i=!1,s=!1){return{type:e.LOAD_COURSE_INFO_SUCCESS,payload:{courseData:t,inReloading:i,source:s}}}static loadCourseInfoRejected(t){return{type:e.LOAD_COURSE_INFO_REJECTED,payload:t}}static switchMode(t,i){const s={state:t};return void 0!==i&&(s.has_overview=i),{type:e.SWITCH_MODE,payload:s}}static reloadChapters(t){return{type:e.RELOAD_CHAPTERS,payload:{chapters:t}}}static rateCourse(t,i){return{type:e.RATE_COURSE,payload:{id_course:t,rating:i}}}static destroy(){return{type:e.DESTROY,payload:{}}}}return e.LOAD_COURSE_INFO="[Course] Load Course Info",e.RELOAD_COURSE_PLAYER="[Course] Reload Course Player",e.RELOAD_RATING="[Course] Reload Rating",e.RELOAD_CHAPTERS="[Course] Reload Chapters",e.RELOAD_CHAPTERS_COMPLETE="[Course] Reload Chapters Complete",e.UPDATE_COURSE_RATING="[Course] Reload Course Rating",e.LOAD_COURSE_INFO_SUCCESS="[Course] Load Course Info Success",e.LOAD_COURSE_INFO_REJECTED="[Course] Load Course Info Rejected",e.SWITCH_MODE="[Course] Switch mode",e.RATE_COURSE="[Course] Rate Course",e.DESTROY="[Course] Destroy",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Zb({token:e,factory:e.\u0275fac}),e})()},lWmL:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var s=i("yfT8"),n=i("rLbr"),a=i("lJxs"),o=i("wO+i"),r=i("fXoL"),c=i("Y9qQ");let l=(()=>{class e{constructor(e){this._backend=e,this.questionsEndpoint=new s.a("/share/v1/questions/list",n.a.GET),this.repliesEndpoint=new s.a("/share/v1/comments/:id",n.a.GET),this.answersEndpoint=new s.a("/share/v1/questions/:id/answers",n.a.GET),this.channelsListEndpoint=new s.a("/manage/v1/channels",n.a.GET),this.cohortGroupsEndpoint=new s.a("/share/v1/cohort/groups",n.a.GET),this.answersLikeEndpoint=new s.a("/share/v1/answers/:id/evaluate",n.a.PUT),this.answersDislikeEndpoint=new s.a("/share/v1/answers/:id/evaluate",n.a.DELETE),this.commentLikeEndpoint=new s.a("/share/v1/comments/:id/evaluate",n.a.PUT),this.commentDislikeEndpoint=new s.a("/share/v1/comments/:id/evaluate",n.a.DELETE),this.commentReplyEndpoint=new s.a("/share/v1/comments/:id/reply",n.a.POST),this.questionAnswerEndpoint=new s.a("/share/v1/questions/:id/answer",n.a.POST),this.questionFollowEndpoint=new s.a("/share/v1/questions/:id/follow",n.a.POST),this.questionUnFollowEndpoint=new s.a("/share/v1/questions/:id/follow",n.a.DELETE),this.editCommentEndpoint=new s.a("/share/v1/comments/:id",n.a.PUT),this.deleteCommentEndpoint=new s.a("/share/v1/comments/:id",n.a.DELETE),this.editQuestionEndpoint=new s.a("/share/v1/questions/:id",n.a.PUT),this.deleteQuestionEndpoint=new s.a("/share/v1/questions/:id",n.a.DELETE),this.editAnswerEndpoint=new s.a("/share/v1/answers/:id",n.a.PUT),this.deleteAnswerEndpoint=new s.a("/share/v1/answers/:id",n.a.DELETE)}questionsList(e){return this._backend.request(this.questionsEndpoint.url,this.questionsEndpoint.verb,e)}getReplies(e){return this._backend.request(this.repliesEndpoint.setPlaceholdersValue({id:e}),this.repliesEndpoint.verb).pipe(Object(a.a)(e=>({data:{items:e.data.sub_items,count:e.data.sub_items.length,current_page:1,current_page_size:e.data.sub_items.length,has_more_data:!1,total_count:e.data.sub_items.length,total_page_count:1,cursor:""}})))}getAnswers(e,t,i=15){const s={page_size:i,page_number:t};return this._backend.request(this.answersEndpoint.setPlaceholdersValue({id:e}),this.answersEndpoint.verb,s)}getChannelsList(e){return this._backend.request(this.channelsListEndpoint.url,this.channelsListEndpoint.verb,e).pipe(Object(o.a)("data","items"))}getCohortList(e){return this._backend.request(this.cohortGroupsEndpoint.url,this.cohortGroupsEndpoint.verb,e).pipe(Object(o.a)("data","items"))}answerLike(e){return this._backend.request(this.answersLikeEndpoint.setPlaceholdersValue({id:e}),this.answersLikeEndpoint.verb).pipe(Object(o.a)("data"))}answerDislike(e){return this._backend.request(this.answersDislikeEndpoint.setPlaceholdersValue({id:e}),this.answersDislikeEndpoint.verb).pipe(Object(o.a)("data"))}commentLike(e){return this._backend.request(this.commentLikeEndpoint.setPlaceholdersValue({id:e}),this.commentLikeEndpoint.verb).pipe(Object(o.a)("data"))}commentDislike(e){return this._backend.request(this.commentDislikeEndpoint.setPlaceholdersValue({id:e}),this.commentDislikeEndpoint.verb).pipe(Object(o.a)("data"))}commentReply(e,t,i){const s=Object.assign(Object.assign({content:t.message},t.payload.length&&{mentions:t.payload}),i&&{idAnswerParent:i});return this._backend.request(this.commentReplyEndpoint.setPlaceholdersValue({id:e}),this.commentReplyEndpoint.verb,s).pipe(Object(o.a)("data"))}questionAnswer(e,t,i){const s=Object.assign(Object.assign({content:t.message},t.payload.length&&{mentions:t.payload}),i&&{idAnswerParent:i});return this._backend.request(this.questionAnswerEndpoint.setPlaceholdersValue({id:e}),this.questionAnswerEndpoint.verb,s).pipe(Object(o.a)("data"))}questionFollow(e){return this._backend.request(this.questionFollowEndpoint.setPlaceholdersValue({id:e}),this.questionFollowEndpoint.verb).pipe(Object(o.a)("data"))}questionUnfollow(e){return this._backend.request(this.questionUnFollowEndpoint.setPlaceholdersValue({id:e}),this.questionUnFollowEndpoint.verb).pipe(Object(o.a)("data"))}editComment(e,t){return this._backend.request(this.editCommentEndpoint.setPlaceholdersValue({id:e}),this.editCommentEndpoint.verb,Object.assign({title:t.message},t.payload.length&&{mentions:t.payload})).pipe(Object(o.a)("data"))}deleteComment(e){return this._backend.request(this.deleteCommentEndpoint.setPlaceholdersValue({id:e}),this.deleteCommentEndpoint.verb).pipe(Object(o.a)("data"))}editQuestion(e,t){return this._backend.request(this.editQuestionEndpoint.setPlaceholdersValue({id:e}),this.editQuestionEndpoint.verb,Object.assign({title:t.message},t.payload.length&&{mentions:t.payload})).pipe(Object(o.a)("data"))}deleteQuestion(e){return this._backend.request(this.deleteQuestionEndpoint.setPlaceholdersValue({id:e}),this.deleteQuestionEndpoint.verb).pipe(Object(o.a)("data"))}editAnswer(e,t){return this._backend.request(this.editAnswerEndpoint.setPlaceholdersValue({id:e}),this.editAnswerEndpoint.verb,Object.assign({content:t.message},t.payload.length&&{mentions:t.payload})).pipe(Object(o.a)("data"),Object(a.a)(e=>({id:e.updated_id})))}deleteAnswer(e){return this._backend.request(this.deleteAnswerEndpoint.setPlaceholdersValue({id:e}),this.deleteAnswerEndpoint.verb).pipe(Object(o.a)("data"))}answerMarkAsBest(e){return this._backend.request(`/share/v1/answers/${e}/mark`,"PUT").pipe(Object(o.a)("data"))}answerUnmarkAsBest(e){return this._backend.request(`/share/v1/answers/${e}/mark`,"DELETE").pipe(Object(o.a)("data"))}}return e.\u0275fac=function(t){return new(t||e)(r.nc(c.a))},e.\u0275prov=r.Zb({token:e,factory:e.\u0275fac}),e})()},lYJp:function(e,t,i){var s=i("e/Dd"),n=s.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var i=e.bit<<3|t,a=i<<10;s.getBCHDigit(a)-n>=0;)a^=1335<<s.getBCHDigit(a)-n;return 21522^(i<<10|a)}},m06o:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var s=i("LRne"),n=i("rLbr"),a=i("wO+i"),o=i("lJxs"),r=i("JIr8"),c=i("fXoL"),l=i("Y9qQ");let d=(()=>{class e{constructor(e){this._backendService=e}getSkillById(e){return this._backendService.request(`/skill/v1/skills/${e}`,n.a.GET).pipe(Object(a.a)("data"),Object(o.a)(e=>({id:e.id,code:e.predefined_UID,name:e.title,active:"1"===e.active})))}deleteSkills(e){return this._backendService.request("/skill/v1/skills",n.a.DELETE,{items:e.map(e=>({id:e.id}))}).pipe(Object(r.a)(()=>Object(s.a)({data:void 0})),Object(o.a)(e=>{var t;return Boolean(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.length)&&e.data.every(e=>e.success)}))}}return e.\u0275fac=function(t){return new(t||e)(c.nc(l.a))},e.\u0275prov=c.Zb({token:e,factory:e.\u0275fac}),e})()},mEp4:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{loadLearningPlanInfo(t){return{type:e.LOAD_LEARNING_PLAN_INFO,payload:t}}loadLearningPlanInfoSuccess(t){return{type:e.LOAD_LEARNING_PLAN_INFO_SUCCESS,payload:t}}loadLearningPlanInfoRejected(t){return{type:e.LOAD_LEARNING_PLAN_INFO_REJECTED,payload:t}}cleanLearningPlanStoreData(){return{type:e.CLEAN_STORE_DATA_LEARNING_PLAN,payload:{}}}}return e.LOAD_LEARNING_PLAN_INFO="[Learning Plan] Load Learning Plan Info",e.LOAD_LEARNING_PLAN_INFO_SUCCESS="[Learning Plan] Load Learning Plan Info Success",e.LOAD_LEARNING_PLAN_INFO_REJECTED="[Learning Plan] Load Learning Plan Info Rejected",e.CLEAN_STORE_DATA_LEARNING_PLAN="[Learning Plan] Clean Store Data Learning Plan",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Zb({token:e,factory:e.\u0275fac}),e})()},miDY:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var s=i("rLbr"),n=i("wO+i"),a=i("fXoL"),o=i("Y9qQ");let r=(()=>{class e{constructor(e){this._backendService=e}getUserCoursesTime(e,t=[],i,a){const o=Object.assign(Object.assign(Object.assign({},t.length&&{skill_codes:t}),(null==i?void 0:i.length)&&{date_begin:i}),(null==a?void 0:a.length)&&{date_end:a});return this._backendService.request(`/learn/v1/channels/users/${e}/content/courses/time`,s.a.GET,o).pipe(Object(n.a)("data","items"))}}return e.\u0275fac=function(t){return new(t||e)(a.nc(o.a))},e.\u0275prov=a.Zb({token:e,factory:e.\u0275fac}),e})()},nZSm:function(e,t,i){var s=i("u/Db"),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=s.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var i=45*n.indexOf(this.data[t]);i+=n.indexOf(this.data[t+1]),e.put(i,11)}this.data.length%2&&e.put(n.indexOf(this.data[t]),6)},e.exports=a},pMVF:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{loadLaunchParams(t){return{type:e.LOAD_LAUNCH_PARAMS,payload:t}}beginSurvey(t){return{type:e.BEGIN_SURVEY,payload:t}}leaveSurvey(){return{type:e.LEAVE_SURVEY}}goToPage(t){return{type:e.GOTO_PAGE,payload:t}}trackCompleted(t){return{type:e.SURVEY_TRACK_COMPLETED,payload:t}}surveyCompleted(t){return{type:e.SURVEY_SUBMITTED,payload:t}}}return e.LOAD_LAUNCH_PARAMS="[SurveyPlayer] Load Launch params",e.BEGIN_SURVEY="[SurveyPlayer] Begin Survey",e.LEAVE_SURVEY="[SurveyPlayer] Leave survey",e.GOTO_PAGE="[SurveyPlayer] Go to page",e.SURVEY_TRACK_COMPLETED="[SurveyPlayer] Survey track completed",e.SURVEY_SUBMITTED="[SurveyPlayer] Survey completed",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Zb({token:e,factory:e.\u0275fac}),e})()},"q6/4":function(e,t,i){"use strict";i.d(t,"a",function(){return u});var s=i("LRne"),n=i("5+tZ"),a=i("JIr8"),o=i("vkgz"),r=i("lfsz"),c=i("/76g"),l=i("fXoL"),d=i("+sIT");let u=(()=>{class e{constructor(e){this.docService=e}canDeactivate(e,t,i){return!e||!e.hasChanges()||!r.c.getInstance().isValid()||this.docService.dialog.showCommonDialog({title:c.a.t("standard","You're leaving without saving changes"),content:c.a.t("standard","Do you want to save changes before leaving the page? Otherwise, all unsaved changes will be lost."),actions:[{id:"cancel",type:"neutral",label:c.a.t("standard","Cancel"),slot:"start"},{id:"discard",type:"neutral",label:c.a.t("standard","Discard changes"),slot:"end"},{id:"save",type:"positive",label:c.a.t("standard","Save Changes"),slot:"end"}]}).pipe(Object(n.a)(t=>{switch(t.actionID){default:case"cancel":return t.actionSuccess.next(!0),Object(s.a)(!1);case"discard":return t.actionSuccess.next(!0),Object(s.a)(!0);case"save":return e.save().pipe(Object(a.a)(()=>(this.docService.toast.showToast({type:"error",message:c.a.t("standard","Error while saving your changes")}),Object(s.a)(!0))),Object(o.a)(()=>t.actionSuccess.next(!0)))}}))}}return e.\u0275fac=function(t){return new(t||e)(l.nc(d.a))},e.\u0275prov=l.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qmMu:function(e,t,i){var s=i("Wogr"),n=i("e/Dd"),a=i("ekOh"),o=i("e6BP"),r=i("V35J"),c=i("1sBl"),l=i("kk9/"),d=i("eQOe"),u=i("NPxG"),h=i("jSPq"),p=i("yKow"),m=i("lYJp"),g=i("u/Db"),b=i("vvrf"),f=i("49sm");function v(e,t,i){var s,n,a=e.size,o=m.getEncodedBits(t,i);for(s=0;s<15;s++)e.set(s<6?s:s<8?s+1:a-15+s,8,n=1==(o>>s&1),!0),e.set(8,s<8?a-s-1:s<9?15-s-1+1:15-s-1,n,!0);e.set(a-8,8,1,!0)}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var i,m,_=a.M;return void 0!==t&&(_=a.from(t.errorCorrectionLevel,a.M),i=p.from(t.version),m=d.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),function(e,t,i,a){var m;if(f(e))m=b.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");var _=t;if(!_){var w=b.rawSplit(e);_=p.getBestVersionForData(w,i)}m=b.fromString(e,_||40)}var y=p.getBestVersionForData(m,i);if(!y)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<y)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+y+".\n")}else t=y;var C=function(e,t,i){var a=new o;i.forEach(function(t){a.put(t.mode.bit,4),a.put(t.getLength(),g.getCharCountIndicator(t.mode,e)),t.write(a)});var r=8*(n.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(a.getLengthInBits()+4<=r&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);for(var c=(r-a.getLengthInBits())/8,l=0;l<c;l++)a.put(l%2?17:236,8);return function(e,t,i){for(var a=n.getSymbolTotalCodewords(t),o=a-u.getTotalCodewordsCount(t,i),r=u.getBlocksCount(t,i),c=r-a%r,l=Math.floor(a/r),d=Math.floor(o/r),p=d+1,m=l-d,g=new h(m),b=0,f=new Array(r),v=new Array(r),_=0,w=new s(e.buffer),y=0;y<r;y++){var C=y<c?d:p;f[y]=w.slice(b,b+C),v[y]=g.encode(f[y]),b+=C,_=Math.max(_,C)}var S,T,k=new s(a),I=0;for(S=0;S<_;S++)for(T=0;T<r;T++)S<f[T].length&&(k[I++]=f[T][S]);for(S=0;S<m;S++)for(T=0;T<r;T++)k[I++]=v[T][S];return k}(a,e,t)}(t,i,m),S=n.getSymbolSize(t),T=new r(S);return function(e,t){for(var i=e.size,s=l.getPositions(t),n=0;n<s.length;n++)for(var a=s[n][0],o=s[n][1],r=-1;r<=7;r++)if(!(a+r<=-1||i<=a+r))for(var c=-1;c<=7;c++)o+c<=-1||i<=o+c||e.set(a+r,o+c,r>=0&&r<=6&&(0===c||6===c)||c>=0&&c<=6&&(0===r||6===r)||r>=2&&r<=4&&c>=2&&c<=4,!0)}(T,t),function(e){for(var t=e.size,i=8;i<t-8;i++){var s=i%2==0;e.set(i,6,s,!0),e.set(6,i,s,!0)}}(T),function(e,t){for(var i=c.getPositions(t),s=0;s<i.length;s++)for(var n=i[s][0],a=i[s][1],o=-2;o<=2;o++)for(var r=-2;r<=2;r++)e.set(n+o,a+r,-2===o||2===o||-2===r||2===r||0===o&&0===r,!0)}(T,t),v(T,i,0),t>=7&&function(e,t){for(var i,s,n,a=e.size,o=p.getEncodedBits(t),r=0;r<18;r++)i=Math.floor(r/3),e.set(i,s=r%3+a-8-3,n=1==(o>>r&1),!0),e.set(s,i,n,!0)}(T,t),function(e,t){for(var i=e.size,s=-1,n=i-1,a=7,o=0,r=i-1;r>0;r-=2)for(6===r&&r--;;){for(var c=0;c<2;c++)if(!e.isReserved(n,r-c)){var l=!1;o<t.length&&(l=1==(t[o]>>>a&1)),e.set(n,r-c,l),-1==--a&&(o++,a=7)}if((n+=s)<0||i<=n){n-=s,s=-s;break}}}(T,C),isNaN(a)&&(a=d.getBestMask(T,v.bind(null,T,i))),d.applyMask(a,T),v(T,i,a),{modules:T,version:t,errorCorrectionLevel:i,maskPattern:a,segments:m}}(e,i,_,m)}},qqVP:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return n}),i.d(t,"c",function(){return a});var s=function(e){return e.ASSET="coach_share",e.COURSE="learning_object",e.CHANNEL="channel",e}({}),n=function(e){return e[e.QUESTION=1]="QUESTION",e[e.COMMENT=2]="COMMENT",e}({}),a=function(e){return e[e.LIKE=1]="LIKE",e[e.DISLIKE=2]="DISLIKE",e}({})},r4LH:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var s=i("ofXK"),n=i("tfGn"),a=i("fXoL");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.bc({type:e}),e.\u0275inj=a.ac({imports:[[s.c,n.a]]}),e})()},rL2y:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var s=i("ofXK"),n=i("9j9i"),a=i("nUpK"),o=i("tfGn"),r=i("6fYS"),c=i("miDY"),l=i("m06o"),d=i("r4LH"),u=i("Znps"),h=i("fXoL");let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.bc({type:e}),e.\u0275inj=h.ac({providers:[n.a,c.a,l.a],imports:[[s.c,o.a,a.Fb,a.Gc,r.o,a.gd,a.jd,a.f,a.H,a.sc,a.y,d.a,u.a]]}),e})()},sVTu:function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"a",function(){return n});var s=function(e){return e[e.CHOICE="choice"]="CHOICE",e[e.CHOICE_MULTIPLE="choice_multiple"]="CHOICE_MULTIPLE",e[e.EXTENDED_TEXT="extended_text"]="EXTENDED_TEXT",e[e.LIKERT_SCALE="likert_scale"]="LIKERT_SCALE",e[e.TITLE="title"]="TITLE",e[e.EVALUATION="evaluation"]="EVALUATION",e[e.INLINE_CHOICE="inline_choice"]="INLINE_CHOICE",e[e.FITB="fill_in_the_blank"]="FITB",e[e.ASSOCIATE="associate"]="ASSOCIATE",e[e.TEXT_ENTRY="text_entry"]="TEXT_ENTRY",e[e.UPLOAD="upload"]="UPLOAD",e}({}),n=function(e){return e[e.ANSWER="answer"]="ANSWER",e[e.REVIEW="review"]="REVIEW",e[e.READONLY="readonly"]="READONLY",e}({})},sknK:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var s=i("XNiG"),n=i("Kj3r"),a=i("eIep"),o=i("lJxs"),r=i("vkgz"),c=i("5wvl"),l=i("S2Qf"),d=i("fXoL"),u=i("Y9qQ"),h=i("EdLK");let p=(()=>{class e{constructor(e,t,i){this.backendService=e,this._platformCatalogService=t,this._toggleService=i,this.searchSources$=new s.a,this.isCustomSkillsOn=this._toggleService.isOn(l.f.TOGGLE_CUSTOM_SKILLS),this.searchSuggestions$=this.searchSources$.pipe(Object(n.a)(500),Object(a.a)(e=>this.search(e)))}init(){return this._setPlatformCatalogSearchMode()}search(e){return this.backendService.request(this.isCustomSkillsOn?"/skill/v1/workforce/skills":"/manage/v1/workforce/skills","GET",Object.assign(Object.assign(Object.assign({},this.isCustomSkillsOn?{search_text:e.query}:{search:e.query}),{size:10,skip_skillgroup:!0}),Boolean(this.platformCatalogSearchMode)&&{catalog_visibility:this.platformCatalogSearchMode})).pipe(Object(o.a)(t=>(t.data.items=t.data.items.map(t=>({name:t.name,id:e.mappedToId?t.code:t.name})),t.data.items)))}_setPlatformCatalogSearchMode(){return this._platformCatalogService.hasSkills().pipe(Object(r.a)(e=>this.platformCatalogSearchMode=e?c.a.PLATFORM:c.a.ALL),Object(o.a)(e=>{}))}}return e.\u0275fac=function(t){return new(t||e)(d.nc(u.a),d.nc(h.a),d.nc(l.g))},e.\u0275prov=d.Zb({token:e,factory:e.\u0275fac}),e})()},"u/Db":function(e,t,i){var s=i("J6Nv"),n=i("BCVQ");t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!s.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return n.testNumeric(e)?t.NUMERIC:n.testAlphanumeric(e)?t.ALPHANUMERIC:n.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(s){return i}}},vvrf:function(e,t,i){var s=i("u/Db"),n=i("3X7Y"),a=i("nZSm"),o=i("AZa5"),r=i("Lzq4"),c=i("BCVQ"),l=i("e/Dd"),d=i("ELBg");function u(e){return unescape(encodeURIComponent(e)).length}function h(e,t,i){for(var s,n=[];null!==(s=e.exec(i));)n.push({data:s[0],index:s.index,mode:t,length:s[0].length});return n}function p(e){var t,i,n=h(c.NUMERIC,s.NUMERIC,e),a=h(c.ALPHANUMERIC,s.ALPHANUMERIC,e);return l.isKanjiModeEnabled()?(t=h(c.BYTE,s.BYTE,e),i=h(c.KANJI,s.KANJI,e)):(t=h(c.BYTE_KANJI,s.BYTE,e),i=[]),n.concat(a,t,i).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function m(e,t){switch(t){case s.NUMERIC:return n.getBitsLength(e);case s.ALPHANUMERIC:return a.getBitsLength(e);case s.KANJI:return r.getBitsLength(e);case s.BYTE:return o.getBitsLength(e)}}function g(e,t){var i,c=s.getBestModeForData(e);if((i=s.from(t,c))!==s.BYTE&&i.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+s.toString(i)+".\n Suggested mode is: "+s.toString(c));switch(i!==s.KANJI||l.isKanjiModeEnabled()||(i=s.BYTE),i){case s.NUMERIC:return new n(e);case s.ALPHANUMERIC:return new a(e);case s.KANJI:return new r(e);case s.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e},[])},t.fromString=function(e,i){for(var n=function(e,t){for(var i={},n={start:{}},a=["start"],o=0;o<e.length;o++){for(var r=e[o],c=[],l=0;l<r.length;l++){var d=r[l],u=""+o+l;c.push(u),i[u]={node:d,lastCount:0},n[u]={};for(var h=0;h<a.length;h++){var p=a[h];i[p]&&i[p].node.mode===d.mode?(n[p][u]=m(i[p].lastCount+d.length,d.mode)-m(i[p].lastCount,d.mode),i[p].lastCount+=d.length):(i[p]&&(i[p].lastCount=d.length),n[p][u]=m(d.length,d.mode)+4+s.getCharCountIndicator(d.mode,t))}}a=c}for(h=0;h<a.length;h++)n[a[h]].end=0;return{map:n,table:i}}(function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];switch(n.mode){case s.NUMERIC:t.push([n,{data:n.data,mode:s.ALPHANUMERIC,length:n.length},{data:n.data,mode:s.BYTE,length:n.length}]);break;case s.ALPHANUMERIC:t.push([n,{data:n.data,mode:s.BYTE,length:n.length}]);break;case s.KANJI:t.push([n,{data:n.data,mode:s.BYTE,length:u(n.data)}]);break;case s.BYTE:t.push([{data:n.data,mode:s.BYTE,length:u(n.data)}])}}return t}(p(e,l.isKanjiModeEnabled())),i),a=d.find_path(n.map,"start","end"),o=[],r=1;r<a.length-1;r++)o.push(n.table[a[r]].node);return t.fromArray(o.reduce(function(e,t){var i=e.length-1>=0?e[e.length-1]:null;return i&&i.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[]))},t.rawSplit=function(e){return t.fromArray(p(e,l.isKanjiModeEnabled()))}},wqqH:function(e,t,i){"use strict";i.d(t,"d",function(){return s}),i.d(t,"a",function(){return n}),i.d(t,"e",function(){return a}),i.d(t,"b",function(){return o}),i.d(t,"f",function(){return r}),i.d(t,"c",function(){return c}),i.d(t,"g",function(){return l});var s=function(e){return e[e.TO_BE_STARTED="to_be_started"]="TO_BE_STARTED",e[e.STARTED="started"]="STARTED",e[e.SUBMITTED="submitted"]="SUBMITTED",e[e.REVIEW="review"]="REVIEW",e[e.REQUEST_FOR_PLAY="request_for_play"]="REQUEST_FOR_PLAY",e}({}),n=function(e){return e[e.INLINE="inline"]="INLINE",e[e.STAND_ALONE="standalone"]="STAND_ALONE",e}({}),a=function(e){return e[e.NOT_SUBMITTED="not_submitted"]="NOT_SUBMITTED",e[e.SUBMITTED="submitted"]="SUBMITTED",e}({}),o=function(e){return e[e.WAITING_EVALUATION="waiting_evaluation"]="WAITING_EVALUATION",e[e.EVALUATED="evaluated"]="EVALUATED",e}({}),r=function(e){return e[e.NONE="none"]="NONE",e[e.PER_TEST="per_test"]="PER_TEST",e[e.PER_QUESTION="per_question"]="PER_QUESTION",e}({}),c=function(e){return e[e.ABSOLUTE="absolute"]="ABSOLUTE",e[e.PERCENTAGE="percentage"]="PERCENTAGE",e}({}),l=function(e){return e[e.START="start"]="START",e[e.CONTINUE="continue"]="CONTINUE",e[e.PREV="prev"]="PREV",e[e.NEXT="next"]="NEXT",e[e.SUBMIT_PARTIAL="submit_partial"]="SUBMIT_PARTIAL",e[e.TIME_ELAPSED_SUBMIT="time_elapsed_submit"]="TIME_ELAPSED_SUBMIT",e[e.TIME_ENABLED_FORCE_EXIT="time_enabled_force_exit"]="TIME_ENABLED_FORCE_EXIT",e[e.SUBMIT="submit"]="SUBMIT",e[e.REVIEW="review"]="REVIEW",e[e.NO_ACTION="no_action"]="NO_ACTION",e}({})},wsCI:function(e,t,i){"use strict";i.d(t,"a",function(){return V});var s=i("R0Ic"),n=i("fXoL"),a=i("3Pt+"),o=i("wI8q"),r=i("lfsz"),c=i("Y9qQ"),l=i("zMZL"),d=i("/76g");class u{constructor(){this.hintPeerReview=d.a.t("standard","Requires Expert\u2019s Peer Review"),this.hintIsExpert=d.a.t("standard","You're an expert for this channel"),this.searchPanelTitle={all:d.a.t("app7020","Search for Channels and/or People"),channels:d.a.t("standard","Search for Channels")},this.clearAll=d.a.t("app7020","Clear all"),this.multiSelectLabel={all:d.a.t("app7020","Channels and/or People"),channels:d.a.t("app7020","Channels")},this.multiSelectPlaceholder=d.a.t("standard","Type..."),this.suggested=d.a.t("standard","Suggested"),this.allChannels=d.a.t("standard","All channels"),this.userSingular=d.a.t("standard","_USER"),this.userPlural=d.a.t("getmoreuser","users"),this.peerReviewTitle=d.a.t("standard","Info"),this.peerReviewDescription=d.a.t("app7020","Some of the selected channels require an expert to review your content. Your content will be published in those channels only after the expert's approval, but it will be published immediately in all of the other channels not requiring expert's review.")}}var h=i("XNiG"),p=i("LRne"),m=i("cp0P"),g=i("/uUt"),b=i("IzEk"),f=i("wO+i"),v=i("JIr8"),_=i("Kj3r"),w=i("eIep"),y=i("ofXK"),C=i("f2BR"),S=i("nUpK"),T=i("gvJE");const k=["shareContentMultiSelect"];function I(e,t){if(1&e){const e=n.kc();n.jc(0,"span",14),n.jc(1,"a",15),n.rc("click",function(){return n.Uc(e),n.vc().clearAll()}),n.fd(2),n.wc(3,"t"),n.ic(),n.ic()}if(2&e){const e=n.vc();n.Mb(2),n.hd(" ",n.xc(3,1,e.dictionary.clearAll)," ")}}function x(e,t){if(1&e){const e=n.kc();n.jc(0,"div",16),n.ec(1,"ui-icon",17),n.jc(2,"div",18),n.ec(3,"h4",19),n.wc(4,"t"),n.ec(5,"p",20),n.wc(6,"t"),n.ic(),n.jc(7,"ui-button-text",21),n.rc("trigger",function(){return n.Uc(e),n.vc().hideNotification()}),n.ic(),n.ic()}if(2&e){const e=n.vc();n.Mb(1),n.Dc("name","comment")("size","sm")("color","dark"),n.Mb(2),n.Dc("innerHTML",n.xc(4,7,e.dictionary.peerReviewTitle),n.Vc),n.Mb(2),n.Dc("innerHTML",n.xc(6,9,e.dictionary.peerReviewDescription),n.Vc),n.Mb(2),n.Dc("color","dark")("label","got it")}}function D(e,t){if(1&e&&(n.jc(0,"h5",13),n.fd(1),n.wc(2,"t"),n.ic()),2&e){const e=n.vc();n.Mb(1),n.gd(n.xc(2,1,e.dictionary.suggested))}}function O(e,t){if(1&e&&(n.jc(0,"div",29),n.fd(1),n.wc(2,"t"),n.ic()),2&e){const e=n.vc(2);n.Mb(1),n.hd(" ",n.xc(2,1,e.dictionary.suggested)," ")}}function E(e,t){if(1&e){const e=n.kc();n.jc(0,"li",22),n.rc("click",function(){n.Uc(e);const i=t.$implicit;return n.vc().shareSelection(i)}),n.ec(1,"ui-avatar",23),n.jc(2,"div",24),n.jc(3,"div",25),n.fd(4),n.ic(),n.ic(),n.dd(5,O,3,3,"div",26),n.jc(6,"div",27),n.jc(7,"ui-input-checkbox",28),n.rc("click",function(e){return e.preventDefault()}),n.ic(),n.ic(),n.ic()}if(2&e){const e=t.$implicit,i=n.vc();n.Mb(1),n.Dc("size","lg")("imageUrl",e.avatar)("text",null==e?null:e.initials)("iconName",e.avatar||null!=e&&e.initials?"":"user"),n.Mb(3),n.hd(" ",e.name," "),n.Mb(1),n.Dc("ngIf",e.from_recommender),n.Mb(2),n.Dc("formControl",i.shareFormGroup.get(e.list_uuid))}}function P(e,t){1&e&&(n.jc(0,"div",30),n.ec(1,"ui-spinner",31),n.ic()),2&e&&(n.Mb(1),n.Dc("size","md")("color","neutral"))}function M(e,t){if(1&e&&(n.fd(0),n.wc(1,"lowercase"),n.wc(2,"t")),2&e){const e=n.vc(2);n.hd(" ",n.xc(1,1,n.xc(2,3,e.dictionary.userPlural))," ")}}function A(e,t){if(1&e&&(n.fd(0),n.wc(1,"lowercase"),n.wc(2,"t")),2&e){const e=n.vc(2);n.hd(" ",n.xc(1,1,n.xc(2,3,e.dictionary.userSingular))," ")}}function L(e,t){if(1&e&&(n.jc(0,"span"),n.fd(1),n.wc(2,"t"),n.ic()),2&e){const e=n.vc(2);n.Mb(1),n.hd(" | ",n.xc(2,1,e.dictionary.hintPeerReview)," ")}}function j(e,t){if(1&e&&(n.jc(0,"span"),n.fd(1),n.wc(2,"t"),n.ic()),2&e){const e=n.vc(2);n.Mb(1),n.hd(" | ",n.xc(2,1,e.dictionary.hintIsExpert)," ")}}const F=function(e,t){return{color:e,backgroundColor:t}},R=function(e){return[e]};function N(e,t){if(1&e){const e=n.kc();n.jc(0,"li",22),n.rc("click",function(){n.Uc(e);const i=t.$implicit;return n.vc().shareSelection(i)}),n.jc(1,"div",32),n.ec(2,"em",33),n.ic(),n.jc(3,"div",24),n.jc(4,"div",25),n.fd(5),n.ic(),n.jc(6,"div",34),n.jc(7,"span"),n.fd(8),n.dd(9,M,3,5,"ng-template",35),n.dd(10,A,3,5,"ng-template",35),n.ic(),n.dd(11,L,3,3,"span",36),n.dd(12,j,3,3,"span",36),n.ic(),n.ic(),n.jc(13,"div",27),n.jc(14,"ui-input-checkbox",28),n.rc("click",function(e){return e.preventDefault()}),n.ic(),n.ic(),n.ic()}if(2&e){const e=t.$implicit,i=n.vc();n.Mb(1),n.Dc("ngStyle",n.Jc(9,F,e.thumbnail.color||"#ffffff",e.thumbnail.background||"var(--ui-color-layout-overlay-dark)")),n.Mb(1),n.Dc("ngClass",n.Ic(12,R,e.thumbnail.icon)),n.Mb(3),n.hd(" ",e.name," "),n.Mb(3),n.hd(" ",e.users_count," "),n.Mb(1),n.Dc("ngIf",1!==e.users_count),n.Mb(1),n.Dc("ngIf",1===e.users_count),n.Mb(1),n.Dc("ngIf","everyone_with_pr"===e.upload_permission&&!(null!=e&&e.is_expert)),n.Mb(1),n.Dc("ngIf",!i.isCurrentUserSA&&(null==e?null:e.is_expert)&&"everyone"!==e.upload_permission),n.Mb(2),n.Dc("formControl",i.shareFormGroup.get(e.list_uuid))}}function U(e,t){1&e&&(n.jc(0,"div",30),n.ec(1,"ui-spinner",31),n.ic()),2&e&&(n.Mb(1),n.Dc("size","md")("color","neutral"))}const q=[[["","header",""]]],z=["[header]"];let V=(()=>{class e{constructor(e,t){this.backendReq=e,this.ref=t,this.sharingFormControl=new a.e([]),this.emitOnlyIds=!0,this.ignoreChannels=[],this.selectedUsers=new n.q,this.selectedChannels=new n.q,this.allSelections=new n.q,this.isLoadingChannels=!0,this.isLoadingUsers=!0,this.isSearchingForChannels=!1,this.searchedItems=[],this.suggestedUsers=[],this.dictionary=new u,this.shareFormGroup=new a.h({}),this.multiSelectValues=[],this.searchItems=new h.a,this.scrolledToBottom=new h.a,this.peerReviewChannelsInformation=[],this.channelsListItems=[],this.channelsHasMoreData=!0,this.channelsLoadPage=0,this.channelsVisibleItems=0,this.searchResponseCallback=e=>{const t=e.users.map(e=>Object.assign(Object.assign({},e),{id:`user_${e.id}`,name:r.b.getInstance().getFullName(e,!0)})),i=e.channels.map(e=>Object.assign(Object.assign({},e),{id:`channel_${e.id}`,name:e.name}));if(t.length+i.length>10){const e=5,s=t.length>e,n=i.length>e;s&&n&&(t.length=e,i.length=e),s||(i.length=e-t.length),n||(t.length=e-i.length)}this.searchedItems=[...t,...i],this.addPeerReviewChannels(e.channels),this.isSearchingForChannels=!1,this.ref.detectChanges()}}hostElementScrolling(e){e&&e.target&&this.scrolledToBottom.next(e.target.clientHeight+150>=e.target.scrollHeight-e.target.scrollTop)}get isCurrentUserSA(){return r.c.getInstance().isCurrentUserA(r.c.LEVEL_SUPERADMIN)}get visibleChannels(){const e=JSON.parse(JSON.stringify(this.channelsListItems));return e.length=this.channelsVisibleItems,e.filter(e=>Boolean(e))}get canShareToPeople(){return o.e.settings.share_to_people!==o.d.CANT_SHARE}get showInformationBar(){if(r.c.getInstance().isCurrentUserA(r.c.LEVEL_SUPERADMIN))return!1;if(l.a.getInstance().get("discover-channel-peer-review-information",!1))return!1;const e=this.sharingFormControl.value.filter(e=>e.indexOf("channel_")>-1).map(e=>Number(e.replace("channel_","")));if(!e.length)return!1;const t=this.peerReviewChannelsInformation.filter(t=>-1!==e.indexOf(t.id)).find(e=>"everyone_with_pr"===e.upload_permission&&!e.is_expert);return Boolean(t)}hideNotification(){l.a.getInstance().set("discover-channel-peer-review-information","confirmed")}ngOnInit(){this.multiSelectValues=this.sharingFormControl.value,this.preselected&&this.preselected.length&&(this.searchedItems=this.searchedItems.concat(this.preselected)),this.loadChannelList(),this.canShareToPeople&&this.loadSuggestedUsersList(),this.listenForSearch(),this.scrolledToBottom.pipe(Object(g.a)()).subscribe(e=>{e&&(this.isLoadingChannels=this.channelsHasMoreData,this.ref.detectChanges(),this.loadChannelList())})}listsTrackBy(e,t){return t.list_uuid}searchForChannels(e){this.sharingFormControl.setErrors(null),e.length<3||(this.searchItems.next(e),this.isSearchingForChannels=!0)}shareSelection(e){this.shareContentMultiSelect.select(Object.assign(Object.assign({},e),{id:e.list_uuid,name:e.name}),!0)}clearAll(){this.resetShareForm(),this.selectedUsers.emit([]),this.selectedChannels.emit([]),this.allSelections.emit([]),this.shareContentMultiSelect.removeAllItems()}shareContentSelections(){var e;const t=this.shareContentMultiSelect.selectedItems.map(e=>this.emitOnlyIds?e.id:e),i=e=>t=>this.emitOnlyIds?t.indexOf(e)>-1:t.id.indexOf(e)>-1,s=e=>t=>this.emitOnlyIds?Number(t.replace(e,"")):Object.assign(Object.assign({},t),{id:Number(t.id.replace(e,""))}),n=t.filter(i("user_")).map(s("user_")),a=t.filter(i("channel_")).map(s("channel_"));this.resetShareForm();for(let o of this.emitOnlyIds?t:t.map(e=>e.id))null===(e=this.shareFormGroup.get(o))||void 0===e||e.setValue(!0);this.allSelections.emit(this.shareContentMultiSelect.selectedItems),this.selectedChannels.emit(a),this.selectedUsers.emit(n),this.sharingFormControl.setErrors(null)}resetShareForm(){const e=Object.keys(this.shareFormGroup.getRawValue()),t={};for(const i of e)t[i]=!1;this.shareFormGroup.setValue(t,{emitEvent:!1})}isSuggestionSelected(e){return Boolean(this.sharingFormControl.value.find(t=>t===e))}loadSuggestedUsersList(){if(void 0===this.assetId)return this.isLoadingUsers=!1,void this.ref.detectChanges();this.backendReq.request(`/share/v1/assets/${this.assetId}/invitations/suggestions`,"GET",{},{},c.b,null,()=>{}).pipe(Object(b.a)(1),Object(f.a)("data"),Object(v.a)(()=>Object(p.a)({items:[]}))).subscribe(e=>{this.suggestedUsers=e.items.map(t=>(this.shareFormGroup.addControl(`user_${t.id}`,new a.e(this.isSuggestionSelected(`user_${t.id}`))),this.searchedItems.push({id:`user_${t.id}`,name:r.b.getInstance().getFullName(t,!0)}),Object.assign(Object.assign({},t),{list_uuid:`user_${t.id}`,initials:String(t.firstname.charAt(0)+t.lastname.charAt(0)).toUpperCase(),name:r.b.getInstance().getFullName(t,!0),from_recommender:e.is_from_recommender}))),this.isLoadingUsers=!1,this.ref.detectChanges()})}loadChannelList(){this.channelsHasMoreData?(this.channelsVisibleItems+=e.VISIBLE_CHANNELS_SIZE,this.channelsLoadPage++,this.backendReq.request("/manage/v1/channels","GET",{items_per_channel:1,page:this.channelsLoadPage,page_size:2*e.VISIBLE_CHANNELS_SIZE,canContributeInOnly:!0,count_user:!0,ignoreChannels:this.ignoreChannels}).pipe(Object(f.a)("data")).subscribe(e=>{e.items=e.items.map(e=>(this.shareFormGroup.addControl(`channel_${e.id}`,new a.e(this.isSuggestionSelected(`channel_${e.id}`))),this.searchedItems.push({id:`channel_${e.id}`,name:e.name}),Object.assign(Object.assign({},e),{list_uuid:`channel_${e.id}`}))),this.channelsHasMoreData=e.has_more_data,this.channelsListItems=[...this.channelsListItems,...e.items],this.addPeerReviewChannels(e.items),this.isLoadingChannels=!1,this.ref.detectChanges()})):this.channelsVisibleItems<this.channelsListItems.length&&(this.channelsVisibleItems=this.channelsListItems.length)}listenForSearch(){this.searchItems.pipe(Object(g.a)(),Object(_.a)(500),Object(w.a)(e=>Object(p.a)(e))).subscribe(e=>{const t=this.backendReq.request(`/share/v1/assets/${this.assetId}/invitations/users`,"GET",{search:e,page:1,page_size:20}).pipe(Object(f.a)("data","items")),i=this.backendReq.request("/manage/v1/channels","GET",{search:e,items_per_channel:1,page:1,page_size:20,canContributeInOnly:!0,count_user:!0,ignoreChannels:this.ignoreChannels}).pipe(Object(f.a)("data","items"));Object(m.a)({users:this.canShareToPeople?t:Object(p.a)([]),channels:i}).subscribe(this.searchResponseCallback)})}addPeerReviewChannels(e){const t=e.filter(e=>"everyone_with_pr"===e.upload_permission);if(!t.length)return;const i=t.map(e=>({id:Number(e.id),is_expert:e.is_expert,upload_permission:e.upload_permission})),s=this.peerReviewChannelsInformation.concat(i).map(e=>JSON.stringify(e)),n=new Set(s);this.peerReviewChannelsInformation=Array.from(n).map(e=>JSON.parse(e))}}return e.VISIBLE_CHANNELS_SIZE=10,e.\u0275fac=function(t){return new(t||e)(n.dc(c.a),n.dc(n.i))},e.\u0275cmp=n.Xb({type:e,selectors:[["asset-share-content"]],viewQuery:function(e,t){if(1&e&&n.md(k,1),2&e){let e;n.Qc(e=n.sc())&&(t.shareContentMultiSelect=e.first)}},hostBindings:function(e,t){1&e&&n.rc("scroll",function(e){return t.hostElementScrolling(e)})},inputs:{assetId:"assetId",sharingFormControl:"sharingFormControl",emitOnlyIds:"emitOnlyIds",preselected:"preselected",ignoreChannels:"ignoreChannels"},outputs:{selectedUsers:"selectedUsers",selectedChannels:"selectedChannels",allSelections:"allSelections"},ngContentSelectors:z,decls:22,vars:28,consts:[[1,"app7020-contribute-panel-body","new-layout","app7020-share-content"],[1,"section-box","hyd-background-surface"],[1,"share-content-search-header"],[1,"hyd-typography-heading-4"],[1,"search-field-wrap"],["class","clear-all-action",4,"ngIf"],[3,"label","placeholder","mode","showCounter","applySourceRegex","showRequiredFieldIndicator","max_selectable_items","inputFormControl","value","source","showLoader","onChange","onItemDeletion","onItemSelection"],["shareContentMultiSelect",""],["class","review-hint",4,"ngIf"],["class","section-list-title hyd-typography-heading-4",4,"ngIf"],[1,"hyd-background-surface","suggestion-list"],["class","suggestion",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["class","load-more-spinner hyd-background-surface",4,"ngIf"],[1,"section-list-title","hyd-typography-heading-4"],[1,"clear-all-action"],[1,"bolded","cta-btn",3,"click"],[1,"review-hint"],[1,"icon",3,"name","size","color"],[1,"text"],[1,"heading","hyd-typography-heading-5",3,"innerHTML"],[1,"hyd-typography-subtitle",3,"innerHTML"],[3,"color","label","trigger"],[1,"suggestion",3,"click"],[3,"size","imageUrl","text","iconName"],[1,"suggestion-info"],[1,"suggestion-name"],["class","suggested-token",4,"ngIf"],[1,"contribute-status"],[3,"formControl","click"],[1,"suggested-token"],[1,"load-more-spinner","hyd-background-surface"],[3,"size","color"],[1,"suggestion-icon",3,"ngStyle"],[3,"ngClass"],[1,"additional-info","hyd-typography-subtitle"],[3,"ngIf"],[4,"ngIf"]],template:function(e,t){1&e&&(n.Cc(q),n.jc(0,"div",0),n.Bc(1),n.jc(2,"div",1),n.jc(3,"div",2),n.jc(4,"h5",3),n.fd(5),n.wc(6,"t"),n.ic(),n.ic(),n.jc(7,"div",4),n.dd(8,I,4,3,"span",5),n.jc(9,"multi-select",6,7),n.rc("onChange",function(e){return t.searchForChannels(e)})("onItemDeletion",function(){return t.shareContentSelections()})("onItemSelection",function(){return t.shareContentSelections()}),n.ic(),n.ic(),n.ic(),n.dd(11,x,8,11,"div",8),n.dd(12,D,3,3,"h5",9),n.jc(13,"ul",10),n.dd(14,E,8,7,"li",11),n.ic(),n.dd(15,P,2,2,"div",12),n.jc(16,"h5",13),n.fd(17),n.wc(18,"t"),n.ic(),n.jc(19,"ul",10),n.dd(20,N,15,14,"li",11),n.ic(),n.dd(21,U,2,2,"div",12),n.ic()),2&e&&(n.Mb(5),n.hd(" ",n.xc(6,24,t.canShareToPeople?t.dictionary.searchPanelTitle.all:t.dictionary.searchPanelTitle.channels)," "),n.Mb(3),n.Dc("ngIf",null==t.sharingFormControl.value?null:t.sharingFormControl.value.length),n.Mb(1),n.Dc("label",t.canShareToPeople?t.dictionary.multiSelectLabel.all:t.dictionary.multiSelectLabel.channels)("placeholder",t.dictionary.multiSelectPlaceholder)("mode",0)("showCounter",!1)("applySourceRegex",!1)("showRequiredFieldIndicator",!0)("max_selectable_items",9999999999)("inputFormControl",t.sharingFormControl)("value",t.multiSelectValues)("source",t.searchedItems)("showLoader",t.isSearchingForChannels),n.Mb(2),n.Dc("ngIf",t.showInformationBar),n.Mb(1),n.Dc("ngIf",t.suggestedUsers.length),n.Mb(1),n.Dc("@listAnimation",t.suggestedUsers.length),n.Mb(1),n.Dc("ngForOf",t.suggestedUsers)("ngForTrackBy",t.listsTrackBy),n.Mb(1),n.Dc("ngIf",t.canShareToPeople&&t.isLoadingUsers),n.Mb(2),n.gd(n.xc(18,26,t.dictionary.allChannels)),n.Mb(2),n.Dc("@listAnimation",t.visibleChannels.length),n.Mb(1),n.Dc("ngForOf",t.visibleChannels)("ngForTrackBy",t.listsTrackBy),n.Mb(1),n.Dc("ngIf",t.isLoadingChannels))},directives:[y.p,C.a,y.o,S.Eb,S.G,S.e,S.Kb,a.o,a.f,S.fd,y.q,y.n],pipes:[T.b,y.m],styles:["asset-share-content{position:relative;display:block;height:100%;overflow:auto}.app7020-share-content .section-list-title{padding:var(--hyd-spacing-md) var(--hyd-spacing-sm) var(--hyd-spacing-xxs)}.app7020-share-content .review-hint{display:flex;width:100%;padding:var(--hyd-spacing-xs) var(--hyd-spacing-xxs) var(--hyd-spacing-xs) var(--hyd-spacing-sm);justify-content:stretch;align-items:center;box-sizing:border-box;background-color:var(--hyd-color-chip-background-light)}[dir=rtl] .app7020-share-content .review-hint{padding:var(--hyd-spacing-xs) var(--hyd-spacing-sm) var(--hyd-spacing-xs) var(--hyd-spacing-xxs)}.app7020-share-content .review-hint .text{margin-left:var(--hyd-spacing-sm);margin-right:var(--hyd-spacing-xs)}[dir=rtl] .app7020-share-content .review-hint .text{margin-left:var(--hyd-spacing-xs);margin-right:var(--hyd-spacing-sm)}.app7020-share-content .review-hint .text .heading{margin-bottom:var(--hyd-spacing-tiny)}.app7020-share-content .review-hint ui-button-text{flex-shrink:0}.app7020-share-content .section-box{padding-bottom:0}.app7020-share-content .share-content-search-header{display:flex;justify-content:space-between}.app7020-share-content .clear-all-action{cursor:pointer;font-size:var(--hyd-typography-size-xs);position:absolute;right:0;height:100%;top:0;margin-top:8px;z-index:2}.app7020-share-content .search-field-wrap{position:relative}.app7020-share-content .suggestion-list{box-sizing:border-box}.app7020-share-content .suggestion-list .suggestion{position:relative;display:flex;justify-content:space-between;align-items:center;padding:var(--hyd-spacing-xs) var(--hyd-spacing-sm);border-bottom:1px solid var(--hyd-color-border-neutral);background-color:var(--hyd-color-layout-surface);transition:background-color var(--hyd-motion-duration-short)}.app7020-share-content .suggestion-list .suggestion:first-of-type{border-top:1px solid var(--hyd-color-border-neutral)}.app7020-share-content .suggestion-list .suggestion:hover{cursor:pointer;background-color:var(--hyd-color-interaction-hover-dark)}.app7020-share-content .suggestion-list .suggestion .suggestion-icon{display:flex;align-items:center;justify-content:center;height:var(--hyd-size-avatar-lg);width:var(--hyd-size-avatar-lg);line-height:var(--hyd-size-avatar-lg);font-size:var(--hyd-size-icon-sm);flex-shrink:0;flex-grow:0;border-radius:50%}.app7020-share-content .suggestion-list .suggestion .suggestion-info{flex-grow:1;padding:0 var(--hyd-spacing-xs)}.app7020-share-content .suggestion-list .suggestion .suggestion-name{color:var(--hyd-color-typography-primary);font-size:var(--hyd-typography-size-sm);font-weight:var(--hyd-typography-weight-semibold);line-height:var(--hyd-typography-lineheight-md)}.app7020-share-content .suggestion-list .suggestion .suggestion-additional-info{color:var(--hyd-color-typography-secondary)}.app7020-share-content .suggestion-list .suggestion .suggested-token{padding:2px 7px;text-transform:uppercase;line-height:var(--hyd-typography-lineheight-sm);font-size:var(--hyd-typography-size-xs);font-weight:var(--hyd-typography-weight-semibold);color:var(--hyd-color-typography-success);border:var(--hyd-size-border-xs) solid var(--hyd-color-border-success);border-radius:var(--hyd-radius-default);margin-right:var(--hyd-spacing-md)}[dir=rtl] .app7020-share-content .suggestion-list .suggestion .suggested-token{margin-left:var(--hyd-spacing-md);margin-right:auto}.app7020-share-content .suggestion-list .suggestion .contribute-status{width:20px;height:30px}@-moz-document url-prefix(){.app7020-share-content .suggestion-list .suggestion .contribute-status{height:100%!important}}.app7020-share-content .suggestion-list .additional-info{color:var(--hyd-color-typography-secondary)}.app7020-share-content .load-more-spinner{text-align:center;padding:var(--hyd-spacing-sm)}"],encapsulation:2,data:{animation:[Object(s.n)("listAnimation",[Object(s.m)("* <=> *",[Object(s.h)(":enter",[Object(s.l)({maxHeight:0,opacity:0}),Object(s.j)("50ms",Object(s.e)("0.5s ease-in-out",Object(s.l)({maxHeight:"100%",opacity:1})))],{optional:!0}),Object(s.h)(":leave",Object(s.e)("0.5s ease-in-out",Object(s.l)({maxHeight:0,opacity:0})),{optional:!0})])])]},changeDetection:0}),e})()},wunY:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{static loadCourseInfo(t){return{type:e.LOAD_COURSE_INFO,payload:t}}static loadCourseChapters(t){return{type:e.LOAD_COURSE_CHAPTERS,payload:t}}static onLightboxWindowClose(t,i,s,n=1){return{type:e.ON_LIGHTBOX_WINDOW_CLOSE,payload:{courseId:t,chapterId:i,redirectUrl:s,executionCount:n}}}static setScormChaptersHash(t){return{type:e.SET_SCORM_CHAPTERS_HASH,payload:t}}static noOperationAction(){return{type:e.NO_OPERATION_ACTION}}static loadCourseChaptersSuccess(t){return{type:e.LOAD_COURSE_CHAPTERS_SUCCESS,payload:t}}static loadCourseInfoRejected(t){return{type:e.LOAD_COURSE_INFO_REJECTED,payload:t}}static setCoursePlayerChapterLoading(t){return{type:e.SET_COURSE_PLAYER_CHAPTER_LOADING,payload:t}}static openRecoveryKeyDialog(){return{type:e.OPEN_RECOVERY_KEY_DIALOG}}static openOtpDialog(){return{type:e.OPEN_OTP_DIALOG}}static loadCourseInfoSuccess(t,i=!1,s=!1){return{type:e.LOAD_COURSE_INFO_SUCCESS,payload:{courseData:t,inReloading:i,reloadSource:s}}}static startPlaying(t){return{type:e.START_PLAYING,payload:t}}static trackAndReloadCoursePlayer(t){return{type:e.TRACK_AND_RELOAD,payload:t}}static showOtjErrorState(){return{type:e.SHOW_OTJ_ERROR_STATE}}static startPlayingSuccess(t=null,i=null){return{type:e.START_PLAYING_SUCCESS,payload:{id:t,chapters:i.chapters,launch_params:i.launch_params,preserve_lightbox:i.preserve_lightbox,navigating_back:i.navigating_back}}}static startPlayingRejected(t){return{type:e.START_PLAYING_REJECTED,payload:t}}static startPlayingRejectForMissingUserField(t){return{type:e.START_PLAYING_REJECTED_MISSING_USERFIELDS,payload:t}}static setCurrentChapter(t){return{type:e.SET_CURRENT_CHAPTER,payload:t}}static chapterCompleted(t){return{type:e.CHAPTER_COMPLETED,payload:t}}static chapterCompletedSuccess(t){return{type:e.CHAPTER_COMPLETED_SUCCESS,payload:t}}static exitLightbox(){return{type:e.EXIT_LIGHTBOX}}static exitLightboxSuccess(){return{type:e.EXIT_LIGHTBOX_SUCCESS}}static videoCompleted(){return{type:e.VIDEO_COMPLETED}}}return e.LOAD_COURSE_INFO="[CoursePlayer] Load Course Info",e.LOAD_COURSE_INFO_REJECTED="[CoursePlayer] Load Course Info Rejected",e.LOAD_COURSE_INFO_SUCCESS="[CoursePlayer] Load Course Info Success",e.ON_LIGHTBOX_WINDOW_CLOSE="[CoursePlayer] On Lightbox Window Close",e.SET_SCORM_CHAPTERS_HASH="[CoursePlayer] Set SCORM chapters hash",e.SET_COURSE_PLAYER_CHAPTER_LOADING="[CoursePlayer] Set Chapter Loading",e.OPEN_RECOVERY_KEY_DIALOG="[CoursePlayer] Open recovery key dialog",e.OPEN_OTP_DIALOG="[CoursePlayer] Open OTP dialog",e.START_PLAYING="[CoursePlayer] Start Playing",e.TRACK_AND_RELOAD="[CoursePlayer] Track and re-load",e.SHOW_OTJ_ERROR_STATE="[CoursePlayer] Show ChapterViewer OTJ Lo error state",e.START_PLAYING_SUCCESS="[CoursePlayer] Start Playing Success",e.START_PLAYING_REJECTED="[CoursePlayer] Start Playing Rejected",e.START_PLAYING_REJECTED_MISSING_USERFIELDS="[CoursePlayer] Start Playing Rejected for Missing UserFields",e.SET_CURRENT_CHAPTER="[CoursePlayer] Set Current Chapter",e.CHAPTER_COMPLETED="[CoursePlayer] Chapter Completed",e.CHAPTER_COMPLETED_SUCCESS="[CoursePlayer] Chapter Completed success",e.EXIT_LIGHTBOX="[CoursePlayer] Chapter Completed",e.EXIT_LIGHTBOX_SUCCESS="[CoursePlayer] Chapter Completed success",e.VIDEO_COMPLETED="[CoursePlayer] Video ended",e.LOAD_COURSE_CHAPTERS="[Course] Load Course Chapters Request",e.LOAD_COURSE_CHAPTERS_SUCCESS="[Course] Load Course Chapters Success",e.NO_OPERATION_ACTION="[Course] No Operation Action",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Zb({token:e,factory:e.\u0275fac}),e})()},xLs9:function(e){e.exports=JSON.parse('{"a":{"id":292,"code":null,"title":{"label":"My courses and learning plans","category":"enrollments"},"description":{"label":"All your courses and learning plans you\'re enrolled in, including all your courses in progress and completed","category":"enrollments"},"icon":"zmdi zmdi-collection-bookmark","type":"widget","settings":{"showTitle":true,"headerFullWidth":false},"widgets":[{"id":"builtin-coursesandlearningplans-row-1","type":"parent","widget":"row","settings":{"mode":"boxed"},"contains":[{"id":"builtin-coursesandlearningplans-row-1","type":"parent","widget":"column","settings":{"size":"12"},"contains":[{"id":"0","type":"child","widget":"coursesandlearningplans","settings":{"showSearch":true,"showSortBy":true,"assignToAll":true,"displayMode":"card","showFilters":true,"coursesStatus":"all","defaultSortBy":"enrolled_date_desc","showCourseDeadline":true,"removeCoursesPartOfLearningPlan":false,"lpFiltering":"all","enablePushMode":true,"loadPreferences":"enableInfiniteScroll","stickDataBrowserToTop":true}}]}]}]}}')},y0sE:function(e,t,i){"use strict";i.d(t,"a",function(){return jt});var s=i("mrSG"),n=i("fXoL"),a=i("3Pt+"),o=i("384c"),r=i("lfsz"),c=i("knll"),l=i("8lF4"),d=i("9b3o"),u=i("bUIS"),h=i("yfT8"),p=i("/76g"),m=i("rLbr"),g=i("qqVP"),b=i("vkgz"),f=i("eIep"),v=i("wO+i"),_=i("lJxs"),w=i("pLZG"),y=i("IzEk"),C=i("L0WZ"),S=i("gvJE");const T=Object.assign(Object.assign({},C.a),{replyButton:{[g.b.QUESTION]:S.a.t("app7020","Answer"),[g.b.COMMENT]:S.a.t("standard","Reply")},questionLabel:{[g.b.QUESTION]:S.a.t("standard","asked"),[g.b.COMMENT]:S.a.t("standard","commented")},replyLabel:{[g.b.QUESTION]:S.a.t("standard","answered"),[g.b.COMMENT]:S.a.t("app7020","replied")},showMore:{[g.b.QUESTION]:S.a.t("app7020","Show {count} more answers"),[g.b.COMMENT]:S.a.t("app7020","Show {count} more replies")},confirmReply:S.a.t("standard","Send"),confirmEdit:S.a.t("standard","Save"),cancelEdit:S.a.t("standard","Cancel"),moreActions:{edit:S.a.t("standard","Edit"),delete:S.a.t("standard","Delete"),followMessage:S.a.t("app7020","Follow this Thread"),unfollowMessage:S.a.t("standard","Unfollow this Thread")},deleteDialog:{[g.b.QUESTION]:{title:S.a.t("test","Delete question"),content:S.a.t("standard","If you delete this question, all answers to it will also disappear. Do you want to proceed?")},[g.b.COMMENT]:{title:S.a.t("standard","Delete Comment"),content:S.a.t("standard","If you delete this comment, all replies to it will also disappear. Do you want to proceed?")},answer:{title:S.a.t("test","Delete answer"),content:S.a.t("standard","If you delete this answer, no one will be able to read it. Do you want to proceed?")},reply:{title:S.a.t("test","Delete Reply"),content:S.a.t("standard","If you delete this reply, no one will be able to read it. Do you want to proceed?")},cancel:S.a.t("standard","Cancel"),confirm:S.a.t("standard","Delete")},snackbars:{answer:{[g.b.COMMENT]:S.a.t("standard","Your reply has been added successfully"),[g.b.QUESTION]:S.a.t("standard","Your answer has been added successfully")},edit:{reply:S.a.t("standard","Your answer has been edited successfully"),[g.b.COMMENT]:S.a.t("standard","Your comment has been edited successfully"),[g.b.QUESTION]:S.a.t("standard","Your question has been edited successfully")},delete:{reply:S.a.t("standard","This answer has been deleted successfully"),[g.b.COMMENT]:S.a.t("standard","This comment has been deleted successfully"),[g.b.QUESTION]:S.a.t("standard","This question has been deleted successfully")},followNotification:S.a.t("standard","Notifications for this thread have been activated successfully"),unfollowNotification:S.a.t("standard","Notifications for this thread have been deactivated successfully")},sortBy:S.a.t("standard","SORT BY"),totalElements:{singular:S.a.t("standard","{itemsCount} item"),plural:S.a.t("standard","{itemsCount} items")},uiDataBrowser:Object.assign(Object.assign({},C.a.uiDataBrowser),{clearSearchFiltersLabel:S.a.t("standard","Clear search"),showMoreLabel:S.a.t("widgets","See other options"),searchPlaceholder:S.a.t("standard","Search..."),searchLabel:S.a.t("standard","Search"),backLabel:S.a.t("standard","_BACK")}),viewQALabel:S.a.t("app7020","View all Q&A"),loadMore:S.a.t("standard","Load More"),askTheExpert:S.a.t("standard","Ask the Expert"),relatedTo:S.a.t("standard","Related to"),bestAnswer:S.a.t("app7020","Best Answer")});var k=i("Y9qQ"),I=i("tyNb"),x=i("+sIT"),D=i("l7P3");let O=(()=>{class e{get ACTIONS_TYPE(){return`coreWidgets/questionAndAnswers-${this.widgetId}`}initializeActions(){this.search=Object(D.j)(`[${this.ACTIONS_TYPE}] search`),this.searchSuccess=Object(D.j)(`[${this.ACTIONS_TYPE}] search success`,Object(D.o)()),this.searchFailed=Object(D.j)(`[${this.ACTIONS_TYPE}] search failed`),this.updateFilters=Object(D.j)(`[${this.ACTIONS_TYPE}] update filters`,Object(D.o)()),this.resetFilters=Object(D.j)(`[${this.ACTIONS_TYPE}] reset filters`),this.updatePagination=Object(D.j)(`[${this.ACTIONS_TYPE}] update pagination`,Object(D.o)()),this.resetPagination=Object(D.j)(`[${this.ACTIONS_TYPE}] reset pagination`),this.updateSorting=Object(D.j)(`[${this.ACTIONS_TYPE}] update sorting`,Object(D.o)()),this.loadChannels=Object(D.j)(`[${this.ACTIONS_TYPE}] load channel filter options`),this.loadCohorts=Object(D.j)(`[${this.ACTIONS_TYPE}] load cohort filter options`,(e=[])=>({channels:e})),this.loadChannelsSuccess=Object(D.j)(`[${this.ACTIONS_TYPE}] load channel filter options success`,Object(D.o)()),this.loadCohortsSuccess=Object(D.j)(`[${this.ACTIONS_TYPE}] load cohort filter options success`,Object(D.o)()),this.loadReplies=Object(D.j)(`[${this.ACTIONS_TYPE}] load replies of answer`,Object(D.o)()),this.loadRepliesSuccess=Object(D.j)(`[${this.ACTIONS_TYPE}] load replies of answer success`,Object(D.o)()),this.loadAnswers=Object(D.j)(`[${this.ACTIONS_TYPE}] load answers of answer`,Object(D.o)()),this.loadAnswersSuccess=Object(D.j)(`[${this.ACTIONS_TYPE}] load answers of answer success`,Object(D.o)()),this.deleteQuestionSuccess=Object(D.j)(`[${this.ACTIONS_TYPE}] delete question success`,Object(D.o)()),this.afterDeleteQuestion=Object(D.j)(`[${this.ACTIONS_TYPE}] after delete initiate search of the same page`),this.afterDeleteQuestionSuccess=Object(D.j)(`[${this.ACTIONS_TYPE}] after delete initiate search of the same page success`,Object(D.o)()),this.afterDeleteAnswer=Object(D.j)(`[${this.ACTIONS_TYPE}] after answer delete initiate search of the same answer page`,Object(D.o)()),this.afterDeleteAnswerSuccess=Object(D.j)(`[${this.ACTIONS_TYPE}] after answer delete initiate search of the same answer page success`,Object(D.o)()),this.changeBestAnswer=Object(D.j)(`[${this.ACTIONS_TYPE}] change the best answer on question`,Object(D.o)())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Zb({token:e,factory:e.\u0275fac}),e})();var E=i("lWmL");let P=(()=>{class e{constructor(e,t,i,s,n,a){this._backendService=e,this._router=t,this._docLayoutService=i,this._store=s,this._qnaActions=n,this._qnaService=a,this.DELETE_QUESTION_REMINDER_KEY="app7020_questions_deletion_warning_dismissed",this.DELETE_ANSWER_REMINDER_KEY="app7020_questions_answer_deletion_warning_dismissed",this.DELETE_COMMENT_REMINDER_KEY="app7020_comment_deletion_warning_dismissed",this.DELETE_REPLY_REMINDER_KEY="app7020_comment_reply_deletion_warning_dismissed",this.dictionary=T,this.deleteReminderOff={[this.DELETE_QUESTION_REMINDER_KEY]:!1,[this.DELETE_ANSWER_REMINDER_KEY]:!1,[this.DELETE_COMMENT_REMINDER_KEY]:!1,[this.DELETE_REPLY_REMINDER_KEY]:!1}}showAllQuestions(){this._router.navigate(["/share/list/coach"]).then()}rate(e,t){return this._qnaService[t](e)}follow(e){return this._qnaService.questionFollow(e).pipe(Object(b.a)(()=>{this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.snackbars.followNotification})}))}unFollow(e){return this._qnaService.questionUnfollow(e).pipe(Object(b.a)(()=>{this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.snackbars.unfollowNotification})}))}edit(e,t){return this._qnaService[e.isReply?"editAnswer":e.type===g.b.QUESTION?"editQuestion":"editComment"](e.id,t).pipe(Object(b.a)(()=>{this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.snackbars.edit[e.isReply?"reply":e.type]})}))}reply(e,t){var i;const s=e.type===g.b.COMMENT?"commentReply":"questionAnswer",n=null!==(i=e.isReply?e.parentID:e.id)&&void 0!==i?i:0;return this._qnaService[s](n,t,e.isReply?e.id:void 0).pipe(Object(b.a)(()=>{this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.snackbars.answer["questionAnswer"===s?g.b.QUESTION:g.b.COMMENT]})}))}markAsBest(e,t){const i=Object(b.a)(()=>{var t;this._store.dispatch(this._qnaActions.changeBestAnswer({idQuestion:null!==(t=e.parentID)&&void 0!==t?t:0,idAnswer:e.id,isBest:!e.isBestAnswer}))});return e.isBestAnswer?this._qnaService.answerUnmarkAsBest(e.id).pipe(i):t?this._qnaService.answerUnmarkAsBest(t).pipe(Object(f.a)(()=>this._qnaService.answerMarkAsBest(e.id).pipe(i))):this._qnaService.answerMarkAsBest(e.id).pipe(i)}delete(e){return new Promise(t=>{this._reminderDeleteQuestion(e.type,e.isReply).then(i=>{if(i&&"confirm"!==i.actionID)return void i.actionSuccess.next(!0);const s=e.isReply?"deleteAnswer":e.type===g.b.QUESTION?"deleteQuestion":"deleteComment",n=!i||!i.hasOwnProperty("confirmationCheckValue")||i.confirmationCheckValue;this._updatePreferences(e.type,e.isReply,n);const a=()=>{i&&i.actionSuccess.next(!0)};t(this._qnaService[s](e.id).pipe(Object(b.a)({next:()=>{var t;if(a(),this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.snackbars.delete[e.isReply?"reply":e.type]}),this._store.dispatch(this._qnaActions.deleteQuestionSuccess({id:e.id,isAnswer:s.toLowerCase().indexOf("answer")>-1})),e.isReply||this._store.dispatch(this._qnaActions.afterDeleteQuestion()),e.isReply){const i=null!==(t=e.directParentId)&&void 0!==t?t:e.parentID;this._store.dispatch(this._qnaActions.afterDeleteAnswer({id:i,page:1}))}},error:e=>{a();const t=e&&e.message&&e.message[0]?e.message[0]:p.a.t("standard","Internal Server Error");this._docLayoutService.toast.showToast({message:t,type:"error"})}})))})})}loadMoreAnswers({id:e,page:t}){this._store.dispatch(this._qnaActions.loadAnswers({id:e,page:t}))}checkDeleteConfirmationModalSetting(){const e=new h.a("/manage/v1/user/:user_id/settings",m.a.GET);this._backendService.request(e.setPlaceholdersValue({user_id:r.c.getInstance().id}),e.verb,{page_size:!1}).pipe(Object(v.a)("data","items"),Object(_.a)(e=>e.filter(e=>[this.DELETE_ANSWER_REMINDER_KEY,this.DELETE_QUESTION_REMINDER_KEY,this.DELETE_COMMENT_REMINDER_KEY,this.DELETE_REPLY_REMINDER_KEY].indexOf(e.name)>-1)),Object(w.a)(e=>e.length>0)).subscribe(e=>{e.forEach(e=>{this.deleteReminderOff[e.name]=Boolean(Number(e.value))})})}_reminderDeleteQuestion(e,t=!1){return new Promise(i=>{let s=e;switch(e){case g.b.QUESTION:s=t?"answer":e;break;case g.b.COMMENT:s=t?"reply":e}e===g.b.QUESTION&&t&&this.deleteReminderOff[this.DELETE_ANSWER_REMINDER_KEY]||e===g.b.QUESTION&&!t&&this.deleteReminderOff[this.DELETE_QUESTION_REMINDER_KEY]||e===g.b.COMMENT&&t&&this.deleteReminderOff[this.DELETE_REPLY_REMINDER_KEY]||e===g.b.COMMENT&&!t&&this.deleteReminderOff[this.DELETE_COMMENT_REMINDER_KEY]?i(null):this._docLayoutService.dialog.showCommonDialog({title:this.dictionary.deleteDialog[s].title,content:this.dictionary.deleteDialog[s].content,showConfirmationCheck:!0,confirmationLabel:p.a.t("app7020","Don't show me again"),actions:[{id:"cancel",type:"neutral",label:this.dictionary.deleteDialog.cancel,slot:"end"},{id:"confirm",type:"negative",label:this.dictionary.deleteDialog.confirm,slot:"end"}]}).pipe(Object(y.a)(1)).subscribe(e=>i(e))})}_updatePreferenceForDeleteModalReminder(e){this.deleteReminderOff[e]=!0,this._backendService.updateMyPreferences({settings:[{name:e,value:"1"}]},r.c.getInstance().id).subscribe()}_updatePreferences(e,t,i){if(i)switch(!0){case e===g.b.QUESTION&&t&&!this.deleteReminderOff[this.DELETE_ANSWER_REMINDER_KEY]:this._updatePreferenceForDeleteModalReminder(this.DELETE_ANSWER_REMINDER_KEY);break;case e===g.b.QUESTION&&!t&&!this.deleteReminderOff[this.DELETE_QUESTION_REMINDER_KEY]:this._updatePreferenceForDeleteModalReminder(this.DELETE_QUESTION_REMINDER_KEY);break;case e===g.b.COMMENT&&t&&!this.deleteReminderOff[this.DELETE_REPLY_REMINDER_KEY]:this._updatePreferenceForDeleteModalReminder(this.DELETE_REPLY_REMINDER_KEY);break;case e===g.b.COMMENT&&!t&&!this.deleteReminderOff[this.DELETE_COMMENT_REMINDER_KEY]:this._updatePreferenceForDeleteModalReminder(this.DELETE_COMMENT_REMINDER_KEY)}}}return e.\u0275fac=function(t){return new(t||e)(n.nc(k.a),n.nc(I.h),n.nc(x.a),n.nc(D.d),n.nc(O),n.nc(E.a))},e.\u0275prov=n.Zb({token:e,factory:e.\u0275fac}),e})();var M=i("d+dA"),A=i("S2Qf"),L=i("nsn+"),j=i("r0xE"),F=i("YpZb");class R extends j.a{constructor(){super();const e=M.b.getInstance().isPluginActive("Share7020App");this.config=this.initConfig({name:"questionsandanswers-new",preview:"/public/images/core/questions-and-answers-widget-preview.jpg",heading:S.a.t("standard","Questions & Answers"),description:S.a.t("app7020","Shows sorted questions and answers"),conditions:{exists:e},params:[{title:"",type:"group",name:"titleGroup",subFields:[{name:"title",type:"textMultilang",label:S.a.t("standard","Title"),legend:S.a.t("dashboard","Leave blank to hide the title"),defaultValue:""}]},{title:S.a.t("admin","Options"),type:"group",name:"optionGroup",subFields:[{name:"showFiltersSelector",type:"checkbox",label:S.a.t("admin_webpages","Show filters selector"),description:S.a.t("admin_webpages","Allow users to filter Questions & Answers by type or status"),defaultValue:!0,conditions:{isEnabled:[{name:"showLoadMoreLink",value:!0}]}},{name:"showSearchBar",type:"checkbox",label:S.a.t("admin_webpages","Show search bar"),description:S.a.t("app7020","Allow users to search among Questions and Answers"),defaultValue:!0,conditions:{isEnabled:[{name:"showLoadMoreLink",value:!0}]}},{name:"showSortBy",type:"checkbox",label:S.a.t("admin_webpages","Show sort by"),description:S.a.t("admin_webpages","Allow users to sort by Questions & Answers"),defaultValue:!0,conditions:{isEnabled:[{name:"showLoadMoreLink",value:!0}]}},{name:"defaultSortBy",type:"dropdown",label:S.a.t("admin_webpages","Default sort by"),defaultValue:"desc",options:[{value:"desc",label:S.a.t("standard","Newest To Oldest")},{value:"asc",label:S.a.t("standard","Oldest To Newest")}]},{name:"maxDisplayable",type:"number",label:S.a.t("admin_webpages","Max displayable Q&A per page"),description:S.a.t("admin_webpages","Display up 10 items per page"),defaultValue:"5",validation:[a.x.required,L.a.min(1),L.a.max(10)]},{name:"showViewAllLink",type:"checkbox",label:S.a.t("dashboard",'Show "view all" link'),description:S.a.t("app7020","This link will bring the user to Q&A's page"),defaultValue:!0},{name:"showLoadMoreLink",type:"checkbox",label:S.a.t("standard",'Show "Load more" button'),description:S.a.t("app7020","This link will open more results in the same page"),defaultValue:!0}]},{title:S.a.t("standard","Filter by Channel"),type:"filteredAsyncLists",name:"selectedChannels",defaultValue:null,settings:{defaultOptionLabel:S.a.t("standard","All channels"),apiConfig:{endpoint:new h.a("/share/v1/admin/channels",m.a.GET),payload:{enabled:1,type:["custom"]}},mapFnc:e=>({label:e.name,value:e.id})}}]})}}class N{constructor(e){this.translateService=e.get(A.h)}get initQASortOptions(){return[{label:this.translateService.instant("Newest To Oldest",{category:"standard"}),value:"desc"},{label:this.translateService.instant("Oldest To Newest",{category:"standard"}),value:"asc"}]}get initQAShowFilter(){return{label:this.translateService.instant("Show",{category:"standard"}),key:"show",options:[{label:this.translateService.instant("New questions",{category:"app7020"}),value:"new"},{label:this.translateService.instant("New best answers",{category:"standard"}),value:"best"},{label:this.translateService.instant("Open questions",{category:"standard"}),value:"open"},{label:this.translateService.instant("My questions",{category:"app7020"}),value:"my_questions"},{label:this.translateService.instant("My answers",{category:"app7020"}),value:"my_answers"},{label:this.translateService.instant("Following",{category:"standard"}),value:"follow"}]}}get initQATypeFilter(){return{label:this.translateService.instant("Question type",{category:"standard"}),key:"type",options:[{label:this.translateService.instant("Direct questions",{category:"standard"}),value:"0"},{label:this.translateService.instant("Linked to an asset/course",{category:"standard"}),value:"1"}]}}get initQAQuestionTypeFilter(){return{label:this.translateService.instant("Type",{category:"standard"}),key:"type_question",defaultValue:"3",value:"3",options:[{label:this.translateService.instant("Question & Answers and Comments",{category:"mobile"}),value:"3"},{label:this.translateService.instant("Question & Answers Only",{category:"mobile"}),value:"1"},{label:this.translateService.instant("Comments Only",{category:"mobile"}),value:"2"}]}}get asyncChannelFilters(){return{label:this.translateService.instant("Channels",{category:"standard"}),endpoint:new F.a("/manage/v1/channels",m.a.GET,"name","id","search"),key:"channel_id",control:new a.e("")}}asyncCohortGroupsFilter(e={}){return{label:this.translateService.instant("Cohorts",{category:"app7020"}),endpoint:new F.a("/share/v1/cohort/groups",m.a.GET,"name","id","search_text",e),key:"cohort_groups",control:new a.e("")}}}var U=i("2NKM"),q=i("7vd5"),z=i("aWaq"),V=i("3RMk");class B{constructor(e){this.SHOW_MORE_STEP=10,this.createdAt="",this.id=0,this.type=g.b.COMMENT,this.content="",this.upVotes=0,this.downVotes=0,this.alreadyVoted=!1,this.isMine=!1,this.isBestAnswer=!1,this.bestAnswerIsLoading=!1,this.showBestAnswerBtn=!1,this.isFollowing=!1,this.owner={id:0,uuid:"",fullName:"",isExpert:!1,shortName:""},this.actions=[],this.replies=[],this.showReplyOption=!1,this.hasReplies=!1,this.showReplyBox=!1,this.showEditBox=!1,this.isReply=!1,this.hidden=!1,this.visibleReplies=3,this.hasMoreData=!1,this.totalCountReplies=0,this.repliesPage=1,this._createdAt=new z.a,this._setRequiredFields(e),e.hasOwnProperty("isReply")&&(this.isReply=e.isReply),e.hasOwnProperty("parentId")&&(this.parentID=e.parentId),e.hasOwnProperty("directParentId")&&(this.directParentId=e.directParentId),e.hasOwnProperty("mentions")&&(this.mentions=e.mentions),e.hasOwnProperty("sub_items")&&e.sub_items&&this.setReplies(e.sub_items),e.hasOwnProperty("subanswers")&&e.subanswers&&this.setReplies(e.subanswers),this.isReply||this._setRelatedItems(e),this.setActions()}get showMoreCount(){const e=this.totalCountReplies-this.replies.filter(e=>e.hidden).length-this.visibleReplies;return this.SHOW_MORE_STEP<e?this.SHOW_MORE_STEP:e}setActions(){this.actions=[];const e=T.moreActions,t={[g.b.COMMENT]:{value:"edit_comment",label:e.edit,color:"primary"},[g.b.QUESTION]:{value:"edit_question",label:e.edit,color:"primary"},answer:{value:"edit_answer",label:e.edit,color:"primary"}},i={[g.b.COMMENT]:{value:"delete_comment",label:e.delete,color:"error"},[g.b.QUESTION]:{value:"delete_question",label:e.delete,color:"error"},answer:{value:"delete_answer",label:e.delete,color:"error"}},s=this.isReply?"answer":this.type;this.type!==g.b.QUESTION||this.isMine||this.isReply||this.actions.push(this.isFollowing?{value:"unfollow_question",label:e.unfollowMessage,color:"primary"}:{value:"follow_question",label:e.followMessage,color:"primary"}),!this.isMine&&r.c.getInstance().isCurrentUserA(r.c.LEVEL_SUPERADMIN)&&this.actions.push(i[s]),this.isMine&&(this.actions.push(t[s]),this.actions.push(i[s]))}setReplies(e,{page:t,has_more_data:i,total_count:s}={}){var n,a,o;for(const r of e)this.replies.push(new B(Object.assign(Object.assign({},r),{isReply:!0,showBestAnswerBtn:this.isMine&&this.type===g.b.QUESTION&&!this.parentID,showReplyOption:this.showReplyOption&&!this.isReply&&this.type===g.b.QUESTION,parentId:this.id,directParentId:this.parentID})));this.replies=this.replies.filter((e,t,i)=>i.findIndex(t=>t.id===e.id)===t),this.hasMoreData=null!==(n=i)&&void 0!==n?n:this.hasMoreData,this.totalCountReplies=null!==(a=s)&&void 0!==a?a:this.replies.length,this.repliesPage=null!==(o=t)&&void 0!==o?o:this.repliesPage}setNewReply(e){this.replies.unshift(new B(Object.assign(Object.assign({},e),{isReply:!0,showReplyOption:this.showReplyOption&&!this.isReply&&this.type===g.b.QUESTION,parentId:this.id,directParentId:this.parentID}))),this.totalCountReplies++,this.hasMoreData&&this.replies.pop()}_setRequiredFields(e){var t,i,s,n,a,o;(null==e?void 0:e.id)&&(this.id=e.id),(null==e?void 0:e.type)&&(this.type=e.type),(null==e?void 0:e.title)&&(this.content=e.title),(null==e?void 0:e.owner)&&this._setOwnerAndOwnership(e.owner),e.hasOwnProperty("showBestAnswerBtn")&&(this.showBestAnswerBtn=e.showBestAnswerBtn&&!this.isMine),(null==e?void 0:e.created_at)&&this._setCreatedAt(e.created_at),(null==e?void 0:e.showReplyOption)&&(this.showReplyOption=!0),this._setVotes(e),(null==e?void 0:e.metadata)&&e.metadata&&((null===(t=e.metadata)||void 0===t?void 0:t.total_items)&&(this.hasReplies=!0),(null===(i=e.metadata)||void 0===i?void 0:i.can_reply)&&(this.showReplyOption=e.metadata.can_reply),(null===(s=e.metadata)||void 0===s?void 0:s.have_best)&&(null===(n=e.metadata)||void 0===n?void 0:n.best_answer_id)&&(this.bestAnswerId=e.metadata.best_answer_id),(null===(a=e.metadata)||void 0===a?void 0:a.created_at)&&this._setCreatedAt(e.metadata.created_at),(null===(o=e.metadata)||void 0===o?void 0:o.is_follow)&&(this.isFollowing=e.metadata.is_follow))}_setOwnerAndOwnership(e){if((null==e?void 0:e.uuid)&&(this.owner.uuid=e.uuid),(null==e?void 0:e.short_name)&&(this.owner.shortName=e.short_name),null==e?void 0:e.full_name){const t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.full_name);this.owner.fullName=t?e.full_name.split("@").shift():e.full_name,this.owner.shortName=t?"":this.owner.shortName}(null==e?void 0:e.is_expert)&&(this.owner.isExpert=e.is_expert),(null==e?void 0:e.avatar)&&(this.owner.avatar=e.avatar),(null==e?void 0:e.id)&&(this.isMine=e.id===r.c.getInstance().id)}_setCreatedAt(e){this._createdAt=new z.a(e);const t=r.c.getInstance().timezone,i=Object(q.l)(r.c.getInstance().datetime_format,"short","short");this.createdAt=(new V.a).transform(this._createdAt,t,i)}_setVotes(e){const t=e.rating;t&&t.hasOwnProperty("likes")&&t.likes&&(this.upVotes=t.likes),t&&t.hasOwnProperty("dislikes")&&t.dislikes&&(this.downVotes=t.dislikes),e.hasOwnProperty("voted")&&"object"==typeof e.voted&&(this.votedModel={created:e.voted.created,type:e.voted.type}),e.hasOwnProperty("voted")&&"object"!=typeof e.voted&&(this.alreadyVoted=e.voted),this.isBestAnswer=Boolean(null==e?void 0:e.is_best)}_setRelatedItems(e){var t,i;const s=Number((null==e?void 0:e.related.channel_id)?null==e?void 0:e.related.channel_id:null==e?void 0:e.related.id);let n;switch(e.metadata.related_kind){case g.a.CHANNEL:n=`/learn/dashboard/channel/${s}`;break;case g.a.ASSET:n=`/share/asset/view/${s}`;break;default:n=e.related.url}this.relatedItem={id:s,title:null!==(t=e.related.name)&&void 0!==t?t:e.related.title,path:n,kind:null===(i=null==e?void 0:e.metadata)||void 0===i?void 0:i.related_kind}}}class G extends U.a{mapItemFromDto(e){return new B(e)}mapItemFromArrayDto(e){var t;return null!==(t=null==e?void 0:e.map(e=>this.mapItemFromDto(e)))&&void 0!==t?t:[]}mapItemToDto(e){return{}}mapSearchRequestToDto(e){var t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({page:(null!==(t=null==e?void 0:e.page)&&void 0!==t?t:0)+1,page_size:e.pageSize,sort_dir:e.sortDir,sort_attr:e.sortAttr},!r.c.getInstance().dcsMention&&{ignore_mentions:!0}),!!(null==e?void 0:e.type_question)&&{type_question:e.type_question}),!!(null==e?void 0:e.with_voted)&&{with_voted:e.with_voted}),!!(null==e?void 0:e.asset_id)&&{asset_id:e.asset_id}),!!(null==e?void 0:e.course_id)&&{course_id:e.course_id}),!!(null==e?void 0:e.search)&&{search_text:e.search}),!!(null==e?void 0:e.channel_id)&&{channel_id:e.channel_id}),!!(null==e?void 0:e.cohort_groups)&&Array.isArray(null==e?void 0:e.cohort_groups)&&{cohort_groups:e.cohort_groups.map(e=>Number(e))}),!!(null==e?void 0:e.cohort_groups)&&!Array.isArray(null==e?void 0:e.cohort_groups)&&{cohort_groups:e.cohort_groups.split(",").map(e=>Number(e))}),!!(null==e?void 0:e.show)&&{show:e.show}),!!(null==e?void 0:e.type)&&{type:e.type})}}var $=i("9jGm"),H=i("EY2u"),Y=i("LRne"),W=i("Kj3r"),Q=i("zp1y"),K=i("JIr8"),X=i("5+tZ"),J=i("bOdf");let Z=(()=>{class e{FEATURE_SELECTOR(){return Object(D.m)(this.featureSelector,e=>e[this.sliceName])}items(){return Object(D.m)(this.FEATURE_SELECTOR(),e=>e.items)}pagination(){return Object(D.m)(this.FEATURE_SELECTOR(),e=>e.pagination)}sorting(){return Object(D.m)(this.FEATURE_SELECTOR(),e=>e.sorting)}loading(){return Object(D.m)(this.FEATURE_SELECTOR(),e=>e.loading)}filters(){return Object(D.m)(this.FEATURE_SELECTOR(),e=>e.filters)}noContent(){return Object(D.m)(this.FEATURE_SELECTOR(),e=>{var t,i;return!(null===(t=Object.keys(e.filters))||void 0===t?void 0:t.length)&&!(null===(i=e.items)||void 0===i?void 0:i.length)&&!e.loading})}noResults(){return Object(D.m)(this.FEATURE_SELECTOR(),e=>{var t,i;return!!(null===(t=Object.keys(e.filters))||void 0===t?void 0:t.length)&&!(null===(i=e.items)||void 0===i?void 0:i.length)&&!e.loading})}hasMoreData(){return Object(D.m)(this.FEATURE_SELECTOR(),e=>e.hasMoreData)}channelFilters(){return Object(D.m)(this.FEATURE_SELECTOR(),e=>e.filterOptions.channels)}cohortFilters(){return Object(D.m)(this.FEATURE_SELECTOR(),e=>e.filterOptions.cohorts)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Zb({token:e,factory:e.\u0275fac}),e})(),ee=(()=>{class e{constructor(e,t,i,s,n,a,r){this._actions$=e,this._store=t,this._backendService=i,this._docLayoutService=s,this._qnaService=n,this._qnaActions=a,this._qnaSelectors=r,this._randomID=Object(o.m)(12),this._qnaMapper=new G,this._returnErrorHandler=()=>(this._docLayoutService.toast.showToast({type:"error",message:p.a.t("standard","Internal Server Error")}),H.a)}ngrxOnIdentifyEffects(){return this._randomID}initializeEffects(){this.search=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.search),Object(W.a)(500),Object(Q.a)(...this._getSelectorsObservable()),Object(f.a)(([e,...t])=>{const i=this._getSelectorValues(t),s=this.searchBuildRequest(i),n=this._qnaMapper.mapSearchRequestToDto(s);return this._qnaService.questionsList(n).pipe(Object(f.a)(e=>{var t,s;return!(null===(s=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.items)||void 0===s?void 0:s.length)&&i.pagination.pageIndex>0?Object(Y.a)(this._qnaActions.updatePagination({pagination:Object.assign(Object.assign({},i.pagination),{pageIndex:i.pagination.pageIndex-1})})):Object(Y.a)(this._qnaActions.searchSuccess({response:e}))}),Object(K.a)(()=>Object(Y.a)(this._qnaActions.searchFailed())))}))),this.afterDeleteSuccess=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.afterDeleteQuestion),Object(W.a)(500),Object(Q.a)(...this._getSelectorsObservable()),Object(f.a)(([e,...t])=>{const i=this._getSelectorValues(t),s=this.searchBuildRequest(i),n=this._qnaMapper.mapSearchRequestToDto(s);return this._qnaService.questionsList(n).pipe(Object(f.a)(e=>{var t,s;return!(null===(s=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.items)||void 0===s?void 0:s.length)&&i.pagination.pageIndex>0?Object(Y.a)(this._qnaActions.updatePagination({pagination:Object.assign(Object.assign({},i.pagination),{pageIndex:i.pagination.pageIndex-1})})):Object(Y.a)(this._qnaActions.afterDeleteQuestionSuccess({response:e}))}),Object(K.a)(()=>Object(Y.a)(this._qnaActions.searchFailed())))}))),this.updateFilters=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.updateFilters),Object(f.a)(()=>Object(Y.a)(this._qnaActions.search())))),this.updatePagination=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.updatePagination),Object(f.a)(()=>Object(Y.a)(this._qnaActions.search())))),this.updateSorting=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.updateSorting),Object(f.a)(()=>Object(Y.a)(this._qnaActions.search())))),this.loadChannels=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.loadChannels),Object(f.a)(()=>this._qnaService.getChannelsList({page_size:1}).pipe(Object(f.a)(e=>Object(Y.a)(this._qnaActions.loadChannelsSuccess({response:e}))),Object(K.a)(()=>Object(Y.a)(this._qnaActions.loadChannelsSuccess({response:[]}))))))),this.loadCohorts=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.loadCohorts),Object(f.a)(({channels:e})=>this._qnaService.getCohortList(Object.assign(Object.assign({},!!e&&{channels:e}),{page_size:1})).pipe(Object(f.a)(e=>Object(Y.a)(this._qnaActions.loadCohortsSuccess({response:e}))),Object(K.a)(()=>Object(Y.a)(this._qnaActions.loadCohortsSuccess({response:[]}))))))),this.getCommentReplyIds=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.searchSuccess,this._qnaActions.afterDeleteQuestionSuccess),Object(Q.a)(this._store.pipe(Object(D.p)(this._qnaSelectors.items()))),Object(X.b)(([,e])=>{const t=[];return e.filter(e=>e.hasReplies&&e.type===g.b.COMMENT&&0===e.replies.length).forEach(e=>{t.push(this._qnaActions.loadReplies({id:e.id}))}),t}))),this.requestReplies=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.loadReplies),Object(X.b)(({id:e})=>this._qnaService.getReplies(e).pipe(Object(J.a)(t=>Object(Y.a)(this._qnaActions.loadRepliesSuccess({[e]:t}))),Object(K.a)(this._returnErrorHandler))))),this.getQuestionAnswersIds=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.searchSuccess,this._qnaActions.afterDeleteQuestionSuccess),Object(Q.a)(this._store.pipe(Object(D.p)(this._qnaSelectors.items()))),Object(X.b)(([,e])=>{const t=[];return e.filter(e=>e.hasReplies&&e.type===g.b.QUESTION&&0===e.replies.length).forEach(e=>{t.push(this._qnaActions.loadAnswers({id:e.id,page:1}))}),t}))),this.requestAnswers=Object($.e)(()=>this._actions$.pipe(Object($.f)(this._qnaActions.loadAnswers,this._qnaActions.afterDeleteAnswer),Object(Q.a)(this._store.pipe(Object(D.p)(this._qnaSelectors.items()))),Object(w.a)(([{id:e},t])=>{const i=t.find(t=>t.id===e);return!!i&&(!(!i.hasReplies||0!==i.replies.length)||i.hasMoreData)}),Object(X.b)(([{id:e,page:t},i])=>this._qnaService.getAnswers(e,t).pipe(Object(J.a)(t=>Object(Y.a)(this._qnaActions.loadAnswersSuccess({[e]:t}))),Object(K.a)(this._returnErrorHandler)))))}searchSelectors(){return[this._qnaSelectors.pagination,this._qnaSelectors.filters,this._qnaSelectors.sorting]}_getSelectorValues(e){const t={};return e.forEach((e,i)=>{const s=this.searchSelectors()[i].name;t[s]=e}),t}searchBuildRequest(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({page:e.pagination.pageIndex,pageSize:e.pagination.pageSize,sortAttr:e.sorting.columnName,sortDir:e.sorting.dir},!!e.filters.asset_id&&{asset_id:e.filters.asset_id}),!!e.filters.course_id&&{course_id:e.filters.course_id}),!!e.filters.with_voted&&{with_voted:e.filters.with_voted}),!!e.filters.type_question&&{type_question:e.filters.type_question}),!!e.filters.search&&{search:e.filters.search}),!!e.filters.channel_id&&{channel_id:e.filters.channel_id}),!!e.filters.cohort_groups&&{cohort_groups:e.filters.cohort_groups}),!!e.filters.show&&{show:e.filters.show}),!!e.filters.type&&{type:e.filters.type}),!!e.filters.channel_id&&{channel_id:e.filters.channel_id})}_getSelectorsObservable(){return this.searchSelectors().map(e=>this._store.pipe(Object(D.p)(e.call(this._qnaSelectors))))}}return e.\u0275fac=function(t){return new(t||e)(n.nc($.a),n.nc(D.d),n.nc(k.a),n.nc(x.a),n.nc(E.a),n.nc(O),n.nc(Z))},e.\u0275prov=n.Zb({token:e,factory:e.\u0275fac}),e})();var te=i("BPI6");let ie=(()=>{class e{constructor(e){this._actions=e,this.INITIAL_STATE={items:[],loading:!1,filters:{},pagination:{pageSize:20,length:0,pageIndex:0},sorting:{columnName:"id",dir:te.a.DESC},filterOptions:{cohorts:[],channels:[]},totalCount:0,hasMoreData:!1,selection:new Map,globalSelection:!1},this._qnaMapper=new G}actionStateChangers(){return[Object(D.n)(this._actions.search,this._actions.afterDeleteQuestion,e=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{loading:!0})})),Object(D.n)(this._actions.searchFailed,e=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{loading:!1})})),Object(D.n)(this._actions.updateFilters,(e,t)=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{filters:Object.assign({},t.filters),pagination:Object.assign(Object.assign({},e[this._sliceName].pagination),{pageIndex:0})})})),Object(D.n)(this._actions.resetFilters,e=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{filters:this.INITIAL_STATE.filters})})),Object(D.n)(this._actions.resetPagination,e=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{pagination:this.INITIAL_STATE.pagination})})),Object(D.n)(this._actions.updateSorting,(e,t)=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{sorting:t.sorting})})),Object(D.n)(this._actions.loadChannelsSuccess,(e,t)=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{filterOptions:Object.assign(Object.assign({},e[this._sliceName].filterOptions),{channels:t.response})})})),Object(D.n)(this._actions.loadCohortsSuccess,(e,t)=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{filterOptions:Object.assign(Object.assign({},e[this._sliceName].filterOptions),{cohorts:t.response})})})),Object(D.n)(this._actions.updatePagination,(e,t)=>{const i=t.pagination;return e[this._sliceName].pagination.pageSize!==i.pageSize&&(i.pageIndex=0),Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{pagination:Object.assign({},t.pagination)})})}),Object(D.n)(this._actions.searchSuccess,(e,t)=>{const i=0!==e[this._sliceName].pagination.pageIndex?e[this._sliceName].items.concat(this._qnaMapper.mapItemFromArrayDto(t.response.data.items)):this._qnaMapper.mapItemFromArrayDto(t.response.data.items),s={pageIndex:t.response.data.current_page-1,length:t.response.data.total_count,pageSize:t.response.data.current_page_size};return Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{items:i,loading:!1,pagination:s,totalCount:t.response.data.total_count,hasMoreData:t.response.data.has_more_data})})}),Object(D.n)(this._actions.loadRepliesSuccess,this._actions.loadAnswersSuccess,this._actions.afterDeleteAnswerSuccess,(e,t)=>{const i=this._setEntityReplies(Object.assign({},e[this._sliceName]),t);return Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),i)})}),Object(D.n)(this._actions.deleteQuestionSuccess,(e,t)=>{const i=this._filterOutDeletedEntities(Object.assign({},e[this._sliceName]),t);return Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),i)})}),Object(D.n)(this._actions.afterDeleteQuestionSuccess,(e,t)=>{const i=Object.assign({},e[this._sliceName]),s=i.items.concat(this._qnaMapper.mapItemFromArrayDto(t.response.data.items));return i.items=s.filter((e,t,i)=>i.findIndex(t=>t.id===e.id)===t),Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign(Object.assign({},e[this._sliceName]),i),{loading:!1})})}),Object(D.n)(this._actions.changeBestAnswer,(e,t)=>{const i=Object.assign({},e[this._sliceName]),{idQuestion:s,idAnswer:n,isBest:a}=t;return i.items=i.items.map(e=>e.id!==s?e:Object.assign(Object.assign(Object.assign({},e),e.id===s&&{bestAnswerIsLoading:!1}),{bestAnswerId:e.bestAnswerId===n?void 0:n,replies:e.replies.map(e=>Object.assign(Object.assign({},e),{isBestAnswer:e.id===n&&a}))})),Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),i)})})]}reducerFactory(e){return this._sliceName=e,Object(D.l)({[e]:this.INITIAL_STATE},...this.actionStateChangers())}_setEntityReplies(e,t){for(const i of Object.keys(t)){if(isNaN(Number(i)))continue;const s=e.items.findIndex(e=>e.id===Number(i));-1!==s&&e.items[s].setReplies(t[i].data.items,{page:t[i].data.current_page,has_more_data:t[i].data.has_more_data,total_count:t[i].data.total_count})}return e}_filterOutDeletedEntities(e,{isAnswer:t,id:i}){let s=[...e.items];if(!t){const t=s.length;return s=s.filter(e=>e.id!==i),t!==s.length&&e.pagination.length--,Object.assign(Object.assign({},e),{items:s})}const n=e=>{var t,s;if(!e.hasOwnProperty("replies"))return e;const a=e.replies.length;return e.replies=null===(t=null==e?void 0:e.replies)||void 0===t?void 0:t.filter(e=>e.id!==i),a!==e.replies.length&&(e.totalCountReplies--,e.hasReplies=0!==e.totalCountReplies),null===(s=e.replies)||void 0===s||s.map(n),e};return s=s.map(n),Object.assign(Object.assign({},e),{items:s})}}return e.\u0275fac=function(t){return new(t||e)(n.nc(O))},e.\u0275prov=n.Zb({token:e,factory:e.\u0275fac}),e})();var se=i("XNiG"),ne=i("1G5W"),ae=i("Xt1e"),oe=i("itXk"),re=i("SxV6");let ce=(()=>{class e{constructor(e,t,i,s,n,a){this._injector=e,this._docLayoutService=t,this._store=i,this._qnaActions=s,this._qnaSelectors=n,this._actions=a,this.dictionary=T,this.refreshView$=new se.a,this.sortingOptions=[],this.blankSlates={noContent:{illustrationName:"take-a-break",title:this.dictionary.blankSlates.noContent.title,description:this.dictionary.blankSlates.noContent.description},noResults:{illustrationName:"no-result-found",title:this.dictionary.blankSlates.noResults.title,description:this.dictionary.blankSlates.noResults.description}}}init(e,t){this._ngUnsubscribe=new se.a,this.widgetSettings=t,this._subscribeToViewChanges(),this._initData()}destroy(){this._ngUnsubscribe.next(),this._ngUnsubscribe.complete(),this.refreshView$.complete(),this._resetFiltersDefaults(),this._resetPagination()}onSearch(e){const t=Object.assign(Object.assign({},this._filters),{search:e});this._manageFilters(t)}onSortingChangedDataBrowser(e){this._resetPagination(),this.onSortingChanged({columnName:"id",dir:e})}onPageChanged(e){this._managePagination(e)}onFiltersChanged(e){var t,i;0===Object.keys(e).length&&(null===(t=this.channelListFilter)||void 0===t||t.control.reset(""),null===(i=this.cohortListFilter)||void 0===i||i.control.reset("")),this._manageFilters(e)}onFiltersChangeCustom(e,t,i){this._manageFilters(Object.assign(Object.assign({},this._filters),e));const s=()=>{var e,i;return null!==(i=null===(e=this._filters[t])||void 0===e?void 0:e.length)&&void 0!==i?i:0};i&&i.getActiveOptionsCount.toString()!==s.toString()&&(i.getActiveOptionsCount=s.bind(this))}onSortingChanged(e){this._manageSorting(e)}_subscribeToViewChanges(){this.refreshView$=new se.a,this._injector.get($.a).pipe(Object($.f)(this._qnaActions.loadRepliesSuccess,this._qnaActions.loadAnswersSuccess)).subscribe(()=>{this.refreshView$.next()}),this._actions.pipe(Object($.f)(ae.b)).subscribe(()=>{this.onPageChanged({length:0,pageIndex:0,pageSize:Number(this.widgetSettings.maxDisplayable)})})}_initData(){this._beforeInitData(),Object(oe.a)([this.pagination$]).pipe(Object(re.a)(),Object(ne.a)(this._ngUnsubscribe)).subscribe(([])=>{this._store.dispatch(this._qnaActions.search())})}_beforeInitData(){this._initSliceObservables(),this._initializeAdditionalDispatchers(),this._initializeWidgetFilters()}_initSliceObservables(){this.loading$=this._store.pipe(Object(D.p)(this._qnaSelectors.loading())),this.content$=this._store.pipe(Object(D.p)(this._qnaSelectors.items())),this.pagination$=this._store.pipe(Object(D.p)(this._qnaSelectors.pagination()),Object(b.a)(e=>this._pagination=e)),this.filters$=this._store.pipe(Object(D.p)(this._qnaSelectors.filters()),Object(b.a)(e=>this._filters=e)),this.filters$.pipe(Object(ne.a)(this._ngUnsubscribe)).subscribe(),this.sorting$=this._store.pipe(Object(D.p)(this._qnaSelectors.sorting())),this.noContent$=this._store.pipe(Object(D.p)(this._qnaSelectors.noContent())),this.noResults$=this._store.pipe(Object(D.p)(this._qnaSelectors.noResults())),this.sortingValue$=this.sorting$.pipe(Object(_.a)(e=>e.dir)),this.sortingLabel$=this.sorting$.pipe(Object(_.a)(e=>{var t,i;return null!==(i=null===(t=this.sortingOptions.find(t=>t.value===e.dir))||void 0===t?void 0:t.label)&&void 0!==i?i:""})),this.hasMoreData$=this._store.pipe(Object(D.p)(this._qnaSelectors.hasMoreData())),this.channelFilters$=this._store.pipe(Object(D.p)(this._qnaSelectors.channelFilters())),this.cohortFilters$=this._store.pipe(Object(D.p)(this._qnaSelectors.cohortFilters()))}_initializeAdditionalDispatchers(){this._store.dispatch(this._qnaActions.updatePagination({pagination:{pageIndex:0,length:0,pageSize:Number(this.widgetSettings.maxDisplayable)}})),this.onSortingChanged({columnName:"id",dir:this.widgetSettings.defaultSortBy}),!this.widgetSettings.showFiltersSelector||this.widgetSettings.selectedChannels||this.widgetSettings.assetId||this.widgetSettings.courseId||this._store.dispatch(this._qnaActions.loadChannels()),this.widgetSettings.selectedChannels&&!this.widgetSettings.assetId&&(this._defaultFilters={channel_id:Number(this.widgetSettings.selectedChannels)},this._store.dispatch(this._qnaActions.updateFilters({filters:this._defaultFilters}))),this.widgetSettings.assetId&&(this._defaultFilters={asset_id:Number(this.widgetSettings.assetId),type_question:3,with_voted:!0},this._store.dispatch(this._qnaActions.updateFilters({filters:this._defaultFilters}))),this.widgetSettings.courseId&&(this._defaultFilters={course_id:Number(this.widgetSettings.courseId),with_voted:!0},this._store.dispatch(this._qnaActions.updateFilters({filters:this._defaultFilters})));const e=this._injector.get(A.g);this.widgetSettings.showFiltersSelector&&e.isOn(A.f.TOGGLE_COHORT)&&(r.c.getInstance().isCurrentUserA(r.c.LEVEL_SUPERADMIN)||r.c.getInstance().isExpert())&&this._store.dispatch(this._qnaActions.loadCohorts(this.widgetSettings.cohortChannelsVisibility))}_initializeWidgetFilters(){this._injector.get(A.h).whenReady().pipe(Object(re.a)(e=>e)).subscribe(()=>{const e=new N(this._injector);this.widgetSettings.showSortBy&&(this.sortingOptions=e.initQASortOptions),this.widgetSettings.showFiltersSelector&&!this.widgetSettings.showQuestionTypeFilter&&(this.showFilter=e.initQAShowFilter,this.typeFilter=e.initQATypeFilter),this.widgetSettings.showQuestionTypeFilter&&(this.questionTypeFilter=e.initQAQuestionTypeFilter),this.channelFilters$.pipe(Object(w.a)(e=>e.length>0),Object(ne.a)(this._ngUnsubscribe)).subscribe(e=>this._addChannelsFilters(e)),this.cohortFilters$.pipe(Object(w.a)(e=>e.length>0),Object(ne.a)(this._ngUnsubscribe)).subscribe(e=>this._addCohortFilters(e))})}_manageFilters(e){this._store.dispatch(this._qnaActions.updateFilters({filters:Object.assign(Object.assign({},this._defaultFilters),e)}))}_addChannelsFilters(e){const t=new N(this._injector);this.channelListFilter=t.asyncChannelFilters}_addCohortFilters(e){var t;const i=new N(this._injector);this.cohortListFilter=i.asyncCohortGroupsFilter({channels:null!==(t=this.widgetSettings.cohortChannelsVisibility)&&void 0!==t?t:[]})}_managePagination(e){this._store.dispatch(this._qnaActions.updatePagination({pagination:e}))}_manageSorting(e){this._store.dispatch(this._qnaActions.updateSorting({sorting:e}))}_resetFiltersDefaults(){this._store.dispatch(this._qnaActions.resetFilters())}_resetPagination(){this._store.dispatch(this._qnaActions.resetPagination())}dispatchDeleteItem(e){this._store.dispatch(Object(ae.a)(e))}}return e.\u0275fac=function(t){return new(t||e)(n.nc(n.v),n.nc(x.a),n.nc(D.d),n.nc(O),n.nc(Z),n.nc($.a))},e.\u0275prov=n.Zb({token:e,factory:e.\u0275fac}),e})();var le=i("k+4P"),de=i("ofXK"),ue=i("u9ID"),he=i("nUpK"),pe=i("Y/hz"),me=i("rnoZ"),ge=i("LHv7");function be(e,t){if(1&e&&n.ec(0,"widget-title",7),2&e){const e=n.vc();n.Dc("widgetTitle",e.widgetTitle)}}const fe=function(){return[]};function ve(e,t){if(1&e&&(n.ec(0,"ui-data-browser-filter-single-selection",24),n.wc(1,"async")),2&e){const e=n.vc(3);let t=null;n.Dc("label",e.datasource.showFilter.label)("options",e.datasource.showFilter.options||n.Hc(6,fe))("key",e.datasource.showFilter.key)("value",(null==(t=n.xc(1,4,e.datasource.filters$))?null:t.show)||"")}}function _e(e,t){if(1&e&&n.ec(0,"ui-data-browser-filter-multiple-selection",25),2&e){const e=n.vc(3);n.Dc("label",e.datasource.typeFilter.label)("options",e.datasource.typeFilter.options||n.Hc(3,fe))("key",null==e.datasource.typeFilter?null:e.datasource.typeFilter.key)}}function we(e,t){if(1&e&&n.ec(0,"ui-data-browser-filter-single-selection",26),2&e){const e=n.vc(3);n.Dc("label",e.datasource.questionTypeFilter.label)("options",e.datasource.questionTypeFilter.options)("value",e.datasource.questionTypeFilter.value)("defaultValue",e.datasource.questionTypeFilter.defaultValue)("key",e.datasource.questionTypeFilter.key)}}function ye(e,t){if(1&e){const e=n.kc();n.jc(0,"ui-data-browser-filter",27),n.wc(1,"async"),n.jc(2,"doc-db-custom-filter",28),n.rc("filterChange",function(t){n.Uc(e);const i=n.vc(3);return i.datasource.onFiltersChangeCustom(t,i.datasource.channelListFilter.key)}),n.ic(),n.ic()}if(2&e){const e=n.vc(3);let t=null;n.Dc("value",(null==(t=n.xc(1,8,e.datasource.filters$))?null:t.channel_id)||"")("defaultValue","")("key",e.datasource.channelListFilter.key)("label",e.datasource.channelListFilter.label),n.Mb(2),n.Dc("endpoint",e.datasource.channelListFilter.endpoint)("type","single")("key",e.datasource.channelListFilter.key)("inputFormControl",e.datasource.channelListFilter.control)}}function Ce(e,t){if(1&e){const e=n.kc();n.jc(0,"ui-data-browser-filter",27,29),n.wc(2,"async"),n.jc(3,"doc-db-custom-filter",28),n.rc("filterChange",function(t){n.Uc(e);const i=n.Rc(1),s=n.vc(3);return s.datasource.onFiltersChangeCustom(t,s.datasource.cohortListFilter.key,i)}),n.ic(),n.ic()}if(2&e){const e=n.vc(3);let t=null;n.Dc("value",(null==(t=n.xc(2,8,e.datasource.filters$))?null:t.cohort_groups)||"")("defaultValue","")("key",e.datasource.cohortListFilter.key)("label",e.datasource.cohortListFilter.label),n.Mb(3),n.Dc("endpoint",e.datasource.cohortListFilter.endpoint)("type","multiple")("key",e.datasource.cohortListFilter.key)("inputFormControl",e.datasource.cohortListFilter.control)}}function Se(e,t){if(1&e){const e=n.kc();n.jc(0,"dcb-ui-data-browser-panel-filters",19),n.rc("filtersChange",function(t){return n.Uc(e),n.vc(2).datasource.onFiltersChanged(t)}),n.wc(1,"t"),n.wc(2,"t"),n.wc(3,"t"),n.wc(4,"t"),n.wc(5,"t"),n.dd(6,ve,2,7,"ui-data-browser-filter-single-selection",20),n.dd(7,_e,1,4,"ui-data-browser-filter-multiple-selection",21),n.dd(8,we,1,5,"ui-data-browser-filter-single-selection",22),n.dd(9,ye,3,10,"ui-data-browser-filter",23),n.dd(10,Ce,4,10,"ui-data-browser-filter",23),n.ic()}if(2&e){const e=n.vc(2);n.Dc("fullHeight",e.size>8)("clearFiltersLabel",n.xc(1,11,e.datasource.dictionary.uiDataBrowser.clearFiltersLabel))("closeFiltersLabel",n.xc(2,13,e.datasource.dictionary.uiDataBrowser.closeFiltersLabel))("activeFiltersCountLabelSingular",n.xc(3,15,e.datasource.dictionary.uiDataBrowser.activeFiltersCountLabelSingular))("activeFiltersCountLabelPlural",n.xc(4,17,e.datasource.dictionary.uiDataBrowser.activeFiltersCountLabelPlural))("filtersLabel",n.xc(5,19,e.datasource.dictionary.uiDataBrowser.filtersLabel)),n.Mb(6),n.Dc("ngIf",e.datasource.showFilter),n.Mb(1),n.Dc("ngIf",e.datasource.typeFilter),n.Mb(1),n.Dc("ngIf",e.datasource.questionTypeFilter),n.Mb(1),n.Dc("ngIf",e.datasource.channelListFilter),n.Mb(1),n.Dc("ngIf",e.datasource.cohortListFilter)}}function Te(e,t){if(1&e){const e=n.kc();n.jc(0,"ui-data-browser-control-search",30),n.rc("changeSearchText",function(t){return n.Uc(e),n.vc(2).datasource.onSearch(t)})("triggerSearch",function(t){return n.Uc(e),n.vc(2).datasource.onSearch(t)}),n.wc(1,"t"),n.wc(2,"t"),n.wc(3,"t"),n.wc(4,"t"),n.ic()}if(2&e){const e=n.vc(2);n.Dc("clearInputLabel",n.xc(1,4,e.datasource.dictionary.uiDataBrowser.clearSearchFiltersLabel))("searchLabel",n.xc(2,6,e.datasource.dictionary.uiDataBrowser.search))("searchPlaceholder",n.xc(3,8,e.datasource.dictionary.uiDataBrowser.searchPlaceholder))("backLabel",n.xc(4,10,e.datasource.dictionary.uiDataBrowser.backLabel))}}function ke(e,t){1&e&&n.fc(0)}const Ie=function(e){return{totalCount:e}};function xe(e,t){if(1&e&&(n.jc(0,"ui-data-browser-control"),n.jc(1,"div",31),n.dd(2,ke,1,0,"ng-container",32),n.ic(),n.ic()),2&e){const e=t.ngIf;n.vc(2);const i=n.Rc(6);n.Mb(2),n.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",n.Ic(2,Ie,e))}}const De=function(e){return{activeSortingOption:e}};function Oe(e,t){if(1&e){const e=n.kc();n.jc(0,"ui-data-browser-control-dropdown",33),n.rc("selectOption",function(t){return n.Uc(e),n.vc(2).datasource.onSortingChangedDataBrowser(t)}),n.wc(1,"async"),n.wc(2,"t"),n.wc(3,"t"),n.wc(4,"async"),n.ic()}if(2&e){const e=n.vc(2);n.Dc("defaultValue",n.xc(1,4,e.datasource.sortingValue$))("options",e.datasource.sortingOptions)("triggerText",n.xc(2,6,e.datasource.dictionary.sortBy))("ariaLabel",n.yc(3,8,"Sort by: {activeSortingOption}",n.Ic(13,De,n.xc(4,11,e.datasource.sortingLabel$))))}}function Ee(e,t){1&e&&n.fc(0)}function Pe(e,t){if(1&e&&(n.jc(0,"div",34),n.dd(1,Ee,1,0,"ng-container",32),n.ic()),2&e){const e=t.ngIf;n.vc(2);const i=n.Rc(6);n.Mb(1),n.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",n.Ic(2,Ie,e))}}const Me=function(e){return[e]};function Ae(e,t){if(1&e&&(n.jc(0,"div",39),n.jc(1,"span",40),n.fd(2),n.wc(3,"t"),n.ic(),n.jc(4,"a",41),n.fd(5),n.ic(),n.ic()),2&e){const e=n.vc(2).$implicit,t=n.vc(3);n.Mb(2),n.hd("",n.xc(3,3,t.datasource.dictionary.relatedTo)," :"),n.Mb(2),n.Dc("routerLink",n.Ic(5,Me,e.relatedItem.path)),n.Mb(1),n.gd(null==e||null==e.relatedItem?null:e.relatedItem.title)}}function Le(e,t){1&e&&n.fc(0)}const je=function(e){return{question:e}};function Fe(e,t){if(1&e&&(n.hc(0),n.dd(1,Le,1,0,"ng-container",32),n.gc()),2&e){const e=n.vc(2).$implicit;n.vc(3);const t=n.Rc(8);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Ic(2,je,e))}}function Re(e,t){1&e&&n.fc(0)}const Ne=function(e,t){return{question:e,isEdit:t}};function Ue(e,t){if(1&e&&(n.hc(0),n.dd(1,Re,1,0,"ng-container",32),n.gc()),2&e){const e=n.vc(2).$implicit;n.vc(3);const t=n.Rc(10);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Jc(2,Ne,e,e.showEditBox))}}function qe(e,t){1&e&&(n.jc(0,"dcb-ui-thread-leaf"),n.jc(1,"div",42),n.ec(2,"ui-spinner",43),n.ic(),n.ic())}function ze(e,t){1&e&&n.fc(0)}function Ve(e,t){if(1&e&&(n.hc(0),n.dd(1,ze,1,0,"ng-container",32),n.gc()),2&e){const e=n.vc(3).$implicit;n.vc(6);const t=n.Rc(8);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Ic(2,je,e))}}function Be(e,t){1&e&&n.fc(0)}function Ge(e,t){if(1&e&&(n.hc(0),n.dd(1,Be,1,0,"ng-container",32),n.gc()),2&e){const e=n.vc(3).$implicit;n.vc(6);const t=n.Rc(10);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Jc(2,Ne,e,e.showEditBox))}}function $e(e,t){1&e&&n.fc(0)}function He(e,t){if(1&e&&(n.hc(0),n.dd(1,$e,1,0,"ng-container",32),n.gc()),2&e){const e=n.vc(2).$implicit;n.vc(9);const t=n.Rc(8);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Ic(2,je,e))}}function Ye(e,t){1&e&&n.fc(0)}function We(e,t){if(1&e&&(n.hc(0),n.dd(1,Ye,1,0,"ng-container",32),n.gc()),2&e){const e=n.vc(2).$implicit;n.vc(9);const t=n.Rc(10);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Jc(2,Ne,e,e.showEditBox))}}function Qe(e,t){if(1&e&&(n.hc(0),n.jc(1,"dcb-ui-thread-leaf"),n.dd(2,He,2,4,"ng-container",12),n.dd(3,We,2,5,"ng-container",12),n.ic(),n.gc()),2&e){const e=n.vc().$implicit;n.Mb(2),n.Dc("ngIf",!e.showEditBox),n.Mb(1),n.Dc("ngIf",e.showReplyBox||e.showEditBox)}}function Ke(e,t){if(1&e&&(n.hc(0),n.dd(1,Qe,4,2,"ng-container",12),n.gc()),2&e){const e=t.$implicit,i=t.index,s=n.vc(3).$implicit;n.Mb(1),n.Dc("ngIf",!e.hidden&&s.visibleReplies>=i+1)}}const Xe=function(e){return{count:e}};function Je(e,t){if(1&e){const e=n.kc();n.jc(0,"dcb-ui-thread-leaf"),n.jc(1,"ui-button-link",45),n.rc("trigger",function(){n.Uc(e);const t=n.vc(3).$implicit;return n.vc(6).showMoreReplies(t)}),n.fd(2),n.wc(3,"t"),n.ic(),n.ic()}if(2&e){const e=n.vc(3).$implicit,t=n.vc(3).$implicit,i=n.vc(3);n.Mb(2),n.hd(" ",n.yc(3,1,i.datasource.dictionary.showMore[t.type],n.Ic(4,Xe,e.showMoreCount))," ")}}function Ze(e,t){if(1&e&&(n.jc(0,"dcb-ui-thread-leaf"),n.jc(1,"dcb-ui-thread"),n.jc(2,"dcb-ui-thread-root"),n.dd(3,Ve,2,4,"ng-container",12),n.dd(4,Ge,2,5,"ng-container",12),n.ic(),n.dd(5,Ke,2,1,"ng-container",44),n.dd(6,Je,4,6,"dcb-ui-thread-leaf",12),n.ic(),n.ic()),2&e){const e=n.vc(2).$implicit,t=n.vc(6);n.Mb(3),n.Dc("ngIf",!e.showEditBox),n.Mb(1),n.Dc("ngIf",e.showReplyBox||e.showEditBox),n.Mb(1),n.Dc("ngForOf",e.replies)("ngForTrackBy",t.trackByFn),n.Mb(1),n.Dc("ngIf",e.showMoreCount>0)}}function et(e,t){1&e&&n.fc(0)}function tt(e,t){if(1&e&&(n.hc(0),n.dd(1,et,1,0,"ng-container",32),n.gc()),2&e){const e=n.vc(3).$implicit;n.vc(6);const t=n.Rc(8);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Ic(2,je,e))}}function it(e,t){1&e&&n.fc(0)}function st(e,t){if(1&e&&(n.hc(0),n.dd(1,it,1,0,"ng-container",32),n.gc()),2&e){const e=n.vc(3).$implicit;n.vc(6);const t=n.Rc(10);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Jc(2,Ne,e,e.showEditBox))}}function nt(e,t){if(1&e&&(n.jc(0,"dcb-ui-thread-leaf"),n.dd(1,tt,2,4,"ng-container",12),n.dd(2,st,2,5,"ng-container",12),n.ic()),2&e){const e=n.vc(2).$implicit;n.Mb(1),n.Dc("ngIf",!e.showEditBox),n.Mb(1),n.Dc("ngIf",e.showReplyBox||e.showEditBox)}}function at(e,t){if(1&e&&(n.hc(0),n.dd(1,Ze,7,5,"dcb-ui-thread-leaf",12),n.dd(2,nt,3,2,"dcb-ui-thread-leaf",12),n.gc()),2&e){const e=n.vc().$implicit;n.Mb(1),n.Dc("ngIf",e.replies.length>0),n.Mb(1),n.Dc("ngIf",0===e.replies.length)}}function ot(e,t){if(1&e&&(n.hc(0),n.dd(1,at,3,2,"ng-container",12),n.gc()),2&e){const e=t.$implicit,i=t.index,s=n.vc(3).$implicit;n.Mb(1),n.Dc("ngIf",!e.hidden&&s.visibleReplies>=i+1)}}function rt(e,t){if(1&e){const e=n.kc();n.jc(0,"dcb-ui-thread-leaf"),n.jc(1,"ui-button-link",45),n.rc("trigger",function(){n.Uc(e);const t=n.vc(3).$implicit;return n.vc(3).showMoreReplies(t)}),n.fd(2),n.wc(3,"t"),n.ic(),n.ic()}if(2&e){const e=n.vc(3).$implicit,t=n.vc(3);n.Mb(2),n.hd(" ",n.yc(3,1,t.datasource.dictionary.showMore[e.type],n.Ic(4,Xe,e.showMoreCount))," ")}}function ct(e,t){if(1&e&&(n.hc(0),n.dd(1,ot,2,1,"ng-container",44),n.dd(2,rt,4,6,"dcb-ui-thread-leaf",12),n.gc()),2&e){const e=n.vc(2).$implicit,t=n.vc(3);n.Mb(1),n.Dc("ngForOf",e.replies)("ngForTrackBy",t.trackByFn),n.Mb(1),n.Dc("ngIf",e.visibleReplies<e.totalCountReplies)}}function lt(e,t){if(1&e&&(n.jc(0,"dcb-ui-thread"),n.jc(1,"dcb-ui-thread-root"),n.dd(2,Ae,6,7,"div",38),n.dd(3,Fe,2,4,"ng-container",12),n.dd(4,Ue,2,5,"ng-container",12),n.ic(),n.dd(5,qe,3,0,"dcb-ui-thread-leaf",12),n.dd(6,ct,3,3,"ng-container",12),n.ic()),2&e){const e=n.vc().$implicit,t=n.vc(3);n.Mb(2),n.Dc("ngIf",!t.data.settings.isInlineView&&(null==e||null==e.relatedItem?null:e.relatedItem.title)),n.Mb(1),n.Dc("ngIf",!e.showEditBox),n.Mb(1),n.Dc("ngIf",e.showReplyBox||e.showEditBox),n.Mb(1),n.Dc("ngIf",(null==e?null:e.hasReplies)&&0===(null==e||null==e.replies?null:e.replies.length)),n.Mb(1),n.Dc("ngIf",(null==e||null==e.replies?null:e.replies.length)>0)}}function dt(e,t){if(1&e&&(n.jc(0,"div",37),n.dd(1,lt,7,5,"dcb-ui-thread",12),n.ic()),2&e){const e=t.$implicit;n.Mb(1),n.Dc("ngIf",!e.hidden)}}const ut=function(e,t,i){return{"has-header":e,"has-content":t,"inline-view":i}};function ht(e,t){if(1&e&&(n.jc(0,"div",35),n.wc(1,"async"),n.dd(2,dt,2,1,"div",36),n.wc(3,"async"),n.ic()),2&e){const e=n.vc(2);let t=null;n.Dc("ngClass",n.Kc(7,ut,e.isHeaderVisible,null==(t=n.xc(1,3,e.datasource.content$))?null:t.length,e.data.settings.isInlineView)),n.Mb(2),n.Dc("ngForOf",n.xc(3,5,e.datasource.content$))("ngForTrackBy",e.trackByFn)}}function pt(e,t){if(1&e&&(n.ec(0,"ui-blank-slate",46),n.wc(1,"t"),n.wc(2,"t")),2&e){const e=n.vc(2);n.Dc("title",n.xc(1,3,e.datasource.blankSlates.noResults.title))("description",n.xc(2,5,e.datasource.blankSlates.noResults.description))("illustrationName",e.datasource.blankSlates.noResults.illustrationName)}}function mt(e,t){1&e&&(n.jc(0,"div",47),n.ec(1,"ui-spinner",48),n.ic()),2&e&&(n.Mb(1),n.Dc("size","md"))}function gt(e,t){if(1&e){const e=n.kc();n.jc(0,"ui-button-text",53),n.rc("trigger",function(){return n.Uc(e),n.vc(3).askTheExpert("open")}),n.wc(1,"t"),n.wc(2,"t"),n.ic()}if(2&e){const e=n.vc(3);n.Dc("label",n.xc(1,5,e.datasource.dictionary.askTheExpert))("ariaLabel",n.xc(2,7,e.datasource.dictionary.askTheExpert))("iconName","asktheexpert")("color","neutral")("iconColor","neutral")}}function bt(e,t){if(1&e){const e=n.kc();n.jc(0,"ui-button-text",54),n.rc("trigger",function(){return n.Uc(e),n.vc(3).onLoadMore()}),n.wc(1,"t"),n.wc(2,"t"),n.ic()}if(2&e){const e=n.vc(3);n.Dc("color","neutral")("iconColor","neutral")("label",n.xc(1,4,e.datasource.dictionary.loadMore))("ariaLabel",n.xc(2,6,e.datasource.dictionary.loadMore))}}function ft(e,t){if(1&e){const e=n.kc();n.jc(0,"ui-button-text",54),n.rc("trigger",function(){return n.Uc(e),n.vc(3).widgetService.showAllQuestions()}),n.wc(1,"t"),n.wc(2,"t"),n.ic()}if(2&e){const e=n.vc(3);n.Dc("color","neutral")("iconColor","neutral")("label",n.xc(1,4,e.datasource.dictionary.viewQALabel))("ariaLabel",n.xc(2,6,e.datasource.dictionary.viewQALabel))}}function vt(e,t){if(1&e&&(n.jc(0,"div",49),n.jc(1,"span",50),n.dd(2,gt,3,9,"ui-button-text",51),n.ic(),n.dd(3,bt,3,8,"ui-button-text",52),n.wc(4,"async"),n.wc(5,"async"),n.dd(6,ft,3,8,"ui-button-text",52),n.ic()),2&e){const e=n.vc(2);n.Mb(2),n.Dc("ngIf",!!e.data.settings.selectedChannels),n.Mb(1),n.Dc("ngIf",e.data.settings.showLoadMoreLink&&!1===n.xc(4,3,e.datasource.noResults$)&&n.xc(5,5,e.datasource.hasMoreData$)),n.Mb(3),n.Dc("ngIf",e.data.settings.showViewAllLink)}}const _t=function(e){return{"panel-opened":e}};function wt(e,t){if(1&e&&(n.jc(0,"dcb-ui-data-browser",8,9),n.dd(2,Se,11,21,"dcb-ui-data-browser-panel-filters",10),n.dd(3,Te,5,12,"ui-data-browser-control-search",11),n.dd(4,xe,3,4,"ui-data-browser-control",12),n.wc(5,"async"),n.dd(6,Oe,5,15,"ui-data-browser-control-dropdown",13),n.jc(7,"dcb-ui-data-browser-content",14),n.dd(8,Pe,2,4,"div",15),n.wc(9,"async"),n.dd(10,ht,4,11,"div",16),n.wc(11,"async"),n.dd(12,pt,3,7,"ui-blank-slate",2),n.wc(13,"async"),n.dd(14,mt,2,1,"div",17),n.wc(15,"async"),n.dd(16,vt,7,7,"div",18),n.wc(17,"async"),n.ic(),n.ic()),2&e){const e=n.Rc(1),t=n.vc();let i=null,s=null;n.Dc("sticky",!1)("controlsShrinkBreakpoint",t.size>=8?"sm":"md"),n.Mb(2),n.Dc("ngIf",t.data.settings.showFiltersSelector),n.Mb(1),n.Dc("ngIf",t.data.settings.showSearchBar),n.Mb(1),n.Dc("ngIf",t.isHeaderVisible&&t.size<8&&(null==(i=n.xc(5,12,t.datasource.pagination$))?null:i.length)),n.Mb(2),n.Dc("ngIf",t.data.settings.showSortBy),n.Mb(1),n.Dc("ngClass",n.Ic(24,_t,(null==e?null:e.panelsOpen)&&t.size>8)),n.Mb(1),n.Dc("ngIf",t.isHeaderVisible&&t.size>=8&&(null==(s=n.xc(9,14,t.datasource.pagination$))?null:s.length)),n.Mb(2),n.Dc("ngIf",!1===n.xc(11,16,t.datasource.noResults$)),n.Mb(2),n.Dc("ngIf",n.xc(13,18,t.datasource.noResults$)),n.Mb(2),n.Dc("ngIf",n.xc(15,20,t.datasource.loading$)),n.Mb(2),n.Dc("ngIf",t.isFooterVisible&&!1===n.xc(17,22,t.datasource.noContent$))}}function yt(e,t){if(1&e&&(n.ec(0,"ui-blank-slate",46),n.wc(1,"t"),n.wc(2,"t")),2&e){const e=n.vc();n.Dc("title",n.xc(1,3,e.datasource.blankSlates.noContent.title))("description",n.xc(2,5,e.datasource.blankSlates.noContent.description))("illustrationName",e.datasource.blankSlates.noContent.illustrationName)}}const Ct=function(e){return{itemsCount:e}};function St(e,t){if(1&e&&(n.hc(0),n.fd(1),n.wc(2,"t"),n.gc()),2&e){const e=n.vc().totalCount,t=n.vc();n.Mb(1),n.hd(" ",n.yc(2,1,t.datasource.dictionary.totalElements.singular,n.Ic(4,Ct,e))," ")}}function Tt(e,t){if(1&e&&(n.fd(0),n.wc(1,"t")),2&e){const e=n.vc().totalCount,t=n.vc();n.hd(" ",n.yc(1,1,t.datasource.dictionary.totalElements.plural,n.Ic(4,Ct,e))," ")}}function kt(e,t){if(1&e&&(n.jc(0,"div",55),n.dd(1,St,3,6,"ng-container",56),n.dd(2,Tt,2,6,"ng-template",null,57,n.ed),n.ic()),2&e){const e=t.totalCount,i=n.Rc(3);n.Mb(1),n.Dc("ngIf",1===e)("ngIfElse",i)}}function It(e,t){if(1&e&&(n.jc(0,"ui-button-dropdown-option",61),n.fd(1),n.wc(2,"t"),n.ic()),2&e){const e=t.$implicit;n.Dc("value",e.value)("color",e.color),n.Mb(1),n.hd(" ",n.xc(2,3,e.label)," ")}}function xt(e,t){if(1&e){const e=n.kc();n.jc(0,"ui-message",58),n.rc("like",function(){n.Uc(e);const i=t.question;return n.vc().rateEntity(i,"like")})("dislike",function(){n.Uc(e);const i=t.question;return n.vc().rateEntity(i,"dislike")})("reply",function(){n.Uc(e);const i=t.question;return n.vc().replyAction(i)})("bestReply",function(){n.Uc(e);const i=t.question;return n.vc().markAsBestAnswer(i)}),n.wc(1,"discoverMention"),n.wc(2,"t"),n.wc(3,"t"),n.wc(4,"t"),n.wc(5,"t"),n.jc(6,"dcb-ui-message-aside"),n.jc(7,"ui-button-dropdown",59),n.rc("selectOption",function(i){n.Uc(e);const s=t.question;return n.vc().questionActionHandler(i,s)}),n.dd(8,It,3,5,"ui-button-dropdown-option",60),n.ic(),n.ic(),n.ic()}if(2&e){const e=t.question,i=n.vc();n.Dc("message",n.yc(1,20,e.content,e.mentions))("title",e.owner.fullName)("titleActionText",e.isReply?n.xc(2,23,i.datasource.dictionary.replyLabel[e.type]):n.xc(3,25,i.datasource.dictionary.questionLabel[e.type]))("avatarIcon",e.owner.shortName.length?"":"user")("avatarImageUrl",e.owner.avatar)("avatarText",e.owner.shortName)("dislikeActive",2===(null==e||null==e.votedModel?null:e.votedModel.type))("likeActive",1===(null==e||null==e.votedModel?null:e.votedModel.type))("likes",e.upVotes)("dislikes",e.downVotes)("time",e.createdAt)("showBestReplyButton",e.showBestAnswerBtn||e.isBestAnswer)("bestReplyActive",e.isBestAnswer)("bestReplyLabel",n.xc(4,27,i.datasource.dictionary.bestAnswer))("showReplyButton",e.showReplyOption)("replyButtonLabel",n.xc(5,29,i.datasource.dictionary.replyButton[e.type]))("showDislikeButton",e.isReply||2===e.type)("showLikeButton",e.isReply||2===e.type),n.Mb(7),n.Dc("selectable",!1),n.Mb(1),n.Dc("ngForOf",e.actions)}}function Dt(e,t){if(1&e&&n.ec(0,"rich-textarea",70),2&e){const e=n.vc().question,t=n.vc();n.Dc("inputFormControl",t.contentFormControl)("tributeCollection",e.relatedItem.kind===t.relatedKind.COURSE||null==t.discoverMention.config?null:t.discoverMention.config.options)}}function Ot(e,t){if(1&e&&(n.jc(0,"div",71),n.fd(1),n.wc(2,"t"),n.ic()),2&e){const e=n.vc(2);n.Mb(1),n.hd(" ",n.xc(2,1,null==e.discoverMention.config?null:e.discoverMention.config.label)," ")}}function Et(e,t){if(1&e){const e=n.kc();n.jc(0,"ui-button-text",72,73),n.rc("click",function(){n.Uc(e);const t=n.Rc(1),i=n.vc().question;return n.vc().postNewEntityReply(i,t)}),n.wc(2,"t"),n.ic()}if(2&e){const e=n.vc(2);n.Dc("label",n.xc(2,2,e.datasource.dictionary.confirmReply))("color","accent")}}function Pt(e,t){if(1&e){const e=n.kc();n.hc(0),n.jc(1,"ui-button-text",72),n.rc("click",function(){n.Uc(e);const t=n.vc().question;return n.vc().cancelEdit(t)}),n.wc(2,"t"),n.ic(),n.jc(3,"ui-button-text",72,74),n.rc("click",function(){n.Uc(e);const t=n.Rc(4),i=n.vc().question;return n.vc().editEntity(i,t)}),n.wc(5,"t"),n.ic(),n.gc()}if(2&e){const e=n.vc(2);n.Mb(1),n.Dc("label",n.xc(2,4,e.datasource.dictionary.cancelEdit))("color","neutral"),n.Mb(2),n.Dc("label",n.xc(5,6,e.datasource.dictionary.confirmEdit))("color","accent")}}const Mt=function(e,t,i,s){return{"reply-textarea-container":e,"edit-textarea-container":t,"has-replies":i,"is-root":s}};function At(e,t){if(1&e&&(n.jc(0,"div",62),n.jc(1,"div",63),n.ec(2,"ui-avatar",64),n.jc(3,"span",65),n.fd(4),n.ic(),n.ic(),n.dd(5,Dt,1,2,"rich-textarea",66),n.jc(6,"div",67),n.dd(7,Ot,3,3,"div",68),n.dd(8,Et,3,4,"ui-button-text",69),n.dd(9,Pt,6,8,"ng-container",12),n.ic(),n.ic()),2&e){const e=t.question,i=t.isEdit,s=n.vc();n.Dc("ngClass",n.Lc(10,Mt,!i,i,e.totalCountReplies>0,!e.parentID&&!e.directParentId)),n.Mb(2),n.Dc("size","sm")("imageUrl",s.loggedUserInformation.avatarUrl)("text",s.loggedUserInformation.initials)("iconName",null!=s.loggedUserInformation&&s.loggedUserInformation.initials.length?"":"user"),n.Mb(2),n.gd(s.loggedUserInformation.userName),n.Mb(1),n.Dc("ngIf",s.discoverMention.isConfigured),n.Mb(2),n.Dc("ngIf",!(null==s.discoverMention.config||!s.discoverMention.config.options)&&e.relatedItem.kind!==s.relatedKind.COURSE),n.Mb(1),n.Dc("ngIf",e.showReplyBox),n.Mb(1),n.Dc("ngIf",e.showEditBox)}}function Lt(e,t){if(1&e){const e=n.kc();n.jc(0,"doc-ask-expert-panel",75),n.rc("closed$",function(t){return n.Uc(e),n.vc().askTheExpert("close",t)}),n.ic()}if(2&e){const e=n.vc();n.Dc("channelId",e.data.settings.selectedChannels)("isPageComponent",!1)}}let jt=(()=>{let e=class extends u.a{constructor(e,t,i,s,o,r,c,l,d,u,h,p,m){super(),this.discoverMention=e,this.datasource=t,this.widgetService=i,this._scrollMonitor=s,this._element=o,this._ref=r,this._docLayoutService=c,this._reducerManager=l,this._effectsSources=d,this._qnaReducer=u,this._qnaSelectors=h,this._qnaEffects=p,this._qnaActions=m,this.size=12,this.itemChanges=new n.q,this.noResults=!1,this.contentFormControl=new a.e,this.showAskTheExpertPanel=!1,this.relatedKind=g.a,this.ngUnsubscribe=new se.a}ngOnInit(){this._setWidgetTitle(),this._initializeSettings(),this._initializeInfiniteScroll(),this.datasource.refreshView$.subscribe(()=>{this._ref.markForCheck()}),this.datasource.noResults$.pipe(Object(ne.a)(this.ngUnsubscribe)).subscribe(e=>this.noResults=e);const e=this.data.settings.selectedChannels;this.discoverMention.setConfig(Object.assign({},!!e&&{channel_id:e}))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.data.settings.isLazyLoading&&this._scrollMonitor.unregisterWidget(this._element),this.datasource.destroy()}trackByFn(e,t){return t.id}get loggedUserInformation(){return{userName:r.c.getInstance().getFullName(!0),userEmail:r.c.getInstance().email,avatarUrl:r.c.getInstance().avatar_url,initials:r.c.getInstance().user_initials}}get isFooterVisible(){return this.data.settings.showViewAllLink||!this.noResults&&this.data.settings.showLoadMoreLink||!!this.data.settings.selectedChannels}get isHeaderVisible(){const{settings:e}=this.data;return e.showFiltersSelector||e.showSearchBar||e.showSortBy}questionActionHandler(e,t){switch(e){case"follow_question":case"unfollow_question":t.isFollowing="follow_question"===e;const i=t.isFollowing?"follow":"unFollow";t.setActions(),this.widgetService[i](t.id).subscribe();break;case"edit_comment":case"edit_answer":case"edit_question":this._hideOpenedTextAreas();let s=(new c.a).transform(t.content,t.mentions||[]);s=s.replace(new RegExp(/\\"/,"gm"),'"').replace(new RegExp(/&quot;/,"gm"),"'"),this.contentFormControl.setValue(s),t.showEditBox=!0;break;case"delete_comment":case"delete_question":case"delete_answer":this.widgetService.delete(t).then(e=>{e.subscribe(e=>{!t.isBestAnswer&&t.isReply||(this.itemChanges.emit(),this.datasource.dispatchDeleteItem(e.id))})})}}rateEntity(e,t){var i;const s="like"===t?g.c.LIKE:g.c.DISLIKE;e.isMine||(null===(i=e.votedModel)||void 0===i?void 0:i.type)===s&&e.votedModel.created||this.widgetService.rate(e.id,`${e.type===g.b.QUESTION||e.isReply?"answer":"comment"}${s===g.c.LIKE?"Like":"Dislike"}`).subscribe(t=>{e.downVotes=t.dislikes,e.upVotes=t.likes,e.votedModel={type:s,created:(new Date).toISOString()},this.datasource.refreshView$.next()})}markAsBestAnswer(e){this.datasource.content$.pipe(Object(y.a)(1)).subscribe(t=>{const i=t.find(t=>t.id===e.parentID);i&&i.isMine&&this.widgetService.markAsBest(e,null==i?void 0:i.bestAnswerId).subscribe(()=>{this.datasource.refreshView$.next()})})}showMoreReplies(e){const t=e.replies.filter(e=>!e.hidden).length;e.visibleReplies>t?e.visibleReplies=t:(e.visibleReplies+=e.SHOW_MORE_STEP,e.visibleReplies>e.totalCountReplies&&(e.visibleReplies=e.totalCountReplies),this.datasource.refreshView$.next(),e.type===g.b.QUESTION&&e.hasMoreData&&this.widgetService.loadMoreAnswers({id:e.id,page:e.repliesPage+1}))}replyAction(e){const t=e.showReplyBox;this.contentFormControl.setValue(""),this._hideOpenedTextAreas(),e.showReplyBox=!t}postNewEntityReply(e,t){const i=this._getFormControlContentMessage();!i||i.length<=3||t.loading||(t.loading=!0,this.widgetService.reply(e,this.discoverMention.convertMessageForSaving(i)).subscribe(i=>{this.contentFormControl.setValue(""),t.loading=!1,e.showReplyBox=!1,e.setNewReply(i),this.datasource.refreshView$.next()},e=>t.loading=!1))}cancelEdit(e){this.contentFormControl.setValue(""),e.showEditBox=!1}editEntity(e,t){const i=this._getFormControlContentMessage();!i||i.length<=3||t.loading||(t.loading=!0,this.widgetService.edit(e,this.discoverMention.convertMessageForSaving(i)).subscribe(()=>{this.contentFormControl.setValue(""),t.loading=!1,e.content=i,e.showEditBox=!1,this.datasource.refreshView$.next()},e=>t.loading=!1))}onLoadMore(){this.datasource.loading$.pipe(Object(y.a)(1),Object(w.a)(e=>!e),Object(f.a)(()=>this.datasource.hasMoreData$.pipe(Object(y.a)(1),Object(w.a)(e=>!!e))),Object(f.a)(()=>this.datasource.pagination$.pipe(Object(y.a)(1)))).subscribe(e=>{this.datasource.onPageChanged({length:e.length,pageSize:e.pageSize,pageIndex:e.pageIndex+1})})}askTheExpert(e,t){"open"!==e?(this.showAskTheExpertPanel=!1,this.datasource.onPageChanged({length:0,pageIndex:0,pageSize:Number(this.data.settings.maxDisplayable)}),void 0!==t&&t()):this.showAskTheExpertPanel=!0}_setWidgetTitle(){const e=r.c.getInstance().language,t=r.b.getInstance().default_language;this.setWidgetTitle(e,t)}_initializeSettings(){this.data.id&&""!==this.data.id||(this.data.id=Object(o.m)()),this._initializeWidgetStore(),this.data.settings.showLoadMoreLink||this.data.settings.isLazyLoading||(this.data.settings.showSortBy=!1,this.data.settings.showFiltersSelector=!1,this.data.settings.showSearchBar=!1),this.datasource.init(this.data.id,this.data.settings),this.widgetService.checkDeleteConfirmationModalSetting()}_initializeWidgetStore(){this._qnaSelectors.sliceName=`qna_widget__${this.data.id}`,this._qnaSelectors.featureSelector=Object(D.k)(this._qnaSelectors.sliceName),this._qnaActions.widgetId=this.data.id,this._qnaActions.initializeActions(),this._qnaEffects.initializeEffects(),this._reducerManager.addReducer(this._qnaSelectors.sliceName,this._qnaReducer.reducerFactory(this._qnaSelectors.sliceName)),this._effectsSources.addEffects(this._qnaEffects)}_hideOpenedTextAreas(e){const t=e=>{for(const t of e)t.showEditBox&&(t.showEditBox=!1),t.showReplyBox&&(t.showReplyBox=!1),t.replies.length&&this._hideOpenedTextAreas(t.replies)};e?t(e):this.datasource.content$.pipe(Object(y.a)(1)).subscribe(e=>{t(e)})}_getFormControlContentMessage(){const e=this.contentFormControl.value||"",t=document.createElement("textarea");return t.innerHTML=e,t.value}_initializeInfiniteScroll(){this.data.settings.isLazyLoading&&this._scrollMonitor.registerWidget(this._element).pipe(Object(w.a)(e=>!e.isPageScrollable||e.isInViewport&&e.isBottomCloseEnoughToTheViewport),Object(ne.a)(this.ngUnsubscribe)).subscribe(e=>Object(s.a)(this,void 0,void 0,function*(){this.onLoadMore(),this.datasource.refreshView$.next()}))}};return e.\u0275fac=function(t){return new(t||e)(n.dc(le.a),n.dc(ce),n.dc(P),n.dc(d.a),n.dc(n.o),n.dc(n.i),n.dc(x.a),n.dc(D.b),n.dc($.c),n.dc(ie),n.dc(Z),n.dc(ee),n.dc(O))},e.\u0275cmp=n.Xb({type:e,selectors:[["doc-questions-and-answers-widget"]],inputs:{data:"data",size:"size"},outputs:{itemChanges:"itemChanges"},features:[n.Lb([d.a,ce,P,Z,ie,O,ee]),n.Jb],decls:12,vars:8,consts:[[3,"widgetTitle",4,"ngIf"],["class","question-and-answers-list__data-browser page-list__dcb-ui-data-browser",3,"sticky","controlsShrinkBreakpoint",4,"ngIf"],["class","page-list__blank-slate question-and-answers-list__blank-slate",3,"title","description","illustrationName",4,"ngIf"],["itemsCountTemplate",""],["messageTemplate",""],["textarea",""],[3,"channelId","isPageComponent","closed$",4,"ngIf"],[3,"widgetTitle"],[1,"question-and-answers-list__data-browser","page-list__dcb-ui-data-browser",3,"sticky","controlsShrinkBreakpoint"],["uiDataBrowserComponent",""],[3,"fullHeight","clearFiltersLabel","closeFiltersLabel","activeFiltersCountLabelSingular","activeFiltersCountLabelPlural","filtersLabel","filtersChange",4,"ngIf"],[3,"clearInputLabel","searchLabel","searchPlaceholder","backLabel","changeSearchText","triggerSearch",4,"ngIf"],[4,"ngIf"],["triggerIcon","sort-top","position","end",3,"defaultValue","options","triggerText","ariaLabel","selectOption",4,"ngIf"],[1,"page-list__dcb-ui-data-browser-content--widget",3,"ngClass"],["class","discussion-thread__thread-items-content",4,"ngIf"],["class","discussion-thread__thread-content",3,"ngClass",4,"ngIf"],["class","loading-container-flex",4,"ngIf"],["class","questions-and-answers-footer wrapper-shadow ui-background-surface",4,"ngIf"],[3,"fullHeight","clearFiltersLabel","closeFiltersLabel","activeFiltersCountLabelSingular","activeFiltersCountLabelPlural","filtersLabel","filtersChange"],[3,"label","options","key","value",4,"ngIf"],[3,"label","options","key",4,"ngIf"],[3,"label","options","value","defaultValue","key",4,"ngIf"],[3,"value","defaultValue","key","label",4,"ngIf"],[3,"label","options","key","value"],[3,"label","options","key"],[3,"label","options","value","defaultValue","key"],[3,"value","defaultValue","key","label"],[3,"endpoint","type","key","inputFormControl","filterChange"],["filterCohort",""],[3,"clearInputLabel","searchLabel","searchPlaceholder","backLabel","changeSearchText","triggerSearch"],[1,"count-all-items"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["triggerIcon","sort-top","position","end",3,"defaultValue","options","triggerText","ariaLabel","selectOption"],[1,"discussion-thread__thread-items-content"],[1,"discussion-thread__thread-content",3,"ngClass"],["class","discussion-thread__item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"discussion-thread__item"],["class","relation-info ui-typography-subtitle ui-color-typography-secondary",4,"ngIf"],[1,"relation-info","ui-typography-subtitle","ui-color-typography-secondary"],[1,"label"],[3,"routerLink"],[1,"discussion-thread__thread-loading"],["size","sm"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"trigger"],[1,"page-list__blank-slate","question-and-answers-list__blank-slate",3,"title","description","illustrationName"],[1,"loading-container-flex"],[3,"size"],[1,"questions-and-answers-footer","wrapper-shadow","ui-background-surface"],[1,"btn-align-beginning"],[3,"label","ariaLabel","iconName","color","iconColor","trigger",4,"ngIf"],[3,"color","iconColor","label","ariaLabel","trigger",4,"ngIf"],[3,"label","ariaLabel","iconName","color","iconColor","trigger"],[3,"color","iconColor","label","ariaLabel","trigger"],[1,"ui-typography-subtitle"],[4,"ngIf","ngIfElse"],["pluralLabel",""],[3,"message","title","titleActionText","avatarIcon","avatarImageUrl","avatarText","dislikeActive","likeActive","likes","dislikes","time","showBestReplyButton","bestReplyActive","bestReplyLabel","showReplyButton","replyButtonLabel","showDislikeButton","showLikeButton","like","dislike","reply","bestReply"],["uiSize","sm","triggerType","icon","iconName","more-horizontal","tooltipPosition","above","menuHorizontalAlignment","before",1,"ui-menu-action",3,"selectable","selectOption"],["id","ui-button-menu-aria-label",3,"value","color",4,"ngFor","ngForOf"],["id","ui-button-menu-aria-label",3,"value","color"],[3,"ngClass"],[1,"logged-user-information-box","ui-display-flex"],[3,"size","imageUrl","text","iconName"],[1,"user-name-label","ui-typography-heading-5"],[3,"inputFormControl","tributeCollection",4,"ngIf"],[1,"text-area-cta-container"],["class","hint-box ui-typography-subtitle ui-color-typography-secondary",4,"ngIf"],[3,"label","color","click",4,"ngIf"],[3,"inputFormControl","tributeCollection"],[1,"hint-box","ui-typography-subtitle","ui-color-typography-secondary"],[3,"label","color","click"],["btnNewRef",""],["btnEditRef",""],[3,"channelId","isPageComponent","closed$"]],template:function(e,t){1&e&&(n.dd(0,be,1,1,"widget-title",0),n.dd(1,wt,18,26,"dcb-ui-data-browser",1),n.wc(2,"async"),n.dd(3,yt,3,7,"ui-blank-slate",2),n.wc(4,"async"),n.dd(5,kt,4,2,"ng-template",null,3,n.ed),n.dd(7,xt,9,31,"ng-template",null,4,n.ed),n.dd(9,At,10,15,"ng-template",null,5,n.ed),n.dd(11,Lt,1,2,"doc-ask-expert-panel",6)),2&e&&(n.Dc("ngIf",t.widgetTitle),n.Mb(1),n.Dc("ngIf",!1===n.xc(2,4,t.datasource.noContent$)),n.Mb(2),n.Dc("ngIf",n.xc(4,6,t.datasource.noContent$)),n.Mb(8),n.Dc("ngIf",t.showAskTheExpertPanel))},directives:[de.p,ue.a,he.jb,he.kb,de.n,he.xb,he.sb,he.qb,he.ob,pe.a,he.nb,he.lb,de.u,he.mb,de.o,he.Ad,he.Dd,I.k,he.Bd,he.fd,he.z,he.o,he.G,he.uc,he.Nd,he.s,he.cd,he.v,he.e,me.a,ge.a],pipes:[de.b,S.b,c.a],styles:[".page-list-base .paginator{margin-top:auto}.page-list-base .paginator--with-massive{margin-top:inherit}.page-list-base .page-list-base__massive-actions-bar{margin-top:auto}.page-list-base .loading-container{position:fixed;top:0;left:0;z-index:10;display:flex;align-items:center;justify-content:center;width:100%;height:100vh;pointer-events:none}.page-list-base .page-list__blank-slate{margin-top:50px}.page-list__table .hyd-table .hyd-table-body{overflow-y:auto}hyd-table.page-list__table,hyd-table.page-list__table div.hyd-table,hyd-table.page-list__table div.hyd-table .hyd-table-body{flex:1 1 auto;display:flex;flex-direction:column;min-height:10px}.page-list__table .hyd-table .hyd-table-head,.page-list__table .hyd-table .hyd-table-row{flex-shrink:0}.page-list__table .skill-group-name{font-weight:600}.page-list__table .table-icon-cell{display:flex;align-items:center;justify-content:center;font-weight:600;text-decoration:none;cursor:pointer}.page-list__table .table-icon-cell.table-icon-cell--no-link{color:var(--hyd-color-typography-primary);cursor:default}.page-list__table .table-icon-cell--with-element{color:var(--ui-color-typography-accent)}.page-list__table .table-icon-cell--without-element{color:var(--ui-color-semantic-alert)}.page-list__table .table-icon-cell--all{color:var(--ui-color-typography-primary);cursor:default}.page-list__table .table-icon-cell .number{text-align:right}.router-outlet:not(.direction-rtl):not(.heracles-root) .page-list__table .table-icon-cell .number{width:50%}.router-outlet.direction-rtl:not(.heracles-root) .page-list__table .table-icon-cell .number{width:auto}.page-list__table .table-icon-cell .table-icon-cell__icon{text-align:left;vertical-align:middle}.router-outlet:not(.direction-rtl):not(.heracles-root) .page-list__table .table-icon-cell .table-icon-cell__icon{width:50%}.router-outlet.direction-rtl:not(.heracles-root) .page-list__table .table-icon-cell .table-icon-cell__icon{width:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) .page-list__table .table-icon-cell .table-icon-cell__icon{padding-left:5px}.router-outlet.direction-rtl:not(.heracles-root) .page-list__table .table-icon-cell .table-icon-cell__icon{padding-right:5px}.page-list__table .table-icon-cell .table-icon-cell__icon.publish-icon:hover{cursor:pointer}.page-list__table .table-icon-cell .zmdi-check-circle,.page-list__table .table-icon-cell .zmdi-circle{line-height:38px}.page-list__table .page-list__name-cell{font-weight:600}.page-list__table .table-thumbnail-cell{display:flex;align-items:center;justify-content:center;height:100%}.page-list__table .table-avatar.table-avatar--default .ui-avatar-wrapper .ui-avatar-body{background-size:125px auto}.page-list__data-browser,.page-list__data-browser .docebo-data-browser,.page-list__data-browser .grid-content-container.mdl-grid .data-browser-content.mdl-cell,.page-list__data-browser .section-wrapper{display:flex;flex:1 1 auto;flex-direction:column;min-height:10px}.page-list__data-browser,.page-list__data-browser .docebo-data-browser,.page-list__data-browser .grid-content-container.mdl-grid,.page-list__data-browser .section-wrapper{height:100%}.page-list__data-browser{border-top:var(--hyd-size-border-xs) solid var(--hyd-color-border-neutral)}.page-list__data-browser .docebo-data-browser #sidebar-filters{width:330px;margin:0;padding:0;background-color:var(--hyd-color-layout-surface)}.page-list__data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper{border-bottom:none}.page-list__data-browser .docebo-data-browser .full-width-header-container{height:50px}.page-list__data-browser .grid-content-container.mdl-grid .data-browser-content.mdl-cell{height:100%}.page-list__data-browser .mdl-grid{margin:0}.page-list__data-browser .mdl-grid.grid-content-container{flex:1 1 auto;min-height:10px;margin:0}.page-list__data-browser .grid-content-container.mdl-grid>.mdl-cell.mdl-cell--12-col{width:100%;margin:0}.page-list__data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col{flex-grow:0;width:calc(100% - 330px);margin:0}.page-list__data-browser .docebo-data-browser .mdl-grid .mdl-cell.header-row{margin:0}.page-list__data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab{display:flex;flex-direction:column;height:100%}.page-list__data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .clear-filters{margin-top:auto;border-top:1px solid var(--ui-color-badge-background-light)}.color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}.page-list__dcb-ui-data-browser,.page-list__dcb-ui-data-browser .page-list__dcb-ui-data-browser-content,.page-list__dcb-ui-data-browser .ui-data-browser-content,.page-list__dcb-ui-data-browser .ui-data-browser-wrapper{height:100%;flex:1 1 auto;display:flex;flex-direction:column;min-height:10px}.page-list-base__right-panel-body,.page-list-base__right-panel-body .doc-layout-right-panel-content.scrollable{overflow-y:visible}.question-and-answers-list__blank-slate{display:block}doc-questions-and-answers-widget,ui-message{position:relative;display:flex;flex-direction:column}doc-questions-and-answers-widget a,ui-message a{overflow-wrap:anywhere}doc-questions-and-answers-widget .page-list__dcb-ui-data-browser-content--widget.panel-opened{margin-left:var(--ui-spacing-sm)}:host-context([dir=rtl]) doc-questions-and-answers-widget .page-list__dcb-ui-data-browser-content--widget.panel-opened{margin-right:var(--ui-spacing-sm);margin-left:0}doc-questions-and-answers-widget .discussion-thread__thread-items-content{margin-top:var(--ui-spacing-sm)}doc-questions-and-answers-widget .discussion-thread__thread-content{position:relative;width:100%;box-sizing:border-box}doc-questions-and-answers-widget .discussion-thread__thread-content.has-content{background-color:var(--ui-color-layout-surface);box-shadow:var(--ui-shadow-md) var(--ui-color-layout-shadow)}doc-questions-and-answers-widget .discussion-thread__thread-content.has-header{margin-top:var(--ui-spacing-sm)}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item{position:relative;padding:var(--ui-spacing-md) var(--ui-spacing-md) 0}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item~.discussion-thread__item{border-top:var(--ui-size-border-xs) solid var(--ui-color-border-neutral)}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item~.discussion-thread__item:before{-webkit-clip-path:inset(0 -15px -15px -15px);clip-path:inset(0 -15px -15px -15px)}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item .relation-info{margin-bottom:var(--ui-spacing-sm);margin-left:calc(var(--ui-size-avatar-sm) + var(--ui-spacing-xxs));font-weight:var(--ui-typography-weight-semibold)}[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item .relation-info{margin-right:calc(var(--ui-size-avatar-sm) + var(--ui-spacing-xxs));margin-left:unset}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item .relation-info a{font-weight:inherit;font-size:inherit}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item .relation-info .label{margin-right:var(--ui-spacing-micro)}[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item .relation-info .label{margin-right:unset;margin-left:var(--ui-spacing-micro)}doc-questions-and-answers-widget .discussion-thread__thread-content.inline-view .discussion-thread__item:not(:first-child){padding:0 var(--ui-spacing-md)}doc-questions-and-answers-widget .discussion-thread__thread-content.inline-view .discussion-thread__item~.discussion-thread__item{border-top:unset}doc-questions-and-answers-widget .discussion-thread__thread-content rich-textarea .placehoder-loading{top:0;height:100%}doc-questions-and-answers-widget .discussion-thread__thread-content .fr-emoticon.fr-emoticon-img{font-size:inherit;height:1em;width:1em;min-height:20px;min-width:20px;display:inline-block;margin:0;vertical-align:text-bottom;line-height:1}doc-questions-and-answers-widget .discussion-thread__thread-content .logged-user-information-box{align-items:center;padding-bottom:var(--ui-spacing-xs)}doc-questions-and-answers-widget .discussion-thread__thread-content .logged-user-information-box .user-name-label{padding:0 var(--ui-spacing-xxs)}doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container{position:relative;padding-bottom:var(--ui-spacing-sm)}doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container:not(.is-root){margin-right:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3))}[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container:not(.is-root){margin-right:unset;margin-left:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3))}doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container rich-textarea{position:relative;display:block}doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container.has-replies .text-area-cta-container,doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container.has-replies rich-textarea{margin-left:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3))}[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container.has-replies .text-area-cta-container,[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container.has-replies rich-textarea{margin-left:unset;margin-right:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3))}doc-questions-and-answers-widget .discussion-thread__thread-content .reply-textarea-container{position:relative;margin-left:calc(var(--ui-size-avatar-sm) + var(--ui-spacing-xxs));padding-bottom:var(--ui-spacing-sm);margin-right:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3))}[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .reply-textarea-container{margin-right:unset;margin-left:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3));margin-left:unset;margin-right:calc(var(--ui-size-avatar-sm) + var(--ui-spacing-xxs))}doc-questions-and-answers-widget .discussion-thread__thread-content .text-area-cta-container{display:flex;justify-content:flex-end;margin:var(--ui-spacing-xxs) 0}doc-questions-and-answers-widget .discussion-thread__thread-content .text-area-cta-container .hint-box{flex-grow:1}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__thread-loading{display:block;padding-top:var(--ui-spacing-xxs);padding-bottom:var(--ui-spacing-md)}doc-questions-and-answers-widget .discussion-thread__thread-content dcb-ui-message-aside{display:flex;flex-direction:column;justify-content:center;padding:0 var(--ui-spacing-xxs)}doc-questions-and-answers-widget .questions-and-answers-footer{display:flex;justify-content:flex-end;margin-top:var(--ui-spacing-sm);padding:var(--ui-spacing-xxs) var(--ui-spacing-sm);box-shadow:var(--ui-shadow-md) var(--ui-color-layout-shadow)}doc-questions-and-answers-widget .questions-and-answers-footer .btn-align-beginning{flex-grow:1}doc-questions-and-answers-widget .count-all-items{margin:auto var(--hyd-spacing-sm)}doc-questions-and-answers-widget .loading-container-flex{display:flex;padding:var(--ui-spacing-md);align-content:center;justify-content:center}"],encapsulation:2,changeDetection:0}),e=Object(s.b)([Object(l.a)({name:"questionsandanswers-new",module:"shared",settings:R})],e),e})()},yKow:function(e,t,i){var s=i("e/Dd"),n=i("NPxG"),a=i("ekOh"),o=i("u/Db"),r=i("J6Nv"),c=i("49sm"),l=s.getBCHDigit(7973);function d(e,t){return o.getCharCountIndicator(e,t)+4}function u(e,t){var i=0;return e.forEach(function(e){var s=d(e.mode,t);i+=s+e.getBitsLength()}),i}t.from=function(e,t){return r.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,i){if(!r.isValid(e))throw new Error("Invalid QR Code version");void 0===i&&(i=o.BYTE);var a=8*(s.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,t));if(i===o.MIXED)return a;var c=a-d(i,e);switch(i){case o.NUMERIC:return Math.floor(c/10*3);case o.ALPHANUMERIC:return Math.floor(c/11*2);case o.KANJI:return Math.floor(c/13);case o.BYTE:default:return Math.floor(c/8)}},t.getBestVersionForData=function(e,i){var s,n=a.from(i,a.M);if(c(e)){if(e.length>1)return function(e,i){for(var s=1;s<=40;s++)if(u(e,s)<=t.getCapacity(s,i,o.MIXED))return s}(e,n);if(0===e.length)return 1;s=e[0]}else s=e;return function(e,i,s){for(var n=1;n<=40;n++)if(i<=t.getCapacity(n,s,e))return n}(s.mode,s.getLength(),n)},t.getEncodedBits=function(e){if(!r.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;s.getBCHDigit(t)-l>=0;)t^=7973<<s.getBCHDigit(t)-l;return e<<12|t}},yoPb:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var s=i("ofXK"),n=i("tfGn"),a=i("S2Qf"),o=i("y0sE"),r=i("lWmL"),c=i("nUpK"),l=i("fXoL"),d=i("l7P3"),u=i("AurG");let h=(()=>{class e{constructor(e,t,i){this.store=e,this.widgetRenderActions=t,this.toggle=i,this.toggle.isOn(a.f.TOGGLE_COACH_PHASE_1)&&this.store.dispatch(this.widgetRenderActions.registerSingleWidget(o.a,"shared"))}}return e.\u0275fac=function(t){return new(t||e)(l.nc(d.d),l.nc(u.a),l.nc(a.g))},e.\u0275mod=l.bc({type:e}),e.\u0275inj=l.ac({providers:[r.a],imports:[[s.c,c.ub,c.p,c.gd,n.a,c.vc,c.t,c.f,c.H,c.Cd,c.A,c.dd,c.bc,c.Mb,c.Ob,c.Nb,c.Yb,c.Zb]]}),e})()},zanj:function(e,t,i){"use strict";i.d(t,"a",function(){return be});var s=i("ofXK"),n=i("tfGn"),a=i("tk/3"),o=i("fXoL"),r=i("3Pt+"),c=i("wI8q"),l=i("GIHc"),d=i("NJk+"),u=i("PsRC"),h=i("TrxT"),p=i("UxkS"),m=i("8EDT"),g=i("Gnzr"),b=i("lJxs"),f=i("IzEk"),v=i("pLZG"),_=i("/uUt"),w=i("Kj3r"),y=i("1G5W"),C=i("/76g"),S=i("Z0T5"),T=i("D/g0"),k=i("+sIT"),I=i("nUpK"),x=i("gvJE");const D=["fileInput"];function O(e,t){1&e&&(o.ec(0,"ui-notification-inline",8),o.wc(1,"t")),2&e&&o.Dc("title",o.xc(1,1,"A thumbnail is required for this operation. Please correct this issue before continuing"))}function E(e,t){1&e&&(o.jc(0,"ui-carousel-item"),o.jc(1,"div",9),o.jc(2,"div",10),o.ec(3,"ui-spinner",11),o.ic(),o.ic(),o.ic()),2&e&&(o.Mb(3),o.Dc("size","sm")("color","neutral"))}function P(e,t){if(1&e){const e=o.kc();o.jc(0,"ui-carousel-item"),o.jc(1,"ui-image-selector",13),o.rc("selectionChange",function(i){o.Uc(e);const s=t.$implicit;return o.vc(2).selectThumbnail(i,s.url)}),o.ic(),o.ic()}if(2&e){const e=t.$implicit,i=t.index,s=o.vc(2);o.Mb(1),o.Dc("size","sm")("selectable",!(1===s.thumbnailService.suggestedImages.length&&s.getsDefaultPlaceholderOnUpload))("src",e.url)("selected",s.isSelectedImage(i))}}function M(e,t){if(1&e&&(o.hc(0),o.dd(1,P,2,4,"ui-carousel-item",12),o.gc()),2&e){const e=o.vc();o.Mb(1),o.Dc("ngForOf",e.thumbnailService.suggestedImages)("ngForTrackBy",e.trackBy)}}function A(e,t){if(1&e){const e=o.kc();o.jc(0,"ui-carousel-item"),o.jc(1,"ui-image-selector",13),o.rc("selectionChange",function(t){o.Uc(e);const i=o.vc();return i.selectThumbnail(t,i.defaultPlaceholderImage.url)}),o.ic(),o.ic()}if(2&e){const e=o.vc();o.Mb(1),o.Dc("size","sm")("selectable",e.thumbnailService.suggestedImages.length>0)("src",e.defaultPlaceholderImage.url)("selected",e.isSelectedImage(e.thumbnailService.suggestedImages.length+1))}}let L=(()=>{class e extends h.a{constructor(e,t,i,s,n){super(),this.thumbnailService=e,this.changeRef=t,this.imageCropper=i,this.uploadService=s,this.docLayoutService=n,this.thumbnailFormControl=new r.e(""),this.dictionary=new u.a,this.isLoadingImage=!1,this.uploadOptions={collection:"assets",subfolder:"app7020/small",maxFileSize:d.a.THUMBNAIL_DATA.maxSize,allowedExtensions:["gif","ico","jpeg","jpg","png"]},this.buttonUploadParams={label:this.dictionary.uploadImageLabel,style:g.a.BUTTON},this.uploadCroppedThumbnail=(e,t)=>{t.subscribe(t=>{const i=t=>{this.isLoadingImage=!1,this.changeRef.markForCheck();let i=this.uploadService.stripQuerystring(t);i.startsWith("http:")||i.startsWith("https:")||(i=i.indexOf("//")>-1?`${window.location.protocol}${i}`:`${window.location.protocol}//${i}`),this.thumbnailFormControl.setValue(i),this.addImageToSuggested(i),e.closeDialog()},s=e=>{const t={name:e.filename_hashed,type:this.uploadService.getFileExtension(e.filename_hashed)};this.uploadService.getSignedUrl(t,"assets","app7020/original",!0,"read").pipe(Object(b.a)(e=>e.data),Object(f.a)(1)).subscribe(e=>i(e.url))},n=(e,t)=>{this.uploadService.uploadToS3(e,t.url).pipe(Object(v.a)(e=>e.type===a.e.Response),Object(f.a)(1)).subscribe(()=>s(t))};(e=>{this.uploadService.getSignedUrl(e,"assets","app7020/original",!1).pipe(Object(b.a)(e=>e.data),Object(f.a)(1)).subscribe(n.bind(this,e))})(t)}),e.getCroppedThumbnail(p.c.FILE),e.isCropperReady=!1}}get getsDefaultPlaceholderOnUpload(){return[c.b.IMAGE,c.b.VIDEO].indexOf(this.contentType)>-1}get defaultPlaceholderImage(){return{url:c.e.assetDefaultImage(this.contentType),name:" "}}ngOnInit(){this.setDefaultAssetImage(),this.thumbnailFormControl.valueChanges.pipe(Object(_.a)(),Object(w.a)(500),Object(y.a)(this.ngUnsubscribe)).subscribe(()=>{this.setDefaultAssetImage()})}setDefaultAssetImage(){this.thumbnailFormControl.value.length&&this.addImageToSuggested(this.thumbnailFormControl.value)}cropUploadedThumbnail(e){if(!e)return;const t=this.dictionary.cropper;this.imageCropper.configureImageEditor({title:t.title,subtitle:t.subtitle,aspectRatio:m.a.RECTANGULAR,minDimensions:{height:d.a.THUMBNAIL_DATA.height,width:d.a.THUMBNAIL_DATA.width},image:{url:e.public_url,name:e.new_filename},actions:[{label:t.cancel,type:p.a.CANCEL,handler:e=>{this.isLoadingImage=!1,this.changeRef.detectChanges(),e.closeDialog()}},{label:t.confirm,type:p.a.CONFIRM,handler:this.uploadCroppedThumbnail}]}),this.imageCropper.openImageEditor()}thumbnailUploadInitialized(){this.isLoadingImage=!0}selectThumbnail(e,t){e&&this.thumbnailFormControl.setValue(t)}isSelectedImage(e){return this.thumbnailService.suggestedImages[e]?this.thumbnailService.suggestedImages[e].url===this.thumbnailFormControl.value:this.defaultPlaceholderImage.url===this.thumbnailFormControl.value}trackBy(e,t){return t.url}uploadNewThumbnail(e){if(!e.target.files[0])return;if(!this.isFileValid(e.target.files[0]))return void this.docLayoutService.toast.showToast({message:C.a.t("standard","Invalid file extension, allowed: {allow}",{allow:this.uploadOptions.allowedExtensions.join(", ")}),type:"error"});this.thumbnailUploadInitialized();const t=e=>{this.uploadService.getSignedUrl(e,this.uploadOptions.collection,this.uploadOptions.subfolder,!0,"read").pipe(Object(b.a)(e=>e.data),Object(f.a)(1)).subscribe(t=>{const i=this.uploadService.stripQuerystring(t.url);this.fileInput.value="",this.cropUploadedThumbnail({new_filename:e.name,public_url:i})})},i=(e,i)=>{this.uploadService.uploadToS3(e,i.url).pipe(Object(v.a)(e=>e.type===a.e.Response),Object(f.a)(1)).subscribe(s=>t(Object.assign(Object.assign({},e),{name:i.filename_hashed})))};(e=>{this.uploadService.getSignedUrl(e,this.uploadOptions.collection,this.uploadOptions.subfolder,!1).pipe(Object(b.a)(e=>e.data),Object(f.a)(1)).subscribe(i.bind(this,e))})(e.target.files[0])}addImageToSuggested(e){e!==this.defaultPlaceholderImage.url&&(this.thumbnailService.suggestedImages.map(e=>e.url).indexOf(e)>-1||(this.thumbnailService.suggestedImages.unshift({url:e,name:" "}),this.changeRef.detectChanges()))}isFileValid(e){const t=this.uploadService.getFileExtension(e.name);return-1!==this.uploadOptions.allowedExtensions.indexOf(t)}}return e.\u0275fac=function(t){return new(t||e)(o.dc(S.a),o.dc(o.i),o.dc(T.a),o.dc(l.a),o.dc(k.a))},e.\u0275cmp=o.Xb({type:e,selectors:[["her-asset-thumbnail"]],viewQuery:function(e,t){if(1&e&&o.md(D,1,o.o),2&e){let e;o.Qc(e=o.sc())&&(t.fileInput=e.first)}},inputs:{thumbnailFormControl:"thumbnailFormControl",contentType:"contentType"},features:[o.Lb([l.a]),o.Jb],decls:15,vars:17,consts:[[3,"title",4,"ngIf"],[3,"showSeeAllLink","title"],[4,"ngIf"],[1,"thumbnail-selection"],[1,"description","hyd-typography-subtitle","hyd-color-typography-secondary"],[1,"image-upload-btn",3,"ariaLabel","label","trigger"],["aria-hidden","true","type","file","name","profile_pic","accept",".jpg, .jpeg, .png, .ico, .gif",2,"display","none",3,"change"],["fileInput",""],[3,"title"],[1,"image-wrapper","hyd-background-backdrop"],[1,"spinner-wrapper"],[3,"size","color"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"size","selectable","src","selected","selectionChange"]],template:function(e,t){if(1&e){const e=o.kc();o.dd(0,O,2,3,"ui-notification-inline",0),o.jc(1,"ui-carousel",1),o.wc(2,"t"),o.dd(3,E,4,2,"ui-carousel-item",2),o.dd(4,M,2,2,"ng-container",2),o.dd(5,A,2,4,"ui-carousel-item",2),o.ic(),o.jc(6,"div",3),o.jc(7,"div",4),o.fd(8),o.wc(9,"t"),o.ic(),o.jc(10,"ui-button-raised-primary",5),o.rc("trigger",function(){return o.Uc(e),o.Rc(14).click()}),o.wc(11,"t"),o.wc(12,"t"),o.ic(),o.jc(13,"input",6,7),o.rc("change",function(e){return t.uploadNewThumbnail(e)}),o.ic(),o.ic()}2&e&&(o.Dc("ngIf",t.thumbnailFormControl.touched&&!t.thumbnailFormControl.valid),o.Mb(1),o.Dc("showSeeAllLink",!1)("title",o.xc(2,9,t.dictionary.sectionTitle)),o.Mb(2),o.Dc("ngIf",t.isLoadingImage),o.Mb(1),o.Dc("ngIf",t.thumbnailService.suggestedImages.length),o.Mb(1),o.Dc("ngIf",!t.getsDefaultPlaceholderOnUpload||t.getsDefaultPlaceholderOnUpload&&!t.thumbnailService.suggestedImages.length),o.Mb(3),o.hd(" ",o.xc(9,11,t.dictionary.description)," "),o.Mb(2),o.Dc("ariaLabel",o.xc(11,13,t.buttonUploadParams.label))("label",o.xc(12,15,t.buttonUploadParams.label)))},directives:[s.p,I.ab,I.F,I.Ec,I.bb,I.fd,s.o,I.Jb],pipes:[x.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   ui-notification-inline[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-sm)}[_nghost-%COMP%]  .docebo-button.button-rectangular{margin:0}[_nghost-%COMP%]  image-preview .details-bar{padding:0}[_nghost-%COMP%]  image-preview .image-selection{transform:scale(.6)}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{font-weight:var(--hyd-typography-weight-semibold);margin-bottom:var(--hyd-spacing-md)}[_nghost-%COMP%]   .thumbnail-selection[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .image-upload-btn[_ngcontent-%COMP%]{margin-top:var(--hyd-spacing-xxs)}[_nghost-%COMP%]   .image-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:var(--hyd-size-contentimage-sm);padding-bottom:50%;flex-shrink:0}[_nghost-%COMP%]   .spinner-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;height:100%;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   ui-carousel-item[_ngcontent-%COMP%]:not(:last-of-type){margin-right:var(--hyd-spacing-sm)}[dir=rtl]   [_nghost-%COMP%]   ui-carousel-item[_ngcontent-%COMP%]:not(:last-of-type){margin-left:var(--hyd-spacing-sm)}"]}),e})();var j=i("Mc4G"),F=i("0m2H"),R=i("rL2y"),N=i("6fYS"),U=i("9jGm"),q=i("lfsz"),z=i("a4yA"),V=i("ScO8"),B=i("Jc1x"),G=i("rnoZ"),$=i("076Y"),H=i("6CNT"),Y=i("5EG7");const W=["assetSkills"];function Q(e,t){if(1&e&&(o.hc(0),o.jc(1,"div",0),o.jc(2,"div",1),o.fd(3),o.wc(4,"t"),o.jc(5,"div",5),o.fd(6),o.wc(7,"t"),o.ic(),o.ic(),o.ec(8,"app7020-asset-tags",6),o.ic(),o.gc()),2&e){const e=o.vc();o.Mb(3),o.hd(" ",o.xc(4,4,e.dictionary.tagsTitle)," "),o.Mb(3),o.hd(" ",o.xc(7,6,e.dictionary.tagsSubtitle)," "),o.Mb(2),o.Dc("inputFormControl",e.formControl(e.formKeys.TAGS))("preselected",e.preselectedTags)}}function K(e,t){1&e&&(o.jc(0,"div",11),o.ec(1,"ui-spinner",12),o.ic()),2&e&&(o.Mb(1),o.Dc("size","lg"))}function X(e,t){if(1&e){const e=o.kc();o.jc(0,"skill-chip",15),o.rc("selected",function(t){return o.Uc(e),o.vc(3).skillsShareService.onSkillChipSelected(t)}),o.ic()}2&e&&o.Dc("skill",t.$implicit)}function J(e,t){if(1&e&&(o.hc(0),o.jc(1,"div",13),o.dd(2,X,1,1,"skill-chip",14),o.wc(3,"async"),o.ic(),o.gc()),2&e){const e=o.vc(2);o.Mb(2),o.Dc("ngForOf",o.xc(3,1,e.skillsShareService.skillsSuggestion$))}}function Z(e,t){if(1&e){const e=o.kc();o.hc(0),o.jc(1,"div",7),o.jc(2,"div",1),o.fd(3),o.wc(4,"t"),o.jc(5,"div",5),o.fd(6),o.wc(7,"t"),o.ic(),o.ic(),o.dd(8,K,2,1,"div",8),o.wc(9,"async"),o.dd(10,J,4,3,"ng-container",4),o.wc(11,"async"),o.wc(12,"async"),o.jc(13,"app7020-asset-skills",9,10),o.rc("itemSelected",function(t){return o.Uc(e),o.vc().onSkillItemSelected(t)})("itemDeselected",function(t){return o.Uc(e),o.vc().onSkillItemDeselected(t)})("selectedItemsChanged",function(t){return o.Uc(e),o.vc().skillSelectedItemsChanged.emit(t)}),o.ic(),o.ic(),o.gc()}if(2&e){const e=o.vc();o.Mb(3),o.hd(" ",o.xc(4,7,e.dictionary.skillsTitle)," "),o.Mb(3),o.hd(" ",o.xc(7,9,e.dictionary.skillsSubtitle)," "),o.Mb(2),o.Dc("ngIf",o.xc(9,11,e.skillsShareService.skillsSuggestionLoading$)),o.Mb(2),o.Dc("ngIf",o.xc(11,13,e.skillsShareService.skillsSuggestion$)&&!o.xc(12,15,e.skillsShareService.skillsSuggestionLoading$)),o.Mb(3),o.Dc("inputFormControl",e.skillsFormControl)("preselected",e.skillsPreselection)("mappedToId",!0)}}let ee=(()=>{class e extends h.a{constructor(e){super(),this.skillsShareService=e,this.formGroup=new r.h({}),this.skillsPreselection=[],this.skillSelectedItemsChanged=new o.q,this.skillSuggestionsPredictionId=new o.q,this.formKeys=d.b,this.preselectedTags=[],this.dictionary={title:C.a.t("app7020","Title"),description:C.a.t("app7020","Description"),fileDescPlaceholder:C.a.t("standard","Type text here..."),detailsTitle:C.a.t("app7020","Details"),tagsTitle:C.a.t("app7020","Tags"),tagsSubtitle:C.a.t("app7020","Assign different tags to improve content search"),skillsTitle:C.a.t("standard","Skills"),skillsSubtitle:C.a.t("app7020","Assign skills to this asset to improve content search")}}get skillsFormControl(){var e;return null!==(e=this.formGroup.get(d.b.SKILLS))&&void 0!==e?e:new r.e([])}ngOnInit(){const e=this.formGroup.getRawValue();e.hasOwnProperty(d.b.TAGS)&&(this.preselectedTags=e[d.b.TAGS].map(e=>({id:e,name:e}))),this.skillsShareService.skillsShareActive&&(this.addSkillSuggestionSelectedListener(),this.loadSkillsSuggestion()),this.skillsShareService.skillSuggestionsPredictionId$.pipe(Object(v.a)(e=>Boolean(e))).subscribe(e=>this.skillSuggestionsPredictionId.emit(e))}get descriptionPreset(){return z.c.BASE}formControl(e){return this.formGroup.get(e)}get canSeeTags(){const e=q.c.getInstance();return e.isCurrentUserA(q.c.LEVEL_SUPERADMIN)||e.isExpert()}onFocusOut(){this.skillsShareService.skillsShareActive&&this.loadSkillsSuggestion()}addSkillSuggestionSelectedListener(){this.skillsShareService.skillSuggestionSelected$.pipe(Object(y.a)(this.ngUnsubscribe)).subscribe(e=>this.onSkillSuggestionSelected(e))}onSkillItemSelected(e){this.skillsShareService.updateSkillChip(e,!0)}onSkillItemDeselected(e){this.skillsShareService.updateSkillChip(e,!1)}onSkillSuggestionSelected(e){this.assetSkills.toggleElement({id:e.code,name:e.name})}loadSkillsSuggestion(){var e,t;const i=this.formGroup.getRawValue(),s=null==i?void 0:i[d.b.TITLE],n=null!==(t=(new DOMParser).parseFromString(null!==(e=null==i?void 0:i[d.b.DESCRIPTION])&&void 0!==e?e:"","text/html").body.textContent)&&void 0!==t?t:"";(null==s?void 0:s.length)&&(null==n?void 0:n.length)&&this.skillsShareService.loadSuggestions(s,n,this.skillsPreselection.map(e=>e.id))}}return e.\u0275fac=function(t){return new(t||e)(o.dc(V.a))},e.\u0275cmp=o.Xb({type:e,selectors:[["her-asset-details"]],viewQuery:function(e,t){if(1&e&&o.md(W,1),2&e){let e;o.Qc(e=o.sc())&&(t.assetSkills=e.first)}},inputs:{formGroup:"formGroup",skillsPreselection:"skillsPreselection"},outputs:{skillSelectedItemsChanged:"skillSelectedItemsChanged",skillSuggestionsPredictionId:"skillSuggestionsPredictionId"},features:[o.Jb],decls:9,vars:17,consts:[[1,"section-box"],[1,"section-title"],[3,"floating_label","id","inputFormControl","label","focusout"],[3,"charCounterMax","charCounter","inputFormControl","label","placeholderText","preset","focusout"],[4,"ngIf"],[1,"section-subtitle","hyd-color-typography-secondary","hyd-typography-subtitle"],[3,"inputFormControl","preselected"],["id","newAssetSkills",1,"section-box"],["class","skill-suggestion-spinner",4,"ngIf"],[3,"inputFormControl","preselected","mappedToId","itemSelected","itemDeselected","selectedItemsChanged"],["assetSkills",""],[1,"skill-suggestion-spinner"],[3,"size"],[1,"skill-suggestions"],[3,"skill","selected",4,"ngFor","ngForOf"],[3,"skill","selected"]],template:function(e,t){1&e&&(o.jc(0,"div",0),o.jc(1,"div",1),o.fd(2),o.wc(3,"t"),o.ic(),o.jc(4,"textfield",2),o.rc("focusout",function(){return t.onFocusOut()}),o.ic(),o.jc(5,"rich-textarea",3),o.rc("focusout",function(){return t.onFocusOut()}),o.wc(6,"t"),o.ic(),o.ic(),o.dd(7,Q,9,8,"ng-container",4),o.dd(8,Z,15,17,"ng-container",4)),2&e&&(o.Mb(2),o.gd(o.xc(3,13,t.dictionary.detailsTitle)),o.Mb(2),o.Dc("floating_label",!0)("id","informal-file-share-title")("inputFormControl",t.formControl(t.formKeys.TITLE))("label",t.dictionary.title),o.Mb(1),o.Dc("charCounterMax",6e3)("charCounter",!0)("inputFormControl",t.formControl(t.formKeys.DESCRIPTION))("label",t.dictionary.description)("placeholderText",o.xc(6,15,t.dictionary.fileDescPlaceholder))("preset",t.descriptionPreset),o.Mb(2),o.Dc("ngIf",t.canSeeTags),o.Mb(1),o.Dc("ngIf",t.skillsShareService.skillsShareActive))},directives:[B.a,G.a,s.p,$.a,H.a,I.fd,s.o,Y.a],pipes:[x.b,s.b],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{font-weight:var(--hyd-typography-weight-semibold);margin-bottom:12px}[_nghost-%COMP%]   rich-textarea[_ngcontent-%COMP%]:not(:last-child){display:block;margin-bottom:var(--hyd-spacing-lg)}.skill-suggestions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.skill-suggestion-spinner[_ngcontent-%COMP%]{text-align:center;margin:15px auto 30px}"]}),e})();var te=i("wsCI"),ie=i("KBLj"),se=i("/hE/");let ne=(()=>{class e{constructor(){this.showNextButton=new o.q,this.optionsLabels=(new ie.a).shareWith,this.shareToPeople=c.e.settings.share_to_people!==c.d.CANT_SHARE}changeRadio(e){this.showNextButton.emit("channel_or_people_share"===e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xb({type:e,selectors:[["her-asset-share-with"]],inputs:{shareFormControl:"shareFormControl"},outputs:{showNextButton:"showNextButton"},decls:8,vars:19,consts:[[1,"section-title"],[3,"boxed","inputFormControl","label","subtitle","value","OnChange"]],template:function(e,t){1&e&&(o.jc(0,"div",0),o.fd(1),o.wc(2,"t"),o.ic(),o.jc(3,"radio",1),o.rc("OnChange",function(e){return t.changeRadio(e)}),o.wc(4,"t"),o.wc(5,"t"),o.ic(),o.jc(6,"radio",1),o.rc("OnChange",function(e){return t.changeRadio(e)}),o.wc(7,"t"),o.ic()),2&e&&(o.Mb(1),o.hd("",o.xc(2,11,t.optionsLabels.sectionTitle),":"),o.Mb(2),o.Dc("boxed",!0)("inputFormControl",t.shareFormControl)("label",o.xc(4,13,t.shareToPeople?t.optionsLabels.channelsAndPeople.label:t.optionsLabels.channelsOnly.label))("subtitle",o.xc(5,15,t.shareToPeople?t.optionsLabels.channelsAndPeople.description:t.optionsLabels.channelsOnly.description))("value","channel_or_people_share"),o.Mb(3),o.Dc("boxed",!0)("inputFormControl",t.shareFormControl)("label",t.optionsLabels.onlyMe.label)("subtitle",o.xc(7,17,t.optionsLabels.onlyMe.description))("value","private"))},directives:[se.a],pipes:[x.b],styles:["her-asset-share-with{display:block}her-asset-share-with radio{display:inline-block}her-asset-share-with radio~radio{margin-top:16px}her-asset-share-with .section-title{font-weight:var(--hyd-typography-weight-semibold);margin-bottom:26px}"],encapsulation:2}),e})();var ae=i("irRc"),oe=i("aT17"),re=i("8lUq"),ce=i("QCRO"),le=i("Akjt"),de=i("fN+k"),ue=i("8Ff5"),he=i("kZHE"),pe=i("wOr6"),me=i("fnIB");const ge=[F.a];let be=(()=>{class e{constructor(){}static forChildren(){return{ngModule:e}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.bc({type:e}),e.\u0275inj=o.ac({providers:[...ge],imports:[[s.c,n.a,U.d.forFeature([...j.a]),I.xc,N.c,R.a]]}),e})();o.Yc(re.a,[le.a,de.a,ue.a,s.u,he.a,pe.a,s.p,te.a,B.a,I.fd,I.o,L,ee,r.p,r.i,ne],[x.b]),o.Yc(ae.a,[le.a,de.a,ue.a,s.u,he.a,pe.a,s.p,te.a,s.n,me.a,I.Eb,L,ee,r.p,r.i,ne],[x.b]),o.Yc(oe.a,[le.a,de.a,ue.a,s.u,he.a,pe.a,s.p,te.a,B.a,L,ee,r.p,r.i,ne],[x.b]),o.Yc(ce.a,[le.a,de.a,ue.a,s.u,he.a,pe.a,s.p,te.a,me.a,L,ee,r.p,r.i,ne],[x.b])},zbwl:function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return r}),i.d(t,"c",function(){return c});var s=i("/76g"),n=i("LvDl"),a=i.n(n);function o(){return e=>{const t=e.value;return a.a.isUndefined(t)||a.a.isEmpty(t)||a.a.isNull(t)?null:a.a.isNaN(Number(t))?{integerPositiveWithZeroValidator:s.a.t("standard","Insert a number value")}:Math.floor(Number(t))!==Number(t)?{integerPositiveWithZeroValidator:s.a.t("standard","Enter a value without decimal")}:Number(t)<0?{integerPositiveWithZeroValidator:s.a.t("standard","Enter a value greater than 0")}:null}}function r(){return e=>{const t=e.value;return a.a.isNaN(Number(t))?{markAttendanceHoursValidator:s.a.t("standard","Insert a number value")}:Math.floor(Number(t))!==Number(t)?{markAttendanceHoursValidator:s.a.t("standard","Enter a value without decimal")}:Number(t)>23||Number(t)<0?{markAttendanceHoursValidator:s.a.t("standard","Enter a value between 0 and 23")}:null}}function c(){return e=>{const t=e.value;return a.a.isNaN(Number(t))?{markAttendanceMinutesValidator:s.a.t("standard","Insert a number value")}:Math.floor(Number(t))!==Number(t)?{markAttendanceMinutesValidator:s.a.t("standard","Enter a value without decimal")}:Number(t)>59||Number(t)<0?{markAttendanceMinutesValidator:s.a.t("standard","Enter a value between 0 and 59")}:null}}}}]);